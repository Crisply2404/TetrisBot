(() => { 
var t=function(t){"use strict";var e={},r=Object.getOwnPropertyNames,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty;function o(t,e){return function(r,n,i){return t(r,n,i)&&e(r,n,i)}}function s(t){return function(e,r,n){if(!e||!r||"object"!=typeof e||"object"!=typeof r)return t(e,r,n);var i=n.cache,o=i.get(e),s=i.get(r);if(o&&s)return o===r&&s===e;i.set(e,r),i.set(r,e);var a=t(e,r,n);return i.delete(e),i.delete(r),a}}function a(t){return r(t).concat(n(t))}var u=Object.hasOwn||function(t,e){return i.call(t,e)};function h(t,e){return t||e?t===e:t===e||t!=t&&e!=e}var l="_owner",c=Object.getOwnPropertyDescriptor,f=Object.keys;function d(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function p(t,e){return h(t.getTime(),e.getTime())}function m(t,e,r){if(t.size!==e.size)return!1;for(var n,i,o={},s=t.entries(),a=0;(n=s.next())&&!n.done;){for(var u=e.entries(),h=!1,l=0;(i=u.next())&&!i.done;){var c=n.value,f=c[0],d=c[1],p=i.value,m=p[0],g=p[1];h||o[l]||!(h=r.equals(f,m,a,l,t,e,r)&&r.equals(d,g,f,m,t,e,r))||(o[l]=!0),l++}if(!h)return!1;a++}return!0}function g(t,e,r){var n,i=f(t),o=i.length;if(f(e).length!==o)return!1;for(;o-- >0;){if((n=i[o])===l&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof)return!1;if(!u(e,n)||!r.equals(t[n],e[n],n,n,t,e,r))return!1}return!0}function v(t,e,r){var n,i,o,s=a(t),h=s.length;if(a(e).length!==h)return!1;for(;h-- >0;){if((n=s[h])===l&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof)return!1;if(!u(e,n))return!1;if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;if(i=c(t,n),o=c(e,n),(i||o)&&(!i||!o||i.configurable!==o.configurable||i.enumerable!==o.enumerable||i.writable!==o.writable))return!1}return!0}function _(t,e){return h(t.valueOf(),e.valueOf())}function y(t,e){return t.source===e.source&&t.flags===e.flags}function b(t,e,r){if(t.size!==e.size)return!1;for(var n,i,o={},s=t.values();(n=s.next())&&!n.done;){for(var a=e.values(),u=!1,h=0;(i=a.next())&&!i.done;)u||o[h]||!(u=r.equals(n.value,i.value,n.value,i.value,t,e,r))||(o[h]=!0),h++;if(!u)return!1}return!0}function x(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}var T="[object Arguments]",E="[object Boolean]",S="[object Date]",A="[object Map]",O="[object Number]",R="[object Object]",w="[object RegExp]",M="[object Set]",P="[object String]",I=Array.isArray,C="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,D=Object.assign,F=Object.prototype.toString.call.bind(Object.prototype.toString);var L=z(),N=z({strict:!0}),B=z({circular:!0}),U=z({circular:!0,strict:!0}),G=z({createInternalComparator:function(){return h}}),k=z({strict:!0,createInternalComparator:function(){return h}}),X=z({circular:!0,createInternalComparator:function(){return h}}),j=z({circular:!0,createInternalComparator:function(){return h},strict:!0});function z(t){void 0===t&&(t={});var e,r=t.circular,n=void 0!==r&&r,i=t.createInternalComparator,a=t.createState,u=t.strict,h=void 0!==u&&u,l=function(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,i={areArraysEqual:n?v:d,areDatesEqual:p,areMapsEqual:n?o(m,v):m,areObjectsEqual:n?v:g,arePrimitiveWrappersEqual:_,areRegExpsEqual:y,areSetsEqual:n?o(b,v):b,areTypedArraysEqual:n?v:x};if(r&&(i=D({},i,r(i))),e){var a=s(i.areArraysEqual),u=s(i.areMapsEqual),h=s(i.areObjectsEqual),l=s(i.areSetsEqual);i=D({},i,{areArraysEqual:a,areMapsEqual:u,areObjectsEqual:h,areSetsEqual:l})}return i}(t),c=function(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,s=t.areRegExpsEqual,a=t.areSetsEqual,u=t.areTypedArraysEqual;return function(t,h,l){if(t===h)return!0;if(null==t||null==h||"object"!=typeof t||"object"!=typeof h)return t!=t&&h!=h;var c=t.constructor;if(c!==h.constructor)return!1;if(c===Object)return i(t,h,l);if(I(t))return e(t,h,l);if(null!=C&&C(t))return u(t,h,l);if(c===Date)return r(t,h,l);if(c===RegExp)return s(t,h,l);if(c===Map)return n(t,h,l);if(c===Set)return a(t,h,l);var f=F(t);return f===S?r(t,h,l):f===w?s(t,h,l):f===A?n(t,h,l):f===M?a(t,h,l):f===R?"function"!=typeof t.then&&"function"!=typeof h.then&&i(t,h,l):f===T?i(t,h,l):(f===E||f===O||f===P)&&o(t,h,l)}}(l);return function(t){var e=t.circular,r=t.comparator,n=t.createState,i=t.equals,o=t.strict;if(n)return function(t,s){var a=n(),u=a.cache,h=void 0===u?e?new WeakMap:void 0:u,l=a.meta;return r(t,s,{cache:h,equals:i,meta:l,strict:o})};if(e)return function(t,e){return r(t,e,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(t,e){return r(t,e,s)}}({circular:n,comparator:c,createState:a,equals:i?i(c):(e=c,function(t,r,n,i,o,s,a){return e(t,r,a)}),strict:h})}var H=e.circularDeepEqual=B,Y=e.circularShallowEqual=X,V=e.createCustomEqual=z,W=e.deepEqual=L,q=e.sameValueZeroEqual=h,Z=e.shallowEqual=G,K=e.strictCircularDeepEqual=U,J=e.strictCircularShallowEqual=j,Q=e.strictDeepEqual=N,$=e.strictShallowEqual=k;return t.circularDeepEqual=H,t.circularShallowEqual=Y,t.createCustomEqual=V,t.deepEqual=W,t.default=e,t.sameValueZeroEqual=q,t.shallowEqual=Z,t.strictCircularDeepEqual=K,t.strictCircularShallowEqual=J,t.strictDeepEqual=Q,t.strictShallowEqual=$,Object.defineProperty(t,"__esModule",{value:!0}),t}({}),e=function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default.Buffer??t:t.Buffer??t}for(var e={},r={byteLength:function(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n},toByteArray:function(t){var e,r,n=u(t),s=n[0],a=n[1],h=new o(function(t,e,r){return 3*(e+r)/4-r}(0,s,a)),l=0,c=a>0?s-4:s;for(r=0;r<c;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],h[l++]=e>>16&255,h[l++]=e>>8&255,h[l++]=255&e;2===a&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,h[l++]=255&e);1===a&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,h[l++]=e>>8&255,h[l++]=255&e);return h},fromByteArray:function(t){for(var e,r=t.length,i=r%3,o=[],s=16383,a=0,u=r-i;a<u;a+=s)o.push(h(t,a,a+s>u?u:a+s));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")}},n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function h(t,e,r){for(var i,o,s=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63;var l={read:function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,h=u>>1,l=-7,c=r?i-1:0,f=r?-1:1,d=t[e+c];for(c+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+t[e+c],c+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+t[e+c],c+=f,l-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=h}return(d?-1:1)*s*Math.pow(2,o-n)},write:function(t,e,r,n,i,o){var s,a,u,h=8*o-i-1,l=(1<<h)-1,c=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=l?(a=0,s=l):s+c>=1?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[r+d]=255&s,d+=p,s/=256,h-=8);t[r+d-p]|=128*m}};return function(t){const e=r,n=l,i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=function(t){+t!=t&&(t=0);return a.alloc(+t)},t.INSPECT_MAX_BYTES=50;const o=2147483647;function s(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,a.prototype),e}function a(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return u(t,e,r)}function u(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!a.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|m(t,e);let n=s(r);const i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Z(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Z(t,ArrayBuffer)||t&&Z(t.buffer,ArrayBuffer))return d(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(Z(t,SharedArrayBuffer)||t&&Z(t.buffer,SharedArrayBuffer)))return d(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return a.from(n,e,r);const i=function(t){if(a.isBuffer(t)){const e=0|p(t.length),r=s(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||K(t.length)?s(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return a.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return h(t),s(t<0?0:0|p(t))}function f(t){const e=t.length<0?0:0|p(t.length),r=s(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function d(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,a.prototype),n}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function m(t,e){if(a.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Z(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(t).length;default:if(i)return n?-1:V(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,r);case"utf8":case"utf-8":return O(this,e,r);case"ascii":return w(this,e,r);case"latin1":case"binary":return M(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function _(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),K(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=a.from(e,n)),a.isBuffer(e))return 0===e.length?-1:y(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):y(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(h(t,o)===h(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(h(t,o+n)!==h(e,n)){r=!1;break}if(r)return o}return-1}function b(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(K(n))return s;t[r+s]=n}return s}function x(t,e,r,n){return q(V(e,t.length-r),t,r,n)}function T(t,e,r,n){return q(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function E(t,e,r,n){return q(W(e),t,r,n)}function S(t,e,r,n){return q(function(t,e){let r,n,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function A(t,r,n){return 0===r&&n===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(r,n))}function O(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128==(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(t){const e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=R));return r}(n)}t.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(t,e,r){return u(t,e,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(t,e,r){return function(t,e,r){return h(t),t<=0?s(t):void 0!==e?"string"==typeof r?s(t).fill(e,r):s(t).fill(e):s(t)}(t,e,r)},a.allocUnsafe=function(t){return c(t)},a.allocUnsafeSlow=function(t){return c(t)},a.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==a.prototype},a.compare=function(t,e){if(Z(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),Z(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=a.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(Z(e,Uint8Array))i+e.length>n.length?(a.isBuffer(e)||(e=a.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!a.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},a.byteLength=m,a.prototype._isBuffer=!0,a.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)v(this,e,e+1);return this},a.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},a.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},a.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?O(this,0,t):g.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(t,e,r,n,i){if(Z(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0);const u=Math.min(o,s),h=this.slice(n,i),l=t.slice(e,r);for(let t=0;t<u;++t)if(h[t]!==l[t]){o=h[t],s=l[t];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},a.prototype.indexOf=function(t,e,r){return _(this,t,e,r,!0)},a.prototype.lastIndexOf=function(t,e,r){return _(this,t,e,r,!1)},a.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return x(this,t,e,r);case"ascii":case"latin1":case"binary":return T(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const R=4096;function w(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function M(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function P(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=J[t[n]];return i}function I(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function C(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,r,n,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function F(t,e,r,n,i){j(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function L(t,e,r,n,i){j(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function N(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(t,e,r,i,o){return e=+e,r>>>=0,o||N(t,0,r,4),n.write(t,e,r,i,23,4),r+4}function U(t,e,r,i,o){return e=+e,r>>>=0,o||N(t,0,r,8),n.write(t,e,r,i,52,8),r+8}a.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUintLE=a.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return n},a.prototype.readUintBE=a.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},a.prototype.readUint8=a.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readBigUInt64LE=Q((function(t){z(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||H(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),a.prototype.readBigUInt64BE=Q((function(t){z(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||H(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),a.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},a.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);let n=e,i=1,o=this[t+--n];for(;n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readBigInt64LE=Q((function(t){z(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||H(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),a.prototype.readBigInt64BE=Q((function(t){z(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||H(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),a.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),n.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),n.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),n.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),n.read(this,t,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){D(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){D(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,1,255,0),this[e]=255&t,e+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeBigUInt64LE=Q((function(t,e=0){return F(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeBigUInt64BE=Q((function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);D(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o|0)-s&255;return e+r},a.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);D(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o|0)-s&255;return e+r},a.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeBigInt64LE=Q((function(t,e=0){return F(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeBigInt64BE=Q((function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeFloatLE=function(t,e,r){return B(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return B(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return U(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return U(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,n){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},a.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=a.isBuffer(t)?t:a.from(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};const G={};function k(t,e,r){G[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function X(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function j(t,e,r,n,i,o){if(t>r||t<e){const r="bigint"==typeof e?"n":"";let n;throw n=0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`,new G.ERR_OUT_OF_RANGE("value",n,t)}!function(t,e,r){z(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||H(e,t.length-(r+1))}(n,i,o)}function z(t,e){if("number"!=typeof t)throw new G.ERR_INVALID_ARG_TYPE(e,"number",t)}function H(t,e,r){if(Math.floor(t)!==t)throw z(t,r),new G.ERR_OUT_OF_RANGE("offset","an integer",t);if(e<0)throw new G.ERR_BUFFER_OUT_OF_BOUNDS;throw new G.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${e}`,t)}k("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),k("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),k("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=X(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=X(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const Y=/[^+/0-9A-Za-z-_]/g;function V(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function q(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Z(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function K(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function Q(t){return"undefined"==typeof BigInt?$:t}function $(){throw new Error("BigInt not supported")}}(e),t(e)}(),r=function(t){"use strict";var r,n,i;try{r=new TextDecoder}catch(t){}var o,s,a,u,h,l=0,c={},f=0,d=0,p=[],m={useRecords:!1,mapsAsObjects:!0};class g{}const v=new g;v.name="MessagePack 0xC1";var _=!1,y=2;try{new Function("")}catch(t){y=1/0}class b{constructor(t){t&&(!1===t.useRecords&&void 0===t.mapsAsObjects&&(t.mapsAsObjects=!0),t.sequential&&!1!==t.trusted&&(t.trusted=!0,t.structures||0==t.useRecords||(t.structures=[],t.maxSharedStructures||(t.maxSharedStructures=0))),t.structures?t.structures.sharedLength=t.structures.length:t.getStructures&&((t.structures=[]).uninitialized=!0,t.structures.sharedLength=0),t.int64AsNumber&&(t.int64AsType="number")),Object.assign(this,t)}unpack(t,r){if(n)return Z((()=>(K(),this?this.unpack(t,r):b.prototype.unpack.call(m,t,r))));t.buffer||t.constructor!==ArrayBuffer||(t=void 0!==e?e.from(t):new Uint8Array(t)),"object"==typeof r?(i=r.end||t.length,l=r.start||0):(l=0,i=r>-1?r:t.length),d=0,s=null,a=null,n=t;try{h=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(e){if(n=null,t instanceof Uint8Array)throw e;throw new Error("Source must be a Uint8Array or Buffer but was a "+(t&&"object"==typeof t?t.constructor.name:typeof t))}if(this instanceof b){if(c=this,this.structures)return o=this.structures,x(r);(!o||o.length>0)&&(o=[])}else c=m,(!o||o.length>0)&&(o=[]);return x(r)}unpackMultiple(t,e){let r,n=0;try{_=!0;let i=t.length,o=this?this.unpack(t,i):$.unpack(t,i);if(!e){for(r=[o];l<i;)n=l,r.push(x());return r}if(!1===e(o,n,l))return;for(;l<i;)if(n=l,!1===e(x(),n,l))return}catch(t){throw t.lastPosition=n,t.values=r,t}finally{_=!1,K()}}_mergeStructures(t,e){t=t||[],Object.isFrozen(t)&&(t=t.map((t=>t.slice(0))));for(let e=0,r=t.length;e<r;e++){let r=t[e];r&&(r.isShared=!0,e>=32&&(r.highByte=e-32>>5))}t.sharedLength=t.length;for(let r in e||[])if(r>=0){let n=t[r],i=e[r];i&&(n&&((t.restoreStructures||(t.restoreStructures=[]))[r]=n),t[r]=i)}return this.structures=t}decode(t,e){return this.unpack(t,e)}}function x(t){try{if(!c.trusted&&!_){let t=o.sharedLength||0;t<o.length&&(o.length=t)}let t;if(c.randomAccessStructure&&n[l]<64&&n[l],t=E(),a&&(l=a.postBundlePosition,a=null),_&&(o.restoreStructures=null),l==i)o&&o.restoreStructures&&T(),o=null,n=null,u&&(u=null);else{if(l>i)throw new Error("Unexpected end of MessagePack data");if(!_){let e;try{e=JSON.stringify(t,((t,e)=>"bigint"==typeof e?`${e}n`:e)).slice(0,100)}catch(t){e="(JSON view not available "+t+")"}throw new Error("Data read, but end of buffer not reached "+e)}}return t}catch(t){throw o&&o.restoreStructures&&T(),K(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer")||l>i)&&(t.incomplete=!0),t}}function T(){for(let t in o.restoreStructures)o[t]=o.restoreStructures[t];o.restoreStructures=null}function E(){let t=n[l++];if(t<160){if(t<128){if(t<64)return t;{let e=o[63&t]||c.getStructures&&R()[63&t];return e?(e.read||(e.read=A(e,63&t)),e.read()):t}}if(t<144){if(t-=128,c.mapsAsObjects){let e={};for(let r=0;r<t;r++){let t=j();"__proto__"===t&&(t="__proto_"),e[t]=E()}return e}{let e=new Map;for(let r=0;r<t;r++)e.set(E(),E());return e}}{t-=144;let e=new Array(t);for(let r=0;r<t;r++)e[r]=E();return c.freezeData?Object.freeze(e):e}}if(t<192){let e=t-160;if(d>=l)return s.slice(l-f,(l+=e)-f);if(0==d&&i<140){let t=e<16?B(e):N(e);if(null!=t)return t}return w(e)}{let e;switch(t){case 192:return null;case 193:return a?(e=E(),e>0?a[1].slice(a.position1,a.position1+=e):a[0].slice(a.position0,a.position0-=e)):v;case 194:return!1;case 195:return!0;case 196:if(e=n[l++],void 0===e)throw new Error("Unexpected end of buffer");return G(e);case 197:return e=h.getUint16(l),l+=2,G(e);case 198:return e=h.getUint32(l),l+=4,G(e);case 199:return k(n[l++]);case 200:return e=h.getUint16(l),l+=2,k(e);case 201:return e=h.getUint32(l),l+=4,k(e);case 202:if(e=h.getFloat32(l),c.useFloat32>2){let t=J[(127&n[l])<<1|n[l+1]>>7];return l+=4,(t*e+(e>0?.5:-.5)|0)/t}return l+=4,e;case 203:return e=h.getFloat64(l),l+=8,e;case 204:return n[l++];case 205:return e=h.getUint16(l),l+=2,e;case 206:return e=h.getUint32(l),l+=4,e;case 207:return"number"===c.int64AsType?(e=4294967296*h.getUint32(l),e+=h.getUint32(l+4)):"string"===c.int64AsType?e=h.getBigUint64(l).toString():"auto"===c.int64AsType?(e=h.getBigUint64(l),e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=h.getBigUint64(l),l+=8,e;case 208:return h.getInt8(l++);case 209:return e=h.getInt16(l),l+=2,e;case 210:return e=h.getInt32(l),l+=4,e;case 211:return"number"===c.int64AsType?(e=4294967296*h.getInt32(l),e+=h.getUint32(l+4)):"string"===c.int64AsType?e=h.getBigInt64(l).toString():"auto"===c.int64AsType?(e=h.getBigInt64(l),e>=BigInt(-2)<<BigInt(52)&&e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=h.getBigInt64(l),l+=8,e;case 212:if(e=n[l++],114==e)return H(63&n[l++]);{let t=p[e];if(t)return t.read?(l++,t.read(E())):t.noBuffer?(l++,t()):t(n.subarray(l,++l));throw new Error("Unknown extension "+e)}case 213:return e=n[l],114==e?(l++,H(63&n[l++],n[l++])):k(2);case 214:return k(4);case 215:return k(8);case 216:return k(16);case 217:return e=n[l++],d>=l?s.slice(l-f,(l+=e)-f):M(e);case 218:return e=h.getUint16(l),d>=(l+=2)?s.slice(l-f,(l+=e)-f):P(e);case 219:return e=h.getUint32(l),d>=(l+=4)?s.slice(l-f,(l+=e)-f):I(e);case 220:return e=h.getUint16(l),l+=2,D(e);case 221:return e=h.getUint32(l),l+=4,D(e);case 222:return e=h.getUint16(l),l+=2,F(e);case 223:return e=h.getUint32(l),l+=4,F(e);default:if(t>=224)return t-256;if(void 0===t){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}throw new Error("Unknown MessagePack token "+t)}}}const S=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function A(t,e){function r(){if(r.count++>y){let r=t.read=new Function("r","return function(){return "+(c.freezeData?"Object.freeze":"")+"({"+t.map((t=>"__proto__"===t?"__proto_:r()":S.test(t)?t+":r()":"["+JSON.stringify(t)+"]:r()")).join(",")+"})}")(E);return 0===t.highByte&&(t.read=O(e,t.read)),r()}let n={};for(let e=0,r=t.length;e<r;e++){let r=t[e];"__proto__"===r&&(r="__proto_"),n[r]=E()}return c.freezeData?Object.freeze(n):n}return r.count=0,0===t.highByte?O(e,r):r}const O=(t,e)=>function(){let r=n[l++];if(0===r)return e();let i=t<32?-(t+(r<<5)):t+(r<<5),s=o[i]||R()[i];if(!s)throw new Error("Record id is not defined for "+i);return s.read||(s.read=A(s,t)),s.read()};function R(){let t=Z((()=>(n=null,c.getStructures())));return o=c._mergeStructures(t,o)}var w=C,M=C,P=C,I=C;function C(t){let e;if(t<16&&(e=B(t)))return e;if(t>64&&r)return r.decode(n.subarray(l,l+=t));const i=l+t,o=[];for(e="";l<i;){const t=n[l++];if(128&t)if(192==(224&t)){const e=63&n[l++];o.push((31&t)<<6|e)}else if(224==(240&t)){const e=63&n[l++],r=63&n[l++];o.push((31&t)<<12|e<<6|r)}else if(240==(248&t)){let e=(7&t)<<18|(63&n[l++])<<12|(63&n[l++])<<6|63&n[l++];e>65535&&(e-=65536,o.push(e>>>10&1023|55296),e=56320|1023&e),o.push(e)}else o.push(t);else o.push(t);o.length>=4096&&(e+=L.apply(String,o),o.length=0)}return o.length>0&&(e+=L.apply(String,o)),e}function D(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=E();return c.freezeData?Object.freeze(e):e}function F(t){if(c.mapsAsObjects){let e={};for(let r=0;r<t;r++){let t=j();"__proto__"===t&&(t="__proto_"),e[t]=E()}return e}{let e=new Map;for(let r=0;r<t;r++)e.set(E(),E());return e}}var L=String.fromCharCode;function N(t){let e=l,r=new Array(t);for(let i=0;i<t;i++){const t=n[l++];if((128&t)>0)return void(l=e);r[i]=t}return L.apply(String,r)}function B(t){if(t<4){if(t<2){if(0===t)return"";{let t=n[l++];return(128&t)>1?void(l-=1):L(t)}}{let e=n[l++],r=n[l++];if((128&e)>0||(128&r)>0)return void(l-=2);if(t<3)return L(e,r);let i=n[l++];return(128&i)>0?void(l-=3):L(e,r,i)}}{let e=n[l++],r=n[l++],i=n[l++],o=n[l++];if((128&e)>0||(128&r)>0||(128&i)>0||(128&o)>0)return void(l-=4);if(t<6){if(4===t)return L(e,r,i,o);{let t=n[l++];return(128&t)>0?void(l-=5):L(e,r,i,o,t)}}if(t<8){let s=n[l++],a=n[l++];if((128&s)>0||(128&a)>0)return void(l-=6);if(t<7)return L(e,r,i,o,s,a);let u=n[l++];return(128&u)>0?void(l-=7):L(e,r,i,o,s,a,u)}{let s=n[l++],a=n[l++],u=n[l++],h=n[l++];if((128&s)>0||(128&a)>0||(128&u)>0||(128&h)>0)return void(l-=8);if(t<10){if(8===t)return L(e,r,i,o,s,a,u,h);{let t=n[l++];return(128&t)>0?void(l-=9):L(e,r,i,o,s,a,u,h,t)}}if(t<12){let c=n[l++],f=n[l++];if((128&c)>0||(128&f)>0)return void(l-=10);if(t<11)return L(e,r,i,o,s,a,u,h,c,f);let d=n[l++];return(128&d)>0?void(l-=11):L(e,r,i,o,s,a,u,h,c,f,d)}{let c=n[l++],f=n[l++],d=n[l++],p=n[l++];if((128&c)>0||(128&f)>0||(128&d)>0||(128&p)>0)return void(l-=12);if(t<14){if(12===t)return L(e,r,i,o,s,a,u,h,c,f,d,p);{let t=n[l++];return(128&t)>0?void(l-=13):L(e,r,i,o,s,a,u,h,c,f,d,p,t)}}{let m=n[l++],g=n[l++];if((128&m)>0||(128&g)>0)return void(l-=14);if(t<15)return L(e,r,i,o,s,a,u,h,c,f,d,p,m,g);let v=n[l++];return(128&v)>0?void(l-=15):L(e,r,i,o,s,a,u,h,c,f,d,p,m,g,v)}}}}}function U(){let t,e=n[l++];if(e<192)t=e-160;else switch(e){case 217:t=n[l++];break;case 218:t=h.getUint16(l),l+=2;break;case 219:t=h.getUint32(l),l+=4;break;default:throw new Error("Expected string")}return C(t)}function G(t){return c.copyBuffers?Uint8Array.prototype.slice.call(n,l,l+=t):n.subarray(l,l+=t)}function k(t){let e=n[l++];if(p[e]){let r,i=l;return p[e](n.subarray(l,r=l+=t),(t=>{l=t;try{return E()}finally{l=r}}),i)}throw new Error("Unknown extension type "+e)}var X=new Array(4096);function j(){let t=n[l++];if(!(t>=160&&t<192))return l--,z(E());if(t-=160,d>=l)return s.slice(l-f,(l+=t)-f);if(!(0==d&&i<180))return w(t);let e,r=4095&(t<<5^(t>1?h.getUint16(l):t>0?n[l]:0)),o=X[r],a=l,u=l+t-3,c=0;if(o&&o.bytes==t){for(;a<u;){if(e=h.getUint32(a),e!=o[c++]){a=1879048192;break}a+=4}for(u+=3;a<u;)if(e=n[a++],e!=o[c++]){a=1879048192;break}if(a===u)return l=a,o.string;u-=3,a=l}for(o=[],X[r]=o,o.bytes=t;a<u;)e=h.getUint32(a),o.push(e),a+=4;for(u+=3;a<u;)e=n[a++],o.push(e);let p=t<16?B(t):N(t);return o.string=null!=p?p:w(t)}function z(t){if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t.toString();if(null==t)return t+"";throw new Error("Invalid property type for record",typeof t)}const H=(t,e)=>{let r=E().map(z),n=t;void 0!==e&&(t=t<32?-((e<<5)+t):(e<<5)+t,r.highByte=e);let i=o[t];return i&&(i.isShared||_)&&((o.restoreStructures||(o.restoreStructures=[]))[t]=i),o[t]=r,r.read=A(r,n),r.read()};p[0]=()=>{},p[0].noBuffer=!0,p[66]=t=>{let e=t.length,r=BigInt(128&t[0]?t[0]-256:t[0]);for(let n=1;n<e;n++)r<<=8n,r+=BigInt(t[n]);return r};let Y={Error,TypeError,ReferenceError};p[101]=()=>{let t=E();return(Y[t[0]]||Error)(t[1])},p[105]=t=>{if(!1===c.structuredClone)throw new Error("Structured clone extension is disabled");let e=h.getUint32(l-4);u||(u=new Map);let r,i=n[l];r=i>=144&&i<160||220==i||221==i?[]:{};let o={target:r};u.set(e,o);let s=E();return o.used?Object.assign(r,s):(o.target=s,s)},p[112]=t=>{if(!1===c.structuredClone)throw new Error("Structured clone extension is disabled");let e=h.getUint32(l-4),r=u.get(e);return r.used=!0,r.target},p[115]=()=>new Set(E());const V=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map((t=>t+"Array"));let W="object"==typeof globalThis?globalThis:window;p[116]=t=>{let e=t[0],r=V[e];if(!r){if(16===e){let e=new ArrayBuffer(t.length-1);return new Uint8Array(e).set(t.subarray(1)),e}throw new Error("Could not find typed array for code "+e)}return new W[r](Uint8Array.prototype.slice.call(t,1).buffer)},p[120]=()=>{let t=E();return new RegExp(t[0],t[1])};const q=[];function Z(t){let e=i,r=l,p=f,m=d,g=s,v=u,y=a,b=new Uint8Array(n.slice(0,i)),x=o,T=o.slice(0,o.length),E=c,S=_,A=t();return i=e,l=r,f=p,d=m,s=g,u=v,a=y,n=b,_=S,(o=x).splice(0,o.length,...T),c=E,h=new DataView(n.buffer,n.byteOffset,n.byteLength),A}function K(){n=null,u=null,o=null}p[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],r=l;return l+=e-t.length,a=q,(a=[U(),U()]).position0=0,a.position1=0,a.postBundlePosition=l,l=r,E()},p[255]=t=>4==t.length?new Date(1e3*(16777216*t[0]+(t[1]<<16)+(t[2]<<8)+t[3])):8==t.length?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+1e3*(4294967296*(3&t[3])+16777216*t[4]+(t[5]<<16)+(t[6]<<8)+t[7])):12==t.length?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+1e3*((128&t[4]?-281474976710656:0)+1099511627776*t[6]+4294967296*t[7]+16777216*t[8]+(t[9]<<16)+(t[10]<<8)+t[11])):new Date("invalid");const J=new Array(147);for(let t=0;t<256;t++)J[t]=+("1e"+Math.floor(45.15-.30103*t));const Q=b;var $=new b({useRecords:!1});const tt=$.unpack,et=$.unpackMultiple,rt=$.unpack,nt={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4};let it,ot,st,at=new Float32Array(1),ut=new Uint8Array(at.buffer,0,4);try{it=new TextEncoder}catch(t){}const ht=void 0!==e,lt=ht?function(t){return e.allocUnsafeSlow(t)}:Uint8Array,ct=ht?e:Uint8Array,ft=ht?4294967296:2144337920;let dt,pt,mt,gt,vt=0,_t=null;const yt=/[\u0080-\uFFFF]/,bt=Symbol("record-id");class xt extends b{constructor(t){let e,r,n,i;super(t),this.offset=0;let o=ct.prototype.utf8Write?function(t,e){return dt.utf8Write(t,e,4294967295)}:!(!it||!it.encodeInto)&&function(t,e){return it.encodeInto(t,dt.subarray(e)).written},s=this;t||(t={});let a=t&&t.sequential,u=t.structures||t.saveStructures,h=t.maxSharedStructures;if(null==h&&(h=u?32:0),h>8160)throw new Error("Maximum maxSharedStructure is 8160");t.structuredClone&&null==t.moreTypes&&(this.moreTypes=!0);let l=t.maxOwnStructures;null==l&&(l=u?32:64),this.structures||0==t.useRecords||(this.structures=[]);let c=h>32||l+h>64,f=h+64,d=h+l+64;if(d>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let p=[],m=0,g=0;this.pack=this.encode=function(t,o){if(dt||(dt=new lt(8192),mt=dt.dataView||(dt.dataView=new DataView(dt.buffer,0,8192)),vt=0),gt=dt.length-10,gt-vt<2048?(dt=new lt(dt.length),mt=dt.dataView||(dt.dataView=new DataView(dt.buffer,0,dt.length)),gt=dt.length-10,vt=0):vt=vt+7&2147483640,e=vt,o&Nt&&(vt+=255&o),i=s.structuredClone?new Map:null,s.bundleStrings&&"string"!=typeof t?(_t=[],_t.size=1/0):_t=null,n=s.structures,n){n.uninitialized&&(n=s._mergeStructures(s.getStructures()));let t=n.sharedLength||0;if(t>h)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let e=0;e<t;e++){let t=n[e];if(!t)continue;let r,i=n.transitions;for(let e=0,n=t.length;e<n;e++){let n=t[e];r=i[n],r||(r=i[n]=Object.create(null)),i=r}i[bt]=e+64}this.lastNamedStructuresLength=t}a||(n.nextId=t+64)}let u;r&&(r=!1);try{s.randomAccessStructure&&t&&t.constructor&&t.constructor===Object?R(t):y(t);let r=_t;if(_t&&At(e,y,0),i&&i.idsToInsert){let t=i.idsToInsert.sort(((t,e)=>t.offset>e.offset?1:-1)),n=t.length,o=-1;for(;r&&n>0;){let i=t[--n].offset+e;i<r.stringsPosition+e&&-1===o&&(o=0),i>r.position+e?o>=0&&(o+=6):(o>=0&&(mt.setUint32(r.position+e,mt.getUint32(r.position+e)+o),o=-1),r=r.previous,n++)}o>=0&&r&&mt.setUint32(r.position+e,mt.getUint32(r.position+e)+o),vt+=6*t.length,vt>gt&&S(vt),s.offset=vt;let a=function(t,e){let r,n=6*e.length,i=t.length-n;for(;r=e.pop();){let e=r.offset,o=r.id;t.copyWithin(e+n,e,i),n-=6;let s=e+n;t[s++]=214,t[s++]=105,t[s++]=o>>24,t[s++]=o>>16&255,t[s++]=o>>8&255,t[s++]=255&o,i=e}return t}(dt.subarray(e,vt),t);return i=null,a}return s.offset=vt,o&Ft?(dt.start=e,dt.end=vt,dt):dt.subarray(e,vt)}catch(t){throw u=t,t}finally{if(n&&(v(),r&&s.saveStructures)){let r=n.sharedLength||0,i=dt.subarray(e,vt),a=function(t,e){return t.isCompatible=t=>{let r=!t||(e.lastNamedStructuresLength||0)===t.length;return r||e._mergeStructures(t),r},t}(n,s);if(!u)return!1===s.saveStructures(a,a.isCompatible)?s.pack(t,o):(s.lastNamedStructuresLength=r,dt.length>1073741824&&(dt=null),i)}dt.length>1073741824&&(dt=null),o&Lt&&(vt=e)}};const v=()=>{g<10&&g++;let t=n.sharedLength||0;if(n.length>t&&!a&&(n.length=t),m>1e4)n.transitions=null,g=0,m=0,p.length>0&&(p=[]);else if(p.length>0&&!a){for(let t=0,e=p.length;t<e;t++)p[t][bt]=0;p=[]}},_=t=>{var e=t.length;e<16?dt[vt++]=144|e:e<65536?(dt[vt++]=220,dt[vt++]=e>>8,dt[vt++]=255&e):(dt[vt++]=221,mt.setUint32(vt,e),vt+=4);for(let r=0;r<e;r++)y(t[r])},y=t=>{vt>gt&&(dt=S(vt));var r,n=typeof t;if("string"===n){let n,i=t.length;if(_t&&i>=4&&i<4096){if((_t.size+=i)>21760){let t,r,n=(_t[0]?3*_t[0].length+_t[1].length:0)+10;vt+n>gt&&(dt=S(vt+n)),_t.position?(r=_t,dt[vt]=200,vt+=3,dt[vt++]=98,t=vt-e,vt+=4,At(e,y,0),mt.setUint16(t+e-3,vt-e-t)):(dt[vt++]=214,dt[vt++]=98,t=vt-e,vt+=4),_t=["",""],_t.previous=r,_t.size=0,_t.position=t}let r=yt.test(t);return _t[r?0:1]+=t,dt[vt++]=193,void y(r?-i:i)}n=i<32?1:i<256?2:i<65536?3:5;let s=3*i;if(vt+s>gt&&(dt=S(vt+s)),i<64||!o){let e,o,s,a=vt+n;for(e=0;e<i;e++)o=t.charCodeAt(e),o<128?dt[a++]=o:o<2048?(dt[a++]=o>>6|192,dt[a++]=63&o|128):55296==(64512&o)&&56320==(64512&(s=t.charCodeAt(e+1)))?(o=65536+((1023&o)<<10)+(1023&s),e++,dt[a++]=o>>18|240,dt[a++]=o>>12&63|128,dt[a++]=o>>6&63|128,dt[a++]=63&o|128):(dt[a++]=o>>12|224,dt[a++]=o>>6&63|128,dt[a++]=63&o|128);r=a-vt-n}else r=o(t,vt+n);r<32?dt[vt++]=160|r:r<256?(n<2&&dt.copyWithin(vt+2,vt+1,vt+1+r),dt[vt++]=217,dt[vt++]=r):r<65536?(n<3&&dt.copyWithin(vt+3,vt+2,vt+2+r),dt[vt++]=218,dt[vt++]=r>>8,dt[vt++]=255&r):(n<5&&dt.copyWithin(vt+5,vt+3,vt+3+r),dt[vt++]=219,mt.setUint32(vt,r),vt+=4),vt+=r}else if("number"===n)if(t>>>0===t)t<32||t<128&&!1===this.useRecords||t<64&&!this.randomAccessStructure?dt[vt++]=t:t<256?(dt[vt++]=204,dt[vt++]=t):t<65536?(dt[vt++]=205,dt[vt++]=t>>8,dt[vt++]=255&t):(dt[vt++]=206,mt.setUint32(vt,t),vt+=4);else if((t|0)===t)t>=-32?dt[vt++]=256+t:t>=-128?(dt[vt++]=208,dt[vt++]=t+256):t>=-32768?(dt[vt++]=209,mt.setInt16(vt,t),vt+=2):(dt[vt++]=210,mt.setInt32(vt,t),vt+=4);else{let e;if((e=this.useFloat32)>0&&t<4294967296&&t>=-2147483648){let r;if(dt[vt++]=202,mt.setFloat32(vt,t),e<4||((r=t*J[(127&dt[vt])<<1|dt[vt+1]>>7])|0)===r)return void(vt+=4);vt--}dt[vt++]=203,mt.setFloat64(vt,t),vt+=8}else if("object"===n||"function"===n)if(t){if(i){let r=i.get(t);if(r){if(!r.id){let t=i.idsToInsert||(i.idsToInsert=[]);r.id=t.push(r)}return dt[vt++]=214,dt[vt++]=112,mt.setUint32(vt,r.id),void(vt+=4)}i.set(t,{offset:vt-e})}let o=t.constructor;if(o===Object)E(t);else if(o===Array)_(t);else if(o===Map)if(this.mapAsEmptyObject)dt[vt++]=128;else{(r=t.size)<16?dt[vt++]=128|r:r<65536?(dt[vt++]=222,dt[vt++]=r>>8,dt[vt++]=255&r):(dt[vt++]=223,mt.setUint32(vt,r),vt+=4);for(let[e,r]of t)y(e),y(r)}else{for(let r=0,n=ot.length;r<n;r++){if(t instanceof st[r]){let n=ot[r];if(n.write){n.type&&(dt[vt++]=212,dt[vt++]=n.type,dt[vt++]=0);let e=n.write.call(this,t);return void(e===t?Array.isArray(t)?_(t):E(t):y(e))}let i,o=dt,s=mt,a=vt,u=e;dt=null;try{i=n.pack.call(this,t,(t=>(dt=o,o=null,vt+=t,vt>gt&&S(vt),{target:dt,targetView:mt,position:vt-t})),y)}finally{o&&(dt=o,mt=s,vt=a,e=u,gt=dt.length-10)}return void(i&&(i.length+vt>gt&&S(i.length+vt),vt=St(i,dt,vt,n.type)))}}if(Array.isArray(t))_(t);else{if(t.toJSON){const e=t.toJSON();if(e!==t)return y(e)}if("function"===n)return y(this.writeFunction&&this.writeFunction(t));E(t)}}}else dt[vt++]=192;else if("boolean"===n)dt[vt++]=t?195:194;else if("bigint"===n){if(t<BigInt(1)<<BigInt(63)&&t>=-(BigInt(1)<<BigInt(63)))dt[vt++]=211,mt.setBigInt64(vt,t);else if(t<BigInt(1)<<BigInt(64)&&t>0)dt[vt++]=207,mt.setBigUint64(vt,t);else{if(!this.largeBigIntToFloat){if(this.useBigIntExtension&&t<2n**1023n&&t>-(2n**1023n)){dt[vt++]=199,vt++,dt[vt++]=66;let e,r=[];do{let n=0xffn&t;e=(0x80n&n)===(t<0n?0x80n:0n),r.push(n),t>>=8n}while(0n!==t&&-1n!==t||!e);dt[vt-2]=r.length;for(let t=r.length;t>0;)dt[vt++]=Number(r[--t]);return}throw new RangeError(t+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension or set largeBigIntToFloat to convert to float-64")}dt[vt++]=203,mt.setFloat64(vt,Number(t))}vt+=8}else{if("undefined"!==n)throw new Error("Unknown type: "+n);this.encodeUndefinedAsNil?dt[vt++]=192:(dt[vt++]=212,dt[vt++]=0,dt[vt++]=0)}},b=this.variableMapSize||this.coercibleKeyAsNumber?t=>{let e,r=Object.keys(t),n=r.length;if(n<16?dt[vt++]=128|n:n<65536?(dt[vt++]=222,dt[vt++]=n>>8,dt[vt++]=255&n):(dt[vt++]=223,mt.setUint32(vt,n),vt+=4),this.coercibleKeyAsNumber)for(let i=0;i<n;i++){e=r[i];let n=Number(e);y(isNaN(n)?e:n),y(t[e])}else for(let i=0;i<n;i++)y(e=r[i]),y(t[e])}:t=>{dt[vt++]=222;let r=vt-e;vt+=2;let n=0;for(let e in t)("function"!=typeof t.hasOwnProperty||t.hasOwnProperty(e))&&(y(e),y(t[e]),n++);dt[r+++e]=n>>8,dt[r+e]=255&n},x=!1===this.useRecords?b:t.progressiveRecords&&!c?t=>{let r,i,o=n.transitions||(n.transitions=Object.create(null)),s=vt++-e;for(let a in t)if("function"!=typeof t.hasOwnProperty||t.hasOwnProperty(a)){if(r=o[a],r)o=r;else{let u=Object.keys(t),h=o;o=n.transitions;let l=0;for(let t=0,e=u.length;t<e;t++){let e=u[t];r=o[e],r||(r=o[e]=Object.create(null),l++),o=r}s+e+1==vt?(vt--,A(o,u,l)):O(o,u,s,l),i=!0,o=h[a]}y(t[a])}if(!i){let r=o[bt];r?dt[s+e]=r:O(o,Object.keys(t),s,0)}}:t=>{let e,r=n.transitions||(n.transitions=Object.create(null)),i=0;for(let n in t)("function"!=typeof t.hasOwnProperty||t.hasOwnProperty(n))&&(e=r[n],e||(e=r[n]=Object.create(null),i++),r=e);let o=r[bt];o?o>=96&&c?(dt[vt++]=96+(31&(o-=96)),dt[vt++]=o>>5):dt[vt++]=o:A(r,r.__keys__||Object.keys(t),i);for(let e in t)("function"!=typeof t.hasOwnProperty||t.hasOwnProperty(e))&&y(t[e])},T="function"==typeof this.useRecords&&this.useRecords,E=T?t=>{T(t)?x(t):b(t)}:x,S=t=>{let r;if(t>16777216){if(t-e>ft)throw new Error("Packed buffer would be larger than maximum buffer size");r=Math.min(ft,4096*Math.round(Math.max((t-e)*(t>67108864?1.25:2),4194304)/4096))}else r=1+(Math.max(t-e<<2,dt.length-1)>>12)<<12;let n=new lt(r);return mt=n.dataView||(n.dataView=new DataView(n.buffer,0,r)),t=Math.min(t,dt.length),dt.copy?dt.copy(n,0,e,t):n.set(dt.slice(e,t)),vt-=e,e=0,gt=n.length-10,dt=n},A=(t,e,i)=>{let o=n.nextId;o||(o=64),o<f&&this.shouldShareStructure&&!this.shouldShareStructure(e)?(o=n.nextOwnId,o<d||(o=f),n.nextOwnId=o+1):(o>=d&&(o=f),n.nextId=o+1);let s=e.highByte=o>=96&&c?o-96>>5:-1;t[bt]=o,t.__keys__=e,n[o-64]=e,o<f?(e.isShared=!0,n.sharedLength=o-63,r=!0,s>=0?(dt[vt++]=96+(31&o),dt[vt++]=s):dt[vt++]=o):(s>=0?(dt[vt++]=213,dt[vt++]=114,dt[vt++]=96+(31&o),dt[vt++]=s):(dt[vt++]=212,dt[vt++]=114,dt[vt++]=o),i&&(m+=g*i),p.length>=l&&(p.shift()[bt]=0),p.push(t),y(e))},O=(t,r,n,i)=>{let o=dt,s=vt,a=gt,u=e;dt=pt,vt=0,e=0,dt||(pt=dt=new lt(8192)),gt=dt.length-10,A(t,r,i),pt=dt;let h=vt;if(dt=o,vt=s,gt=a,e=u,h>1){let t=vt+h-1;t>gt&&S(t);let r=n+e;dt.copyWithin(r+h,r+1,vt),dt.set(pt.slice(0,h),r),vt=t}else dt[n+e]=pt[0]},R=t=>{let i=undefined(t,dt,e,vt,n,S,((t,e,n)=>{if(n)return r=!0;vt=e;let i=dt;return y(t),v(),i!==dt?{position:vt,targetView:mt,target:dt}:vt}),this);if(0===i)return E(t);vt=i}}useBuffer(t){dt=t,mt=new DataView(dt.buffer,dt.byteOffset,dt.byteLength),vt=0}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}}function Tt(t,e,r,n){let i=t.byteLength;if(i+1<256){var{target:o,position:s}=r(4+i);o[s++]=199,o[s++]=i+1}else if(i+1<65536){var{target:o,position:s}=r(5+i);o[s++]=200,o[s++]=i+1>>8,o[s++]=i+1&255}else{var{target:o,position:s,targetView:a}=r(7+i);o[s++]=201,a.setUint32(s,i+1),s+=4}o[s++]=116,o[s++]=e,t.buffer||(t=new Uint8Array(t)),o.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s)}function Et(t,e){let r=t.byteLength;var n,i;if(r<256){var{target:n,position:i}=e(r+2);n[i++]=196,n[i++]=r}else if(r<65536){var{target:n,position:i}=e(r+3);n[i++]=197,n[i++]=r>>8,n[i++]=255&r}else{var{target:n,position:i,targetView:o}=e(r+5);n[i++]=198,o.setUint32(i,r),i+=4}n.set(t,i)}function St(t,e,r,n){let i=t.length;switch(i){case 1:e[r++]=212;break;case 2:e[r++]=213;break;case 4:e[r++]=214;break;case 8:e[r++]=215;break;case 16:e[r++]=216;break;default:i<256?(e[r++]=199,e[r++]=i):i<65536?(e[r++]=200,e[r++]=i>>8,e[r++]=255&i):(e[r++]=201,e[r++]=i>>24,e[r++]=i>>16&255,e[r++]=i>>8&255,e[r++]=255&i)}return e[r++]=n,e.set(t,r),r+=i}function At(t,e,r){if(_t.length>0){mt.setUint32(_t.position+t,vt+r-_t.position-t),_t.stringsPosition=vt-t;let n=_t;_t=null,e(n[0]),e(n[1])}}st=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,g],ot=[{pack(t,e,r){let n=t.getTime()/1e3;if((this.useTimestamp32||0===t.getMilliseconds())&&n>=0&&n<4294967296){let{target:t,targetView:r,position:i}=e(6);t[i++]=214,t[i++]=255,r.setUint32(i,n)}else if(n>0&&n<4294967296){let{target:r,targetView:i,position:o}=e(10);r[o++]=215,r[o++]=255,i.setUint32(o,4e6*t.getMilliseconds()+(n/1e3/4294967296|0)),i.setUint32(o+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return e(0),r(this.onInvalidDate());let{target:t,targetView:n,position:i}=e(3);t[i++]=212,t[i++]=255,t[i++]=255}else{let{target:r,targetView:i,position:o}=e(15);r[o++]=199,r[o++]=12,r[o++]=255,i.setUint32(o,1e6*t.getMilliseconds()),i.setBigInt64(o+4,BigInt(Math.floor(n)))}}},{pack(t,e,r){if(this.setAsEmptyObject)return e(0),r({});let n=Array.from(t),{target:i,position:o}=e(this.moreTypes?3:0);this.moreTypes&&(i[o++]=212,i[o++]=115,i[o++]=0),r(n)}},{pack(t,e,r){let{target:n,position:i}=e(this.moreTypes?3:0);this.moreTypes&&(n[i++]=212,n[i++]=101,n[i++]=0),r([t.name,t.message])}},{pack(t,e,r){let{target:n,position:i}=e(this.moreTypes?3:0);this.moreTypes&&(n[i++]=212,n[i++]=120,n[i++]=0),r([t.source,t.flags])}},{pack(t,r){this.moreTypes?Tt(t,16,r):Et(ht?e.from(t):new Uint8Array(t),r)}},{pack(t,e){let r=t.constructor;r!==ct&&this.moreTypes?Tt(t,V.indexOf(r.name),e):Et(t,e)}},{pack(t,e){let{target:r,position:n}=e(1);r[n]=193}}];let Ot=new xt({useRecords:!1});const Rt=Ot.pack,wt=Ot.pack,Mt=xt,{NEVER:Pt,ALWAYS:It,DECIMAL_ROUND:Ct,DECIMAL_FIT:Dt}=nt,Ft=512,Lt=1024,Nt=2048;const Bt=function(t,r={}){if(!t||"object"!=typeof t)throw new Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise");const n=new b(r);let i;const o=t=>{let r;i&&(t=e.concat([i,t]),i=void 0);try{r=n.unpackMultiple(t)}catch(e){if(!e.incomplete)throw e;i=t.slice(e.lastPosition),r=e.values}return r};return"function"==typeof t[Symbol.iterator]?function*(){for(const e of t)yield*o(e)}():"function"==typeof t[Symbol.asyncIterator]?async function*(){for await(const e of t)yield*o(e)}():void 0},Ut=function(t,e={}){if(t&&"object"==typeof t){if("function"==typeof t[Symbol.iterator])return function*(t,e){const r=new xt(e);for(const e of t)yield r.pack(e)}(t,e);if("function"==typeof t.then||"function"==typeof t[Symbol.asyncIterator])return async function*(t,e){const r=new xt(e);for await(const e of t)yield r.pack(e)}(t,e);throw new Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise")}throw new Error("first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable")};return t.ALWAYS=It,t.C1=v,t.DECIMAL_FIT=Dt,t.DECIMAL_ROUND=Ct,t.Decoder=Q,t.Encoder=Mt,t.FLOAT32_OPTIONS=nt,t.NEVER=Pt,t.Packr=xt,t.REUSE_BUFFER_MODE=Ft,t.Unpackr=b,t.addExtension=function(t){if(t.Class){if(!t.pack&&!t.write)throw new Error("Extension has no pack or write function");if(t.pack&&!t.type)throw new Error("Extension has no type (numeric code to identify the extension)");st.unshift(t.Class),ot.unshift(t)}!function(t){t.unpack?p[t.type]=t.unpack:p[t.type]=t}(t)},t.clearSource=K,t.decode=rt,t.decodeIter=Bt,t.encode=wt,t.encodeIter=Ut,t.isNativeAccelerationEnabled=!1,t.mapsAsObjects=!0,t.pack=Rt,t.roundFloat32=function(t){at[0]=t;let e=J[(127&ut[3])<<1|ut[2]>>7];return(e*t+(t>0?.5:-.5)|0)/e},t.unpack=tt,t.unpackMultiple=et,t.useRecords=!1,t}({}),n=function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default.Bits??t:t.Bits??t}var r={Bits:i};const n=Number.MAX_SAFE_INTEGER.toString(2).length;function i(t){if("number"==typeof t)this.buffer=e.alloc(Math.ceil(t/8));else{if(!(t instanceof e))throw new TypeError("Initialize by specifying a bit-length or referencing a Buffer");this.buffer=t}this._length=8*this.buffer.length,this._offset=0}return i.alloc=function(t,r,n){return new i(e.alloc(t,r,n))},i.from=function(t,r,n){return new i(e.from(t,r,n))},Object.defineProperties(i.prototype,{buffer:{enumerable:!0,writable:!0},_length:{writable:!0},_offset:{writable:!0}}),Object.defineProperty(i.prototype,"eof",{get:function(){return this._offset===this._length},configurable:!0,enumerable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this._length},configurable:!0,enumerable:!0}),Object.defineProperty(i.prototype,"offset",{get:function(){return this._offset},set:function(t){if(t<0)throw new RangeError("Cannot set offset below 0");if(t>this._length)throw new RangeError(`Cannot set offset to ${t}, buffer length is ${this._length}`);return this._offset=Math.floor(t),this},configurable:!0,enumerable:!0}),Object.defineProperty(i.prototype,"remaining",{get:function(){return this._length-this._offset},configurable:!0,enumerable:!0}),i.prototype.clear=function(t=0){return this.buffer.fill(t),this._offset=0,this},i.prototype.clearBit=function(t){return this.insert(0,1,t),this},i.prototype.flipBit=function(t){const e=1^this.peek(1,t);return this.modifyBit(e,t),e},i.prototype.getBit=function(t){return this.peek(1,t)},i.prototype.insert=function(t,e=1,r){if((r="number"==typeof r?0|r:this._offset)+e>this._length)throw new RangeError(`Cannot write ${e} bits, only ${this.remaining} bit(s) left`);if(e>n)throw new RangeError(`Cannot write ${e} bits, max is ${n}`);let i=e;for(;i>0;){const e=r>>3,n=7&r,o=Math.min(8-n,i),s=(1<<o)-1,a=8-o-n,u=(t>>>i-o&s)<<a;this.buffer[e]=this.buffer[e]&~(s<<a)|u,r+=o,i-=o}return r},i.prototype.modifyBit=function(t,e){return this.insert(t,1,e),this},i.prototype.peek=function(t=1,e){if((e="number"==typeof e?0|e:this._offset)+t>this._length)throw new RangeError(`Cannot read ${t} bits, only ${this.remaining} bit(s) left`);if(t>n)throw new RangeError(`Reading ${t} bits would overflow result, max is ${n}`);const r=7&e,i=Math.min(8-r,t),o=(1<<i)-1;let s=this.buffer[e>>3]>>8-i-r&o;e+=i;let a=t-i;for(;a>=8;)s<<=8,s|=this.buffer[e>>3],e+=8,a-=8;if(a>0){const t=8-a;s<<=a,s|=this.buffer[e>>3]>>t&255>>t}return s},i.prototype.read=function(t=1){const e=this.peek(t,this._offset);return this._offset+=t,e},i.prototype.seek=function(t,e=1){switch(e){case 2:this.offset+=t;break;case 3:this.offset=this.length-t;break;default:this.offset=t}return this},i.prototype.setBit=function(t){return this.insert(1,1,t),this},i.prototype.skip=function(t){return this.seek(t,2)},i.prototype.testBit=function(t){return!!this.peek(1,t)},i.prototype.toString=function(t="utf8"){return this.buffer.toString(t)},i.prototype.write=function(t,e=1){return this._offset=this.insert(t,e,this._offset),this},t(r)}(),i=function(t){"use strict";var e=function(){return e=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},e.apply(this,arguments)};function r(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))}function n(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function i(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))}var o="4.4.3";function s(t,e){return new Promise((function(r){return setTimeout(r,t,e)}))}function a(t){return!!t&&"function"==typeof t.then}function u(t,e){try{var r=t();a(r)?r.then((function(t){return e(!0,t)}),(function(t){return e(!1,t)})):e(!0,r)}catch(t){e(!1,t)}}function h(t,e,i){return void 0===i&&(i=16),r(this,void 0,void 0,(function(){var r,o,s,a;return n(this,(function(n){switch(n.label){case 0:r=Array(t.length),o=Date.now(),s=0,n.label=1;case 1:return s<t.length?(r[s]=e(t[s],s),(a=Date.now())>=o+i?(o=a,[4,new Promise((function(t){var e=new MessageChannel;e.port1.onmessage=function(){return t()},e.port2.postMessage(null)}))]):[3,3]):[3,4];case 2:n.sent(),n.label=3;case 3:return++s,[3,1];case 4:return[2,r]}}))}))}function l(t){return t.then(void 0,(function(){})),t}function c(t){return parseInt(t)}function f(t){return parseFloat(t)}function d(t,e){return"number"==typeof t&&isNaN(t)?e:t}function p(t){return t.reduce((function(t,e){return t+(e?1:0)}),0)}function m(t,e){if(void 0===e&&(e=1),Math.abs(e)>=1)return Math.round(t/e)*e;var r=1/e;return Math.round(t*r)/r}function g(t,e){var r=t[0]>>>16,n=65535&t[0],i=t[1]>>>16,o=65535&t[1],s=e[0]>>>16,a=65535&e[0],u=e[1]>>>16,h=0,l=0,c=0,f=0;c+=(f+=o+(65535&e[1]))>>>16,f&=65535,l+=(c+=i+u)>>>16,c&=65535,h+=(l+=n+a)>>>16,l&=65535,h+=r+s,h&=65535,t[0]=h<<16|l,t[1]=c<<16|f}function v(t,e){var r=t[0]>>>16,n=65535&t[0],i=t[1]>>>16,o=65535&t[1],s=e[0]>>>16,a=65535&e[0],u=e[1]>>>16,h=65535&e[1],l=0,c=0,f=0,d=0;f+=(d+=o*h)>>>16,d&=65535,c+=(f+=i*h)>>>16,f&=65535,c+=(f+=o*u)>>>16,f&=65535,l+=(c+=n*h)>>>16,c&=65535,l+=(c+=i*u)>>>16,c&=65535,l+=(c+=o*a)>>>16,c&=65535,l+=r*h+n*u+i*a+o*s,l&=65535,t[0]=l<<16|c,t[1]=f<<16|d}function _(t,e){var r=t[0];32===(e%=64)?(t[0]=t[1],t[1]=r):e<32?(t[0]=r<<e|t[1]>>>32-e,t[1]=t[1]<<e|r>>>32-e):(e-=32,t[0]=t[1]<<e|r>>>32-e,t[1]=r<<e|t[1]>>>32-e)}function y(t,e){0!==(e%=64)&&(e<32?(t[0]=t[1]>>>32-e,t[1]=t[1]<<e):(t[0]=t[1]<<e-32,t[1]=0))}function b(t,e){t[0]^=e[0],t[1]^=e[1]}var x=[4283543511,3981806797],T=[3301882366,444984403];function E(t){var e=[0,t[0]>>>1];b(t,e),v(t,x),e[1]=t[0]>>>1,b(t,e),v(t,T),e[1]=t[0]>>>1,b(t,e)}var S=[2277735313,289559509],A=[1291169091,658871167],O=[0,5],R=[0,1390208809],w=[0,944331445];function M(t,e){var r=function(t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++){var n=t.charCodeAt(r);if(n>127)return(new TextEncoder).encode(t);e[r]=n}return e}(t);e=e||0;var n,i=[0,r.length],o=i[1]%16,s=i[1]-o,a=[0,e],u=[0,e],h=[0,0],l=[0,0];for(n=0;n<s;n+=16)h[0]=r[n+4]|r[n+5]<<8|r[n+6]<<16|r[n+7]<<24,h[1]=r[n]|r[n+1]<<8|r[n+2]<<16|r[n+3]<<24,l[0]=r[n+12]|r[n+13]<<8|r[n+14]<<16|r[n+15]<<24,l[1]=r[n+8]|r[n+9]<<8|r[n+10]<<16|r[n+11]<<24,v(h,S),_(h,31),v(h,A),b(a,h),_(a,27),g(a,u),v(a,O),g(a,R),v(l,A),_(l,33),v(l,S),b(u,l),_(u,31),g(u,a),v(u,O),g(u,w);h[0]=0,h[1]=0,l[0]=0,l[1]=0;var c=[0,0];switch(o){case 15:c[1]=r[n+14],y(c,48),b(l,c);case 14:c[1]=r[n+13],y(c,40),b(l,c);case 13:c[1]=r[n+12],y(c,32),b(l,c);case 12:c[1]=r[n+11],y(c,24),b(l,c);case 11:c[1]=r[n+10],y(c,16),b(l,c);case 10:c[1]=r[n+9],y(c,8),b(l,c);case 9:c[1]=r[n+8],b(l,c),v(l,A),_(l,33),v(l,S),b(u,l);case 8:c[1]=r[n+7],y(c,56),b(h,c);case 7:c[1]=r[n+6],y(c,48),b(h,c);case 6:c[1]=r[n+5],y(c,40),b(h,c);case 5:c[1]=r[n+4],y(c,32),b(h,c);case 4:c[1]=r[n+3],y(c,24),b(h,c);case 3:c[1]=r[n+2],y(c,16),b(h,c);case 2:c[1]=r[n+1],y(c,8),b(h,c);case 1:c[1]=r[n],b(h,c),v(h,S),_(h,31),v(h,A),b(a,h)}return b(a,i),b(u,i),g(a,u),g(u,a),E(a),E(u),g(a,u),g(u,a),("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)}function P(t){return"function"!=typeof t}function I(t,e,i,o){var s=Object.keys(t).filter((function(t){return!function(t,e){for(var r=0,n=t.length;r<n;++r)if(t[r]===e)return!0;return!1}(i,t)})),a=l(h(s,(function(r){return function(t,e){var r=l(new Promise((function(r){var n=Date.now();u(t.bind(null,e),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Date.now()-n;if(!t[0])return r((function(){return{error:t[1],duration:i}}));var o=t[1];if(P(o))return r((function(){return{value:o,duration:i}}));r((function(){return new Promise((function(t){var e=Date.now();u(o,(function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=i+Date.now()-e;if(!r[0])return t({error:r[1],duration:o});t({value:r[1],duration:o})}))}))}))}))})));return function(){return r.then((function(t){return t()}))}}(t[r],e)}),o));return function(){return r(this,void 0,void 0,(function(){var t,e,r,i;return n(this,(function(n){switch(n.label){case 0:return[4,a];case 1:return[4,h(n.sent(),(function(t){return l(t())}),o)];case 2:return t=n.sent(),[4,Promise.all(t)];case 3:for(e=n.sent(),r={},i=0;i<s.length;++i)r[s[i]]=e[i];return[2,r]}}))}))}}function C(){var t=window,e=navigator;return p(["MSCSSMatrix"in t,"msSetImmediate"in t,"msIndexedDB"in t,"msMaxTouchPoints"in e,"msPointerEnabled"in e])>=4}function D(){var t=window,e=navigator;return p(["msWriteProfilerMark"in t,"MSStream"in t,"msLaunchUri"in e,"msSaveBlob"in e])>=3&&!C()}function F(){var t=window,e=navigator;return p(["webkitPersistentStorage"in e,"webkitTemporaryStorage"in e,0===e.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in t,"BatteryManager"in t,"webkitMediaStream"in t,"webkitSpeechGrammar"in t])>=5}function L(){var t=window,e=navigator;return p(["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,0===e.vendor.indexOf("Apple"),"getStorageUpdates"in e,"WebKitMediaKeys"in t])>=4}function N(){var t=window,e=t.HTMLElement,r=t.Document;return p(["safari"in t,!("ongestureend"in t),!("TouchEvent"in t),!("orientation"in t),e&&!("autocapitalize"in e.prototype),r&&"pointerLockElement"in r.prototype])>=4}function B(){var t,e=window;return t=e.print,!!/^function\s.*?\{\s*\[native code]\s*}$/.test(String(t))&&p(["[object WebPageNamespace]"===String(e.browser),"MicrodataExtractor"in e])>=1}function U(){var t,e,r=window;return p(["buildID"in navigator,"MozAppearance"in(null!==(e=null===(t=document.documentElement)||void 0===t?void 0:t.style)&&void 0!==e?e:{}),"onmozfullscreenchange"in r,"mozInnerScreenX"in r,"CSSMozDocumentRule"in r,"CanvasCaptureMediaStream"in r])>=4}function G(){var t=window,e=navigator,r=t.CSS,n=t.HTMLButtonElement;return p([!("getStorageUpdates"in e),n&&"popover"in n.prototype,"CSSCounterStyleRule"in t,r.supports("font-size-adjust: ex-height 0.5"),r.supports("text-transform: full-width")])>=4}function k(){var t=document;return t.fullscreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||null}function X(){var t=F(),e=U(),r=window,n=navigator,i="connection";return t?p([!("SharedWorker"in r),n[i]&&"ontypechange"in n[i],!("sinkId"in new window.Audio)])>=2:!!e&&p(["onorientationchange"in r,"orientation"in r,/android/i.test(navigator.appVersion)])>=2}function j(){var t=window,e=t.OfflineAudioContext||t.webkitOfflineAudioContext;if(!e)return-2;if(L()&&!N()&&!function(){var t=window;return p(["DOMRectList"in t,"RTCPeerConnectionIceEvent"in t,"SVGGeometryElement"in t,"ontransitioncancel"in t])>=3}())return-1;var r=new e(1,5e3,44100),n=r.createOscillator();n.type="triangle",n.frequency.value=1e4;var i=r.createDynamicsCompressor();i.threshold.value=-50,i.knee.value=40,i.ratio.value=12,i.attack.value=0,i.release.value=.25,n.connect(i),i.connect(r.destination),n.start(0);var o=function(t){var e=3,r=500,n=500,i=5e3,o=function(){},s=new Promise((function(s,u){var h=!1,c=0,f=0;t.oncomplete=function(t){return s(t.renderedBuffer)};var d=function(){setTimeout((function(){return u(z("timeout"))}),Math.min(n,f+i-Date.now()))},p=function(){try{var n=t.startRendering();switch(a(n)&&l(n),t.state){case"running":f=Date.now(),h&&d();break;case"suspended":document.hidden||c++,h&&c>=e?u(z("suspended")):setTimeout(p,r)}}catch(t){u(t)}};p(),o=function(){h||(h=!0,f>0&&d())}}));return[s,o]}(r),s=o[0],u=o[1],h=l(s.then((function(t){return function(t){for(var e=0,r=0;r<t.length;++r)e+=Math.abs(t[r]);return e}(t.getChannelData(0).subarray(4500))}),(function(t){if("timeout"===t.name||"suspended"===t.name)return-3;throw t})));return function(){return u(),h}}function z(t){var e=new Error(t);return e.name=t,e}function H(t,e,i){var o,a,u;return void 0===i&&(i=50),r(this,void 0,void 0,(function(){var r,h;return n(this,(function(n){switch(n.label){case 0:r=document,n.label=1;case 1:return r.body?[3,3]:[4,s(i)];case 2:return n.sent(),[3,1];case 3:h=r.createElement("iframe"),n.label=4;case 4:return n.trys.push([4,,10,11]),[4,new Promise((function(t,n){var i=!1,o=function(){i=!0,t()};h.onload=o,h.onerror=function(t){i=!0,n(t)};var s=h.style;s.setProperty("display","block","important"),s.position="absolute",s.top="0",s.left="0",s.visibility="hidden",e&&"srcdoc"in h?h.srcdoc=e:h.src="about:blank",r.body.appendChild(h);var a=function(){var t,e;i||("complete"===(null===(e=null===(t=h.contentWindow)||void 0===t?void 0:t.document)||void 0===e?void 0:e.readyState)?o():setTimeout(a,10))};a()}))];case 5:n.sent(),n.label=6;case 6:return(null===(a=null===(o=h.contentWindow)||void 0===o?void 0:o.document)||void 0===a?void 0:a.body)?[3,8]:[4,s(i)];case 7:return n.sent(),[3,6];case 8:return[4,t(h,h.contentWindow)];case 9:return[2,n.sent()];case 10:return null===(u=h.parentNode)||void 0===u||u.removeChild(h),[7];case 11:return[2]}}))}))}function Y(t){for(var e=function(t){for(var e,r,n="Unexpected syntax '".concat(t,"'"),i=/^\s*([a-z-]*)(.*)$/i.exec(t),o=i[1]||void 0,s={},a=/([.:#][\w-]+|\[.+?\])/gi,u=function(t,e){s[t]=s[t]||[],s[t].push(e)};;){var h=a.exec(i[2]);if(!h)break;var l=h[0];switch(l[0]){case".":u("class",l.slice(1));break;case"#":u("id",l.slice(1));break;case"[":var c=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(l);if(!c)throw new Error(n);u(c[1],null!==(r=null!==(e=c[4])&&void 0!==e?e:c[5])&&void 0!==r?r:"");break;default:throw new Error(n)}}return[o,s]}(t),r=e[0],n=e[1],i=document.createElement(null!=r?r:"div"),o=0,s=Object.keys(n);o<s.length;o++){var a=s[o],u=n[a].join(" ");"style"===a?V(i.style,u):i.setAttribute(a,u)}return i}function V(t,e){for(var r=0,n=e.split(";");r<n.length;r++){var i=n[r],o=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(i);if(o){var s=o[1],a=o[2],u=o[4];t.setProperty(s,a,u||"")}}}var W=["monospace","sans-serif","serif"],q=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function Z(t){var e,r,n,i=!1,o=function(){var t=document.createElement("canvas");return t.width=1,t.height=1,[t,t.getContext("2d")]}(),s=o[0],a=o[1];return!function(t,e){return!(!e||!t.toDataURL)}(s,a)?r=n="unsupported":(i=function(t){return t.rect(0,0,10,10),t.rect(2,2,6,6),!t.isPointInPath(5,5,"evenodd")}(a),t?r=n="skipped":(e=function(t,e){!function(t,e){t.width=240,t.height=60,e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(100,1,62,20),e.fillStyle="#069",e.font='11pt "Times New Roman"';var r="Cwm fjordbank gly ".concat(String.fromCharCode(55357,56835));e.fillText(r,2,15),e.fillStyle="rgba(102, 204, 0, 0.2)",e.font="18pt Arial",e.fillText(r,4,45)}(t,e);var r=K(t),n=K(t);if(r!==n)return["unstable","unstable"];!function(t,e){t.width=122,t.height=110,e.globalCompositeOperation="multiply";for(var r=0,n=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];r<n.length;r++){var i=n[r],o=i[0],s=i[1],a=i[2];e.fillStyle=o,e.beginPath(),e.arc(s,a,40,0,2*Math.PI,!0),e.closePath(),e.fill()}e.fillStyle="#f9c",e.arc(60,60,60,0,2*Math.PI,!0),e.arc(60,60,20,0,2*Math.PI,!0),e.fill("evenodd")}(t,e);var i=K(t);return[i,r]}(s,a),r=e[0],n=e[1])),{winding:i,geometry:r,text:n}}function K(t){return t.toDataURL()}function J(){var t=screen,e=function(t){return d(c(t),null)},r=[e(t.width),e(t.height)];return r.sort().reverse(),r}var Q,$,tt=2500;function et(){var t=this;return function(){if(void 0===$){var t=function(){var e=rt();nt(e)?$=setTimeout(t,tt):(Q=e,$=void 0)};t()}}(),function(){return r(t,void 0,void 0,(function(){var t;return n(this,(function(e){switch(e.label){case 0:return nt(t=rt())?Q?[2,i([],Q,!0)]:k()?[4,(r=document,(r.exitFullscreen||r.msExitFullscreen||r.mozCancelFullScreen||r.webkitExitFullscreen).call(r))]:[3,2]:[3,2];case 1:e.sent(),t=rt(),e.label=2;case 2:return nt(t)||(Q=t),[2,t]}var r}))}))}}function rt(){var t=screen;return[d(f(t.availTop),null),d(f(t.width)-f(t.availWidth)-d(f(t.availLeft),0),null),d(f(t.height)-f(t.availHeight)-d(f(t.availTop),0),null),d(f(t.availLeft),null)]}function nt(t){for(var e=0;e<4;++e)if(t[e])return!1;return!0}function it(t){var e;return r(this,void 0,void 0,(function(){var r,i,o,a,u,h,l;return n(this,(function(n){switch(n.label){case 0:for(r=document,i=r.createElement("div"),o=new Array(t.length),a={},ot(i),l=0;l<t.length;++l)"DIALOG"===(u=Y(t[l])).tagName&&u.show(),ot(h=r.createElement("div")),h.appendChild(u),i.appendChild(h),o[l]=u;n.label=1;case 1:return r.body?[3,3]:[4,s(50)];case 2:return n.sent(),[3,1];case 3:r.body.appendChild(i);try{for(l=0;l<t.length;++l)o[l].offsetParent||(a[t[l]]=!0)}finally{null===(e=i.parentNode)||void 0===e||e.removeChild(i)}return[2,a]}}))}))}function ot(t){t.style.setProperty("visibility","hidden","important"),t.style.setProperty("display","block","important")}function st(t){return matchMedia("(inverted-colors: ".concat(t,")")).matches}function at(t){return matchMedia("(forced-colors: ".concat(t,")")).matches}function ut(t){return matchMedia("(prefers-contrast: ".concat(t,")")).matches}function ht(t){return matchMedia("(prefers-reduced-motion: ".concat(t,")")).matches}function lt(t){return matchMedia("(prefers-reduced-transparency: ".concat(t,")")).matches}function ct(t){return matchMedia("(dynamic-range: ".concat(t,")")).matches}var ft=Math,dt=function(){return 0};var pt={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};var mt=function(){for(var t=window;;){var e=t.parent;if(!e||e===t)return!1;try{if(e.location.origin!==t.location.origin)return!0}catch(t){if(t instanceof Error&&"SecurityError"===t.name)return!0;throw t}t=e}};var gt=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),vt=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),_t=["FRAGMENT_SHADER","VERTEX_SHADER"],yt=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],bt="WEBGL_debug_renderer_info";function xt(t){if(t.webgl)return t.webgl.context;var e,r=document.createElement("canvas");r.addEventListener("webglCreateContextError",(function(){return e=void 0}));for(var n=0,i=["webgl","experimental-webgl"];n<i.length;n++){var o=i[n];try{e=r.getContext(o)}catch(t){}if(e)break}return t.webgl={context:e},e}function Tt(t,e,r){var n=t.getShaderPrecisionFormat(t[e],t[r]);return n?[n.rangeMin,n.rangeMax,n.precision]:[]}function Et(t){return Object.keys(t.__proto__).filter(St)}function St(t){return"string"==typeof t&&!t.match(/[^A-Z0-9_x]/)}function At(){return U()}function Ot(t){return"function"==typeof t.getParameter}var Rt={fonts:function(){var t=this;return H((function(e,i){var o=i.document;return r(t,void 0,void 0,(function(){var t,e,r,i,s,a,u,h,l,c,f;return n(this,(function(n){for((t=o.body).style.fontSize="48px",(e=o.createElement("div")).style.setProperty("visibility","hidden","important"),r={},i={},s=function(t){var r=o.createElement("span"),n=r.style;return n.position="absolute",n.top="0",n.left="0",n.fontFamily=t,r.textContent="mmMwWLliI0O&1",e.appendChild(r),r},a=function(t,e){return s("'".concat(t,"',").concat(e))},u=function(){for(var t={},e=function(e){t[e]=W.map((function(t){return a(e,t)}))},r=0,n=q;r<n.length;r++){e(n[r])}return t},h=function(t){return W.some((function(e,n){return t[n].offsetWidth!==r[e]||t[n].offsetHeight!==i[e]}))},l=function(){return W.map(s)}(),c=u(),t.appendChild(e),f=0;f<W.length;f++)r[W[f]]=l[f].offsetWidth,i[W[f]]=l[f].offsetHeight;return[2,q.filter((function(t){return h(c[t])}))]}))}))}))},domBlockers:function(t){var e=(void 0===t?{}:t).debug;return r(this,void 0,void 0,(function(){var t,r,i,o,s;return n(this,(function(n){switch(n.label){case 0:return L()||X()?(a=atob,t={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',a("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",a("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",a("LnNwb25zb3JpdA=="),".ylamainos",a("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",a("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",a("LmhlYWRlci1ibG9ja2VkLWFk"),a("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",a("I2FkXzMwMFgyNTA="),a("I2Jhbm5lcmZsb2F0MjI="),a("I2NhbXBhaWduLWJhbm5lcg=="),a("I0FkLUNvbnRlbnQ=")],adGuardChinese:[a("LlppX2FkX2FfSA=="),a("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",a("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),a("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",a("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",a("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",a("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),a("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),a("LmFkZ29vZ2xl"),a("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[a("YW1wLWF1dG8tYWRz"),a("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",a("I2FkX2ludmlld19hcmVh")],adGuardRussian:[a("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),a("LnJlY2xhbWE="),'div[id^="smi2adblock"]',a("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[a("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),a("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",a("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),a("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),a("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",a("I3Jla2xhbWk="),a("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),a("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),a("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[a("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",a("LndpZGdldF9wb19hZHNfd2lkZ2V0"),a("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",a("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[a("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),a("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",a("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",a("I3Jla2xhbW5pLWJveA=="),a("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",a("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[a("I2FkdmVydGVudGll"),a("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",a("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",a("LnNwb25zb3JsaW5rZ3J1ZW4="),a("I3dlcmJ1bmdza3k="),a("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),a("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[a("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",a("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[a("LnJla2xhbW9zX3RhcnBhcw=="),a("LnJla2xhbW9zX251b3JvZG9z"),a("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),a("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),a("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[a("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[a("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),a("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",a("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[a("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),a("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),a("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",a("LmFkX19tYWlu"),a("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[a("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[a("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),a("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[a("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),a("I2xpdmVyZUFkV3JhcHBlcg=="),a("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),a("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[a("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",a("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),a("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),a("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[a("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),a("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),a("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",a("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),a("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),a("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),a("ZGl2I3NrYXBpZWNfYWQ=")],ro:[a("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),a("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),a("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[a("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),a("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),a("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",a("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),a("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",a("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]},r=Object.keys(t),[4,it((s=[]).concat.apply(s,r.map((function(e){return t[e]}))))]):[2,void 0];case 1:return i=n.sent(),e&&function(t,e){for(var r="DOM blockers debug:\n```",n=0,i=Object.keys(t);n<i.length;n++){var o=i[n];r+="\n".concat(o,":");for(var s=0,a=t[o];s<a.length;s++){var u=a[s];r+="\n  ".concat(e[u]?"":""," ").concat(u)}}console.log("".concat(r,"\n```"))}(t,i),(o=r.filter((function(e){var r=t[e];return p(r.map((function(t){return i[t]})))>.6*r.length}))).sort(),[2,o]}var a}))}))},fontPreferences:function(){return function(t,e){void 0===e&&(e=4e3);return H((function(r,n){var o=n.document,s=o.body,a=s.style;a.width="".concat(e,"px"),a.webkitTextSizeAdjust=a.textSizeAdjust="none",F()?s.style.zoom="".concat(1/n.devicePixelRatio):L()&&(s.style.zoom="reset");var u=o.createElement("div");return u.textContent=i([],Array(e/20|0),!0).map((function(){return"word"})).join(" "),s.appendChild(u),t(o,s)}),'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}((function(t,e){for(var r={},n={},i=0,o=Object.keys(pt);i<o.length;i++){var s=o[i],a=pt[s],u=a[0],h=void 0===u?{}:u,l=a[1],c=void 0===l?"mmMwWLliI0fiflO&1":l,f=t.createElement("span");f.textContent=c,f.style.whiteSpace="nowrap";for(var d=0,p=Object.keys(h);d<p.length;d++){var m=p[d],g=h[m];void 0!==g&&(f.style[m]=g)}r[s]=f,e.append(t.createElement("br"),f)}for(var v=0,_=Object.keys(pt);v<_.length;v++){n[s=_[v]]=r[s].getBoundingClientRect().width}return n}))},audio:function(){return L()&&G()&&B()?-4:j()},screenFrame:function(){var t=this;if(L()&&G()&&B())return function(){return Promise.resolve(void 0)};var e=et();return function(){return r(t,void 0,void 0,(function(){var t,r;return n(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return t=n.sent(),[2,[(r=function(t){return null===t?null:m(t,10)})(t[0]),r(t[1]),r(t[2]),r(t[3])]]}}))}))}},canvas:function(){return Z(L()&&G()&&B())},osCpu:function(){return navigator.oscpu},languages:function(){var t,e=navigator,r=[],n=e.language||e.userLanguage||e.browserLanguage||e.systemLanguage;if(void 0!==n&&r.push([n]),Array.isArray(e.languages))F()&&p([!("MediaSettingsRange"in(t=window)),"RTCEncodedAudioFrame"in t,""+t.Intl=="[object Intl]",""+t.Reflect=="[object Reflect]"])>=3||r.push(e.languages);else if("string"==typeof e.languages){var i=e.languages;i&&r.push(i.split(","))}return r},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return d(f(navigator.deviceMemory),void 0)},screenResolution:function(){if(!(L()&&G()&&B()))return J()},hardwareConcurrency:function(){return d(c(navigator.hardwareConcurrency),void 0)},timezone:function(){var t,e=null===(t=window.Intl)||void 0===t?void 0:t.DateTimeFormat;if(e){var r=(new e).resolvedOptions().timeZone;if(r)return r}var n,i=(n=(new Date).getFullYear(),-Math.max(f(new Date(n,0,1).getTimezoneOffset()),f(new Date(n,6,1).getTimezoneOffset())));return"UTC".concat(i>=0?"+":"").concat(i)},sessionStorage:function(){try{return!!window.sessionStorage}catch(t){return!0}},localStorage:function(){try{return!!window.localStorage}catch(t){return!0}},indexedDB:function(){if(!C()&&!D())try{return!!window.indexedDB}catch(t){return!0}},openDatabase:function(){return!!window.openDatabase},cpuClass:function(){return navigator.cpuClass},platform:function(){var t=navigator.platform;return"MacIntel"===t&&L()&&!N()?function(){if("iPad"===navigator.platform)return!0;var t=screen,e=t.width/t.height;return p(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,e>.65&&e<1.53])>=2}()?"iPad":"iPhone":t},plugins:function(){var t=navigator.plugins;if(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];if(n){for(var i=[],o=0;o<n.length;++o){var s=n[o];i.push({type:s.type,suffixes:s.suffixes})}e.push({name:n.name,description:n.description,mimeTypes:i})}}return e}},touchSupport:function(){var t,e=navigator,r=0;void 0!==e.maxTouchPoints?r=c(e.maxTouchPoints):void 0!==e.msMaxTouchPoints&&(r=e.msMaxTouchPoints);try{document.createEvent("TouchEvent"),t=!0}catch(e){t=!1}return{maxTouchPoints:r,touchEvent:t,touchStart:"ontouchstart"in window}},vendor:function(){return navigator.vendor||""},vendorFlavors:function(){for(var t=[],e=0,r=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];e<r.length;e++){var n=r[e],i=window[n];i&&"object"==typeof i&&t.push(n)}return t.sort()},cookiesEnabled:function(){var t=document;try{t.cookie="cookietest=1; SameSite=Strict;";var e=-1!==t.cookie.indexOf("cookietest=");return t.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch(t){return!1}},colorGamut:function(){for(var t=0,e=["rec2020","p3","srgb"];t<e.length;t++){var r=e[t];if(matchMedia("(color-gamut: ".concat(r,")")).matches)return r}},invertedColors:function(){return!!st("inverted")||!st("none")&&void 0},forcedColors:function(){return!!at("active")||!at("none")&&void 0},monochrome:function(){if(matchMedia("(min-monochrome: 0)").matches){for(var t=0;t<=100;++t)if(matchMedia("(max-monochrome: ".concat(t,")")).matches)return t;throw new Error("Too high value")}},contrast:function(){return ut("no-preference")?0:ut("high")||ut("more")?1:ut("low")||ut("less")?-1:ut("forced")?10:void 0},reducedMotion:function(){return!!ht("reduce")||!ht("no-preference")&&void 0},reducedTransparency:function(){return!!lt("reduce")||!lt("no-preference")&&void 0},hdr:function(){return!!ct("high")||!ct("standard")&&void 0},math:function(){var t,e=ft.acos||dt,r=ft.acosh||dt,n=ft.asin||dt,i=ft.asinh||dt,o=ft.atanh||dt,s=ft.atan||dt,a=ft.sin||dt,u=ft.sinh||dt,h=ft.cos||dt,l=ft.cosh||dt,c=ft.tan||dt,f=ft.tanh||dt,d=ft.exp||dt,p=ft.expm1||dt,m=ft.log1p||dt;return{acos:e(.12312423423423424),acosh:r(1e308),acoshPf:(t=1e154,ft.log(t+ft.sqrt(t*t-1))),asin:n(.12312423423423424),asinh:i(1),asinhPf:function(t){return ft.log(t+ft.sqrt(t*t+1))}(1),atanh:o(.5),atanhPf:function(t){return ft.log((1+t)/(1-t))/2}(.5),atan:s(.5),sin:a(-1e300),sinh:u(1),sinhPf:function(t){return ft.exp(t)-1/ft.exp(t)/2}(1),cos:h(10.000000000123),cosh:l(1),coshPf:function(t){return(ft.exp(t)+1/ft.exp(t))/2}(1),tan:c(-1e300),tanh:f(1),tanhPf:function(t){return(ft.exp(2*t)-1)/(ft.exp(2*t)+1)}(1),exp:d(1),expm1:p(1),expm1Pf:function(t){return ft.exp(t)-1}(1),log1p:m(10),log1pPf:function(t){return ft.log(1+t)}(10),powPI:function(t){return ft.pow(ft.PI,t)}(-100)}},pdfViewerEnabled:function(){return navigator.pdfViewerEnabled},architecture:function(){var t=new Float32Array(1),e=new Uint8Array(t.buffer);return t[0]=1/0,t[0]=t[0]-t[0],e[3]},applePay:function(){var t=window.ApplePaySession;if("function"!=typeof(null==t?void 0:t.canMakePayments))return-1;if(mt())return-3;try{return t.canMakePayments()?1:0}catch(t){return function(t){if(t instanceof Error&&"InvalidAccessError"===t.name&&/\bfrom\b.*\binsecure\b/i.test(t.message))return-2;throw t}(t)}},privateClickMeasurement:function(){var t,e=document.createElement("a"),r=null!==(t=e.attributionSourceId)&&void 0!==t?t:e.attributionsourceid;return void 0===r?void 0:String(r)},audioBaseLatency:function(){var t;return X()||L()?window.AudioContext&&null!==(t=(new AudioContext).baseLatency)&&void 0!==t?t:-1:-2},webGlBasics:function(t){var e,r,n,i,o,s,a=xt(t.cache);if(!a)return-1;if(!Ot(a))return-2;var u=At()?null:a.getExtension(bt);return{version:(null===(e=a.getParameter(a.VERSION))||void 0===e?void 0:e.toString())||"",vendor:(null===(r=a.getParameter(a.VENDOR))||void 0===r?void 0:r.toString())||"",vendorUnmasked:u?null===(n=a.getParameter(u.UNMASKED_VENDOR_WEBGL))||void 0===n?void 0:n.toString():"",renderer:(null===(i=a.getParameter(a.RENDERER))||void 0===i?void 0:i.toString())||"",rendererUnmasked:u?null===(o=a.getParameter(u.UNMASKED_RENDERER_WEBGL))||void 0===o?void 0:o.toString():"",shadingLanguageVersion:(null===(s=a.getParameter(a.SHADING_LANGUAGE_VERSION))||void 0===s?void 0:s.toString())||""}},webGlExtensions:function(t){var e=xt(t.cache);if(!e)return-1;if(!Ot(e))return-2;var r=e.getSupportedExtensions(),n=e.getContextAttributes(),i=[],o=[],s=[],a=[];if(n)for(var u=0,h=Object.keys(n);u<h.length;u++){var l=h[u];i.push("".concat(l,"=").concat(n[l]))}for(var c=0,f=Et(e);c<f.length;c++){var d=e[b=f[c]];o.push("".concat(b,"=").concat(d).concat(gt.has(d)?"=".concat(e.getParameter(d)):""))}if(r)for(var p=0,m=r;p<m.length;p++){var g=m[p];if(!(g===bt&&At()||"WEBGL_polygon_mode"===g&&(F()||L()))){var v=e.getExtension(g);if(v)for(var _=0,y=Et(v);_<y.length;_++){var b;d=v[b=y[_]];s.push("".concat(b,"=").concat(d).concat(vt.has(d)?"=".concat(e.getParameter(d)):""))}}}for(var x=0,T=_t;x<T.length;x++)for(var E=T[x],S=0,A=yt;S<A.length;S++){var O=A[S],R=Tt(e,E,O);a.push("".concat(E,".").concat(O,"=").concat(R.join(",")))}return s.sort(),o.sort(),{contextAttributes:i,parameters:o,shaderPrecisions:a,extensions:r,extensionParameters:s}}};var wt="$ if upgrade to Pro: https://fpjs.dev/pro";function Mt(t){var e=function(t){if(X())return.4;if(L())return!N()||G()&&B()?.3:.5;var e="value"in t.platform?t.platform.value:"";if(/^Win/.test(e))return.6;if(/^Mac/.test(e))return.5;return.7}(t),r=function(t){return m(.99+.01*t,1e-4)}(e);return{score:e,comment:wt.replace(/\$/g,"".concat(r))}}function Pt(t){return JSON.stringify(t,(function(t,r){return r instanceof Error?e({name:(n=r).name,message:n.message,stack:null===(i=n.stack)||void 0===i?void 0:i.split("\n")},n):r;var n,i}),2)}function It(t){return M(function(t){for(var e="",r=0,n=Object.keys(t).sort();r<n.length;r++){var i=n[r],o=t[i],s="error"in o?"error":JSON.stringify(o.value);e+="".concat(e?"|":"").concat(i.replace(/([:|\\])/g,"\\$1"),":").concat(s)}return e}(t))}function Ct(t){return void 0===t&&(t=50),function(t,e){void 0===e&&(e=1/0);var r=window.requestIdleCallback;return r?new Promise((function(t){return r.call(window,(function(){return t()}),{timeout:e})})):s(Math.min(t,e))}(t,2*t)}function Dt(t,e){var i=Date.now();return{get:function(s){return r(this,void 0,void 0,(function(){var r,a,u;return n(this,(function(n){switch(n.label){case 0:return r=Date.now(),[4,t()];case 1:return a=n.sent(),u=function(t){var e,r=Mt(t);return{get visitorId(){return void 0===e&&(e=It(this.components)),e},set visitorId(t){e=t},confidence:r,components:t,version:o}}(a),(e||(null==s?void 0:s.debug))&&console.log("Copy the text below to get the debug data:\n\n```\nversion: ".concat(u.version,"\nuserAgent: ").concat(navigator.userAgent,"\ntimeBetweenLoadAndGet: ").concat(r-i,"\nvisitorId: ").concat(u.visitorId,"\ncomponents: ").concat(Pt(a),"\n```")),[2,u]}}))}))}}}function Ft(t){var e;return void 0===t&&(t={}),r(this,void 0,void 0,(function(){var r,i,s;return n(this,(function(n){switch(n.label){case 0:return(null===(e=t.monitoring)||void 0===e||e)&&function(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var t=new XMLHttpRequest;t.open("get","https://m1.openfpcdn.io/fingerprintjs/v".concat(o,"/npm-monitoring"),!0),t.send()}catch(t){console.error(t)}}(),r=t.delayFallback,i=t.debug,[4,Ct(r)];case 1:return n.sent(),s=function(t){return I(Rt,t,[])}({cache:{},debug:i}),[2,Dt(s,i)]}}))}))}var Lt={load:Ft,hashComponents:It,componentsToDebugString:Pt},Nt=M;return t.componentsToDebugString=Pt,t.default=Lt,t.getFullscreenElement=k,t.getUnstableAudioFingerprint=j,t.getUnstableCanvasFingerprint=Z,t.getUnstableScreenFrame=et,t.getUnstableScreenResolution=J,t.getWebGLContext=xt,t.hashComponents=It,t.isAndroid=X,t.isChromium=F,t.isDesktopWebKit=N,t.isEdgeHTML=D,t.isGecko=U,t.isTrident=C,t.isWebKit=L,t.load=Ft,t.loadSources=I,t.murmurX64Hash128=Nt,t.prepareForSources=Ct,t.sources=Rt,t.transformSource=function(t,e){var r=function(t){return P(t)?e(t):function(){var r=t();return a(r)?r.then(e):e(r)}};return function(e){var n=t(e);return a(n)?n.then(r):r(n)}},t.withIframe=H,Object.defineProperty(t,"__esModule",{value:!0}),t}({}),o=function(t){"use strict";var e=setTimeout;function r(t){return Boolean(t&&void 0!==t.length)}function n(){}function i(t){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function o(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn((function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(t){return void a(e.promise,t)}s(e.promise,n)}else(1===t._state?s:a)(e.promise,t._value)}))):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if(e instanceof i)return t._state=3,t._value=e,void u(t);if("function"==typeof r)return void l((n=r,o=e,function(){n.apply(o,arguments)}),t)}t._state=1,t._value=e,u(t)}catch(e){a(t,e)}var n,o}function a(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&i._immediateFn((function(){t._handled||i._unhandledRejectionFn(t._value)}));for(var e=0,r=t._deferreds.length;e<r;e++)o(t,t._deferreds[e]);t._deferreds=null}function h(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function l(t,e){var r=!1;try{t((function(t){r||(r=!0,s(e,t))}),(function(t){r||(r=!0,a(e,t))}))}catch(t){if(r)return;r=!0,a(e,t)}}i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var r=new this.constructor(n);return o(this,new h(t,e,r)),r},i.prototype.finally=function(t){var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){return e.reject(r)}))}))},i.all=function(t){return new i((function(e,n){if(!r(t))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var o=i.length;function s(t,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var a=r.then;if("function"==typeof a)return void a.call(r,(function(e){s(t,e)}),n)}i[t]=r,0==--o&&e(i)}catch(t){n(t)}}for(var a=0;a<i.length;a++)s(a,i[a])}))},i.allSettled=function(t){return new this((function(e,r){if(!t||void 0===t.length)return r(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var i=n.length;function o(t,r){if(r&&("object"==typeof r||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,(function(e){o(t,e)}),(function(r){n[t]={status:"rejected",reason:r},0==--i&&e(n)}))}n[t]={status:"fulfilled",value:r},0==--i&&e(n)}for(var s=0;s<n.length;s++)o(s,n[s])}))},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i((function(e){e(t)}))},i.reject=function(t){return new i((function(e,r){r(t)}))},i.race=function(t){return new i((function(e,n){if(!r(t))return n(new TypeError("Promise.race accepts an array"));for(var o=0,s=t.length;o<s;o++)i.resolve(t[o]).then(e,n)}))},i._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){e(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var c=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;var p=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,n,i=arguments,o=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),s=1;s<arguments.length;s++){for(var a in r=Object(i[s]))f.call(r,a)&&(o[a]=r[a]);if(c){n=c(r);for(var u=0;u<n.length;u++)d.call(r,n[u])&&(o[n[u]]=r[n[u]])}}return o};"undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:"undefined"!=typeof global&&(global.globalThis=global)),globalThis.Promise||(globalThis.Promise=i),Object.assign||(Object.assign=p);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!globalThis.performance||!globalThis.performance.now){var m=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-m}}for(var g,v,_,y,b,x,T,E,S,A,O,R,w,M,P,I,C,D,F,L,N=Date.now(),B=["ms","moz","webkit","o"],U=0;U<B.length&&!globalThis.requestAnimationFrame;++U){var G=B[U];globalThis.requestAnimationFrame=globalThis[G+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[G+"CancelAnimationFrame"]||globalThis[G+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+N-e;return r<0&&(r=0),N=e,globalThis.self.setTimeout((function(){N=Date.now(),t(performance.now())}),r)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array),t.ENV=void 0,(g=t.ENV||(t.ENV={}))[g.WEBGL_LEGACY=0]="WEBGL_LEGACY",g[g.WEBGL=1]="WEBGL",g[g.WEBGL2=2]="WEBGL2",t.RENDERER_TYPE=void 0,(v=t.RENDERER_TYPE||(t.RENDERER_TYPE={}))[v.UNKNOWN=0]="UNKNOWN",v[v.WEBGL=1]="WEBGL",v[v.CANVAS=2]="CANVAS",t.BUFFER_BITS=void 0,(_=t.BUFFER_BITS||(t.BUFFER_BITS={}))[_.COLOR=16384]="COLOR",_[_.DEPTH=256]="DEPTH",_[_.STENCIL=1024]="STENCIL",t.BLEND_MODES=void 0,(y=t.BLEND_MODES||(t.BLEND_MODES={}))[y.NORMAL=0]="NORMAL",y[y.ADD=1]="ADD",y[y.MULTIPLY=2]="MULTIPLY",y[y.SCREEN=3]="SCREEN",y[y.OVERLAY=4]="OVERLAY",y[y.DARKEN=5]="DARKEN",y[y.LIGHTEN=6]="LIGHTEN",y[y.COLOR_DODGE=7]="COLOR_DODGE",y[y.COLOR_BURN=8]="COLOR_BURN",y[y.HARD_LIGHT=9]="HARD_LIGHT",y[y.SOFT_LIGHT=10]="SOFT_LIGHT",y[y.DIFFERENCE=11]="DIFFERENCE",y[y.EXCLUSION=12]="EXCLUSION",y[y.HUE=13]="HUE",y[y.SATURATION=14]="SATURATION",y[y.COLOR=15]="COLOR",y[y.LUMINOSITY=16]="LUMINOSITY",y[y.NORMAL_NPM=17]="NORMAL_NPM",y[y.ADD_NPM=18]="ADD_NPM",y[y.SCREEN_NPM=19]="SCREEN_NPM",y[y.NONE=20]="NONE",y[y.SRC_OVER=0]="SRC_OVER",y[y.SRC_IN=21]="SRC_IN",y[y.SRC_OUT=22]="SRC_OUT",y[y.SRC_ATOP=23]="SRC_ATOP",y[y.DST_OVER=24]="DST_OVER",y[y.DST_IN=25]="DST_IN",y[y.DST_OUT=26]="DST_OUT",y[y.DST_ATOP=27]="DST_ATOP",y[y.ERASE=26]="ERASE",y[y.SUBTRACT=28]="SUBTRACT",y[y.XOR=29]="XOR",t.DRAW_MODES=void 0,(b=t.DRAW_MODES||(t.DRAW_MODES={}))[b.POINTS=0]="POINTS",b[b.LINES=1]="LINES",b[b.LINE_LOOP=2]="LINE_LOOP",b[b.LINE_STRIP=3]="LINE_STRIP",b[b.TRIANGLES=4]="TRIANGLES",b[b.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",b[b.TRIANGLE_FAN=6]="TRIANGLE_FAN",t.FORMATS=void 0,(x=t.FORMATS||(t.FORMATS={}))[x.RGBA=6408]="RGBA",x[x.RGB=6407]="RGB",x[x.RG=33319]="RG",x[x.RED=6403]="RED",x[x.RGBA_INTEGER=36249]="RGBA_INTEGER",x[x.RGB_INTEGER=36248]="RGB_INTEGER",x[x.RG_INTEGER=33320]="RG_INTEGER",x[x.RED_INTEGER=36244]="RED_INTEGER",x[x.ALPHA=6406]="ALPHA",x[x.LUMINANCE=6409]="LUMINANCE",x[x.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",x[x.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",x[x.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t.TARGETS=void 0,(T=t.TARGETS||(t.TARGETS={}))[T.TEXTURE_2D=3553]="TEXTURE_2D",T[T.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",T[T.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",T[T.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",T[T.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",T[T.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",T[T.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",T[T.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",T[T.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t.TYPES=void 0,(E=t.TYPES||(t.TYPES={}))[E.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",E[E.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",E[E.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",E[E.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",E[E.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",E[E.UNSIGNED_INT=5125]="UNSIGNED_INT",E[E.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",E[E.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",E[E.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",E[E.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",E[E.BYTE=5120]="BYTE",E[E.SHORT=5122]="SHORT",E[E.INT=5124]="INT",E[E.FLOAT=5126]="FLOAT",E[E.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",E[E.HALF_FLOAT=36193]="HALF_FLOAT",t.SAMPLER_TYPES=void 0,(S=t.SAMPLER_TYPES||(t.SAMPLER_TYPES={}))[S.FLOAT=0]="FLOAT",S[S.INT=1]="INT",S[S.UINT=2]="UINT",t.SCALE_MODES=void 0,(A=t.SCALE_MODES||(t.SCALE_MODES={}))[A.NEAREST=0]="NEAREST",A[A.LINEAR=1]="LINEAR",t.WRAP_MODES=void 0,(O=t.WRAP_MODES||(t.WRAP_MODES={}))[O.CLAMP=33071]="CLAMP",O[O.REPEAT=10497]="REPEAT",O[O.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t.MIPMAP_MODES=void 0,(R=t.MIPMAP_MODES||(t.MIPMAP_MODES={}))[R.OFF=0]="OFF",R[R.POW2=1]="POW2",R[R.ON=2]="ON",R[R.ON_MANUAL=3]="ON_MANUAL",t.ALPHA_MODES=void 0,(w=t.ALPHA_MODES||(t.ALPHA_MODES={}))[w.NPM=0]="NPM",w[w.UNPACK=1]="UNPACK",w[w.PMA=2]="PMA",w[w.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",w[w.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",w[w.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",w[w.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t.CLEAR_MODES=void 0,(M=t.CLEAR_MODES||(t.CLEAR_MODES={}))[M.NO=0]="NO",M[M.YES=1]="YES",M[M.AUTO=2]="AUTO",M[M.BLEND=0]="BLEND",M[M.CLEAR=1]="CLEAR",M[M.BLIT=2]="BLIT",t.GC_MODES=void 0,(P=t.GC_MODES||(t.GC_MODES={}))[P.AUTO=0]="AUTO",P[P.MANUAL=1]="MANUAL",t.PRECISION=void 0,(I=t.PRECISION||(t.PRECISION={})).LOW="lowp",I.MEDIUM="mediump",I.HIGH="highp",t.MASK_TYPES=void 0,(C=t.MASK_TYPES||(t.MASK_TYPES={}))[C.NONE=0]="NONE",C[C.SCISSOR=1]="SCISSOR",C[C.STENCIL=2]="STENCIL",C[C.SPRITE=3]="SPRITE",C[C.COLOR=4]="COLOR",t.COLOR_MASK_BITS=void 0,(D=t.COLOR_MASK_BITS||(t.COLOR_MASK_BITS={}))[D.RED=1]="RED",D[D.GREEN=2]="GREEN",D[D.BLUE=4]="BLUE",D[D.ALPHA=8]="ALPHA",t.MSAA_QUALITY=void 0,(F=t.MSAA_QUALITY||(t.MSAA_QUALITY={}))[F.NONE=0]="NONE",F[F.LOW=2]="LOW",F[F.MEDIUM=4]="MEDIUM",F[F.HIGH=8]="HIGH",t.BUFFER_TYPE=void 0,(L=t.BUFFER_TYPE||(t.BUFFER_TYPE={}))[L.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",L[L.ARRAY_BUFFER=34962]="ARRAY_BUFFER",L[L.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";var k={createCanvas:function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return null!==(t=document.baseURI)&&void 0!==t?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},X=/iPhone/i,j=/iPod/i,z=/iPad/i,H=/\biOS-universal(?:.+)Mac\b/i,Y=/\bAndroid(?:.+)Mobile\b/i,V=/Android/i,W=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,q=/Silk/i,Z=/Windows Phone/i,K=/\bWindows(?:.+)ARM\b/i,J=/BlackBerry/i,Q=/BB10/i,$=/Opera Mini/i,tt=/\b(CriOS|Chrome)(?:.+)Mobile/i,et=/Mobile(?:.+)Firefox\b/i,rt=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};var nt=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=e.userAgent,n=r.split("[FBAN");void 0!==n[1]&&(r=n[0]),void 0!==(n=r.split("Twitter"))[1]&&(r=n[0]);var i=function(t){return function(e){return e.test(t)}}(r),o={apple:{phone:i(X)&&!i(Z),ipod:i(j),tablet:!i(X)&&(i(z)||rt(e))&&!i(Z),universal:i(H),device:(i(X)||i(j)||i(z)||i(H)||rt(e))&&!i(Z)},amazon:{phone:i(W),tablet:!i(W)&&i(q),device:i(W)||i(q)},android:{phone:!i(Z)&&i(W)||!i(Z)&&i(Y),tablet:!i(Z)&&!i(W)&&!i(Y)&&(i(q)||i(V)),device:!i(Z)&&(i(W)||i(q)||i(Y)||i(V))||i(/\bokhttp\b/i)},windows:{phone:i(Z),tablet:i(K),device:i(Z)||i(K)},other:{blackberry:i(J),blackberry10:i(Q),opera:i($),firefox:i(et),chrome:i(tt),device:i(J)||i(Q)||i($)||i(et)||i(tt)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(globalThis.navigator);var it={ADAPTER:k,MIPMAP_TEXTURES:t.MIPMAP_MODES.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:t.MSAA_QUALITY.NONE,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(nt.tablet||nt.phone){var r;if(nt.apple.device)if(r=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(r[1],10)<11&&(e=!1);if(nt.android.device)if(r=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(r[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:t.GC_MODES.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:t.WRAP_MODES.CLAMP,SCALE_MODE:t.SCALE_MODES.LINEAR,PRECISION_VERTEX:t.PRECISION.HIGH,PRECISION_FRAGMENT:nt.apple.device?t.PRECISION.HIGH:t.PRECISION.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!nt.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},ot="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function st(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(e??r.path)}},r.exports),r.exports}var at=st((function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||t,s),u=r?r+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,n,i=[];if(0===this._eventsCount)return i;for(n in t=this._events)e.call(t,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,i,o,s){var a=arguments,u=r?r+t:t;if(!this._events[u])return!1;var h,l,c=this._events[u],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,i),!0;case 5:return c.fn.call(c.context,e,n,i,o),!0;case 6:return c.fn.call(c.context,e,n,i,o,s),!0}for(l=1,h=new Array(f-1);l<f;l++)h[l-1]=a[l];c.fn.apply(c.context,h)}else{var d,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,i);break;default:if(!h)for(d=1,h=new Array(f-1);d<f;d++)h[d-1]=a[d];c[l].fn.apply(c[l].context,h)}}return!0},a.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,n,i){var o=r?r+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var u=0,h=[],l=a.length;u<l;u++)(a[u].fn!==e||i&&!a[u].once||n&&a[u].context!==n)&&h.push(a[u]);h.length?this._events[o]=1===h.length?h[0]:h:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&s(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})),ut=lt,ht=lt;function lt(t,e,r){r=r||2;var n,i,o,s,a,u,h,l=e&&e.length,c=l?e[0]*r:t.length,f=ct(t,0,c,r,!0),d=[];if(!f||f.next===f.prev)return d;if(l&&(f=function(t,e,r,n){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=ct(t,e[i]*n,i<o-1?e[i+1]*n:t.length,n,!1))===s.next&&(s.steiner=!0),a.push(Tt(s));for(a.sort(_t),i=0;i<a.length;i++)r=yt(a[i],r);return r}(t,e,f,r)),t.length>80*r){n=o=t[0],i=s=t[1];for(var p=r;p<c;p+=r)(a=t[p])<n&&(n=a),(u=t[p+1])<i&&(i=u),a>o&&(o=a),u>s&&(s=u);h=0!==(h=Math.max(o-n,s-i))?32767/h:0}return dt(f,d,r,n,i,h,0),d}function ct(t,e,r,n,i){var o,s;if(i===Lt(t,e,r,n)>0)for(o=e;o<r;o+=n)s=Ct(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=Ct(o,t[o],t[o+1],s);return s&&Ot(s,s.next)&&(Dt(s),s=s.next),s}function ft(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!Ot(n,n.next)&&0!==At(n.prev,n,n.next))n=n.next;else{if(Dt(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function dt(t,e,r,n,i,o,s){if(t){!s&&o&&function(t,e,r,n){var i=t;do{0===i.z&&(i.z=xt(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,s,a,u,h=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;e<h&&(a++,n=n.nextZ);e++);for(u=h;a>0||u>0&&n;)0!==a&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,h*=2}while(s>1)}(i)}(t,n,i,o);for(var a,u,h=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?mt(t,n,i,o):pt(t))e.push(a.i/r|0),e.push(t.i/r|0),e.push(u.i/r|0),Dt(t),t=u.next,h=u.next;else if((t=u)===h){s?1===s?dt(t=gt(ft(t),e,r),e,r,n,i,o,2):2===s&&vt(t,e,r,n,i,o):dt(ft(t),e,r,n,i,o,1);break}}}function pt(t){var e=t.prev,r=t,n=t.next;if(At(e,r,n)>=0)return!1;for(var i=e.x,o=r.x,s=n.x,a=e.y,u=r.y,h=n.y,l=i<o?i<s?i:s:o<s?o:s,c=a<u?a<h?a:h:u<h?u:h,f=i>o?i>s?i:s:o>s?o:s,d=a>u?a>h?a:h:u>h?u:h,p=n.next;p!==e;){if(p.x>=l&&p.x<=f&&p.y>=c&&p.y<=d&&Et(i,a,o,u,s,h,p.x,p.y)&&At(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function mt(t,e,r,n){var i=t.prev,o=t,s=t.next;if(At(i,o,s)>=0)return!1;for(var a=i.x,u=o.x,h=s.x,l=i.y,c=o.y,f=s.y,d=a<u?a<h?a:h:u<h?u:h,p=l<c?l<f?l:f:c<f?c:f,m=a>u?a>h?a:h:u>h?u:h,g=l>c?l>f?l:f:c>f?c:f,v=xt(d,p,e,r,n),_=xt(m,g,e,r,n),y=t.prevZ,b=t.nextZ;y&&y.z>=v&&b&&b.z<=_;){if(y.x>=d&&y.x<=m&&y.y>=p&&y.y<=g&&y!==i&&y!==s&&Et(a,l,u,c,h,f,y.x,y.y)&&At(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,b.x>=d&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==s&&Et(a,l,u,c,h,f,b.x,b.y)&&At(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;y&&y.z>=v;){if(y.x>=d&&y.x<=m&&y.y>=p&&y.y<=g&&y!==i&&y!==s&&Et(a,l,u,c,h,f,y.x,y.y)&&At(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=_;){if(b.x>=d&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==s&&Et(a,l,u,c,h,f,b.x,b.y)&&At(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function gt(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!Ot(i,o)&&Rt(i,n,n.next,o)&&Pt(i,o)&&Pt(o,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(o.i/r|0),Dt(n),Dt(n.next),n=t=o),n=n.next}while(n!==t);return ft(n)}function vt(t,e,r,n,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&St(s,a)){var u=It(s,a);return s=ft(s,s.next),u=ft(u,u.next),dt(s,e,r,n,i,o,0),void dt(u,e,r,n,i,o,0)}a=a.next}s=s.next}while(s!==t)}function _t(t,e){return t.x-e.x}function yt(t,e){var r=function(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s&&(s=a,r=n.x<n.next.x?n:n.next,a===i))return r}n=n.next}while(n!==e);if(!r)return null;var u,h=r,l=r.x,c=r.y,f=1/0;n=r;do{i>=n.x&&n.x>=l&&i!==n.x&&Et(o<c?i:s,o,l,c,o<c?s:i,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(i-n.x),Pt(n,t)&&(u<f||u===f&&(n.x>r.x||n.x===r.x&&bt(r,n)))&&(r=n,f=u)),n=n.next}while(n!==h);return r}(t,e);if(!r)return e;var n=It(r,t);return ft(n,n.next),ft(r,r.next)}function bt(t,e){return At(t.prev,t,e.prev)<0&&At(e.next,t,t.next)<0}function xt(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Tt(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function Et(t,e,r,n,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(n-a)>=(r-s)*(e-a)&&(r-s)*(o-a)>=(i-s)*(n-a)}function St(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Rt(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(Pt(t,e)&&Pt(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(At(t.prev,t,e.prev)||At(t,e.prev,e))||Ot(t,e)&&At(t.prev,t,t.next)>0&&At(e.prev,e,e.next)>0)}function At(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Ot(t,e){return t.x===e.x&&t.y===e.y}function Rt(t,e,r,n){var i=Mt(At(t,e,r)),o=Mt(At(t,e,n)),s=Mt(At(r,n,t)),a=Mt(At(r,n,e));return i!==o&&s!==a||(!(0!==i||!wt(t,r,e))||(!(0!==o||!wt(t,n,e))||(!(0!==s||!wt(r,t,n))||!(0!==a||!wt(r,e,n)))))}function wt(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Mt(t){return t>0?1:t<0?-1:0}function Pt(t,e){return At(t.prev,t,t.next)<0?At(t,e,t.next)>=0&&At(t,t.prev,e)>=0:At(t,e,t.prev)<0||At(t,t.next,e)<0}function It(t,e){var r=new Ft(t.i,t.x,t.y),n=new Ft(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Ct(t,e,r,n){var i=new Ft(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Dt(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ft(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Lt(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}lt.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs(Lt(t,0,o,r));if(i)for(var a=0,u=e.length;a<u;a++){var h=e[a]*r,l=a<u-1?e[a+1]*r:t.length;s-=Math.abs(Lt(t,h,l,r))}var c=0;for(a=0;a<n.length;a+=3){var f=n[a]*r,d=n[a+1]*r,p=n[a+2]*r;c+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},lt.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r},ut.default=ht;var Nt=st((function(t,e){!function(r){var n=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,o="object"==typeof ot&&ot;o.global!==o&&o.window!==o&&o.self!==o||(r=o);var s,a,u=2147483647,h=36,l=1,c=26,f=38,d=700,p=72,m=128,g="-",v=/^xn--/,_=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=h-l,T=Math.floor,E=String.fromCharCode;function S(t){throw RangeError(b[t])}function A(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function O(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+A((t=t.replace(y,".")).split("."),e).join(".")}function R(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function w(t){return A(t,(function(t){var e="";return t>65535&&(e+=E((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=E(t)})).join("")}function M(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function P(t,e,r){var n=0;for(t=r?T(t/d):t>>1,t+=T(t/e);t>x*c>>1;n+=h)t=T(t/x);return T(n+(x+1)*t/(t+f))}function I(t){var e,r,n,i,o,s,a,f,d,v,_,y=[],b=t.length,x=0,E=m,A=p;for((r=t.lastIndexOf(g))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&S("not-basic"),y.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<b;){for(o=x,s=1,a=h;i>=b&&S("invalid-input"),((f=(_=t.charCodeAt(i++))-48<10?_-22:_-65<26?_-65:_-97<26?_-97:h)>=h||f>T((u-x)/s))&&S("overflow"),x+=f*s,!(f<(d=a<=A?l:a>=A+c?c:a-A));a+=h)s>T(u/(v=h-d))&&S("overflow"),s*=v;A=P(x-o,e=y.length+1,0==o),T(x/e)>u-E&&S("overflow"),E+=T(x/e),x%=e,y.splice(x++,0,E)}return w(y)}function C(t){var e,r,n,i,o,s,a,f,d,v,_,y,b,x,A,O=[];for(y=(t=R(t)).length,e=m,r=0,o=p,s=0;s<y;++s)(_=t[s])<128&&O.push(E(_));for(n=i=O.length,i&&O.push(g);n<y;){for(a=u,s=0;s<y;++s)(_=t[s])>=e&&_<a&&(a=_);for(a-e>T((u-r)/(b=n+1))&&S("overflow"),r+=(a-e)*b,e=a,s=0;s<y;++s)if((_=t[s])<e&&++r>u&&S("overflow"),_==e){for(f=r,d=h;!(f<(v=d<=o?l:d>=o+c?c:d-o));d+=h)A=f-v,x=h-v,O.push(E(M(v+A%x,0))),f=T(A/x);O.push(E(M(f,0))),o=P(r,b,n==i),r=0,++n}++r,++e}return O.join("")}if(s={version:"1.3.2",ucs2:{decode:R,encode:w},decode:I,encode:C,toASCII:function(t){return O(t,(function(t){return _.test(t)?"xn--"+C(t):t}))},toUnicode:function(t){return O(t,(function(t){return v.test(t)?I(t.slice(4).toLowerCase()):t}))}},n&&i)if(t.exports==n)i.exports=s;else for(a in s)s.hasOwnProperty(a)&&(n[a]=s[a]);else r.punycode=s}(ot)})),Bt={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}};function Ut(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Gt=function(t,e,r,n){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var a=t.length;s>0&&a>s&&(a=s);for(var u=0;u<a;++u){var h,l,c,f,d=t[u].replace(o,"%20"),p=d.indexOf(r);p>=0?(h=d.substr(0,p),l=d.substr(p+1)):(h=d,l=""),c=decodeURIComponent(h),f=decodeURIComponent(l),Ut(i,c)?Array.isArray(i[c])?i[c].push(f):i[c]=[i[c],f]:i[c]=f}return i},kt=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},Xt=function(t,e,r,n){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(n){var i=encodeURIComponent(kt(n))+r;return Array.isArray(t[n])?t[n].map((function(t){return i+encodeURIComponent(kt(t))})).join(e):i+encodeURIComponent(kt(t[n]))})).join(e):n?encodeURIComponent(kt(n))+r+encodeURIComponent(kt(t)):""},jt=st((function(t,e){e.decode=e.parse=Gt,e.encode=e.stringify=Xt})),zt=oe,Ht=function(t,e){return oe(t,!1,!0).resolve(e)},Yt=function(t){Bt.isString(t)&&(t=oe(t));if(!(t instanceof Vt))return Vt.prototype.format.call(t);return t.format()};function Vt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Wt=/^([a-z0-9.+-]+:)/i,qt=/:[0-9]*$/,Zt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Kt=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Jt=["'"].concat(Kt),Qt=["%","/","?",";","#"].concat(Jt),$t=["/","?","#"],te=/^[+a-z0-9A-Z_-]{0,63}$/,ee=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,re={javascript:!0,"javascript:":!0},ne={javascript:!0,"javascript:":!0},ie={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function oe(t,e,r){if(t&&Bt.isObject(t)&&t instanceof Vt)return t;var n=new Vt;return n.parse(t,e,r),n}Vt.prototype.parse=function(t,e,r){if(!Bt.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var s=t=o.join(i);if(s=s.trim(),!r&&1===t.split("#").length){var a=Zt.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?jt.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=Wt.exec(s);if(u){var h=(u=u[0]).toLowerCase();this.protocol=h,s=s.substr(u.length)}if(r||u||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===s.substr(0,2);!l||u&&ne[u]||(s=s.substr(2),this.slashes=!0)}if(!ne[u]&&(l||u&&!ie[u])){for(var c,f,d=-1,p=0;p<$t.length;p++){-1!==(m=s.indexOf($t[p]))&&(-1===d||m<d)&&(d=m)}-1!==(f=-1===d?s.lastIndexOf("@"):s.lastIndexOf("@",d))&&(c=s.slice(0,f),s=s.slice(f+1),this.auth=decodeURIComponent(c)),d=-1;for(p=0;p<Qt.length;p++){var m;-1!==(m=s.indexOf(Qt[p]))&&(-1===d||m<d)&&(d=m)}-1===d&&(d=s.length),this.host=s.slice(0,d),s=s.slice(d),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var v=this.hostname.split(/\./),_=(p=0,v.length);p<_;p++){var y=v[p];if(y&&!y.match(te)){for(var b="",x=0,T=y.length;x<T;x++)y.charCodeAt(x)>127?b+="x":b+=y[x];if(!b.match(te)){var E=v.slice(0,p),S=v.slice(p+1),A=y.match(ee);A&&(E.push(A[1]),S.unshift(A[2])),S.length&&(s="/"+S.join(".")+s),this.hostname=E.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=Nt.toASCII(this.hostname));var O=this.port?":"+this.port:"",R=this.hostname||"";this.host=R+O,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!re[h])for(p=0,_=Jt.length;p<_;p++){var w=Jt[p];if(-1!==s.indexOf(w)){var M=encodeURIComponent(w);M===w&&(M=escape(w)),s=s.split(w).join(M)}}var P=s.indexOf("#");-1!==P&&(this.hash=s.substr(P),s=s.slice(0,P));var I=s.indexOf("?");if(-1!==I?(this.search=s.substr(I),this.query=s.substr(I+1),e&&(this.query=jt.parse(this.query)),s=s.slice(0,I)):e&&(this.search="",this.query={}),s&&(this.pathname=s),ie[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){O=this.pathname||"";var C=this.search||"";this.path=O+C}return this.href=this.format(),this},Vt.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&Bt.isObject(this.query)&&Object.keys(this.query).length&&(o=jt.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||ie[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),e+i+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+n},Vt.prototype.resolve=function(t){return this.resolveObject(oe(t,!1,!0)).format()},Vt.prototype.resolveObject=function(t){if(Bt.isString(t)){var e=new Vt;e.parse(t,!1,!0),t=e}for(var r=new Vt,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var u=s[a];"protocol"!==u&&(r[u]=t[u])}return ie[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!ie[t.protocol]){for(var h=Object.keys(t),l=0;l<h.length;l++){var c=h[l];r[c]=t[c]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||ne[t.protocol])r.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var d=r.pathname||"",p=r.search||"";r.path=d+p}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),v=g||m||r.host&&t.pathname,_=v,y=r.pathname&&r.pathname.split("/")||[],b=(f=t.pathname&&t.pathname.split("/")||[],r.protocol&&!ie[r.protocol]);if(b&&(r.hostname="",r.port=null,r.host&&(""===y[0]?y[0]=r.host:y.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),v=v&&(""===f[0]||""===y[0])),g)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,y=f;else if(f.length)y||(y=[]),y.pop(),y=y.concat(f),r.search=t.search,r.query=t.query;else if(!Bt.isNullOrUndefined(t.search)){if(b)r.hostname=r.host=y.shift(),(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.host=r.hostname=A.shift());return r.search=t.search,r.query=t.query,Bt.isNull(r.pathname)&&Bt.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!y.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var x=y.slice(-1)[0],T=(r.host||t.host||y.length>1)&&("."===x||".."===x)||""===x,E=0,S=y.length;S>=0;S--)"."===(x=y[S])?y.splice(S,1):".."===x?(y.splice(S,1),E++):E&&(y.splice(S,1),E--);if(!v&&!_)for(;E--;E)y.unshift("..");!v||""===y[0]||y[0]&&"/"===y[0].charAt(0)||y.unshift(""),T&&"/"!==y.join("/").substr(-1)&&y.push("");var A,O=""===y[0]||y[0]&&"/"===y[0].charAt(0);b&&(r.hostname=r.host=O?"":y.length?y.shift():"",(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.host=r.hostname=A.shift()));return(v=v||r.host&&y.length)&&!O&&y.unshift(""),y.length?r.pathname=y.join("/"):(r.pathname=null,r.path=null),Bt.isNull(r.pathname)&&Bt.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},Vt.prototype.parseHost=function(){var t=this.host,e=qt.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var se={parse:zt,format:Yt,resolve:Ht};function ae(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function ue(t){return t.split("?")[0].split("#")[0]}var he={toPosix:function(t){return e="\\",r="/",t.replace(new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r);var e,r},isUrl:function(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:function(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol:function(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol:function(t){ae(t),t=this.toPosix(t);var e="",r=/^file:\/\/\//.exec(t),n=/^[^/:]+:\/\//.exec(t),i=/^[^/:]+:\//.exec(t);if(r||n||i){var o=(null==r?void 0:r[0])||(null==n?void 0:n[0])||(null==i?void 0:i[0]);e=o,t=t.slice(o.length)}return e},toAbsolute:function(t,e,r){if(this.isDataUrl(t))return t;var n=ue(this.toPosix(null!=e?e:it.ADAPTER.getBaseUrl())),i=ue(this.toPosix(null!=r?r:this.rootname(n)));return ae(t),(t=this.toPosix(t)).startsWith("/")?he.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize:function(t){if(ae(t=this.toPosix(t)),0===t.length)return".";var e="",r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));var n=t.endsWith("/");return(t=function(t,e){for(var r,n="",i=0,o=-1,s=0,a=0;a<=t.length;++a){if(a<t.length)r=t.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var u=n.lastIndexOf("/");if(u!==n.length-1){-1===u?(n="",i=0):i=(n=n.slice(0,u)).length-1-n.lastIndexOf("/"),o=a,s=0;continue}}else if(2===n.length||1===n.length){n="",i=0,o=a,s=0;continue}e&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+t.slice(o+1,a):n=t.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===r&&-1!==s?++s:s=-1}return n}(t,!1)).length>0&&n&&(t+="/"),r?"/"+t:e+t},isAbsolute:function(t){return ae(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join:function(){for(var t,e,r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(0===n.length)return".";for(var o=0;o<n.length;++o){var s=n[o];if(ae(s),s.length>0)if(void 0===e)e=s;else{var a=null!==(t=n[o-1])&&void 0!==t?t:"";this.extname(a)?e+="/../"+s:e+="/"+s}}return void 0===e?".":this.normalize(e)},dirname:function(t){if(ae(t),0===t.length)return".";for(var e=(t=this.toPosix(t)).charCodeAt(0),r=47===e,n=-1,i=!0,o=this.getProtocol(t),s=t,a=(t=t.slice(o.length)).length-1;a>=1;--a)if(47===(e=t.charCodeAt(a))){if(!i){n=a;break}}else i=!1;return-1===n?r?"/":this.isUrl(s)?o+t:o:r&&1===n?"//":o+t.slice(0,n)},rootname:function(t){ae(t);var e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){var r=t.indexOf("/",e.length);(e=-1!==r?t.slice(0,r):t).endsWith("/")||(e+="/")}return e},basename:function(t,e){ae(t),e&&ae(e),t=this.toPosix(t);var r,n=0,i=-1,o=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var s=e.length-1,a=-1;for(r=t.length-1;r>=0;--r){var u=t.charCodeAt(r);if(47===u){if(!o){n=r+1;break}}else-1===a&&(o=!1,a=r+1),s>=0&&(u===e.charCodeAt(s)?-1==--s&&(i=r):(s=-1,i=a))}return n===i?i=a:-1===i&&(i=t.length),t.slice(n,i)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!o){n=r+1;break}}else-1===i&&(o=!1,i=r+1);return-1===i?"":t.slice(n,i)},extname:function(t){ae(t);for(var e=-1,r=0,n=-1,i=!0,o=0,s=(t=this.toPosix(t)).length-1;s>=0;--s){var a=t.charCodeAt(s);if(47!==a)-1===n&&(i=!1,n=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){r=s+1;break}}return-1===e||-1===n||0===o||1===o&&e===n-1&&e===r+1?"":t.slice(e,n)},parse:function(t){ae(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;var r,n=(t=this.toPosix(t)).charCodeAt(0),i=this.isAbsolute(t);e.root=this.rootname(t),r=i||this.hasProtocol(t)?1:0;for(var o=-1,s=0,a=-1,u=!0,h=t.length-1,l=0;h>=r;--h)if(47!==(n=t.charCodeAt(h)))-1===a&&(u=!1,a=h+1),46===n?-1===o?o=h:1!==l&&(l=1):-1!==o&&(l=-1);else if(!u){s=h+1;break}return-1===o||-1===a||0===l||1===l&&o===a-1&&o===s+1?-1!==a&&(e.base=e.name=0===s&&i?t.slice(1,a):t.slice(s,a)):(0===s&&i?(e.name=t.slice(1,o),e.base=t.slice(1,a)):(e.name=t.slice(s,o),e.base=t.slice(s,a)),e.ext=t.slice(o,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"};it.RETINA_PREFIX=/@([0-9\.]+)x/,it.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var le,ce=!1,fe="6.5.10";function de(t){var e;if(!ce){if(it.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var r=["\n %c %c %c PixiJS "+fe+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,r)}else globalThis.console&&globalThis.console.log("PixiJS "+fe+" - "+t+" - http://www.pixijs.com/");ce=!0}}function pe(){return void 0===le&&(le=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:it.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!it.ADAPTER.getWebGLRenderingContext())return!1;var e=it.ADAPTER.createCanvas(),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!r||!r.getContextAttributes().stencil);if(r){var i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch(t){return!1}}()),le}var me={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ge(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function ve(t){var e=t.toString(16);return"#"+(e="000000".substring(0,6-e.length)+e)}function _e(t){return"string"==typeof t&&"#"===(t=me[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),parseInt(t,16)}var ye=function(){for(var e=[],r=[],n=0;n<32;n++)e[n]=n,r[n]=n;e[t.BLEND_MODES.NORMAL_NPM]=t.BLEND_MODES.NORMAL,e[t.BLEND_MODES.ADD_NPM]=t.BLEND_MODES.ADD,e[t.BLEND_MODES.SCREEN_NPM]=t.BLEND_MODES.SCREEN,r[t.BLEND_MODES.NORMAL]=t.BLEND_MODES.NORMAL_NPM,r[t.BLEND_MODES.ADD]=t.BLEND_MODES.ADD_NPM,r[t.BLEND_MODES.SCREEN]=t.BLEND_MODES.SCREEN_NPM;var i=[];return i.push(r),i.push(e),i}();function be(t,e){return ye[e?1:0][t]}function xe(t,e,r,n){return r=r||new Float32Array(4),n||void 0===n?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function Te(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var r=t>>16&255,n=t>>8&255,i=255&t;return(255*e<<24)+((r=r*e+.5|0)<<16)+((n=n*e+.5|0)<<8)+(i=i*e+.5|0)}function Ee(t,e,r,n){return(r=r||new Float32Array(4))[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,(n||void 0===n)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function Se(t,e){void 0===e&&(e=null);var r=6*t;if((e=e||new Uint16Array(r)).length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var n=0,i=0;n<r;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function Ae(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var Oe={Float32Array,Uint32Array,Int32Array,Uint8Array};function Re(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function we(t){return!(t&t-1||!t)}function Me(t){var e=(t>65535?1:0)<<4,r=((t>>>=e)>255?1:0)<<3;return e|=r,e|=r=((t>>>=r)>15?1:0)<<2,(e|=r=((t>>>=r)>3?1:0)<<1)|(t>>>=r)>>1}function Pe(t,e,r){var n,i=t.length;if(!(e>=i||0===r)){var o=i-(r=e+r>i?i-e:r);for(n=e;n<o;++n)t[n]=t[n+r];t.length=o}}function Ie(t){return 0===t?0:t<0?-1:1}var Ce=0;function De(){return++Ce}var Fe={};function Le(t,e,r){if(void 0===r&&(r=3),!Fe[e]){var n=(new Error).stack;void 0===n?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(n=n.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(n))),Fe[e]=!0}}var Ne={},Be=Object.create(null),Ue=Object.create(null);var Ge=function(){function t(t,e,r){this.canvas=it.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=r||it.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),t}();function ke(t){var e,r,n,i=t.width,o=t.height,s=t.getContext("2d",{willReadFrequently:!0}),a=s.getImageData(0,0,i,o).data,u=a.length,h={top:null,left:null,right:null,bottom:null},l=null;for(e=0;e<u;e+=4)0!==a[e+3]&&(r=e/4%i,n=~~(e/4/i),null===h.top&&(h.top=n),(null===h.left||r<h.left)&&(h.left=r),(null===h.right||h.right<r)&&(h.right=r+1),(null===h.bottom||h.bottom<n)&&(h.bottom=n));return null!==h.top&&(i=h.right-h.left,o=h.bottom-h.top+1,l=s.getImageData(h.left,h.top,i,o)),{height:o,width:i,data:l}}var Xe,je=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function ze(t,e){if(void 0===e&&(e=globalThis.location),0===t.indexOf("data:"))return"";e=e||globalThis.location,Xe||(Xe=document.createElement("a")),Xe.href=t;var r=se.parse(Xe.href),n=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&n&&r.protocol===e.protocol?"":"anonymous"}function He(t,e){var r=it.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):void 0!==e?e:1}var Ye,Ve={__proto__:null,BaseTextureCache:Ue,CanvasRenderTarget:Ge,DATA_URI:je,ProgramCache:Ne,TextureCache:Be,clearTextureCache:function(){var t;for(t in Be)delete Be[t];for(t in Ue)delete Ue[t]},correctBlendMode:be,createIndicesForQuads:Se,decomposeDataUri:function(t){var e=je.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}},deprecation:Le,destroyTextureCache:function(){var t;for(t in Be)Be[t].destroy();for(t in Ue)Ue[t].destroy()},determineCrossOrigin:ze,getBufferType:Ae,getResolutionOfUrl:He,hex2rgb:ge,hex2string:ve,interleaveTypedArrays:function(t,e){for(var r=0,n=0,i={},o=0;o<t.length;o++)n+=e[o],r+=t[o].length;var s=new ArrayBuffer(4*r),a=null,u=0;for(o=0;o<t.length;o++){var h=e[o],l=t[o],c=Ae(l);i[c]||(i[c]=new Oe[c](s)),a=i[c];for(var f=0;f<l.length;f++){a[(f/h|0)*n+u+f%h]=l[f]}u+=h}return new Float32Array(s)},isPow2:we,isWebGLSupported:pe,log2:Me,nextPow2:Re,path:he,premultiplyBlendMode:ye,premultiplyRgba:xe,premultiplyTint:Te,premultiplyTintToRgba:Ee,removeItems:Pe,rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},sayHello:de,sign:Ie,skipHello:function(){ce=!0},string2hex:_e,trimCanvas:ke,uid:De,url:se,isMobile:nt,EventEmitter:at,earcut:ut},We=2*Math.PI,qe=180/Math.PI,Ze=Math.PI/180;t.SHAPES=void 0,(Ye=t.SHAPES||(t.SHAPES={}))[Ye.POLY=0]="POLY",Ye[Ye.RECT=1]="RECT",Ye[Ye.CIRC=2]="CIRC",Ye[Ye.ELIP=3]="ELIP",Ye[Ye.RREC=4]="RREC";var Ke=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),Je=[new Ke,new Ke,new Ke,new Ke],Qe=function(){function e(e,r,n,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=t.SHAPES.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},e.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},e.prototype.intersects=function(t,e){if(!e){var r=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=r)return!1;var n=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>n}var i=this.left,o=this.right,s=this.top,a=this.bottom;if(o<=i||a<=s)return!1;var u=Je[0].set(t.left,t.top),h=Je[1].set(t.left,t.bottom),l=Je[2].set(t.right,t.top),c=Je[3].set(t.right,t.bottom);if(l.x<=u.x||h.y<=u.y)return!1;var f=Math.sign(e.a*e.d-e.b*e.c);if(0===f)return!1;if(e.apply(u,u),e.apply(h,h),e.apply(l,l),e.apply(c,c),Math.max(u.x,h.x,l.x,c.x)<=i||Math.min(u.x,h.x,l.x,c.x)>=o||Math.max(u.y,h.y,l.y,c.y)<=s||Math.min(u.y,h.y,l.y,c.y)>=a)return!1;var d=f*(h.y-u.y),p=f*(u.x-h.x),m=d*i+p*s,g=d*o+p*s,v=d*i+p*a,_=d*o+p*a;if(Math.max(m,g,v,_)<=d*u.x+p*u.y||Math.min(m,g,v,_)>=d*c.x+p*c.y)return!1;var y=f*(u.y-l.y),b=f*(l.x-u.x),x=y*i+b*s,T=y*o+b*s,E=y*i+b*a,S=y*o+b*a;return!(Math.max(x,T,E,S)<=y*u.x+b*u.y||Math.min(x,T,E,S)>=y*c.x+b*c.y)},e.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},e.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=n,this.height=Math.max(i-n,0),this},e.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y,this},e.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=n,this.height=i-n,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),$e=function(){function e(e,r,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=e,this.y=r,this.radius=n,this.type=t.SHAPES.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-t,i=this.y-e;return(n*=n)+(i*=i)<=r},e.prototype.getBounds=function(){return new Qe(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},e}(),tr=function(){function e(e,r,n,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=e,this.y=r,this.width=n,this.height=i,this.type=t.SHAPES.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return(r*=r)+(n*=n)<=1},e.prototype.getBounds=function(){return new Qe(this.x-this.width,this.y-this.height,this.width,this.height)},e.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),er=function(){function e(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];var i=Array.isArray(r[0])?r[0]:r;if("number"!=typeof i[0]){for(var o=[],s=0,a=i.length;s<a;s++)o.push(i[s].x,i[s].y);i=o}this.points=i,this.type=t.SHAPES.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var t=new e(this.points.slice());return t.closeStroke=this.closeStroke,t},e.prototype.contains=function(t,e){for(var r=!1,n=this.points.length/2,i=0,o=n-1;i<n;o=i++){var s=this.points[2*i],a=this.points[2*i+1],u=this.points[2*o],h=this.points[2*o+1];a>e!=h>e&&t<(e-a)/(h-a)*(u-s)+s&&(r=!r)}return r},e.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},e}(),rr=function(){function e(e,r,n,i,o){void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=20),this.x=e,this.y=r,this.width=n,this.height=i,this.radius=o,this.type=t.SHAPES.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+r&&e<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;var n=t-(this.x+r),i=e-(this.y+r),o=r*r;if(n*n+i*i<=o)return!0;if((n=t-(this.x+this.width-r))*n+i*i<=o)return!0;if(n*n+(i=e-(this.y+this.height-r))*i<=o)return!0;if((n=t-(this.x+r))*n+i*i<=o)return!0}return!1},e.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},e}(),nr=function(){function t(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=0),this._x=r,this._y=n,this.cb=t,this.scope=e}return t.prototype.clone=function(e,r){return void 0===e&&(e=this.cb),void 0===r&&(r=this.scope),new t(e,r,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),ir=function(){function t(t,e,r,n,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,r,n,i,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},t.prototype.apply=function(t,e){e=e||new Ke;var r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new Ke;var r=1/(this.a*this.d+this.c*-this.b),n=t.x,i=t.y;return e.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},t.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,r,n,i,o,s,a,u){return this.a=Math.cos(s+u)*i,this.b=Math.sin(s+u)*i,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,r=this.b,n=this.c,i=this.d,o=t.pivot,s=-Math.atan2(-n,i),a=Math.atan2(r,e),u=Math.abs(s+a);return u<1e-5||Math.abs(We-u)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*r+o.y*i),t},t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),or=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],sr=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ar=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ur=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],hr=[],lr=[],cr=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];hr.push(e);for(var r=0;r<16;r++)for(var n=cr(or[t]*or[r]+ar[t]*sr[r]),i=cr(sr[t]*or[r]+ur[t]*sr[r]),o=cr(or[t]*ar[r]+ar[t]*ur[r]),s=cr(sr[t]*ar[r]+ur[t]*ur[r]),a=0;a<16;a++)if(or[a]===n&&sr[a]===i&&ar[a]===o&&ur[a]===s){e.push(a);break}}for(t=0;t<16;t++){var u=new ir;u.set(or[t],sr[t],ar[t],ur[t],0,0),lr.push(u)}}();var fr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return or[t]},uY:function(t){return sr[t]},vX:function(t){return ar[t]},vY:function(t){return ur[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return hr[t][e]},sub:function(t,e){return hr[t][fr.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?fr.S:fr.N:2*Math.abs(e)<=Math.abs(t)?t>0?fr.E:fr.W:e>0?t>0?fr.SE:fr.SW:t>0?fr.NE:fr.NW},matrixAppendRotationInv:function(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=lr[fr.inv(e)];i.tx=r,i.ty=n,t.append(i)}},dr=function(){function t(){this.worldTransform=new ir,this.localTransform=new ir,this.position=new nr(this.onChange,this,0,0),this.scale=new nr(this.onChange,this,1,1),this.pivot=new nr(this.onChange,this,0,0),this.skew=new nr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();it.SORTABLE_CHILDREN=!1;var pr=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Qe.EMPTY:((t=t||new Qe(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var r=t.a,n=t.b,i=t.c,o=t.d,s=t.tx,a=t.ty,u=r*e.x+i*e.y+s,h=n*e.x+o*e.y+a;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)},t.prototype.addQuad=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY,o=t[0],s=t[1];e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,e=(o=t[2])<e?o:e,r=(s=t[3])<r?s:r,n=o>n?o:n,i=s>i?s:i,e=(o=t[4])<e?o:e,r=(s=t[5])<r?s:r,n=o>n?o:n,i=s>i?s:i,e=(o=t[6])<e?o:e,r=(s=t[7])<r?s:r,n=o>n?o:n,i=s>i?s:i,this.minX=e,this.minY=r,this.maxX=n,this.maxY=i},t.prototype.addFrame=function(t,e,r,n,i){this.addFrameMatrix(t.worldTransform,e,r,n,i)},t.prototype.addFrameMatrix=function(t,e,r,n,i){var o=t.a,s=t.b,a=t.c,u=t.d,h=t.tx,l=t.ty,c=this.minX,f=this.minY,d=this.maxX,p=this.maxY,m=o*e+a*r+h,g=s*e+u*r+l;c=m<c?m:c,f=g<f?g:f,d=m>d?m:d,p=g>p?g:p,c=(m=o*n+a*r+h)<c?m:c,f=(g=s*n+u*r+l)<f?g:f,d=m>d?m:d,p=g>p?g:p,c=(m=o*e+a*i+h)<c?m:c,f=(g=s*e+u*i+l)<f?g:f,d=m>d?m:d,p=g>p?g:p,c=(m=o*n+a*i+h)<c?m:c,f=(g=s*n+u*i+l)<f?g:f,d=m>d?m:d,p=g>p?g:p,this.minX=c,this.minY=f,this.maxX=d,this.maxY=p},t.prototype.addVertexData=function(t,e,r){for(var n=this.minX,i=this.minY,o=this.maxX,s=this.maxY,a=e;a<r;a+=2){var u=t[a],h=t[a+1];n=u<n?u:n,i=h<i?h:i,o=u>o?u:o,s=h>s?h:s}this.minX=n,this.minY=i,this.maxX=o,this.maxY=s},t.prototype.addVertices=function(t,e,r,n){this.addVerticesMatrix(t.worldTransform,e,r,n)},t.prototype.addVerticesMatrix=function(t,e,r,n,i,o){void 0===i&&(i=0),void 0===o&&(o=i);for(var s=t.a,a=t.b,u=t.c,h=t.d,l=t.tx,c=t.ty,f=this.minX,d=this.minY,p=this.maxX,m=this.maxY,g=r;g<n;g+=2){var v=e[g],_=e[g+1],y=s*v+u*_+l,b=h*_+a*v+c;f=Math.min(f,y-i),p=Math.max(p,y+i),d=Math.min(d,b-o),m=Math.max(m,b+o)}this.minX=f,this.minY=d,this.maxX=p,this.maxY=m},t.prototype.addBounds=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=i&&n<=o){var s=this.minX,a=this.minY,u=this.maxX,h=this.maxY;this.minX=r<s?r:s,this.minY=n<a?n:a,this.maxX=i>u?i:u,this.maxY=o>h?o:h}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=i&&n<=o){var s=this.minX,a=this.minY,u=this.maxX,h=this.maxY;this.minX=r<s?r:s,this.minY=n<a?n:a,this.maxX=i>u?i:u,this.maxY=o>h?o:h}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,r,n,i,o){t-=i,e-=o,r+=i,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},t}(),mr=function(t,e){return mr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},mr(t,e)};function gr(t,e){function r(){this.constructor=t}mr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var vr=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new dr,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new pr,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return gr(e,t),e.mixin=function(t){for(var r=Object.keys(t),n=0;n<r.length;++n){var i=r[n];Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Qe),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Qe),t=this._localBoundsRect),this._localBounds||(this._localBounds=new pr);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var n=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-i,o},e.prototype.toGlobal=function(t,e,r){return void 0===r&&(r=!1),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,r,n,i,o,s,a,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=1),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=0),this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=u,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new _r),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*qe},set:function(t){this.transform.rotation=t*Ze},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask!==t){var e;if(this._mask)(e=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(e._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1));if(this._mask=t,this._mask)(e=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(0===e._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}},enumerable:!1,configurable:!0}),e}(at),_r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return gr(e,t),e}(vr);function yr(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}vr.prototype.displayObjectUpdateTransform=vr.prototype.updateTransform;var br=function(e){function r(){var t=e.call(this)||this;return t.children=[],t.sortableChildren=it.SORTABLE_CHILDREN,t.sortDirty=!1,t}return gr(r,e),r.prototype.onChildrenChange=function(t){},r.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(e.length>1)for(var n=0;n<e.length;n++)this.addChild(e[n]);else{var i=e[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return e[0]},r.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},r.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}},r.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},r.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);Pe(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},r.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},r.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(e.length>1)for(var n=0;n<e.length;n++)this.removeChild(e[n]);else{var i=e[0],o=this.children.indexOf(i);if(-1===o)return null;i.parent=null,i.transform._parentID=-1,Pe(this.children,o,1),this._boundsID++,this.onChildrenChange(o),i.emit("removed",this),this.emit("childRemoved",i,this,o)}return e[0]},r.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Pe(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},r.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var r,n=t,i=e-n;if(i>0&&i<=e){r=this.children.splice(n,i);for(var o=0;o<r.length;++o)r[o].parent=null,r[o].transform&&(r[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(o=0;o<r.length;++o)r[o].emit("removed",this),this.emit("childRemoved",r[o],this,o);return r}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var n=this.children[e];n._lastSortedIndex=e,t||0===n.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(yr),this.sortDirty=!1},r.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},r.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var r=e._mask.isMaskData?e._mask.maskObject:e._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(e._bounds,r._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},r.prototype.getLocalBounds=function(t,r){void 0===r&&(r=!1);var n=e.prototype.getLocalBounds.call(this,t);if(!r)for(var i=0,o=this.children.length;i<o;++i){var s=this.children[i];s.visible&&s.updateTransform()}return n},r.prototype._calculateBounds=function(){},r.prototype._renderWithCulling=function(t){var e=t.renderTexture.sourceFrame;if(e.width>0&&e.height>0){var n,i;if(this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==r.prototype._render&&(n=this.getBounds(!0)),n&&e.intersects(n,i))this._render(t);else if(this.cullArea)return;for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o],u=a.cullable;a.cullable=u||!this.cullArea,a.render(t),a.cullable=u}}},r.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},r.prototype.renderAdvanced=function(e){var r=this.filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var i=0;i<r.length;i++)r[i].enabled&&this._enabledFilters.push(r[i])}var o=r&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==t.MASK_TYPES.NONE));if(o&&e.batch.flush(),r&&this._enabledFilters&&this._enabledFilters.length&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);i=0;for(var s=this.children.length;i<s;++i)this.children[i].render(e)}o&&e.batch.flush(),n&&e.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},r.prototype._render=function(t){},r.prototype.destroy=function(t){e.prototype.destroy.call(this),this.sortDirty=!1;var r="boolean"==typeof t?t:t&&t.children,n=this.removeChildren(0,this.children.length);if(r)for(var i=0;i<n.length;++i)n[i].destroy(t)},Object.defineProperty(r.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),r}(vr);br.prototype.containerUpdateTransform=br.prototype.updateTransform;var xr,Tr=function(){return Tr=Object.assign||function(t){for(var e,r=arguments,n=1,i=arguments.length;n<i;n++)for(var o in e=r[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Tr.apply(this,arguments)};t.ExtensionType=void 0,(xr=t.ExtensionType||(t.ExtensionType={})).Application="application",xr.RendererPlugin="renderer-webgl-plugin",xr.CanvasRendererPlugin="renderer-canvas-plugin",xr.Loader="loader",xr.LoadParser="load-parser",xr.ResolveParser="resolve-parser",xr.CacheParser="cache-parser",xr.DetectionParser="detection-parser";var Er,Sr=function(t){if("function"==typeof t||"object"==typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");var e="object"!=typeof t.extension?{type:t.extension}:t.extension;t=Tr(Tr({},e),{ref:t})}if("object"!=typeof t)throw new Error("Invalid extension type");return"string"==typeof(t=Tr({},t)).type&&(t.type=[t.type]),t},Ar={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var t=arguments,e=this,r=[],n=0;n<arguments.length;n++)r[n]=t[n];return r.map(Sr).forEach((function(t){t.type.forEach((function(r){var n,i;return null===(i=(n=e._removeHandlers)[r])||void 0===i?void 0:i.call(n,t)}))})),this},add:function(){for(var t=arguments,e=this,r=[],n=0;n<arguments.length;n++)r[n]=t[n];return r.map(Sr).forEach((function(t){t.type.forEach((function(r){var n=e._addHandlers,i=e._queue;n[r]?n[r](t):(i[r]=i[r]||[],i[r].push(t))}))})),this},handle:function(t,e,r){var n=this._addHandlers=this._addHandlers||{},i=this._removeHandlers=this._removeHandlers||{};if(n[t]||i[t])throw new Error("Extension type "+t+" already has a handler");n[t]=e,i[t]=r;var o=this._queue;return o[t]&&(o[t].forEach((function(t){return e(t)})),delete o[t]),this},handleByMap:function(t,e){return this.handle(t,(function(t){e[t.name]=t.ref}),(function(t){delete e[t.name]}))},handleByList:function(e,r){return this.handle(e,(function(n){var i,o;r.includes(n.ref)||(r.push(n.ref),e===t.ExtensionType.Loader&&(null===(o=(i=n.ref).add)||void 0===o||o.call(i)))}),(function(t){var e=r.indexOf(t.ref);-1!==e&&r.splice(e,1)}))}},Or=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,r,n,i,o,s,a){if(arguments.length>8)throw new Error("max arguments reached");var u=this.name,h=this.items;this._aliasCount++;for(var l=0,c=h.length;l<c;l++)h[l][u](t,e,r,n,i,o,s,a);return h===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(Or.prototype,{dispatch:{value:Or.prototype.emit},run:{value:Or.prototype.emit}}),it.TARGET_FPMS=.06,t.UPDATE_PRIORITY=void 0,(Er=t.UPDATE_PRIORITY||(t.UPDATE_PRIORITY={}))[Er.INTERACTION=50]="INTERACTION",Er[Er.HIGH=25]="HIGH",Er[Er.NORMAL=0]="NORMAL",Er[Er.LOW=-25]="LOW",Er[Er.UTILITY=-50]="UTILITY";var Rr=function(){function t(t,e,r,n){void 0===e&&(e=null),void 0===r&&(r=0),void 0===n&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=n}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),wr=function(){function e(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Rr(null,null,1/0),this.deltaMS=1/it.TARGET_FPMS,this.elapsedMS=1/it.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,r,n){return void 0===n&&(n=t.UPDATE_PRIORITY.NORMAL),this._addListener(new Rr(e,r,n))},e.prototype.addOnce=function(e,r,n){return void 0===n&&(n=t.UPDATE_PRIORITY.NORMAL),this._addListener(new Rr(e,r,n,!0))},e.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},e.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*it.TARGET_FPMS;for(var n=this._head,i=n.next;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,it.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),Mr=function(){function e(){}return e.init=function(e){var r=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,t.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?wr.shared:new wr,e.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},e.extension=t.ExtensionType.Application,e}();it.PREFER_ENV=nt.any?t.ENV.WEBGL:t.ENV.WEBGL2,it.STRICT_TEXTURE_CACHE=!1;var Pr=[];function Ir(t,e){if(!t)return null;var r="";if("string"==typeof t){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(r=n[1].toLowerCase())}for(var i=Pr.length-1;i>=0;--i){var o=Pr[i];if(o.test&&o.test(t,r))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var Cr=function(t,e){return Cr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Cr(t,e)};function Dr(t,e){function r(){this.constructor=t}Cr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Fr=function(){return Fr=Object.assign||function(t){for(var e,r=arguments,n=1,i=arguments.length;n<i;n++)for(var o in e=r[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Fr.apply(this,arguments)};var Lr=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Or("setRealSize"),this.onUpdate=new Or("update"),this.onError=new Or("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,r){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),Nr=function(e){function r(t,r){var n=this,i=r||{},o=i.width,s=i.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return(n=e.call(this,o,s)||this).data=t,n}return Dr(r,e),r.prototype.upload=function(e,r,n){var i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===t.ALPHA_MODES.UNPACK);var o=r.realWidth,s=r.realHeight;return n.width===o&&n.height===s?i.texSubImage2D(r.target,0,0,0,o,s,r.format,n.type,this.data):(n.width=o,n.height=s,i.texImage2D(r.target,0,n.internalFormat,o,s,0,r.format,n.type,this.data)),!0},r.prototype.dispose=function(){this.data=null},r.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},r}(Lr),Br={scaleMode:t.SCALE_MODES.NEAREST,format:t.FORMATS.RGBA,alphaMode:t.ALPHA_MODES.NPM},Ur=function(e){function r(r,n){void 0===r&&(r=null),void 0===n&&(n=null);var i=e.call(this)||this,o=(n=n||{}).alphaMode,s=n.mipmap,a=n.anisotropicLevel,u=n.scaleMode,h=n.width,l=n.height,c=n.wrapMode,f=n.format,d=n.type,p=n.target,m=n.resolution,g=n.resourceOptions;return!r||r instanceof Lr||((r=Ir(r,g)).internal=!0),i.resolution=m||it.RESOLUTION,i.width=Math.round((h||0)*i.resolution)/i.resolution,i.height=Math.round((l||0)*i.resolution)/i.resolution,i._mipmap=void 0!==s?s:it.MIPMAP_TEXTURES,i.anisotropicLevel=void 0!==a?a:it.ANISOTROPIC_LEVEL,i._wrapMode=c||it.WRAP_MODE,i._scaleMode=void 0!==u?u:it.SCALE_MODE,i.format=f||t.FORMATS.RGBA,i.type=d||t.TYPES.UNSIGNED_BYTE,i.target=p||t.TARGETS.TEXTURE_2D,i.alphaMode=void 0!==o?o:t.ALPHA_MODES.UNPACK,i.uid=De(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=h>0&&l>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(r),i}return Dr(r,e),Object.defineProperty(r.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),r.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},r.prototype.setSize=function(t,e,r){return r=r||this.resolution,this.setRealSize(t*r,e*r,r)},r.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},r.prototype._refreshPOT=function(){this.isPowerOfTwo=we(this.realWidth)&&we(this.realHeight)},r.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},r.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},r.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},r.prototype.onError=function(t){this.emit("error",this,t)},r.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ue[this.cacheId],delete Be[this.cacheId],this.cacheId=null),this.dispose(),r.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},r.prototype.dispose=function(){this.emit("dispose",this)},r.prototype.castToBaseTexture=function(){return this},r.from=function(t,e,n){void 0===n&&(n=it.STRICT_TEXTURE_CACHE);var i="string"==typeof t,o=null;if(i)o=t;else{if(!t._pixiId){var s=e&&e.pixiIdPrefix||"pixiid";t._pixiId=s+"_"+De()}o=t._pixiId}var a=Ue[o];if(i&&n&&!a)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return a||((a=new r(t,e)).cacheId=o,r.addToCache(a,o)),a},r.fromBuffer=function(e,n,i,o){e=e||new Float32Array(n*i*4);var s=new Nr(e,{width:n,height:i}),a=e instanceof Float32Array?t.TYPES.FLOAT:t.TYPES.UNSIGNED_BYTE;return new r(s,Object.assign({},Br,o||{width:n,height:i,type:a}))},r.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Ue[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),Ue[e]=t)},r.removeFromCache=function(t){if("string"==typeof t){var e=Ue[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete Ue[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete Ue[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},r._globalBatch=0,r}(at),Gr=function(t){function e(e,r){var n=this,i=r||{},o=i.width,s=i.height;(n=t.call(this,o,s)||this).items=[],n.itemDirtyIds=[];for(var a=0;a<e;a++){var u=new Ur;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return Dr(e,t),e.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof Lr?this.addResourceAt(t[r],r):this.addResourceAt(Ir(t[r],e),r))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],r=e.realWidth,n=e.realHeight;return t.resize(r,n),Promise.resolve(t)})),this._load},e}(Lr),kr=function(e){function r(t,r){var n,i,o=this,s=r||{},a=s.width,u=s.height;return Array.isArray(t)?(n=t,i=t.length):i=t,o=e.call(this,i,{width:a,height:u})||this,n&&o.initFromArray(n,r),o}return Dr(r,e),r.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},r.prototype.bind=function(r){e.prototype.bind.call(this,r),r.target=t.TARGETS.TEXTURE_2D_ARRAY},r.prototype.upload=function(t,e,r){var n=this,i=n.length,o=n.itemDirtyIds,s=n.items,a=t.gl;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,e.format,r.type,null);for(var u=0;u<i;u++){var h=s[u];o[u]<h.dirtyId&&(o[u]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,u,h.resource.width,h.resource.height,1,e.format,r.type,h.resource.source))}return!0},r}(Gr),Xr=function(e){function r(t){var r=this,n=t,i=n.naturalWidth||n.videoWidth||n.width,o=n.naturalHeight||n.videoHeight||n.height;return(r=e.call(this,i,o)||this).source=t,r.noSubImage=!1,r}return Dr(r,e),r.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=ze(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},r.prototype.upload=function(e,r,n,i){var o=e.gl,s=r.realWidth,a=r.realHeight;if((i=i||this.source)instanceof HTMLImageElement){if(!i.complete||0===i.naturalWidth)return!1}else if(i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===t.ALPHA_MODES.UNPACK),this.noSubImage||r.target!==o.TEXTURE_2D||n.width!==s||n.height!==a?(n.width=s,n.height=a,o.texImage2D(r.target,0,n.internalFormat,r.format,n.type,i)):o.texSubImage2D(o.TEXTURE_2D,0,0,0,r.format,n.type,i),!0},r.prototype.update=function(){if(!this.destroyed){var t=this.source,r=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;this.resize(r,n),e.prototype.update.call(this)}},r.prototype.dispose=function(){this.source=null},r}(Lr),jr=function(t){function e(e){return t.call(this,e)||this}return Dr(e,t),e.test=function(t){var e=globalThis.OffscreenCanvas;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(Xr),zr=function(e){function r(n,i){var o=this,s=i||{},a=s.width,u=s.height,h=s.autoLoad,l=s.linkBaseTexture;if(n&&n.length!==r.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");o=e.call(this,6,{width:a,height:u})||this;for(var c=0;c<r.SIDES;c++)o.items[c].target=t.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+c;return o.linkBaseTexture=!1!==l,n&&o.initFromArray(n,i),!1!==h&&o.load(),o}return Dr(r,e),r.prototype.bind=function(r){e.prototype.bind.call(this,r),r.target=t.TARGETS.TEXTURE_CUBE_MAP},r.prototype.addBaseTextureAt=function(e,r,n){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,r)}else e.target=t.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+r,e.parentTextureArray=this.baseTexture,this.items[r]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[r]=e,this},r.prototype.upload=function(t,e,n){for(var i=this.itemDirtyIds,o=0;o<r.SIDES;o++){var s=this.items[o];(i[o]<s.dirtyId||n.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,n),i[o]=s.dirtyId):i[o]<-1&&(t.gl.texImage2D(s.target,0,n.internalFormat,e.realWidth,e.realHeight,0,e.format,n.type,null),i[o]=-1))}return!0},r.test=function(t){return Array.isArray(t)&&t.length===r.SIDES},r.SIDES=6,r}(Gr),Hr=function(e){function r(t,r){var n=this;if(r=r||{},!(t instanceof HTMLImageElement)){var i=new Image;Xr.crossOrigin(i,t,r.crossorigin),i.src=t,t=i}return n=e.call(this,t)||this,!t.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=t.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(void 0!==r.createBitmap?r.createBitmap:it.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,n.alphaMode="number"==typeof r.alphaMode?r.alphaMode:null,n.bitmap=null,n._load=null,!1!==r.autoLoad&&n.load(),n}return Dr(r,e),r.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,r){var n=e.source;e.url=n.src;var i=function(){e.destroyed||(n.onload=null,n.onerror=null,e.resize(n.width,n.height),e._load=null,e.createBitmap?t(e.process()):t(e))};n.complete&&n.src?i():(n.onload=i,n.onerror=function(t){r(t),e.onError.emit(t)})}))),this._load},r.prototype.process=function(){var e=this,r=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,i=!r.crossOrigin||"anonymous"===r.crossOrigin;return this._process=fetch(r.src,{mode:i?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(i){return n(i,0,0,r.width,r.height,{premultiplyAlpha:null===e.alphaMode||e.alphaMode===t.ALPHA_MODES.UNPACK?"premultiply":"none"})})).then((function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))})),this._process},r.prototype.upload=function(t,r,n){if("number"==typeof this.alphaMode&&(r.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,t,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,t,r,n,this.bitmap),!this.preserveBitmap){var i=!0,o=r._glTextures;for(var s in o){var a=o[s];if(a!==n&&a.dirtyId!==r.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},r.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},r.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},r}(Xr),Yr=function(t){function e(e,r){var n=this;return r=r||{},(n=t.call(this,it.ADAPTER.createCanvas())||this)._width=0,n._height=0,n.svg=e,n.scale=r.scale||1,n._overrideWidth=r.width,n._overrideHeight=r.height,n._resolve=null,n._crossorigin=r.crossorigin,n._load=null,!1!==r.autoLoad&&n.load(),n}return Dr(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(r){if(t._resolve=function(){t.resize(t.source.width,t.source.height),r(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;Xr.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(r){t._resolve&&(e.onerror=null,t.onError.emit(r))},e.onload=function(){if(t._resolve){var r=e.width,n=e.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=r*t.scale,o=n*t.scale;(t._overrideWidth||t._overrideHeight)&&(i=t._overrideWidth||t._overrideHeight/n*r,o=t._overrideHeight||t._overrideWidth/r*n),i=Math.round(i),o=Math.round(o);var s=t.source;s.width=i,s.height=o,s._pixiId="canvas_"+De(),s.getContext("2d").drawImage(e,0,0,r,n,0,0,i,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var r=e.SVG_SIZE.exec(t),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,r){return"svg"===r||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Xr),Vr=function(t){function e(r,n){var i=this;if(n=n||{},!(r instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof r&&(r=[r]);var s=r[0].src||r[0];Xr.crossOrigin(o,s,n.crossorigin);for(var a=0;a<r.length;++a){var u=document.createElement("source"),h=r[a],l=h.src,c=h.mime,f=(l=l||r[a]).split("?").shift().toLowerCase(),d=f.slice(f.lastIndexOf(".")+1);c=c||e.MIME_TYPES[d]||"video/"+d,u.src=l,u.type=c,o.appendChild(u)}r=o}return(i=t.call(this,r)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=n.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==n.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==n.autoLoad&&i.load(),i}return Dr(e,t),e.prototype.update=function(e){if(!this.destroyed){var r=wr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(r){t.valid?r(t):(t._resolve=r,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()},e.prototype._isSourceReady=function(){return this.source.readyState>2},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(wr.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(wr.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(wr.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(wr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(wr.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,r){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(r)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Xr),Wr=function(t){function e(e){return t.call(this,e)||this}return Dr(e,t),e.test=function(t){return!!globalThis.createImageBitmap&&"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},e}(Xr);Pr.push(Hr,Wr,jr,Vr,Yr,Nr,zr,kr);var qr={__proto__:null,Resource:Lr,BaseImageResource:Xr,INSTALLED:Pr,autoDetectResource:Ir,AbstractMultiResource:Gr,ArrayResource:kr,BufferResource:Nr,CanvasResource:jr,CubeResource:zr,ImageResource:Hr,SVGResource:Yr,VideoResource:Vr,ImageBitmapResource:Wr},Zr=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return Dr(r,e),r.prototype.upload=function(e,r,n){var i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===t.ALPHA_MODES.UNPACK);var o=r.realWidth,s=r.realHeight;return n.width===o&&n.height===s?i.texSubImage2D(r.target,0,0,0,o,s,r.format,n.type,this.data):(n.width=o,n.height=s,i.texImage2D(r.target,0,n.internalFormat,o,s,0,r.format,n.type,this.data)),!0},r}(Nr),Kr=function(){function e(e,r){this.width=Math.round(e||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Or("disposeFramebuffer"),this.multisample=t.MSAA_QUALITY.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(e,r){return void 0===e&&(e=0),this.colorTextures[e]=r||new Ur(null,{scaleMode:t.SCALE_MODES.NEAREST,resolution:1,mipmap:t.MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(e){return this.depthTexture=e||new Ur(new Zr(null,{width:this.width,height:this.height}),{scaleMode:t.SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:t.MIPMAP_MODES.OFF,format:t.FORMATS.DEPTH_COMPONENT,type:t.TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var n=this.colorTextures[r],i=n.resolution;n.setSize(t/i,e/i)}if(this.depthTexture){i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),Jr=function(e){function r(r){void 0===r&&(r={});var n=this;"number"==typeof r&&(r={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]});return r.width=r.width||100,r.height=r.height||100,r.multisample=void 0!==r.multisample?r.multisample:t.MSAA_QUALITY.NONE,(n=e.call(this,null,r)||this).mipmap=t.MIPMAP_MODES.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new Kr(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=r.multisample,n.maskStack=[],n.filterStack=[{}],n}return Dr(r,e),r.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},r.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},r.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},r}(Ur),Qr=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,r){var n=e.width,i=e.height;if(r){var o=t.width/2/n,s=t.height/2/i,a=t.x/n+o,u=t.y/i+s;r=fr.add(r,fr.NW),this.x0=a+o*fr.uX(r),this.y0=u+s*fr.uY(r),r=fr.add(r,2),this.x1=a+o*fr.uX(r),this.y1=u+s*fr.uY(r),r=fr.add(r,2),this.x2=a+o*fr.uX(r),this.y2=u+s*fr.uY(r),r=fr.add(r,2),this.x3=a+o*fr.uX(r),this.y3=u+s*fr.uY(r)}else this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),$r=new Qr;function tn(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var en=function(t){function e(r,n,i,o,s,a){var u=t.call(this)||this;if(u.noFrame=!1,n||(u.noFrame=!0,n=new Qe(0,0,1,1)),r instanceof e&&(r=r.baseTexture),u.baseTexture=r,u._frame=n,u.trim=o,u.valid=!1,u._uvs=$r,u.uvMatrix=null,u.orig=i||n,u._rotate=Number(s||0),!0===s)u._rotate=2;else if(u._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=a?new Ke(a.x,a.y):new Ke(0,0),u._updateID=0,u.textureCacheIds=[],r.valid?u.noFrame?r.valid&&u.onBaseTextureUpdated(r):u.frame=n:r.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&r.on("update",u.onBaseTextureUpdated,u),u}return Dr(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var r=this.baseTexture.resource;r&&r.url&&Be[r.url]&&e.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),n=new e(this.baseTexture,!this.noFrame&&t,r,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=t),n},e.prototype.updateUvs=function(){this._uvs===$r&&(this._uvs=new Qr),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,r,n){void 0===r&&(r={}),void 0===n&&(n=it.STRICT_TEXTURE_CACHE);var i="string"==typeof t,o=null;if(i)o=t;else if(t instanceof Ur){if(!t.cacheId){var s=r&&r.pixiIdPrefix||"pixiid";t.cacheId=s+"-"+De(),Ur.addToCache(t,t.cacheId)}o=t.cacheId}else{if(!t._pixiId){s=r&&r.pixiIdPrefix||"pixiid";t._pixiId=s+"_"+De()}o=t._pixiId}var a=Be[o];if(i&&n&&!a)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return a||t instanceof Ur?!a&&t instanceof Ur&&(a=new e(t),e.addToCache(a,o)):(r.resolution||(r.resolution=He(t)),(a=new e(new Ur(t,r))).baseTexture.cacheId=o,Ur.addToCache(a.baseTexture,o),e.addToCache(a,o)),a},e.fromURL=function(t,r){var n=Object.assign({autoLoad:!1},null==r?void 0:r.resourceOptions),i=e.from(t,Object.assign({resourceOptions:n},r),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then((function(){return Promise.resolve(i)}))},e.fromBuffer=function(t,r,n,i){return new e(Ur.fromBuffer(t,r,n,i))},e.fromLoader=function(t,r,n,i){var o=new Ur(t,Object.assign({scaleMode:it.SCALE_MODE,resolution:He(r)},i)),s=o.resource;s instanceof Hr&&(s.url=r);var a=new e(o);return n||(n=r),Ur.addToCache(a.baseTexture,n),e.addToCache(a,n),n!==r&&(Ur.addToCache(a.baseTexture,r),e.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise((function(t){a.baseTexture.once("loaded",(function(){return t(a)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Be[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),Be[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=Be[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete Be[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)Be[t.textureCacheIds[n]]===t&&delete Be[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,n=t.width,i=t.height,o=e+n>this.baseTexture.width,s=r+i>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",u="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,h="Y: "+r+" + "+i+" = "+(r+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+a+" "+h)}this.valid=n&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new Ur),tn(e._EMPTY),tn(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=it.ADAPTER.createCanvas(16,16),r=t.getContext("2d");t.width=16,t.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),e._WHITE=new e(Ur.from(t)),tn(e._WHITE),tn(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(at),rn=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Dr(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,r){void 0===r&&(r=!0);var n=this.baseTexture.resolution,i=Math.round(t*n)/n,o=Math.round(e*n)/n;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(i,o),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var r=arguments,n=[],i=1;i<arguments.length;i++)n[i-1]=r[i];return"number"==typeof t&&(Le("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:n[0],scaleMode:n[1],resolution:n[2]}),new e(new Jr(t))},e}(en),nn=function(){function e(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(e,r,n){void 0===n&&(n=t.MSAA_QUALITY.NONE);var i=new Jr(Object.assign({width:e,height:r,resolution:1,multisample:n},this.textureOptions));return new rn(i)},e.prototype.getOptimalTexture=function(e,r,n,i){var o;void 0===n&&(n=1),void 0===i&&(i=t.MSAA_QUALITY.NONE),e=Math.ceil(e*n-1e-6),r=Math.ceil(r*n-1e-6),this.enableFullScreen&&e===this._pixelsWidth&&r===this._pixelsHeight?o=i>1?-i:-1:(o=((65535&(e=Re(e)))<<16|65535&(r=Re(r)))>>>0,i>1&&(o+=4294967296*i)),this.texturePool[o]||(this.texturePool[o]=[]);var s=this.texturePool[o].pop();return s||(s=this.createTexture(e,r,i)),s.filterPoolKey=o,s.setResolution(n),s},e.prototype.getFilterTexture=function(e,r,n){var i=this.getOptimalTexture(e.width,e.height,r||e.resolution,n||t.MSAA_QUALITY.NONE);return i.filterFrame=e.filterFrame,i},e.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},e.prototype.returnFilterTexture=function(t){this.returnTexture(t)},e.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var r=this.texturePool[e];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},e.SCREEN_KEY=-1,e}(),on=function(){function e(e,r,n,i,o,s,a){void 0===r&&(r=0),void 0===n&&(n=!1),void 0===i&&(i=t.TYPES.FLOAT),this.buffer=e,this.size=r,this.normalized=n,this.type=i,this.stride=o,this.start=s,this.instance=a}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,r,n,i,o){return new e(t,r,n,i,o)},e}(),sn=0,an=function(){function e(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=sn++,this.disposeRunner=new Or("disposeBuffer")}return e.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===t.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?t.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:t.BUFFER_TYPE.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}(),un={Float32Array,Uint32Array,Int32Array,Uint8Array};var hn={5126:4,5123:2,5121:1},ln=0,cn={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},fn=function(){function e(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=ln++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Or("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(t,e,r,n,i,o,s,a){if(void 0===r&&(r=0),void 0===n&&(n=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof an||(e instanceof Array&&(e=new Float32Array(e)),e=new an(e));var u=t.split("|");if(u.length>1){for(var h=0;h<u.length;h++)this.addAttribute(u[h],e,r,n,i);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new on(l,r,n,i,o,s,a),this.instanced=this.instanced||a,this},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},e.prototype.addIndex=function(e){return e instanceof an||(e instanceof Array&&(e=new Uint16Array(e)),e=new an(e)),e.type=t.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],n=new an;for(t in this.attributes){var i=this.attributes[t],o=this.buffers[i.buffer];e.push(o.data),r.push(i.size*hn[i.type]/4),i.buffer=0}for(n.data=function(t,e){for(var r=0,n=0,i={},o=0;o<t.length;o++)n+=e[o],r+=t[o].length;var s=new ArrayBuffer(4*r),a=null,u=0;for(o=0;o<t.length;o++){var h=e[o],l=t[o],c=Ae(l);i[c]||(i[c]=new un[c](s)),a=i[c];for(var f=0;f<l.length;f++)a[(f/h|0)*n+u+f%h]=l[f];u+=h}return new Float32Array(s)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var r=new e,n=0;n<this.buffers.length;n++)r.buffers[n]=new an(this.buffers[n].data.slice(0));for(var n in this.attributes){var i=this.attributes[n];r.attributes[n]=new on(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(r.indexBuffer=r.buffers[this.buffers.indexOf(this.indexBuffer)],r.indexBuffer.type=t.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),r},e.merge=function(r){for(var n,i=new e,o=[],s=[],a=[],u=0;u<r.length;u++){n=r[u];for(var h=0;h<n.buffers.length;h++)s[h]=s[h]||0,s[h]+=n.buffers[h].data.length,a[h]=0}for(u=0;u<n.buffers.length;u++)o[u]=new(cn[Ae(n.buffers[u].data)])(s[u]),i.buffers[u]=new an(o[u]);for(u=0;u<r.length;u++){n=r[u];for(h=0;h<n.buffers.length;h++)o[h].set(n.buffers[h].data,a[h]),a[h]+=n.buffers[h].data.length}if(i.attributes=n.attributes,n.indexBuffer){i.indexBuffer=i.buffers[n.buffers.indexOf(n.indexBuffer)],i.indexBuffer.type=t.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;var l=0,c=0,f=0,d=0;for(u=0;u<n.buffers.length;u++)if(n.buffers[u]!==n.indexBuffer){d=u;break}for(var u in n.attributes){var p=n.attributes[u];(0|p.buffer)===d&&(c+=p.size*hn[p.type]/4)}for(u=0;u<r.length;u++){var m=r[u].indexBuffer.data;for(h=0;h<m.length;h++)i.indexBuffer.data[h+f]+=l;l+=r[u].buffers[d].data.length/c,f+=m.length}}return i},e}(),dn=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return Dr(e,t),e}(fn),pn=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new an(e.vertices),e.uvBuffer=new an(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return Dr(e,t),e.prototype.map=function(t,e){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(fn),mn=0,gn=function(){function e(e,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=mn++,this.static=!!r,this.ubo=!!n,e instanceof an?(this.buffer=e,this.buffer.type=t.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new an(new Float32Array(1)),this.buffer.type=t.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}return e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(t,r,n){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[t]=new e(r,n)},e.from=function(t,r,n){return new e(t,r,n)},e.uboFrom=function(t,r){return new e(t,null==r||r,!0)},e}(),vn=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=t.MSAA_QUALITY.NONE,this.sourceFrame=new Qe,this.destinationFrame=new Qe,this.bindingSourceFrame=new Qe,this.bindingDestinationFrame=new Qe,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),_n=[new Ke,new Ke,new Ke,new Ke],yn=new ir,bn=function(){function e(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new nn,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new dn,this.quadUv=new pn,this.tempRect=new Qe,this.activeState={},this.globalUniforms=new gn({outputFrame:new Qe,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return e.prototype.push=function(t,e){for(var r,n,i=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new vn,a=this.renderer.renderTexture,u=e[0].resolution,h=e[0].multisample,l=e[0].padding,c=e[0].autoFit,f=null===(r=e[0].legacy)||void 0===r||r,d=1;d<e.length;d++){var p=e[d];u=Math.min(u,p.resolution),h=Math.min(h,p.multisample),l=this.useMaxPadding?Math.max(l,p.padding):l+p.padding,c=c&&p.autoFit,f=f||null===(n=p.legacy)||void 0===n||n}1===o.length&&(this.defaultFilterStack[0].renderTexture=a.current),o.push(s),s.resolution=u,s.multisample=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(l);var m=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(yn.copyFrom(i.projection.transform).invert(),m),c?(s.sourceFrame.fit(m),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(m)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var g=this.tempRect;g.x=0,g.y=0,g.width=s.sourceFrame.width,g.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,g),i.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var e=this.defaultFilterStack,r=e.pop(),n=r.filters;this.activeState=r;var i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;var o=i.inputSize,s=i.inputPixel,a=i.inputClamp;if(o[0]=r.destinationFrame.width,o[1]=r.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],s[0]=Math.round(o[0]*r.resolution),s[1]=Math.round(o[1]*r.resolution),s[2]=1/s[0],s[3]=1/s[1],a[0]=.5*s[2],a[1]=.5*s[3],a[2]=r.sourceFrame.width*o[2]-.5*s[2],a[3]=r.sourceFrame.height*o[3]-.5*s[3],r.legacy){var u=i.filterArea;u[0]=r.destinationFrame.width,u[1]=r.destinationFrame.height,u[2]=r.sourceFrame.x,u[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var h=e[e.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,r.renderTexture,h.renderTexture,t.CLEAR_MODES.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var l=r.renderTexture,c=this.getOptimalFilterTexture(l.width,l.height,r.resolution);c.filterFrame=l.filterFrame;var f=0;for(f=0;f<n.length-1;++f){1===f&&r.multisample>1&&((c=this.getOptimalFilterTexture(l.width,l.height,r.resolution)).filterFrame=l.filterFrame),n[f].apply(this,l,c,t.CLEAR_MODES.CLEAR,r);var d=l;l=c,c=d}n[f].apply(this,l,h.renderTexture,t.CLEAR_MODES.BLEND,r),f>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(c)}r.clear(),this.statePool.push(r)},e.prototype.bindAndClear=function(e,r){void 0===r&&(r=t.CLEAR_MODES.CLEAR);var n=this.renderer,i=n.renderTexture,o=n.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var s=this.tempRect;s.x=0,s.y=0,s.width=e.filterFrame.width,s.height=e.filterFrame.height,i.bind(e,e.filterFrame,s)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=1&o.stateId||this.forceClear;(r===t.CLEAR_MODES.CLEAR||r===t.CLEAR_MODES.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(e,r,n,i){var o=this.renderer;o.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(t.DRAW_MODES.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(t.DRAW_MODES.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,n=r.sourceFrame,i=r.destinationFrame,o=e._texture.orig,s=t.set(i.width,0,0,i.height,n.x,n.y),a=e.worldTransform.copyTo(ir.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(e.anchor.x,e.anchor.y),s},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(e,r,n,i){return void 0===n&&(n=1),void 0===i&&(i=t.MSAA_QUALITY.NONE),this.texturePool.getOptimalTexture(e,r,n,i)},e.prototype.getFilterTexture=function(e,r,n){if("number"==typeof e){var i=e;e=r,r=i}e=e||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,n||t.MSAA_QUALITY.NONE);return o.filterFrame=e.filterFrame,o},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(t,e){var r=_n[0],n=_n[1],i=_n[2],o=_n[3];r.set(e.left,e.top),n.set(e.left,e.bottom),i.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(r,r),t.apply(n,n),t.apply(i,i),t.apply(o,o);var s=Math.min(r.x,n.x,i.x,o.x),a=Math.min(r.y,n.y,i.y,o.y),u=Math.max(r.x,n.x,i.x,o.x),h=Math.max(r.y,n.y,i.y,o.y);e.x=s,e.y=a,e.width=u-s,e.height=h-a},e.prototype.roundFrame=function(t,e,r,n,i){if(!(t.width<=0||t.height<=0||r.width<=0||r.height<=0)){if(i){var o=i.a,s=i.b,a=i.c,u=i.d;if((Math.abs(s)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}(i=i?yn.copyFrom(i):yn.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(i,t),t.ceil(e),this.transformAABB(i.invert(),t)}},e}(),xn=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),Tn=function(){function t(t){this.renderer=t,this.emptyRenderer=new xn(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=r[n]||null,t[n]&&(t[n]._batchLocation=n)},t.prototype.boundArray=function(t,e,r,n){for(var i=t.elements,o=t.ids,s=t.count,a=0,u=0;u<s;u++){var h=i[u],l=h._batchLocation;if(l>=0&&l<n&&e[l]===h)o[u]=l;else for(;a<n;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){o[u]=a,h._batchLocation=a,e[a]=h;break}a++}}},t.prototype.destroy=function(){this.renderer=null},t}(),En=0,Sn=function(){function e(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=En++},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=En++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(e,r){var n;if(it.PREFER_ENV>=t.ENV.WEBGL2&&(n=e.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(t){var e=this;t.preventDefault(),setTimeout((function(){e.gl.isContextLost()&&e.extensions.loseContext&&e.extensions.loseContext.restoreContext()}),0)},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=r||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),An=function(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=t.MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},On=new Qe,Rn=function(){function e(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Kr(10,10),this.msaaSamples=null}return e.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Qe,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){var r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;it.PREFER_ENV===t.ENV.WEBGL_LEGACY&&(r=null,n=null),r?e.drawBuffers=function(t){return r.drawBuffersWEBGL(t)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},e.prototype.bind=function(t,e,r){void 0===r&&(r=0);var n=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==r&&(t.dirtyId++,t.dirtyFormat++,i.mipLevel=r),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,i.dirtySize=t.dirtySize,this.updateFramebuffer(t,r)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var s=t.colorTextures[o];this.renderer.texture.unbind(s.parentTextureArray||s)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var a=e.width>>r,u=e.height>>r,h=a/e.width;this.setViewport(e.x*h,e.y*h,a,u)}else{a=t.width>>r,u=t.height>>r;this.setViewport(0,0,a,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,r,n){var i=this.viewport;t=Math.round(t),e=Math.round(e),r=Math.round(r),n=Math.round(n),i.width===r&&i.height===n&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=r,i.height=n,this.gl.viewport(t,e,r,n))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(e,r,n,i,o){void 0===o&&(o=t.BUFFER_BITS.COLOR|t.BUFFER_BITS.DEPTH);var s=this.gl;s.clearColor(e,r,n,i),s.clear(o)},e.prototype.initFramebuffer=function(t){var e=this.gl,r=new An(e.createFramebuffer());return r.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(t),t.disposeRunner.add(this),r},e.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height)),r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),r.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,i=n.length;e.drawBuffers||(i=Math.min(i,1));for(var o=0;o<i;o++){var s=n[o],a=s.parentTextureArray||s;this.renderer.texture.bind(a,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t,e){var r=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures,o=i.length;r.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));for(var s=[],a=0;a<o;a++){var u=i[a],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),0===a&&n.msaaBuffer||(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+a,u.target,h._glTextures[this.CONTEXT_UID].texture,e),s.push(r.COLOR_ATTACHMENT0+a))}if((s.length>1&&r.drawBuffers(s),t.depthTexture)&&this.writeDepthTexture){var l=t.depthTexture;this.renderer.texture.bind(l,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null):(n.stencil=n.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n.stencil))},e.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},e.prototype.detectSamples=function(e){var r=this.msaaSamples,n=t.MSAA_QUALITY.NONE;if(e<=1||null===r)return n;for(var i=0;i<r.length;i++)if(r[i]<=e){n=r[i];break}return 1===n&&(n=t.MSAA_QUALITY.NONE),n},e.prototype.blit=function(t,e,r){var n=this,i=n.current,o=n.renderer,s=n.gl,a=n.CONTEXT_UID;if(2===o.context.webGLVersion&&i){var u=i.glFramebuffers[a];if(u){if(!t){if(!u.msaaBuffer)return;var h=i.colorTextures[0];if(!h)return;u.blitFramebuffer||(u.blitFramebuffer=new Kr(i.width,i.height),u.blitFramebuffer.addColorTexture(0,h)),(t=u.blitFramebuffer).colorTextures[0]!==h&&(t.colorTextures[0]=h,t.dirtyId++,t.dirtyFormat++),t.width===i.width&&t.height===i.height||(t.width=i.width,t.height=i.height,t.dirtyId++,t.dirtySize++)}e||((e=On).width=i.width,e.height=i.height),r||(r=e);var l=e.width===r.width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,u.framebuffer),s.blitFramebuffer(e.left,e.top,e.right,e.bottom,r.left,r.top,r.right,r.bottom,s.COLOR_BUFFER_BIT,l?s.NEAREST:s.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,e){var r=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(r){delete t.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var r=t.width,n=t.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),e.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,e.multisample,i.DEPTH24_STENCIL8,r,n):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,r,n),e.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Qe},e.prototype.destroy=function(){this.renderer=null},e}(),wn={5126:4,5123:2,5121:1},Mn=function(){function e(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return e.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;it.PREFER_ENV===t.ENV.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(t){return n.bindVertexArrayOES(t)},e.deleteVertexArray=function(t){return n.deleteVertexArrayOES(t)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==r.webGLVersion){var i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=function(t,e){return i.vertexAttribDivisorANGLE(t,e)},e.drawElementsInstanced=function(t,e,r,n,o){return i.drawElementsInstancedANGLE(t,e,r,n,o)},e.drawArraysInstanced=function(t,e,r,n){return i.drawArraysInstancedANGLE(t,e,r,n)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},i=!0);var o=n[e.program.id]||this.initGeometryVao(t,e,i);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,r=0;r<t.buffers.length;r++){var n=t.buffers[r];e.update(n)}},e.prototype.checkCompatibility=function(t,e){var r=t.attributes,n=e.attributeData;for(var i in n)if(!r[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},e.prototype.getSignature=function(t,e){var r=t.attributes,n=e.attributeData,i=["g",t.id];for(var o in r)n[o]&&i.push(o,n[o].location);return i.join("-")},e.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0);var n=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,s=e.program;s.glPrograms[i]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,s);var a=this.getSignature(t,s),u=t.glVertexArrayObjects[this.CONTEXT_UID],h=u[a];if(h)return u[s.id]=h,h;var l=t.buffers,c=t.attributes,f={},d={};for(var p in l)f[p]=0,d[p]=0;for(var p in c)!c[p].size&&s.attributeData[p]?c[p].size=s.attributeData[p].size:c[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),f[c[p].buffer]+=c[p].size*wn[c[p].type];for(var p in c){var m=c[p],g=m.size;void 0===m.stride&&(f[m.buffer]===g*wn[m.type]?m.stride=0:m.stride=f[m.buffer]),void 0===m.start&&(m.start=d[m.buffer],d[m.buffer]+=g*wn[m.type])}h=n.createVertexArray(),n.bindVertexArray(h);for(var v=0;v<l.length;v++){var _=l[v];o.bind(_),r&&_._glBuffers[i].refCount++}return this.activateVao(t,s),this._activeVao=h,u[s.id]=h,u[a]=h,h},e.prototype.disposeGeometry=function(t,e){var r;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,o=t.buffers,s=null===(r=this.renderer)||void 0===r?void 0:r.buffer;if(t.disposeRunner.remove(this),n){if(s)for(var a=0;a<o.length;a++){var u=o[a]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,0!==u.refCount||e||s.dispose(o[a],e))}if(!e)for(var h in n)if("g"===h[0]){var l=n[h];this._activeVao===l&&this.unbind(),i.deleteVertexArray(l)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t)},e.prototype.activateVao=function(t,e){var r=this.gl,n=this.CONTEXT_UID,i=this.renderer.buffer,o=t.buffers,s=t.attributes;t.indexBuffer&&i.bind(t.indexBuffer);var a=null;for(var u in s){var h=s[u],l=o[h.buffer],c=l._glBuffers[n];if(e.attributeData[u]){a!==c&&(i.bind(l),a=c);var f=e.attributeData[u].location;if(r.enableVertexAttribArray(f),r.vertexAttribPointer(f,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(f,1)}}}},e.prototype.draw=function(t,e,r,n){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(r||0)*s,n||1):i.drawElements(t,e||o.indexBuffer.data.length,a,(r||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(t,r,e||o.getSize(),n||1):i.drawArrays(t,r,e||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),Pn=function(){function e(e){void 0===e&&(e=null),this.type=t.MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=it.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(e.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=t.MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},e.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function In(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function Cn(t,e){var r=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),n=t.getShaderInfoLog(e),i=n.split("\n"),o={},s=i.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||o[t])&&(o[t]=!0,!0)})),a=[""];s.forEach((function(t){r[t-1]="%c"+r[t-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var u=r.join("\n");a[0]=u,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function Dn(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function Fn(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Dn(2*e);case"bvec3":return Dn(3*e);case"bvec4":return Dn(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Ln,Nn={},Bn=Nn;function Un(){if(Bn===Nn||Bn&&Bn.isContextLost()){var e=it.ADAPTER.createCanvas(),r=void 0;it.PREFER_ENV>=t.ENV.WEBGL2&&(r=e.getContext("webgl2",{})),r||((r=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?r.getExtension("WEBGL_draw_buffers"):r=null),Bn=r}return Bn}function Gn(e,r,n){if("precision"!==e.substring(0,9)){var i=r;return r===t.PRECISION.HIGH&&n!==t.PRECISION.HIGH&&(i=t.PRECISION.MEDIUM),"precision "+i+" float;\n"+e}return n!==t.PRECISION.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}var kn={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Xn(t){return kn[t]}var jn=null,zn={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Hn(t,e){if(!jn){var r=Object.keys(zn);jn={};for(var n=0;n<r.length;++n){var i=r[n];jn[t[i]]=zn[i]}}return jn[e]}var Yn=[{test:function(t){return"float"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t,e){return!("sampler2D"!==t.type&&"samplerCube"!==t.type&&"sampler2DArray"!==t.type||1!==t.size||t.isArray||null!=e&&void 0===e.castToBaseTexture)},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&!t.isArray&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Vn={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},Wn={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var qn,Zn=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Kn(t){for(var e="",r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}function Jn(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var n=Zn.replace(/%forloop%/gi,Kn(t));if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var Qn=0,$n={},ti=function(){function e(r,n,i){void 0===i&&(i="pixi-shader"),this.id=Qn++,this.vertexSrc=r||e.defaultVertexSrc,this.fragmentSrc=n||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),$n[i]?($n[i]++,i+="-"+$n[i]):$n[i]=1,this.vertexSrc="#define SHADER_NAME "+i+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+"\n"+this.fragmentSrc,this.vertexSrc=Gn(this.vertexSrc,it.PRECISION_VERTEX,t.PRECISION.HIGH),this.fragmentSrc=Gn(this.fragmentSrc,it.PRECISION_FRAGMENT,function(){if(!Ln){Ln=t.PRECISION.MEDIUM;var e=Un();if(e&&e.getShaderPrecisionFormat){var r=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);Ln=r.precision?t.PRECISION.HIGH:t.PRECISION.MEDIUM}}return Ln}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),e.from=function(t,r,n){var i=t+r,o=Ne[i];return o||(Ne[i]=o=new e(t,r,n)),o},e}(),ei=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof gn?e:new gn(e):new gn({}),this.disposeRunner=new Or("disposeShader")}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){var n=e.uniforms[r];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,r,n){return new t(ti.from(e,r),n)},t}(),ri=function(){function e(){this.data=0,this.blendMode=t.BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==t.BLEND_MODES.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),ni=function(t){function e(r,n,i){var o=this,s=ti.from(r||e.defaultVertexSrc,n||e.defaultFragmentSrc);return(o=t.call(this,s,i)||this).padding=0,o.resolution=it.FILTER_RESOLUTION,o.multisample=it.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new ri,o}return Dr(e,t),e.prototype.apply=function(t,e,r,n,i){t.applyFilter(this,e,r,n)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(ei),ii=new ir,oi=function(){function t(t,e){this._texture=t,this.mapCoord=new ir,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,n=0;n<t.length;n+=2){var i=t[n],o=t[n+1];e[n]=i*r.a+o*r.c+r.tx,e[n+1]=i*r.b+o*r.d+r.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=e.orig,i=e.trim;i&&(ii.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(ii));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,u=this.clampOffset;return s[0]=(e._frame.x+a+u)/o.width,s[1]=(e._frame.y+a+u)/o.height,s[2]=(e._frame.x+e._frame.width-a+u)/o.width,s[3]=(e._frame.y+e._frame.height-a+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),si=function(t){function e(e,r,n){var i=this,o=null;return"string"!=typeof e&&void 0===r&&void 0===n&&(o=e,e=void 0,r=void 0,n=void 0),(i=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",r||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",n)||this).maskSprite=o,i.maskMatrix=new ir,i}return Dr(e,t),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,r,n){var i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new oi(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,r,n))},e}(ni),ai=function(){function e(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(e,r){var n=r;if(!n.isMaskData){var i=this.maskDataPool.pop()||new Pn;i.pooled=!0,i.maskObject=r,n=i}var o=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(o),n._colorMask=o?o._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==t.MASK_TYPES.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case t.MASK_TYPES.SCISSOR:this.renderer.scissor.push(n);break;case t.MASK_TYPES.STENCIL:this.renderer.stencil.push(n);break;case t.MASK_TYPES.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case t.MASK_TYPES.COLOR:this.pushColorMask(n)}n.type===t.MASK_TYPES.SPRITE&&this.maskStack.push(n)},e.prototype.pop=function(e){var r=this.maskStack.pop();if(r&&r._target===e){if(r.enabled)switch(r.type){case t.MASK_TYPES.SCISSOR:this.renderer.scissor.pop(r);break;case t.MASK_TYPES.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case t.MASK_TYPES.SPRITE:this.popSpriteMask(r);break;case t.MASK_TYPES.COLOR:this.popColorMask(r)}if(r.reset(),r.pooled&&this.maskDataPool.push(r),0!==this.maskStack.length){var n=this.maskStack[this.maskStack.length-1];n.type===t.MASK_TYPES.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},e.prototype.detect=function(e){var r=e.maskObject;r?r.isSprite?e.type=t.MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=t.MASK_TYPES.SCISSOR:e.type=t.MASK_TYPES.STENCIL:e.type=t.MASK_TYPES.COLOR},e.prototype.pushSpriteMask=function(t){var e,r,n=t.maskObject,i=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new si]);var s,a,u=this.renderer,h=u.renderTexture;if(h.current){var l=h.current;s=t.resolution||l.resolution,a=null!==(e=t.multisample)&&void 0!==e?e:l.multisample}else s=t.resolution||u.resolution,a=null!==(r=t.multisample)&&void 0!==r?r:u.multisample;o[0].resolution=s,o[0].multisample=a,o[0].maskSprite=n;var c=i.filterArea;i.filterArea=n.getBounds(!0),u.filter.push(i,o),i.filterArea=c,t._filters||this.alphaMaskIndex++},e.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},e.prototype.pushColorMask=function(t){var e=t._colorMask,r=t._colorMask=e&t.colorMask;r!==e&&this.renderer.gl.colorMask(!!(1&r),!!(2&r),!!(4&r),!!(8&r))},e.prototype.popColorMask=function(t){var e=t._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==e&&this.renderer.gl.colorMask(!!(1&r),!!(2&r),!!(4&r),!!(8&r))},e.prototype.destroy=function(){this.renderer=null},e}(),ui=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==r&&(0===n?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),hi=new ir,li=[],ci=function(t){function e(e){var r=t.call(this,e)||this;return r.glConst=it.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,r}return Dr(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){var e;if(!t._scissorRectLocal){var r=t._scissorRect,n=t.maskObject,i=this.renderer,o=i.renderTexture,s=n.getBounds(!0,null!==(e=li.pop())&&void 0!==e?e:new Qe);this.roundFrameToPixels(s,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),r&&s.fit(r),t._scissorRectLocal=s}},e.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,r=t.b,n=t.c,i=t.d;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)},e.prototype.testScissor=function(t){var r=t.maskObject;if(!r.isFastRect||!r.isFastRect())return!1;if(e.isMatrixRotated(r.worldTransform))return!1;if(e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var n=t._scissorRectLocal;return n.width>0&&n.height>0},e.prototype.roundFrameToPixels=function(t,r,n,i,o){e.isMatrixRotated(o)||((o=o?hi.copyFrom(o):hi.identity()).translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(o,t),t.fit(i),t.x=Math.round(t.x*r),t.y=Math.round(t.y*r),t.width=Math.round(t.width*r),t.height=Math.round(t.height*r))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;t&&li.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,e=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)},e}(ui),fi=function(t){function e(e){var r=t.call(this,e)||this;return r.glConst=it.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,r}return Dr(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,n=t._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),t._stencilCounter++;var i=t._colorMask;0!==i&&(t._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,n,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==i&&(t._colorMask=i,r.colorMask(!!(1&i),!!(2&i),!!(4&i),!!(8&i))),this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;if(0===this.getStackLength())e.disable(e.STENCIL_TEST);else{var r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,n=r?r._colorMask:15;0!==n&&(r._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==n&&(r._colorMask=n,e.colorMask(!!(1&n),!!(2&n),!!(4&n),!!(8&n))),this._useCurrent()}},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(ui),di=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ir,this.transform=null}return t.prototype.update=function(t,e,r,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,r,n){var i=this.projectionMatrix,o=n?-1:1;i.identity(),i.a=1/e.width*2,i.d=o*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-o-e.y*i.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),pi=new Qe,mi=new Qe,gi=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Qe,this.destinationFrame=new Qe,this.viewportFrame=new Qe}return t.prototype.bind=function(t,e,r){void 0===t&&(t=null);var n,i,o,s=this.renderer;this.current=t,t?(o=(n=t.baseTexture).resolution,e||(pi.width=t.frame.width,pi.height=t.frame.height,e=pi),r||(mi.x=t.frame.x,mi.y=t.frame.y,mi.width=e.width,mi.height=e.height,r=mi),i=n.framebuffer):(o=s.resolution,e||(pi.width=s.screen.width,pi.height=s.screen.height,e=pi),r||((r=pi).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*o,a.y=r.y*o,a.width=r.width*o,a.height=r.height*o,t||(a.y=s.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(i,a),this.renderer.projection.update(r,e,o,!i),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,i=r.width!==n.width||r.height!==n.height;if(i){var o=this.viewportFrame,s=o.x,a=o.y,u=o.width,h=o.height;s=Math.round(s),a=Math.round(a),u=Math.round(u),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(s,a,u,h)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),i&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function vi(t,e,r,n,i){r.buffer.update(i)}var _i={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},yi={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function bi(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),r=0,n=0,i=0,o=0;o<e.length;o++){var s=e[o];if(r=yi[s.data.type],s.data.size>1&&(r=Math.max(r,16)*s.data.size),s.dataLen=r,n%r!=0&&n<16){var a=n%r%16;n+=a,i+=a}n+r>16?(i=16*Math.ceil(i/16),s.offset=i,i+=r,n=r):(s.offset=i,n+=r,i+=r)}return{uboElements:e,size:i=16*Math.ceil(i/16)}}function xi(t,e){var r=[];for(var n in t)e[n]&&r.push(e[n]);return r.sort((function(t,e){return t.index-e.index})),r}function Ti(t,e){if(!t.autoManage)return{size:0,syncFunc:vi};for(var r=bi(xi(t.uniforms,e)),n=r.uboElements,i=r.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],s=0;s<n.length;s++){for(var a=n[s],u=t.uniforms[a.data.name],h=a.data.name,l=!1,c=0;c<Yn.length;c++){var f=Yn[c];if(f.codeUbo&&f.test(a.data,u)){o.push("offset = "+a.offset/4+";",Yn[c].codeUbo(a.data.name,u)),l=!0;break}}if(!l)if(a.data.size>1){var d=Xn(a.data.type),p=Math.max(yi[a.data.type]/16,1),m=d/p,g=(4-m%4)%4;o.push("\n                cv = ud."+h+".value;\n                v = uv."+h+";\n                offset = "+a.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+a.data.size*p+"; i++)\n                {\n                    for(var j = 0; j < "+m+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+g+";\n                }\n\n                ")}else{var v=_i[a.data.type];o.push("\n                cv = ud."+h+".value;\n                v = uv."+h+";\n                offset = "+a.offset/4+";\n                "+v+";\n                ")}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}var Ei=function(){},Si=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function Ai(t,e){var r=In(t,t.VERTEX_SHADER,e.vertexSrc),n=In(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();if(t.attachShader(i,r),t.attachShader(i,n),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||function(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||Cn(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||Cn(t,n),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,i,r,n),e.attributeData=function(t,e){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var o=e.getActiveAttrib(t,i);if(0!==o.name.indexOf("gl_")){var s=Hn(e,o.type),a={type:s,name:o.name,size:Xn(s),location:e.getAttribLocation(t,o.name)};r[o.name]=a}}return r}(i,t),e.uniformData=function(t,e){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<n;i++){var o=e.getActiveUniform(t,i),s=o.name.replace(/\[.*?\]$/,""),a=!!o.name.match(/\[.*?\]$/),u=Hn(e,o.type);r[s]={name:s,index:i,type:u,size:o.size,isArray:a,value:Fn(u,o.size)}}return r}(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort((function(t,e){return t>e?1:-1}));for(var s=0;s<o.length;s++)e.attributeData[o[s]].location=s,t.bindAttribLocation(i,s,o[s]);t.linkProgram(i)}t.deleteShader(r),t.deleteShader(n);var a={};for(var s in e.uniformData){var u=e.uniformData[s];a[s]={location:t.getUniformLocation(i,s),value:Fn(u.type,u.size)}}return new Si(i,a)}var Oi=0,Ri={textureCount:0,uboCount:0},wi=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Oi++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof qn)return qn;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");qn=!0===t({a:"b"},"a","b")}catch(t){qn=!1}return qn}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),e||(Ri.textureCount=0,Ri.uboCount=0,this.syncUniformGroup(t.uniformGroup,Ri)),n},t.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var r=this.getGlProgram();t.static&&t.dirtyId===r.uniformDirtyGroups[t.id]||(r.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},t.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var r,n=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var i in t.uniforms){var o=e[i];if(o){for(var s=t.uniforms[i],a=!1,u=0;u<Yn.length;u++)if(Yn[u].test(o,s)){n.push(Yn[u].code(i,s)),a=!0;break}if(!a){var h=(1!==o.size||o.isArray?Wn:Vn)[o.type].replace("location",'ud["'+i+'"].location');n.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+h+";")}}else(null===(r=t.uniforms[i])||void 0===r?void 0:r.group)&&(t.uniforms[i].ubo?n.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    "):n.push("\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var r=this.getGlProgram();if(!t.static||0!==t.dirtyId||!r.uniformGroups[t.id]){t.dirtyId=0;var n=r.uniformGroups[t.id]||this.createSyncBufferGroup(t,r,e);t.buffer.update(),n(r.uniformData,t.uniforms,this.renderer,Ri,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,r.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,r){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var i=this.gl.getUniformBlockIndex(e.program,r);e.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),s=this._uboCache[o];if(s||(s=this._uboCache[o]=Ti(t,this.shader.program.uniformData)),t.autoManage){var a=new Float32Array(s.size/4);t.buffer.update(a)}return e.uniformGroups[t.id]=s.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,r){var n=t.uniforms,i=[r+"-"];for(var o in n)i.push(o),e[o]&&i.push(e[o].type);return i.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,r=t.program,n=Ai(e,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.disposeShader=function(t){this.shader===t&&(this.shader=null)},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();var Mi=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=t.BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new ri,this.defaultState.blend=!0}return e.prototype.contextChange=function(e){this.gl=e,this.blendModes=function(e,r){return void 0===r&&(r=[]),r[t.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.ADD]=[e.ONE,e.ONE],r[t.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.NONE]=[0,0],r[t.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],r[t.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.SRC_IN]=[e.DST_ALPHA,e.ZERO],r[t.BLEND_MODES.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],r[t.BLEND_MODES.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],r[t.BLEND_MODES.DST_IN]=[e.ZERO,e.SRC_ALPHA],r[t.BLEND_MODES.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],r[t.BLEND_MODES.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],r[t.BLEND_MODES.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],r}(e),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(t){this.gl.depthMask(t)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],r=this.gl;2===e.length?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),Pi=function(){function e(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=it.GC_MAX_IDLE,this.checkCountMax=it.GC_MAX_CHECK_COUNT,this.mode=it.GC_MODE}return e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==t.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,n=0;n<e.length;n++){var i=e[n];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[n]=null,r=!0)}if(r){var o=0;for(n=0;n<e.length;n++)null!==e[n]&&(e[o++]=e[n]);e.length=o}},e.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},e.prototype.destroy=function(){this.renderer=null},e}();var Ii=function(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=t.TYPES.UNSIGNED_BYTE,this.internalFormat=t.FORMATS.RGBA,this.samplerType=0},Ci=function(){function e(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Ur,this.hasIntegerTextures=!1}return e.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(e){var r,n,i,o,s,a,u,h,l,c,f,d,p,m,g,v,_,y,b,x,T,E,S;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?((r={})[t.TYPES.UNSIGNED_BYTE]=((n={})[t.FORMATS.RGBA]=e.RGBA8,n[t.FORMATS.RGB]=e.RGB8,n[t.FORMATS.RG]=e.RG8,n[t.FORMATS.RED]=e.R8,n[t.FORMATS.RGBA_INTEGER]=e.RGBA8UI,n[t.FORMATS.RGB_INTEGER]=e.RGB8UI,n[t.FORMATS.RG_INTEGER]=e.RG8UI,n[t.FORMATS.RED_INTEGER]=e.R8UI,n[t.FORMATS.ALPHA]=e.ALPHA,n[t.FORMATS.LUMINANCE]=e.LUMINANCE,n[t.FORMATS.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,n),r[t.TYPES.BYTE]=((i={})[t.FORMATS.RGBA]=e.RGBA8_SNORM,i[t.FORMATS.RGB]=e.RGB8_SNORM,i[t.FORMATS.RG]=e.RG8_SNORM,i[t.FORMATS.RED]=e.R8_SNORM,i[t.FORMATS.RGBA_INTEGER]=e.RGBA8I,i[t.FORMATS.RGB_INTEGER]=e.RGB8I,i[t.FORMATS.RG_INTEGER]=e.RG8I,i[t.FORMATS.RED_INTEGER]=e.R8I,i),r[t.TYPES.UNSIGNED_SHORT]=((o={})[t.FORMATS.RGBA_INTEGER]=e.RGBA16UI,o[t.FORMATS.RGB_INTEGER]=e.RGB16UI,o[t.FORMATS.RG_INTEGER]=e.RG16UI,o[t.FORMATS.RED_INTEGER]=e.R16UI,o[t.FORMATS.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,o),r[t.TYPES.SHORT]=((s={})[t.FORMATS.RGBA_INTEGER]=e.RGBA16I,s[t.FORMATS.RGB_INTEGER]=e.RGB16I,s[t.FORMATS.RG_INTEGER]=e.RG16I,s[t.FORMATS.RED_INTEGER]=e.R16I,s),r[t.TYPES.UNSIGNED_INT]=((a={})[t.FORMATS.RGBA_INTEGER]=e.RGBA32UI,a[t.FORMATS.RGB_INTEGER]=e.RGB32UI,a[t.FORMATS.RG_INTEGER]=e.RG32UI,a[t.FORMATS.RED_INTEGER]=e.R32UI,a[t.FORMATS.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,a),r[t.TYPES.INT]=((u={})[t.FORMATS.RGBA_INTEGER]=e.RGBA32I,u[t.FORMATS.RGB_INTEGER]=e.RGB32I,u[t.FORMATS.RG_INTEGER]=e.RG32I,u[t.FORMATS.RED_INTEGER]=e.R32I,u),r[t.TYPES.FLOAT]=((h={})[t.FORMATS.RGBA]=e.RGBA32F,h[t.FORMATS.RGB]=e.RGB32F,h[t.FORMATS.RG]=e.RG32F,h[t.FORMATS.RED]=e.R32F,h[t.FORMATS.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,h),r[t.TYPES.HALF_FLOAT]=((l={})[t.FORMATS.RGBA]=e.RGBA16F,l[t.FORMATS.RGB]=e.RGB16F,l[t.FORMATS.RG]=e.RG16F,l[t.FORMATS.RED]=e.R16F,l),r[t.TYPES.UNSIGNED_SHORT_5_6_5]=((c={})[t.FORMATS.RGB]=e.RGB565,c),r[t.TYPES.UNSIGNED_SHORT_4_4_4_4]=((f={})[t.FORMATS.RGBA]=e.RGBA4,f),r[t.TYPES.UNSIGNED_SHORT_5_5_5_1]=((d={})[t.FORMATS.RGBA]=e.RGB5_A1,d),r[t.TYPES.UNSIGNED_INT_2_10_10_10_REV]=((p={})[t.FORMATS.RGBA]=e.RGB10_A2,p[t.FORMATS.RGBA_INTEGER]=e.RGB10_A2UI,p),r[t.TYPES.UNSIGNED_INT_10F_11F_11F_REV]=((m={})[t.FORMATS.RGB]=e.R11F_G11F_B10F,m),r[t.TYPES.UNSIGNED_INT_5_9_9_9_REV]=((g={})[t.FORMATS.RGB]=e.RGB9_E5,g),r[t.TYPES.UNSIGNED_INT_24_8]=((v={})[t.FORMATS.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,v),r[t.TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]=((_={})[t.FORMATS.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,_),S=r):((y={})[t.TYPES.UNSIGNED_BYTE]=((b={})[t.FORMATS.RGBA]=e.RGBA,b[t.FORMATS.RGB]=e.RGB,b[t.FORMATS.ALPHA]=e.ALPHA,b[t.FORMATS.LUMINANCE]=e.LUMINANCE,b[t.FORMATS.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,b),y[t.TYPES.UNSIGNED_SHORT_5_6_5]=((x={})[t.FORMATS.RGB]=e.RGB,x),y[t.TYPES.UNSIGNED_SHORT_4_4_4_4]=((T={})[t.FORMATS.RGBA]=e.RGBA,T),y[t.TYPES.UNSIGNED_SHORT_5_5_5_1]=((E={})[t.FORMATS.RGBA]=e.RGBA,E),S=y),S}(e);var r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var n=0;n<r;n++)this.boundTextures[n]=null;this.emptyTextures={};var i=new Ii(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Ii(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(n=0;n<this.boundTextures.length;n++)this.bind(null,n)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var r=this.gl;if((t=null==t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<r.length;n++)r[n]===this.unknownTexture&&this.bind(null,n)}for(n=0;n<r.length;n++)r[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[n]=null)},e.prototype.ensureSamplerType=function(e){var r=this,n=r.boundTextures,i=r.hasIntegerTextures,o=r.CONTEXT_UID;if(i)for(var s=e-1;s>=0;--s){var a=n[s];if(a)a._glTextures[o].samplerType!==t.SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(a)}},e.prototype.initTexture=function(t){var e=new Ii(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(e,r){var n,i;r.internalFormat=null!==(i=null===(n=this.internalFormats[e.type])||void 0===n?void 0:n[e.format])&&void 0!==i?i:e.format,2===this.webGLVersion&&e.type===t.TYPES.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type},e.prototype.updateTexture=function(e){var r=e._glTextures[this.CONTEXT_UID];if(r){var n=this.renderer;if(this.initTextureType(e,r),e.resource&&e.resource.upload(n,e,r))r.samplerType!==t.SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{var i=e.realWidth,o=e.realHeight,s=n.gl;(r.width!==i||r.height!==o||r.dirtyId<0)&&(r.width=i,r.height=o,s.texImage2D(e.target,0,r.internalFormat,i,o,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}},e.prototype.destroyTexture=function(t,e){var r=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);-1!==n&&Pe(this.managedTextures,n,1)}},e.prototype.updateTextureStyle=function(e){var r=e._glTextures[this.CONTEXT_UID];r&&(e.mipmap!==t.MIPMAP_MODES.POW2&&2===this.webGLVersion||e.isPowerOfTwo?r.mipmap=e.mipmap>=1:r.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?r.wrapMode=e.wrapMode:r.wrapMode=t.WRAP_MODES.CLAMP,e.resource&&e.resource.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)},e.prototype.setStyle=function(e,r){var n=this.gl;if(r.mipmap&&e.mipmap!==t.MIPMAP_MODES.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===t.SCALE_MODES.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===t.SCALE_MODES.LINEAR){var o=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===t.SCALE_MODES.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===t.SCALE_MODES.LINEAR?n.LINEAR:n.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),Di={__proto__:null,FilterSystem:bn,BatchSystem:Tn,ContextSystem:Sn,FramebufferSystem:Rn,GeometrySystem:Mn,MaskSystem:ai,ScissorSystem:ci,StencilSystem:fi,ProjectionSystem:di,RenderTextureSystem:gi,ShaderSystem:wi,StateSystem:Mi,TextureGCSystem:Pi,TextureSystem:Ci},Fi=new ir,Li=function(e){function r(r,n){void 0===r&&(r=t.RENDERER_TYPE.UNKNOWN);var i=e.call(this)||this;return n=Object.assign({},it.RENDER_OPTIONS,n),i.options=n,i.type=r,i.screen=new Qe(0,0,n.width,n.height),i.view=n.view||it.ADAPTER.createCanvas(),i.resolution=n.resolution||it.RESOLUTION,i.useContextAlpha=n.useContextAlpha,i.autoDensity=!!n.autoDensity,i.preserveDrawingBuffer=n.preserveDrawingBuffer,i.clearBeforeRender=n.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=n.backgroundColor||i._backgroundColor,i.backgroundAlpha=n.backgroundAlpha,void 0!==n.transparent&&(Le("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=n.transparent,i.backgroundAlpha=n.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return Dr(r,e),r.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(r.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),r.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var r=this.view.width/this.resolution,n=this.view.height/this.resolution;this.screen.width=r,this.screen.height=n,this.autoDensity&&(this.view.style.width=r+"px",this.view.style.height=n+"px"),this.emit("resize",r,n)},r.prototype.generateTexture=function(t,e,r,n){void 0===e&&(e={}),"number"==typeof e&&(Le("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:r,region:n});var i=e.region,o=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}(e,["region"]);0===(n=i||t.getLocalBounds(null,!0)).width&&(n.width=1),0===n.height&&(n.height=1);var s=rn.create(Fr({width:n.width,height:n.height},o));return Fi.tx=-n.x,Fi.ty=-n.y,this.render(t,{renderTexture:s,clear:!1,transform:Fi,skipUpdateTransform:!!t.parent}),s},r.prototype.destroy=function(e){for(var r in this.plugins)this.plugins[r].destroy(),this.plugins[r]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=t.RENDERER_TYPE.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(r.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=ve(t),ge(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),r}(at),Ni=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Bi=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,r=this.CONTEXT_UID,n=t._glBuffers[r]||this.createGLBuffer(t);e.bindBuffer(t.type,n.buffer)},t.prototype.bindBufferBase=function(t,e){var r=this.gl,n=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var i=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[e]=t,r.bindBufferBase(r.UNIFORM_BUFFER,e,i.buffer)}},t.prototype.bindBufferRange=function(t,e,r){var n=this.gl,i=this.CONTEXT_UID;r=r||0;var o=t._glBuffers[i]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,e||0,o.buffer,256*r,256)},t.prototype.update=function(t){var e=this.gl,r=this.CONTEXT_UID,n=t._glBuffers[r];if(t._updateID!==n.updateID)if(n.updateID=t._updateID,e.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var i=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,i)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var r=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),r&&(e||n.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.dispose(this.managedBuffers[e[r]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,r=this.gl;return t._glBuffers[e]=new Ni(r.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}(),Ui=function(e){function r(n){var i=e.call(this,t.RENDERER_TYPE.WEBGL,n)||this;return n=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new Or("destroy"),contextChange:new Or("contextChange"),reset:new Or("reset"),update:new Or("update"),postrender:new Or("postrender"),prerender:new Or("prerender"),resize:new Or("resize")},i.runners.contextChange.add(i),i.globalUniforms=new gn({projectionMatrix:new ir},!0),i.addSystem(ai,"mask").addSystem(Sn,"context").addSystem(Mi,"state").addSystem(wi,"shader").addSystem(Ci,"texture").addSystem(Bi,"buffer").addSystem(Mn,"geometry").addSystem(Rn,"framebuffer").addSystem(ci,"scissor").addSystem(fi,"stencil").addSystem(di,"projection").addSystem(Pi,"textureGC").addSystem(bn,"filter").addSystem(gi,"renderTexture").addSystem(Tn,"batch"),i.initPlugins(r.__plugins),i.multisample=void 0,n.context?i.context.initFromContext(n.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:n.antialias,premultipliedAlpha:i.useContextAlpha&&"notMultiplied"!==i.useContextAlpha,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,de(2===i.context.webGLVersion?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return Dr(r,e),r.create=function(t){if(pe())return new r(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},r.prototype.contextChange=function(){var e,r=this.gl;if(1===this.context.webGLVersion){var n=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),e=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,n)}else{n=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),e=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,n)}e>=t.MSAA_QUALITY.HIGH?this.multisample=t.MSAA_QUALITY.HIGH:e>=t.MSAA_QUALITY.MEDIUM?this.multisample=t.MSAA_QUALITY.MEDIUM:e>=t.MSAA_QUALITY.LOW?this.multisample=t.MSAA_QUALITY.LOW:this.multisample=t.MSAA_QUALITY.NONE},r.prototype.addSystem=function(t,e){var r=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var n in this[e]=r,this.runners)this.runners[n].add(r);return this},r.prototype.render=function(t,e){var r,n,i,o;if(e&&(e instanceof rn?(Le("6.0.0","Renderer#render arguments changed, use options instead."),r=e,n=arguments[2],i=arguments[3],o=arguments[4]):(r=e.renderTexture,n=e.clear,i=e.transform,o=e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(r||(this._lastObjectRendered=t),!o){var s=t.enableTempParent();t.updateTransform(),t.disableTempParent(s)}this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},r.prototype.generateTexture=function(t,r,n,i){void 0===r&&(r={});var o=e.prototype.generateTexture.call(this,t,r,n,i);return this.framebuffer.blit(),o},r.prototype.resize=function(t,r){e.prototype.resize.call(this,t,r),this.runners.resize.emit(this.screen.height,this.screen.width)},r.prototype.reset=function(){return this.runners.reset.emit(),this},r.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},r.prototype.destroy=function(t){for(var r in this.runners.destroy.emit(),this.runners)this.runners[r].destroy();e.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(r.prototype,"extract",{get:function(){return Le("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),r.registerPlugin=function(e,r){Le("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),Ar.add({name:e,type:t.ExtensionType.RendererPlugin,ref:r})},r.__plugins={},r}(Li);function Gi(t){return Ui.create(t)}Ar.handleByMap(t.ExtensionType.RendererPlugin,Ui.__plugins);var ki="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Xi="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",ji=function(){function t(t){Le("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),zi=function(){this.texArray=null,this.blend=0,this.type=t.DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null},Hi=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),Yi=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),Vi=function(e){function r(t){var r=e.call(this,t)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=ri.for2d(),r.size=4*it.SPRITE_BATCH_SIZE,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),t.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return Dr(r,e),r.prototype.contextChange=function(){var e=this.renderer.gl;it.PREFER_ENV===t.ENV.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),it.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Jn(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()},r.prototype.initFlushBuffers=function(){for(var t=r._drawCallPool,e=r._textureArrayPool,n=this.size/4,i=Math.floor(n/this.MAX_TEXTURES)+1;t.length<n;)t.push(new zi);for(;e.length<i;)e.push(new Hi);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},r.prototype.onPrerender=function(){this._flushId=0},r.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},r.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,n=r._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,s=this.renderer.textureGC.count,a=++Ur._globalBatch,u=0,h=n[0],l=0;i.copyBoundTextures(o,e);for(var c=0;c<this._bufferSize;++c){var f=t[c];t[c]=null,f._batchEnabled!==a&&(h.count>=e&&(i.boundArray(h,o,a,e),this.buildDrawCalls(h,l,c),l=c,h=n[++u],++a),f._batchEnabled=a,f.touched=s,h.elements[h.count++]=f)}h.count>0&&(i.boundArray(h,o,a,e),this.buildDrawCalls(h,l,this._bufferSize),++u,++a);for(c=0;c<o.length;c++)o[c]=null;Ur._globalBatch=a},r.prototype.buildDrawCalls=function(t,e,n){var i=this,o=i._bufferedElements,s=i._attributeBuffer,a=i._indexBuffer,u=i.vertexSize,h=r._drawCallPool,l=this._dcIndex,c=this._aIndex,f=this._iIndex,d=h[l];d.start=this._iIndex,d.texArray=t;for(var p=e;p<n;++p){var m=o[p],g=m._texture.baseTexture,v=ye[g.alphaMode?1:0][m.blendMode];o[p]=null,e<p&&d.blend!==v&&(d.size=f-d.start,e=p,(d=h[++l]).texArray=t,d.start=f),this.packInterleavedGeometry(m,s,a,c,f),c+=m.vertexData.length/2*u,f+=m.indices.length,d.blend=v}e<n&&(d.size=f-d.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=f},r.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},r.prototype.updateGeometry=function(){var t=this,e=t._packedGeometries,r=t._attributeBuffer,n=t._indexBuffer;it.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},r.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,n=e.gl,i=e.state,o=r._drawCallPool,s=null,a=0;a<t;a++){var u=o[a],h=u.texArray,l=u.type,c=u.size,f=u.start,d=u.blend;s!==h&&(s=h,this.bindAndClearTexArray(h)),this.state.blendMode=d,i.set(this.state),n.drawElements(l,c,n.UNSIGNED_SHORT,2*f)}},r.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},r.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),it.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},r.prototype.stop=function(){this.flush()},r.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},r.prototype.getAttributeBuffer=function(t){var e=Re(Math.ceil(t/8)),r=Me(e),n=8*e;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);var i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new Yi(n*this.vertexSize*4)),i},r.prototype.getIndexBuffer=function(t){var e=Re(Math.ceil(t/12)),r=Me(e),n=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);var i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i},r.prototype.packInterleavedGeometry=function(t,e,r,n,i){for(var o=e.uint32View,s=e.float32View,a=n/this.vertexSize,u=t.uvs,h=t.indices,l=t.vertexData,c=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),d=f<1&&t._texture.baseTexture.alphaMode?Te(t._tintRGB,f):t._tintRGB+(255*f<<24),p=0;p<l.length;p+=2)s[n++]=l[p],s[n++]=l[p+1],s[n++]=u[p],s[n++]=u[p+1],o[n++]=d,s[n++]=c;for(p=0;p<h.length;p++)r[i++]=a+h[p]},r._drawCallPool=[],r._textureArrayPool=[],r}(xn),Wi=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=gn.from({uSamplers:e},!0);var n=this.fragTemplate;n=(n=n.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new ti(this.vertexSrc,n)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new ir,default:this.defaultGroupCache[t]};return new ei(this.programCache[t],i)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},t}(),qi=function(e){function r(r){void 0===r&&(r=!1);var n=e.call(this)||this;return n._buffer=new an(null,r,!1),n._indexBuffer=new an(null,r,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,t.TYPES.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,t.TYPES.FLOAT).addAttribute("aColor",n._buffer,4,!0,t.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,t.TYPES.FLOAT).addIndex(n._indexBuffer),n}return Dr(r,e),r}(fn),Zi="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Ki="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Ji=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:Zi,fragment:Ki,geometryClass:qi,vertexSize:6},t),r=e.vertex,n=e.fragment,i=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var s=t.call(this,e)||this;return s.shaderGenerator=new Wi(r,n),s.geometryClass=o,s.vertexSize=i,s}return Dr(e,t),e}(Vi)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Zi},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return Ki},enumerable:!1,configurable:!0}),t}(),Qi=Ji.create();Object.assign(Qi,{extension:{name:"batch",type:t.ExtensionType.RendererPlugin}});var $i={},to=function(t){Object.defineProperty($i,t,{get:function(){return Le("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),qr[t]}})};for(var eo in qr)to(eo);var ro={},no=function(t){Object.defineProperty(ro,t,{get:function(){return Le("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),Di[t]}})};for(var eo in Di)no(eo);var io={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};vr.mixin(io);var oo=100,so=function(){function e(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(nt.tablet||nt.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=oo+"px",e.style.height=oo+"px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},e.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(t=this.renderer.view.parentNode)||void 0===t||t.appendChild(this.div))},e.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(t=this.div.parentNode)||void 0===t||t.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var e=t.children;if(e)for(var r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}},e.prototype.update=function(){var t=performance.now();if(!(nt.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),r=e.left,n=e.top,i=e.width,o=e.height,s=this.renderer,a=s.width,u=s.height,h=s.resolution,l=i/a*h,c=o/u*h,f=this.div;f.style.left=r+"px",f.style.top=n+"px",f.style.width=a+"px",f.style.height=u+"px";for(var d=0;d<this.children.length;d++){var p=this.children[d];if(p.renderId!==this.renderId)p._accessibleActive=!1,Pe(this.children,d,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,d--;else{f=p._accessibleDiv;var m=p.hitArea,g=p.worldTransform;p.hitArea?(f.style.left=(g.tx+m.x*g.a)*l+"px",f.style.top=(g.ty+m.y*g.d)*c+"px",f.style.width=m.width*g.a*l+"px",f.style.height=m.height*g.d*c+"px"):(m=p.getBounds(),this.capHitArea(m),f.style.left=m.x*l+"px",f.style.top=m.y*c+"px",f.style.width=m.width*l+"px",f.style.height=m.height*c+"px",f.title!==p.accessibleTitle&&null!==p.accessibleTitle&&(f.title=p.accessibleTitle),f.getAttribute("aria-label")!==p.accessibleHint&&null!==p.accessibleHint&&f.setAttribute("aria-label",p.accessibleHint)),p.accessibleTitle===f.title&&p.tabIndex===f.tabIndex||(f.title=p.accessibleTitle,f.tabIndex=p.tabIndex,this.debug&&this.updateDebugHTML(f))}}this.renderId++}},e.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},e.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,r=e.width,n=e.height;t.x+t.width>r&&(t.width=r-t.x),t.y+t.height>n&&(t.height=n-t.y)},e.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width=oo+"px",e.style.height=oo+"px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},e.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,r=t.target.displayObject,n=e.eventData;e.dispatchEvent(r,"click",n),e.dispatchEvent(r,"pointertap",n),e.dispatchEvent(r,"tap",n)},e.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,r=t.target.displayObject,n=e.eventData;e.dispatchEvent(r,"mouseover",n)},e.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,r=t.target.displayObject,n=e.eventData;e.dispatchEvent(r,"mouseout",n)},e.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},e.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e.extension={name:"accessibility",type:[t.ExtensionType.RendererPlugin,t.ExtensionType.CanvasRendererPlugin]},e}(),ao=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Ke,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),uo=function(t,e){return uo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},uo(t,e)};var ho=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),lo=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return!!(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return!!(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return!!(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),co=function(){function t(){this._tempPoint=new Ke}return t.prototype.recursiveFindHit=function(t,e,r,n,i){var o;if(!e||!e.visible)return!1;var s=t.data.global,a=!1,u=i=e.interactive||i,h=!0;if(e.hitArea)n&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(n=!1,h=!1)),u=!1;else if(e._mask&&n){var l=e._mask.isMaskData?e._mask.maskObject:e._mask;l&&!(null===(o=l.containsPoint)||void 0===o?void 0:o.call(l,s))&&(n=!1)}if(h&&e.interactiveChildren&&e.children)for(var c=e.children,f=c.length-1;f>=0;f--){var d=c[f],p=this.recursiveFindHit(t,d,r,n,u);if(p){if(!d.parent)continue;u=!1,p&&(t.target&&(n=!1),a=!0)}}return i&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(a=!0),e.interactive&&(a&&!t.target&&(t.target=e),r&&r(t,e,!!a))),a},t.prototype.findHit=function(t,e,r,n){this.recursiveFindHit(t,e,r,n,!1)},t}(),fo={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};vr.mixin(fo);var po={target:null,data:{global:null}},mo=function(e){function r(t,r){var n=e.call(this)||this;return r=r||{},n.renderer=t,n.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,n.interactionFrequency=r.interactionFrequency||10,n.mouse=new ao,n.mouse.identifier=1,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[1]=n.mouse,n.interactionDataPool=[],n.eventData=new ho,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!("PointerEvent"in globalThis),n.supportsTouchEvents="ontouchstart"in globalThis,n.supportsPointerEvents=!!globalThis.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new co,n._tempDisplayObject=new _r,n._eventListenerOptions={capture:!0,passive:!1},n._useSystemTicker=void 0===r.useSystemTicker||r.useSystemTicker,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return function(t,e){function r(){this.constructor=t}uo(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(r,e),Object.defineProperty(r.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),r.prototype.hitTest=function(t,e){return po.target=null,po.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(po,e,null,!0),po.target},r.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},r.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(wr.system.add(this.tickerUpdate,this,t.UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)},r.prototype.removeTickerListener=function(){this.tickerAdded&&(wr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},r.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},r.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},r.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},r.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},r.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var r=this.cursorStyles[t];if(r)switch(typeof r){case"string":e&&(this.interactionDOMElement.style.cursor=r);break;case"function":r(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,r)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},r.prototype.dispatchEvent=function(t,e,r){r.stopPropagationHint&&t!==r.stopsPropagatingAt||(r.currentTarget=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},r.prototype.delayDispatchEvent=function(t,e,r){this.delayedEvents.push({displayObject:t,eventString:e,eventData:r})},r.prototype.mapPositionToPoint=function(t,e,r){var n;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var i=1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*i,t.y=(r-n.top)*(this.interactionDOMElement.height/n.height)*i},r.prototype.processInteractive=function(t,e,r,n){var i=this.search.findHit(t,e,r,n),o=this.delayedEvents;if(!o.length)return i;t.stopPropagationHint=!1;var s=o.length;this.delayedEvents=[];for(var a=0;a<s;a++){var u=o[a],h=u.displayObject,l=u.eventString,c=u.eventData;c.stopsPropagatingAt===h&&(c.stopPropagationHint=!0),this.dispatchEvent(h,l,c)}return i},r.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var r=e.length,n=0;n<r;n++){var i=e[n],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===i.pointerType)this.emit("touchstart",s);else if("mouse"===i.pointerType||"pen"===i.pointerType){var a=2===i.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},r.prototype.processPointerDown=function(t,e,r){var n=t.data,i=t.data.identifier;if(r)if(e.trackedPointers[i]||(e.trackedPointers[i]=new lo(i)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;o?e.trackedPointers[i].rightDown=!0:e.trackedPointers[i].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},r.prototype.onPointerComplete=function(t,e,r){var n=this.normalizeToPointerData(t),i=n.length,o=t.target;t.composedPath&&t.composedPath().length>0&&(o=t.composedPath()[0]);for(var s=o!==this.interactionDOMElement?"outside":"",a=0;a<i;a++){var u=n[a],h=this.getInteractionDataForPointerId(u),l=this.configureInteractionEventForDOMEvent(this.eventData,u,h);if(l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,r,e||!s),this.emit(e?"pointercancel":"pointerup"+s,l),"mouse"===u.pointerType||"pen"===u.pointerType){var c=2===u.button;this.emit(c?"rightup"+s:"mouseup"+s,l)}else"touch"===u.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,l),this.releaseInteractionDataForPointerId(u.pointerId))}},r.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},r.prototype.processPointerCancel=function(t,e){var r=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===r.pointerType&&this.dispatchEvent(e,"touchcancel",t))},r.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},r.prototype.processPointerUp=function(t,e,r){var n=t.data,i=t.data.identifier,o=e.trackedPointers[i],s="touch"===n.pointerType,a="mouse"===n.pointerType||"pen"===n.pointerType,u=!1;if(a){var h=2===n.button,l=lo.FLAGS,c=h?l.RIGHT_DOWN:l.LEFT_DOWN,f=void 0!==o&&o.flags&c;r?(this.dispatchEvent(e,h?"rightup":"mouseup",t),f&&(this.dispatchEvent(e,h?"rightclick":"click",t),u=!0)):f&&this.dispatchEvent(e,h?"rightupoutside":"mouseupoutside",t),o&&(h?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(a&&!u||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[i]},r.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var r=e.length,n=0;n<r;n++){var i=e[n],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===i.pointerType&&this.emit("touchmove",s),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},r.prototype.processPointerMove=function(t,e,r){var n=t.data,i="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType;o&&this.processPointerOverOut(t,e,r),this.moveWhenInside&&!r||(this.dispatchEvent(e,"pointermove",t),i&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},r.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,r);n.data.originalEvent=e,this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(r.identifier)}},r.prototype.processPointerOverOut=function(t,e,r){var n=t.data,i=t.data.identifier,o="mouse"===n.pointerType||"pen"===n.pointerType,s=e.trackedPointers[i];r&&!s&&(s=e.trackedPointers[i]=new lo(i)),void 0!==s&&(r&&this.mouseOverRenderer?(s.over||(s.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[i]))},r.prototype.onPointerOver=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0],r=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,r);n.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",n)}},r.prototype.getInteractionDataForPointerId=function(t){var e,r=t.pointerId;return 1===r||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[r]?e=this.activeInteractionData[r]:((e=this.interactionDataPool.pop()||new ao).identifier=r,this.activeInteractionData[r]=e),e.copyEvent(t),e},r.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},r.prototype.configureInteractionEventForDOMEvent=function(t,e,r){return t.data=r,this.mapPositionToPoint(r.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=r.global.x,e.globalY=r.global.y),r.originalEvent=e,t.reset(),t},r.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var r=0,n=t.changedTouches.length;r<n;r++){var i=t.changedTouches[r];void 0===i.button&&(i.button=t.touches.length?1:0),void 0===i.buttons&&(i.buttons=t.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,e.push(i)}else if(globalThis.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof globalThis.PointerEvent))e.push(t);else{var o=t;void 0===o.isPrimary&&(o.isPrimary=!0),void 0===o.width&&(o.width=1),void 0===o.height&&(o.height=1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="mouse"),void 0===o.pointerId&&(o.pointerId=1),void 0===o.pressure&&(o.pressure=.5),void 0===o.twist&&(o.twist=0),void 0===o.tangentialPressure&&(o.tangentialPressure=0),o.isNormalized=!0,e.push(o)}return e},r.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},r.extension={name:"interaction",type:[t.ExtensionType.RendererPlugin,t.ExtensionType.CanvasRendererPlugin]},r}(at),go=new Qe,vo=function(){function e(t){this.renderer=t}return e.prototype.image=function(t,e,r){var n=new Image;return n.src=this.base64(t,e,r),n},e.prototype.base64=function(t,e,r){return this.canvas(t).toDataURL(e,r)},e.prototype.canvas=function(t,r){var n=this._rawPixels(t,r),i=n.pixels,o=n.width,s=n.height,a=n.flipY,u=new Ge(o,s,1),h=u.context.getImageData(0,0,o,s);if(e.arrayPostDivide(i,h.data),u.context.putImageData(h,0,0),a){var l=new Ge(u.width,u.height,1);l.context.scale(1,-1),l.context.drawImage(u.canvas,0,-s),u.destroy(),u=l}return u.canvas},e.prototype.pixels=function(t,r){var n=this._rawPixels(t,r).pixels;return e.arrayPostDivide(n,n),n},e.prototype._rawPixels=function(e,r){var n,i,o=this.renderer,s=!1,a=!1;if(e)if(e instanceof rn)i=e;else{var u=o.context.webGLVersion>=2?o.multisample:t.MSAA_QUALITY.NONE;if(i=this.renderer.generateTexture(e,{multisample:u}),u!==t.MSAA_QUALITY.NONE){var h=rn.create({width:i.width,height:i.height});o.framebuffer.bind(i.framebuffer),o.framebuffer.blit(h.framebuffer),o.framebuffer.bind(null),i.destroy(!0),i=h}a=!0}i?(n=i.baseTexture.resolution,r=null!=r?r:i.frame,s=!1,o.renderTexture.bind(i)):(n=o.resolution,r||((r=go).width=o.width,r.height=o.height),s=!0,o.renderTexture.bind(null));var l=Math.round(r.width*n),c=Math.round(r.height*n),f=new Uint8Array(4*l*c),d=o.gl;return d.readPixels(Math.round(r.x*n),Math.round(r.y*n),l,c,d.RGBA,d.UNSIGNED_BYTE,f),a&&i.destroy(!0),{pixels:f,width:l,height:c,flipY:s}},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(t,e){for(var r=0;r<t.length;r+=4){var n=e[r+3]=t[r+3];0!==n?(e[r]=Math.round(Math.min(255*t[r]/n,255)),e[r+1]=Math.round(Math.min(255*t[r+1]/n,255)),e[r+2]=Math.round(Math.min(255*t[r+2]/n,255))):(e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2])}},e.extension={name:"extract",type:t.ExtensionType.RendererPlugin},e}(),_o=function(){function t(t,e,r){void 0===e&&(e=!1),this._fn=t,this._once=e,this._thisArg=r,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},t}();function yo(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var bo,xo=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(t){void 0===t&&(t=!1);var e=this._head;if(t)return!!e;for(var r=[];e;)r.push(e),e=e._next;return r},t.prototype.has=function(t){if(!(t instanceof _o))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},t.prototype.dispatch=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,e),n=n._next;return!0},t.prototype.add=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return yo(this,new _o(t,!1,e))},t.prototype.once=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return yo(this,new _o(t,!0,e))},t.prototype.detach=function(t){if(!(t instanceof _o))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this},t.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},t}();function To(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[r.key[o]]=n[o]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,(function(t,e,n){e&&(i[r.q.name][e]=n)})),i}var Eo,So,Ao,Oo,Ro,wo=null;function Mo(){}function Po(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}function Io(t){return t.toString().replace("object ","")}function Co(){}function Do(t){return function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];if(null===t)throw new Error("Callback was already called.");var i=t;t=null,i.apply(this,r)}}t.LoaderResource=function(){function t(e,r,n){if(this._dequeue=Mo,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof e||"string"!=typeof r)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===r.indexOf("data:")),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Mo,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new xo,this.onProgress=new xo,this.onComplete=new xo,this.onAfterMiddleware=new xo}return t.setExtensionLoadType=function(e,r){Po(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){Po(t._xhrTypeMap,e,r)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var r=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(r)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:void 0===bo&&(bo=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest)),bo&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return!!(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==globalThis.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==globalThis.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{e=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},t.prototype._createSource=function(t,e,r){r||(r=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=r,n},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(Io(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(Io(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(Io(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,r="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(r=e.responseText),0===n&&(r.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2===(n/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var i=new DOMParser;this.data=i.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||r;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";e=e||globalThis.location,wo||(wo=document.createElement("a")),wo.href=t;var r=To(wo.href,{strictMode:!0}),n=!r.port&&""===e.port||r.port===e.port,i=r.protocol?r.protocol+":":"";return r.host===e.hostname&&n&&i===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(t){void 0===t&&(t=this.url);var e="";if(this.isDataUrl){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var n=t.indexOf("?"),i=t.indexOf("#"),o=Math.min(n>-1?n:t.length,i>-1?i:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}(),Eo=t.LoaderResource||(t.LoaderResource={}),(So=Eo.STATUS_FLAGS||(Eo.STATUS_FLAGS={}))[So.NONE=0]="NONE",So[So.DATA_URL=1]="DATA_URL",So[So.COMPLETE=2]="COMPLETE",So[So.LOADING=4]="LOADING",(Ao=Eo.TYPE||(Eo.TYPE={}))[Ao.UNKNOWN=0]="UNKNOWN",Ao[Ao.JSON=1]="JSON",Ao[Ao.XML=2]="XML",Ao[Ao.IMAGE=3]="IMAGE",Ao[Ao.AUDIO=4]="AUDIO",Ao[Ao.VIDEO=5]="VIDEO",Ao[Ao.TEXT=6]="TEXT",(Oo=Eo.LOAD_TYPE||(Eo.LOAD_TYPE={}))[Oo.XHR=1]="XHR",Oo[Oo.IMAGE=2]="IMAGE",Oo[Oo.AUDIO=3]="AUDIO",Oo[Oo.VIDEO=4]="VIDEO",(Ro=Eo.XHR_RESPONSE_TYPE||(Eo.XHR_RESPONSE_TYPE={})).DEFAULT="text",Ro.BUFFER="arraybuffer",Ro.BLOB="blob",Ro.DOCUMENT="document",Ro.JSON="json",Ro.TEXT="text",Eo._loadTypeMap={gif:Eo.LOAD_TYPE.IMAGE,png:Eo.LOAD_TYPE.IMAGE,bmp:Eo.LOAD_TYPE.IMAGE,jpg:Eo.LOAD_TYPE.IMAGE,jpeg:Eo.LOAD_TYPE.IMAGE,tif:Eo.LOAD_TYPE.IMAGE,tiff:Eo.LOAD_TYPE.IMAGE,webp:Eo.LOAD_TYPE.IMAGE,tga:Eo.LOAD_TYPE.IMAGE,avif:Eo.LOAD_TYPE.IMAGE,svg:Eo.LOAD_TYPE.IMAGE,"svg+xml":Eo.LOAD_TYPE.IMAGE,mp3:Eo.LOAD_TYPE.AUDIO,ogg:Eo.LOAD_TYPE.AUDIO,wav:Eo.LOAD_TYPE.AUDIO,mp4:Eo.LOAD_TYPE.VIDEO,webm:Eo.LOAD_TYPE.VIDEO},Eo._xhrTypeMap={xhtml:Eo.XHR_RESPONSE_TYPE.DOCUMENT,html:Eo.XHR_RESPONSE_TYPE.DOCUMENT,htm:Eo.XHR_RESPONSE_TYPE.DOCUMENT,xml:Eo.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Eo.XHR_RESPONSE_TYPE.DOCUMENT,svg:Eo.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Eo.XHR_RESPONSE_TYPE.DOCUMENT,gif:Eo.XHR_RESPONSE_TYPE.BLOB,png:Eo.XHR_RESPONSE_TYPE.BLOB,bmp:Eo.XHR_RESPONSE_TYPE.BLOB,jpg:Eo.XHR_RESPONSE_TYPE.BLOB,jpeg:Eo.XHR_RESPONSE_TYPE.BLOB,tif:Eo.XHR_RESPONSE_TYPE.BLOB,tiff:Eo.XHR_RESPONSE_TYPE.BLOB,webp:Eo.XHR_RESPONSE_TYPE.BLOB,tga:Eo.XHR_RESPONSE_TYPE.BLOB,avif:Eo.XHR_RESPONSE_TYPE.BLOB,json:Eo.XHR_RESPONSE_TYPE.JSON,text:Eo.XHR_RESPONSE_TYPE.TEXT,txt:Eo.XHR_RESPONSE_TYPE.TEXT,ttf:Eo.XHR_RESPONSE_TYPE.BUFFER,otf:Eo.XHR_RESPONSE_TYPE.BUFFER},Eo.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var Fo=function(t,e){this.data=t,this.callback=e},Lo=function(){function t(t,e){var r=this;if(void 0===e&&(e=1),this.workers=0,this.saturated=Co,this.unsaturated=Co,this.empty=Co,this.drain=Co,this.error=Co,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(t,e,n){if(n&&"function"!=typeof n)throw new Error("task callback must be a function");if(r.started=!0,null==t&&r.idle())setTimeout((function(){return r.drain()}),1);else{var i=new Fo(t,"function"==typeof n?n:Co);e?r._tasks.unshift(i):r._tasks.push(i),setTimeout(r.process,1)}},this.process=function(){for(;!r.paused&&r.workers<r.concurrency&&r._tasks.length;){var t=r._tasks.shift();0===r._tasks.length&&r.empty(),r.workers+=1,r.workers===r.concurrency&&r.saturated(),r._worker(t.data,Do(r._next(t)))}},this._worker=t,0===e)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return t.prototype._next=function(t){var e=this;return function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];e.workers-=1,t.callback.apply(t,n),null!=n[0]&&e.error(n[0],t.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},t.prototype.push=function(t,e){this._insert(t,!1,e)},t.prototype.kill=function(){this.workers=0,this.drain=Co,this.started=!1,this._tasks=[]},t.prototype.unshift=function(t,e){this._insert(t,!0,e)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},t.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},t.eachSeries=function(t,e,r,n){var i=0,o=t.length;!function s(a){a||i===o?r&&r(a):n?setTimeout((function(){e(t[i++],s)}),1):e(t[i++],s)}()},t.queue=function(e,r){return new t(e,r)},t}(),No=/(#[\w-]+)?$/,Bo=function(){function e(t,r){var n=this;void 0===t&&(t=""),void 0===r&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return n._loadResource(t,e)},this.resources={},this.baseUrl=t,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return n._loadResource(t,e)},this._queue=Lo.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new xo,this.onError=new xo,this.onLoad=new xo,this.onStart=new xo,this.onComplete=new xo;for(var i=0;i<e._plugins.length;++i){var o=e._plugins[i],s=o.pre,a=o.use;s&&this.pre(s),a&&this.use(a)}this._protected=!1}return e.prototype._add=function(e,r,n,i){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(r=this._prepareUrl(r),this.resources[e]=new t.LoaderResource(e,r,n),"function"==typeof i&&this.resources[e].onAfterMiddleware.once(i),this.loading){for(var o=n.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var u=o.progressChunk*(s.length+1)/(s.length+2);o.children.push(this.resources[e]),o.progressChunk=u;for(a=0;a<s.length;++a)s[a].progressChunk=u;this.resources[e].progressChunk=u}return this._queue.push(this.resources[e]),this},e.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},e.prototype.use=function(t){return this._afterMiddleware.push(t),this},e.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},e.prototype.load=function(t){if(Le("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),"function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),e.prototype._prepareUrl=function(t){var e,r=To(t,{strictMode:!0});if(e=r.protocol||!r.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=No.exec(e)[0];-1!==(e=e.slice(0,e.length-n.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=n}return e},e.prototype._loadResource=function(t,e){var r=this;t._dequeue=e,Lo.eachSeries(this._beforeMiddleware,(function(e,n){e.call(r,t,(function(){n(t.isComplete?{}:null)}))}),(function(){t.isComplete?r._onLoad(t):(t._onLoadBinding=t.onComplete.once(r._onLoad,r),t.load())}),!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Lo.eachSeries(this._afterMiddleware,(function(r,n){r.call(e,t,n)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(r){return Le("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),Ar.add({type:t.ExtensionType.Loader,ref:r}),e},e._plugins=[],e}();Ar.handleByList(t.ExtensionType.Loader,Bo._plugins),Bo.prototype.add=function(t,e,r,n){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"==typeof t&&(r=t,n=e||r.callback||r.onComplete,e=r.url,t=r.name||r.key||r.url),"string"!=typeof e&&(n=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");return"function"==typeof r&&(n=r,r=null),this._add(t,e,r,n)};var Uo=function(){function e(){}return e.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Bo.shared:new Bo},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e.extension=t.ExtensionType.Application,e}(),Go=function(){function e(){}return e.add=function(){t.LoaderResource.setExtensionLoadType("svg",t.LoaderResource.LOAD_TYPE.XHR),t.LoaderResource.setExtensionXhrType("svg",t.LoaderResource.XHR_RESPONSE_TYPE.TEXT)},e.use=function(e,r){if(!e.data||e.type!==t.LoaderResource.TYPE.IMAGE&&"svg"!==e.extension)r();else{var n=e.data,i=e.url,o=e.name,s=e.metadata;en.fromLoader(n,i,o,s).then((function(t){e.texture=t,r()})).catch(r)}},e.extension=t.ExtensionType.Loader,e}(),ko="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Xo(e,r){if(e.data){if(e.xhr&&e.xhrType===t.LoaderResource.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var n=globalThis.URL||globalThis.webkitURL,i=n.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=i,e.type=t.LoaderResource.TYPE.IMAGE,void(e.data.onload=function(){n.revokeObjectURL(i),e.data.onload=null,r()})}}else{var o=e.xhr.getResponseHeader("content-type");if(o&&0===o.indexOf("image"))return e.data=new Image,e.data.src="data:"+o+";base64,"+function(t){for(var e="",r=0;r<t.length;){for(var n=[0,0,0],i=[0,0,0,0],o=0;o<n.length;++o)r<t.length?n[o]=255&t.charCodeAt(r++):n[o]=0;switch(i[0]=n[0]>>2,i[1]=(3&n[0])<<4|n[1]>>4,i[2]=(15&n[1])<<2|n[2]>>6,i[3]=63&n[2],r-(t.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(o=0;o<i.length;++o)e+=ko.charAt(i[o])}return e}(e.xhr.responseText),e.type=t.LoaderResource.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,r()})}r()}else r()}var jo,zo,Ho=function(){function e(){}return e.extension=t.ExtensionType.Loader,e.use=Xo,e}();Ar.add(Go,Ho),t.INTERNAL_FORMATS=void 0,(zo=t.INTERNAL_FORMATS||(t.INTERNAL_FORMATS={}))[zo.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",zo[zo.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",zo[zo.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",zo[zo.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",zo[zo.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",zo[zo.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",zo[zo.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",zo[zo.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",zo[zo.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",zo[zo.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",zo[zo.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",zo[zo.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",zo[zo.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",zo[zo.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",zo[zo.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",zo[zo.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",zo[zo.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",zo[zo.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",zo[zo.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",zo[zo.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",zo[zo.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",zo[zo.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",zo[zo.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",zo[zo.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",zo[zo.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",zo[zo.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",zo[zo.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR";var Yo=((jo={})[t.INTERNAL_FORMATS.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,jo[t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,jo[t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,jo[t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,jo[t.INTERNAL_FORMATS.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,jo[t.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,jo[t.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,jo[t.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,jo[t.INTERNAL_FORMATS.COMPRESSED_R11_EAC]=.5,jo[t.INTERNAL_FORMATS.COMPRESSED_SIGNED_R11_EAC]=.5,jo[t.INTERNAL_FORMATS.COMPRESSED_RG11_EAC]=1,jo[t.INTERNAL_FORMATS.COMPRESSED_SIGNED_RG11_EAC]=1,jo[t.INTERNAL_FORMATS.COMPRESSED_RGB8_ETC2]=.5,jo[t.INTERNAL_FORMATS.COMPRESSED_RGBA8_ETC2_EAC]=1,jo[t.INTERNAL_FORMATS.COMPRESSED_SRGB8_ETC2]=.5,jo[t.INTERNAL_FORMATS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,jo[t.INTERNAL_FORMATS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,jo[t.INTERNAL_FORMATS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,jo[t.INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,jo[t.INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,jo[t.INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,jo[t.INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,jo[t.INTERNAL_FORMATS.COMPRESSED_RGB_ETC1_WEBGL]=.5,jo[t.INTERNAL_FORMATS.COMPRESSED_RGB_ATC_WEBGL]=.5,jo[t.INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,jo[t.INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,jo[t.INTERNAL_FORMATS.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,jo),Vo=function(t,e){return Vo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Vo(t,e)};function Wo(t,e){function r(){this.constructor=t}Vo(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function qo(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))}function Zo(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var Ko,Jo,Qo=function(t){function e(e,r){void 0===r&&(r={width:1,height:1,autoLoad:!0});var n,i,o=this;return"string"==typeof e?(n=e,i=new Uint8Array):(n=null,i=e),(o=t.call(this,i,r)||this).origin=n,o.buffer=i?new Yi(i):null,o.origin&&!1!==r.autoLoad&&o.load(),i&&i.length&&(o.loaded=!0,o.onBlobLoaded(o.buffer.rawBinaryData)),o}return Wo(e,t),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return qo(this,void 0,Promise,(function(){var t;return Zo(this,(function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new Yi(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}}))}))},e}(Nr),$o=function(t){function e(r,n){var i=t.call(this,r,n)||this;return i.format=n.format,i.levels=n.levels||1,i._width=n.width,i._height=n.height,i._extension=e._formatToExtension(i.format),(n.levelBuffers||i.buffer)&&(i._levelBuffers=n.levelBuffers||e._createLevelBuffers(r instanceof Uint8Array?r:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return Wo(e,t),e.prototype.upload=function(t,e,r){var n=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var i=0,o=this.levels;i<o;i++){var s=this._levelBuffers[i],a=s.levelID,u=s.levelWidth,h=s.levelHeight,l=s.levelBuffer;n.compressedTexImage2D(n.TEXTURE_2D,a,this.format,u,h,0,l)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,e,r,n,i,o,s){for(var a=new Array(r),u=t.byteOffset,h=o,l=s,c=h+n-1&~(n-1),f=l+i-1&~(i-1),d=c*f*Yo[e],p=0;p<r;p++)a[p]={levelID:p,levelWidth:r>1?h:c,levelHeight:r>1?l:f,levelBuffer:new Uint8Array(t.buffer,u,d)},u+=d,d=(c=(h=h>>1||1)+n-1&~(n-1))*(f=(l=l>>1||1)+i-1&~(i-1))*Yo[e];return a},e}(Qo),ts=function(){function e(){}return e.use=function(r,n){var i=r.data;if(r.type===t.LoaderResource.TYPE.JSON&&i&&i.cacheID&&i.textures){for(var o=i.textures,s=void 0,a=void 0,u=0,h=o.length;u<h;u++){var l=o[u],c=l.src,f=l.format;if(f||(a=c),e.textureFormats[f]){s=c;break}}if(!(s=s||a))return void n(new Error("Cannot load compressed-textures in "+r.url+", make sure you provide a fallback"));if(s===r.url)return void n(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var d={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},p=se.resolve(r.url.replace(this.baseUrl,""),s),m=i.cacheID;this.add(m,p,d,(function(t){if(t.error)n(t.error);else{var e=t.texture,i=void 0===e?null:e,o=t.textures,s=void 0===o?{}:o;Object.assign(r,{texture:i,textures:s}),n()}}))}else n()},Object.defineProperty(e,"textureExtensions",{get:function(){if(!e._textureExtensions){var t=it.ADAPTER.createCanvas().getContext("webgl");if(!t)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var r={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};e._textureExtensions=r}return e._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(e,"textureFormats",{get:function(){if(!e._textureFormats){var t=e.textureExtensions;for(var r in e._textureFormats={},t){var n=t[r];n&&Object.assign(e._textureFormats,Object.getPrototypeOf(n))}}return e._textureFormats},enumerable:!1,configurable:!0}),e.extension=t.ExtensionType.Loader,e}();function es(e,r,n){var i={textures:{},texture:null};return r?(r.map((function(e){return new en(new Ur(e,Object.assign({mipmap:t.MIPMAP_MODES.OFF,alphaMode:t.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA},n)))})).forEach((function(t,r){var n=t.baseTexture,o=e+"-"+(r+1);Ur.addToCache(n,o),en.addToCache(t,o),0===r&&(Ur.addToCache(n,e),en.addToCache(t,e),i.texture=t),i.textures[o]=t})),i):i}var rs,ns,is=124,os=3,ss=4,as=7,us=19,hs=2,ls=0,cs=1,fs=2,ds=3;!function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(rs||(rs={})),function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(ns||(ns={}));var ps,ms,gs,vs=((Ko={})[827611204]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ko[861165636]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ko[894720068]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ko),_s=((Jo={})[rs.DXGI_FORMAT_BC1_TYPELESS]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,Jo[rs.DXGI_FORMAT_BC1_UNORM]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,Jo[rs.DXGI_FORMAT_BC2_TYPELESS]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,Jo[rs.DXGI_FORMAT_BC2_UNORM]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,Jo[rs.DXGI_FORMAT_BC3_TYPELESS]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,Jo[rs.DXGI_FORMAT_BC3_UNORM]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,Jo[rs.DXGI_FORMAT_BC1_UNORM_SRGB]=t.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Jo[rs.DXGI_FORMAT_BC2_UNORM_SRGB]=t.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Jo[rs.DXGI_FORMAT_BC3_UNORM_SRGB]=t.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Jo);function ys(t){var e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var r=new Uint32Array(t,0,is/Uint32Array.BYTES_PER_ELEMENT),n=r[os],i=r[ss],o=r[as],s=new Uint32Array(t,us*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),a=s[1];if(4&a){var u=s[hs];if(808540228!==u){var h=vs[u],l=new Uint8Array(t,128);return[new $o(l,{format:h,width:i,height:n,levels:o})]}var c=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),f=c[ls],d=c[cs],p=c[fs],m=c[ds],g=_s[f];if(void 0===g)throw new Error("DDSParser cannot parse texture data with DXGI format "+f);if(4===p)throw new Error("DDSParser does not support cubemap textures");if(d===ns.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var v=new Array;if(1===m)v.push(new Uint8Array(t,148));else{for(var _=Yo[g],y=0,b=i,x=n,T=0;T<o;T++){y+=Math.max(1,b+3&-4)*Math.max(1,x+3&-4)*_,b>>>=1,x>>>=1}var E=148;for(T=0;T<m;T++)v.push(new Uint8Array(t,E,y)),E+=y}return v.map((function(t){return new $o(t,{format:g,width:i,height:n,levels:o})}))}if(64&a)throw new Error("DDSParser does not support uncompressed texture data.");if(512&a)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(131072&a)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(2&a)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}var bs=[171,75,84,88,32,49,49,187,13,10,26,10],xs=12,Ts=16,Es=24,Ss=28,As=36,Os=40,Rs=44,ws=48,Ms=52,Ps=56,Is=60,Cs=64,Ds=((ps={})[t.TYPES.UNSIGNED_BYTE]=1,ps[t.TYPES.UNSIGNED_SHORT]=2,ps[t.TYPES.INT]=4,ps[t.TYPES.UNSIGNED_INT]=4,ps[t.TYPES.FLOAT]=4,ps[t.TYPES.HALF_FLOAT]=8,ps),Fs=((ms={})[t.FORMATS.RGBA]=4,ms[t.FORMATS.RGB]=3,ms[t.FORMATS.RG]=2,ms[t.FORMATS.RED]=1,ms[t.FORMATS.LUMINANCE]=1,ms[t.FORMATS.LUMINANCE_ALPHA]=2,ms[t.FORMATS.ALPHA]=1,ms),Ls=((gs={})[t.TYPES.UNSIGNED_SHORT_4_4_4_4]=2,gs[t.TYPES.UNSIGNED_SHORT_5_5_5_1]=2,gs[t.TYPES.UNSIGNED_SHORT_5_6_5]=2,gs);function Ns(e,r,n){void 0===n&&(n=!1);var i=new DataView(r);if(!function(t,e){for(var r=0;r<bs.length;r++)if(e.getUint8(r)!==bs[r])return console.error(t+" is not a valid *.ktx file!"),!1;return!0}(e,i))return null;var o=67305985===i.getUint32(xs,!0),s=i.getUint32(Ts,o),a=i.getUint32(Es,o),u=i.getUint32(Ss,o),h=i.getUint32(As,o),l=i.getUint32(Os,o)||1,c=i.getUint32(Rs,o)||1,f=i.getUint32(ws,o)||1,d=i.getUint32(Ms,o),p=i.getUint32(Ps,o),m=i.getUint32(Is,o);if(0===l||1!==c)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==f)throw new Error("WebGL does not support array textures");var g,v=h+3&-4,_=l+3&-4,y=new Array(f),b=h*l;if(0===s&&(b=v*_),void 0===(g=0!==s?Ds[s]?Ds[s]*Fs[a]:Ls[s]:Yo[u]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var x=n?function(t,e,r){var n=new Map,i=0;for(;i<e;){var o=t.getUint32(Cs+i,r),s=Cs+i+4,a=3-(o+3)%4;if(0===o||o>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var u=0;u<o&&0!==t.getUint8(s+u);u++);if(-1===u){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var h=(new TextDecoder).decode(new Uint8Array(t.buffer,s,u)),l=new DataView(t.buffer,s+u+1,o-u-1);n.set(h,l),i+=4+o+a}return n}(i,m,o):null,T=b*g,E=h,S=l,A=v,O=_,R=Cs+m,w=0;w<p;w++){for(var M=i.getUint32(R,o),P=R+4,I=0;I<f;I++){var C=y[I];C||(C=y[I]=new Array(p)),C[w]={levelID:w,levelWidth:p>1||0!==s?E:A,levelHeight:p>1||0!==s?S:O,levelBuffer:new Uint8Array(r,P,T)},P+=T}R=(R+=M+4)%4!=0?R+4-R%4:R,T=(A=(E=E>>1||1)+4-1&-4)*(O=(S=S>>1||1)+4-1&-4)*g}return 0!==s?{uncompressed:y.map((function(e){var r=e[0].levelBuffer,n=!1;return s===t.TYPES.FLOAT?r=new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4):s===t.TYPES.UNSIGNED_INT?(n=!0,r=new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)):s===t.TYPES.INT&&(n=!0,r=new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)),{resource:new Nr(r,{width:e[0].levelWidth,height:e[0].levelHeight}),type:s,format:n?Bs(a):a}})),kvData:x}:{compressed:y.map((function(t){return new $o(null,{format:u,width:h,height:l,levels:p,levelBuffers:t})})),kvData:x}}function Bs(e){switch(e){case t.FORMATS.RGBA:return t.FORMATS.RGBA_INTEGER;case t.FORMATS.RGB:return t.FORMATS.RGB_INTEGER;case t.FORMATS.RG:return t.FORMATS.RG_INTEGER;case t.FORMATS.RED:return t.FORMATS.RED_INTEGER;default:return e}}t.LoaderResource.setExtensionXhrType("dds",t.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var Us=function(){function e(){}return e.use=function(t,e){if("dds"===t.extension&&t.data)try{Object.assign(t,es(t.name||t.url,ys(t.data),t.metadata))}catch(t){return void e(t)}e()},e.extension=t.ExtensionType.Loader,e}();t.LoaderResource.setExtensionXhrType("ktx",t.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var Gs=function(){function e(){}return e.use=function(e,r){if("ktx"===e.extension&&e.data)try{var n=e.name||e.url,i=Ns(n,e.data,this.loadKeyValueData),o=i.compressed,s=i.uncompressed,a=i.kvData;if(o){var u=es(n,o,e.metadata);if(a&&u.textures)for(var h in u.textures)u.textures[h].baseTexture.ktxKeyValueData=a;Object.assign(e,u)}else if(s){var l={};s.forEach((function(e,r){var i=new en(new Ur(e.resource,{mipmap:t.MIPMAP_MODES.OFF,alphaMode:t.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,type:e.type,format:e.format})),o=n+"-"+(r+1);a&&(i.baseTexture.ktxKeyValueData=a),Ur.addToCache(i.baseTexture,o),en.addToCache(i,o),0===r&&(l[n]=i,Ur.addToCache(i.baseTexture,n),en.addToCache(i,n)),l[o]=i})),Object.assign(e,{textures:l})}}catch(t){return void r(t)}r()},e.extension=t.ExtensionType.Loader,e.loadKeyValueData=!1,e}(),ks=function(t,e){return ks=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},ks(t,e)};function Xs(t,e){function r(){this.constructor=t}ks(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var js,zs,Hs=function(e){function r(r,n,i,o){void 0===r&&(r=1500),void 0===i&&(i=16384),void 0===o&&(o=!1);var s=e.call(this)||this;return i>16384&&(i=16384),s._properties=[!1,!0,!1,!1,!1],s._maxSize=r,s._batchSize=i,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=t.BLEND_MODES.NORMAL,s.autoResize=o,s.roundPixels=!0,s.baseTexture=null,s.setProperties(n),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return Xs(r,e),r.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,ge(t,this.tintRgb)},enumerable:!1,configurable:!0}),r.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},r.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},r.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},r.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},r}(br),Ys=function(){function e(e,r,n){this.geometry=new fn,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<e.length;++i){var o=e[i];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||t.TYPES.FLOAT,offset:o.offset},r[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var e=this.geometry,r=0;this.indexBuffer=new an(Se(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){(a=this.dynamicProperties[n]).offset=r,r+=a.size,this.dynamicStride+=a.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new an(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(n=0;n<this.staticProperties.length;++n){(a=this.staticProperties[n]).offset=o,o+=a.size,this.staticStride+=a.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new an(this.staticData,!0,!1);for(n=0;n<this.dynamicProperties.length;++n){var a=this.dynamicProperties[n];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===t.TYPES.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(n=0;n<this.staticProperties.length;++n){a=this.staticProperties[n];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===t.TYPES.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)}},e.prototype.uploadDynamic=function(e,r,n){for(var i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(e,r,n,o.type===t.TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(e,r,n){for(var i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(e,r,n,o.type===t.TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),Vs=function(e){function r(r){var n=e.call(this,r)||this;return n.shader=null,n.properties=null,n.tempMatrix=new ir,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:t.TYPES.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=ei.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),n.state=ri.for2d(),n}return Xs(r,e),r.prototype.render=function(t){var e=t.children,r=t._maxSize,n=t._batchSize,i=this.renderer,o=e.length;if(0!==o){o>r&&!t.autoResize&&(o=r);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var a=e[0]._texture.baseTexture,u=a.alphaMode>0;this.state.blendMode=be(t.blendMode,u),i.state.set(this.state);var h=i.gl,l=t.worldTransform.copyTo(this.tempMatrix);l.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=l.toArray(!0),this.shader.uniforms.uColor=xe(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,u),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var c=!1,f=0,d=0;f<o;f+=n,d+=1){var p=o-f;p>n&&(p=n),d>=s.length&&s.push(this._generateOneMoreBuffer(t));var m=s[d];m.uploadDynamic(e,f,p);var g=t._bufferUpdateIDs[d]||0;(c=c||m._updateID<g)&&(m._updateID=t._updateID,m.uploadStatic(e,f,p)),i.geometry.bind(m.geometry),h.drawElements(h.TRIANGLES,6*p,h.UNSIGNED_SHORT,0)}}},r.prototype.generateBuffers=function(t){for(var e=[],r=t._maxSize,n=t._batchSize,i=t._properties,o=0;o<r;o+=n)e.push(new Ys(this.properties,i,n));return e},r.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,r=t._properties;return new Ys(this.properties,r,e)},r.prototype.uploadVertices=function(t,e,r,n,i,o){for(var s=0,a=0,u=0,h=0,l=0;l<r;++l){var c=t[e+l],f=c._texture,d=c.scale.x,p=c.scale.y,m=f.trim,g=f.orig;m?(s=(a=m.x-c.anchor.x*g.width)+m.width,u=(h=m.y-c.anchor.y*g.height)+m.height):(s=g.width*(1-c.anchor.x),a=g.width*-c.anchor.x,u=g.height*(1-c.anchor.y),h=g.height*-c.anchor.y),n[o]=a*d,n[o+1]=h*p,n[o+i]=s*d,n[o+i+1]=h*p,n[o+2*i]=s*d,n[o+2*i+1]=u*p,n[o+3*i]=a*d,n[o+3*i+1]=u*p,o+=4*i}},r.prototype.uploadPosition=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].position;n[o]=a.x,n[o+1]=a.y,n[o+i]=a.x,n[o+i+1]=a.y,n[o+2*i]=a.x,n[o+2*i+1]=a.y,n[o+3*i]=a.x,n[o+3*i+1]=a.y,o+=4*i}},r.prototype.uploadRotation=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].rotation;n[o]=a,n[o+i]=a,n[o+2*i]=a,n[o+3*i]=a,o+=4*i}},r.prototype.uploadUvs=function(t,e,r,n,i,o){for(var s=0;s<r;++s){var a=t[e+s]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+i]=a.x1,n[o+i+1]=a.y1,n[o+2*i]=a.x2,n[o+2*i+1]=a.y2,n[o+3*i]=a.x3,n[o+3*i+1]=a.y3,o+=4*i):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0,o+=4*i)}},r.prototype.uploadTint=function(t,e,r,n,i,o){for(var s=0;s<r;++s){var a=t[e+s],u=a._texture.baseTexture.alphaMode>0,h=a.alpha,l=h<1&&u?Te(a._tintRGB,h):a._tintRGB+(255*h<<24);n[o]=l,n[o+i]=l,n[o+2*i]=l,n[o+3*i]=l,o+=4*i}},r.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},r.extension={name:"particle",type:t.ExtensionType.RendererPlugin},r}(xn);t.LINE_JOIN=void 0,(js=t.LINE_JOIN||(t.LINE_JOIN={})).MITER="miter",js.BEVEL="bevel",js.ROUND="round",t.LINE_CAP=void 0,(zs=t.LINE_CAP||(t.LINE_CAP={})).BUTT="butt",zs.ROUND="round",zs.SQUARE="square";var Ws={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},qs=function(){function t(){this.color=16777215,this.alpha=1,this.texture=en.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=en.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),Zs=function(t,e){return Zs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Zs(t,e)};function Ks(t,e){function r(){this.constructor=t}Zs(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function Js(t,e){var r,n;void 0===e&&(e=!1);var i=t.length;if(!(i<6)){for(var o=0,s=0,a=t[i-2],u=t[i-1];s<i;s+=2){var h=t[s],l=t[s+1];o+=(h-a)*(l+u),a=h,u=l}if(!e&&o>0||e&&o<=0){var c=i/2;for(s=c+c%2;s<i;s+=2){var f=i-s-2,d=i-s-1,p=s,m=s+1;r=[t[p],t[f]],t[f]=r[0],t[p]=r[1],n=[t[m],t[d]],t[d]=n[0],t[m]=n[1]}}}}var Qs={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var r=t.points,n=t.holes,i=e.points,o=e.indices;if(r.length>=6){Js(r,!1);for(var s=[],a=0;a<n.length;a++){var u=n[a];Js(u.points,!0),s.push(r.length/2),r=r.concat(u.points)}var h=ut(r,s,2);if(!h)return;var l=i.length/2;for(a=0;a<h.length;a+=3)o.push(h[a]+l),o.push(h[a+1]+l),o.push(h[a+2]+l);for(a=0;a<r.length;a++)i.push(r[a])}}},$s={build:function(e){var r,n,i,o,s,a,u=e.points;if(e.type===t.SHAPES.CIRC){var h=e.shape;r=h.x,n=h.y,s=a=h.radius,i=o=0}else if(e.type===t.SHAPES.ELIP){var l=e.shape;r=l.x,n=l.y,s=l.width,a=l.height,i=o=0}else{var c=e.shape,f=c.width/2,d=c.height/2;r=c.x+f,n=c.y+d,i=f-(s=a=Math.max(0,Math.min(c.radius,Math.min(f,d)))),o=d-a}if(s>=0&&a>=0&&i>=0&&o>=0){var p=Math.ceil(2.3*Math.sqrt(s+a)),m=8*p+(i?4:0)+(o?4:0);if(u.length=m,0!==m){if(0===p)return u.length=8,u[0]=u[6]=r+i,u[1]=u[3]=n+o,u[2]=u[4]=r-i,void(u[5]=u[7]=n-o);var g=0,v=4*p+(i?2:0)+2,_=v,y=m,b=r+(O=i+s),x=r-O,T=n+(R=o);if(u[g++]=b,u[g++]=T,u[--v]=T,u[--v]=x,o){var E=n-R;u[_++]=x,u[_++]=E,u[--y]=E,u[--y]=b}for(var S=1;S<p;S++){var A=Math.PI/2*(S/p);b=r+(O=i+Math.cos(A)*s),x=r-O,T=n+(R=o+Math.sin(A)*a),E=n-R;u[g++]=b,u[g++]=T,u[--v]=T,u[--v]=x,u[_++]=x,u[_++]=E,u[--y]=E,u[--y]=b}var O,R;b=r+(O=i),x=r-O,T=n+(R=o+a),E=n-R;u[g++]=b,u[g++]=T,u[--y]=E,u[--y]=b,i&&(u[g++]=x,u[g++]=T,u[--y]=E,u[--y]=x)}}else u.length=0},triangulate:function(e,r){var n=e.points,i=r.points,o=r.indices;if(0!==n.length){var s,a,u=i.length/2,h=u;if(e.type!==t.SHAPES.RREC){var l=e.shape;s=l.x,a=l.y}else{var c=e.shape;s=c.x+c.width/2,a=c.y+c.height/2}var f=e.matrix;i.push(e.matrix?f.a*s+f.c*a+f.tx:s,e.matrix?f.b*s+f.d*a+f.ty:a),u++,i.push(n[0],n[1]);for(var d=2;d<n.length;d+=2)i.push(n[d],n[d+1]),o.push(u++,h,u);o.push(h+1,h,u)}}},ta={build:function(t){var e=t.shape,r=e.x,n=e.y,i=e.width,o=e.height,s=t.points;s.length=0,s.push(r,n,r+i,n,r+i,n+o,r,n+o)},triangulate:function(t,e){var r=t.points,n=e.points,i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function ea(t,e,r){return t+(e-t)*r}function ra(t,e,r,n,i,o,s){void 0===s&&(s=[]);for(var a=s,u=0,h=0,l=0,c=0,f=0,d=0,p=0,m=0;p<=20;++p)u=ea(t,r,m=p/20),h=ea(e,n,m),l=ea(r,i,m),c=ea(n,o,m),f=ea(u,l,m),d=ea(h,c,m),0===p&&a[a.length-2]===f&&a[a.length-1]===d||a.push(f,d);return a}var na={build:function(t){if(xa.nextRoundedRectBehavior)$s.build(t);else{var e=t.shape,r=t.points,n=e.x,i=e.y,o=e.width,s=e.height,a=Math.max(0,Math.min(e.radius,Math.min(o,s)/2));r.length=0,a?(ra(n,i+a,n,i,n+a,i,r),ra(n+o-a,i,n+o,i,n+o,i+a,r),ra(n+o,i+s-a,n+o,i+s,n+o-a,i+s,r),ra(n+a,i+s,n,i+s,n,i+s-a,r)):r.push(n,i,n+o,i,n+o,i+s,n,i+s)}},triangulate:function(t,e){if(xa.nextRoundedRectBehavior)$s.triangulate(t,e);else{for(var r=t.points,n=e.points,i=e.indices,o=n.length/2,s=ut(r,null,2),a=0,u=s.length;a<u;a+=3)i.push(s[a]+o),i.push(s[a+1]+o),i.push(s[a+2]+o);for(a=0,u=r.length;a<u;a++)n.push(r[a],r[++a])}}};function ia(t,e,r,n,i,o,s,a){var u,h;s?(u=n,h=-r):(u=-n,h=r);var l=t-r*i+u,c=e-n*i+h,f=t+r*o+u,d=e+n*o+h;return a.push(l,c),a.push(f,d),2}function oa(t,e,r,n,i,o,s,a){var u=r-t,h=n-e,l=Math.atan2(u,h),c=Math.atan2(i-t,o-e);a&&l<c?l+=2*Math.PI:!a&&l>c&&(c+=2*Math.PI);var f=l,d=c-l,p=Math.abs(d),m=Math.sqrt(u*u+h*h),g=1+(15*p*Math.sqrt(m)/Math.PI|0),v=d/g;if(f+=v,a){s.push(t,e),s.push(r,n);for(var _=1,y=f;_<g;_++,y+=v)s.push(t,e),s.push(t+Math.sin(y)*m,e+Math.cos(y)*m);s.push(t,e),s.push(i,o)}else{s.push(r,n),s.push(t,e);for(_=1,y=f;_<g;_++,y+=v)s.push(t+Math.sin(y)*m,e+Math.cos(y)*m),s.push(t,e);s.push(i,o),s.push(t,e)}return 2*g}function sa(e,r){e.lineStyle.native?function(e,r){var n=0,i=e.shape,o=e.points||i.points,s=i.type!==t.SHAPES.POLY||i.closeStroke;if(0!==o.length){var a=r.points,u=r.indices,h=o.length/2,l=a.length/2,c=l;for(a.push(o[0],o[1]),n=1;n<h;n++)a.push(o[2*n],o[2*n+1]),u.push(c,c+1),c++;s&&u.push(c,l)}}(e,r):function(e,r){var n=e.shape,i=e.points||n.points.slice(),o=r.closePointEps;if(0!==i.length){var s=e.lineStyle,a=new Ke(i[0],i[1]),u=new Ke(i[i.length-2],i[i.length-1]),h=n.type!==t.SHAPES.POLY||n.closeStroke,l=Math.abs(a.x-u.x)<o&&Math.abs(a.y-u.y)<o;if(h){i=i.slice(),l&&(i.pop(),i.pop(),u.set(i[i.length-2],i[i.length-1]));var c=.5*(a.x+u.x),f=.5*(u.y+a.y);i.unshift(c,f),i.push(c,f)}var d=r.points,p=i.length/2,m=i.length,g=d.length/2,v=s.width/2,_=v*v,y=s.miterLimit*s.miterLimit,b=i[0],x=i[1],T=i[2],E=i[3],S=0,A=0,O=-(x-E),R=b-T,w=0,M=0,P=Math.sqrt(O*O+R*R);O/=P,R/=P,O*=v,R*=v;var I=s.alignment,C=2*(1-I),D=2*I;h||(s.cap===t.LINE_CAP.ROUND?m+=oa(b-O*(C-D)*.5,x-R*(C-D)*.5,b-O*C,x-R*C,b+O*D,x+R*D,d,!0)+2:s.cap===t.LINE_CAP.SQUARE&&(m+=ia(b,x,O,R,C,D,!0,d))),d.push(b-O*C,x-R*C),d.push(b+O*D,x+R*D);for(var F=1;F<p-1;++F){b=i[2*(F-1)],x=i[2*(F-1)+1],T=i[2*F],E=i[2*F+1],S=i[2*(F+1)],A=i[2*(F+1)+1],O=-(x-E),R=b-T,O/=P=Math.sqrt(O*O+R*R),R/=P,O*=v,R*=v,w=-(E-A),M=T-S,w/=P=Math.sqrt(w*w+M*M),M/=P,w*=v,M*=v;var L=T-b,N=x-E,B=T-S,U=A-E,G=L*B+N*U,k=N*B-U*L,X=k<0;if(Math.abs(k)<.001*Math.abs(G))d.push(T-O*C,E-R*C),d.push(T+O*D,E+R*D),G>=0&&(s.join===t.LINE_JOIN.ROUND?m+=oa(T,E,T-O*C,E-R*C,T-w*C,E-M*C,d,!1)+4:m+=2,d.push(T-w*D,E-M*D),d.push(T+w*C,E+M*C));else{var j=(-O+b)*(-R+E)-(-O+T)*(-R+x),z=(-w+S)*(-M+E)-(-w+T)*(-M+A),H=(L*z-B*j)/k,Y=(U*j-N*z)/k,V=(H-T)*(H-T)+(Y-E)*(Y-E),W=T+(H-T)*C,q=E+(Y-E)*C,Z=T-(H-T)*D,K=E-(Y-E)*D,J=X?C:D;V<=Math.min(L*L+N*N,B*B+U*U)+J*J*_?s.join===t.LINE_JOIN.BEVEL||V/_>y?(X?(d.push(W,q),d.push(T+O*D,E+R*D),d.push(W,q),d.push(T+w*D,E+M*D)):(d.push(T-O*C,E-R*C),d.push(Z,K),d.push(T-w*C,E-M*C),d.push(Z,K)),m+=2):s.join===t.LINE_JOIN.ROUND?X?(d.push(W,q),d.push(T+O*D,E+R*D),m+=oa(T,E,T+O*D,E+R*D,T+w*D,E+M*D,d,!0)+4,d.push(W,q),d.push(T+w*D,E+M*D)):(d.push(T-O*C,E-R*C),d.push(Z,K),m+=oa(T,E,T-O*C,E-R*C,T-w*C,E-M*C,d,!1)+4,d.push(T-w*C,E-M*C),d.push(Z,K)):(d.push(W,q),d.push(Z,K)):(d.push(T-O*C,E-R*C),d.push(T+O*D,E+R*D),s.join===t.LINE_JOIN.ROUND?m+=X?oa(T,E,T+O*D,E+R*D,T+w*D,E+M*D,d,!0)+2:oa(T,E,T-O*C,E-R*C,T-w*C,E-M*C,d,!1)+2:s.join===t.LINE_JOIN.MITER&&V/_<=y&&(X?(d.push(Z,K),d.push(Z,K)):(d.push(W,q),d.push(W,q)),m+=2),d.push(T-w*C,E-M*C),d.push(T+w*D,E+M*D),m+=2)}}b=i[2*(p-2)],x=i[2*(p-2)+1],T=i[2*(p-1)],O=-(x-(E=i[2*(p-1)+1])),R=b-T,O/=P=Math.sqrt(O*O+R*R),R/=P,O*=v,R*=v,d.push(T-O*C,E-R*C),d.push(T+O*D,E+R*D),h||(s.cap===t.LINE_CAP.ROUND?m+=oa(T-O*(C-D)*.5,E-R*(C-D)*.5,T-O*C,E-R*C,T+O*D,E+R*D,d,!1)+2:s.cap===t.LINE_CAP.SQUARE&&(m+=ia(T,E,O,R,C,D,!1,d)));var Q=r.indices,$=Ws.epsilon*Ws.epsilon;for(F=g;F<m+g-2;++F)b=d[2*F],x=d[2*F+1],T=d[2*(F+1)],E=d[2*(F+1)+1],S=d[2*(F+2)],A=d[2*(F+2)+1],Math.abs(b*(E-A)+T*(A-x)+S*(x-E))<$||Q.push(F,F+1,F+2)}}(e,r)}var aa,ua=function(){function t(){}return t.curveTo=function(t,e,r,n,i,o){var s=o[o.length-2],a=o[o.length-1]-e,u=s-t,h=n-e,l=r-t,c=Math.abs(a*l-u*h);if(c<1e-8||0===i)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var f=a*a+u*u,d=h*h+l*l,p=a*h+u*l,m=i*Math.sqrt(f)/c,g=i*Math.sqrt(d)/c,v=m*p/f,_=g*p/d,y=m*l+g*u,b=m*h+g*a,x=u*(g+v),T=a*(g+v),E=l*(m+_),S=h*(m+_);return{cx:y+t,cy:b+e,radius:i,startAngle:Math.atan2(T-b,x-y),endAngle:Math.atan2(S-b,E-y),anticlockwise:u*h>l*a}},t.arc=function(t,e,r,n,i,o,s,a,u){for(var h=s-o,l=Ws._segmentsCount(Math.abs(h)*i,40*Math.ceil(Math.abs(h)/We)),c=h/(2*l),f=2*c,d=Math.cos(c),p=Math.sin(c),m=l-1,g=m%1/m,v=0;v<=m;++v){var _=c+o+f*(v+g*v),y=Math.cos(_),b=-Math.sin(_);u.push((d*y+p*b)*i+r,(d*-b+p*y)*i+n)}},t}(),ha=function(){function t(){}return t.curveLength=function(t,e,r,n,i,o,s,a){for(var u=0,h=0,l=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=t,b=e,x=1;x<=10;++x)v=y-(m=(p=(d=(f=1-(h=x/10))*f)*f)*t+3*d*h*r+3*f*(l=h*h)*i+(c=l*h)*s),_=b-(g=p*e+3*d*h*n+3*f*l*o+c*a),y=m,b=g,u+=Math.sqrt(v*v+_*_);return u},t.curveTo=function(e,r,n,i,o,s,a){var u=a[a.length-2],h=a[a.length-1];a.length-=2;var l=Ws._segmentsCount(t.curveLength(u,h,e,r,n,i,o,s)),c=0,f=0,d=0,p=0,m=0;a.push(u,h);for(var g=1,v=0;g<=l;++g)d=(f=(c=1-(v=g/l))*c)*c,m=(p=v*v)*v,a.push(d*u+3*f*v*e+3*c*p*n+m*o,d*h+3*f*v*r+3*c*p*i+m*s)},t}(),la=function(){function t(){}return t.curveLength=function(t,e,r,n,i,o){var s=t-2*r+i,a=e-2*n+o,u=2*r-2*t,h=2*n-2*e,l=4*(s*s+a*a),c=4*(s*u+a*h),f=u*u+h*h,d=2*Math.sqrt(l+c+f),p=Math.sqrt(l),m=2*l*p,g=2*Math.sqrt(f),v=c/p;return(m*d+p*c*(d-g)+(4*f*l-c*c)*Math.log((2*p+v+d)/(v+g)))/(4*m)},t.curveTo=function(e,r,n,i,o){for(var s=o[o.length-2],a=o[o.length-1],u=Ws._segmentsCount(t.curveLength(s,a,e,r,n,i)),h=0,l=0,c=1;c<=u;++c){var f=c/u;h=s+(e-s)*f,l=a+(r-a)*f,o.push(h+(e+(n-e)*f-h)*f,l+(r+(i-r)*f-l)*f)}},t}(),ca=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),fa=((aa={})[t.SHAPES.POLY]=Qs,aa[t.SHAPES.CIRC]=$s,aa[t.SHAPES.ELIP]=$s,aa[t.SHAPES.RECT]=ta,aa[t.SHAPES.RREC]=na,aa),da=[],pa=[],ma=function(){function t(t,e,r,n){void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=n,this.type=t.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),ga=new Ke,va=function(e){function r(){var t=e.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new pr,t.boundsDirty=-1,t}return Ks(r,e),Object.defineProperty(r.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),r.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),pa.push(this.drawCalls[t]);this.drawCalls.length=0;for(t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),da.push(e)}this.batches.length=0},r.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},r.prototype.drawShape=function(t,e,r,n){void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=null);var i=new ma(t,e,r,n);return this.graphicsData.push(i),this.dirty++,this},r.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var r=new ma(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this},r.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},r.prototype.containsPoint=function(t){for(var e=this.graphicsData,r=0;r<e.length;++r){var n=e[r];if(n.fillStyle.visible&&(n.shape&&(n.matrix?n.matrix.applyInverse(t,ga):ga.copyFrom(t),n.shape.contains(ga.x,ga.y)))){var i=!1;if(n.holes)for(var o=0;o<n.holes.length;o++){if(n.holes[o].shape.contains(ga.x,ga.y)){i=!0;break}}if(!i)return!0}}return!1},r.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,r=this.graphicsData,n=null,i=null;this.batches.length>0&&(i=(n=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<r.length;o++){this.shapeIndex++;var s=r[o],a=s.fillStyle,u=s.lineStyle;fa[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix),(a.visible||u.visible)&&this.processHoles(s.holes);for(var h=0;h<2;h++){var l=0===h?a:u;if(l.visible){var c=l.texture.baseTexture,f=this.indices.length,d=this.points.length/2;c.wrapMode=t.WRAP_MODES.REPEAT,0===h?this.processFill(s):this.processLine(s);var p=this.points.length/2-d;0!==p&&(n&&!this._compareStyles(i,l)&&(n.end(f,d),n=null),n||((n=da.pop()||new ca).begin(l,f,d),this.batches.push(n),i=l),this.addUvs(this.points,e,l.texture,d,p,l.matrix))}}}var m=this.indices.length,g=this.points.length/2;if(n&&n.end(m,g),0!==this.batches.length){var v=g>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&v===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=v?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},r.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},r.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var r=this.graphicsData[t],n=r.fillStyle,i=r.lineStyle;if(n&&!n.texture.baseTexture.valid)return!1;if(i&&!i.texture.baseTexture.valid)return!1}return!0},r.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,r=t.length;e<r;e++)for(var n=t[e],i=0;i<n.size;i++){var o=n.start+i;this.indicesUint16[o]=this.indicesUint16[o]-n.attribStart}},r.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*r.BATCHABLE_SIZE},r.prototype.buildDrawCalls=function(){for(var e=++Ur._globalBatch,r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),pa.push(this.drawCalls[r]);this.drawCalls.length=0;var n=this.colors,i=this.textureIds,o=pa.pop();o||((o=new zi).texArray=new Hi),o.texArray.count=0,o.start=0,o.size=0,o.type=t.DRAW_MODES.TRIANGLES;var s=0,a=null,u=0,h=!1,l=t.DRAW_MODES.TRIANGLES,c=0;this.drawCalls.push(o);for(r=0;r<this.batches.length;r++){var f=this.batches[r],d=f.style,p=d.texture.baseTexture;h!==!!d.native&&(l=(h=!!d.native)?t.DRAW_MODES.LINES:t.DRAW_MODES.TRIANGLES,a=null,s=8,e++),a!==p&&(a=p,p._batchEnabled!==e&&(8===s&&(e++,s=0,o.size>0&&((o=pa.pop())||((o=new zi).texArray=new Hi),this.drawCalls.push(o)),o.start=c,o.size=0,o.texArray.count=0,o.type=l),p.touched=1,p._batchEnabled=e,p._batchLocation=s,p.wrapMode=t.WRAP_MODES.REPEAT,o.texArray.elements[o.texArray.count++]=p,s++)),o.size+=f.size,c+=f.size,u=p._batchLocation,this.addColors(n,d.color,d.alpha,f.attribSize,f.attribStart),this.addTextureIds(i,u,f.attribSize,f.attribStart)}Ur._globalBatch=e,this.packAttributes()},r.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,r=this.colors,n=this.textureIds,i=new ArrayBuffer(3*t.length*4),o=new Float32Array(i),s=new Uint32Array(i),a=0,u=0;u<t.length/2;u++)o[a++]=t[2*u],o[a++]=t[2*u+1],o[a++]=e[2*u],o[a++]=e[2*u+1],s[a++]=r[u],o[a++]=n[u];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)},r.prototype.processFill=function(t){t.holes.length?Qs.triangulate(t,this):fa[t.type].triangulate(t,this)},r.prototype.processLine=function(t){sa(t,this);for(var e=0;e<t.holes.length;e++)sa(t.holes[e],this)},r.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var r=t[e];fa[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}},r.prototype.calculateBounds=function(){var t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)},r.prototype.transformPoints=function(t,e){for(var r=0;r<t.length/2;r++){var n=t[2*r],i=t[2*r+1];t[2*r]=e.a*n+e.c*i+e.tx,t[2*r+1]=e.b*n+e.d*i+e.ty}},r.prototype.addColors=function(t,e,r,n,i){void 0===i&&(i=0);var o=Te((e>>16)+(65280&e)+((255&e)<<16),r);t.length=Math.max(t.length,i+n);for(var s=0;s<n;s++)t[i+s]=o},r.prototype.addTextureIds=function(t,e,r,n){void 0===n&&(n=0),t.length=Math.max(t.length,n+r);for(var i=0;i<r;i++)t[n+i]=e},r.prototype.addUvs=function(t,e,r,n,i,o){void 0===o&&(o=null);for(var s=0,a=e.length,u=r.frame;s<i;){var h=t[2*(n+s)],l=t[2*(n+s)+1];if(o){var c=o.a*h+o.c*l+o.tx;l=o.b*h+o.d*l+o.ty,h=c}s++,e.push(h/u.width,l/u.height)}var f=r.baseTexture;(u.width<f.width||u.height<f.height)&&this.adjustUvs(e,r,a,i)},r.prototype.adjustUvs=function(t,e,r,n){for(var i=e.baseTexture,o=1e-6,s=r+2*n,a=e.frame,u=a.width/i.width,h=a.height/i.height,l=a.x/a.width,c=a.y/a.height,f=Math.floor(t[r]+o),d=Math.floor(t[r+1]+o),p=r+2;p<s;p+=2)f=Math.min(f,Math.floor(t[p]+o)),d=Math.min(d,Math.floor(t[p+1]+o));l-=f,c-=d;for(p=r;p<s;p+=2)t[p]=(t[p]+l)*u,t[p+1]=(t[p+1]+c)*h},r.BATCHABLE_SIZE=100,r}(qi),_a=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.width=0,r.alignment=.5,r.native=!1,r.cap=t.LINE_CAP.BUTT,r.join=t.LINE_JOIN.MITER,r.miterLimit=10,r}return Ks(r,e),r.prototype.clone=function(){var t=new r;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},r.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},r}(qs),ya=new Float32Array(3),ba={},xa=function(e){function r(r){void 0===r&&(r=null);var n=e.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new qs,n._lineStyle=new _a,n._matrix=null,n._holeMode=!1,n.state=ri.for2d(),n._geometry=r||new va,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=t.BLEND_MODES.NORMAL,n}return Ks(r,e),Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return this.finishPoly(),new r(this._geometry)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),r.prototype.lineStyle=function(t,e,r,n,i){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===r&&(r=1),void 0===n&&(n=.5),void 0===i&&(i=!1),"number"==typeof t&&(t={width:t,color:e,alpha:r,alignment:n,native:i}),this.lineTextureStyle(t)},r.prototype.lineTextureStyle=function(e){e=Object.assign({width:0,texture:en.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:t.LINE_CAP.BUTT,join:t.LINE_JOIN.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this},r.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new er,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new er,this.currentPath.closeStroke=!1},r.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},r.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},r.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var r=this.currentPath.points,n=r[r.length-2],i=r[r.length-1];return n===t&&i===e||r.push(t,e),this},r.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},r.prototype.quadraticCurveTo=function(t,e,r,n){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),la.curveTo(t,e,r,n,i),this},r.prototype.bezierCurveTo=function(t,e,r,n,i,o){return this._initCurve(),ha.curveTo(t,e,r,n,i,o,this.currentPath.points),this},r.prototype.arcTo=function(t,e,r,n,i){this._initCurve(t,e);var o=this.currentPath.points,s=ua.curveTo(t,e,r,n,i,o);if(s){var a=s.cx,u=s.cy,h=s.radius,l=s.startAngle,c=s.endAngle,f=s.anticlockwise;this.arc(a,u,h,l,c,f)}return this},r.prototype.arc=function(t,e,r,n,i,o){if(void 0===o&&(o=!1),n===i)return this;if(!o&&i<=n?i+=We:o&&n<=i&&(n+=We),0===i-n)return this;var s=t+Math.cos(n)*r,a=e+Math.sin(n)*r,u=this._geometry.closePointEps,h=this.currentPath?this.currentPath.points:null;if(h){var l=Math.abs(h[h.length-2]-s),c=Math.abs(h[h.length-1]-a);l<u&&c<u||h.push(s,a)}else this.moveTo(s,a),h=this.currentPath.points;return ua.arc(s,a,t,e,r,n,i,o,h),this},r.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:en.WHITE,color:t,alpha:e})},r.prototype.beginTextureFill=function(t){t=Object.assign({texture:en.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},r.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},r.prototype.drawRect=function(t,e,r,n){return this.drawShape(new Qe(t,e,r,n))},r.prototype.drawRoundedRect=function(t,e,r,n,i){return this.drawShape(new rr(t,e,r,n,i))},r.prototype.drawCircle=function(t,e,r){return this.drawShape(new $e(t,e,r))},r.prototype.drawEllipse=function(t,e,r,n){return this.drawShape(new tr(t,e,r,n))},r.prototype.drawPolygon=function(){for(var t,e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];var i=!0,o=r[0];o.points?(i=o.closeStroke,t=o.points):t=Array.isArray(r[0])?r[0]:r;var s=new er(t);return s.closeStroke=i,this.drawShape(s),this},r.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},r.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},r.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return!(1!==e.length||e[0].shape.type!==t.SHAPES.RECT||e[0].matrix||e[0].holes.length||e[0].lineStyle.visible&&e[0].lineStyle.width)},r.prototype._render=function(t){this.finishPoly();var e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},r.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(var n=0;n<r;n++){var i=t.batches[n],o=i.style.color,s=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),u={vertexData:s,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*i.start,i.size),uvs:a,_batchRGB:ge(o),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[n]=u}},r.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,r=this.batches.length;e<r;e++){var n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}},r.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),r=this._geometry,n=this.tint,i=this.worldAlpha,o=e.uniforms,s=r.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(n>>16&255)/255*i,o.tint[1]=(n>>8&255)/255*i,o.tint[2]=(255&n)/255*i,o.tint[3]=i,t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(var a=0,u=s.length;a<u;a++)this._renderDrawCallDirect(t,r.drawCalls[a])},r.prototype._renderDrawCallDirect=function(t,e){for(var r=e.texArray,n=e.type,i=e.size,o=e.start,s=r.count,a=0;a<s;a++)t.texture.bind(r.elements[a],a);t.geometry.draw(n,i,o)},r.prototype._resolveDirectShader=function(t){var e=this.shader,r=this.pluginName;if(!e){if(!ba[r]){for(var n=t.plugins[r].MAX_TEXTURES,i=new Int32Array(n),o=0;o<n;o++)i[o]=o;var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new ir,default:gn.from({uSamplers:i},!0)},a=t.plugins[r]._shader.program;ba[r]=new ei(a,s)}e=ba[r]}return e},r.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,r=e.minX,n=e.minY,i=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,r,n,i,o)}},r.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,r._TEMP_POINT),this._geometry.containsPoint(r._TEMP_POINT)},r.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=ge(this.tint,ya),e=0;e<this.batches.length;e++){var r=this.batches[e],n=r._batchRGB,i=(t[0]*n[0]*255<<16)+(t[1]*n[1]*255<<8)+(0|t[2]*n[2]*255);r._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}},r.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,o=e.d,s=e.tx,a=e.ty,u=this._geometry.points,h=this.vertexData,l=0,c=0;c<u.length;c+=2){var f=u[c],d=u[c+1];h[l++]=r*f+i*d+s,h[l++]=o*d+n*f+a}}},r.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},r.prototype.setMatrix=function(t){return this._matrix=t,this},r.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},r.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},r.prototype.destroy=function(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,t)},r.nextRoundedRectBehavior=!1,r._TEMP_POINT=new Ke,r}(br),Ta={buildPoly:Qs,buildCircle:$s,buildRectangle:ta,buildRoundedRectangle:na,buildLine:sa,ArcUtils:ua,BezierUtils:ha,QuadraticUtils:la,BatchPart:ca,FILL_COMMANDS:fa,BATCH_POOL:da,DRAW_CALL_POOL:pa},Ea=function(t,e){return Ea=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Ea(t,e)};var Sa,Aa=new Ke,Oa=new Uint16Array([0,1,2,0,2,3]),Ra=function(e){function r(r){var n=e.call(this)||this;return n._anchor=new nr(n._onAnchorUpdate,n,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=t.BLEND_MODES.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=r||en.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=Oa,n.pluginName="batch",n.isSprite=!0,n._roundPixels=it.ROUND_PIXELS,n}return function(t,e){function r(){this.constructor=t}Ea(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(r,e),r.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ie(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ie(this.scale.y)*this._height/this._texture.orig.height)},r.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},r.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,o=e.d,s=e.tx,a=e.ty,u=this.vertexData,h=t.trim,l=t.orig,c=this._anchor,f=0,d=0,p=0,m=0;if(h?(f=(d=h.x-c._x*l.width)+h.width,p=(m=h.y-c._y*l.height)+h.height):(f=(d=-c._x*l.width)+l.width,p=(m=-c._y*l.height)+l.height),u[0]=r*d+i*m+s,u[1]=o*m+n*d+a,u[2]=r*f+i*m+s,u[3]=o*m+n*f+a,u[4]=r*f+i*p+s,u[5]=o*p+n*f+a,u[6]=r*d+i*p+s,u[7]=o*p+n*d+a,this._roundPixels)for(var g=it.RESOLUTION,v=0;v<u.length;++v)u[v]=Math.round((u[v]*g|0)/g)}},r.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,n=this._anchor,i=this.transform.worldTransform,o=i.a,s=i.b,a=i.c,u=i.d,h=i.tx,l=i.ty,c=-n._x*r.width,f=c+r.width,d=-n._y*r.height,p=d+r.height;e[0]=o*c+a*d+h,e[1]=u*d+s*c+l,e[2]=o*f+a*d+h,e[3]=u*d+s*f+l,e[4]=o*f+a*p+h,e[5]=u*p+s*f+l,e[6]=o*c+a*p+h,e[7]=u*p+s*c+l},r.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},r.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},r.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._localBounds||(this._localBounds=new pr),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Qe),t=this._localBoundsRect),this._localBounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Aa);var e=this._texture.orig.width,r=this._texture.orig.height,n=-e*this.anchor.x,i=0;return Aa.x>=n&&Aa.x<n+e&&(i=-r*this.anchor.y,Aa.y>=i&&Aa.y<i+r)},r.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var r="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!r)}this._texture=null},r.from=function(t,e){return new r(t instanceof en?t:en.from(t,e))},Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Ie(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Ie(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||en.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),r}(br),wa=function(t,e){return wa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},wa(t,e)};t.TEXT_GRADIENT=void 0,(Sa=t.TEXT_GRADIENT||(t.TEXT_GRADIENT={}))[Sa.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",Sa[Sa.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL";var Ma={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:t.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Pa=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ia=function(){function t(t){this.styleID=0,this.reset(),Fa(this,t,t)}return t.prototype.clone=function(){var e={};return Fa(e,this,Ma),new t(e)},t.prototype.reset=function(){Fa(this,Ma,Ma)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=Da(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=Da(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=Da(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var r=e.length-1;r>=0;r--){var n=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&Pa.indexOf(n)<0&&(n='"'+n+'"'),e[r]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function Ca(t){return"number"==typeof t?ve(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function Da(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Ca(t[e]);return t}return Ca(t)}function Fa(t,e,r){for(var n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}var La={willReadFrequently:!0},Na=function(){function t(t,e,r,n,i,o,s,a,u){this.text=t,this.style=e,this.width=r,this.height=n,this.lines=i,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=u}return t.measureText=function(e,r,n,i){void 0===i&&(i=t._canvas),n=n??r.wordWrap;var o=r.toFontString(),s=t.measureFont(o);0===s.fontSize&&(s.fontSize=r.fontSize,s.ascent=r.fontSize);var a=i.getContext("2d",La);a.font=o;for(var u=(n?t.wordWrap(e,r,i):e).split(/(?:\r\n|\r|\n)/),h=new Array(u.length),l=0,c=0;c<u.length;c++){var f=a.measureText(u[c]).width+(u[c].length-1)*r.letterSpacing;h[c]=f,l=Math.max(l,f)}var d=l+r.strokeThickness;r.dropShadow&&(d+=r.dropShadowDistance);var p=r.lineHeight||s.fontSize+r.strokeThickness,m=Math.max(p,s.fontSize+r.strokeThickness)+(u.length-1)*(p+r.leading);return r.dropShadow&&(m+=r.dropShadowDistance),new t(e,r,d,m,u,h,p+r.leading,l,s)},t.wordWrap=function(e,r,n){void 0===n&&(n=t._canvas);for(var i=n.getContext("2d",La),o=0,s="",a="",u=Object.create(null),h=r.letterSpacing,l=r.whiteSpace,c=t.collapseSpaces(l),f=t.collapseNewlines(l),d=!c,p=r.wordWrapWidth+h,m=t.tokenize(e),g=0;g<m.length;g++){var v=m[g];if(t.isNewline(v)){if(!f){a+=t.addLine(s),d=!c,s="",o=0;continue}v=" "}if(c){var _=t.isBreakingSpace(v),y=t.isBreakingSpace(s[s.length-1]);if(_&&y)continue}var b=t.getFromCache(v,h,u,i);if(b>p)if(""!==s&&(a+=t.addLine(s),s="",o=0),t.canBreakWords(v,r.breakWords))for(var x=t.wordWrapSplit(v),T=0;T<x.length;T++){for(var E=x[T],S=1;x[T+S];){var A=x[T+S],O=E[E.length-1];if(t.canBreakChars(O,A,v,T,r.breakWords))break;E+=A,S++}T+=E.length-1;var R=t.getFromCache(E,h,u,i);R+o>p&&(a+=t.addLine(s),d=!1,s="",o=0),s+=E,o+=R}else{s.length>0&&(a+=t.addLine(s),s="",o=0);var w=g===m.length-1;a+=t.addLine(v,!w),d=!1,s="",o=0}else b+o>p&&(d=!1,a+=t.addLine(s),s="",o=0),(s.length>0||!t.isBreakingSpace(v)||d)&&(s+=v,o+=b)}return a+=t.addLine(s,!1)},t.addLine=function(e,r){return void 0===r&&(r=!0),e=t.trimRight(e),e=r?e+"\n":e},t.getFromCache=function(t,e,r,n){var i=r[t];if("number"!=typeof i){var o=t.length*e;i=n.measureText(t).width+o,r[t]=i}return i},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var r=e.length-1;r>=0;r--){var n=e[r];if(!t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,r){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var r=[],n="";if("string"!=typeof e)return r;for(var i=0;i<e.length;i++){var o=e[i],s=e[i+1];t.isBreakingSpace(o,s)||t.isNewline(o)?(""!==n&&(r.push(n),n=""),r.push(o)):n+=o}return""!==n&&r.push(n),r},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,r,n,i){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var r={ascent:0,descent:0,fontSize:0},n=t._canvas,i=t._context;i.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,s=Math.ceil(i.measureText(o).width),a=Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),u=Math.ceil(t.HEIGHT_MULTIPLIER*a);a=a*t.BASELINE_MULTIPLIER|0,n.width=s,n.height=u,i.fillStyle="#f00",i.fillRect(0,0,s,u),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,a);var h=i.getImageData(0,0,s,u).data,l=h.length,c=4*s,f=0,d=0,p=!1;for(f=0;f<a;++f){for(var m=0;m<c;m+=4)if(255!==h[d+m]){p=!0;break}if(p)break;d+=c}for(r.ascent=a-f,d=l-c,p=!1,f=u;f>a;--f){for(m=0;m<c;m+=4)if(255!==h[d+m]){p=!0;break}if(p)break;d-=c}return r.descent=f-a,r.fontSize=r.ascent+r.descent,t._fonts[e]=r,r},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var e=void 0;try{var r=new OffscreenCanvas(0,0),n=r.getContext("2d",La);if(n&&n.measureText)return t.__canvas=r,r;e=it.ADAPTER.createCanvas()}catch(t){e=it.ADAPTER.createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d",La)),t.__context},enumerable:!1,configurable:!0}),t}();Na._fonts={},Na.METRICS_STRING="|q",Na.BASELINE_SYMBOL="M",Na.BASELINE_MULTIPLIER=1.4,Na.HEIGHT_MULTIPLIER=2,Na._newlines=[10,13],Na._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Ba={texture:!0,children:!1,baseTexture:!0},Ua=function(e){function r(t,r,n){var i=this,o=!1;n||(n=it.ADAPTER.createCanvas(),o=!0),n.width=3,n.height=3;var s=en.from(n);return s.orig=new Qe,s.trim=new Qe,(i=e.call(this,s)||this)._ownCanvas=o,i.canvas=n,i.context=n.getContext("2d",{willReadFrequently:!0}),i._resolution=it.RESOLUTION,i._autoResolution=!0,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=t,i.style=r,i.localStyleID=-1,i}return function(t,e){function r(){this.constructor=t}wa(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(r,e),r.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var n,i,o=this.context,s=Na.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=s.width,u=s.height,h=s.lines,l=s.lineHeight,c=s.lineWidths,f=s.maxLineWidth,d=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,u)+2*e.padding)*this._resolution),o.scale(this._resolution,this._resolution),o.clearRect(0,0,this.canvas.width,this.canvas.height),o.font=this._font,o.lineWidth=e.strokeThickness,o.textBaseline=e.textBaseline,o.lineJoin=e.lineJoin,o.miterLimit=e.miterLimit;for(var p=e.dropShadow?2:1,m=0;m<p;++m){var g=e.dropShadow&&0===m,v=g?Math.ceil(Math.max(1,u)+2*e.padding):0,_=v*this._resolution;if(g){o.fillStyle="black",o.strokeStyle="black";var y=e.dropShadowColor,b=ge("number"==typeof y?y:_e(y)),x=e.dropShadowBlur*this._resolution,T=e.dropShadowDistance*this._resolution;o.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+e.dropShadowAlpha+")",o.shadowBlur=x,o.shadowOffsetX=Math.cos(e.dropShadowAngle)*T,o.shadowOffsetY=Math.sin(e.dropShadowAngle)*T+_}else o.fillStyle=this._generateFillStyle(e,h,s),o.strokeStyle=e.stroke,o.shadowColor="black",o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0;var E=(l-d.fontSize)/2;(!r.nextLineHeightBehavior||l-d.fontSize<0)&&(E=0);for(var S=0;S<h.length;S++)n=e.strokeThickness/2,i=e.strokeThickness/2+S*l+d.ascent+E,"right"===e.align?n+=f-c[S]:"center"===e.align&&(n+=(f-c[S])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(h[S],n+e.padding,i+e.padding-v,!0),e.fill&&this.drawLetterSpacing(h[S],n+e.padding,i+e.padding-v)}this.updateTexture()}},r.prototype.drawLetterSpacing=function(t,e,n,i){void 0===i&&(i=!1);var o=this._style.letterSpacing,s=r.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===o||s)return s&&(this.context.letterSpacing=o,this.context.textLetterSpacing=o),void(i?this.context.strokeText(t,e,n):this.context.fillText(t,e,n));for(var a=e,u=Array.from?Array.from(t):t.split(""),h=this.context.measureText(t).width,l=0,c=0;c<u.length;++c){var f=u[c];i?this.context.strokeText(f,a,n):this.context.fillText(f,a,n);for(var d="",p=c+1;p<u.length;++p)d+=u[p];a+=h-(l=this.context.measureText(d).width)+o,h=l}},r.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=ke(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var r=this._texture,n=this._style,i=n.trim?0:n.padding,o=r.baseTexture;r.trim.width=r._frame.width=t.width/this._resolution,r.trim.height=r._frame.height=t.height/this._resolution,r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-2*i,r.orig.height=r._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),r.updateUvs(),this.dirty=!1},r.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,t)},r.prototype.updateTransform=function(){this.updateText(!0),e.prototype.updateTransform.call(this)},r.prototype.getBounds=function(t,r){return this.updateText(!0),-1===this._textureID&&(t=!1),e.prototype.getBounds.call(this,t,r)},r.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},r.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},r.prototype._generateFillStyle=function(e,r,n){var i,o=e.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];var s=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,u=this.canvas.width/this._resolution-s-2*a,h=this.canvas.height/this._resolution-s-2*a,l=o.slice(),c=e.fillGradientStops.slice();if(!c.length)for(var f=l.length+1,d=1;d<f;++d)c.push(d/f);if(l.unshift(o[0]),c.unshift(0),l.push(o[o.length-1]),c.push(1),e.fillGradientType===t.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(u/2,a,u/2,h+a);var p=n.fontProperties.fontSize+e.strokeThickness;for(d=0;d<r.length;d++){var m=n.lineHeight*(d-1)+p,g=n.lineHeight*d,v=g;d>0&&m>g&&(v=(g+m)/2);var _=g+p,y=n.lineHeight*(d+1),b=_;d+1<r.length&&y<_&&(b=(_+y)/2);for(var x=(b-v)/h,T=0;T<l.length;T++){var E=0;E="number"==typeof c[T]?c[T]:T/l.length;var S=Math.min(1,Math.max(0,v/h+E*x));S=Number(S.toFixed(5)),i.addColorStop(S,l[T])}}}else{i=this.context.createLinearGradient(a,h/2,u+a,h/2);var A=l.length+1,O=1;for(d=0;d<l.length;d++){var R=void 0;R="number"==typeof c[d]?c[d]:O/A,i.addColorStop(R,l[d]),O++}}return i},r.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},Ba,t),e.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=Ie(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=Ie(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof Ia?t:new Ia(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),r.nextLineHeightBehavior=!1,r.experimentalLetterSpacing=!1,r}(Ra);it.UPLOADS_PER_FRAME=4;var Ga=function(t,e){return Ga=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Ga(t,e)};var ka=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function Xa(t,e){var r=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof en){var i=t._textures[n].baseTexture;-1===e.indexOf(i)&&(e.push(i),r=!0)}return r}function ja(t,e){if(t.baseTexture instanceof Ur){var r=t.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function za(t,e){if(t._texture&&t._texture instanceof en){var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function Ha(t,e){return e instanceof Ua&&(e.updateText(!0),!0)}function Ya(t,e){if(e instanceof Ia){var r=e.toFontString();return Na.measureFont(r),!0}return!1}function Va(t,e){if(t instanceof Ua){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function Wa(t,e){return t instanceof Ia&&(-1===e.indexOf(t)&&e.push(t),!0)}var qa=function(){function e(t){var e=this;this.limiter=new ka(it.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(Va),this.registerFindHook(Wa),this.registerFindHook(Xa),this.registerFindHook(ja),this.registerFindHook(za),this.registerUploadHook(Ha),this.registerUploadHook(Ya)}return e.prototype.upload=function(e,r){var n=this;return"function"==typeof e&&(r=e,e=null),r&&Le("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise((function(i){e&&n.add(e);var o=function(){null==r||r(),i()};n.queue.length?(n.completes.push(o),n.ticking||(n.ticking=!0,wr.system.addOnce(n.tick,n,t.UPDATE_PRIORITY.UTILITY))):o()}))},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],r=!1;if(e&&!e._destroyed)for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}r||this.queue.shift()}if(this.queue.length)wr.system.addOnce(this.tick,this,t.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(n=0,i=o.length;n<i;n++)o[n]()}},e.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},e.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},e.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof br)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},e.prototype.destroy=function(){this.ticking&&wr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function Za(t,e){return e instanceof Ur&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function Ka(t,e){if(!(e instanceof xa))return!1;var r=e.geometry;e.finishPoly(),r.updateBatches();for(var n=r.batches,i=0;i<n.length;i++){var o=n[i].style.texture;o&&Za(t,o.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function Ja(t,e){return t instanceof xa&&(e.push(t),!0)}var Qa=function(e){function r(t){var r=e.call(this,t)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(Ja),r.registerUploadHook(Za),r.registerUploadHook(Ka),r}return function(t,e){function r(){this.constructor=t}Ga(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(r,e),r.extension={name:"prepare",type:t.ExtensionType.RendererPlugin},r}(qa),$a=function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}(),tu=function(){function t(t,e,r){void 0===r&&(r=null),this.linkedSheets=[],this._texture=t instanceof en?t:null,this.baseTexture=t instanceof Ur?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,r=He(t,null);return null===r&&(r=void 0!==e?parseFloat(e):1),1!==r&&this.baseTexture.setResolution(r),r},t.prototype.parse=function(e){var r=this;return e&&Le("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise((function(n){r._callback=function(t){null==e||e(t),n(t)},r._batchIndex=0,r._frameKeys.length<=t.BATCH_SIZE?(r._processFrames(0),r._processAnimations(),r._parseComplete()):r._nextBatch()}))},t.prototype._processFrames=function(e){for(var r=e,n=t.BATCH_SIZE;r-e<n&&r<this._frameKeys.length;){var i=this._frameKeys[r],o=this._frames[i],s=o.frame;if(s){var a=null,u=null,h=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,l=new Qe(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);a=o.rotated?new Qe(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new Qe(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(u=new Qe(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new en(this.baseTexture,a,l,u,o.rotated?2:0,o.anchor),en.addToCache(this.textures[i],i)}r++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var r=0;r<t[e].length;r++){var n=t[e][r];this.animations[e].push(this.textures[n])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var r in void 0===t&&(t=!1),this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},t.BATCH_SIZE=1e3,t}(),eu=function(){function e(){}return e.use=function(r,n){var i,o,s=this,a=r.name+"_image";if(r.data&&r.type===t.LoaderResource.TYPE.JSON&&r.data.frames&&!s.resources[a]){var u=null===(o=null===(i=r.data)||void 0===i?void 0:i.meta)||void 0===o?void 0:o.related_multi_packs;if(Array.isArray(u))for(var h=function(e){if("string"!=typeof e)return"continue";var n=e.replace(".json",""),i=se.resolve(r.url.replace(s.baseUrl,""),e);if(s.resources[n]||Object.values(s.resources).some((function(t){return se.format(se.parse(t.url))===i})))return"continue";var o={crossOrigin:r.crossOrigin,loadType:t.LoaderResource.LOAD_TYPE.XHR,xhrType:t.LoaderResource.XHR_RESPONSE_TYPE.JSON,parentResource:r,metadata:r.metadata};s.add(n,i,o)},l=0,c=u;l<c.length;l++){h(c[l])}var f={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},d=e.getResourcePath(r,s.baseUrl);s.add(a,d,f,(function(t){if(t.error)n(t.error);else{var e=new tu(t.texture,r.data,r.url);e.parse().then((function(){r.spritesheet=e,r.textures=e.textures,n()}))}}))}else n()},e.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:se.resolve(t.url.replace(e,""),t.data.meta.image)},e.extension=t.ExtensionType.Loader,e}(),ru=function(t,e){return ru=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},ru(t,e)};function nu(t,e){function r(){this.constructor=t}ru(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var iu=new Ke,ou=function(t){function e(e,r,n){void 0===r&&(r=100),void 0===n&&(n=100);var i=t.call(this,e)||this;return i.tileTransform=new dr,i._width=r,i._height=n,i.uvMatrix=i.texture.uvMatrix||new oi(e),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}return nu(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Qe),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,iu);var e=this._width,r=this._height,n=-e*this.anchor._x;if(iu.x>=n&&iu.x<n+e){var i=-r*this.anchor._y;if(iu.y>=i&&iu.y<i+r)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,r){return new e(t instanceof en?t:en.from(t,r),r.width,r.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(Ra),su="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",au=new ir,uu=function(e){function r(t){var r=e.call(this,t)||this;return t.runners.contextChange.add(r),r.quad=new pn,r.state=ri.for2d(),r}return nu(r,e),r.prototype.contextChange=function(){var t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=ei.from(su,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",e),this.shader=t.context.webGLVersion>1?ei.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",e):ei.from(su,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",e)},r.prototype.render=function(e){var r=this.renderer,n=this.quad,i=n.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);var o=e.uvRespectAnchor?e.anchor.x:0,s=e.uvRespectAnchor?e.anchor.y:0;(i=n.uvs)[0]=i[6]=-o,i[1]=i[3]=-s,i[2]=i[4]=1-o,i[5]=i[7]=1-s,n.invalidate();var a=e._texture,u=a.baseTexture,h=u.alphaMode>0,l=e.tileTransform.localTransform,c=e.uvMatrix,f=u.isPowerOfTwo&&a.frame.width===u.width&&a.frame.height===u.height;f&&(u._glTextures[r.CONTEXT_UID]?f=u.wrapMode!==t.WRAP_MODES.CLAMP:u.wrapMode===t.WRAP_MODES.CLAMP&&(u.wrapMode=t.WRAP_MODES.REPEAT));var d=f?this.simpleShader:this.shader,p=a.width,m=a.height,g=e._width,v=e._height;au.set(l.a*p/g,l.b*p/v,l.c*m/g,l.d*m/v,l.tx/g,l.ty/v),au.invert(),f?au.prepend(c.mapCoord):(d.uniforms.uMapCoord=c.mapCoord.toArray(!0),d.uniforms.uClampFrame=c.uClampFrame,d.uniforms.uClampOffset=c.uClampOffset),d.uniforms.uTransform=au.toArray(!0),d.uniforms.uColor=Ee(e.tint,e.worldAlpha,d.uniforms.uColor,h),d.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),d.uniforms.uSampler=a,r.shader.bind(d),r.geometry.bind(n),this.state.blendMode=be(e.blendMode,h),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},r.extension={name:"tilingSprite",type:t.ExtensionType.RendererPlugin},r}(xn),hu=function(t,e){return hu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},hu(t,e)};function lu(t,e){function r(){this.constructor=t}hu(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var cu=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),fu=new Ke,du=new er,pu=function(e){function r(r,n,i,o){void 0===o&&(o=t.DRAW_MODES.TRIANGLES);var s=e.call(this)||this;return s.geometry=r,s.shader=n,s.state=i||ri.for2d(),s.drawMode=o,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=-1,s._transformID=-1,s._roundPixels=it.ROUND_PIXELS,s.batchUvs=null,s}return lu(r,e),Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),r.prototype._render=function(e){var n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===t.DRAW_MODES.TRIANGLES&&n.length<2*r.BATCHABLE_SIZE?this._renderToBatch(e):this._renderDefault(e)},r.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},r.prototype._renderToBatch=function(t){var e=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;var n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)},r.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],e=t.data,r=t._updateID;if(r!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var n=this.transform.worldTransform,i=n.a,o=n.b,s=n.c,a=n.d,u=n.tx,h=n.ty,l=this.vertexData,c=0;c<l.length/2;c++){var f=e[2*c],d=e[2*c+1];l[2*c]=i*f+s*d+u,l[2*c+1]=o*f+a*d+h}if(this._roundPixels){var p=it.RESOLUTION;for(c=0;c<l.length;++c)l[c]=Math.round((l[c]*p|0)/p)}this.vertexDirty=r}},r.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new cu(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},r.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},r.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,fu);for(var e=this.geometry.getBuffer("aVertexPosition").data,r=du.points,n=this.geometry.getIndex().data,i=n.length,o=4===this.drawMode?3:1,s=0;s+2<i;s+=o){var a=2*n[s],u=2*n[s+1],h=2*n[s+2];if(r[0]=e[a],r[1]=e[a+1],r[2]=e[u],r[3]=e[u+1],r[4]=e[h],r[5]=e[h+1],du.contains(fu.x,fu.y))return!0}return!1},r.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},r.BATCHABLE_SIZE=100,r}(br),mu=function(t){function e(e,r){var n=this,i={uSampler:e,alpha:1,uTextureMatrix:ir.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r)).uniforms&&Object.assign(i,r.uniforms),(n=t.call(this,r.program||ti.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i)||this)._colorDirty=!1,n.uvMatrix=new oi(e),n.batchable=void 0===r.program,n.pluginName=r.pluginName,n.tint=r.tint,n.alpha=r.alpha,n}return lu(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Ee(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(ei),gu=function(e){function r(r,n,i){var o=e.call(this)||this,s=new an(r),a=new an(n,!0),u=new an(i,!0,!0);return o.addAttribute("aVertexPosition",s,2,!1,t.TYPES.FLOAT).addAttribute("aTextureCoord",a,2,!1,t.TYPES.FLOAT).addIndex(u),o._updateId=-1,o}return lu(r,e),Object.defineProperty(r.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),r}(fn),vu=function(t,e){return vu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},vu(t,e)};var _u=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},yu=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var n in e){var i=e[n].match(/^[a-z]+/gm)[0],o=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var a in o){var u=o[a].split("="),h=u[0],l=u[1].replace(/"/gm,""),c=parseFloat(l),f=isNaN(c)?l:c;s[h]=f}r[i].push(s)}var d=new _u;return r.info.forEach((function(t){return d.info.push({face:t.face,size:parseInt(t.size,10)})})),r.common.forEach((function(t){return d.common.push({lineHeight:parseInt(t.lineHeight,10)})})),r.page.forEach((function(t){return d.page.push({id:parseInt(t.id,10),file:t.file})})),r.char.forEach((function(t){return d.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),r.kerning.forEach((function(t){return d.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),r.distanceField.forEach((function(t){return d.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType})})),d},t}(),bu=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new _u,r=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),i=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),s=t.getElementsByTagName("kerning"),a=t.getElementsByTagName("distanceField"),u=0;u<r.length;u++)e.info.push({face:r[u].getAttribute("face"),size:parseInt(r[u].getAttribute("size"),10)});for(u=0;u<n.length;u++)e.common.push({lineHeight:parseInt(n[u].getAttribute("lineHeight"),10)});for(u=0;u<i.length;u++)e.page.push({id:parseInt(i[u].getAttribute("id"),10)||0,file:i[u].getAttribute("file")});for(u=0;u<o.length;u++){var h=o[u];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(u=0;u<s.length;u++)e.kerning.push({first:parseInt(s[u].getAttribute("first"),10),second:parseInt(s[u].getAttribute("second"),10),amount:parseInt(s[u].getAttribute("amount"),10)});for(u=0;u<a.length;u++)e.distanceField.push({fieldType:a[u].getAttribute("fieldType"),distanceRange:parseInt(a[u].getAttribute("distanceRange"),10)});return e},t}(),xu=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return bu.test(e)}return!1},t.parse=function(t){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return bu.parse(e)},t}(),Tu=[yu,bu,xu];function Eu(t){for(var e=0;e<Tu.length;e++)if(Tu[e].test(t))return Tu[e];return null}function Su(e,r,n,i,o,s,a){var u=n.text,h=n.fontProperties;r.translate(i,o),r.scale(s,s);var l=a.strokeThickness/2,c=-a.strokeThickness/2;if(r.font=a.toFontString(),r.lineWidth=a.strokeThickness,r.textBaseline=a.textBaseline,r.lineJoin=a.lineJoin,r.miterLimit=a.miterLimit,r.fillStyle=function(e,r,n,i,o,s){var a,u=n.fill;if(!Array.isArray(u))return u;if(1===u.length)return u[0];var h=n.dropShadow?n.dropShadowDistance:0,l=n.padding||0,c=e.width/i-h-2*l,f=e.height/i-h-2*l,d=u.slice(),p=n.fillGradientStops.slice();if(!p.length)for(var m=d.length+1,g=1;g<m;++g)p.push(g/m);if(d.unshift(u[0]),p.unshift(0),d.push(u[u.length-1]),p.push(1),n.fillGradientType===t.TEXT_GRADIENT.LINEAR_VERTICAL){a=r.createLinearGradient(c/2,l,c/2,f+l);var v=0,_=(s.fontProperties.fontSize+n.strokeThickness)/f;for(g=0;g<o.length;g++)for(var y=s.lineHeight*g,b=0;b<d.length;b++){var x=y/f+("number"==typeof p[b]?p[b]:b/d.length)*_,T=Math.max(v,x);T=Math.min(T,1),a.addColorStop(T,d[b]),v=T}}else{a=r.createLinearGradient(l,f/2,c+l,f/2);var E=d.length+1,S=1;for(g=0;g<d.length;g++){var A=void 0;A="number"==typeof p[g]?p[g]:S/E,a.addColorStop(A,d[g]),S++}}return a}(e,r,a,s,[u],n),r.strokeStyle=a.stroke,a.dropShadow){var f=a.dropShadowColor,d=ge("number"==typeof f?f:_e(f)),p=a.dropShadowBlur*s,m=a.dropShadowDistance*s;r.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+a.dropShadowAlpha+")",r.shadowBlur=p,r.shadowOffsetX=Math.cos(a.dropShadowAngle)*m,r.shadowOffsetY=Math.sin(a.dropShadowAngle)*m}else r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;a.stroke&&a.strokeThickness&&r.strokeText(u,l,c+n.lineHeight-h.descent),a.fill&&r.fillText(u,l,c+n.lineHeight-h.descent),r.setTransform(1,0,0,1,0,0),r.fillStyle="rgba(0, 0, 0, 0)"}function Au(t){return Array.from?Array.from(t):t.split("")}function Ou(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var Ru=function(){function e(e,r,n){var i,o,s=e.info[0],a=e.common[0],u=e.page[0],h=e.distanceField[0],l=He(u.file),c={};this._ownsTextures=n,this.font=s.face,this.size=s.size,this.lineHeight=a.lineHeight/l,this.chars={},this.pageTextures=c;for(var f=0;f<e.page.length;f++){var d=e.page[f],p=d.id,m=d.file;c[p]=r instanceof Array?r[f]:r[m],(null==h?void 0:h.fieldType)&&"none"!==h.fieldType&&(c[p].baseTexture.alphaMode=t.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,c[p].baseTexture.mipmap=t.MIPMAP_MODES.OFF)}for(f=0;f<e.char.length;f++){var g=e.char[f],v=(p=g.id,g.page),_=e.char[f],y=_.x,b=_.y,x=_.width,T=_.height,E=_.xoffset,S=_.yoffset,A=_.xadvance;b/=l,x/=l,T/=l,E/=l,S/=l,A/=l;var O=new Qe((y/=l)+c[v].frame.x/l,b+c[v].frame.y/l,x,T);this.chars[p]={xOffset:E,yOffset:S,xAdvance:A,kerning:{},texture:new en(c[v].baseTexture,O),page:v}}for(f=0;f<e.kerning.length;f++){var R=e.kerning[f],w=R.first,M=R.second,P=R.amount;w/=l,M/=l,P/=l,this.chars[M]&&(this.chars[M].kerning[w]=P)}this.distanceFieldRange=null==h?void 0:h.distanceRange,this.distanceFieldType=null!==(o=null===(i=null==h?void 0:h.fieldType)||void 0===i?void 0:i.toLowerCase())&&void 0!==o?o:"none"}return e.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},e.install=function(t,r,n){var i;if(t instanceof _u)i=t;else{var o=Eu(t);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(t)}r instanceof en&&(r=[r]);var s=new e(i,r,n);return e.available[s.font]=s,s},e.uninstall=function(t){var r=e.available[t];if(!r)throw new Error("No font found named '"+t+"'");r.destroy(),delete e.available[t]},e.from=function(t,r,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},e.defaultOptions,n),o=i.chars,s=i.padding,a=i.resolution,u=i.textureWidth,h=i.textureHeight,l=function(t){"string"==typeof t&&(t=[t]);for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),s=i[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,u=s;a<=u;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,Au(i))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(o),c=r instanceof Ia?r:new Ia(r),f=u,d=new _u;d.info[0]={face:c.fontFamily,size:c.fontSize},d.common[0]={lineHeight:c.fontSize};for(var p,m,g,v=0,_=0,y=0,b=[],x=0;x<l.length;x++){p||((p=it.ADAPTER.createCanvas()).width=u,p.height=h,m=p.getContext("2d"),g=new Ur(p,{resolution:a}),b.push(new en(g)),d.page.push({id:b.length-1,file:""}));var T=l[x],E=Na.measureText(T,c,!1,p),S=E.width,A=Math.ceil(E.height),O=Math.ceil(("italic"===c.fontStyle?2:1)*S);if(_>=h-A*a){if(0===_)throw new Error("[BitmapFont] textureHeight "+h+"px is too small (fontFamily: '"+c.fontFamily+"', fontSize: "+c.fontSize+"px, char: '"+T+"')");--x,p=null,m=null,g=null,_=0,v=0,y=0}else if(y=Math.max(A+E.fontProperties.descent,y),O*a+v>=f){if(0===v)throw new Error("[BitmapFont] textureWidth "+u+"px is too small (fontFamily: '"+c.fontFamily+"', fontSize: "+c.fontSize+"px, char: '"+T+"')");--x,_+=y*a,_=Math.ceil(_),v=0,y=0}else{Su(p,m,E,v,_,a,c);var R=Ou(E.text);d.char.push({id:R,page:b.length-1,x:v/a,y:_/a,width:O,height:A,xoffset:0,yoffset:0,xadvance:Math.ceil(S-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),v+=(O+2*s)*a,v=Math.ceil(v)}}if(!(null==n?void 0:n.skipKerning)){x=0;for(var w=l.length;x<w;x++)for(var M=l[x],P=0;P<w;P++){var I=l[P],C=m.measureText(M).width,D=m.measureText(I).width,F=m.measureText(M+I).width-(C+D);F&&d.kerning.push({first:Ou(M),second:Ou(I),amount:F})}}var L=new e(d,b,!0);return void 0!==e.available[t]&&e.uninstall(t),e.available[t]=L,L},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),wu=[],Mu=[],Pu=[],Iu=function(e){function r(t,n){void 0===n&&(n={});var i=e.call(this)||this;i._tint=16777215;var o=Object.assign({},r.styleDefaults,n),s=o.align,a=o.tint,u=o.maxWidth,h=o.letterSpacing,l=o.fontName,c=o.fontSize;if(!Ru.available[l])throw new Error('Missing BitmapFont "'+l+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=s,i._tint=a,i._font=void 0,i._fontName=l,i._fontSize=c,i.text=t,i._maxWidth=u,i._maxLineHeight=0,i._letterSpacing=h,i._anchor=new nr((function(){i.dirty=!0}),i,0,0),i._roundPixels=it.ROUND_PIXELS,i.dirty=!0,i._resolution=it.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}return function(t,e){function r(){this.constructor=t}vu(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(r,e),r.prototype.updateText=function(){for(var e,r=Ru.available[this._fontName],n=this.fontSize,i=n/r.size,o=new Ke,s=[],a=[],u=[],h=Au(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),l=this._maxWidth*r.size/n,c="none"===r.distanceFieldType?wu:Mu,f=null,d=0,p=0,m=0,g=-1,v=0,_=0,y=0,b=0,x=0;x<h.length;x++){var T=Ou(j=h[x]);if(/(?:\s)/.test(j)&&(g=x,v=d,b++),"\r"!==j&&"\n"!==j){var E=r.chars[T];if(E){f&&E.kerning[f]&&(o.x+=E.kerning[f]);var S=Pu.pop()||{texture:en.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Ke};S.texture=E.texture,S.line=m,S.charCode=T,S.position.x=o.x+E.xOffset+this._letterSpacing/2,S.position.y=o.y+E.yOffset,S.prevSpaces=b,s.push(S),d=S.position.x+Math.max(E.xAdvance-E.xOffset,E.texture.orig.width),o.x+=E.xAdvance+this._letterSpacing,y=Math.max(y,E.yOffset+E.texture.height),f=T,-1!==g&&l>0&&o.x>l&&(Pe(s,1+g-++_,1+x-g),x=g,g=-1,a.push(v),u.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,v),m++,o.x=0,o.y+=r.lineHeight,f=null,b=0)}}else a.push(d),u.push(-1),p=Math.max(p,d),++m,++_,o.x=0,o.y+=r.lineHeight,f=null,b=0}var A=h[h.length-1];"\r"!==A&&"\n"!==A&&(/(?:\s)/.test(A)&&(d=v),a.push(d),p=Math.max(p,d),u.push(-1));var O=[];for(x=0;x<=m;x++){var R=0;"right"===this._align?R=p-a[x]:"center"===this._align?R=(p-a[x])/2:"justify"===this._align&&(R=u[x]<0?0:(p-a[x])/u[x]),O.push(R)}var w=s.length,M={},P=[],I=this._activePagesMeshData;c.push.apply(c,I);for(x=0;x<w;x++){var C=(H=s[x].texture).baseTexture.uid;if(!M[C]){if(!(J=c.pop())){var D=new gu,F=void 0,L=void 0;"none"===r.distanceFieldType?(F=new mu(en.EMPTY),L=t.BLEND_MODES.NORMAL):(F=new mu(en.EMPTY,{program:ti.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),L=t.BLEND_MODES.NORMAL_NPM);var N=new pu(D,F);N.blendMode=L,J={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:N,vertices:null,uvs:null,indices:null}}J.index=0,J.indexCount=0,J.vertexCount=0,J.uvsCount=0,J.total=0;var B=this._textureCache;B[C]=B[C]||new en(H.baseTexture),J.mesh.texture=B[C],J.mesh.tint=this._tint,P.push(J),M[C]=J}M[C].total++}for(x=0;x<I.length;x++)-1===P.indexOf(I[x])&&this.removeChild(I[x].mesh);for(x=0;x<P.length;x++)P[x].mesh.parent!==this&&this.addChild(P[x].mesh);for(var x in this._activePagesMeshData=P,M){var U=(J=M[x]).total;if(!((null===(e=J.indices)||void 0===e?void 0:e.length)>6*U)||J.vertices.length<2*pu.BATCHABLE_SIZE)J.vertices=new Float32Array(8*U),J.uvs=new Float32Array(8*U),J.indices=new Uint16Array(6*U);else for(var G=J.total,k=J.vertices,X=4*G*2;X<k.length;X++)k[X]=0;J.mesh.size=6*U}for(x=0;x<w;x++){var j,z=(j=s[x]).position.x+O[j.line]*("justify"===this._align?j.prevSpaces:1);this._roundPixels&&(z=Math.round(z));var H,Y=z*i,V=j.position.y*i,W=M[(H=j.texture).baseTexture.uid],q=H.frame,Z=H._uvs,K=W.index++;W.indices[6*K+0]=0+4*K,W.indices[6*K+1]=1+4*K,W.indices[6*K+2]=2+4*K,W.indices[6*K+3]=0+4*K,W.indices[6*K+4]=2+4*K,W.indices[6*K+5]=3+4*K,W.vertices[8*K+0]=Y,W.vertices[8*K+1]=V,W.vertices[8*K+2]=Y+q.width*i,W.vertices[8*K+3]=V,W.vertices[8*K+4]=Y+q.width*i,W.vertices[8*K+5]=V+q.height*i,W.vertices[8*K+6]=Y,W.vertices[8*K+7]=V+q.height*i,W.uvs[8*K+0]=Z.x0,W.uvs[8*K+1]=Z.y0,W.uvs[8*K+2]=Z.x1,W.uvs[8*K+3]=Z.y1,W.uvs[8*K+4]=Z.x2,W.uvs[8*K+5]=Z.y2,W.uvs[8*K+6]=Z.x3,W.uvs[8*K+7]=Z.y3}for(var x in this._textWidth=p*i,this._textHeight=(o.y+r.lineHeight)*i,M){var J=M[x];if(0!==this.anchor.x||0!==this.anchor.y)for(var Q=0,$=this._textWidth*this.anchor.x,tt=this._textHeight*this.anchor.y,et=0;et<J.total;et++)J.vertices[Q++]-=$,J.vertices[Q++]-=tt,J.vertices[Q++]-=$,J.vertices[Q++]-=tt,J.vertices[Q++]-=$,J.vertices[Q++]-=tt,J.vertices[Q++]-=$,J.vertices[Q++]-=tt;this._maxLineHeight=y*i;var rt=J.mesh.geometry.getBuffer("aVertexPosition"),nt=J.mesh.geometry.getBuffer("aTextureCoord"),it=J.mesh.geometry.getIndex();rt.data=J.vertices,nt.data=J.uvs,it.data=J.indices,rt.update(),nt.update(),it.update()}for(x=0;x<s.length;x++)Pu.push(s[x]);this._font=r,this.dirty=!1},r.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},r.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);var r=Ru.available[this._fontName],n=r.distanceFieldRange,i=r.distanceFieldType,o=r.size;if("none"!==i)for(var s=this.worldTransform,a=s.a,u=s.b,h=s.c,l=s.d,c=Math.sqrt(a*a+u*u),f=Math.sqrt(h*h+l*l),d=(Math.abs(c)+Math.abs(f))/2,p=this.fontSize/o,m=0,g=this._activePagesMeshData;m<g.length;m++){g[m].mesh.shader.uniforms.uFWidth=d*n*p*this._resolution}e.prototype._render.call(this,t)},r.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},r.prototype.validate=function(){var t=Ru.available[this._fontName];if(!t)throw new Error('Missing BitmapFont "'+this._fontName+'"');this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Ru.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){var t;return null!==(t=this._fontSize)&&void 0!==t?t:Ru.available[this._fontName].size},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),r.prototype.destroy=function(t){var r=this._textureCache,n="none"===Ru.available[this._fontName].distanceFieldType?wu:Mu;n.push.apply(n,this._activePagesMeshData);for(var i=0,o=this._activePagesMeshData;i<o.length;i++){var s=o[i];this.removeChild(s.mesh)}for(var a in this._activePagesMeshData=[],n.filter((function(t){return r[t.mesh.texture.baseTexture.uid]})).forEach((function(t){t.mesh.texture=en.EMPTY})),r){r[a].destroy(),delete r[a]}this._font=null,this._textureCache=null,e.prototype.destroy.call(this,t)},r.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},r}(br),Cu=function(){function e(){}return e.add=function(){t.LoaderResource.setExtensionXhrType("fnt",t.LoaderResource.XHR_RESPONSE_TYPE.TEXT)},e.use=function(r,n){var i=Eu(r.data);if(i)for(var o=e.getBaseUrl(this,r),s=i.parse(r.data),a={},u=function(t){a[t.metadata.pageFile]=t.texture,Object.keys(a).length===s.page.length&&(r.bitmapFont=Ru.install(s,a,!0),n())},h=0;h<s.page.length;++h){var l=s.page[h].file,c=o+l,f=!1;for(var d in this.resources){var p=this.resources[d];if(p.url===c){p.metadata.pageFile=l,p.texture?u(p):p.onAfterMiddleware.add(u),f=!0;break}}if(!f){var m={crossOrigin:r.crossOrigin,loadType:t.LoaderResource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},r.metadata.imageMetadata),parentResource:r};this.add(c,m,u)}}else n()},e.getBaseUrl=function(t,r){var n=r.isDataUrl?"":e.dirname(r.url);return r.isDataUrl&&("."===n&&(n=""),t.baseUrl&&n&&"/"===t.baseUrl.charAt(t.baseUrl.length-1)&&(n+="/")),(n=n.replace(t.baseUrl,""))&&"/"!==n.charAt(n.length-1)&&(n+="/"),n},e.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},e.extension=t.ExtensionType.Loader,e}(),Du=function(t,e){return Du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Du(t,e)};var Fu=function(t){function e(e){void 0===e&&(e=1);var r=t.call(this,ki,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return r.alpha=e,r}return function(t,e){function r(){this.constructor=t}Du(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(ni),Lu=function(t,e){return Lu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Lu(t,e)};function Nu(t,e){function r(){this.constructor=t}Lu(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Bu={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Uu=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");var Gu=function(e){function r(t,r,n,i,o){void 0===r&&(r=8),void 0===n&&(n=4),void 0===i&&(i=it.FILTER_RESOLUTION),void 0===o&&(o=5);var s=this,a=function(t,e){var r,n=Math.ceil(t/2),i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";r=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var a=r.replace("%index%",s.toString());o+=a=a.replace("%sampleIndex%",s-(n-1)+".0"),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",t.toString())}(o,t),u=function(t){for(var e,r=Bu[t],n=r.length,i=Uu,o="",s=0;s<t;s++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s.toString());e=s,s>=n&&(e=t-s-1),o+=a=a.replace("%value%",r[e].toString()),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",t.toString())}(o);return(s=e.call(this,a,u)||this).horizontal=t,s.resolution=i,s._quality=0,s.quality=n,s.blur=r,s}return Nu(r,e),r.prototype.apply=function(e,r,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/r.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,r,n,i);else{var o=e.getFilterTexture(),s=e.renderer,a=r,u=o;this.state.blend=!1,e.applyFilter(this,a,u,t.CLEAR_MODES.CLEAR);for(var h=1;h<this.passes-1;h++){e.bindAndClear(a,t.CLEAR_MODES.BLIT),this.uniforms.uSampler=u;var l=u;u=a,a=l,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,u,n,i),e.returnFilterTexture(o)}},Object.defineProperty(r.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),r}(ni),ku=function(e){function r(t,r,n,i){void 0===t&&(t=8),void 0===r&&(r=4),void 0===n&&(n=it.FILTER_RESOLUTION),void 0===i&&(i=5);var o=e.call(this)||this;return o.blurXFilter=new Gu(!0,t,r,n,i),o.blurYFilter=new Gu(!1,t,r,n,i),o.resolution=n,o.quality=r,o.blur=t,o.repeatEdgePixels=!1,o}return Nu(r,e),r.prototype.apply=function(e,r,n,i){var o=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(o&&s){var a=e.getFilterTexture();this.blurXFilter.apply(e,r,a,t.CLEAR_MODES.CLEAR),this.blurYFilter.apply(e,a,n,i),e.returnFilterTexture(a)}else s?this.blurYFilter.apply(e,r,n,i):this.blurXFilter.apply(e,r,n,i)},r.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(r.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),r}(ni),Xu=function(t,e){return Xu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Xu(t,e)};var ju=function(t){function e(){var e=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,Xi,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",r)||this).alpha=1,e}return function(t,e){function r(){this.constructor=t}Xu(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},e.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.tint=function(t,e){var r=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),n=Math.sin(t),i=1/3,o=(0,Math.sqrt)(i),s=[r+(1-r)*i,i*(1-r)-o*n,i*(1-r)+o*n,0,0,i*(1-r)+o*n,r+i*(1-r),i*(1-r)-o*n,0,0,i*(1-r)-o*n,i*(1-r)+o*n,r+i*(1-r),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var r=(t||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var r=2*t/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,r,n,i){var o=((r=r||16770432)>>16&255)/255,s=(r>>8&255)/255,a=(255&r)/255,u=((n=n||3375104)>>16&255)/255,h=(n>>8&255)/255,l=(255&n)/255,c=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,u,h,l,e=e||.15,0,o-u,s-h,a-l,0,0];this._loadMatrix(c,i)},e.prototype.night=function(t,e){var r=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(ni);ju.prototype.grayscale=ju.prototype.greyscale;var zu=function(t,e){return zu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},zu(t,e)};var Hu=function(t){function e(e,r){var n=this,i=new ir;return e.renderable=!1,(n=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,n.maskMatrix=i,null==r&&(r=20),n.scale=new Ke(r,r),n}return function(t,e){function r(){this.constructor=t}zu(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.apply=function(t,e,r,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),s=Math.sqrt(i.c*i.c+i.d*i.d);0!==o&&0!==s&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/s,this.uniforms.rotation[3]=i.d/s),t.applyFilter(this,e,r,n)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(ni),Yu=function(t,e){return Yu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Yu(t,e)};var Vu=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function r(){this.constructor=t}Yu(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(ni),Wu=function(t,e){return Wu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Wu(t,e)};var qu=function(t){function e(e,r){void 0===e&&(e=.5),void 0===r&&(r=Math.random());var n=t.call(this,Xi,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return n.noise=e,n.seed=r,n}return function(t,e){function r(){this.constructor=t}Wu(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(ni),Zu=new ir;vr.prototype._cacheAsBitmap=!1,vr.prototype._cacheData=null,vr.prototype._cacheAsBitmapResolution=null,vr.prototype._cacheAsBitmapMultisample=t.MSAA_QUALITY.NONE;var Ku=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(vr.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Ku),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),vr.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},vr.prototype._initCachedDisplayObject=function(t){var e;if(!this._cacheData||!this._cacheData.sprite){var r=this.alpha;this.alpha=1,t.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var i=this.filters[0].padding;n.pad(i)}n.ceil(it.RESOLUTION);var o=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),a=t.renderTexture.destinationFrame.clone(),u=t.projection.transform,h=rn.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:null!==(e=this.cacheAsBitmapMultisample)&&void 0!==e?e:t.multisample}),l="cacheAsBitmap_"+De();this._cacheData.textureCacheId=l,Ur.addToCache(h.baseTexture,l),en.addToCache(h,l);var c=this.transform.localTransform.copyTo(Zu).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:h,clear:!0,transform:c,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=u,t.renderTexture.bind(o,s,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var f=new Ra(h);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-n.x/n.width,f.anchor.y=-n.y/n.height,f.alpha=r,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=f.containsPoint.bind(f)}},vr.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},vr.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var n=t.context,i=t._projTransform;e.ceil(it.RESOLUTION);var o=rn.create({width:e.width,height:e.height}),s="cacheAsBitmap_"+De();this._cacheData.textureCacheId=s,Ur.addToCache(o.baseTexture,s),en.addToCache(o,s);var a=Zu;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:a,skipUpdateTransform:!1}),t.context=n,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var u=new Ra(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-e.x/e.width,u.anchor.y=-e.y/e.height,u.alpha=r,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},vr.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},vr.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},vr.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Ur.removeFromCache(this._cacheData.textureCacheId),en.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},vr.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},vr.prototype.name=null,br.prototype.getChildByName=function(t,e){for(var r=0,n=this.children.length;r<n;r++)if(this.children[r].name===t)return this.children[r];if(e)for(r=0,n=this.children.length;r<n;r++){var i=this.children[r];if(i.getChildByName){var o=i.getChildByName(t,!0);if(o)return o}}return null},vr.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new Ke),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var Ju=function(){function e(){}return e.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,r;if(e.cancelResize(),e._resizeTo===globalThis.window)t=globalThis.innerWidth,r=globalThis.innerHeight;else{var n=e._resizeTo;t=n.clientWidth,r=n.clientHeight}e.renderer.resize(t,r)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},e.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e.extension=t.ExtensionType.Application,e}(),Qu=function(){function e(t){var r=this;this.stage=new br,t=Object.assign({forceCanvas:!1},t),this.renderer=Gi(t),e._plugins.forEach((function(e){e.init.call(r,t)}))}return e.registerPlugin=function(e){Le("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),Ar.add({type:t.ExtensionType.Application,ref:e})},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,r){var n=this,i=e._plugins.slice(0);i.reverse(),i.forEach((function(t){t.destroy.call(n)})),this.stage.destroy(r),this.stage=null,this.renderer.destroy(t),this.renderer=null},e._plugins=[],e}();Ar.handleByList(t.ExtensionType.Application,Qu._plugins),Ar.add(Ju);var $u=function(t,e){return $u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},$u(t,e)};function th(t,e){function r(){this.constructor=t}$u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var eh=function(t){function e(e,r,n,i){void 0===e&&(e=100),void 0===r&&(r=100),void 0===n&&(n=10),void 0===i&&(i=10);var o=t.call(this)||this;return o.segWidth=n,o.segHeight=i,o.width=e,o.height=r,o.build(),o}return th(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],r=[],n=[],i=this.segWidth-1,o=this.segHeight-1,s=this.width/i,a=this.height/o,u=0;u<t;u++){var h=u%this.segWidth,l=u/this.segWidth|0;e.push(h*s,l*a),r.push(h/i,l/o)}var c=i*o;for(u=0;u<c;u++){var f=u%i,d=u/i|0,p=d*this.segWidth+f,m=d*this.segWidth+f+1,g=(d+1)*this.segWidth+f,v=(d+1)*this.segWidth+f+1;n.push(p,m,g,m,v,g)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(gu),rh=function(t){function e(e,r,n){void 0===e&&(e=200),void 0===n&&(n=0);var i=t.call(this,new Float32Array(4*r.length),new Float32Array(4*r.length),new Uint16Array(6*(r.length-1)))||this;return i.points=r,i._width=e,i.textureScale=n,i.build(),i}return th(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),n=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),r.data=new Float32Array(4*t.length),n.data=new Uint16Array(6*(t.length-1)));var i=r.data,o=n.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;for(var s=0,a=t[0],u=this._width*this.textureScale,h=t.length,l=0;l<h;l++){var c=4*l;if(this.textureScale>0){var f=a.x-t[l].x,d=a.y-t[l].y,p=Math.sqrt(f*f+d*d);a=t[l],s+=p/u}else s=l/(h-1);i[c]=s,i[c+1]=0,i[c+2]=s,i[c+3]=1}var m=0;for(l=0;l<h-1;l++){c=2*l;o[m++]=c,o[m++]=c+1,o[m++]=c+2,o[m++]=c+2,o[m++]=c+1,o[m++]=c+3}r.update(),n.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,r=t[0],n=0,i=0,o=this.buffers[0].data,s=t.length,a=0;a<s;a++){var u=t[a],h=4*a;i=-((e=a<t.length-1?t[a+1]:u).x-r.x),n=e.y-r.y;var l=Math.sqrt(n*n+i*i),c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;n/=l,i/=l,n*=c,i*=c,o[h]=u.x+n,o[h+1]=u.y+i,o[h+2]=u.x-n,o[h+3]=u.y-i,r=u}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(gu),nh=function(e){function r(r,n,i){void 0===i&&(i=0);var o=this,s=new rh(r.height,n,i),a=new mu(r);return i>0&&(r.baseTexture.wrapMode=t.WRAP_MODES.REPEAT),(o=e.call(this,s,a)||this).autoUpdate=!0,o}return th(r,e),r.prototype._render=function(t){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),e.prototype._render.call(this,t)},r}(pu),ih=function(t){function e(e,r,n){var i=this,o=new eh(e.width,e.height,r,n),s=new mu(en.WHITE);return(i=t.call(this,o,s)||this).texture=e,i.autoResize=!0,i}return th(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,e=this.shader.texture,r=e.width,n=e.height;!this.autoResize||t.width===r&&t.height===n||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(pu),oh=function(t){function e(e,r,n,i,o){void 0===e&&(e=en.EMPTY);var s=this,a=new gu(r,n,i);a.getBuffer("aVertexPosition").static=!1;var u=new mu(e);return(s=t.call(this,a,u,null,o)||this).autoUpdate=!0,s}return th(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(pu),sh=function(t){function e(e,r,n,i,o){void 0===r&&(r=10),void 0===n&&(n=10),void 0===i&&(i=10),void 0===o&&(o=10);var s=t.call(this,en.WHITE,4,4)||this;return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=r,s._rightWidth=i,s._topHeight=n,s._bottomHeight=o,s.texture=e,s}return th(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,r=this._topHeight+this._bottomHeight,n=this._height>r?1:this._height/r;return Math.min(e,n)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var r=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(ih),ah=function(t,e){return ah=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},ah(t,e)};var uh=function(e){function r(t,r){void 0===r&&(r=!0);var n=e.call(this,t[0]instanceof en?t[0]:t[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=r,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=t,n}return function(t,e){function r(){this.constructor=t}ah(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(r,e),r.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(wr.shared.remove(this.update,this),this._isConnectedToTicker=!1))},r.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(wr.shared.add(this.update,this,t.UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))},r.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},r.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},r.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}},r.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},r.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},r.fromFrames=function(t){for(var e=[],n=0;n<t.length;++n)e.push(en.from(t[n]));return new r(e)},r.fromImages=function(t){for(var e=[],n=0;n<t.length;++n)e.push(en.from(t[n]));return new r(e)},Object.defineProperty(r.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof en)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(wr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(wr.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),r}(Ra);Ar.add(so,vo,mo,Vs,Qa,Qi,uu,Cu,ts,Us,Gs,eu,Mr,Uo);var hh={AlphaFilter:Fu,BlurFilter:ku,BlurFilterPass:Gu,ColorMatrixFilter:ju,DisplacementFilter:Hu,FXAAFilter:Vu,NoiseFilter:qu};return t.AbstractBatchRenderer=Vi,t.AbstractMultiResource=Gr,t.AbstractRenderer=Li,t.AccessibilityManager=so,t.AnimatedSprite=uh,t.AppLoaderPlugin=Uo,t.Application=Qu,t.ArrayResource=kr,t.Attribute=on,t.BaseImageResource=Xr,t.BasePrepare=qa,t.BaseRenderTexture=Jr,t.BaseTexture=Ur,t.BatchDrawCall=zi,t.BatchGeometry=qi,t.BatchPluginFactory=Ji,t.BatchRenderer=Qi,t.BatchShaderGenerator=Wi,t.BatchSystem=Tn,t.BatchTextureArray=Hi,t.BitmapFont=Ru,t.BitmapFontData=_u,t.BitmapFontLoader=Cu,t.BitmapText=Iu,t.BlobResource=Qo,t.Bounds=pr,t.BrowserAdapter=k,t.Buffer=an,t.BufferResource=Nr,t.CanvasResource=jr,t.Circle=$e,t.CompressedTextureLoader=ts,t.CompressedTextureResource=$o,t.Container=br,t.ContextSystem=Sn,t.CountLimiter=ka,t.CubeResource=zr,t.DDSLoader=Us,t.DEG_TO_RAD=Ze,t.DisplayObject=vr,t.Ellipse=tr,t.Extract=vo,t.FORMATS_TO_COMPONENTS=Fs,t.FillStyle=qs,t.Filter=ni,t.FilterState=vn,t.FilterSystem=bn,t.Framebuffer=Kr,t.FramebufferSystem=Rn,t.GLFramebuffer=An,t.GLProgram=Si,t.GLTexture=Ii,t.GRAPHICS_CURVES=Ws,t.Geometry=fn,t.GeometrySystem=Mn,t.Graphics=xa,t.GraphicsData=ma,t.GraphicsGeometry=va,t.IGLUniformData=Ei,t.INSTALLED=Pr,t.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL=Yo,t.ImageBitmapResource=Wr,t.ImageResource=Hr,t.InteractionData=ao,t.InteractionEvent=ho,t.InteractionManager=mo,t.InteractionTrackingData=lo,t.KTXLoader=Gs,t.LineStyle=_a,t.Loader=Bo,t.MaskData=Pn,t.MaskSystem=ai,t.Matrix=ir,t.Mesh=pu,t.MeshBatchUvs=cu,t.MeshGeometry=gu,t.MeshMaterial=mu,t.NineSlicePlane=sh,t.ObjectRenderer=xn,t.ObservablePoint=nr,t.PI_2=We,t.ParticleContainer=Hs,t.ParticleRenderer=Vs,t.PlaneGeometry=eh,t.Point=Ke,t.Polygon=er,t.Prepare=Qa,t.Program=ti,t.ProjectionSystem=di,t.Quad=dn,t.QuadUv=pn,t.RAD_TO_DEG=qe,t.Rectangle=Qe,t.RenderTexture=rn,t.RenderTexturePool=nn,t.RenderTextureSystem=gi,t.Renderer=Ui,t.ResizePlugin=Ju,t.Resource=Lr,t.RopeGeometry=rh,t.RoundedRectangle=rr,t.Runner=Or,t.SVGResource=Yr,t.ScissorSystem=ci,t.Shader=ei,t.ShaderSystem=wi,t.SimpleMesh=oh,t.SimplePlane=ih,t.SimpleRope=nh,t.Sprite=Ra,t.SpriteMaskFilter=si,t.Spritesheet=tu,t.SpritesheetLoader=eu,t.State=ri,t.StateSystem=Mi,t.StencilSystem=fi,t.System=ji,t.TYPES_TO_BYTES_PER_COMPONENT=Ds,t.TYPES_TO_BYTES_PER_PIXEL=Ls,t.TemporaryDisplayObject=_r,t.Text=Ua,t.TextFormat=yu,t.TextMetrics=Na,t.TextStyle=Ia,t.Texture=en,t.TextureGCSystem=Pi,t.TextureLoader=Go,t.TextureMatrix=oi,t.TextureSystem=Ci,t.TextureUvs=Qr,t.Ticker=wr,t.TickerPlugin=Mr,t.TilingSprite=ou,t.TilingSpriteRenderer=uu,t.TimeLimiter=$a,t.Transform=dr,t.UniformGroup=gn,t.VERSION="6.5.10",t.VideoResource=Vr,t.ViewableBuffer=Yi,t.XMLFormat=bu,t.XMLStringFormat=xu,t.accessibleTarget=io,t.autoDetectFormat=Eu,t.autoDetectRenderer=Gi,t.autoDetectResource=Ir,t.checkMaxIfStatementsInShader=Jn,t.createUBOElements=bi,t.defaultFilterVertex=Xi,t.defaultVertex=ki,t.extensions=Ar,t.filters=hh,t.generateProgram=Ai,t.generateUniformBufferSync=Ti,t.getTestContext=Un,t.getUBOData=xi,t.graphicsUtils=Ta,t.groupD8=fr,t.interactiveTarget=fo,t.isMobile=nt,t.parseDDS=ys,t.parseKTX=Ns,t.resources=$i,t.settings=it,t.systems=ro,t.uniformParsers=Yn,t.utils=Ve,Object.defineProperty(t,"__esModule",{value:!0}),t}({}),s=function(t,e,r,n,i,o,s,a){"use strict";var u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function h(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var l=function(){return(l=Object.assign||function(t){for(var e,r=arguments,n=1,i=arguments.length;n<i;n++)for(var o in e=r[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.create,Object.create;var c="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",f=function(t){function e(e){var r=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float gamma;\nuniform float contrast;\nuniform float saturation;\nuniform float brightness;\nuniform float red;\nuniform float green;\nuniform float blue;\nuniform float alpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (c.a > 0.0) {\n        c.rgb /= c.a;\n\n        vec3 rgb = pow(c.rgb, vec3(1. / gamma));\n        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);\n        rgb.r *= red;\n        rgb.g *= green;\n        rgb.b *= blue;\n        c.rgb = rgb * brightness;\n\n        c.rgb *= c.a;\n    }\n\n    gl_FragColor = c * alpha;\n}\n")||this;return r.gamma=1,r.saturation=1,r.contrast=1,r.brightness=1,r.red=1,r.green=1,r.blue=1,r.alpha=1,Object.assign(r,e),r}return h(e,t),e.prototype.apply=function(t,e,r,n){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,t.applyFilter(this,e,r,n)},e}(e.Filter),d=function(t){function e(e){void 0===e&&(e=.5);var r=t.call(this,c,"\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n")||this;return r.threshold=e,r}return h(e,t),Object.defineProperty(e.prototype,"threshold",{get:function(){return this.uniforms.threshold},set:function(t){this.uniforms.threshold=t},enumerable:!1,configurable:!0}),e}(e.Filter),p=function(t){function e(e,n,i){void 0===e&&(e=4),void 0===n&&(n=3),void 0===i&&(i=!1);var o=t.call(this,c,i?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}")||this;return o._kernels=[],o._blur=4,o._quality=3,o.uniforms.uOffset=new Float32Array(2),o._pixelSize=new r.Point,o.pixelSize=1,o._clamp=i,Array.isArray(e)?o.kernels=e:(o._blur=e,o.quality=n),o}return h(e,t),e.prototype.apply=function(t,e,r,n){var i,o=this._pixelSize.x/e._frame.width,s=this._pixelSize.y/e._frame.height;if(1===this._quality||0===this._blur)i=this._kernels[0]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*s,t.applyFilter(this,e,r,n);else{for(var a=t.getFilterTexture(),u=e,h=a,l=void 0,c=this._quality-1,f=0;f<c;f++)i=this._kernels[f]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*s,t.applyFilter(this,u,h,1),l=u,u=h,h=l;i=this._kernels[c]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*s,t.applyFilter(this,u,r,n),t.returnFilterTexture(a)}},e.prototype._updatePadding=function(){this.padding=Math.ceil(this._kernels.reduce((function(t,e){return t+e+.5}),0))},e.prototype._generateKernels=function(){var t=this._blur,e=this._quality,r=[t];if(t>0)for(var n=t,i=t/e,o=1;o<e;o++)n-=i,r.push(n);this._kernels=r,this._updatePadding()},Object.defineProperty(e.prototype,"kernels",{get:function(){return this._kernels},set:function(t){Array.isArray(t)&&t.length>0?(this._kernels=t,this._quality=t.length,this._blur=Math.max.apply(Math,t)):(this._kernels=[0],this._quality=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clamp",{get:function(){return this._clamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelSize",{get:function(){return this._pixelSize},set:function(t){"number"==typeof t?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):t instanceof r.Point?(this._pixelSize.x=t.x,this._pixelSize.y=t.y):(this._pixelSize.x=1,this._pixelSize.y=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this._blur},set:function(t){this._blur=t,this._generateKernels()},enumerable:!1,configurable:!0}),e}(e.Filter),m=function(t){function e(r){var i=t.call(this,c,"uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D bloomTexture;\nuniform float bloomScale;\nuniform float brightness;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    color.rgb *= brightness;\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\n    bloomColor.rgb *= bloomScale;\n    gl_FragColor = color + bloomColor;\n}\n")||this;i.bloomScale=1,i.brightness=1,i._resolution=n.settings.FILTER_RESOLUTION,"number"==typeof r&&(r={threshold:r});var o=Object.assign(e.defaults,r);i.bloomScale=o.bloomScale,i.brightness=o.brightness;var s=o.kernels,a=o.blur,u=o.quality,h=o.pixelSize,l=o.resolution;return i._extractFilter=new d(o.threshold),i._extractFilter.resolution=l,i._blurFilter=s?new p(s):new p(a,u),i.pixelSize=h,i.resolution=l,i}return h(e,t),e.prototype.apply=function(t,e,r,n,i){var o=t.getFilterTexture();this._extractFilter.apply(t,e,o,1,i);var s=t.getFilterTexture();this._blurFilter.apply(t,o,s,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=s,t.applyFilter(this,e,r,n),t.returnFilterTexture(s),t.returnFilterTexture(o)},Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t,this._extractFilter&&(this._extractFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"threshold",{get:function(){return this._extractFilter.threshold},set:function(t){this._extractFilter.threshold=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(t){this._blurFilter.kernels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(t){this._blurFilter.blur=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(t){this._blurFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(t){this._blurFilter.pixelSize=t},enumerable:!1,configurable:!0}),e.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:n.settings.FILTER_RESOLUTION},e}(e.Filter),g=function(t){function e(e){void 0===e&&(e=8);var r=t.call(this,c,"varying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n    return floor( coord / size ) * size;\n}\n\nvec2 getMod(vec2 coord, vec2 size)\n{\n    return mod( coord , size) / size;\n}\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n\n    if (clamp(p.x, 0.0, 4.0) == p.x)\n    {\n        if (clamp(p.y, 0.0, 4.0) == p.y)\n        {\n            if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n        }\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    // get the rounded color..\n    vec2 pixCoord = pixelate(coord, vec2(pixelSize));\n    pixCoord = unmapCoord(pixCoord);\n\n    vec4 color = texture2D(uSampler, pixCoord);\n\n    // determine the character to use\n    float gray = (color.r + color.g + color.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    // get the mod..\n    vec2 modd = getMod(coord, vec2(pixelSize));\n\n    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);\n\n}\n")||this;return r.size=e,r}return h(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return this.uniforms.pixelSize},set:function(t){this.uniforms.pixelSize=t},enumerable:!1,configurable:!0}),e}(e.Filter),v=function(t){function e(e){var r=t.call(this,c,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float transformX;\nuniform float transformY;\nuniform vec3 lightColor;\nuniform float lightAlpha;\nuniform vec3 shadowColor;\nuniform float shadowAlpha;\n\nvoid main(void) {\n    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float light = texture2D(uSampler, vTextureCoord - transform).a;\n    float shadow = texture2D(uSampler, vTextureCoord + transform).a;\n\n    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));\n    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));\n    gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n")||this;return r._thickness=2,r._angle=0,r.uniforms.lightColor=new Float32Array(3),r.uniforms.shadowColor=new Float32Array(3),Object.assign(r,{rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},e),r.padding=1,r}return h(e,t),e.prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._angle/r.DEG_TO_RAD},set:function(t){this._angle=t*r.DEG_TO_RAD,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness=t,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightColor",{get:function(){return i.rgb2hex(this.uniforms.lightColor)},set:function(t){i.hex2rgb(t,this.uniforms.lightColor)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightAlpha",{get:function(){return this.uniforms.lightAlpha},set:function(t){this.uniforms.lightAlpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowColor",{get:function(){return i.rgb2hex(this.uniforms.shadowColor)},set:function(t){i.hex2rgb(t,this.uniforms.shadowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowAlpha",{get:function(){return this.uniforms.shadowAlpha},set:function(t){this.uniforms.shadowAlpha=t},enumerable:!1,configurable:!0}),e}(e.Filter),_=function(t){function e(e,i,u,h){void 0===e&&(e=2),void 0===i&&(i=4),void 0===u&&(u=n.settings.FILTER_RESOLUTION),void 0===h&&(h=5);var l,c,f=t.call(this)||this;return"number"==typeof e?(l=e,c=e):e instanceof r.Point?(l=e.x,c=e.y):Array.isArray(e)&&(l=e[0],c=e[1]),f.blurXFilter=new a.BlurFilterPass(!0,l,i,u,h),f.blurYFilter=new a.BlurFilterPass(!1,c,i,u,h),f.blurYFilter.blendMode=o.BLEND_MODES.SCREEN,f.defaultFilter=new s.AlphaFilter,f}return h(e,t),e.prototype.apply=function(t,e,r,n){var i=t.getFilterTexture();this.defaultFilter.apply(t,e,r,n),this.blurXFilter.apply(t,e,i,1),this.blurYFilter.apply(t,i,r,0),t.returnFilterTexture(i)},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t},enumerable:!1,configurable:!0}),e}(e.Filter),y=function(t){function e(r){var n=t.call(this,c,"uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n")||this;return n.uniforms.dimensions=new Float32Array(2),Object.assign(n,e.defaults,r),n}return h(e,t),e.prototype.apply=function(t,e,r,n){var i=e.filterFrame,o=i.width,s=i.height;this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=s,t.applyFilter(this,e,r,n)},Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(t){this.uniforms.radius=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(t){this.uniforms.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.uniforms.center},set:function(t){this.uniforms.center=t},enumerable:!1,configurable:!0}),e.defaults={center:[.5,.5],radius:100,strength:1},e}(e.Filter),b=function(t){function r(e,r,n){void 0===r&&(r=!1),void 0===n&&(n=1);var i=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D colorMap;\nuniform float _mix;\nuniform float _size;\nuniform float _sliceSize;\nuniform float _slicePixelSize;\nuniform float _sliceInnerSize;\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord.xy);\n\n    vec4 adjusted;\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n        float innerWidth = _size - 1.0;\n        float zSlice0 = min(floor(color.b * innerWidth), innerWidth);\n        float zSlice1 = min(zSlice0 + 1.0, innerWidth);\n        float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;\n        float s0 = xOffset + (zSlice0 * _sliceSize);\n        float s1 = xOffset + (zSlice1 * _sliceSize);\n        float yOffset = _sliceSize * 0.5 + color.g * (1.0 - _sliceSize);\n        vec4 slice0Color = texture2D(colorMap, vec2(s0,yOffset));\n        vec4 slice1Color = texture2D(colorMap, vec2(s1,yOffset));\n        float zOffset = fract(color.b * innerWidth);\n        adjusted = mix(slice0Color, slice1Color, zOffset);\n\n        color.rgb *= color.a;\n    }\n    gl_FragColor = vec4(mix(color, adjusted, _mix).rgb, color.a);\n\n}")||this;return i.mix=1,i._size=0,i._sliceSize=0,i._slicePixelSize=0,i._sliceInnerSize=0,i._nearest=!1,i._scaleMode=null,i._colorMap=null,i._scaleMode=null,i.nearest=r,i.mix=n,i.colorMap=e,i}return h(r,t),r.prototype.apply=function(t,e,r,n){this.uniforms._mix=this.mix,t.applyFilter(this,e,r,n)},Object.defineProperty(r.prototype,"colorSize",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"colorMap",{get:function(){return this._colorMap},set:function(t){var r;t&&(t instanceof e.Texture||(t=e.Texture.from(t)),(null===(r=t)||void 0===r?void 0:r.baseTexture)&&(t.baseTexture.scaleMode=this._scaleMode,t.baseTexture.mipmap=o.MIPMAP_MODES.OFF,this._size=t.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=t),this._colorMap=t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nearest",{get:function(){return this._nearest},set:function(t){this._nearest=t,this._scaleMode=t?o.SCALE_MODES.NEAREST:o.SCALE_MODES.LINEAR;var e=this._colorMap;e&&e.baseTexture&&(e.baseTexture._glTextures={},e.baseTexture.scaleMode=this._scaleMode,e.baseTexture.mipmap=o.MIPMAP_MODES.OFF,e._updateID++,e.baseTexture.emit("update",e.baseTexture))},enumerable:!1,configurable:!0}),r.prototype.updateColorMap=function(){var t=this._colorMap;t&&t.baseTexture&&(t._updateID++,t.baseTexture.emit("update",t.baseTexture),this.colorMap=t)},r.prototype.destroy=function(e){void 0===e&&(e=!1),this._colorMap&&this._colorMap.destroy(e),t.prototype.destroy.call(this)},r}(e.Filter),x=function(t){function e(e,r){void 0===e&&(e=0),void 0===r&&(r=1);var n=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 color;\nuniform float alpha;\n\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = vec4(mix(currentColor.rgb, color.rgb, currentColor.a * alpha), currentColor.a);\n}\n")||this;return n._color=0,n._alpha=1,n.uniforms.color=new Float32Array(3),n.color=e,n.alpha=r,n}return h(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){var e=this.uniforms.color;"number"==typeof t?(i.hex2rgb(t,e),this._color=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],this._color=i.rgb2hex(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this.uniforms.alpha=t,this._alpha=t},enumerable:!1,configurable:!0}),e}(e.Filter),T=function(t){function e(e,r,n){void 0===e&&(e=16711680),void 0===r&&(r=0),void 0===n&&(n=.4);var i=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 originalColor;\nuniform vec3 newColor;\nuniform float epsilon;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));\n    float colorDistance = length(colorDiff);\n    float doReplace = step(colorDistance, epsilon);\n    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);\n}\n")||this;return i._originalColor=16711680,i._newColor=0,i.uniforms.originalColor=new Float32Array(3),i.uniforms.newColor=new Float32Array(3),i.originalColor=e,i.newColor=r,i.epsilon=n,i}return h(e,t),Object.defineProperty(e.prototype,"originalColor",{get:function(){return this._originalColor},set:function(t){var e=this.uniforms.originalColor;"number"==typeof t?(i.hex2rgb(t,e),this._originalColor=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],this._originalColor=i.rgb2hex(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newColor",{get:function(){return this._newColor},set:function(t){var e=this.uniforms.newColor;"number"==typeof t?(i.hex2rgb(t,e),this._newColor=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],this._newColor=i.rgb2hex(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(t){this.uniforms.epsilon=t},enumerable:!1,configurable:!0}),e}(e.Filter),E=function(t){function e(e,r,n){void 0===r&&(r=200),void 0===n&&(n=200);var i=t.call(this,c,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n")||this;return i.uniforms.texelSize=new Float32Array(2),i.uniforms.matrix=new Float32Array(9),void 0!==e&&(i.matrix=e),i.width=r,i.height=n,i}return h(e,t),Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.matrix},set:function(t){var e=this;t.forEach((function(t,r){e.uniforms.matrix[r]=t}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return 1/this.uniforms.texelSize[0]},set:function(t){this.uniforms.texelSize[0]=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 1/this.uniforms.texelSize[1]},set:function(t){this.uniforms.texelSize[1]=1/t},enumerable:!1,configurable:!0}),e}(e.Filter),S=function(t){function e(){return t.call(this,c,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")||this}return h(e,t),e}(e.Filter),A=function(t){function e(r){var n=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nconst float SQRT_2 = 1.414213;\n\nconst float light = 1.0;\n\nuniform float curvature;\nuniform float lineWidth;\nuniform float lineContrast;\nuniform bool verticalLine;\nuniform float noise;\nuniform float noiseSize;\n\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\n\nuniform float seed;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));\n    \n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 rgb = gl_FragColor.rgb;\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        rgb += _noise * noise;\n    }\n\n    if (lineWidth > 0.0)\n    {\n        float _c = curvature > 0. ? curvature : 1.;\n        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\n        vec2 uv = dir * k;\n\n        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;\n        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;\n        rgb *= j;\n        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);\n        rgb *= 0.99 + ceil(segment) * 0.015;\n    }\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    gl_FragColor.rgb = rgb;\n}\n")||this;return n.time=0,n.seed=0,n.uniforms.dimensions=new Float32Array(2),Object.assign(n,e.defaults,r),n}return h(e,t),e.prototype.apply=function(t,e,r,n){var i=e.filterFrame,o=i.width,s=i.height;this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=s,this.uniforms.seed=this.seed,this.uniforms.time=this.time,t.applyFilter(this,e,r,n)},Object.defineProperty(e.prototype,"curvature",{get:function(){return this.uniforms.curvature},set:function(t){this.uniforms.curvature=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return this.uniforms.lineWidth},set:function(t){this.uniforms.lineWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineContrast",{get:function(){return this.uniforms.lineContrast},set:function(t){this.uniforms.lineContrast=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticalLine",{get:function(){return this.uniforms.verticalLine},set:function(t){this.uniforms.verticalLine=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(t){this.uniforms.noise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(t){this.uniforms.noiseSize=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(t){this.uniforms.vignetting=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(t){this.uniforms.vignettingAlpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(t){this.uniforms.vignettingBlur=t},enumerable:!1,configurable:!0}),e.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},e}(e.Filter),O=function(t){function e(e,r){void 0===e&&(e=1),void 0===r&&(r=5);var n=t.call(this,c,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 filterArea;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * filterArea.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n")||this;return n.scale=e,n.angle=r,n}return h(e,t),Object.defineProperty(e.prototype,"scale",{get:function(){return this.uniforms.scale},set:function(t){this.uniforms.scale=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(t){this.uniforms.angle=t},enumerable:!1,configurable:!0}),e}(e.Filter),R=function(t){function o(i){var s=t.call(this)||this;s.angle=45,s._distance=5,s._resolution=n.settings.FILTER_RESOLUTION;var a=i?l(l({},o.defaults),i):o.defaults,u=a.kernels,h=a.blur,f=a.quality,d=a.pixelSize,m=a.resolution;s._tintFilter=new e.Filter(c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\n\nuniform vec2 shift;\nuniform vec4 inputSize;\n\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);\n\n    // Premultiply alpha\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}"),s._tintFilter.uniforms.color=new Float32Array(4),s._tintFilter.uniforms.shift=new r.Point,s._tintFilter.resolution=m,s._blurFilter=u?new p(u):new p(h,f),s.pixelSize=d,s.resolution=m;var g=a.shadowOnly,v=a.rotation,_=a.distance,y=a.alpha,b=a.color;return s.shadowOnly=g,s.rotation=v,s.distance=_,s.alpha=y,s.color=b,s._updatePadding(),s}return h(o,t),o.prototype.apply=function(t,e,r,n){var i=t.getFilterTexture();this._tintFilter.apply(t,e,i,1),this._blurFilter.apply(t,i,r,n),!0!==this.shadowOnly&&t.applyFilter(this,e,r,0),t.returnFilterTexture(i)},o.prototype._updatePadding=function(){this.padding=this.distance+2*this.blur},o.prototype._updateShift=function(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))},Object.defineProperty(o.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t,this._tintFilter&&(this._tintFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"distance",{get:function(){return this._distance},set:function(t){this._distance=t,this._updatePadding(),this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"rotation",{get:function(){return this.angle/r.DEG_TO_RAD},set:function(t){this.angle=t*r.DEG_TO_RAD,this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"alpha",{get:function(){return this._tintFilter.uniforms.alpha},set:function(t){this._tintFilter.uniforms.alpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"color",{get:function(){return i.rgb2hex(this._tintFilter.uniforms.color)},set:function(t){i.hex2rgb(t,this._tintFilter.uniforms.color)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(t){this._blurFilter.kernels=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(t){this._blurFilter.blur=t,this._updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(t){this._blurFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(t){this._blurFilter.pixelSize=t},enumerable:!1,configurable:!0}),o.defaults={rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:n.settings.FILTER_RESOLUTION},o}(e.Filter),w=function(t){function e(e){void 0===e&&(e=5);var r=t.call(this,c,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float strength;\nuniform vec4 filterArea;\n\n\nvoid main(void)\n{\n\tvec2 onePixel = vec2(1.0 / filterArea);\n\n\tvec4 color;\n\n\tcolor.rgb = vec3(0.5);\n\n\tcolor -= texture2D(uSampler, vTextureCoord - onePixel) * strength;\n\tcolor += texture2D(uSampler, vTextureCoord + onePixel) * strength;\n\n\tcolor.rgb = vec3((color.r + color.g + color.b) / 3.0);\n\n\tfloat alpha = texture2D(uSampler, vTextureCoord).a;\n\n\tgl_FragColor = vec4(color.rgb * alpha, alpha);\n}\n")||this;return r.strength=e,r}return h(e,t),Object.defineProperty(e.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(t){this.uniforms.strength=t},enumerable:!1,configurable:!0}),e}(e.Filter),M=function(t){function n(r){var i=t.call(this,c,"// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n")||this;return i.offset=100,i.fillMode=n.TRANSPARENT,i.average=!1,i.seed=0,i.minSize=8,i.sampleSize=512,i._slices=0,i._offsets=new Float32Array(1),i._sizes=new Float32Array(1),i._direction=-1,i.uniforms.dimensions=new Float32Array(2),i._canvas=document.createElement("canvas"),i._canvas.width=4,i._canvas.height=i.sampleSize,i.texture=e.Texture.from(i._canvas,{scaleMode:o.SCALE_MODES.NEAREST}),Object.assign(i,n.defaults,r),i}return h(n,t),n.prototype.apply=function(t,e,r,n){var i=e.filterFrame,o=i.width,s=i.height;this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=s,this.uniforms.aspect=s/o,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,t.applyFilter(this,e,r,n)},n.prototype._randomizeSizes=function(){var t=this._sizes,e=this._slices-1,r=this.sampleSize,n=Math.min(this.minSize/r,.9/this._slices);if(this.average){for(var i=this._slices,o=1,s=0;s<e;s++){var a=o/(i-s),u=Math.max(a*(1-.6*Math.random()),n);t[s]=u,o-=u}t[e]=o}else{o=1;var h=Math.sqrt(1/this._slices);for(s=0;s<e;s++)u=Math.max(h*o*Math.random(),n),t[s]=u,o-=u;t[e]=o}this.shuffle()},n.prototype.shuffle=function(){for(var t=this._sizes,e=this._slices-1;e>0;e--){var r=Math.random()*e|0,n=t[e];t[e]=t[r],t[r]=n}},n.prototype._randomizeOffsets=function(){for(var t=0;t<this._slices;t++)this._offsets[t]=Math.random()*(Math.random()<.5?-1:1)},n.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},n.prototype.redraw=function(){var t,e=this.sampleSize,r=this.texture,n=this._canvas.getContext("2d");n.clearRect(0,0,8,e);for(var i=0,o=0;o<this._slices;o++){t=Math.floor(256*this._offsets[o]);var s=this._sizes[o]*e,a=t>0?t:0,u=t<0?-t:0;n.fillStyle="rgba("+a+", "+u+", 0, 1)",n.fillRect(0,i|0,e,s+1|0),i+=s}r.baseTexture.update(),this.uniforms.displacementMap=r},Object.defineProperty(n.prototype,"sizes",{get:function(){return this._sizes},set:function(t){for(var e=Math.min(this._slices,t.length),r=0;r<e;r++)this._sizes[r]=t[r]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"offsets",{get:function(){return this._offsets},set:function(t){for(var e=Math.min(this._slices,t.length),r=0;r<e;r++)this._offsets[r]=t[r]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"slices",{get:function(){return this._slices},set:function(t){this._slices!==t&&(this._slices=t,this.uniforms.slices=t,this._sizes=this.uniforms.slicesWidth=new Float32Array(t),this._offsets=this.uniforms.slicesOffset=new Float32Array(t),this.refresh())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"direction",{get:function(){return this._direction},set:function(t){if(this._direction!==t){this._direction=t;var e=t*r.DEG_TO_RAD;this.uniforms.sinDir=Math.sin(e),this.uniforms.cosDir=Math.cos(e)}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"red",{get:function(){return this.uniforms.red},set:function(t){this.uniforms.red=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"green",{get:function(){return this.uniforms.green},set:function(t){this.uniforms.green=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(t){this.uniforms.blue=t},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){var t;null===(t=this.texture)||void 0===t||t.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null},n.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},n.TRANSPARENT=0,n.ORIGINAL=1,n.LOOP=2,n.CLAMP=3,n.MIRROR=4,n}(e.Filter),P=function(t){function e(r){var n=this,i=Object.assign({},e.defaults,r),o=i.outerStrength,s=i.innerStrength,a=i.color,u=i.knockout,h=i.quality,l=Math.round(i.distance);return(n=t.call(this,c,"varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float outerStrength;\nuniform float innerStrength;\n\nuniform vec4 glowColor;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform bool knockout;\n\nconst float PI = 3.14159265358979323846264;\n\nconst float DIST = __DIST__;\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);\nconst float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);\n\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\n    float totalAlpha = 0.0;\n\n    vec2 direction;\n    vec2 displaced;\n    vec4 curColor;\n\n    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {\n       direction = vec2(cos(angle), sin(angle)) * px;\n\n       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {\n           displaced = clamp(vTextureCoord + direction * \n                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);\n\n           curColor = texture2D(uSampler, displaced);\n\n           totalAlpha += (DIST - curDistance) * curColor.a;\n       }\n    }\n    \n    curColor = texture2D(uSampler, vTextureCoord);\n\n    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);\n\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    \n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\n\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n\n    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;\n    \n    if (knockout) {\n      float resultAlpha = outerGlowAlpha + innerGlowAlpha;\n      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else {\n      gl_FragColor = innerColor + outerGlowColor;\n    }\n}\n".replace(/__ANGLE_STEP_SIZE__/gi,""+(1/h/l).toFixed(7)).replace(/__DIST__/gi,l.toFixed(0)+".0"))||this).uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(n,{color:a,outerStrength:o,innerStrength:s,padding:l,knockout:u}),n}return h(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return i.rgb2hex(this.uniforms.glowColor)},set:function(t){i.hex2rgb(t,this.uniforms.glowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outerStrength",{get:function(){return this.uniforms.outerStrength},set:function(t){this.uniforms.outerStrength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"innerStrength",{get:function(){return this.uniforms.innerStrength},set:function(t){this.uniforms.innerStrength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this.uniforms.knockout},set:function(t){this.uniforms.knockout=t},enumerable:!1,configurable:!0}),e.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1},e}(e.Filter),I=function(t){function e(n){var i=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\nuniform float alpha;\n\n${perlin}\n\nvoid main(void) {\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n    // apply user alpha\n    mist *= alpha;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;\n\n}\n".replace("${perlin}","vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n"))||this;i.parallel=!0,i.time=0,i._angle=0,i.uniforms.dimensions=new Float32Array(2);var o=Object.assign(e.defaults,n);return i._angleLight=new r.Point,i.angle=o.angle,i.gain=o.gain,i.lacunarity=o.lacunarity,i.alpha=o.alpha,i.parallel=o.parallel,i.center=o.center,i.time=o.time,i}return h(e,t),e.prototype.apply=function(t,e,r,n){var i=e.filterFrame,o=i.width,s=i.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=s,this.uniforms.aspect=s/o,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,t.applyFilter(this,e,r,n)},Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t;var e=t*r.DEG_TO_RAD;this._angleLight.x=Math.cos(e),this._angleLight.y=Math.sin(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gain",{get:function(){return this.uniforms.gain},set:function(t){this.uniforms.gain=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lacunarity",{get:function(){return this.uniforms.lacunarity},set:function(t){this.uniforms.lacunarity=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(t){this.uniforms.alpha=t},enumerable:!1,configurable:!0}),e.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1},e}(e.Filter),C=function(t){function e(e,n,i){void 0===e&&(e=[0,0]),void 0===n&&(n=5),void 0===i&&(i=0);var o=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uVelocity;\nuniform int uKernelSize;\nuniform float uOffset;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\n// Notice:\n// the perfect way:\n//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);\n// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.\n// So use uKernelSize directly.\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    vec2 velocity = uVelocity / filterArea.xy;\n    float offset = -uOffset / length(uVelocity) - 0.5;\n    int k = uKernelSize - 1;\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n        vec2 bias = velocity * (float(i) / float(k) + offset);\n        color += texture2D(uSampler, vTextureCoord + bias);\n    }\n    gl_FragColor = color / float(uKernelSize);\n}\n")||this;return o.kernelSize=5,o.uniforms.uVelocity=new Float32Array(2),o._velocity=new r.ObservablePoint(o.velocityChanged,o),o.setVelocity(e),o.kernelSize=n,o.offset=i,o}return h(e,t),e.prototype.apply=function(t,e,r,n){var i=this.velocity,o=i.x,s=i.y;this.uniforms.uKernelSize=0!==o||0!==s?this.kernelSize:0,t.applyFilter(this,e,r,n)},Object.defineProperty(e.prototype,"velocity",{get:function(){return this._velocity},set:function(t){this.setVelocity(t)},enumerable:!1,configurable:!0}),e.prototype.setVelocity=function(t){if(Array.isArray(t)){var e=t[0],r=t[1];this._velocity.set(e,r)}else this._velocity.copyFrom(t)},e.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y,this.padding=1+(Math.max(Math.abs(this._velocity.x),Math.abs(this._velocity.y))|0)},Object.defineProperty(e.prototype,"offset",{get:function(){return this.uniforms.uOffset},set:function(t){this.uniforms.uOffset=t},enumerable:!1,configurable:!0}),e}(e.Filter),D=function(t){function e(e,r,n){void 0===r&&(r=.05),void 0===n&&(n=e.length);var i=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float epsilon;\n\nconst int MAX_COLORS = %maxColors%;\n\nuniform vec3 originalColors[MAX_COLORS];\nuniform vec3 targetColors[MAX_COLORS];\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    float alpha = gl_FragColor.a;\n    if (alpha < 0.0001)\n    {\n      return;\n    }\n\n    vec3 color = gl_FragColor.rgb / alpha;\n\n    for(int i = 0; i < MAX_COLORS; i++)\n    {\n      vec3 origColor = originalColors[i];\n      if (origColor.r < 0.0)\n      {\n        break;\n      }\n      vec3 colorDiff = origColor - color;\n      if (length(colorDiff) < epsilon)\n      {\n        vec3 targetColor = targetColors[i];\n        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);\n        return;\n      }\n    }\n}\n".replace(/%maxColors%/g,n.toFixed(0)))||this;return i._replacements=[],i._maxColors=0,i.epsilon=r,i._maxColors=n,i.uniforms.originalColors=new Float32Array(3*n),i.uniforms.targetColors=new Float32Array(3*n),i.replacements=e,i}return h(e,t),Object.defineProperty(e.prototype,"replacements",{get:function(){return this._replacements},set:function(t){var e=this.uniforms.originalColors,r=this.uniforms.targetColors,n=t.length;if(n>this._maxColors)throw new Error("Length of replacements ("+n+") exceeds the maximum colors length ("+this._maxColors+")");e[3*n]=-1;for(var o=0;o<n;o++){var s=t[o],a=s[0];"number"==typeof a?a=i.hex2rgb(a):s[0]=i.rgb2hex(a),e[3*o]=a[0],e[3*o+1]=a[1],e[3*o+2]=a[2];var u=s[1];"number"==typeof u?u=i.hex2rgb(u):s[1]=i.rgb2hex(u),r[3*o]=u[0],r[3*o+1]=u[1],r[3*o+2]=u[2]}this._replacements=t},enumerable:!1,configurable:!0}),e.prototype.refresh=function(){this.replacements=this._replacements},Object.defineProperty(e.prototype,"maxColors",{get:function(){return this._maxColors},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(t){this.uniforms.epsilon=t},enumerable:!1,configurable:!0}),e}(e.Filter),F=function(t){function e(r,n){void 0===n&&(n=0);var i=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n")||this;return i.seed=0,i.uniforms.dimensions=new Float32Array(2),"number"==typeof r?(i.seed=r,r=void 0):i.seed=n,Object.assign(i,e.defaults,r),i}return h(e,t),e.prototype.apply=function(t,e,r,n){var i,o;this.uniforms.dimensions[0]=null===(i=e.filterFrame)||void 0===i?void 0:i.width,this.uniforms.dimensions[1]=null===(o=e.filterFrame)||void 0===o?void 0:o.height,this.uniforms.seed=this.seed,t.applyFilter(this,e,r,n)},Object.defineProperty(e.prototype,"sepia",{get:function(){return this.uniforms.sepia},set:function(t){this.uniforms.sepia=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(t){this.uniforms.noise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(t){this.uniforms.noiseSize=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scratch",{get:function(){return this.uniforms.scratch},set:function(t){this.uniforms.scratch=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scratchDensity",{get:function(){return this.uniforms.scratchDensity},set:function(t){this.uniforms.scratchDensity=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scratchWidth",{get:function(){return this.uniforms.scratchWidth},set:function(t){this.uniforms.scratchWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(t){this.uniforms.vignetting=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(t){this.uniforms.vignettingAlpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(t){this.uniforms.vignettingBlur=t},enumerable:!1,configurable:!0}),e.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},e}(e.Filter),L=function(t){function e(r,n,i){void 0===r&&(r=1),void 0===n&&(n=0),void 0===i&&(i=.1);var o=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterClamp;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main(void) {\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 displaced;\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ${angleStep}) {\n        displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n        displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n".replace(/\$\{angleStep\}/,e.getAngleStep(i)))||this;return o._thickness=1,o.uniforms.thickness=new Float32Array([0,0]),o.uniforms.outlineColor=new Float32Array([0,0,0,1]),Object.assign(o,{thickness:r,color:n,quality:i}),o}return h(e,t),e.getAngleStep=function(t){var r=Math.max(t*e.MAX_SAMPLES,e.MIN_SAMPLES);return(2*Math.PI/r).toFixed(7)},e.prototype.apply=function(t,e,r,n){this.uniforms.thickness[0]=this._thickness/e._frame.width,this.uniforms.thickness[1]=this._thickness/e._frame.height,t.applyFilter(this,e,r,n)},Object.defineProperty(e.prototype,"color",{get:function(){return i.rgb2hex(this.uniforms.outlineColor)},set:function(t){i.hex2rgb(t,this.uniforms.outlineColor)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness=t,this.padding=t},enumerable:!1,configurable:!0}),e.MIN_SAMPLES=1,e.MAX_SAMPLES=100,e}(e.Filter),N=function(t){function e(e){void 0===e&&(e=10);var r=t.call(this,c,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec2 size;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n\treturn floor( coord / size ) * size;\n}\n\nvoid main(void)\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = pixelate(coord, size);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord);\n}\n")||this;return r.size=e,r}return h(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return this.uniforms.size},set:function(t){"number"==typeof t&&(t=[t,t]),this.uniforms.size=t},enumerable:!1,configurable:!0}),e}(e.Filter),B=function(t){function e(e,r,n,i){void 0===e&&(e=0),void 0===r&&(r=[0,0]),void 0===n&&(n=5),void 0===i&&(i=-1);var o=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float uRadian;\nuniform vec2 uCenter;\nuniform float uRadius;\nuniform int uKernelSize;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    float aspect = filterArea.y / filterArea.x;\n    vec2 center = uCenter.xy / filterArea.xy;\n    float gradient = uRadius / filterArea.x * 0.3;\n    float radius = uRadius / filterArea.x - gradient * 0.5;\n    int k = uKernelSize - 1;\n\n    vec2 coord = vTextureCoord;\n    vec2 dir = vec2(center - coord);\n    float dist = length(vec2(dir.x, dir.y * aspect));\n\n    float radianStep = uRadian;\n    if (radius >= 0.0 && dist > radius) {\n        float delta = dist - radius;\n        float gap = gradient;\n        float scale = 1.0 - abs(delta / gap);\n        if (scale <= 0.0) {\n            gl_FragColor = color;\n            return;\n        }\n        radianStep *= scale;\n    }\n    radianStep /= float(k);\n\n    float s = sin(radianStep);\n    float c = cos(radianStep);\n    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n\n        coord -= center;\n        coord.y *= aspect;\n        coord = rotationMatrix * coord;\n        coord.y /= aspect;\n        coord += center;\n\n        vec4 sample = texture2D(uSampler, coord);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample;\n    }\n\n    gl_FragColor = color / float(uKernelSize);\n}\n")||this;return o._angle=0,o.angle=e,o.center=r,o.kernelSize=n,o.radius=i,o}return h(e,t),e.prototype.apply=function(t,e,r,n){this.uniforms.uKernelSize=0!==this._angle?this.kernelSize:0,t.applyFilter(this,e,r,n)},Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this.uniforms.uRadian=t*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(t){this.uniforms.uCenter=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(t){(t<0||t===1/0)&&(t=-1),this.uniforms.uRadius=t},enumerable:!1,configurable:!0}),e}(e.Filter),U=function(t){function e(r){var n=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nuniform bool mirror;\nuniform float boundary;\nuniform vec2 amplitude;\nuniform vec2 waveLength;\nuniform vec2 alpha;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    if (coord.y < boundary) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    float k = (coord.y - boundary) / (1. - boundary + 0.0001);\n    float areaY = boundary * dimensions.y / filterArea.y;\n    float v = areaY + areaY - vTextureCoord.y;\n    float y = mirror ? v : vTextureCoord.y;\n\n    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;\n    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;\n    float _alpha = (alpha.y - alpha.x) * k + alpha.x;\n\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;\n    x = clamp(x, filterClamp.x, filterClamp.z);\n\n    vec4 color = texture2D(uSampler, vec2(x, y));\n\n    gl_FragColor = color * _alpha;\n}\n")||this;return n.time=0,n.uniforms.amplitude=new Float32Array(2),n.uniforms.waveLength=new Float32Array(2),n.uniforms.alpha=new Float32Array(2),n.uniforms.dimensions=new Float32Array(2),Object.assign(n,e.defaults,r),n}return h(e,t),e.prototype.apply=function(t,e,r,n){var i,o;this.uniforms.dimensions[0]=null===(i=e.filterFrame)||void 0===i?void 0:i.width,this.uniforms.dimensions[1]=null===(o=e.filterFrame)||void 0===o?void 0:o.height,this.uniforms.time=this.time,t.applyFilter(this,e,r,n)},Object.defineProperty(e.prototype,"mirror",{get:function(){return this.uniforms.mirror},set:function(t){this.uniforms.mirror=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundary",{get:function(){return this.uniforms.boundary},set:function(t){this.uniforms.boundary=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(t){this.uniforms.amplitude[0]=t[0],this.uniforms.amplitude[1]=t[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"waveLength",{get:function(){return this.uniforms.waveLength},set:function(t){this.uniforms.waveLength[0]=t[0],this.uniforms.waveLength[1]=t[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(t){this.uniforms.alpha[0]=t[0],this.uniforms.alpha[1]=t[1]},enumerable:!1,configurable:!0}),e.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},e}(e.Filter),G=function(t){function e(e,r,n){void 0===e&&(e=[-10,0]),void 0===r&&(r=[0,10]),void 0===n&&(n=[0,0]);var i=t.call(this,c,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n")||this;return i.red=e,i.green=r,i.blue=n,i}return h(e,t),Object.defineProperty(e.prototype,"red",{get:function(){return this.uniforms.red},set:function(t){this.uniforms.red=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"green",{get:function(){return this.uniforms.green},set:function(t){this.uniforms.green=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(t){this.uniforms.blue=t},enumerable:!1,configurable:!0}),e}(e.Filter),k=function(t){function e(r,n,i){void 0===r&&(r=[0,0]),void 0===i&&(i=0);var o=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nuniform vec2 center;\n\nuniform float amplitude;\nuniform float wavelength;\n// uniform float power;\nuniform float brightness;\nuniform float speed;\nuniform float radius;\n\nuniform float time;\n\nconst float PI = 3.14159;\n\nvoid main()\n{\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\n    float maxRadius = radius / filterArea.x;\n    float currentRadius = time * speed / filterArea.x;\n\n    float fade = 1.0;\n\n    if (maxRadius > 0.0) {\n        if (currentRadius > maxRadius) {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\n    }\n\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\n    dir.y *= filterArea.y / filterArea.x;\n    float dist = length(dir);\n\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    vec2 diffUV = normalize(dir);\n\n    float diff = (dist - currentRadius) / halfWavelength;\n\n    float p = 1.0 - pow(abs(diff), 2.0);\n\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\n\n    vec2 offset = diffUV * powDiff / filterArea.xy;\n\n    // Do clamp :\n    vec2 coord = vTextureCoord + offset;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    // No clamp :\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\n\n    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;\n\n    gl_FragColor = color;\n}\n")||this;return o.center=r,Object.assign(o,e.defaults,n),o.time=i,o}return h(e,t),e.prototype.apply=function(t,e,r,n){this.uniforms.time=this.time,t.applyFilter(this,e,r,n)},Object.defineProperty(e.prototype,"center",{get:function(){return this.uniforms.center},set:function(t){this.uniforms.center=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(t){this.uniforms.amplitude=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wavelength",{get:function(){return this.uniforms.wavelength},set:function(t){this.uniforms.wavelength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"brightness",{get:function(){return this.uniforms.brightness},set:function(t){this.uniforms.brightness=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.uniforms.speed},set:function(t){this.uniforms.speed=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(t){this.uniforms.radius=t},enumerable:!1,configurable:!0}),e.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},e}(e.Filter),X=function(t){function e(e,r,n){void 0===r&&(r=0),void 0===n&&(n=1);var i=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D uLightmap;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\nuniform vec4 ambientColor;\nvoid main() {\n    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);\n    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;\n    vec4 light = texture2D(uLightmap, lightCoord);\n    vec3 ambient = ambientColor.rgb * ambientColor.a;\n    vec3 intensity = ambient + light.rgb;\n    vec3 finalColor = diffuseColor.rgb * intensity;\n    gl_FragColor = vec4(finalColor, diffuseColor.a);\n}\n")||this;return i._color=0,i.uniforms.dimensions=new Float32Array(2),i.uniforms.ambientColor=new Float32Array([0,0,0,n]),i.texture=e,i.color=r,i}return h(e,t),e.prototype.apply=function(t,e,r,n){var i,o;this.uniforms.dimensions[0]=null===(i=e.filterFrame)||void 0===i?void 0:i.width,this.uniforms.dimensions[1]=null===(o=e.filterFrame)||void 0===o?void 0:o.height,t.applyFilter(this,e,r,n)},Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uLightmap},set:function(t){this.uniforms.uLightmap=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){var e=this.uniforms.ambientColor;"number"==typeof t?(i.hex2rgb(t,e),this._color=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._color=i.rgb2hex(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.ambientColor[3]},set:function(t){this.uniforms.ambientColor[3]=t},enumerable:!1,configurable:!0}),e}(e.Filter),j=function(t){function e(e,n,i,o){void 0===e&&(e=100),void 0===n&&(n=600);var s=t.call(this,c,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    color /= total;\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n")||this;return s.uniforms.blur=e,s.uniforms.gradientBlur=n,s.uniforms.start=i||new r.Point(0,window.innerHeight/2),s.uniforms.end=o||new r.Point(600,window.innerHeight/2),s.uniforms.delta=new r.Point(30,30),s.uniforms.texSize=new r.Point(window.innerWidth,window.innerHeight),s.updateDelta(),s}return h(e,t),e.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},Object.defineProperty(e.prototype,"blur",{get:function(){return this.uniforms.blur},set:function(t){this.uniforms.blur=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gradientBlur",{get:function(){return this.uniforms.gradientBlur},set:function(t){this.uniforms.gradientBlur=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.uniforms.start},set:function(t){this.uniforms.start=t,this.updateDelta()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.uniforms.end},set:function(t){this.uniforms.end=t,this.updateDelta()},enumerable:!1,configurable:!0}),e}(e.Filter),z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.updateDelta=function(){var t=this.uniforms.end.x-this.uniforms.start.x,e=this.uniforms.end.y-this.uniforms.start.y,r=Math.sqrt(t*t+e*e);this.uniforms.delta.x=t/r,this.uniforms.delta.y=e/r},e}(j),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.updateDelta=function(){var t=this.uniforms.end.x-this.uniforms.start.x,e=this.uniforms.end.y-this.uniforms.start.y,r=Math.sqrt(t*t+e*e);this.uniforms.delta.x=-e/r,this.uniforms.delta.y=t/r},e}(j),Y=function(t){function e(e,r,n,i){void 0===e&&(e=100),void 0===r&&(r=600);var o=t.call(this)||this;return o.tiltShiftXFilter=new z(e,r,n,i),o.tiltShiftYFilter=new H(e,r,n,i),o}return h(e,t),e.prototype.apply=function(t,e,r,n){var i=t.getFilterTexture();this.tiltShiftXFilter.apply(t,e,i,1),this.tiltShiftYFilter.apply(t,i,r,n),t.returnFilterTexture(i)},Object.defineProperty(e.prototype,"blur",{get:function(){return this.tiltShiftXFilter.blur},set:function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gradientBlur",{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.tiltShiftXFilter.start},set:function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.tiltShiftXFilter.end},set:function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t},enumerable:!1,configurable:!0}),e}(e.Filter),V=function(t){function e(r){var n=t.call(this,c,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 twist(vec2 coord)\n{\n    coord -= offset;\n\n    float dist = length(coord);\n\n    if (dist < radius)\n    {\n        float ratioDist = (radius - dist) / radius;\n        float angleMod = ratioDist * ratioDist * angle;\n        float s = sin(angleMod);\n        float c = cos(angleMod);\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n    }\n\n    coord += offset;\n\n    return coord;\n}\n\nvoid main(void)\n{\n\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = twist(coord);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord );\n\n}\n")||this;return Object.assign(n,e.defaults,r),n}return h(e,t),Object.defineProperty(e.prototype,"offset",{get:function(){return this.uniforms.offset},set:function(t){this.uniforms.offset=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(t){this.uniforms.radius=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(t){this.uniforms.angle=t},enumerable:!1,configurable:!0}),e.defaults={radius:200,angle:4,padding:20,offset:new r.Point},e}(e.Filter),W=function(t){function e(r){var n,i=Object.assign(e.defaults,r),o=i.maxKernelSize,s=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}(i,["maxKernelSize"]);return n=t.call(this,c,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = ${maxKernelSize};\n\n// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand(vec2 co, float seed) {\n    const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);\n    return fract(sin(sn) * c + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = rand(vTextureCoord, 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    color /= total;\n    // switch back from pre-multiplied alpha\n    // color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n".replace("${maxKernelSize}",o.toFixed(1)))||this,Object.assign(n,s),n}return h(e,t),Object.defineProperty(e.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(t){this.uniforms.uCenter=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this.uniforms.uStrength},set:function(t){this.uniforms.uStrength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.uniforms.uInnerRadius},set:function(t){this.uniforms.uInnerRadius=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(t){(t<0||t===1/0)&&(t=-1),this.uniforms.uRadius=t},enumerable:!1,configurable:!0}),e.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32},e}(e.Filter);return t.AdjustmentFilter=f,t.AdvancedBloomFilter=m,t.AsciiFilter=g,t.BevelFilter=v,t.BloomFilter=_,t.BulgePinchFilter=y,t.CRTFilter=A,t.ColorMapFilter=b,t.ColorOverlayFilter=x,t.ColorReplaceFilter=T,t.ConvolutionFilter=E,t.CrossHatchFilter=S,t.DotFilter=O,t.DropShadowFilter=R,t.EmbossFilter=w,t.GlitchFilter=M,t.GlowFilter=P,t.GodrayFilter=I,t.KawaseBlurFilter=p,t.MotionBlurFilter=C,t.MultiColorReplaceFilter=D,t.OldFilmFilter=F,t.OutlineFilter=L,t.PixelateFilter=N,t.RGBSplitFilter=G,t.RadialBlurFilter=B,t.ReflectionFilter=U,t.ShockwaveFilter=k,t.SimpleLightmapFilter=X,t.TiltShiftAxisFilter=j,t.TiltShiftFilter=Y,t.TiltShiftXFilter=z,t.TiltShiftYFilter=H,t.TwistFilter=V,t.ZoomBlurFilter=W,Object.defineProperty(t,"__esModule",{value:!0}),t}({},o,o,o,o.utils,o,o.filters,o.filters);Object.assign(o.filters,s);var a=function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default.BezierEasing??t:t.BezierEasing??t}var e=.1,r="function"==typeof Float32Array;function n(t,e){return 1-3*e+3*t}function i(t,e){return 3*e-6*t}function o(t){return 3*t}function s(t,e,r){return((n(e,r)*t+i(e,r))*t+o(e))*t}function a(t,e,r){return 3*n(e,r)*t*t+2*i(e,r)*t+o(e)}function u(t){return t}return t((function(t,n,i,o){if(!(0<=t&&t<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===n&&i===o)return u;for(var h=r?new Float32Array(11):new Array(11),l=0;l<11;++l)h[l]=s(l*e,t,i);function c(r){for(var n=0,o=1;10!==o&&h[o]<=r;++o)n+=e;--o;var u=n+(r-h[o])/(h[o+1]-h[o])*e,l=a(u,t,i);return l>=.001?function(t,e,r,n){for(var i=0;i<4;++i){var o=a(e,r,n);if(0===o)return e;e-=(s(e,r,n)-t)/o}return e}(r,u,t,i):0===l?u:function(t,e,r,n,i){var o,a,u=0;do{(o=s(a=e+(r-e)/2,n,i)-t)>0?r=a:e=a}while(Math.abs(o)>1e-7&&++u<10);return a}(r,n,n+e,t,i)}return function(t){return 0===t?0:1===t?1:s(c(t),n,o)}}))}(),u=function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default.Identicon??t:t.Identicon??t}var r,n={exports:{}},i={exports:{}};function o(){return r||(r=1,function(t){!function(){function e(t,e){for(var r=2;r<arguments.length;r++)for(var n=0;n<arguments[r].length;n++)t[e++]=arguments[r].charAt(n)}function r(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)}function n(t){return String.fromCharCode(255&t,t>>8&255)}t.exports=function(t,i,o){this.width=t,this.height=i,this.depth=o,this.pix_size=i*(t+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=25,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=8+3*o+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=8+o+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=8+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=12,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var s=new Array,a=0;a<this.buffer_size;a++)this.buffer[a]="\0";e(this.buffer,this.ihdr_offs,r(this.ihdr_size-12),"IHDR",r(t),r(i),"\b"),e(this.buffer,this.plte_offs,r(this.plte_size-12),"PLTE"),e(this.buffer,this.trns_offs,r(this.trns_size-12),"tRNS"),e(this.buffer,this.idat_offs,r(this.idat_size-12),"IDAT"),e(this.buffer,this.iend_offs,r(this.iend_size-12),"IEND");var u,h=30912;for(h+=31-h%31,e(this.buffer,this.idat_offs+8,(u=h,String.fromCharCode(u>>8&255,255&u))),a=0;(a<<16)-1<this.pix_size;a++){var l,c;a+65535<this.pix_size?(l=65535,c="\0"):(l=this.pix_size-(a<<16)-a,c=""),e(this.buffer,this.idat_offs+8+2+(a<<16)+(a<<2),c,n(l),n(~l))}for(a=0;a<256;a++){for(var f=a,d=0;d<8;d++)f=1&f?-306674912^f>>1&2147483647:f>>1&2147483647;s[a]=f}this.index=function(t,e){var r=e*(this.width+1)+t+1;return this.idat_offs+8+2+5*Math.floor(r/65535+1)+r},this.color=function(t,e,r,n){var i=(((n=n>=0?n:255)<<8|t)<<8|e)<<8|r;if(void 0===this.palette[i]){if(this.pindex==this.depth)return"\0";var o=this.plte_offs+8+3*this.pindex;this.buffer[o+0]=String.fromCharCode(t),this.buffer[o+1]=String.fromCharCode(e),this.buffer[o+2]=String.fromCharCode(r),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(n),this.palette[i]=String.fromCharCode(this.pindex++)}return this.palette[i]},this.getBase64=function(){var t,e,r,n,i,o,s,a=this.getDump(),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=a.length,l=0,c="";do{n=(t=a.charCodeAt(l))>>2,i=(3&t)<<4|(e=a.charCodeAt(l+1))>>4,r=a.charCodeAt(l+2),o=h<l+2?64:(15&e)<<2|r>>6,s=h<l+3?64:63&r,c+=u.charAt(n)+u.charAt(i)+u.charAt(o)+u.charAt(s)}while((l+=3)<h);return c},this.getDump=function(){for(var t=65521,n=1,i=0,o=5552,a=0;a<this.height;a++)for(var u=-1;u<this.width;u++)i+=n+=this.buffer[this.index(u,a)].charCodeAt(0),0==(o-=1)&&(n%=t,i%=t,o=5552);function h(t,n,i){for(var o=-1,a=4;a<i-4;a+=1)o=s[255&(o^t[n+a].charCodeAt(0))]^o>>8&16777215;e(t,n+i-4,r(~o))}return n%=t,i%=t,e(this.buffer,this.idat_offs+this.idat_size-8,r(i<<16|n)),h(this.buffer,this.ihdr_offs,this.ihdr_size),h(this.buffer,this.plte_offs,this.plte_size),h(this.buffer,this.trns_offs,this.trns_size),h(this.buffer,this.idat_offs,this.idat_size),h(this.buffer,this.iend_offs,this.iend_size),"PNG\r\n\n"+this.buffer.join("")}}}()}(i)),i.exports}return function(t){!function(){var r;r=o();var n=function(t,e){if("string"!=typeof t||t.length<15)throw"A hash of at least 15 characters is required.";this.defaults={background:[240,240,240,255],margin:.08,size:64,saturation:.7,brightness:.5,format:"png"},this.options="object"==typeof e?e:this.defaults,"number"==typeof arguments[1]&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=t,this.background=this.options.background||this.defaults.background,this.size=this.options.size||this.defaults.size,this.format=this.options.format||this.defaults.format,this.margin=void 0!==this.options.margin?this.options.margin:this.defaults.margin;var r=parseInt(this.hash.substr(-7),16)/268435455,n=this.options.saturation||this.defaults.saturation,i=this.options.brightness||this.defaults.brightness;this.foreground=this.options.foreground||this.hsl2rgb(r,n,i)};n.prototype={background:null,foreground:null,hash:null,margin:null,size:null,format:null,image:function(){return this.isSvg()?new i(this.size,this.foreground,this.background):new r(this.size,this.size,256)},render:function(){var t,e,r=this.image(),n=this.size,i=Math.floor(n*this.margin),o=Math.floor((n-2*i)/5),s=Math.floor((n-5*o)/2),a=r.color.apply(r,this.background),u=r.color.apply(r,this.foreground);for(t=0;t<15;t++)e=parseInt(this.hash.charAt(t),16)%2?a:u,t<5?this.rectangle(2*o+s,t*o+s,o,o,e,r):t<10?(this.rectangle(1*o+s,(t-5)*o+s,o,o,e,r),this.rectangle(3*o+s,(t-5)*o+s,o,o,e,r)):t<15&&(this.rectangle(0*o+s,(t-10)*o+s,o,o,e,r),this.rectangle(4*o+s,(t-10)*o+s,o,o,e,r));return r},rectangle:function(t,e,r,n,i,o){var s,a;if(this.isSvg())o.rectangles.push({x:t,y:e,w:r,h:n,color:i});else for(s=t;s<t+r;s++)for(a=e;a<e+n;a++)o.buffer[o.index(s,a)]=i},hsl2rgb:function(t,e,r){return[255*(e=[r+=e*=r<.5?r:1-r,r-(t*=6)%1*e*2,r-=e*=2,r,r+t%1*e,r+e])[~~t%6],255*e[(16|t)%6],255*e[(8|t)%6]]},toString:function(t){return t?this.render().getDump():this.render().getBase64()},isSvg:function(){return this.format.match(/svg/i)}};var i=function(t,e,r){this.size=t,this.foreground=this.color.apply(this,e),this.background=this.color.apply(this,r),this.rectangles=[]};i.prototype={size:null,foreground:null,background:null,rectangles:null,color:function(t,e,r,n){var i=[t,e,r].map(Math.round);return i.push(n>=0&&n<=255?n/255:1),"rgba("+i.join(",")+")"},getDump:function(){var t,e,r,n=this.foreground,i=this.background,o=.005*this.size;for(e="<svg xmlns='http://www.w3.org/2000/svg' width='"+this.size+"' height='"+this.size+"' style='background-color:"+i+";'><g style='fill:"+n+"; stroke:"+n+"; stroke-width:"+o+";'>",t=0;t<this.rectangles.length;t++)(r=this.rectangles[t]).color!=i&&(e+="<rect  x='"+r.x+"' y='"+r.y+"' width='"+r.w+"' height='"+r.h+"'/>");return e+="</g></svg>"},getBase64:function(){if("function"==typeof btoa)return btoa(this.getDump());if(e)return new e(this.getDump(),"binary").toString("base64");throw"Cannot generate base64 output"}},t.exports=n}()}(n),t(n.exports)}();(function(){"use strict";var t,e,r="object"==typeof global&&global&&global.Object===Object&&global,n="object"==typeof self&&self&&self.Object===Object&&self,i=r||n||Function("return this")(),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=o&&"object"==typeof module&&module&&!module.nodeType&&module,a=i.QRCode;function u(t,e,r){if(this.mode=l.MODE_8BIT_BYTE,this.data=t,this.parsedData=[],e){for(var n=0,i=this.data.length;n<i;n++){var o=[],s=this.data.charCodeAt(n);o[0]=s,this.parsedData.push(o)}this.parsedData=Array.prototype.concat.apply([],this.parsedData)}else this.parsedData=function(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&t.charCodeAt(r)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return e}(t);this.parsedData=Array.prototype.concat.apply([],this.parsedData),r||this.parsedData.length==this.data.length||(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function h(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}u.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;e<r;e++)t.put(this.parsedData[e],8)}},h.prototype={addData:function(t,e,r){var n=new u(t,e,r);this.dataList.push(n),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e][0]},getEye:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);var r=this.modules[t][e];if(r[1]){var n="P"+r[1]+"_"+r[2];return"A"==r[2]&&(n="A"+r[1]),{isDark:r[0],type:n}}return null},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=[]}this.setupPositionProbePattern(0,0,"TL"),this.setupPositionProbePattern(this.moduleCount-7,0,"BL"),this.setupPositionProbePattern(0,this.moduleCount-7,"TR"),this.setupPositionAdjustPattern("A"),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=h.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e,r){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4?(this.modules[t+n][e+i][0]=!0,this.modules[t+n][e+i][2]=r,this.modules[t+n][e+i][1]=-0==n||-0==i||6==n||6==i?"O":"I"):this.modules[t+n][e+i][0]=!1)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=b.getLostPoint(this);(0==r||t>n)&&(t=n,e=r)}return e},createMovieClip:function(t,e,r){var n=t.createEmptyMovieClip(e,r);this.make();for(var i=0;i<this.modules.length;i++)for(var o=1*i,s=0;s<this.modules[i].length;s++){var a=1*s;this.modules[i][s][0]&&(n.beginFill(0,100),n.moveTo(a,o),n.lineTo(a+1,o),n.lineTo(a+1,o+1),n.lineTo(a,o+1),n.endFill())}return n},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6][0]&&(this.modules[t][6][0]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e][0]&&(this.modules[6][e][0]=e%2==0)},setupPositionAdjustPattern:function(t){for(var e=b.getPatternPosition(this.typeNumber),r=0;r<e.length;r++)for(var n=0;n<e.length;n++){var i=e[r],o=e[n];if(null==this.modules[i][o][0])for(var s=-2;s<=2;s++)for(var a=-2;a<=2;a++)-2==s||2==s||-2==a||2==a||0==s&&0==a?(this.modules[i+s][o+a][0]=!0,this.modules[i+s][o+a][2]=t,this.modules[i+s][o+a][1]=-2==s||-2==a||2==s||2==a?"O":"I"):this.modules[i+s][o+a][0]=!1}},setupTypeNumber:function(t){for(var e=b.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3][0]=n}for(r=0;r<18;r++){n=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)][0]=n}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,n=b.getBCHTypeInfo(r),i=0;i<15;i++){var o=!t&&1==(n>>i&1);i<6?this.modules[i][8][0]=o:i<8?this.modules[i+1][8][0]=o:this.modules[this.moduleCount-15+i][8][0]=o}for(i=0;i<15;i++){o=!t&&1==(n>>i&1);i<8?this.modules[8][this.moduleCount-i-1][0]=o:i<9?this.modules[8][15-i-1+1][0]=o:this.modules[8][15-i-1][0]=o}this.modules[this.moduleCount-8][8][0]=!t},mapData:function(t,e){for(var r=-1,n=this.moduleCount-1,i=7,o=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var a=0;a<2;a++)if(null==this.modules[n][s-a][0]){var u=!1;o<t.length&&(u=1==(t[o]>>>i&1)),b.getMask(e,n,s-a)&&(u=!u),this.modules[n][s-a][0]=u,-1==--i&&(o++,i=7)}if((n+=r)<0||this.moduleCount<=n){n-=r,r=-r;break}}}},h.PAD0=236,h.PAD1=17,h.createData=function(t,e,r){for(var n=S.getRSBlocks(t,e),i=new A,o=0;o<r.length;o++){var s=r[o];i.put(s.mode,4),i.put(s.getLength(),b.getLengthInBits(s.mode,t)),s.write(i)}var a=0;for(o=0;o<n.length;o++)a+=n[o].dataCount;if(i.getLengthInBits()>8*a)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*a+")");for(i.getLengthInBits()+4<=8*a&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*a||(i.put(h.PAD0,8),i.getLengthInBits()>=8*a));)i.put(h.PAD1,8);return h.createBytes(i,n)},h.createBytes=function(t,e){for(var r=0,n=0,i=0,o=new Array(e.length),s=new Array(e.length),a=0;a<e.length;a++){var u=e[a].dataCount,h=e[a].totalCount-u;n=Math.max(n,u),i=Math.max(i,h),o[a]=new Array(u);for(var l=0;l<o[a].length;l++)o[a][l]=255&t.buffer[l+r];r+=u;var c=b.getErrorCorrectPolynomial(h),f=new E(o[a],c.getLength()-1).mod(c);s[a]=new Array(c.getLength()-1);for(l=0;l<s[a].length;l++){var d=l+f.getLength()-s[a].length;s[a][l]=d>=0?f.get(d):0}}var p=0;for(l=0;l<e.length;l++)p+=e[l].totalCount;var m=new Array(p),g=0;for(l=0;l<n;l++)for(a=0;a<e.length;a++)l<o[a].length&&(m[g++]=o[a][l]);for(l=0;l<i;l++)for(a=0;a<e.length;a++)l<s[a].length&&(m[g++]=s[a][l]);return m};for(var l={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},c={L:1,M:0,Q:3,H:2},f=0,d=1,p=2,m=3,g=4,v=5,_=6,y=7,b={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;b.getBCHDigit(e)-b.getBCHDigit(b.G15)>=0;)e^=b.G15<<b.getBCHDigit(e)-b.getBCHDigit(b.G15);return(t<<10|e)^b.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;b.getBCHDigit(e)-b.getBCHDigit(b.G18)>=0;)e^=b.G18<<b.getBCHDigit(e)-b.getBCHDigit(b.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return b.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case f:return(e+r)%2==0;case d:return e%2==0;case p:return r%3==0;case m:return(e+r)%3==0;case g:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case v:return e*r%2+e*r%3==0;case _:return(e*r%2+e*r%3)%2==0;case y:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new E([1],0),r=0;r<t;r++)e=e.multiply(new E([1,x.gexp(r)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case l.MODE_NUMBER:return 10;case l.MODE_ALPHA_NUM:return 9;case l.MODE_8BIT_BYTE:case l.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case l.MODE_NUMBER:return 12;case l.MODE_ALPHA_NUM:return 11;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case l.MODE_NUMBER:return 14;case l.MODE_ALPHA_NUM:return 13;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n++)for(var i=0;i<e;i++){for(var o=0,s=t.isDark(n,i),a=-1;a<=1;a++)if(!(n+a<0||e<=n+a))for(var u=-1;u<=1;u++)i+u<0||e<=i+u||0==a&&0==u||s==t.isDark(n+a,i+u)&&o++;o>5&&(r+=3+o-5)}for(n=0;n<e-1;n++)for(i=0;i<e-1;i++){var h=0;t.isDark(n,i)&&h++,t.isDark(n+1,i)&&h++,t.isDark(n,i+1)&&h++,t.isDark(n+1,i+1)&&h++,0!=h&&4!=h||(r+=3)}for(n=0;n<e;n++)for(i=0;i<e-6;i++)t.isDark(n,i)&&!t.isDark(n,i+1)&&t.isDark(n,i+2)&&t.isDark(n,i+3)&&t.isDark(n,i+4)&&!t.isDark(n,i+5)&&t.isDark(n,i+6)&&(r+=40);for(i=0;i<e;i++)for(n=0;n<e-6;n++)t.isDark(n,i)&&!t.isDark(n+1,i)&&t.isDark(n+2,i)&&t.isDark(n+3,i)&&t.isDark(n+4,i)&&!t.isDark(n+5,i)&&t.isDark(n+6,i)&&(r+=40);var l=0;for(i=0;i<e;i++)for(n=0;n<e;n++)t.isDark(n,i)&&l++;return r+=10*(Math.abs(100*l/e/e-50)/5)}},x={glog:function(t){if(t<1)throw new Error("glog("+t+")");return x.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return x.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},T=0;T<8;T++)x.EXP_TABLE[T]=1<<T;for(T=8;T<256;T++)x.EXP_TABLE[T]=x.EXP_TABLE[T-4]^x.EXP_TABLE[T-5]^x.EXP_TABLE[T-6]^x.EXP_TABLE[T-8];for(T=0;T<255;T++)x.LOG_TABLE[x.EXP_TABLE[T]]=T;function E(e,r){if(e.length==t)throw new Error(e.length+"/"+r);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+r);for(var i=0;i<e.length-n;i++)this.num[i]=e[i+n]}function S(t,e){this.totalCount=t,this.dataCount=e}function A(){this.buffer=[],this.length=0}E.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<t.getLength();n++)e[r+n]^=x.gexp(x.glog(this.get(r))+x.glog(t.get(n)));return new E(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=x.glog(this.get(0))-x.glog(t.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(n=0;n<t.getLength();n++)r[n]^=x.gexp(x.glog(t.get(n))+e);return new E(r,0).mod(t)}},S.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],S.getRSBlocks=function(e,r){var n=S.getRsBlockTable(e,r);if(n==t)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+r);for(var i=n.length/3,o=[],s=0;s<i;s++)for(var a=n[3*s+0],u=n[3*s+1],h=n[3*s+2],l=0;l<a;l++)o.push(new S(u,h));return o},S.getRsBlockTable=function(e,r){switch(r){case c.L:return S.RS_BLOCK_TABLE[4*(e-1)+0];case c.M:return S.RS_BLOCK_TABLE[4*(e-1)+1];case c.Q:return S.RS_BLOCK_TABLE[4*(e-1)+2];case c.H:return S.RS_BLOCK_TABLE[4*(e-1)+3];default:return t}},A.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;r<e;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var O=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function R(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var r=e.toString().match(/android ([0-9]\.[0-9])/i);r&&r[1]&&(t=parseFloat(r[1]))}return t}var w="undefined"==typeof CanvasRenderingContext2D?function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){var e=this._htOption,r=this._el,n=t.getModuleCount(),i=e.width/n,o=e.height/n;i<=1&&(i=1),o<=1&&(o=1);var s=i*n,a=o*n;e.heightWithTitle=a+e.titleHeight,e.realHeight=e.heightWithTitle+2*e.quietZone,e.realWidth=s+2*e.quietZone;var u=[],h="",l=Math.round(i*e.dotScale),c=Math.round(o*e.dotScale);l<4&&(l=4,c=4);var f=e.colorDark,d=e.colorLight;if(e.backgroundImage){e.autoColor?(e.colorDark="rgba(0, 0, 0, .6);filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr='#99000000', EndColorStr='#99000000');",e.colorLight="rgba(255, 255, 255, .7);filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr='#B2FFFFFF', EndColorStr='#B2FFFFFF');"):e.colorLight="rgba(0,0,0,0)";var p='<div style="display:inline-block; z-index:-10;position:absolute;"><img src="'+e.backgroundImage+'" width="'+(e.width+2*e.quietZone)+'" height="'+e.realHeight+'" style="opacity:'+e.backgroundImageAlpha+";filter:alpha(opacity="+100*e.backgroundImageAlpha+'); "/></div>';u.push(p)}if(e.quietZone&&(h="display:inline-block; width:"+(e.width+2*e.quietZone)+"px; height:"+(e.width+2*e.quietZone)+"px;background:"+e.quietZoneColor+"; text-align:center;"),u.push('<div style="font-size:0;'+h+'">'),u.push('<table  style="font-size:0;border:0;border-collapse:collapse; margin-top:'+e.quietZone+'px;" border="0" cellspacing="0" cellspadding="0" align="center" valign="middle">'),u.push('<tr height="'+e.titleHeight+'" align="center"><td style="border:0;border-collapse:collapse;margin:0;padding:0" colspan="'+n+'">'),e.title){var m=e.titleColor,g=e.titleFont;u.push('<div style="width:100%;margin-top:'+e.titleTop+"px;color:"+m+";font:"+g+";background:"+e.titleBackgroundColor+'">'+e.title+"</div>")}e.subTitle&&u.push('<div style="width:100%;margin-top:'+(e.subTitleTop-e.titleTop)+"px;color:"+e.subTitleColor+"; font:"+e.subTitleFont+'">'+e.subTitle+"</div>"),u.push("</td></tr>");for(var v=0;v<n;v++){u.push('<tr style="border:0; padding:0; margin:0;" height="7">');for(var _=0;_<n;_++){var y=t.isDark(v,_),b=t.getEye(v,_);if(b){y=b.isDark;var x=b.type,T=e[x]||e[x.substring(0,2)]||f;u.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+o+'px;"><span style="width:'+i+"px;height:"+o+"px;background-color:"+(y?T:d)+';display:inline-block"></span></td>')}else{var E=e.colorDark;6==v?(E=e.timing_H||e.timing||f,u.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+o+"px;background-color:"+(y?E:d)+';"></td>')):6==_?(E=e.timing_V||e.timing||f,u.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+o+"px;background-color:"+(y?E:d)+';"></td>')):u.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+o+'px;"><div style="display:inline-block;width:'+l+"px;height:"+c+"px;background-color:"+(y?E:e.colorLight)+';"></div></td>')}}u.push("</tr>")}if(u.push("</table>"),u.push("</div>"),e.logo){var S=new Image;null!=e.crossOrigin&&(S.crossOrigin=e.crossOrigin),S.src=e.logo;var A=e.width/3.5,O=e.height/3.5;A!=O&&(A=O),e.logoWidth&&(A=e.logoWidth),e.logoHeight&&(O=e.logoHeight);var R="position:relative; z-index:1;display:table-cell;top:-"+(e.height/2+O/2+e.quietZone)+"px;text-align:center; width:"+A+"px; height:"+O+"px;line-height:"+A+"px; vertical-align: middle;";e.logoBackgroundTransparent||(R+="background:"+e.logoBackgroundColor),u.push('<div style="'+R+'"><img  src="'+e.logo+'"  style="max-width: '+A+"px; max-height: "+O+'px;" /> <div style=" display: none; width:1px;margin-left: -1px;"></div></div>')}e.onRenderingStart&&e.onRenderingStart(e),r.innerHTML=u.join("");var w=r.childNodes[0],M=(e.width-w.offsetWidth)/2,P=(e.heightWithTitle-w.offsetHeight)/2;M>0&&P>0&&(w.style.margin=P+"px "+M+"px"),this._htOption.onRenderingEnd&&this._htOption.onRenderingEnd(this._htOption,null)},t.prototype.clear=function(){this._el.innerHTML=""},t}():function(){function t(){if("svg"==this._htOption.drawer){var t=this._oContext.getSerializedSvg(!0);this.dataURL=t,this._el.innerHTML=t}else try{var e=this._elCanvas.toDataURL("image/png");this.dataURL=e}catch(t){console.error(t)}this._htOption.onRenderingEnd&&(this.dataURL||console.error("Can not get base64 data, please check: 1. Published the page and image to the server 2. The image request support CORS 3. Configured `crossOrigin:'anonymous'` option"),this._htOption.onRenderingEnd(this._htOption,this.dataURL))}if(i._android&&i._android<=2.1){var e=1/window.devicePixelRatio,r=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,n,i,o,s,a,u,h,l){if("nodeName"in t&&/img/i.test(t.nodeName))for(var c=arguments.length-1;c>=1;c--)arguments[c]=arguments[c]*e;else void 0===h&&(arguments[1]*=e,arguments[2]*=e,arguments[3]*=e,arguments[4]*=e);r.apply(this,arguments)}}function n(t,e){var r=this;if(r._fFail=e,r._fSuccess=t,null===r._bSupportDataURI){var n=document.createElement("img"),i=function(){r._bSupportDataURI=!1,r._fFail&&r._fFail.call(r)};n.onabort=i,n.onerror=i,n.onload=function(){r._bSupportDataURI=!0,r._fSuccess&&r._fSuccess.call(r)},n.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="}else!0===r._bSupportDataURI&&r._fSuccess?r._fSuccess.call(r):!1===r._bSupportDataURI&&r._fFail&&r._fFail.call(r)}var o=function(t,e){this._bIsPainted=!1,this._android=R(),this._el=t,this._htOption=e,"svg"==this._htOption.drawer?(this._oContext={},this._elCanvas={}):(this._elCanvas=document.createElement("canvas"),this._el.appendChild(this._elCanvas),this._oContext=this._elCanvas.getContext("2d")),this._bSupportDataURI=null,this.dataURL=null};return o.prototype.draw=function(t){var e=this._htOption,r=t.getModuleCount(),n=e.width/r,i=e.height/r;n<=1&&(n=1),i<=1&&(i=1);var o=n*r,s=i*r;e.heightWithTitle=s+e.titleHeight,e.realHeight=e.heightWithTitle+2*e.quietZone,e.realWidth=o+2*e.quietZone,this._elCanvas.width=e.realWidth,this._elCanvas.height=e.realHeight,"canvas"!=e.drawer&&(this._oContext=new C2S(this._elCanvas.width,this._elCanvas.height)),this.clear();var a=this._oContext;a.lineWidth=0,a.fillStyle=e.colorLight,a.fillRect(0,0,this._elCanvas.width,this._elCanvas.height),a.clearRect(e.quietZone,e.quietZone,e.width,e.titleHeight);var u=this;function h(){e.quietZone>0&&e.quietZoneColor&&(a.lineWidth=0,a.fillStyle=e.quietZoneColor,a.fillRect(0,0,u._elCanvas.width,e.quietZone),a.fillRect(0,e.quietZone,e.quietZone,u._elCanvas.height-2*e.quietZone),a.fillRect(u._elCanvas.width-e.quietZone,e.quietZone,e.quietZone,u._elCanvas.height-2*e.quietZone),a.fillRect(0,u._elCanvas.height-e.quietZone,u._elCanvas.width,e.quietZone))}if(e.backgroundImage){var l=new Image;l.onload=function(){a.globalAlpha=1,a.globalAlpha=e.backgroundImageAlpha;var r=a.imageSmoothingQuality,n=a.imageSmoothingEnabled;a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high",(e.title||e.subTitle)&&e.titleHeight?a.drawImage(l,e.quietZone,e.quietZone+e.titleHeight,e.width,e.height):a.drawImage(l,0,0,e.realWidth,e.realHeight),a.imageSmoothingEnabled=n,a.imageSmoothingQuality=r,a.globalAlpha=1,c.call(u,t)},null!=e.crossOrigin&&(l.crossOrigin=e.crossOrigin),l.originalSrc=e.backgroundImage,l.src=e.backgroundImage}else c.call(u,t);function c(t){e.onRenderingStart&&e.onRenderingStart(e);for(var o=0;o<r;o++)for(var s=0;s<r;s++){var u,l,c=s*n+e.quietZone,f=o*i+e.quietZone,d=t.isDark(o,s),p=t.getEye(o,s),m=e.dotScale;a.lineWidth=0,p?(u=e[p.type]||e[p.type.substring(0,2)]||e.colorDark,l=e.colorLight):e.backgroundImage?(l="rgba(0,0,0,0)",6==o?e.autoColor?(u=e.timing_H||e.timing||e.autoColorDark,l=e.autoColorLight):u=e.timing_H||e.timing||e.colorDark:6==s?e.autoColor?(u=e.timing_V||e.timing||e.autoColorDark,l=e.autoColorLight):u=e.timing_V||e.timing||e.colorDark:e.autoColor?(u=e.autoColorDark,l=e.autoColorLight):u=e.colorDark):(u=6==o?e.timing_H||e.timing||e.colorDark:6==s&&(e.timing_V||e.timing)||e.colorDark,l=e.colorLight),a.strokeStyle=d?u:l,a.fillStyle=d?u:l,p?(m="AO"==p.type?e.dotScaleAO:"AI"==p.type?e.dotScaleAI:1,e.backgroundImage&&e.autoColor?(u=("AO"==p.type?e.AI:e.AO)||e.autoColorDark,l=e.autoColorLight):u=("AO"==p.type?e.AI:e.AO)||u,d=p.isDark,a.fillRect(Math.ceil(c+n*(1-m)/2),Math.ceil(e.titleHeight+f+i*(1-m)/2),Math.ceil(n*m),Math.ceil(i*m))):6==o?(m=e.dotScaleTiming_H,a.fillRect(Math.ceil(c+n*(1-m)/2),Math.ceil(e.titleHeight+f+i*(1-m)/2),Math.ceil(n*m),Math.ceil(i*m))):6==s?(m=e.dotScaleTiming_V,a.fillRect(Math.ceil(c+n*(1-m)/2),Math.ceil(e.titleHeight+f+i*(1-m)/2),Math.ceil(n*m),Math.ceil(i*m))):(e.backgroundImage,a.fillRect(Math.ceil(c+n*(1-m)/2),Math.ceil(e.titleHeight+f+i*(1-m)/2),Math.ceil(n*m),Math.ceil(i*m))),1==e.dotScale||p||(a.strokeStyle=e.colorLight)}if(e.title&&(a.fillStyle=e.titleBackgroundColor,a.fillRect(e.quietZone,e.quietZone,e.width,e.titleHeight),a.font=e.titleFont,a.fillStyle=e.titleColor,a.textAlign="center",a.fillText(e.title,this._elCanvas.width/2,+e.quietZone+e.titleTop)),e.subTitle&&(a.font=e.subTitleFont,a.fillStyle=e.subTitleColor,a.fillText(e.subTitle,this._elCanvas.width/2,+e.quietZone+e.subTitleTop)),e.logo){var g=new Image,v=this;g.onload=function(){!function(t){var r,n,i=Math.round(e.width/3.5),o=Math.round(e.height/3.5);i!==o&&(i=o),e.logoMaxWidth?i=Math.round(e.logoMaxWidth):e.logoWidth&&(i=Math.round(e.logoWidth)),e.logoMaxHeight?o=Math.round(e.logoMaxHeight):e.logoHeight&&(o=Math.round(e.logoHeight)),void 0===t.naturalWidth?(r=t.width,n=t.height):(r=t.naturalWidth,n=t.naturalHeight),(e.logoMaxWidth||e.logoMaxHeight)&&(e.logoMaxWidth&&r<=i&&(i=r),e.logoMaxHeight&&n<=o&&(o=n),r<=i&&n<=o&&(i=r,o=n));var s=(e.realWidth-i)/2,u=(e.realHeight-o)/2,l=Math.min(i/r,o/n),c=r*l,f=n*l;(e.logoMaxWidth||e.logoMaxHeight)&&(i=c,o=f,s=(e.realWidth-i)/2,u=(e.realHeight-o)/2),e.logoBackgroundTransparent||(a.fillStyle=e.logoBackgroundColor,a.fillRect(s,u,i,o));var d=a.imageSmoothingQuality,p=a.imageSmoothingEnabled;a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high",a.drawImage(t,s+(i-c)/2,u+(o-f)/2,c,f),a.imageSmoothingEnabled=p,a.imageSmoothingQuality=d,h(),v._bIsPainted=!0,v.makeImage()}(g)},g.onerror=function(t){console.error(t)},null!=e.crossOrigin&&(g.crossOrigin=e.crossOrigin),g.originalSrc=e.logo,g.src=e.logo}else h(),this._bIsPainted=!0,this.makeImage()}},o.prototype.makeImage=function(){this._bIsPainted&&n.call(this,t)},o.prototype.isPainted=function(){return this._bIsPainted},o.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},o.prototype.remove=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1,this._el.innerHTML=""},o.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},o}();function M(t,e){for(var r=e.correctLevel,n=1,i=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length}(t),o=0,s=O.length;o<s;o++){var a=0;switch(r){case c.L:a=O[o][0];break;case c.M:a=O[o][1];break;case c.Q:a=O[o][2];break;case c.H:a=O[o][3]}if(i<=a)break;n++}if(n>O.length)throw new Error("Too long data. the CorrectLevel."+["M","L","H","Q"][r]+" limit length is "+a);return 0!=e.version&&(n<=e.version?(n=e.version,e.runVersion=n):(console.warn("QR Code version "+e.version+" too small, run version use "+n),e.runVersion=n)),n}e=function(e,r){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:c.H,dotScale:1,dotScaleTiming:1,dotScaleTiming_H:t,dotScaleTiming_V:t,dotScaleA:1,dotScaleAO:t,dotScaleAI:t,quietZone:0,quietZoneColor:"rgba(0,0,0,0)",title:"",titleFont:"normal normal bold 16px Arial",titleColor:"#000000",titleBackgroundColor:"#ffffff",titleHeight:0,titleTop:30,subTitle:"",subTitleFont:"normal normal normal 14px Arial",subTitleColor:"#4F4F4F",subTitleTop:60,logo:t,logoWidth:t,logoHeight:t,logoMaxWidth:t,logoMaxHeight:t,logoBackgroundColor:"#ffffff",logoBackgroundTransparent:!1,PO:t,PI:t,PO_TL:t,PI_TL:t,PO_TR:t,PI_TR:t,PO_BL:t,PI_BL:t,AO:t,AI:t,timing:t,timing_H:t,timing_V:t,backgroundImage:t,backgroundImageAlpha:1,autoColor:!1,autoColorDark:"rgba(0, 0, 0, .6)",autoColorLight:"rgba(255, 255, 255, .7)",onRenderingStart:t,onRenderingEnd:t,version:0,tooltip:!1,binary:!1,drawer:"canvas",crossOrigin:null,utf8WithoutBOM:!0},"string"==typeof r&&(r={text:r}),r)for(var n in r)this._htOption[n]=r[n];this._htOption.title||this._htOption.subTitle||(this._htOption.titleHeight=0),(this._htOption.version<0||this._htOption.version>40)&&(console.warn("QR Code version '"+this._htOption.version+"' is invalidate, reset to 0"),this._htOption.version=0),(this._htOption.dotScale<0||this._htOption.dotScale>1)&&(console.warn(this._htOption.dotScale+" , is invalidate, dotScale must greater than 0, less than or equal to 1, now reset to 1. "),this._htOption.dotScale=1),(this._htOption.dotScaleTiming<0||this._htOption.dotScaleTiming>1)&&(console.warn(this._htOption.dotScaleTiming+" , is invalidate, dotScaleTiming must greater than 0, less than or equal to 1, now reset to 1. "),this._htOption.dotScaleTiming=1),this._htOption.dotScaleTiming_H?(this._htOption.dotScaleTiming_H<0||this._htOption.dotScaleTiming_H>1)&&(console.warn(this._htOption.dotScaleTiming_H+" , is invalidate, dotScaleTiming_H must greater than 0, less than or equal to 1, now reset to 1. "),this._htOption.dotScaleTiming_H=1):this._htOption.dotScaleTiming_H=this._htOption.dotScaleTiming,this._htOption.dotScaleTiming_V?(this._htOption.dotScaleTiming_V<0||this._htOption.dotScaleTiming_V>1)&&(console.warn(this._htOption.dotScaleTiming_V+" , is invalidate, dotScaleTiming_V must greater than 0, less than or equal to 1, now reset to 1. "),this._htOption.dotScaleTiming_V=1):this._htOption.dotScaleTiming_V=this._htOption.dotScaleTiming,(this._htOption.dotScaleA<0||this._htOption.dotScaleA>1)&&(console.warn(this._htOption.dotScaleA+" , is invalidate, dotScaleA must greater than 0, less than or equal to 1, now reset to 1. "),this._htOption.dotScaleA=1),this._htOption.dotScaleAO?(this._htOption.dotScaleAO<0||this._htOption.dotScaleAO>1)&&(console.warn(this._htOption.dotScaleAO+" , is invalidate, dotScaleAO must greater than 0, less than or equal to 1, now reset to 1. "),this._htOption.dotScaleAO=1):this._htOption.dotScaleAO=this._htOption.dotScaleA,this._htOption.dotScaleAI?(this._htOption.dotScaleAI<0||this._htOption.dotScaleAI>1)&&(console.warn(this._htOption.dotScaleAI+" , is invalidate, dotScaleAI must greater than 0, less than or equal to 1, now reset to 1. "),this._htOption.dotScaleAI=1):this._htOption.dotScaleAI=this._htOption.dotScaleA,(this._htOption.backgroundImageAlpha<0||this._htOption.backgroundImageAlpha>1)&&(console.warn(this._htOption.backgroundImageAlpha+" , is invalidate, backgroundImageAlpha must between 0 and 1, now reset to 1. "),this._htOption.backgroundImageAlpha=1),this._htOption.quietZone||(this._htOption.quietZone=0),this._htOption.titleHeight||(this._htOption.titleHeight=0),this._htOption.width=Math.round(this._htOption.width),this._htOption.height=Math.round(this._htOption.height),this._htOption.quietZone=Math.round(this._htOption.quietZone),this._htOption.titleHeight=Math.round(this._htOption.titleHeight),"string"==typeof e&&(e=document.getElementById(e)),(!this._htOption.drawer||"svg"!=this._htOption.drawer&&"canvas"!=this._htOption.drawer)&&(this._htOption.drawer="canvas"),this._android=R(),this._el=e,this._oQRCode=null,this._htOption._element=e;var i={};for(var n in this._htOption)i[n]=this._htOption[n];this._oDrawing=new w(this._el,i),this._htOption.text&&this.makeCode(this._htOption.text)},e.prototype.makeCode=function(t){this._oQRCode=new h(M(t,this._htOption),this._htOption.correctLevel),this._oQRCode.addData(t,this._htOption.binary,this._htOption.utf8WithoutBOM),this._oQRCode.make(),this._htOption.tooltip&&(this._el.title=t),this._oDrawing.draw(this._oQRCode)},e.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},e.prototype.clear=function(){this._oDrawing.remove()},e.prototype.resize=function(t,e){this._oDrawing._htOption.width=t,this._oDrawing._htOption.height=e,this._oDrawing.draw(this._oQRCode)},e.prototype.download=function(t){var e=this._oDrawing.dataURL,r=document.createElement("a");if("svg"==this._htOption.drawer){t+=".svg";var n=new Blob([e],{type:"text/plain"});if(navigator.msSaveBlob)navigator.msSaveBlob(n,t);else{r.download=t;var i=new FileReader;i.onload=function(){r.href=i.result,r.click()},i.readAsDataURL(n)}}else if(t+=".png",navigator.msSaveBlob){function s(t){var e=atob(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),i=new Uint8Array(n);for(T=0;T<e.length;T++)i[T]=e.charCodeAt(T);return new Blob([n],{type:r})}var o=s(e);navigator.msSaveBlob(o,t)}else r.download=t,r.href=e,r.click()},e.prototype.noConflict=function(){return i.QRCode===this&&(i.QRCode=a),e},e.CorrectLevel=c,"function"==typeof define&&(define.amd||define.cmd)?define([],(function(){return e})):s?((s.exports=e).QRCode=e,o.QRCode=e):i.QRCode=e}).call(this);
var _={version:"1.7.6",countdown:!1,novault:!1,noceriad:!1,norichpresence:!1,noreplaydispute:!1,supporter_specialthanks_goal:200,xp_multiplier:1,catalog:{supporter:{price:5,price_bulk:4,price_gift:4,price_gift_bulk:4,bulk_after:3,normal_price:5,normal_price_bulk:4,normal_price_gift:4,normal_price_gift_bulk:4,normal_bulk_after:3},"zenith-tower-ost":{price:5.99,normal_price:5.99}},league_mm_roundtime_min:25,league_mm_roundtime_max:50,league_additional_settings:{},league_season:{current:"2",prev:"1",next:null,next_at:null,ranked:!0},zenith_duoisfree:!1,zenith_freemod:!1,zenith_cpu_count:0,zenith_additional_settings:{TEMP_zenith_grace:"[0, 3.8, 3.0, 2.3, 1.7, 1.2, 0.8, 0.5, 0.5, 0.5, 0.2]",messiness_timeout:0},desktop_use_reviq:!1,max_public_rooms_per_user:1,domain:"tetr.io",ch_domain:"ch.tetr.io",mode:"production",sentry_enabled:!0,serverCycle:"ed2190962870",domain_hash:"fcc2cb63183f3f36ec8a46499eece106730a112b",client:{commit:{id:"e62a28551",time:1770063725e3},branch:"master",build:{id:"20260202T202233",time:1770063754317}}};
let l=!0,c=!0;const p={};p.ParticleManager=class extends o.Container{constructor(){super(),this.containers=new Map,this.graveyards=new Map,this.spawners=new Set,o.Ticker.shared.add(this.progress,this),this._rsz=()=>{this._handleResize()},window.addEventListener("resize",this._rsz,!1)}destroy(){o.Ticker.shared.remove(this),window.removeEventListener("resize",this._rsz,!1),super.destroy()}_handleResize(){for(const[,e]of this.containers)e._destroyed||(e.contextWidth=void 0,e.contextHeight=void 0)}progress(e){e<=1.03&&e>=.97&&(e=1),this.progressParticles(e),this.progressSpawners(e)}progressParticles(e){for(const[,t]of this.containers)if(!t._destroyed)for(const n of t.children)n.progress(e)}progressSpawners(e){for(const t of this.spawners)t.progress(e)&&this.spawners.delete(t)}moveAllParticles(e,t){for(const[,n]of this.containers)if(!n._destroyed)for(const s of n.children)s.x+=e,s.y+=t}getOrCreateContainer(e,t){let n=this.containers.get(e);return n||(n=new p.ParticleContainer(2048,{vertices:t.needsVertices,position:!0,rotation:t.needsRotation,uvs:!1,tint:!0},16384,!1),n.blendMode=t.blendmode,n.interactive=!1,this.addChild(n),this.containers.set(e,n),this.graveyards.set(e,[]),n)}getZombie(e){const t=this.graveyards.get(e);return t?t.shift():null}spawnInternal(e){const t=`${e.texture}:${e.blendmode}:${e.needsVertices}:${e.needsRotation}`;e.containerName=t;const n=this.getOrCreateContainer(t,e),s=this.getZombie(t),i=s||new p.Particle(e,this);s&&s.init(e),e.addinback?n.addChildAt(i,0):n.addChild(i)}graveyard(e,t){const n=this.graveyards.get(e.options.containerName);for(n.push(e);n.length>t;)n.pop().destroy()}spawnOne(e){this.spawnInternal(p.ParseSimpleParticleOptions(e))}spawnBurst(e,t){let n=t.amount;if(n<1&&(n=Math.random()<=n?1:0),n){if("disc"===t.shape&&(t.shape="disk"),void 0!==t.radius){const e=2*t.radius;t.width=e,t.height=e}void 0===t.thickness&&(t.thickness=0);for(let s=0;s<n;s++){let n=t.x,s=t.y;if("rectangle"===t.shape)n+=(Math.random()-.5)*t.width,s+=(Math.random()-.5)*t.height;else if("box"===t.shape){const e=Math.random()<.5,i=!e;n+=(e?Math.random()-.5<0?-.5:.5:Math.random()-.5)*t.width+(Math.random()-.5)*t.thickness,s+=(i?Math.random()-.5<0?-.5:.5:Math.random()-.5)*t.height+(Math.random()-.5)*t.thickness}else if("line"===t.shape){const e=Math.random();n+=e*(t.linePointB[0]-t.linePointA[0])+t.linePointA[0]+(Math.random()-.5)*t.thickness,s+=e*(t.linePointB[1]-t.linePointA[1])+t.linePointA[1]+(Math.random()-.5)*t.thickness}else if("disk"===t.shape){const e=o.PI_2*Math.random();n+=Math.random()*(t.width/2)*Math.sin(e),s+=Math.random()*(t.height/2)*Math.cos(e)}else if("circle"===t.shape){const e=o.PI_2*Math.random();n+=(t.width/2+(Math.random()-.5)*t.thickness)*Math.sin(e),s+=(t.height/2+(Math.random()-.5)*t.thickness)*Math.cos(e)}e.x=n,e.y=s,void 0!==t.directionOverride&&(e.direction=Math.atan2(s-t.y,n-t.x)*o.RAD_TO_DEG+t.directionOverride+90),void 0!==t.angleOverride&&(e.angle=Math.atan2(s-t.y,n-t.x)*o.RAD_TO_DEG+t.angleOverride+90),this.spawnOne(e)}}}createSpawner(e,t){const n=new p.Spawner(this,e,t);return this.spawners.add(n),n}},p.ParticleContainer=class extends o.Container{render(e){this.contextWidth||(this.contextWidth=e.width,this.contextHeight=e.height),super.render(e)}},p.Spawner=class extends o.Container{constructor(e,t,n){super(),this.particleOptions=t,this.options=n,this.manager=e,this.lifetime=0,this.totalLifetime=n.lifetime,this.x=this.options.x,this.y=this.options.y,this.amount=this.options.amount/60}progressLifetime(e){if(-1===this.totalLifetime)return!1;if(1===e){if(this.lifetime+=1/60,this.lifetime>=this.totalLifetime)return this.destroy(),!0}else if(this.lifetime+=e/60,this.lifetime>=this.totalLifetime)return this.destroy(),!0;return!1}spawn(e){this.options.amount=this.amount*e;const t=new o.Point;this.getGlobalPosition(t,!!this.canSkipGlobalTransform),this.options.x=t.x,this.options.y=t.y,this.canSkipGlobalTransform=!0,this.manager.spawnBurst(this.particleOptions,this.options)}progress(e){return!!this._destroyed||(!!this.progressLifetime(e)||void this.spawn(e))}},p.Particle=class extends o.Sprite{constructor(e,t){super(p.TextureCache.GetTexture(e.texture)),this.manager=t,this.contextWidth=0,this.contextHeight=0,this.init(e)}init(e){this.graveyarded=!1,this.options=e,this.lifetime=0,this.x=e.x,this.y=e.y,this.hasDynamicAlpha=e.alpha.inc||e.alphamultiplier.inc,this.hasDynamicScale=e.scale.inc||e.scalemultiplier.inc,this.hasDynamicXYSpeed=e.xspeed.inc||e.yspeed.inc||e.xflurry.inc||e.yflurry.inc,this.hasXYSpeed=e.xspeed.start||e.yspeed.start||e.xspeed.inc||e.yspeed.inc||e.xflurry.start||e.yflurry.start||e.xflurry.inc||e.yflurry.inc,this.hasDynamicAngle=e.angle.inc||e.anglespeed.inc||e.anglespeed.start,this.hasDynamicSpeed=e.speed.inc||e.direction.inc,this.hasSpeed=e.speed.inc||e.speed.start,this.hasDynamicFlurry=e.flurryfrequency.inc||e.flurryamplitude.inc,this.hasDynamicFlicker=e.flickerfrequency.inc||e.flickeramplitude.inc,this.hasDynamicAlphaOrFlicker=e.alpha.inc||e.alphamultiplier.inc||e.flickeramplitude.inc||e.flickeramplitude.start,this.hasDynamicTint=e.tint.r.inc||e.tint.g.inc||e.tint.b.inc,this.alpha=e.alpha.start*Math.min(1,e.alphamultiplier.start),this.alphamultiplier=e.alphamultiplier.start,this.truealpha=e.alpha.start,this.xspeed=e.xspeed.start,this.yspeed=e.yspeed.start,this.angle=e.angle.start,this.anglespeed=e.anglespeed.start,this.scale.set(e.scale.start*Math.min(1,e.scalemultiplier.start)),this.scalemultiplier=e.scalemultiplier.start,this.truescale=e.scale.start,this.direction=e.direction.start,this.speed=e.speed.start,this.flurryfrequency=e.flurryfrequency.start,this.flurryamplitude=e.flurryamplitude.start,this.xflurry=e.xflurry.start,this.yflurry=e.yflurry.start,this.flickerfrequency=e.flickerfrequency.start,this.flickeramplitude=e.flickeramplitude.start,this.explodedTintR=e.tint.r.start,this.explodedTintG=e.tint.g.start,this.explodedTintB=e.tint.b.start,this.explodedTintRinc=e.tint.r.inc,this.explodedTintGinc=e.tint.g.inc,this.explodedTintBinc=e.tint.b.inc,this.tint=p.Utils.PackRGB(this.explodedTintR,this.explodedTintG,this.explodedTintB),this.totalLifetime=e.lifetime,this.alphaInc=e.alpha.inc,this.alphaMultiplierInc=e.alphamultiplier.inc,this.scaleInc=e.scale.inc,this.scaleMultiplierInc=e.scalemultiplier.inc,this.xSpeedInc=e.xspeed.inc,this.ySpeedInc=e.yspeed.inc,this.xFlurryInc=e.xflurry.inc,this.yFlurryInc=e.yflurry.inc,this.angleInc=e.angle.inc,this.angleSpeedInc=e.anglespeed.inc,this.speedInc=e.speed.inc,this.directionInc=e.direction.inc,this.flurryFrequencyInc=e.flurryfrequency.inc,this.flurryAmplitudeInc=e.flurryamplitude.inc,this.flickerFrequencyInc=e.flickerfrequency.inc,this.flickerAmplitudeInc=e.flickeramplitude.inc,this.doWrap=e.wrap,this.blendMode=e.blendmode}graveyard(){void 0!==this.manager?(this.manager.graveyard(this,this.parent.children.length),this.graveyarded=!0,this.parent&&(this.parent.removeChild(this),this.parent=null)):this.destroy()}progressLifetime(e){if(1===e){if(this.lifetime+=1/60,this.lifetime>=this.totalLifetime)return this.graveyard(),!0}else if(this.lifetime+=e/60,this.lifetime>=this.totalLifetime)return this.graveyard(),!0;return!1}progressAlpha(e){if(this.hasDynamicAlphaOrFlicker)if(1===e){if(this.truealpha+=this.alphaInc,this.alphamultiplier+=this.alphaMultiplierInc,this.hasDynamicAlphaOrFlicker){let e=this.truealpha*Math.min(1,this.alphamultiplier);this.flickeramplitude&&(e=Math.max(0,Math.min(1,this.truealpha+Math.sin(this.lifetime*this.flickerfrequency)*this.flickeramplitude))),this.alpha=e}}else if(this.truealpha+=this.alphaInc*e,this.alphamultiplier+=this.alphaMultiplierInc*e,this.hasDynamicAlphaOrFlicker){let e=this.truealpha*Math.min(1,this.alphamultiplier);this.flickeramplitude&&(e=Math.max(0,Math.min(1,this.truealpha+Math.sin(this.lifetime*this.flickerfrequency)*this.flickeramplitude))),this.alpha=e}}progressScale(e){if(this.hasDynamicScale)if(1===e){this.truescale+=this.scaleInc,this.scalemultiplier+=this.scaleMultiplierInc;let e=this.truescale;this.scalemultiplier<1&&(e*=this.scalemultiplier),this.scale.set(e)}else{this.truescale+=this.scaleInc*e,this.scalemultiplier+=this.scaleMultiplierInc*e;let t=this.truescale;this.scalemultiplier<1&&(t*=this.scalemultiplier),this.scale.set(t)}}progressXYSpeed(e){if(this.hasXYSpeed)if(1===e){this.hasDynamicXYSpeed&&(this.xspeed+=this.xSpeedInc,this.yspeed+=this.ySpeedInc,this.xflurry+=this.xFlurryInc,this.yflurry+=this.yFlurryInc);let e=this.xspeed+(2*Math.random()-1)*this.xflurry,t=this.yspeed+(2*Math.random()-1)*this.yflurry;this.x+=e/60,this.y+=t/60}else{this.hasDynamicXYSpeed&&(this.xspeed+=this.xSpeedInc*e,this.yspeed+=this.ySpeedInc*e,this.xflurry+=this.xFlurryInc*e,this.yflurry+=this.yFlurryInc*e);let t=this.xspeed+(2*Math.random()-1)*this.xflurry,n=this.yspeed+(2*Math.random()-1)*this.yflurry;this.x+=t/60*e,this.y+=n/60*e}}progressAngle(e){this.hasDynamicAngle&&(1===e?(this.angle+=this.angleInc,this.anglespeed+=this.angleSpeedInc,this.angle+=this.anglespeed/60):(this.angle+=this.angleInc*e,this.anglespeed+=this.angleSpeedInc*e,this.angle+=this.anglespeed/60*e))}progressSpeed(e){if(1===e){if(this.hasDynamicSpeed&&(this.speed+=this.speedInc,this.direction+=this.directionInc),this.hasSpeed){let e=this.direction;this.flurryamplitude&&(e+=Math.sin(this.lifetime*this.flurryfrequency)*this.flurryamplitude);const t=e*-o.DEG_TO_RAD;this.x+=Math.sin(Math.PI+t)*(this.speed/60),this.y+=Math.cos(Math.PI+t)*(this.speed/60)}}else if(this.hasDynamicSpeed&&(this.speed+=this.speedInc*e,this.direction+=this.directionInc*e),this.hasSpeed){let t=this.direction;this.flurryamplitude&&(t+=Math.sin(this.lifetime*this.flurryfrequency)*this.flurryamplitude);const n=t*-o.DEG_TO_RAD;this.x+=Math.sin(Math.PI+n)*(this.speed/60)*e,this.y+=Math.cos(Math.PI+n)*(this.speed/60)*e}}progressFlurry(e){this.hasDynamicFlurry&&(1===e?(this.flurryfrequency+=this.flurryFrequencyInc,this.flurryamplitude+=this.flurryAmplitudeInc):(this.flurryfrequency+=this.flurryFrequencyInc*e,this.flurryamplitude+=this.flurryAmplitudeInc*e))}progressFlicker(e){this.hasDynamicFlicker&&(1===e?(this.flickerfrequency+=this.flickerFrequencyInc,this.flickeramplitude+=this.flickerAmplitudeInc):(this.flickerfrequency+=this.flickerFrequencyInc*e,this.flickeramplitude+=this.flickerAmplitudeInc*e))}progressTint(e){this.hasDynamicTint&&(1===e?(this.explodedTintR+=this.explodedTintRinc,this.explodedTintG+=this.explodedTintGinc,this.explodedTintB+=this.explodedTintBinc,this.tint=p.Utils.PackRGB(this.explodedTintR,this.explodedTintG,this.explodedTintB)):(this.explodedTintR+=this.explodedTintRinc*e,this.explodedTintG+=this.explodedTintGinc*e,this.explodedTintB+=this.explodedTintBinc*e,this.tint=p.Utils.PackRGB(this.explodedTintR,this.explodedTintG,this.explodedTintB)))}progressWrap(e){if(!this.doWrap)return;this.contextWidth||(this.contextWidth=this.parent.contextWidth,this.contextHeight=this.parent.contextHeight);const t=Math.max(this.texture.width,this.texture.height)*this.scale.x*1.5,n=this.contextWidth||window.innerWidth,s=this.contextHeight||window.innerHeight;this.x>n+t&&(this.x-=n+2*t),this.x<-t&&(this.x+=n+2*t),this.y>s+t&&(this.y-=s+2*t),this.y<-t&&(this.y+=s+2*t)}progress(e){this.progressLifetime(e)||(this.progressAlpha(e),this.progressScale(e),this.progressXYSpeed(e),this.progressAngle(e),this.progressSpeed(e),this.progressFlurry(e),this.progressFlicker(e),this.progressTint(e),this.progressWrap(e))}_render(e){this.contextWidth||(this.contextWidth=e.width,this.contextHeight=e.height),super._render(e)}},p.ParseSimpleParticleOptions=function(e){const t=["x","y","lifetime"],n=["texture","blendmode","wrap","addinback"],s=["alpha","alphamultiplier","scale","scalemultiplier","angle","xspeed","yspeed","anglespeed","direction","speed","flurryfrequency","flurryamplitude","xflurry","yflurry","flickerfrequency","flickeramplitude"],i=["tint"],a={alpha:1,scale:1,scalemultiplier:1,alphamultiplier:1},r={x:0,y:0,lifetime:1,blendmode:o.BLEND_MODES.NORMAL,addinback:!1};for(const n of t)Array.isArray(e[n])?r[n]=e[n][0]+Math.random()*(e[n][1]-e[n][0]):void 0!==e[n]&&(r[n]=e[n]);for(const t of n)Array.isArray(e[t])?r[t]=e[t][Math.floor(Math.random()*e[t].length)]:void 0!==e[t]&&(r[t]=e[t]);for(const t of s)r[t]=p.ParseProgression(e[t]||a[t],r);for(const t of i){const n=p.SplitTints(e[t]);r[t]={r:p.ParseProgression(n.r,r),g:p.ParseProgression(n.g,r),b:p.ParseProgression(n.b,r)}}return e.angleParaxial&&(r.angle.start+=90*Math.floor(4*Math.random())),r.needsVertices=1!==r.scale.start||0!==r.scale.inc||1!==r.scalemultiplier.start||0!==r.scalemultiplier.inc,r.needsRotation=0!==r.angle.start||0!==r.angle.inc||0!==r.anglespeed.start||0!==r.anglespeed.inc,r},p.SplitTints=function(e){if(void 0===e)return{r:255,g:255,b:255};if("number"==typeof e)return{r:e>>16,g:e>>8&255,b:255&e};if(Array.isArray(e))return{r:[e[0]>>16,e[1]>>16],g:[e[0]>>8&255,e[1]>>8&255],b:[255&e[0],255&e[1]]};let t,n,s;return Array.isArray(e.from)?(t=[e.from[0]>>16,e.from[1]>>16],n=[e.from[0]>>8&255,e.from[1]>>8&255],s=[255&e.from[0],255&e.from[1]]):Array.isArray(e.start)?(t=[e.start[0]>>16,e.start[1]>>16],n=[e.start[0]>>8&255,e.start[1]>>8&255],s=[255&e.start[0],255&e.start[1]]):"number"==typeof e.from?(t=e.from>>16,n=e.from>>8&255,s=255&e.from):"number"==typeof e.start&&(t=e.start>>16,n=e.start>>8&255,s=255&e.start),void 0!==e.to?Array.isArray(e.to)?{r:{from:t,to:[e.to[0]>>16,e.to[1]>>16]},g:{from:n,to:[e.to[0]>>8&255,e.to[1]>>8&255]},b:{from:s,to:[255&e.to[0],255&e.to[1]]}}:{r:{from:t,to:e.to>>16},g:{from:n,to:e.to>>8&255},b:{from:s,to:255&e.to}}:void 0!==e.inc?Array.isArray(e.inc)?{r:{from:t,inc:[e.inc[0]>>16,e.inc[1]>>16]},g:{from:n,inc:[e.inc[0]>>8&255,e.inc[1]>>8&255]},b:{from:s,inc:[255&e.inc[0],255&e.inc[1]]}}:{r:{from:t,inc:e.inc>>16},g:{from:n,inc:e.inc>>8&255},b:{from:s,inc:255&e.inc}}:{r:255,g:255,b:255}},p.ParseProgression=function(e,t){if(void 0===e)return{start:0,inc:0};if("number"==typeof e)return{start:e,inc:0};if(Array.isArray(e))return{start:e[0]+Math.random()*(e[1]-e[0]),inc:0};let n=0;void 0!==e.from?n="number"==typeof e.from?e.from:e.from[0]+Math.random()*(e.from[1]-e.from[0]):void 0!==e.start&&(n="number"==typeof e.start?e.start:e.start[0]+Math.random()*(e.start[1]-e.start[0]));let s=0;if(void 0!==e.inc)s="number"==typeof e.inc?e.inc:e.inc[0]+Math.random()*(e.inc[1]-e.inc[0]);else if(void 0!==e.to)if("number"==typeof e.to)s=(e.to-n)/(60*t.lifetime);else{s=(e.to[0]+Math.random()*(e.to[1]-e.to[0])-n)/(60*t.lifetime)}return{start:n,inc:s}},p.TextureCache=(()=>{const e=new Map;return{GetTexture:function(t){if(e.has(t))return e.get(t);const n=o.Texture.from(t);return n.defaultAnchor.set(.5,.5),e.set(t,n),n}}})(),p.Utils={PackRGB:function(e,t,n){return Math.min(255,Math.max(0,Math.round(e)))<<16|Math.min(255,Math.max(0,Math.round(t)))<<8|Math.min(255,Math.max(0,Math.round(n)))}};const h=(()=>{const e=new Set;return o.Ticker.shared.add((function(t){for(const n of e)n._destroyed||n.progress(t)}),this),{add:function(t){e.add(t)},remove:function(t){e.delete(t)}}})();h.Beam=class extends o.SimpleRope{constructor(e){"string"==typeof e.texture&&(e.texture=o.Texture.from(e.texture));const t=e.scale||1,n=[],s=[],i=[];if("path"===e.mode||"connect"===e.mode)for(let i=0;i<e.path.length;i++)n.push(e.path[i].x/t),s.push(e.path[i].y/t);else"follow"===e.mode&&(n.push(e.followPoint.x),s.push(e.followPoint.y));for(let t=0;t<(e.vertices||100);t++)i.push(new o.Point(n[0],s[0]));super(e.texture,i,e.repeatTexture?1:0),this.options={vertices:100,length:20,duration:1,tint:16777215,blendMode:o.BLEND_MODES.NORMAL,alpha:1,scale:1,smoothVertices:!0,smoothPath:!1,repeatTexture:!1,reverse:!1,jitter:0,...e},this.points=i,this.pathX=n,this.pathY=s,this.pathLength=n.length,this.historyX=[],this.historyY=[],this.mustInitializeHistory=!0,this.leader=new o.Point(n[0],s[0]),this.leaderObject=null,this.age=0,this.tint=this.options.tint,this.blendMode=this.options.blendMode,this.alpha=this.options.alpha,this.realAlpha=this.options.alpha,this.scale.set(this.options.scale),this.hasHit=!1,"string"==typeof this.options.leader?(this.leaderObject=o.Sprite.from(this.options.leader),this.leaderObject.anchor.set(.5,.5)):this.options.leader&&(this.leaderObject=this.options.leader),this.leaderObject&&(this.leaderObject.position.set(this.leader.x,this.leader.y),this.leaderObject.blendMode=this.options.blendMode,this.leaderObject.tint=this.options.tint,this.leaderObject.x=this.leader.x,this.leaderObject.y=this.leader.y,this.addChild(this.leaderObject)),h.add(this)}destroy(){h.remove(this),super.destroy()}hit(){if(this.options.onHit){let e=new o.Point(this.leader.x*this.scale.x,this.leader.y*this.scale.y);this.leaderObject&&(e=this.leaderObject.getGlobalPosition(void 0,!0)),this.options.onHit(this,e)}}die(){if(this.options.onDie){let e=new o.Point(this.leader.x*this.scale.x,this.leader.y*this.scale.y);this.leaderObject&&(e=this.leaderObject.getGlobalPosition(void 0,!0)),this.options.onDie(this,e)}this.destroy()}progressLeaderPath(e){let t=this.age/this.options.duration/60*(this.pathLength-1);t>=this.pathLength-1&&(this.alpha-=this.realAlpha/this.historyX.length,this.hasHit||(this.hasHit=!0,this.hit()),this.alpha<=0&&this.die()),this.hasHit||(this.options.pathBezier&&(t=this.options.pathBezier(Math.max(0,Math.min(1,t/(this.pathLength-1))))*(this.pathLength-1)),this.options.smoothPath?(this.leader.x=h.Utils.CubicInterpolation(this.pathX,t),this.leader.y=h.Utils.CubicInterpolation(this.pathY,t)):(this.leader.x=h.Utils.LinearInterpolation(this.pathX,t),this.leader.y=h.Utils.LinearInterpolation(this.pathY,t)))}progressLeaderFollow(e){this.leader.set(this.options.followPoint.x/this.options.scale,this.options.followPoint.y/this.options.scale)}progressLeaderConnect(e){this.age>=60*this.options.duration&&this.die()}progressLeader(e){switch(this.options.mode){case"path":return this.progressLeaderPath(e);case"follow":return this.progressLeaderFollow(e);case"connect":return this.progressLeaderConnect(e)}}progressLeaderObject(e){this.leaderObject&&!this.leaderObject._destroyed&&(this.leaderObject.x=this.leader.x,this.leaderObject.y=this.leader.y)}progressHistory(e){if(this.mustInitializeHistory){for(let t=0;t<this.options.length/e;t++)this.historyX.push(this.pathX[0]),this.historyY.push(this.pathY[0]);this.mustInitializeHistory=!1}this.historyX.push(this.leader.x),this.historyY.push(this.leader.y),this.historyX.shift(),this.historyY.shift()}progressPoints(e){const t=this.options.reverse?1:0,n=this.options.reverse?-1:1;let s=this.historyX,i=this.historyY,o=0;"connect"===this.options.mode&&(s=this.pathX,i=this.pathY,o=-1);const a=this.options.smoothVertices?h.Utils.CubicInterpolation:h.Utils.LinearInterpolation;for(let e=0;e<this.options.vertices;e++){let r=0,l=0;this.options.jitter&&(r=(Math.random()-.5)*this.options.jitter,l=(Math.random()-.5)*this.options.jitter),this.points[e].set(r+a(s,(t+e/this.options.vertices*n)*(s.length+o)),l+a(i,(t+e/this.options.vertices*n)*(i.length+o)))}}progress(e){this.age+=e,this.progressLeader(e),this.progressLeaderObject(e),this.progressHistory(e),this.progressPoints(e)}},h.Utils=(()=>{function e(e,t){return t[Math.min(Math.max(e,0),t.length-1)]}function t(t,n,s){return n*(e(t+1,s)-e(t-1,s))/2}return{CubicInterpolation:function(n,s,i=1){const o=Math.floor(s),a=[t(o,i,n),t(o+1,i,n)],r=[e(o,n),e(o+1,n)],l=(s-=o)*s,c=s*l;return(2*c-3*l+1)*r[0]+(c-2*l+s)*a[0]+(-2*c+3*l)*r[1]+(c-l)*a[1]},LinearInterpolation:function(t,n){const s=e(Math.floor(n),t);return s+n%1*(e(Math.floor(n)+1,t)-s)}}})();const d={};function m(){const e=2===Nl.renderer.context.webGLVersion?d.ShaderSourcesGl2:d.ShaderSources;d.Shader=new o.Program(e.vertex,e.fragment,"THEORYTYPE")}r.addExtension({type:1,read:e=>null===e?{success:!0}:{success:!0,...e}}),r.addExtension({type:2,read:e=>null===e?{success:!1}:{success:!1,error:e}}),d.Text=class extends o.Container{constructor(e,t){super(),this._text=e.toString()||" ",this._options={font:null,rasterize:!1,fontSize:42,alpha:1,tint:16777215,weight:500,sharpness:.85,letterSpacing:0,lineSpacing:0,blendMode:o.BLEND_MODES.NORMAL,align:"left",anchor:[0,0],outlineWeight:900,outlineAlpha:0,outlineTint:0,fillAlpha:1,misalignment:0,misalignmentSeed:Math.floor(1e6*Math.random()),invert:0,shadows:[],useProjection:!1,projection:[[0,0],[1,0],[0,1],[1,1]],...t},this._textMustRegenerate=!1,this._textDirty=!1,this._meshes=new Map,this._shadowMeshes=new Map,this._options.anchor=new o.ObservablePoint((()=>{this._textDirty=!0}),this,...this._options.anchor);for(let e=0;e<4;e++)this._options.projection[e]=new o.ObservablePoint((()=>{this._textDirty=!0}),this,...this._options.projection[e]);if(this._options.overrides=new d.CharacterOverrideMap((()=>{this._textDirty=!0})),this.alpha=void 0===this._options.alpha?1:this._options.alpha,!this.font)throw new Error("Could not create Text: config.font must be set");this.regenerateText()}declareType(e=!1){if("bitmap"===this.font.type)return"bitmap";if(this._options.rasterize){if(!e)return"rasterized";for(const e of this.declareAllMasters())this.font.fontTextures.has(`p0.rasterized.${e}`)||this.font.rasterize(e,((e,t,n)=>{for(const[,s]of this._meshes)s.tt_mesh_id==n&&100*Math.round(s.weight/100)==t&&(s.texture=e);for(const[,s]of this._shadowMeshes)s.tt_mesh_id.toString().split("_")[0]==n&&100*Math.round(s.weight/100)==t&&(s.texture=e)}));return"rasterized"}return"sdf"}declareMaster(){return"bitmap"!==this.font.type&&this._options.rasterize?100*Math.round(this._options.weight/100):"master"}declareAllMasters(){const e=new Set;if(e.add(100*Math.round(this._options.weight/100)),"bitmap"===this.font.type||!this._options.rasterize)return e;for(const t of this._options.shadows)e.add(100*Math.round(t.weight/100));return e}createMesh(e,t,n){const s=new d.TextMesh(this.declareType(!0),this.font.fontTextures.get(`p${e}.${this.declareType()}.${this.declareMaster()}`)||o.Texture.EMPTY,n?t:d.Geometrize(t),this,this.font.sdfSpread);return s.tint=this._options.tint,s.weight=this._options.weight,s.sharpness=this._options.sharpness,s.fontSize=this._options.fontSize,s.blendMode=this._options.blendMode,s.invert=this._options.invert,s.outlineWeight=this._options.outlineWeight,s.outlineAlpha=this._options.outlineAlpha,s.outlineTint=this._options.outlineTint,s.fillAlpha=this._options.fillAlpha,s.tt_mesh_id=e,this._meshes.set(e,s),this.addChild(s),s}createShadowMesh(e,t,n,s,i){const a=new d.TextMesh(this.declareType(!0),this.font.fontTextures.get(`p${e}.${this.declareType()}.${this.declareMaster()}`)||o.Texture.EMPTY,n?t:d.Geometrize(t),this);return a.tint=s.tint,a.weight=s.weight,a.sharpness=void 0===s.sharpness?this._options.sharpness:s.sharpness,a.fontSize=this._options.fontSize,a.blendMode=void 0===s.blendMode?this._options.blendMode:s.blendMode,a.invert=void 0===s.invert?this._options.invert:s.invert,a.tt_mesh_id=`${e}_s${i}`,a.position.x+=s.x||0,a.position.y+=s.y||0,a.alpha=void 0===s.alpha?1:s.alpha,a.scale.set(void 0===s.scale?1:s.scale),a.rotation=s.rotation||0,this._shadowMeshes.set(`${e}_s${i}`,a),this.addChild(a),a}regenerateText(){this.removeChildren(),this._meshes.clear(),this._shadowMeshes.clear();const e=new Map,t="sdf"===this.declareType()?1:this._options.fontSize/this.font.fontData.info.size,n=d.LayoutText(this._text,this._options,this.font,t);let s=0;for(const t of this._options.shadows){for(const[i,o]of n){let n=null;e.has(i)?n=e.get(i):(n=d.Geometrize(o),e.set(i,n)),this.createShadowMesh(i,n,!0,t,s)}s++}for(const[t,s]of n){let n=null;e.has(t)?n=e.get(t):(n=d.Geometrize(s),e.set(t,n)),this.createMesh(t,n,!0)}this._textMustRegenerate=!1,this._textDirty=!1}updateText(){const e="sdf"===this.declareType()?1:this._options.fontSize/this.font.fontData.info.size,t=d.LayoutText(this._text,this._options,this.font,e),n=[];for(const[e,s]of t){const t=this._meshes.get(e);t?t.updateGeometry(s.vertices,s.uvs,s.indices):this.createMesh(e,s),n.push(e)}for(const[e,t]of this._meshes)n.includes(e)||t.destroy();for(const[e,t]of this._shadowMeshes)t.forceUploadGeometry();this._textDirty=!1}_render(e){this._textMustRegenerate&&this.regenerateText(),this._textDirty&&this.updateText(),super._render(e)}get font(){return this._options.font}get text(){return this._text}set text(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this._textDirty=!0,this._options._cache=null)}get align(){return this._options.align}set align(e){this._options.align!==e&&(this._options.align=e,this._textDirty=!0,this._options._cache=null)}get anchor(){return this._options.anchor}get tint(){return this._options.tint}set tint(e){if(this._options.tint!==e){this._options.tint=e;for(const[,t]of this._meshes)t.tint=e}}get blendMode(){return this._options.blendMode}set blendMode(e){if(this._options.blendMode!==e){this._options.blendMode=e;for(const[,t]of this._meshes)t.blendMode=e}}get weight(){return this._options.weight}set weight(e){if(this._options.weight!==e){this._options.weight=e;for(const[,t]of this._meshes)t.weight=e,"rasterized"===this.declareType(!0)&&(t.texture=this.font.fontTextures.get(`p${t.tt_mesh_id.toString().split("_")[0]}.${this.declareType()}.${this.declareMaster()}`)||o.Texture.EMPTY)}}get sharpness(){return this._options.sharpness}set sharpness(e){if(this._options.sharpness!==e){this._options.sharpness=e;for(const[,t]of this._meshes)t.sharpness=e}}get invert(){return this._options.invert}set invert(e){if(this._options.invert!==e){this._options.invert=e;for(const[,t]of this._meshes)t.invert=e}}get fontSize(){return this._options.fontSize}set fontSize(e){if(this._options.fontSize!==e){this._options.fontSize=e;for(const[,t]of this._meshes)t.fontSize=e;for(const[,t]of this._shadowMeshes)t.fontSize=e;"sdf"!==this.declareType()&&(this._textDirty=!0,this._options._cache=null)}}get letterSpacing(){return this._options.letterSpacing}set letterSpacing(e){this._options.letterSpacing!==e&&(this._options.letterSpacing=e,this._textDirty=!0,this._options._cache=null)}get lineSpacing(){return this._options.lineSpacing}set lineSpacing(e){this._options.lineSpacing!==e&&(this._options.lineSpacing=e,this._textDirty=!0,this._options._cache=null)}get outlineWeight(){return this._options.outlineWeight}set outlineWeight(e){if(this._options.outlineWeight!==e){this._options.outlineWeight=e;for(const[,t]of this._meshes)t.outlineWeight=e}}get outlineAlpha(){return this._options.outlineAlpha}set outlineAlpha(e){if(this._options.outlineAlpha!==e){this._options.outlineAlpha=e;for(const[,t]of this._meshes)t.outlineAlpha=e}}get fillAlpha(){return this._options.fillAlpha}set fillAlpha(e){if(this._options.fillAlpha!==e){this._options.fillAlpha=e;for(const[,t]of this._meshes)t.fillAlpha=e}}get outlineTint(){return this._options.outlineTint}set outlineTint(e){if(this._options.outlineTint!==e){this._options.outlineTint=e;for(const[,t]of this._meshes)t.outlineTint=e}}get misalignment(){return this._options.misalignment}set misalignment(e){this._options.misalignment!==e&&(this._options.misalignment=e,this._textDirty=!0)}get misalignmentSeed(){return this._options.misalignmentSeed}set misalignmentSeed(e){this._options.misalignmentSeed!==e&&(this._options.misalignmentSeed=e,this._textDirty=!0)}get shadows(){return this._options.shadows}set shadows(e){this._options.shadows!==e&&(this._options.shadows=e,this._textMustRegenerate=!0)}get useProjection(){return this._options.useProjection}set useProjection(e){this._options.useProjection!==e&&(this._options.useProjection=e,this._textDirty=!0)}get projection(){return this._options.projection}get overrides(){return this._options.overrides}get meshes(){return this._meshes}get shadowMeshes(){return this._shadowMeshes}findShadowMeshes(e){const t=new Map;for(const[n,s]of this._shadowMeshes)n.endsWith(`_s${e}`)&&t.set(n,s);return t}setMustRegenerate(){this._textMustRegenerate=!0}setTextDirty(){this._textDirty=!0}},d.TextMesh=class extends o.Mesh{constructor(e,t,n,s,i=2){let a;a="sdf"===e?new o.Shader(d.Shader,{uSampler:t,uAlpha:1,uTint:o.utils.hex2rgb(16777215),uWeight:.5,uSharpness:.15,uScale:1,uOutlineWeight:.1,uOutlineAlpha:0,uFillAlpha:1,uOutlineTint:o.utils.hex2rgb(0),uInvert:0,uSdfSpread:i}):new o.MeshMaterial(t),super(n,a),this._type=e,this._parent=s,this._texture=t,this._styleDirty=!1,this._alpha=1,this._lastWorldAlpha=1,this._tint=16777215,this._weight=500,this._sharpness=.85,this._fontSize=52,this._outlineWeight=900,this._outlineAlpha=0,this._fillAlpha=1,this._outlineTint=0,this._invert=!1}updateStyle(){if("sdf"===this._type){this.shader.uniforms.uAlpha=this.worldAlpha,this.shader.uniforms.uTint=o.utils.hex2rgb(this.tint);const e=this.fontSize/this._parent.font.fontData.info.size,t=Math.min(1,Math.max(0,this.invert?this.weight/1e3:1-this.weight/1e3)),n=Math.min(1,Math.max(0,1-this.outlineWeight/1e3)),s=Math.min((1-this.sharpness)/e,t,this.outlineAlpha>0?n:1);this.shader.uniforms.uWeight=t,this.shader.uniforms.uSharpness=s,this.shader.uniforms.uScale=e,this.shader.uniforms.uOutlineAlpha=this.outlineAlpha,this.shader.uniforms.uOutlineTint=o.utils.hex2rgb(this.outlineTint),this.shader.uniforms.uOutlineWeight=n,this.shader.uniforms.uFillAlpha=this.fillAlpha,this.shader.uniforms.uInvert=this.invert;const i=this.texture.baseTexture;this.shader.uniforms.uTextureSize=[i.width,i.height]}else this.shader.alpha=this.worldAlpha,this.shader.tint=this.tint;this._styleDirty=!1}_renderDefault(e){this.worldAlpha!==this._lastWorldAlpha&&(this._styleDirty=!0),this._styleDirty&&this.updateStyle(),super._renderDefault(e)}_render(e){this.worldAlpha!==this._lastWorldAlpha&&(this._styleDirty=!0),this._styleDirty&&this.updateStyle(),super._render(e)}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,"sdf"===this._type?this.shader.uniforms.uSampler=this._texture:this.shader.texture=this._texture)}get alpha(){return this._alpha}set alpha(e){this._alpha!==e&&(this._alpha=e,this._styleDirty=!0)}get tint(){return this._tint}set tint(e){this._tint!==e&&(this._tint=e,this._styleDirty=!0)}get weight(){return this._weight}set weight(e){this._weight!==e&&(this._weight=e,this._styleDirty=!0)}get sharpness(){return this._sharpness}set sharpness(e){this._sharpness!==e&&(this._sharpness=e,this._styleDirty=!0)}get invert(){return this._invert}set invert(e){this._invert!==e&&(this._invert=e,this._styleDirty=!0)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this._styleDirty=!0)}get outlineWeight(){return this._outlineWeight}set outlineWeight(e){this._outlineWeight!==e&&(this._outlineWeight=e,this._styleDirty=!0)}get outlineAlpha(){return this._outlineAlpha}set outlineAlpha(e){this._outlineAlpha!==e&&(this._outlineAlpha=e,this._styleDirty=!0)}get fillAlpha(){return this._fillAlpha}set fillAlpha(e){this._fillAlpha!==e&&(this._fillAlpha=e,this._styleDirty=!0)}get outlineTint(){return this._outlineTint}set outlineTint(e){this._outlineTint!==e&&(this._outlineTint=e,this._styleDirty=!0)}updateGeometry(e,t,n){if(e){const t=this.geometry.getBuffer("aVertexPosition").data,n=t.buffer;if(e.length*Float32Array.BYTES_PER_ELEMENT>n.byteLength){const t=new ArrayBuffer((e.length+16)*Float32Array.BYTES_PER_ELEMENT),n=new Float32Array(t,0,e.length);n.set(e),this.geometry.getBuffer("aVertexPosition").update(n)}else if(e.length===t.length)t.set(e),this.geometry.getBuffer("aVertexPosition").update();else{const t=new Float32Array(n,0,e.length);t.set(e),this.geometry.getBuffer("aVertexPosition").update(t)}}if(t){const e=this.geometry.getBuffer("aTextureCoord").data,n=e.buffer;if(t.length*Float32Array.BYTES_PER_ELEMENT>n.byteLength){const e=new ArrayBuffer((t.length+16)*Float32Array.BYTES_PER_ELEMENT),n=new Float32Array(e,0,t.length);n.set(t),this.geometry.getBuffer("aTextureCoord").update(n)}else if(t.length===e.length)e.set(t),this.geometry.getBuffer("aTextureCoord").update();else{const e=new Float32Array(n,0,t.length);e.set(t),this.geometry.getBuffer("aTextureCoord").update(e)}}if(n){const e=this.geometry.getIndex().data,t=e.buffer;if(n.length*Uint16Array.BYTES_PER_ELEMENT>t.byteLength){const e=new ArrayBuffer((n.length+16)*Uint16Array.BYTES_PER_ELEMENT),t=new Uint16Array(e,0,n.length);t.set(n),this.geometry.getIndex().update(t)}else if(n.length===e.length);else if(n.length>e.length){const e=new Uint16Array(t,0,n.length);e.set(n),this.geometry.getIndex().update(e)}else{const e=new Uint16Array(t,0,n.length);this.geometry.getIndex().update(e)}}this.forceUploadGeometry()}forceUploadGeometry(){if("bitmap"===this._type||"rasterized"===this._type){const e=this.transform,t=this.parent,n=this.worldAlpha;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,this.getBounds(),this.parent=t,this.transform=e,this.worldAlpha=n}}},d.Font=function(e){const t={fnt:null,type:null,rasterizeRenderer:null,rasterizeSize:2048,sdfSpread:3.5,onload:()=>{},...e};let n={};const s=new Map,i=new Map;if(!t.fnt)throw new Error("Could not create Font: options.fnt must be set");if(!t.type)throw new Error("Could not create Font: options.type must be set");function a(e,r,l,c,p=!1){if(!t.rasterizeRenderer)throw new Error("Could not rasterize Font: options.rasterizeRenderer must be set");if(!t.rasterizeSize)throw new Error("Could not rasterize Font: options.rasterizeSize must be set");if(s.get(`p${l}.rasterized.${r}`))return void c(s.get(`p${l}.rasterized.${r}`),r,l);if(i.has(`p${l}.rasterized.${r}`)){if(c&&i.get(`p${l}.rasterized.${r}`).push(c),!p)return}else c&&i.set(`p${l}.rasterized.${r}`,[c]);if(!e.baseTexture.valid)return void e.baseTexture.once("loaded",(()=>{a(e,r,l,void 0,!0)}));const h=o.RenderTexture.create(t.rasterizeSize,t.rasterizeSize),u=new o.Geometry;u.addAttribute("aVertexPosition",[0,0,t.rasterizeSize,0,0,t.rasterizeSize,t.rasterizeSize,t.rasterizeSize],2),u.addAttribute("aTextureCoord",[0,0,1,0,0,1,1,1],2),u.addIndex([0,1,2,1,3,2]);const _=Math.min(1,Math.max(0,1-r/1e3)),m=Math.min(.4/(t.rasterizeSize/n.common.scaleW),_),g=new o.Shader(d.Shader,{uSampler:e,uAlpha:1,uTint:o.utils.hex2rgb(16777215),uWeight:_,uSharpness:m,uScale:1,uOutlineWeight:.1,uOutlineAlpha:0,uFillAlpha:1,uOutlineTint:o.utils.hex2rgb(0),uInvert:0,uTextureSize:[e.baseTexture.width,e.baseTexture.height],uSdfSpread:t.sdfSpread}),f=new o.Mesh(u,g);if(t.rasterizeRenderer.render(f,{renderTexture:h}),s.set(`p${l}.rasterized.${r}`,h),i.has(`p${l}.rasterized.${r}`)){for(const e of i.get(`p${l}.rasterized.${r}`))e(h,r,l);i.delete(`p${l}.rasterized.${r}`)}}return d.Utils.rawXhr(t.fnt).then((e=>{Object.assign(n,d.ParseFont(e));for(const[e,i]of n.pages){const n=o.Texture.from(`${d.Utils.getPathFromURL(t.fnt)}${i.file}`);s.set(`p${e}.${t.type}.master`,n)}t.onload()})).catch((e=>{throw e})),{type:t.type,sdfSpread:t.sdfSpread,fontData:n,fontTextures:s,rasterize:function(e,t){for(const[i,o]of n.pages)a(s.get(`p${i}.sdf.master`),e,i,t)},setRasterizeRenderer:function(e){t.rasterizeRenderer=e}}},d.ParseFont=function(e){const t={info:{},common:{},pages:new Map,chars:new Map,kernings:new Map},n=e.split(/\r?\n/);for(let e of n){if(e=e.trim(),!e)continue;const n=e.split(" ")[0];e=e.substring(n.length+1);const s=/([a-zA-Z]+)=(".*?"|\S*?)(?:\s|$)/g,i={};let o;for(;o=s.exec(e);){const e=o[1];let s=o[2];switch(s=s.startsWith('"')?s.substring(1,s.length-1):s.includes(",")?s.split(",").map((e=>parseFloat(e))):parseFloat(s),n){case"info":t.info[e]=s;break;case"common":t.common[e]=s;break;default:i[e]=s}}switch(n){case"page":t.pages.set(i.id,i);break;case"char":t.chars.set(String.fromCharCode(i.id),i);break;case"kerning":t.kernings.set(`${String.fromCharCode(i.first)}${String.fromCharCode(i.second)}`,i)}}return t},d.LayoutText=function(e,t,n,s=1){let i=new Map;const o=n.fontData,a=[],r=[],l=[],c=[];let p=0,h=0;const u=new d.Utils.PRNG(t.misalignmentSeed||0),_=Array.isArray(t.misalignment);if(t._cache)i=d.CopyGeometry(t._cache);else{if("left"!==t.align||0!==t.anchor.x){let n=0,s=0,i=0,u=null,_=1,m=!1;for(const l of e){if(m){switch(l){case"t":case"c":case"b":break;default:_=d.Constants.modifierMapping[l]||1,m=!1}continue}if("\n"===l){a[i]=n-t.letterSpacing,r[i]=s,n=0,s=0,u=null,i++;continue}if("\f"===l){m=!0;continue}let e=o.chars.get(l);if(e||(e=o.chars.get(String.fromCharCode(0))),e){if(u){let e=o.kernings.get(`${u}${l}`);e&&(n+=e.amount*_)}n+=(e.xadvance+t.letterSpacing)*_,s++,u=l}}a[i]=n-t.letterSpacing*_,r[i]=s;const g=Math.max(...a);switch(t.align){case"center":for(const e of a)l.push((g-e)/2);break;case"right":for(const e of a)l.push(g-e);break;case"justify":for(const e of a)c.push((g-e)/Math.max(1,r.shift()-1))}p=-1*g*t.anchor.x,h=o.common.lineHeight*a.length*-1*t.anchor.y}else 0!==t.anchor.y&&(h=o.common.lineHeight*e.split("\n").length*-1*t.anchor.y);let n=0,u=0,_=0,m=null,g=1,f=!1,b="bottom";for(const a of e){if(f){switch(a){case"t":b="top";break;case"c":b="center";break;case"b":b="bottom";break;default:g=d.Constants.modifierMapping[a]||1,f=!1}continue}if("\n"===a){n=0,u+=o.common.lineHeight+t.lineSpacing,m=null,_++;continue}if("\f"===a){f=!0;continue}let e=o.chars.get(a);if(e||(e=o.chars.get(String.fromCharCode(0))),!e)continue;if(m){let e=o.kernings.get(`${m}${a}`);e&&(n+=e.amount*g)}i.has(e.page)||i.set(e.page,{i:0,vertices:[],uvs:[],indices:[]});const r=i.get(e.page);let C=((l[_]||0)+p)/g,y=h/g;1!==g&&("bottom"===b?y+=(o.common.base-g*o.common.base)/g:"center"===b&&(y+=(o.common.base-g*o.common.base)/g/2)),r.vertices.push((n+(e.xoffset+C)*g)*s,(u+(e.yoffset+y)*g)*s,(n+(e.xoffset+e.width+C)*g)*s,(u+(e.yoffset+y)*g)*s,(n+(e.xoffset+C)*g)*s,(u+(e.yoffset+e.height+y)*g)*s,(n+(e.xoffset+e.width+C)*g)*s,(u+(e.yoffset+e.height+y)*g)*s),r.uvs.push(e.x/o.common.scaleW,e.y/o.common.scaleH,(e.x+e.width)/o.common.scaleW,e.y/o.common.scaleH,e.x/o.common.scaleW,(e.y+e.height)/o.common.scaleH,(e.x+e.width)/o.common.scaleW,(e.y+e.height)/o.common.scaleH),r.indices.push(0+4*r.i,1+4*r.i,2+4*r.i,1+4*r.i,3+4*r.i,2+4*r.i),n+=(e.xadvance+t.letterSpacing)*g+(c[_]||0),r.i++,m=a}t._cache=d.CopyGeometry(i)}let m=0;for(const[,e]of i)for(let n=0;n<e.vertices.length;n+=8){const i=e.vertices[n+2]-e.vertices[n+0],o=e.vertices[n+5]-e.vertices[n+1];let a=t.overrides.get(m).theta,r=t.overrides.get(m).x,l=t.overrides.get(m).y,c=t.overrides.get(m).scale,p=t.overrides.get(m).useProjection,h=t.overrides.get(m).projection;(_||0!==t.misalignment)&&(r+=(_?t.misalignment[0]:t.misalignment)*(2*u.nextFloat()-1),l+=(_?t.misalignment[1]:t.misalignment)*(2*u.nextFloat()-1),_&&0===t.misalignment[2]||(a+=(_?t.misalignment[2]:t.misalignment)*(2*u.nextFloat()-1))),p&&(e.vertices[n+0]+=i*h[0].x,e.vertices[n+1]+=o*h[0].y,e.vertices[n+2]+=i*(h[1].x-1),e.vertices[n+3]+=o*h[1].y,e.vertices[n+4]+=i*h[2].x,e.vertices[n+5]+=o*(h[2].y-1),e.vertices[n+6]+=i*(h[3].x-1),e.vertices[n+7]+=o*(h[3].y-1)),1!==c&&(e.vertices[n+0]+=i/-2*c-i/-2,e.vertices[n+1]+=o/-2*c-o/-2,e.vertices[n+2]+=i/2*c-i/2,e.vertices[n+3]+=o/-2*c-o/-2,e.vertices[n+4]+=i/-2*c-i/-2,e.vertices[n+5]+=o/2*c-o/2,e.vertices[n+6]+=i/2*c-i/2,e.vertices[n+7]+=o/2*c-o/2),0!==a&&(e.vertices[n+0]+=i/-2*Math.cos(a)-o/-2*Math.sin(a)-i/-2,e.vertices[n+1]+=i/-2*Math.sin(a)+o/-2*Math.cos(a)-o/-2,e.vertices[n+2]+=i/2*Math.cos(a)-o/-2*Math.sin(a)-i/2,e.vertices[n+3]+=i/2*Math.sin(a)+o/-2*Math.cos(a)-o/-2,e.vertices[n+4]+=i/-2*Math.cos(a)-o/2*Math.sin(a)-i/-2,e.vertices[n+5]+=i/-2*Math.sin(a)+o/2*Math.cos(a)-o/2,e.vertices[n+6]+=i/2*Math.cos(a)-o/2*Math.sin(a)-i/2,e.vertices[n+7]+=i/2*Math.sin(a)+o/2*Math.cos(a)-o/2),0===r&&0===l||(e.vertices[n+0]+=s*r,e.vertices[n+1]+=s*l,e.vertices[n+2]+=s*r,e.vertices[n+3]+=s*l,e.vertices[n+4]+=s*r,e.vertices[n+5]+=s*l,e.vertices[n+6]+=s*r,e.vertices[n+7]+=s*l),m++}if(t.useProjection){let e=0,n=0;for(const[,t]of i)e=Math.max(e,t.vertices.reduce(((e,t,n)=>Math.max(e,n%2==0?t:0)),0)),n=Math.max(n,t.vertices.reduce(((e,t,n)=>Math.max(e,n%2==1?t:0)),0));const s=t.projection;for(const[,t]of i)for(let i=0;i<t.vertices.length;i+=2){let o=t.vertices[i]/e,a=t.vertices[i+1]/n;const r=s[0].x+(s[1].x-s[0].x)*o,l=s[0].y+(s[2].y-s[0].y)*a,c=l+(s[1].y+(s[3].y-s[1].y)*a-l)*o;t.vertices[i]=(r+(s[2].x+(s[3].x-s[2].x)*o-r)*a)*e,t.vertices[i+1]=c*n}}return i},d.CharacterOverrideMap=class extends Map{constructor(e,...t){super(...t),this._onchange=e}get(e){return super.has(e)||super.set(e,new d.CharacterOverride(this._onchange)),super.get(e)}set(e,t){const n=super.set(e,t);return this._onchange(),n}},d.CharacterOverride=class{constructor(e){this._onchange=e,this._x=0,this._y=0,this._theta=0,this._scale=1,this._useProjection=!1,this._projection=[[0,0],[1,0],[0,1],[1,1]];for(let e=0;e<4;e++)this._projection[e]=new o.ObservablePoint((()=>{this._onchange()}),this,...this._projection[e])}get x(){return this._x}set x(e){this._x=e,this._onchange()}get y(){return this._y}set y(e){this._y=e,this._onchange()}get theta(){return this._theta}set theta(e){this._theta=e,this._onchange()}get scale(){return this._scale}set scale(e){this._scale=e,this._onchange()}get useProjection(){return this._useProjection}set useProjection(e){this._useProjection=!!e,this._onchange()}get projection(){return this._projection}},d.CopyGeometry=function(e){const t=new Map;for(const[n,s]of e)t.set(n,{i:s.i,vertices:[...s.vertices],uvs:[...s.uvs],indices:[...s.indices]});return t},d.Geometrize=function(e){const t=new o.Geometry;return t.addAttribute("aVertexPosition",e.vertices,2),t.addAttribute("aTextureCoord",e.uvs,2),t.addIndex(e.indices),t},d.Constants={modifierMapping:{1:.2,2:.4,3:.6,4:.8,5:1,6:1.25,7:1.5,8:1.75,9:2}},d.Utils={rawXhr:function(e){return new Promise(((t,n)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.onload=()=>{4===s.readyState&&t(s.responseText)},s.onerror=()=>{n(new Error("Could not create Font: could not download .fnt file"))},s.send()}))},getPathFromURL:function(e){return e.includes("/")?`${e.split("/").slice(0,-1).join("/")}/`:""},PRNG:function(e){let t=parseInt(e)%2147483647;return t<=0&&(t+=2147483646),{next:function(){return t=16807*t%2147483647},nextFloat:function(e,t){return(this.next()-1)/2147483646},shuffleArray:function(e){let t,n=e.length;if(0==n)return e;for(;--n;)t=Math.floor(this.nextFloat()*(n+1)),[e[n],e[t]]=[e[t],e[n]];return e},getCurrentSeed:function(){return t}}}},d.ShaderSources={vertex:"\n\t\tattribute vec2 aVertexPosition;\n\t\tattribute vec2 aTextureCoord;\n\n\t\tuniform mat3 translationMatrix;\n\t\tuniform mat3 projectionMatrix;\n\t\tuniform float uScale;\n\n\t\tvarying vec2 vTextureCoord;\n\n\t\tvoid main(void)\n\t\t{\n\t\t    vTextureCoord = aTextureCoord;\n\t\t    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition * uScale, 1.0)).xy, 0.0, 1.0);\n\t\t}",fragment:"\n\t\tuniform sampler2D uSampler;\n\t\tuniform vec3 uTint;\n\t\tuniform float uAlpha;\n\t\tuniform float uWeight;\n\t\tuniform vec3 uOutlineTint;\n\t\tuniform float uOutlineAlpha;\n\t\tuniform float uFillAlpha;\n\t\tuniform float uOutlineWeight;\n\t\tuniform float uSharpness;\n\t\tuniform float uInvert;\n\n\t\tvarying vec2 vTextureCoord;\n\n\t\tvoid main(void)\n\t\t{\n\t\t\tvec4 color;\n\t\t\tfloat dist = texture2D(uSampler, vTextureCoord).a;\n\t\t\tdist = mix(dist, 1.0 - dist, uInvert);\n\n\t\t\tfloat innerAlpha = smoothstep(uWeight - uSharpness, uWeight + uSharpness, dist);\n\n\t\t\tif (uOutlineAlpha > 0.0) {\n\t\t\t\tfloat outerAlpha = smoothstep(uOutlineWeight - uSharpness, uOutlineWeight + uSharpness, dist) * uOutlineAlpha;\n\t\t\t\tvec4 outerColor = vec4(uOutlineTint, 1.0) * outerAlpha;\n\t\t\t\tvec4 innerColor = vec4(uTint, 1.0) * uFillAlpha;\n\t\t\t\tgl_FragColor = mix(outerColor, innerColor, innerAlpha) * uAlpha;\n\t\t\t} else {\n\t\t\t\tgl_FragColor = vec4(uTint, 1.0) * (innerAlpha) * uAlpha;\n\t\t\t}\n\t\t}"},d.ShaderSourcesGl2={vertex:"#version 300 es\n\n\t#define SHADER_NAME THEORYTYPEGL2\n\n\tin vec2 aVertexPosition;\n\tin vec2 aTextureCoord;\n\n\tuniform mat3 translationMatrix;\n\tuniform mat3 projectionMatrix;\n\tuniform float uScale;\n\n\tout vec2 vTextureCoord;\n\n\tvoid main(void)\n\t{\n\t\tvTextureCoord = aTextureCoord;\n\t\tgl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition * uScale, 1.0)).xy, 0.0, 1.0);\n\t}",fragment:"#version 300 es\n\tprecision mediump float;\n\n\t#define SHADER_NAME THEORYTYPEGL2\n\n\tuniform sampler2D uSampler;\n\tuniform vec3 uTint;\n\tuniform float uAlpha;\n\tuniform float uWeight;\n\tuniform vec3 uOutlineTint;\n\tuniform float uOutlineAlpha;\n\tuniform float uFillAlpha;\n\tuniform float uOutlineWeight;\n\tuniform float uSharpness;\n\tuniform float uInvert;\n\tuniform vec2 uTextureSize;\n\tuniform float uSdfSpread;\n\n\tin vec2 vTextureCoord;\n\tout vec4 fragColor;\n\n\tvoid main(void)\n\t{\n\t\tvec4 color;\n\n\t\tfloat dist = texture(uSampler, vTextureCoord).a;\n\t\tdist = mix(dist, 1.0 - dist, uInvert);\n\n\t\tvec2 duv = fwidth(vTextureCoord);\n\t\tfloat dtex = length(duv * uTextureSize);\n\t\tfloat pixelDist = (uWeight - dist) * uSdfSpread * 2.0 / dtex;\n\n\t\tfloat innerAlpha = clamp(0.5 - pixelDist, 0.0, 1.0);\n\n\t\tfloat distMask = step(0.02, dist);\n\n\t\tif (uOutlineAlpha > 0.0) {\n\t\t\tfloat outlineDist = (uOutlineWeight - dist) * uSdfSpread * 2.0 / dtex;\n\t\t\tfloat outerAlpha = clamp(0.5 - outlineDist, 0.0, 1.0) * uOutlineAlpha;\n\n\t\t\tvec4 outerColor = vec4(uOutlineTint, 1.0) * outerAlpha;\n\t\t\tvec4 innerColor = vec4(uTint, 1.0) * uFillAlpha;\n\n\t\t\tfragColor = mix(outerColor, innerColor, innerAlpha) * uAlpha * distMask;\n\t\t} else {\n\t\t\tfragColor = vec4(uTint, 1.0) * innerAlpha * uAlpha * distMask;\n\t\t}\n\t}"},d.Shader=new o.Program(d.ShaderSources.vertex,d.ShaderSources.fragment,"THEORYTYPE");const g=function(e,t){try{const i=o.Texture.from(e.img||"./kagari.png");let a,r,l,c=new o.Application({width:640,height:320,view:e.view,antialias:!1,backgroundAlpha:0,powerPreference:"high-performance",forceFXAA:!1});function n(){a=new o.Container,l=new o.Container,r=new o.Container(void 0,{vertices:!1,position:!0,rotation:!1,uvs:!1,tint:!0},void 0,!0),r.blendMode=o.BLEND_MODES.SCREEN,c.stage.addChild(a),c.stage.addChild(r),c.stage.addChild(l)}function s(){a.destroy(),r.destroy(),l.destroy()}n();const p=Date.now();let h="Unknown";const u=c.renderer.context.webGLVersion,_=c.renderer.gl.getExtension("WEBGL_debug_renderer_info");_&&(h=c.renderer.gl.getParameter(_.UNMASKED_RENDERER_WEBGL)||"Unknown");const m=[];let g=0,f=0,b=0,C=[];c.ticker.add((_=>{if(b++,!(b<=0)){if(1!==b&&_>=(e.cutoff||1.5)*(b%2!=0?1:4)){if(f+=_/(e.cutoff||1.5),f>=(e.fails||4)){m.push(g);let i=--e.maxcount<=0;if(!i&&e.smartstop&&m.length>=(e.mincount||1)&&m.length>=2){const e=m[m.length-1]/m[m.length-2];e>=.8&&e<=1.25&&(i=!0)}if(i){c.ticker.stop(),s(),c.destroy(!1,!0);const e=m.reduce((function(e,t){return Math.max(e,t)}));let n=0,i=0;m.forEach((t=>{let s=Math.pow(t,1.5)/Math.pow(e,1.5);n+=s,i+=t*s})),t({success:!0,feecof:Math.floor(i/n),detail:m,webglver:u,cores:navigator.hardwareConcurrency||0,memory:navigator.deviceMemory||0,renderer:h,duration:Date.now()-p})}else s(),n(),g=0,C=[],f=0,b=-3;return}}else b%2!=0&&(f=Math.max(0,f-2));if(g+=50*b/Math.max(1,_)*(e.speed||1),b%2==1){const t=2*b*(e.speed||1);for(let e=0;e<t;e++){const e=new o.Sprite(i);e.position.set(640*Math.random(),320*Math.random()),e.angle=360*Math.random(),a.addChild(e)}const n=5*b*(e.speed||1);for(let e=0;e<n;e++){const e=new o.Sprite(i);e.scale.set(.2),e.position.set(640*Math.random(),320*Math.random()),e.tint=16777215*Math.random(),r.addChild(e)}const s=.05*b*(e.speed||1);for(let t=0;t<s;t++){const n=new d.Text("KAGARI 00000",{font:e.font,fontSize:16,tint:16777215*Math.random()});n.position.set(640*Math.random(),320*Math.random()),n.angle=360*Math.random(),l.addChild(n),t%3==0&&C.push(n)}for(const e of C)e.text="KAGARI "+Math.floor(1e5*Math.random()).toString().padStart(5,"0")}}}))}catch(y){console.error(y),t({success:!1})}},f={};function b(e){const t=Object.prototype.toString.call(e);return b.cached[t]?b.cached[t]:b.cached[t]=t.substring(8,t.length-1).toLowerCase()}f.ClippableSprite=class extends o.Sprite{_clipTop=0;_clipBottom=1;calculateVertices(){if(0===this._clipTop&&1===this._clipBottom)return void super.calculateVertices();const e=this._textureID!==this._texture._updateID,t=this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID;super.calculateVertices(),e&&this._updateUVs(),t&&this._updateVertices()}_updateUVs(){if(!this.uvs)return;this.uvs=this.uvs.slice();const e=this.uvs[5]-this.uvs[1];this.uvs[5]=this.uvs[1]+this._clipBottom*e,this.uvs[1]=this.uvs[1]+this._clipTop*e,this.uvs[3]=this.uvs[1],this.uvs[7]=this.uvs[5]}_updateVertices(){if(!this.vertexData)return;const e=this.vertexData[6]-this.vertexData[0],t=this.vertexData[7]-this.vertexData[1];this.vertexData[0]+=e*this._clipTop,this.vertexData[1]+=t*this._clipTop,this.vertexData[2]+=e*this._clipTop,this.vertexData[3]+=t*this._clipTop,this.vertexData[4]-=e*(1-this._clipBottom),this.vertexData[5]-=t*(1-this._clipBottom),this.vertexData[6]-=e*(1-this._clipBottom),this.vertexData[7]-=t*(1-this._clipBottom)}get clipTop(){return this._clipTop}set clipTop(e){e=Math.min(1,Math.max(0,e)),this._clipTop!==e&&(this._clipTop=e,this._transformID=-1,this._textureID=-1)}get clipBottom(){return this._clipBottom}set clipBottom(e){e=Math.min(1,Math.max(0,e)),this._clipBottom!==e&&(this._clipBottom=e,this._transformID=-1,this._textureID=-1)}},f.Soil=class extends o.Container{_els=new Map;_layout;_textures;_y=0;_listeners={};_hasUnloadedTextures=!0;_size="2x";_layerKeys=null;_textureKeys=null;constructor(e,t,n=0,s="2x",i={}){super(),this._layout=e,this._textures=t,this._y=n,this._listeners=i,this._size=s,this._layerKeys=Object.keys(this._layout.layers),this._textureKeys=Object.keys(this._textures);for(const e of this._layerKeys){const t=this._layout.layers[e],n=new o.Container;n.x=t.x,n._pl_ready=!1,n.renderable=!1,this.addChild(n),this._els.set(`l${e}`,n)}this._setPosition(this._y)}_setPosition(e){for(const t of this._layerKeys){const n=this._layout.layers[t],s=this._els.get(`l${t}`);s.y=n.s*(e-n.at)-n.y,s.renderable=s.y>-this._layout.margins.top&&s.y-n.h<this._layout.margins.btm,s.renderable&&(s._pl_ready||this._createLayer(t),this._updateLayer(t,e))}for(const t of this._textureKeys)this._textures[t][2]<=e&&!this._els.has(`t${t}`)&&this._provisionTexture(t)}_provisionTexture(e){const t=o.Texture.from(this._textures[e][0]);t.defaultAnchor.set(0,1),t._pl_scale={"4x":1,"2x":2,"1x":4,hx:8}[this._size],this._els.set(`t${e}`,t);const n=()=>{if(!this._hasUnloadedTextures)return;let e=!0;for(const t of this._layerKeys){const n=this._els.get(`l${t}`);if(n.renderable){for(const t of n.children)if(t.renderable&&!t.texture.baseTexture.valid){e=!1;break}if(!e)break}}e&&(this._hasUnloadedTextures=!1,this._listeners.loaded?.())};return t.baseTexture.valid?n():t.baseTexture.on("loaded",n),t}_createLayer(e){const t=this._layout.layers[e],n=this._els.get(`l${e}`);for(const e of t.panels[this._size]){const t=this._els.get(`t${e[0]}`)??this._provisionTexture(e[0]),s=new f.ClippableSprite(t);s.position.set(e[1],-e[2]),s.scale.set(t._pl_scale),s.renderable=!1,s._pl_texsize=this._textures[e[0]][1],n.addChild(s)}n._pl_ready=!0}_updateLayer(e,t){const n=this._layout.layers[e],s=this._els.get(`l${e}`);let i=null,o=null;n.masks?.top&&(i=n.masks.top.s*(t-n.masks.top.at)-n.masks.top.y-s.y),n.masks?.btm&&(o=n.masks.btm.s*(t-n.masks.btm.at)-n.masks.btm.y-s.y);for(const e of s.children){const t=s.y+e.y;e.renderable=t>-this._layout.margins.top&&t-e._pl_texsize<this._layout.margins.btm,e.renderable&&null!==i&&(e.clipTop=(i-(e.y-e._pl_texsize))/e._pl_texsize),e.renderable&&null!==o&&(e.clipBottom=(o-(e.y-e._pl_texsize))/e._pl_texsize),!e.renderable||this._hasUnloadedTextures||e.texture.baseTexture.valid||(this._hasUnloadedTextures=!0,this._listeners.loading?.())}}get y(){return this._y}set y(e){e!==this._y&&(this._y=e,this._setPosition(this._y))}},b.cached={};class C{constructor(e){this._seed=e%2147483647,this._seed<=0&&(this._seed+=2147483646,this._seed=this._seed||1)}get seed(){return this._seed}next(){return this._seed=16807*this._seed%2147483647}nextFloat(){return(this.next()-1)/2147483646}shuffleArray(e){let t,n=e.length;if(0==n)return e;for(;--n;)t=Math.floor(this.nextFloat()*(n+1)),[e[n],e[t]]=[e[t],e[n]];return e}}const y=19,x=11,A=new Map,v=function(e,t={}){const n={W:10,H:20,B:20,T:40,Wh:5,Hh:10,get id(){return this.gsm.setoptions.gameid}};n.gsm=new G(n),n.cm=new M(n),n.c=new E(n),n.elm=new H(n),n.iom=new K(n,t.socket),n.esm=new P(n,e,t.replay),n.bm=new T(n),n.fm=new R(n),n.im=new q(n),n.gem=new $(n),n.hm=new j(n),n.sdm=new ae(n),n.pm=new ee(n),n.lm=new Y(n),n.otm=new J(n),n.stm=new le(n),n.ctm=new D(n),n.pbm=new te(n),n.ssm=new oe(n),n.dsm=new O(n),n.znm=new _e(n),n.svm=new ce(n),n.rbm=new ne(n),n.gom=new X(n),n.bam=new F(n),n.lcm=new V(n),n.atm=new z(n),n.wfm=new ue(n),n.fim=new W(n),n.spm=new ie(n),n.sfx=new se(n),n.gpm=new U(n),n.fxm=new N(n),n.mam=new Q(n),n.bhm=new I(n),n.siom=new re(n),n.stam=new ge(n),n.um=new de(n),n.tm=new pe(n),n.mm=new Z(n),n.zthm=new me(n),n.am=new S(n),n.trm=new he(n);const s={get id(){return n.id},get state(){return n.gsm},get options(){return n.gsm.setoptions},get replay(){return n.iom.replay},get source(){return n.esm},get fire(){return n.gsm.fire},createGameHolder:function(e){n.hm.SetDisplayMode(e),n.hm.CreateHolder(),xs(!1)},getPos:function(){return n.iom.IsHeadless()?{pos:{x:(window.innerWidth+200)*Math.random()-100,y:window.innerHeight/2-ws(400)+Math.random()*ws(800)},scale:.2,isFallback:!0}:{pos:sc(n.hm.H.stackobj,ws(_c.x*n.Wh),ws(_c.x*n.Hh),n.hm.H.holderstate.cos),scale:n.hm.S()}},getPosTransformed:function(){return{pos:nc(n.hm.H.stackobj,ws(_c.x*n.Wh),ws(_c.x*n.Hh)),scale:n.hm.S()}},getDisplayMode:function(){return n.hm.H.displaymode},getGameTime:function(){return n.lm.GetGameTime()},getFrame:function(){return n.esm.frame},getReplayFrame:function(){return n.iom.replay.frame},getStrategy:function(){return n.gsm.diyusi},getTargets:function(){return n.tm.GetTargets()},getEnemies:function(){return n.gsm.enemies},getOwner:function(){return n.gsm.setoptions.username},getDuoOptions:function(){return{enabled:!!n.gsm.setoptions.zenith_duo,ally:{id:n.gsm.setoptions.zenith_ally?.[0],username:n.gsm.setoptions.zenith_ally?.[1]}}},getHolderData:function(){return n.hm.H},updateDuoSide:function(e,t=!1){const s=t&&n.hm.H.duoSideLock!==e;n.hm.H.duoSideLock=e,s&&n.hm.CreateHolder()},getLastAttacker:function(){return n.gsm.killer.gameid},isHeadless:function(){return n.iom.IsHeadless()},isOnline:function(){return n.iom.IsOnline()},isStarted:function(){return n.gsm.started},isPlaying:()=>n.gsm.playing,flushCanvases:function(){n.c.IsServer()||n.hm.CreateHolder()},bindRollingReplay:function(e){n.iom.replay.BindRollingTarget(e)},setGame:function(e,t){n.stam.SetConstants(t),n.stam.SetOptions(e),n.iom.replay.SetOptions(n.stam.gameOptions),n.esm.gameid=n.gsm.setoptions.gameid},setManualTarget(e){n.esm.Push("manual_target",e)},setStrategy(e){n.esm.Push("strategy",e)},setHeadless(e){n.iom.SetHeadless(e)},setSynced(e){n.iom.synced=e},getTargetAllowed:()=>n.tm.IsEnabled(),startGame:function(){return n.stam.StartGame()},spectateGame:function(){return n.stam.SpectateGame()},export:function(){return n.siom.Export()},end:function(e="drop"){n.gom.GameOver(e,!0)},endNow:function(){n.gom.GameOver("dropnow",!0)},endLose:function(e=!1){e&&n.atm.TakeAllDamage(!0),n.gom.GameOver("topout",!0)},endWin:function(){n.gom.GameOver("winner",!0)},endClear:function(){n.gom.GameOver("clear",!0)},queueEnd:function(e,t=!1,s=void 0,i=void 0){if(n.gsm.endqueued)return;n.gsm.endqueued=!0;let o=!1;const a=()=>{o||(o=!0,t&&n.atm.TakeAllDamage(!0),void 0!==s&&(n.gsm.fire=s),void 0!==i&&(n.gsm.killer=i),n.gom.GameOver(e,!0))};if(!n.iom.IsScoped())return void a();let r=!1;const l=()=>{0!==n.esm.AmountToCatchUp()?(r=!1,n.wfm.WaitFramesUnsafe(1,(()=>{l()}))):r?a():(r=!0,setTimeout(l,200))};l(),setTimeout(a,1e3)},destroy:function(){n.esm.Destroy(),n.gom.Destroy()},behead:function(){n.hm.Behead()},fadeOutAndBehead:function(e){n.hm.FadeOutAndBehead(e)},rehead:function(e=!1){n.hm.Rehead(e)},doFrame:function(){n.c.IsServer()&&n.lm.DoFrame()},doAllFrames(){if(!n.c.IsServer())return;const e=n.esm.replay.GetEndEventFrame()??0;for(let t=0;n.gsm.playing&&t<=e+1;t++)n.lm.DoFrame()},advanceFrames:function(e,t){n.lm.AdvanceFrames(e,t),t&&!n.c.IsServer()&&n.pbm.ForceUpdateGarbageBar("impending")},playbackSpeed:function(e){if(void 0===e)return n.lm.H.playbackSpeed;n.lm.H.playbackSpeed=e},soundPitchAdjust:function(e){if(void 0===e)return n.lm.H.soundPitchAdjust;n.lm.H.soundPitchAdjust=e},soundVolumeAdjust:function(e){if(void 0===e)return n.lm.H.soundVolumeAdjust;n.lm.H.soundVolumeAdjust=e},location:function(e,t,s,i=!1){n.hm.H.holderstate.ox=e,n.hm.H.holderstate.oy=t,n.hm.H.holderstate.os=s,i&&(n.hm.H.holderstate.cox=e,n.hm.H.holderstate.coy=t,n.hm.H.holderstate.cos=s,n.hm.H.holderneedsrepull=!0)},playZoomInto:function(e){return n.stam.PlayZoomInto(e)},isSynced:function(){return n.iom.synced},isScoped:function(){return n.iom.scoped},changeDisplayMode:function(e){n.hm.H.displaymode!==e&&(n.hm.SetDisplayMode(e),n.hm.CreateHolder(),n.lm.H.diter=n.lm.H.cheekystep-1)},emit:function(...e){return n.elm.emit(...e)},on:function(...e){return n.elm.on(...e)},once:function(...e){return n.elm.once(...e)},remove:function(...e){return n.elm.remove(...e)},exportListeners:function(){return n.elm.Export()},importListeners:function(e){return n.elm.Import(e)},tamper:function(e=["t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t"]){n.gsm.bag=e},setTargeted:function(e){n.tm.SetTargeted(!!e)},setEnemy:function(e){n.tm.SetEnemy(!!e)},setB2BDistance:function(e){n.tm.SetB2BDistance(e)},highest:function(){return n.bm.HighestLine()},garbagestats:function(){return{garbagereceived:n.gsm.garbagereceived}},displayOffDef:function(e,t,s,i,o=!1){e&&n.hm.H.board.fx("popup_offence").create(e,{x:s,y:i,evasive:o}),t&&n.hm.H.board.fx("popup_defense").create(t,{x:s,y:i,evasive:o})},updatePlacement:function(e){n.mam.SetPlacement(e)},loadZenConfig:function(){n.znm.LoadZenConfig()},pullZenConfig:function(){n.znm.UpdateFromZenConfig()},fetchZenConfig:function(){return n.znm.GetZenConfig()},levelZen:function(){n.znm.ZenLevelup()},awaitFrame:function(e){return new Promise((t=>{if(n.esm.frame>=e)return t();n.wfm.WaitFramesUnsafe(Math.max(1,e-n.esm.frame),t)}))},ejectState:function(){return n.siom.EjectState()},overlayState:function(e){n.siom.OverlayState(e)},injectState:function(e){n.siom.InjectState(e),n.esm.Seek(e.frame),n.iom.replay?.Seek(e.frame)},ejectBoardState:function(){return n.siom.EjectBoardState()},injectBoardState:function(e){n.siom.InjectBoardState(e)},requestState:function(){n.iom.RequestState()},getBoard:function(){return n.hm.H.board},getHolder:function(){return n.hm.H.holder},doCustomEvent:function(e,t){n.gem.DoCustomEvents({type:e,data:t})},recolorForAltitude:function(e){return n.zthm.RecolorForAltitude(e)},duoSetPrompts:function(e,t){return n.zthm.VisualSetPrompts(e,t)},duoSetPromptProgress:function(e){return n.zthm.VisualSetPromptProgress(e)},isAllyIncapacitated:function(){return n.gsm.zenith.allyincapacitated},getAchievements:function(){return n.rbm.GetAchievements()},getZenithAltitude:function(){return n.gsm.stats.zenith.altitude},setZenithAltitude:function(e){n.iom.synced||(n.gsm.stats.zenith.altitude=e)},getZenithSpeedrunState:function(){return{state:n.gsm.stats.zenith.speedrun?10===n.gsm.stats.zenith.floor?"win":"on":"off",splits:n.gsm.stats.zenith.splits,time:n.lm.GetGameTime(),floor:n.gsm.stats.zenith.floor,progress:(n.gsm.stats.zenith.altitude-me.FloorDistance[n.gsm.stats.zenith.floor-1])/(me.FloorDistance[n.gsm.stats.zenith.floor]-me.FloorDistance[n.gsm.stats.zenith.floor-1])}},setZenithRhythmBlast:function(e){n.hm.H.rhythmBlast=e}};return n.parent=s,s};class k{constructor(e){this.self=e}get S(){return this.self.gsm}get W(){return this.S.setoptions.boardwidth}get H(){return this.S.setoptions.boardheight}get B(){return this.S.setoptions.boardbuffer}get T(){return this.B+this.H}get Wh(){return this.W/2}get Hh(){return this.H/2}get sfx(){return this.self.sfx}get id(){return this.S.setoptions.gameid}get socket(){return this.self.iom.socket}get options(){return this.S.setoptions}OnClient(e){this.self.c.OnClient(e)}IsServer(...e){return this.self.c.IsServer(...e)}emit(...e){return this.self.elm.emit(...e)}}const w={minotypes:["z","l","o","s","i","j","t"],minocolors:["z","l","o","s","i","j","t","g","d","gb","gbd"],tetrominoes:{i1:{matrix:{w:1,h:1,dx:0,dy:1,data:[[[0,0,255]],[[0,0,255]],[[0,0,255]],[[0,0,255]]]},preview:{w:1,h:1,data:[[0,0,255]]},disallow_kick:!0},i2:{matrix:{w:2,h:2,dx:0,dy:1,data:[[[0,0,199],[1,0,124]],[[1,0,241],[1,1,31]],[[1,1,124],[0,1,199]],[[0,1,31],[0,0,241]]]},preview:{w:2,h:1,data:[[0,0,199],[1,0,124]]},kickset_special:"i2"},i3:{matrix:{w:3,h:3,dx:1,dy:1,data:[[[0,1,199],[1,1,68],[2,1,124]],[[1,0,241],[1,1,17],[1,2,31]],[[2,1,124],[1,1,68],[0,1,199]],[[1,2,31],[1,1,17],[1,0,241]]]},preview:{w:3,h:1,data:[[0,0,199],[1,0,68],[2,0,124]]},kickset_special:"i3"},l3:{matrix:{w:2,h:2,dx:0,dy:1,data:[[[0,0,241],[0,1,39],[1,1,124]],[[1,0,124],[0,0,201],[0,1,31]],[[1,1,31],[1,0,114],[0,0,199]],[[0,1,199],[1,1,156],[1,0,241]]]},preview:{w:2,h:2,data:[[0,0,241],[0,1,39],[1,1,124]]},kickset_special:"l3"},i5:{matrix:{w:5,h:5,dx:2,dy:2,data:[[[0,2,199],[1,2,68],[2,2,68],[3,2,68],[4,2,124]],[[2,0,241],[2,1,17],[2,2,17],[2,3,17],[2,4,31]],[[4,2,124],[3,2,68],[2,2,68],[1,2,68],[0,2,199]],[[2,4,31],[2,3,17],[2,2,17],[2,1,17],[2,0,241]]]},preview:{w:5,h:1,data:[[0,0,199],[1,0,68],[2,0,68],[3,0,68],[4,0,124]]},kickset_special:"i5"},z:{matrix:{w:3,h:3,dx:1,dy:1,data:[[[0,0,199],[1,0,114],[1,1,39],[2,1,124]],[[2,0,241],[2,1,156],[1,1,201],[1,2,31]],[[2,2,124],[1,2,39],[1,1,114],[0,1,199]],[[0,2,31],[0,1,201],[1,1,156],[1,0,241]]]},preview:{w:3,h:2,data:[[0,0,199],[1,0,114],[1,1,39],[2,1,124]]}},l:{matrix:{w:3,h:3,dx:1,dy:1,data:[[[2,0,241],[0,1,199],[1,1,68],[2,1,156]],[[2,2,124],[1,0,241],[1,1,17],[1,2,39]],[[0,2,31],[2,1,124],[1,1,68],[0,1,201]],[[0,0,199],[1,2,31],[1,1,17],[1,0,114]]]},preview:{w:3,h:2,data:[[2,0,241],[0,1,199],[1,1,68],[2,1,156]]}},o:{matrix:{w:2,h:2,dx:0,dy:1,data:[[[0,0,193],[1,0,112],[0,1,7],[1,1,28]],[[1,0,112],[1,1,28],[0,0,193],[0,1,7]],[[1,1,28],[0,1,7],[1,0,112],[0,0,193]],[[0,1,7],[0,0,193],[1,1,28],[1,0,112]]]},preview:{w:2,h:2,data:[[0,0,193],[1,0,112],[0,1,7],[1,1,28]]},disallow_kick:!0},s:{matrix:{w:3,h:3,dx:1,dy:1,data:[[[1,0,201],[2,0,124],[0,1,199],[1,1,156]],[[2,1,114],[2,2,31],[1,0,241],[1,1,39]],[[1,2,156],[0,2,199],[2,1,124],[1,1,201]],[[0,1,39],[0,0,241],[1,2,31],[1,1,114]]]},preview:{w:3,h:2,data:[[1,0,201],[2,0,124],[0,1,199],[1,1,156]]}},i:{matrix:{w:4,h:4,dx:1,dy:1,data:[[[0,1,199],[1,1,68],[2,1,68],[3,1,124]],[[2,0,241],[2,1,17],[2,2,17],[2,3,31]],[[3,2,124],[2,2,68],[1,2,68],[0,2,199]],[[1,3,31],[1,2,17],[1,1,17],[1,0,241]]]},preview:{w:4,h:1,data:[[0,0,199],[1,0,68],[2,0,68],[3,0,124]]},kickset_special:"i"},j:{matrix:{w:3,h:3,dx:1,dy:1,data:[[[0,0,241],[0,1,39],[1,1,68],[2,1,124]],[[2,0,124],[1,0,201],[1,1,17],[1,2,31]],[[2,2,31],[2,1,114],[1,1,68],[0,1,199]],[[0,2,199],[1,2,156],[1,1,17],[1,0,241]]]},preview:{w:3,h:2,data:[[0,0,241],[0,1,39],[1,1,68],[2,1,124]]}},t:{matrix:{w:3,h:3,dx:1,dy:1,data:[[[1,0,241],[0,1,199],[1,1,164],[2,1,124]],[[2,1,124],[1,0,241],[1,1,41],[1,2,31]],[[1,2,31],[2,1,124],[1,1,74],[0,1,199]],[[0,1,199],[1,2,31],[1,1,146],[1,0,241]]]},preview:{w:3,h:2,data:[[1,0,241],[0,1,199],[1,1,164],[2,1,124]]}},oo:{matrix:{w:4,h:4,dx:1,dy:1,data:[[[0,1,193],[1,1,64],[2,1,64],[3,1,112],[0,2,7],[1,2,4],[2,2,4],[3,2,28]],[[2,0,112],[2,1,16],[2,2,16],[2,3,28],[1,0,193],[1,1,1],[1,2,1],[1,3,7]],[[3,2,28],[2,2,68],[1,2,68],[0,2,7],[3,1,112],[2,1,64],[1,1,64],[0,1,193]],[[1,3,7],[1,2,1],[1,1,1],[1,0,193],[2,3,28],[2,2,16],[2,1,16],[2,0,112]]]},preview:{w:4,h:2,data:[[0,0,193],[1,0,64],[2,0,64],[3,0,112],[0,1,7],[1,1,4],[2,1,4],[3,1,28]]},kickset_special:"oo",weight:1}},tetrominoes_color:{i1:"i",i2:"i",i3:"i",l3:"j",i5:"i",z:"z",l:"l",o:"o",s:"s",i:"i",j:"j",t:"t",oo:"o",g:"g",d:"d",gb:"gb",gbd:"gbd"},spinbonuses_rules:{none:{},stupid:{types:["i1","i2","i3","l3","i5","z","l","o","s","i","j","t","oo"],types_mini:["t"]},all:{types:["i1","i2","i3","l3","i5","z","l","o","s","i","j","t","oo"],types_mini:["t"]},"all+":{types:["i1","i2","i3","l3","i5","z","l","o","s","i","j","t","oo"],types_mini:["t"]},"all-mini":{types:["i1","i2","i3","l3","i5","z","l","o","s","i","j","t","oo"],types_mini:["t"]},"all-mini+":{types:["i1","i2","i3","l3","i5","z","l","o","s","i","j","t","oo"],types_mini:["t"]},"mini-only":{types:["i1","i2","i3","l3","i5","z","l","o","s","i","j","t","oo"],types_mini:["t"]},handheld:{types:["t","s","z","l","j"],types_mini:["t"]},"T-spins":{types:["t"],types_mini:["t"]},"T-spins+":{types:["t"],types_mini:["t"]}},kicksets:{SRS:{kicks:{"01":[[-1,0],[-1,-1],[0,2],[-1,2]],10:[[1,0],[1,1],[0,-2],[1,-2]],12:[[1,0],[1,1],[0,-2],[1,-2]],21:[[-1,0],[-1,-1],[0,2],[-1,2]],23:[[1,0],[1,-1],[0,2],[1,2]],32:[[-1,0],[-1,1],[0,-2],[-1,-2]],30:[[-1,0],[-1,1],[0,-2],[-1,-2]],"03":[[1,0],[1,-1],[0,2],[1,2]],"02":[[0,-1],[1,-1],[-1,-1],[1,0],[-1,0]],13:[[1,0],[1,-2],[1,-1],[0,-2],[0,-1]],20:[[0,1],[-1,1],[1,1],[-1,0],[1,0]],31:[[-1,0],[-1,-2],[-1,-1],[0,-2],[0,-1]]},i_kicks:{"01":[[-2,0],[1,0],[-2,1],[1,-2]],10:[[2,0],[-1,0],[2,-1],[-1,2]],12:[[-1,0],[2,0],[-1,-2],[2,1]],21:[[1,0],[-2,0],[1,2],[-2,-1]],23:[[2,0],[-1,0],[2,-1],[-1,2]],32:[[-2,0],[1,0],[-2,1],[1,-2]],30:[[1,0],[-2,0],[1,2],[-2,-1]],"03":[[-1,0],[2,0],[-1,-2],[2,1]],"02":[],13:[],20:[],31:[]},i2_kicks:{"01":[[0,-1],[-1,0],[-1,-1]],10:[[0,1],[1,0],[1,1]],12:[[1,0],[0,-1],[1,0]],21:[[-1,0],[0,1],[-1,0]],23:[[0,1],[1,0],[1,-1]],32:[[0,-1],[-1,0],[-1,1]],30:[[-1,0],[0,1],[-1,2]],"03":[[1,0],[0,-1],[1,-2]],"02":[],13:[],20:[],31:[]},i3_kicks:{"01":[[1,0],[-1,0],[0,1],[0,-1]],10:[[-1,0],[1,0],[0,-1],[0,1]],12:[[1,0],[-1,0],[0,-2],[0,2]],21:[[-1,0],[1,0],[0,2],[0,-2]],23:[[-1,0],[1,0],[0,1],[0,-1]],32:[[1,0],[-1,0],[0,-1],[0,1]],30:[[-1,0],[1,0],[0,0],[0,0]],"03":[[1,0],[-1,0],[0,0],[0,0]],"02":[],13:[],20:[],31:[]},l3_kicks:{"01":[[-1,0],[1,0]],10:[[1,0],[-1,0]],12:[[0,-1],[0,1]],21:[[0,1],[0,-1]],23:[[1,0],[-1,0]],32:[[-1,0],[1,0]],30:[[0,1],[0,-1]],"03":[[0,-1],[0,1]],"02":[],13:[],20:[],31:[]},i5_kicks:{"01":[[-2,0],[2,0],[-2,1],[2,-2]],10:[[2,0],[-2,0],[2,-1],[-2,2]],12:[[-2,0],[2,0],[-2,-2],[2,1]],21:[[2,0],[-2,0],[2,2],[-2,-1]],23:[[2,0],[-2,0],[2,-1],[-2,2]],32:[[-2,0],[2,0],[-2,1],[2,-2]],30:[[2,0],[-2,0],[2,2],[-2,-1]],"03":[[-2,0],[2,0],[-2,-2],[2,1]],"02":[],13:[],20:[],31:[]},oo_kicks:{"01":[[0,-1],[-1,-1],[0,1],[-1,1],[1,0],[1,-1],[1,1]],10:[[1,0],[0,-1],[1,1],[1,-1],[-1,0],[-1,-1],[-1,1]],12:[[-1,0],[0,-1],[-1,1],[-1,-1],[1,0],[1,-1],[1,1]],21:[[0,-1],[1,-1],[0,1],[1,1],[-1,0],[-1,-1],[-1,1]],23:[[0,-1],[-1,-1],[0,1],[-1,1],[1,0],[1,-1],[1,1]],32:[[1,0],[0,-1],[1,1],[1,-1],[-1,0],[-1,-1],[-1,1]],30:[[-1,0],[0,-1],[-1,1],[-1,-1],[1,0],[1,-1],[1,1]],"03":[[0,-1],[1,-1],[0,1],[1,1],[-1,0],[-1,-1],[-1,1]],"02":[[0,-1]],13:[[1,0]],20:[[0,1]],31:[[-1,0]]},additional_offsets:{},spawn_rotation:{},color_overrides:{},preview_overrides:{}},"SRS+":{kicks:{"01":[[-1,0],[-1,-1],[0,2],[-1,2]],10:[[1,0],[1,1],[0,-2],[1,-2]],12:[[1,0],[1,1],[0,-2],[1,-2]],21:[[-1,0],[-1,-1],[0,2],[-1,2]],23:[[1,0],[1,-1],[0,2],[1,2]],32:[[-1,0],[-1,1],[0,-2],[-1,-2]],30:[[-1,0],[-1,1],[0,-2],[-1,-2]],"03":[[1,0],[1,-1],[0,2],[1,2]],"02":[[0,-1],[1,-1],[-1,-1],[1,0],[-1,0]],13:[[1,0],[1,-2],[1,-1],[0,-2],[0,-1]],20:[[0,1],[-1,1],[1,1],[-1,0],[1,0]],31:[[-1,0],[-1,-2],[-1,-1],[0,-2],[0,-1]]},i_kicks:{"01":[[1,0],[-2,0],[-2,1],[1,-2]],10:[[-1,0],[2,0],[-1,2],[2,-1]],12:[[-1,0],[2,0],[-1,-2],[2,1]],21:[[-2,0],[1,0],[-2,-1],[1,2]],23:[[2,0],[-1,0],[2,-1],[-1,2]],32:[[1,0],[-2,0],[1,-2],[-2,1]],30:[[1,0],[-2,0],[1,2],[-2,-1]],"03":[[-1,0],[2,0],[2,1],[-1,-2]],"02":[[0,-1]],13:[[1,0]],20:[[0,1]],31:[[-1,0]]},i2_kicks:{"01":[[0,-1],[-1,0],[-1,-1]],10:[[0,1],[1,0],[1,1]],12:[[1,0],[0,-1],[1,0]],21:[[-1,0],[0,1],[-1,0]],23:[[0,1],[1,0],[1,-1]],32:[[0,-1],[-1,0],[-1,1]],30:[[-1,0],[0,1],[-1,2]],"03":[[1,0],[0,-1],[1,-2]],"02":[],13:[],20:[],31:[]},i3_kicks:{"01":[[1,0],[-1,0],[0,1],[0,-1]],10:[[-1,0],[1,0],[0,-1],[0,1]],12:[[1,0],[-1,0],[0,-2],[0,2]],21:[[-1,0],[1,0],[0,2],[0,-2]],23:[[-1,0],[1,0],[0,1],[0,-1]],32:[[1,0],[-1,0],[0,-1],[0,1]],30:[[-1,0],[1,0],[0,0],[0,0]],"03":[[1,0],[-1,0],[0,0],[0,0]],"02":[],13:[],20:[],31:[]},l3_kicks:{"01":[[-1,0],[1,0]],10:[[1,0],[-1,0]],12:[[0,-1],[0,1]],21:[[0,1],[0,-1]],23:[[1,0],[-1,0]],32:[[-1,0],[1,0]],30:[[0,1],[0,-1]],"03":[[0,-1],[0,1]],"02":[],13:[],20:[],31:[]},i5_kicks:{"01":[[-2,0],[2,0],[-2,1],[2,-2]],10:[[2,0],[-2,0],[2,-1],[-2,2]],12:[[-2,0],[2,0],[-2,-2],[2,1]],21:[[2,0],[-2,0],[2,2],[-2,-1]],23:[[2,0],[-2,0],[2,-1],[-2,2]],32:[[-2,0],[2,0],[-2,1],[2,-2]],30:[[2,0],[-2,0],[2,2],[-2,-1]],"03":[[-2,0],[2,0],[-2,-2],[2,1]],"02":[],13:[],20:[],31:[]},oo_kicks:{"01":[[0,-1],[-1,-1],[0,1],[-1,1],[1,0],[1,-1],[1,1]],10:[[1,0],[0,-1],[1,1],[1,-1],[-1,0],[-1,-1],[-1,1]],12:[[-1,0],[0,-1],[-1,1],[-1,-1],[1,0],[1,-1],[1,1]],21:[[0,-1],[1,-1],[0,1],[1,1],[-1,0],[-1,-1],[-1,1]],23:[[0,-1],[-1,-1],[0,1],[-1,1],[1,0],[1,-1],[1,1]],32:[[1,0],[0,-1],[1,1],[1,-1],[-1,0],[-1,-1],[-1,1]],30:[[-1,0],[0,-1],[-1,1],[-1,-1],[1,0],[1,-1],[1,1]],"03":[[0,-1],[1,-1],[0,1],[1,1],[-1,0],[-1,-1],[-1,1]],"02":[[0,-1]],13:[[1,0]],20:[[0,1]],31:[[-1,0]]},additional_offsets:{},spawn_rotation:{},color_overrides:{},preview_overrides:{}},"SRS-X":{kicks:{"01":[[-1,0],[-1,-1],[0,2],[-1,2]],10:[[1,0],[1,1],[0,-2],[1,-2]],12:[[1,0],[1,1],[0,-2],[1,-2]],21:[[-1,0],[-1,-1],[0,2],[-1,2]],23:[[1,0],[1,-1],[0,2],[1,2]],32:[[-1,0],[-1,1],[0,-2],[-1,-2]],30:[[-1,0],[-1,1],[0,-2],[-1,-2]],"03":[[1,0],[1,-1],[0,2],[1,2]],"02":[[1,0],[2,0],[1,1],[2,1],[-1,0],[-2,0],[-1,1],[-2,1],[0,-1],[3,0],[-3,0]],13:[[0,1],[0,2],[-1,1],[-1,2],[0,-1],[0,-2],[-1,-1],[-1,-2],[1,0],[0,3],[0,-3]],20:[[-1,0],[-2,0],[-1,-1],[-2,-1],[1,0],[2,0],[1,-1],[2,-1],[0,1],[-3,0],[3,0]],31:[[0,1],[0,2],[1,1],[1,2],[0,-1],[0,-2],[1,-1],[1,-2],[-1,0],[0,3],[0,-3]]},i_kicks:{"01":[[-2,0],[1,0],[-2,1],[1,-2]],10:[[2,0],[-1,0],[2,-1],[-1,2]],12:[[-1,0],[2,0],[-1,-2],[2,1]],21:[[1,0],[-2,0],[1,2],[-2,-1]],23:[[2,0],[-1,0],[2,-1],[-1,2]],32:[[-2,0],[1,0],[-2,1],[1,-2]],30:[[1,0],[-2,0],[1,2],[-2,-1]],"03":[[-1,0],[2,0],[-1,-2],[2,1]],"02":[[-1,0],[-2,0],[1,0],[2,0],[0,1]],13:[[0,1],[0,2],[0,-1],[0,-2],[-1,0]],20:[[1,0],[2,0],[-1,0],[-2,0],[0,-1]],31:[[0,1],[0,2],[0,-1],[0,-2],[1,0]]},i2_kicks:{"01":[[0,-1],[-1,0],[-1,-1]],10:[[0,1],[1,0],[1,1]],12:[[1,0],[0,-1],[1,0]],21:[[-1,0],[0,1],[-1,0]],23:[[0,1],[1,0],[1,-1]],32:[[0,-1],[-1,0],[-1,1]],30:[[-1,0],[0,1],[-1,2]],"03":[[1,0],[0,-1],[1,-2]],"02":[[-1,0],[-2,0],[1,0],[2,0],[0,1]],13:[[0,1],[0,2],[0,-1],[0,-2],[-1,0]],20:[[1,0],[2,0],[-1,0],[-2,0],[0,-1]],31:[[0,1],[0,2],[0,-1],[0,-2],[1,0]]},i3_kicks:{"01":[[1,0],[-1,0],[0,1],[0,-1]],10:[[-1,0],[1,0],[0,-1],[0,1]],12:[[1,0],[-1,0],[0,-2],[0,2]],21:[[-1,0],[1,0],[0,2],[0,-2]],23:[[-1,0],[1,0],[0,1],[0,-1]],32:[[1,0],[-1,0],[0,-1],[0,1]],30:[[-1,0],[1,0],[0,0],[0,0]],"03":[[1,0],[-1,0],[0,0],[0,0]],"02":[[1,0],[2,0],[1,1],[2,1],[-1,0],[-2,0],[-1,1],[-2,1],[0,-1],[3,0],[-3,0]],13:[[0,1],[0,2],[-1,1],[-1,2],[0,-1],[0,-2],[-1,-1],[-1,-2],[1,0],[0,3],[0,-3]],20:[[-1,0],[-2,0],[-1,-1],[-2,-1],[1,0],[2,0],[1,-1],[2,-1],[0,1],[-3,0],[3,0]],31:[[0,1],[0,2],[1,1],[1,2],[0,-1],[0,-2],[1,-1],[1,-2],[-1,0],[0,3],[0,-3]]},l3_kicks:{"01":[[-1,0],[1,0]],10:[[1,0],[-1,0]],12:[[0,-1],[0,1]],21:[[0,1],[0,-1]],23:[[1,0],[-1,0]],32:[[-1,0],[1,0]],30:[[0,1],[0,-1]],"03":[[0,-1],[0,1]],"02":[[1,0],[2,0],[1,1],[2,1],[-1,0],[-2,0],[-1,1],[-2,1],[0,-1],[3,0],[-3,0]],13:[[0,1],[0,2],[-1,1],[-1,2],[0,-1],[0,-2],[-1,-1],[-1,-2],[1,0],[0,3],[0,-3]],20:[[-1,0],[-2,0],[-1,-1],[-2,-1],[1,0],[2,0],[1,-1],[2,-1],[0,1],[-3,0],[3,0]],31:[[0,1],[0,2],[1,1],[1,2],[0,-1],[0,-2],[1,-1],[1,-2],[-1,0],[0,3],[0,-3]]},i5_kicks:{"01":[[-2,0],[2,0],[-2,1],[2,-2]],10:[[2,0],[-2,0],[2,-1],[-2,2]],12:[[-2,0],[2,0],[-2,-2],[2,1]],21:[[2,0],[-2,0],[2,2],[-2,-1]],23:[[2,0],[-2,0],[2,-1],[-2,2]],32:[[-2,0],[2,0],[-2,1],[2,-2]],30:[[2,0],[-2,0],[2,2],[-2,-1]],"03":[[-2,0],[2,0],[-2,-2],[2,1]],"02":[[1,0],[2,0],[1,1],[2,1],[-1,0],[-2,0],[-1,1],[-2,1],[0,-1],[3,0],[-3,0]],13:[[0,1],[0,2],[-1,1],[-1,2],[0,-1],[0,-2],[-1,-1],[-1,-2],[1,0],[0,3],[0,-3]],20:[[-1,0],[-2,0],[-1,-1],[-2,-1],[1,0],[2,0],[1,-1],[2,-1],[0,1],[-3,0],[3,0]],31:[[0,1],[0,2],[1,1],[1,2],[0,-1],[0,-2],[1,-1],[1,-2],[-1,0],[0,3],[0,-3]]},oo_kicks:{"01":[[0,-1],[-1,-1],[0,1],[-1,1],[1,0],[1,-1],[1,1]],10:[[1,0],[0,-1],[1,1],[1,-1],[-1,0],[-1,-1],[-1,1]],12:[[-1,0],[0,-1],[-1,1],[-1,-1],[1,0],[1,-1],[1,1]],21:[[0,-1],[1,-1],[0,1],[1,1],[-1,0],[-1,-1],[-1,1]],23:[[0,-1],[-1,-1],[0,1],[-1,1],[1,0],[1,-1],[1,1]],32:[[1,0],[0,-1],[1,1],[1,-1],[-1,0],[-1,-1],[-1,1]],30:[[-1,0],[0,-1],[-1,1],[-1,-1],[1,0],[1,-1],[1,1]],"03":[[0,-1],[1,-1],[0,1],[1,1],[-1,0],[-1,-1],[-1,1]],"02":[[0,-1]],13:[[1,0]],20:[[0,1]],31:[[-1,0]]},additional_offsets:{},spawn_rotation:{},color_overrides:{},preview_overrides:{}},"TETRA-X":{kicks:{"01":[[0,1],[-1,0],[1,0],[-1,1],[1,1],[0,-1],[-1,-1],[1,-1]],10:[[0,1],[1,0],[-1,0],[1,1],[-1,1],[0,-1],[1,-1],[-1,-1]],12:[[0,1],[-1,0],[1,0],[-1,1],[1,1],[0,-1],[-1,-1],[1,-1]],21:[[0,1],[1,0],[-1,0],[1,1],[-1,1],[0,-1],[1,-1],[-1,-1]],23:[[0,1],[-1,0],[1,0],[-1,1],[1,1],[0,-1],[-1,-1],[1,-1]],32:[[0,1],[1,0],[-1,0],[1,1],[-1,1],[0,-1],[1,-1],[-1,-1]],30:[[0,1],[-1,0],[1,0],[-1,1],[1,1],[0,-1],[-1,-1],[1,-1]],"03":[[0,1],[1,0],[-1,0],[1,1],[-1,1],[0,-1],[1,-1],[-1,-1]],"02":[[0,1],[0,-1],[-1,0],[1,0]],13:[[0,1],[0,-1],[-1,0],[1,0]],20:[[0,1],[0,-1],[-1,0],[1,0]],31:[[0,1],[0,-1],[-1,0],[1,0]]},i_kicks:{"01":[[0,-1],[0,-2],[0,1],[1,-1],[-1,-1],[1,-2],[-1,-2]],10:[[0,-1],[0,-2],[0,1],[-1,0],[1,0],[2,0]],12:[[0,-1],[0,-2],[0,1],[-1,0],[1,0],[2,0]],21:[[0,1],[0,2],[0,-1],[-1,1],[1,1],[-1,2],[1,2]],23:[[0,1],[0,2],[0,-1],[1,1],[-1,1],[1,2],[-1,2]],32:[[0,-1],[0,-2],[0,1],[1,0],[-1,0],[-2,0]],30:[[0,-1],[0,-2],[0,1],[1,0],[-1,0],[-2,0]],"03":[[0,-1],[0,-2],[0,1],[-1,-1],[1,-1],[-1,-2],[1,-2]],"02":[[0,-1],[0,1]],13:[[0,-1],[0,1]],20:[[0,-1],[0,1]],31:[[0,-1],[0,1]]},additional_offsets:{},spawn_rotation:{},color_overrides:{i1:"l",i2:"l",i3:"l",l3:"o",i5:"l",l:"o",o:"s",s:"i",i:"l",oo:"s"},preview_overrides:{}},NRS:{kicks:{"01":[],10:[],12:[],21:[],23:[],32:[],30:[],"03":[],"02":[],13:[],20:[],31:[]},additional_offsets:{z:[[1,1],[1,0],[1,0],[2,0]],l:[[1,0],[1,0],[1,0],[1,0]],o:[[0,0],[0,0],[0,0],[0,0]],s:[[1,1],[1,0],[1,0],[2,0]],i:[[0,1],[0,0],[0,0],[1,0]],j:[[1,0],[1,0],[1,0],[1,0]],t:[[1,0],[1,0],[1,0],[1,0]]},spawn_rotation:{z:0,l:2,o:0,s:0,i:0,j:2,t:2},color_overrides:{},preview_overrides:{l:[[0,0,201],[1,0,68],[2,0,124],[0,1,31]],j:[[0,0,199],[1,0,68],[2,0,114],[2,1,31]],t:[[0,0,199],[1,0,74],[2,0,124],[1,1,31]]}},ARS:{kicks:{"01":[[1,0],[-1,0]],10:[[1,0],[-1,0]],12:[[1,0],[-1,0]],21:[[1,0],[-1,0]],23:[[1,0],[-1,0]],32:[[1,0],[-1,0]],30:[[1,0],[-1,0]],"03":[[1,0],[-1,0]],"02":[[1,0],[-1,0]],13:[[1,0],[-1,0]],20:[[1,0],[-1,0]],31:[[1,0],[-1,0]]},i_kicks:{"01":[],10:[],12:[],21:[],23:[],32:[],30:[],"03":[],"02":[],13:[],20:[],31:[]},additional_offsets:{i1:[[0,0],[0,0],[0,0],[0,0]],z:[[0,1],[0,0],[0,0],[1,0]],l:[[0,1],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],s:[[0,1],[-1,0],[0,0],[0,0]],i:[[0,0],[0,0],[0,-1],[1,0]],j:[[0,1],[0,0],[0,0],[0,0]],t:[[0,1],[0,0],[0,0],[0,0]]},spawn_rotation:{z:0,l:2,o:0,s:0,i:0,j:2,t:2},color_overrides:{i1:"z",i2:"z",i3:"z",i5:"z",z:"s",s:"t",i:"z",t:"i"},preview_overrides:{l:[[0,0,201],[1,0,68],[2,0,124],[0,1,31]],j:[[0,0,199],[1,0,68],[2,0,114],[2,1,31]],t:[[0,0,199],[1,0,74],[2,0,124],[1,1,31]]},center_column:{pieces:["l","j","t"],rules:[[-1,-1],[0,-1],[1,-1],[-1,0],[0,0],[1,0],[-1,1],[0,1],[1,1]]}},ASC:{kicks:{"01":[[-1,0],[0,1],[-1,1],[0,2],[-1,2],[-2,0],[-2,1],[-2,2],[1,0],[1,1],[0,-1],[-1,-1],[-2,-1],[1,2],[2,0],[0,-2],[-1,-2],[-2,-2],[2,1],[2,2],[1,-1]],10:[[1,0],[0,1],[1,1],[0,2],[1,2],[2,0],[2,1],[2,2],[-1,0],[-1,1],[0,-1],[1,-1],[2,-1],[-1,2],[-2,0],[0,-2],[1,-2],[2,-2],[-2,1],[-2,2],[-1,-1]],12:[[-1,0],[0,1],[-1,1],[0,2],[-1,2],[-2,0],[-2,1],[-2,2],[1,0],[1,1],[0,-1],[-1,-1],[-2,-1],[1,2],[2,0],[0,-2],[-1,-2],[-2,-2],[2,1],[2,2],[1,-1]],21:[[1,0],[0,1],[1,1],[0,2],[1,2],[2,0],[2,1],[2,2],[-1,0],[-1,1],[0,-1],[1,-1],[2,-1],[-1,2],[-2,0],[0,-2],[1,-2],[2,-2],[-2,1],[-2,2],[-1,-1]],23:[[-1,0],[0,1],[-1,1],[0,2],[-1,2],[-2,0],[-2,1],[-2,2],[1,0],[1,1],[0,-1],[-1,-1],[-2,-1],[1,2],[2,0],[0,-2],[-1,-2],[-2,-2],[2,1],[2,2],[1,-1]],32:[[1,0],[0,1],[1,1],[0,2],[1,2],[2,0],[2,1],[2,2],[-1,0],[-1,1],[0,-1],[1,-1],[2,-1],[-1,2],[-2,0],[0,-2],[1,-2],[2,-2],[-2,1],[-2,2],[-1,-1]],30:[[-1,0],[0,1],[-1,1],[0,2],[-1,2],[-2,0],[-2,1],[-2,2],[1,0],[1,1],[0,-1],[-1,-1],[-2,-1],[1,2],[2,0],[0,-2],[-1,-2],[-2,-2],[2,1],[2,2],[1,-1]],"03":[[1,0],[0,1],[1,1],[0,2],[1,2],[2,0],[2,1],[2,2],[-1,0],[-1,1],[0,-1],[1,-1],[2,-1],[-1,2],[-2,0],[0,-2],[1,-2],[2,-2],[-2,1],[-2,2],[-1,-1]],"02":[],13:[],20:[],31:[]},i_kicks:{"01":[[-1,0],[0,1],[-1,1],[0,2],[-1,2],[-2,0],[-2,1],[-2,2],[1,0],[1,1],[0,-1],[-1,-1],[-2,-1],[1,2],[2,0],[0,-2],[-1,-2],[-2,-2],[2,1],[2,2],[1,-1]],10:[[1,0],[0,1],[1,1],[0,2],[1,2],[2,0],[2,1],[2,2],[-1,0],[-1,1],[0,-1],[1,-1],[2,-1],[-1,2],[-2,0],[0,-2],[1,-2],[2,-2],[-2,1],[-2,2],[-1,-1]],12:[[-1,0],[0,1],[-1,1],[0,2],[-1,2],[-2,0],[-2,1],[-2,2],[1,0],[1,1],[0,-1],[-1,-1],[-2,-1],[1,2],[2,0],[0,-2],[-1,-2],[-2,-2],[2,1],[2,2],[1,-1]],21:[[1,0],[0,1],[1,1],[0,2],[1,2],[2,0],[2,1],[2,2],[-1,0],[-1,1],[0,-1],[1,-1],[2,-1],[-1,2],[-2,0],[0,-2],[1,-2],[2,-2],[-2,1],[-2,2],[-1,-1]],23:[[-1,0],[0,1],[-1,1],[0,2],[-1,2],[-2,0],[-2,1],[-2,2],[1,0],[1,1],[0,-1],[-1,-1],[-2,-1],[1,2],[2,0],[0,-2],[-1,-2],[-2,-2],[2,1],[2,2],[1,-1]],32:[[1,0],[0,1],[1,1],[0,2],[1,2],[2,0],[2,1],[2,2],[-1,0],[-1,1],[0,-1],[1,-1],[2,-1],[-1,2],[-2,0],[0,-2],[1,-2],[2,-2],[-2,1],[-2,2],[-1,-1]],30:[[-1,0],[0,1],[-1,1],[0,2],[-1,2],[-2,0],[-2,1],[-2,2],[1,0],[1,1],[0,-1],[-1,-1],[-2,-1],[1,2],[2,0],[0,-2],[-1,-2],[-2,-2],[2,1],[2,2],[1,-1]],"03":[[1,0],[0,1],[1,1],[0,2],[1,2],[2,0],[2,1],[2,2],[-1,0],[-1,1],[0,-1],[1,-1],[2,-1],[-1,2],[-2,0],[0,-2],[1,-2],[2,-2],[-2,1],[-2,2],[-1,-1]],"02":[],13:[],20:[],31:[]},allow_o_kick:!0,additional_offsets:{i1:[[0,0],[0,0],[0,0],[0,0]],z:[[0,0],[0,0],[0,0],[0,0]],l:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,1],[-1,1],[-1,0]],s:[[0,0],[0,0],[0,0],[0,0]],i:[[0,0],[-1,0],[-1,-1],[0,-1]],j:[[0,0],[0,0],[0,0],[0,0]],t:[[0,0],[0,0],[0,0],[0,0]]},color_overrides:{},spawn_rotation:{},preview_overrides:{}},none:{kicks:{"01":[],10:[],12:[],21:[],23:[],32:[],30:[],"03":[],"02":[],13:[],20:[],31:[]},additional_offsets:{},color_overrides:{},spawn_rotation:{},preview_overrides:{}}},cornerTable:{z:[[[-2,-1],[1,-1],[2,0],[-1,0]],[[0,-1],[1,-2],[0,2],[1,1]],[[-2,0],[1,0],[2,1],[-1,1]],[[-1,-1],[0,-2],[0,1],[-1,2]]],l:[[[-1,-1],[0,-1],[1,1],[-1,1]],[[-1,-1],[1,-1],[1,0],[-1,1]],[[-1,-1],[1,-1],[1,1],[0,1]],[[-1,0],[1,-1],[1,1],[-1,1]]],s:[[[-1,-1],[2,-1],[1,0],[-2,0]],[[0,-2],[1,-1],[1,2],[0,1]],[[-1,0],[2,0],[1,1],[-2,1]],[[-1,-2],[0,-1],[-1,1],[0,2]]],j:[[[0,-1],[1,-1],[1,1],[-1,1]],[[-1,-1],[1,0],[1,1],[-1,1]],[[-1,-1],[1,-1],[0,1],[-1,1]],[[-1,-1],[1,-1],[1,1],[-1,0]]],t:[[[-1,-1,3,0],[1,-1,0,1],[1,1,1,2],[-1,1,2,3]],[[-1,-1,3,0],[1,-1,0,1],[1,1,1,2],[-1,1,2,3]],[[-1,-1,3,0],[1,-1,0,1],[1,1,1,2],[-1,1,2,3]],[[-1,-1,3,0],[1,-1,0,1],[1,1,1,2],[-1,1,2,3]]]},scoring:{SINGLE:100,DOUBLE:300,TRIPLE:500,QUAD:800,PENTA:1200,TSPIN_MINI:100,TSPIN:400,TSPIN_MINI_SINGLE:200,TSPIN_SINGLE:800,TSPIN_MINI_DOUBLE:400,TSPIN_DOUBLE:1200,TSPIN_MINI_TRIPLE:800,TSPIN_TRIPLE:1600,TSPIN_MINI_QUAD:1600,TSPIN_QUAD:2600,TSPIN_PENTA:3200,BACKTOBACK_MULTIPLIER:1.5,COMBO:50,ALL_CLEAR:3500,SOFTDROP:1,HARDDROP:2},garbage:{SINGLE:0,DOUBLE:1,TRIPLE:2,QUAD:4,PENTA:5,TSPIN_MINI:0,TSPIN:0,TSPIN_MINI_SINGLE:0,TSPIN_SINGLE:2,TSPIN_MINI_DOUBLE:1,TSPIN_DOUBLE:4,TSPIN_MINI_TRIPLE:2,TSPIN_TRIPLE:6,TSPIN_MINI_QUAD:4,TSPIN_QUAD:10,TSPIN_PENTA:12,BACKTOBACK_BONUS:1,BACKTOBACK_BONUS_LOG:.8,COMBO_MINIFIER:1,COMBO_MINIFIER_LOG:1.25,COMBO_BONUS:.25,ALL_CLEAR:10,combotable:{none:[0],"classic guideline":[0,1,1,2,2,3,3,4,4,4,5],"modern guideline":[0,1,1,2,2,2,3,3,3,3,3,3,4]}},finesse:{z:{0:[9,9,1,2,1,0,1,2,2,1,9],1:[9,2,2,2,1,1,2,3,2,2,9],2:[9,9,1,2,1,0,1,2,2,1,9],3:[9,9,2,2,2,1,1,2,3,2,2]},l:{0:[9,9,1,2,1,0,1,2,2,1,9],1:[9,2,2,3,2,1,2,3,3,2,9],2:[9,9,3,4,3,2,3,4,4,3,9],3:[9,9,2,3,2,1,2,3,3,2,2]},o:{0:[9,1,2,2,1,0,1,2,2,1,9],1:[9,1,2,2,1,0,1,2,2,1,9],2:[9,1,2,2,1,0,1,2,2,1,9],3:[9,1,2,2,1,0,1,2,2,1,9]},s:{0:[9,9,1,2,1,0,1,2,2,1,9],1:[9,2,2,2,1,1,2,3,2,2,9],2:[9,9,1,2,1,0,1,2,2,1,9],3:[9,9,2,2,2,1,1,2,3,2,2]},i:{0:[9,9,1,2,1,0,1,2,1,9,9],1:[2,2,2,2,1,1,2,2,2,2,9],2:[9,9,1,2,1,0,1,2,1,9,9],3:[9,2,2,2,2,1,1,2,2,2,2]},j:{0:[9,9,1,2,1,0,1,2,2,1,9],1:[9,2,2,3,2,1,2,3,3,2,9],2:[9,9,3,4,3,2,3,4,4,3,9],3:[9,9,2,3,2,1,2,3,3,2,2]},t:{0:[9,9,1,2,1,0,1,2,2,1,9],1:[9,2,2,3,2,1,2,3,3,2,9],2:[9,9,3,4,3,2,3,4,4,3,9],3:[9,9,2,3,2,1,2,3,3,2,2]}},zenithRevivePrompts:[["F","combo",3,"Perform a 3-Combo",2,[]],["F","double",2,"Clear 2 Doubles",2,[]],["F","quad",1,"Clear a Quad",1,[]],["F","lines",6,"Clear 6 Lines",1,[]],["F","osingle",1,"Clear a Single\nusing an O-Piece",3,[]],["F","odouble",1,"Clear a Double\nusing an O-Piece",3,[]],["F","szdouble",1,"Clear a Double\nusing an S or Z-Piece",3,[]],["F","ljtriple",1,"Clear a Triple\nusing an L or J-Piece",3,[]],["F","iholdlines",3,"Clear 3 lines\nwhile holding an I-Piece",3,["nohold"]],["F","hold",8,"Use Hold 8 times",2,["nohold"]],["F","rotate",20,"Rotate 20 times",2,[]],["F","singleconsecutive",2,"Clear 2 Singles in a row",3,[]],["E","spin",1,"Perform any Spin",2,[]],["E","tspinsingle",1,"Clear a T-Spin Single",2,[]],["E","tspindouble",1,"Clear a T-Spin Double",2,[]],["E","szspin",1,"Clear an S/Z-Spin",1,[]],["E","ljspin",1,"Clear an L/J-Spin",1,[]],["E","combo",5,"Perform a 5-Combo",2,[]],["E","iflat",2,"Clear 2 Lines using\nhorizontal I-Pieces",3,[]],["E","pieces",20,"Place 20 pieces",2,[]],["E","attack",6,"Send 6 Attack",1,[]],["E","placeoconsecutive",2,"Place 2 O-Pieces\nin a row",3,["nohold"]],["E","norotateclockwise",12,"Place 12 pieces while only\nrotating counterclockwise",4,[]],["E","singlenocombo",6,"Clear 6 Singles without\nstarting a combo",3,[]],["D","double",4,"Clear 4 Doubles",2,[]],["D","spam",3,"Place 3 pieces in a row\nwithout moving or rotating",4,[]],["D","noclear",14,"Place 14 pieces in a row\nwithout clearing any lines",4,[]],["D","szdouble",2,"Clear 2 Doubles\nusing S or Z-Pieces",3,[]],["D","ljtriple",2,"Clear 2 Triples\nusing L or J-Pieces",3,[]],["D","ispinclear",1,"Clear an I-Spin",1,[]],["D","upperhalfquad",1,"Clear a Quad in the\nupper half of the board",4,[]],["D","rotate",80,"Rotate 80 times",2,[]],["D","quadcombo",1,"Clear a Quad\nwhile on a 2+-Combo",4,[]],["D","szsingle",2,"Clear 2 Singles in a row\nusing S or Z-Pieces",4,[]],["D","combonohold",3,"Perform a 3-Combo\nwithout using Hold",3,[]],["D","noclearspin",3,"Perform 3 Spins\nthat don't clear any lines",4,[]],["D","szljspin",2,"Perform 2\nS/Z/L/J-Spins",3,[]],["C","tspintriple",1,"Clear a T-Spin Triple",2,[]],["C","nohold",25,"Place 25 pieces in a row\nwithout using Hold",4,["nohold"]],["C","triple",3,"Clear 3 Triples",2,[]],["C","b2b",4,"Reach B2B x4",1,[]],["C","quadbuckets",2,"Clear a Quad in\n2 different columns",3,[]],["C","holdconsecutive",12,"Use Hold on\n12 pieces in a row",3,["nohold"]],["C","softdrop",10,"Place 10 pieces without\nreleasing Soft Drop",4,[]],["C","top3rows",3,"Have part of your stack in\nthe top 3 rows for 3 seconds",4,[]],["C","linesnoti",10,"Clear 10 Lines without\nclearing with T or I-pieces",4,[]],["C","szspintriple",1,"Clear an S/Z-Spin Triple",2,[]],["C","odoubleconsecutive",2,"Clear 2 Doubles consecutively\nusing two O-Pieces",4,["nohold"]],["C","tspinminiclear",4,"Clear 4 T-Spin Minis",2,[]],["C","attack",14,"Send 14 Attack",1,[]],["C","doublespiece",3,"Clear 3 Doubles\nwith the same type of piece",4,[]],["C","ljgarbage",1,"Clear Garbage\nusing a L/J-Spin",3,[]],["C","szgarbage",1,"Clear Garbage\nusing a S/Z-Spin",3,[]],["C","columnopiece",3,"Place 3 O-Pieces\nin column 1",3,[]],["C","spinclear",2,"Clear 2 Spins\nin one combo",3,[]],["C","iclearspam",1,"Clear a Single with an I-Piece\nwithout moving or rotating",4,[]],["C","holddas",6,"Place 6 Pieces\nwithout releasing DAS",3,[]],["B","oclear",6,"Clear 6 Lines\nusing O-Pieces",3,[]],["B","spinbuckets",3,"Clear Spin-Clears\nwith 3 different pieces",3,[]],["B","quad",4,"Clear 4 Quads",1,[]],["B","spam",5,"Place 5 pieces in a row\nwithout moving or rotating",4,[]],["B","ljspintriple",1,"Clear an L/J-Spin Triple",2,[]],["B","quadconsecutive",2,"Clear 2 Quads in a row",2,[]],["B","singlesonly",8,"Clear 8 Singles without doing\nother clears or using Hold",4,[]],["B","nogarbage",4,"Have no Garbage Lines on\nyour board for 4 seconds",4,[]],["B","rotate",300,"Rotate 300 times",2,[]],["B","nocancel",8,"Don't cancel any\ngarbage for 8 seconds",3,[]],["B","tspindoubleup",1,"Clear a T-Spin Double\nwith the Piece pointing up",4,[]],["B","oclearspam",1,"Clear a Double with an O-Piece\nwithout moving or rotating",4,[]],["B","tnorotate",3,"Place 3 T-Pieces\nwithout rotating any",3,[]],["B","tspincombo",1,"Clear a T-Spin Double\nwhile on a 2+-Combo",3,[]],["A","combo",7,"Perform a 7-Combo",2,[]],["A","ispindouble",1,"Clear an I-Spin Double",2,[]],["A","szspinconsecutive",2,"Clear two S/Z-Spin\nDoubles consecutively",3,[]],["A","ljspinconsecutive",2,"Clear two L/J-Spin\nDoubles consecutively",3,[]],["A","colorclear",1,"Perform a Color Clear",2,[]],["A","lines",40,"Clear 40 Lines",1,[]],["A","combospin",4,"Clear 4 Spins\nin one Combo",3,[]],["A","tspindtcolumn",1,"Clear a T-Spin Double/Triple\ncentered in column 1 or 10",3,[]]],zenithReviveDecks:[{F:0,E:0,D:0,C:0,B:0,A:0},{F:1,E:0,D:0,C:0,B:0,A:0},{F:2,E:0,D:0,C:0,B:0,A:0},{F:3,E:0,D:0,C:0,B:0,A:0},{F:2,E:1,D:0,C:0,B:0,A:0},{F:1,E:2,D:0,C:0,B:0,A:0},{F:0,E:3,D:0,C:0,B:0,A:0},{F:0,E:2,D:1,C:0,B:0,A:0},{F:0,E:1,D:2,C:0,B:0,A:0},{F:0,E:0,D:3,C:0,B:0,A:0},{F:0,E:0,D:2,C:1,B:0,A:0},{F:0,E:0,D:1,C:2,B:0,A:0},{F:0,E:0,D:0,C:3,B:0,A:0},{F:0,E:0,D:0,C:2,B:1,A:0},{F:0,E:0,D:0,C:1,B:2,A:0},{F:0,E:0,D:0,C:0,B:3,A:0},{F:0,E:0,D:0,C:0,B:2,A:1},{F:0,E:0,D:0,C:0,B:1,A:2,order:["A","B","A"]}],zenithFatigue:[[28080,[["dim",.7]]],[28200,[["dim",.9]]],[28320,[["dim",.5]]],[28440,[["dim",.8]]],[28560,[["dim",.3]]],[28680,[["dim",.1]]],[28800,[["color",16518572],["unclearable"],["shake",5],["waterfall",{msg:'FATIGUE SETS IN<br><span style="font-size: 0.8em;">+2 PERMANENT LINES</span>',fgcolor:"#FFFFFF",bgcolor:"#801346",timeout:5e3}]]],[28830,[["unclearable"],["shake",5]]],[28860,[["dim",1]]],[31680,[["dim",.7]]],[31800,[["dim",.9]]],[31920,[["dim",.5]]],[32040,[["dim",.8]]],[32160,[["dim",.3]]],[32280,[["dim",.1]]],[32400,[["color",16518572],["receivemultiplier",.25],["waterfall",{msg:'YOUR BODY GROWS WEAK<br><span style="font-size: 0.8em;">receive 25% more garbage</span>',fgcolor:"#FFFFFF",bgcolor:"#801346",timeout:5e3}]]],[32460,[["dim",1]]],[35280,[["dim",.7]]],[35400,[["dim",.9]]],[35520,[["dim",.5]]],[35640,[["dim",.8]]],[35760,[["dim",.3]]],[35880,[["dim",.1]]],[36e3,[["color",16518572],["unclearable"],["shake",5],["waterfall",{msg:'ALL SENSES BLUR TOGETHER<br><span style="font-size: 0.8em;">+3 PERMANENT LINES</span>',fgcolor:"#FFFFFF",bgcolor:"#801346",timeout:5e3}]]],[36030,[["unclearable"],["shake",5]]],[36060,[["unclearable"],["shake",5]]],[36120,[["dim",1]]],[38880,[["dim",.7]]],[39e3,[["dim",.9]]],[39120,[["dim",.5]]],[39240,[["dim",.8]]],[39360,[["dim",.3]]],[39480,[["dim",.1]]],[39600,[["color",16518572],["receivemultiplier",.25],["waterfall",{msg:'YOUR CONSCIOUSNESS FADES<br><span style="font-size: 0.8em;">receive 25% more garbage</span>',fgcolor:"#FFFFFF",bgcolor:"#801346",timeout:5e3}]]],[39660,[["dim",1]]],[42480,[["dim",[.7,.65,.65]]]],[42600,[["dim",.9]]],[42720,[["dim",[.5,.45,.45]]]],[42840,[["dim",.8]]],[42960,[["dim",[.3,.25,.25]]]],[43080,[["dim",[.1,.05,.05]]]],[43200,[["color",16711705],["unclearable"],["shake",5],["waterfall",{msg:'THIS IS THE END.<br><span style="font-size: 0.8em;">+5 PERMANENT LINES</span>',fgcolor:"#FFFFFF",bgcolor:"#870815",timeout:1e4}]]],[43230,[["unclearable"],["shake",5]]],[43260,[["unclearable"],["shake",5]]],[43310,[["unclearable"],["shake",5]]],[43360,[["unclearable"],["shake",5]]],[43500,[["dim",1]]]],zenithFatigueRevEx:[[20880,[["dim",[.7,.6,.6]]]],[21e3,[["dim",.9]]],[21120,[["dim",[.5,.4,.4]]]],[21240,[["dim",.8]]],[21360,[["dim",[.3,.2,.2]]]],[21480,[["dim",[.2,0,0]]]],[21600,[["color",16518753],["gracestillmessy"],["waterfall",{msg:'YOUR POWER SLIPS<br><span style="font-size: 0.8em;">garbage received becomes messier</span>',fgcolor:"#ff006f",bgcolor:"#420a25",timeout:5e3}]]],[21660,[["dim",1]]],[24480,[["dim",[.7,.6,.6]]]],[24600,[["dim",.9]]],[24720,[["dim",[.5,.4,.4]]]],[24840,[["dim",.8]]],[24960,[["dim",[.3,.2,.2]]]],[25080,[["dim",[.2,0,0]]]],[25200,[["color",16518753],["receivemultiplier",.25],["waterfall",{msg:'WHISPERS OF DISCONTENT SPREAD<br><span style="font-size: 0.8em;">receive 25% more garbage</span>',fgcolor:"#ff006f",bgcolor:"#420a25",timeout:5e3}]]],[25260,[["dim",1]]],[28080,[["dim",[.7,.6,.6]]]],[28200,[["dim",.9]]],[28320,[["dim",[.5,.4,.4]]]],[28440,[["dim",.8]]],[28560,[["dim",[.3,.2,.2]]]],[28680,[["dim",[.2,0,0]]]],[28800,[["color",16518753],["unclearable"],["shake",5],["waterfall",{msg:'PROTESTERS LINE THE STREETS<br><span style="font-size: 0.8em;">+3 PERMANENT LINES</span>',fgcolor:"#ff006f",bgcolor:"#420a25",timeout:5e3}]]],[28830,[["unclearable"],["shake",5]]],[28860,[["unclearable"],["shake",5]]],[28920,[["dim",1]]],[31680,[["dim",[.7,.6,.6]]]],[31800,[["dim",.9]]],[31920,[["dim",[.5,.4,.4]]]],[32040,[["dim",.8]]],[32160,[["dim",[.3,.2,.2]]]],[32280,[["dim",[.2,0,0]]]],[32400,[["color",16518753],["receivemultiplier",.25],["waterfall",{msg:'YOUR CLOSEST ALLIES DEFECT<br><span style="font-size: 0.8em;">receive 25% more garbage</span>',fgcolor:"#ff006f",bgcolor:"#420a25",timeout:5e3}]]],[32460,[["dim",1]]],[35280,[["dim",[.7,.6,.6]]]],[35400,[["dim",.9]]],[35520,[["dim",[.5,.4,.4]]]],[35640,[["dim",.8]]],[35760,[["dim",[.3,.2,.2]]]],[35880,[["dim",[.2,0,0]]]],[36e3,[["color",16518753],["unclearable"],["shake",5],["waterfall",{msg:'PARANOIA CLOUDS YOUR JUDGEMENT<br><span style="font-size: 0.8em;">+5 PERMANENT LINES</span>',fgcolor:"#ff006f",bgcolor:"#420a25",timeout:5e3}]]],[36030,[["unclearable"],["shake",5]]],[36060,[["unclearable"],["shake",5]]],[36110,[["unclearable"],["shake",5]]],[36160,[["unclearable"],["shake",5]]],[36300,[["dim",1]]],[38880,[["dim",[.7,.6,.6]]]],[39e3,[["dim",.9]]],[39120,[["dim",[.5,.4,.4]]]],[39240,[["dim",.8]]],[39360,[["dim",[.3,.2,.2]]]],[39480,[["dim",[.2,0,0]]]],[39600,[["color",16518753],["maxmessy"],["waterfall",{msg:'THE REVOLUTION HAS BEGUN<br><span style="font-size: 0.8em;">garbage received becomes much messier</span>',fgcolor:"#ff006f",bgcolor:"#420a25",timeout:5e3}]]],[39660,[["dim",1]]],[42e3,[["dim",[.7,.6,.6]]]],[42120,[["dim",.9]]],[42240,[["dim",[.7,.4,.4]]]],[42360,[["dim",.9]]],[42480,[["dim",[.5,.4,.4]]]],[42600,[["dim",.8]]],[42720,[["dim",[.5,.2,.2]]]],[42840,[["dim",.8]]],[42960,[["dim",[.3,.1,.1]]]],[43080,[["dim",[.2,0,0]]]],[43140,[["dim",[0,0,0]]]],[43200,[["color",16711680],["unclearable"],["shake",10],["waterfall",{msg:'THE END OF AN ERA.<br><span style="font-size: 0.8em;">+12 PERMANENT LINES</span>',fgcolor:"#ff2600",bgcolor:"#000000",timeout:15e3}]]],[43230,[["unclearable"],["shake",10]]],[43260,[["unclearable"],["shake",10]]],[43310,[["unclearable"],["shake",10]]],[43360,[["unclearable"],["shake",10]]],[43420,[["unclearable"],["shake",10]]],[43480,[["unclearable"],["shake",10]]],[43550,[["unclearable"],["shake",10]]],[43620,[["unclearable"],["shake",10]]],[43700,[["unclearable"],["shake",10]]],[43780,[["unclearable"],["shake",10]]],[43850,[["unclearable"],["shake",10]]],[43920,[["dim",1]]]],majorShoutStyles:{globalbest:()=>{xl.play("confetti",{gui:!0,count:30})},personalbest:()=>{xl.play("confetti",{gui:!0,count:15,hue:[30,60]})},lg_victory:()=>{setTimeout((()=>{xl.play("confetti",{gui:!1,count:15,hue:[30,60]})}),1250)}},globalShoutStyles:{},gameModes:{"40l":{version:y,gameid:"X-PASSTHRU",seed_random:!1,anchorseed:!0,seed:"X-PASSTHRU",allow180:!0,spinbonuses:"all-mini+",g:.02,objective_type:"lines",objective_count:40,handling:"X-PASSTHRU",countdown:"X-PASSTHRU",countdown_interval:"X-PASSTHRU",precountdown:"X-PASSTHRU",prestart:"X-PASSTHRU",mission:"X-PASSTHRU",zoominto:"X-PASSTHRU",bgmnoreset:"X-PASSTHRU",slot_counter1:"X-PASSTHRU",slot_counter2:"X-PASSTHRU",slot_counter3:"X-PASSTHRU",slot_counter4:"X-PASSTHRU",slot_counter5:"X-PASSTHRU",slot_bar2:"progress",can_retry:!0,nolockout:!0,pro:"X-PASSTHRU",pro_alert:"X-PASSTHRU",pro_retry:"X-PASSTHRU",stride:"X-PASSTHRU",no_szo:"X-PASSTHRU",fromretry:"X-PASSTHRU"},blitz:{version:y,gameid:"X-PASSTHRU",seed_random:!1,anchorseed:!0,seed:"X-PASSTHRU",allow180:!0,objective_type:"timed",objective_time:12e4,levels:!0,levelspeed:.42,levelgbase:.65,gravitymay20g:!1,handling:"X-PASSTHRU",countdown:"X-PASSTHRU",countdown_interval:"X-PASSTHRU",precountdown:"X-PASSTHRU",prestart:"X-PASSTHRU",mission:"X-PASSTHRU",zoominto:"X-PASSTHRU",bgmnoreset:"X-PASSTHRU",slot_counter1:"X-PASSTHRU",slot_counter2:"X-PASSTHRU",slot_counter3:"X-PASSTHRU",slot_counter4:"X-PASSTHRU",slot_counter5:"X-PASSTHRU",slot_bar2:"progress",can_retry:!0,nolockout:!0,pro:"X-PASSTHRU",pro_alert:"X-PASSTHRU",pro_retry:"X-PASSTHRU",stride:"X-PASSTHRU",no_szo:"X-PASSTHRU",fromretry:"X-PASSTHRU"}},Strings:{cleartypes:["VOID","SINGLE","DOUBLE","TRIPLE","QUAD","PENTA","HEXA","HEPTA","OCTA","ENNEA","DECA","HENDECA","DODECA","TRIADECA","TESSARADECA","PENTEDECA","HEXADECA","HEPTADECA","OCTADECA","ENNEADECA","EICOSA","KAGARIS"],tspins:{mini:"\fc3MINI\f5 %%PIECE%%-spin",normal:"%%PIECE%%-spin"},extra:{btb:"back-to-back",btb_short:"BACK-TO-BACK",clear:"ALL\nCLEAR",colorclear:"COLOR\nCLEAR",zenlevel:"LEVEL\nCOMPLETE"},longTypeNames:{"40l":"40 LINES",blitz:"BLITZ","5mblast":"5,000,000 BLAST",zen:"ZEN",custom:"CUSTOM GAME",league:"TETRA LEAGUE",zenith:"QUICK PLAY",zenithex:"EXPERT QUICK PLAY"},gameMissions:{"40l":"CLEAR 40 LINES!",blitz:"TWO-MINUTE BLITZ","5mblast":"5,000,000 BLAST!",zen:"ZEN","40 LINES":"CLEAR 40 LINES!",BLITZ:"TWO-MINUTE BLITZ","5,000,000 BLAST":"5,000,000 BLAST!",ZEN:"ZEN"},zenithMods:{invisible:"Invisible",messy:"Messier Garbage",volatile:"Volatile Garbage",nohold:"No Hold",doublehole:"Double Hole Garbage",allspin:"All-Spin",gravity:"Gravity",expert:"Expert Mode",duo:"Duo",snowman:"Snowball Board",snowman_reversed:"Permafrost Board",invisible_reversed:"The Exile",messy_reversed:"Loaded Dice",volatile_reversed:"Last Stand",nohold_reversed:"Asceticism",doublehole_reversed:"Damnation",allspin_reversed:"The Warlock",gravity_reversed:"Freefall",expert_reversed:"The Tyrant"},zenithModsShort:{invisible:"IN",messy:"MS",volatile:"VL",nohold:"NH",doublehole:"DH",allspin:"AS",gravity:"GV",expert:"EX",duo:"2P",snowman:"SNOWBALL",snowman_reversed:"SNOWBALL-R",invisible_reversed:"IN-R",messy_reversed:"MS-R",volatile_reversed:"VL-R",nohold_reversed:"NH-R",doublehole_reversed:"DH-R",allspin_reversed:"AS-R",gravity_reversed:"GV-R",expert_reversed:"EX-R"}},allowedReverseCards:["expert","nohold","messy","gravity","volatile","doublehole","invisible","allspin"]};class B{static SLOWEST_PROVISION_SPEED=0;static FASTEST_PROVISION_SPEED=1;static JUMP_PROVISION_SPEED=2;static PROVISION_SPEED_LOOKUP={zero:{[B.SLOWEST_PROVISION_SPEED]:15,[B.FASTEST_PROVISION_SPEED]:2,[B.JUMP_PROVISION_SPEED]:4},low:{[B.SLOWEST_PROVISION_SPEED]:15,[B.FASTEST_PROVISION_SPEED]:6,[B.JUMP_PROVISION_SPEED]:8},medium:{[B.SLOWEST_PROVISION_SPEED]:50,[B.FASTEST_PROVISION_SPEED]:6,[B.JUMP_PROVISION_SPEED]:15},high:{[B.SLOWEST_PROVISION_SPEED]:50,[B.FASTEST_PROVISION_SPEED]:15,[B.JUMP_PROVISION_SPEED]:30},xhigh:{[B.SLOWEST_PROVISION_SPEED]:50,[B.FASTEST_PROVISION_SPEED]:50,[B.JUMP_PROVISION_SPEED]:50}};static StripBloat(e){const t=[];for(const n of e.events)"full"!==n.type&&("start"===n.type?n.data={}:"end"===n.type&&(n.data={reason:n.data.gameoverreason}),t.push(n));return e.events=t,e}static FormatOptions(e,t,n=t.username){if(t=qt(t),"multi"===e)t.display_replay=!0,t.countdown=!0,t.countdown_count=0,t.precountdown=700,t.prestart=50,t.mission="",t.zoominto="slow";else t.countdown=!0,t.countdown_count=0,t.precountdown=700,t.prestart=50,t.stride=!1,t.mission="",t.zoominto="slow",t.song="shiroi-hyoutan",t.username=n??"",t.display_replay=!0,t.display_username=!0,void 0!==ot&&(t.pro=!!ot.gameoptions[`pro_${e}`],t.pro_alert=!!ot.gameoptions[`pro_${e}_alert`],t.pro_retry=!!ot.gameoptions[`pro_${e}_retry`],t.slot_counter1=ot.gameoptions[`slot_${e}_counter1`]||t.slot_counter1||"",t.slot_counter2=ot.gameoptions[`slot_${e}_counter2`]||t.slot_counter2||"",t.slot_counter3=ot.gameoptions[`slot_${e}_counter3`]||t.slot_counter3||"",t.slot_counter4=ot.gameoptions[`slot_${e}_counter4`]||t.slot_counter4||"",t.slot_counter5=ot.gameoptions[`slot_${e}_counter5`]||t.slot_counter5||"");return t}constructor({frames:e=0,events:t=[],options:n=null,results:s={}}={}){this.frame=e,this.events=t,this.options=n,this.results=s,this.eventsBuffer=[],this._eventsFrame=new Map,this._rollingTarget=null,this._flushNextFrame=!1,this._endEvent=null,this._fullEvents=new Map,this.provisioned=0,this.provisionSpeed=B.JUMP_PROVISION_SPEED,this.latencyMode="medium",this._RebuildIndex()}get _SlowestSpeed(){return B.PROVISION_SPEED_LOOKUP[this.latencyMode][B.SLOWEST_PROVISION_SPEED]}get _FastestSpeed(){return B.PROVISION_SPEED_LOOKUP[this.latencyMode][B.FASTEST_PROVISION_SPEED]}get _JumpSpeed(){return B.PROVISION_SPEED_LOOKUP[this.latencyMode][B.JUMP_PROVISION_SPEED]}_RebuildIndex(){this._eventsFrame.clear();for(const e of this.events){const t=e.frame;"end"===e.type?this._endEvent=e:"full"===e.type&&this._fullEvents.set(t,e),this._eventsFrame.has(t)?this._eventsFrame.get(t).push(e):this._eventsFrame.set(t,[e])}}AdvanceFrame(){this.provisioned++,(!jt()&&this.provisioned>=this.provisionSpeed||this._flushNextFrame)&&this.Flush(),this.frame++}GetEventCount(){return this.events.length}GetEndEvent(){return this._endEvent}GetFullEvents(){return this._fullEvents}GetEndEventFrame(){return this._endEvent?.frame??null}GetEventsAtFrame(e){return this._eventsFrame.has(e)?this._eventsFrame.get(e):[]}PushEvent(e,t){const n={frame:this.frame,type:e,data:qt(t)};"full"===e||jt()||(this.provisionSpeed=Math.max(this._SlowestSpeed,Math.min(this._JumpSpeed,this.provisionSpeed-.25))),"full"===e?this._fullEvents.set(n.frame,n):"end"===e&&(this.results.aggregatestats=t.aggregatestats,this.results.stats=t.stats,this.results.gameoverreason=t.gameoverreason,this._endEvent=n),this.events.push(n),this._rollingTarget&&(this.eventsBuffer.push(n),"end"===e&&this.Flush()),this._eventsFrame.has(this.frame)?this._eventsFrame.get(this.frame).push(n):this._eventsFrame.set(this.frame,[n])}SetOptions(e){this.options=qt(e),this.options.seed_random=!1}SetLatencyMode(e){this.latencyMode=e,this.provisionSpeed=this._JumpSpeed}BindRollingTarget(e){this._rollingTarget=e}Seek(e){this.frame=e}Flush(e=!1){if(!this._rollingTarget)return;this.provisioned=0,e||(this.provisionSpeed=Math.min(this._SlowestSpeed,this.provisionSpeed+1));const{options:{gameid:t},frame:n}=this,s=qt(this.eventsBuffer);"function"==typeof this._rollingTarget?this._rollingTarget({gameid:t,frames:s,provisioned:n}):this._rollingTarget.send("game.replay",new De(t,n,s)),this.eventsBuffer.length=0,this._flushNextFrame=!1}FlushNextFrame(){this._flushNextFrame=!0}Preprocess(e="unknown",t){const n=new v("replay",{replay:this}),s=B.FormatOptions(e,this.options,t),i={gamemode:e,options:s,frames:0,piece:[],localPPS:[],localSPP:[],vs:[],finesseFault:[],choke:[],states:[],climbSpeed:[],chapter:[]},o=[],a=[],r=[];let l=0,c=0,p=1;e="zenithex"===e?"zenith":e,n.on("frame",(t=>{const s=n.state;if(t%30==0&&i.vs.push([t,(s.stats.garbage.attack+s.stats.garbage.cleared)/Math.max(1,s.stats.piecesplaced)*(s.stats.piecesplaced/Math.max(1,t/60))*100]),"zenith"===e){t%60==0&&i.climbSpeed.push([t,s.stats.zenith.rank]),0===i.chapter.length&&i.chapter.push([0,"1","FLOOR 1"]);const e=s.stats.zenith.floor||1;s.stats.zenith.floor!==p&&(i.chapter.push([t,`${e}`,`FLOOR ${e}`]),p=e)}})),n.on("piece",(()=>{const e=n.state,t=n.getFrame();!i.piece.includes(t)&&i.piece.push(t),o.push(t),o.length>10&&o.shift();i.localPPS.push([t,t?600/(t-o[0]):0]);const s=e.stats.score-c;c=e.stats.score,a.push(s/e.stats.level),a.length>30&&a.shift();const p=a.reduce(((e,t)=>e+t),0);if(i.localSPP.push([t,p/a.length]),e.stats.finesse.faults!==l&&(l=e.stats.finesse.faults,i.finesseFault.push(t)),r.length>11){const e=i.piece[i.piece.length-2],n=(r[r.length-1]-r[r.length-10])/10,s=t-e;if(s>3*n)return void i.choke.push([e+n,s+n])}r.includes(t)||r.push(t)})),n.setGame(s),n.setHeadless(!0),n.startGame();const h=this.GetEndEventFrame();for(let e=0;n.isPlaying()&&e<=h;e++)if(n.doFrame(),e%300==0){const e=n.ejectState();e.started=!0,i.states.push(e)}if(i.frames=h,i.localPPS.length>7)for(let e=0;e<7;e++)i.localPPS[e][1]=i.localPPS[7][1];return i}Import(e){this.frame=e.frames,this.events=e.events,this.options=e.options,this.results=e.results,this._RebuildIndex()}Export(){return{frames:this.frame,events:this.events,options:this.options,results:this.results}}}class L{static _VERSION_FORMAT=1;static get VERSION_FORMAT(){return this._VERSION_FORMAT}static _Upgrade(e={}){if(e.version>=y)return e;const t={infinitemovement:"infinite_movement",infinitestock:"infinite_stock",gbase:"levelgbase",gspeed:"levelgspeed",latencypreference:"latencymode",x_resulttype:"objective_result"};for(const[n,s]of Object.entries(t))n in e&&(e[s]=e[n],delete e[n]);e=this._UpgradeDisplayData(e);const n={gameid:"integer",garbagephase:"integer",garbageattackcap:"integer",garbageabsolutecap:"integer",mission:"string",slot_counter1:"string",slot_counter2:"string",slot_counter3:"string",slot_counter4:"string",slot_counter5:"string",slot_bar1:"string",slot_bar2:"string",username:"string",zoominto:"undefined",spinbonuses:"default",physical:"delete",presets:"delete",constants_overrides:"delete"};for(const[t,s]of Object.entries(n))if(t in e)switch(s){case"integer":e[t]=0|e[t];break;case"string":e[t]=e[t]??"";break;case"undefined":if(e[t])continue;delete e[t];break;case"delete":delete e[t]}else"default"===s&&(e[t]=ge.OptionsList.spinbonuses.default);return"objective"in e&&(e.objective_type=e.objective.type||"none",e.objective_count=e.objective.count||0,e.objective_time=e.objective.time||0,delete e.objective),"ghostskin"in e&&("minoskin"in e?e.minoskin.ghost=e.ghostskin:e.minoskin={...ge.OptionsList.minoskin.default,ghost:e.ghostskin},delete e.ghostskin),e}static _UpgradeDisplayData(e){const t={display_score:{slot:"slot_counter5",counter:"score"},display_stopwatch:{slot:"slot_counter1",counter:"stopwatch"},display_timer:{slot:"slot_counter1",counter:"timer"},display_lines:{slot:"slot_counter2",counter:"lines"},display_level:{slot:"slot_counter3",counter:"level"},display_pieces:{slot:"slot_counter3",counter:"pieces"},display_keys:{slot:"slot_counter4",counter:"keys"},display_finesse:{slot:"slot_counter5",counter:"finesse"},display_finesse_l:{slot:"slot_counter4",counter:"finesse_l"},display_attack:{slot:"slot_counter2",counter:"attack"},display_vs:{slot:"slot_counter5",counter:"vs"},display_placement:{slot:"slot_counter5",counter:"placement"},display_kills:{slot:"slot_counter1",counter:"kills"}},n={};for(const[s,{slot:i,counter:o}]of Object.entries(t))e[s]&&(n[i]=o,delete e[s]);for(const[t,s]of Object.entries(n))e[t]||(e[t]=s);return e.display_impending&&(e.slot_bar1="impending",delete e.display_impending),e.display_progress&&(e.slot_bar2="progress",delete e.display_progress),e}static Update(e){for(;e.version!==this.VERSION_FORMAT;)switch(e.version){case null:case void 0:{const t={};t.id=e.shortid,t.ts=e.ts,t.gamemode=e.ismulti?"league":e.endcontext.gametype??e.gametype,t.replay=e.data??e.replay,t.version=0,t.users=e.ismulti?[{id:e.endcontext[0]._id,username:e.endcontext[0].username,avatar_revision:0,banner_revision:0,flags:0,country:null},{id:e.endcontext[1]._id,username:e.endcontext[1].username,avatar_revision:0,banner_revision:0,flags:0,country:null}]:[{id:e.user._id,username:e.user.username,avatar_revision:0,banner_revision:0,flags:0,country:null}],e=t;break}case 0:{const t=e.replay;if(e.version=1,"league"===e.gamemode)throw new Error("Updating multiplayer files is currently not supported!");e.replay={frames:t.frames,events:[],results:{}};for(const n of t.events)"full"!==n.type||e.replay.options?("end"===n.type&&(e.replay.results.aggregatestats=n.data.export.aggregatestats,e.replay.results.stats=n.data.export.stats,e.replay.results.gameoverreason=n.data.export.gameoverreason,n.data={reason:n.data.export.gameoverreason}),e.replay.events.push(n)):e.replay.options=qt(n.data.options)}}if(!jt()&&"league"!==e.gamemode){e.replay.options=this._Upgrade(e.replay.options);if(e.replay.options.version<19){const t=qt(e.replay.options),n=new B(e.replay),s=new v("replay",{replay:n});t.noreplay=!1,t.seed_random=!1,s.setGame(t),s.setHeadless(!0),s.startGame(),s.doAllFrames(),e.replay=B.StripBloat(s.replay.Export())}}return e}constructor(e={}){if(!new.target)throw new SyntaxError("ReplayFile must be called with new");this.id=e.id??e.shortid??null,this.gamemode=e.gamemode??null,this.ts=e.ts??new Date,this.users=e.users??[{}],this.replay=e.replay??null,this.version=e.version??L.VERSION_FORMAT}}class S extends k{_actorId=0;_visualActors=new Map;CreateActor(e,t,n,s,i={}){const o="a"+ ++this._actorId;if(this.S.actors[o]={id:o,type:e,x:t,y:Math.ceil(n),anchor:s,data:i},"voidhole"===e)this.S.actors[o].data.nom=0;return this.self.c.IsServer()||this.self.hm.IsTinyMode()||!this.self.hm.H.board||(this._visualActors.has(o)&&this._visualActors.get(o).delete(),this._visualActors.set(o,this.self.hm.H.board.af(e).create({},this.S.actors[o],!0))),o}GetNewActorPos({x:e,y:t}){const n=e>0?-1:0,s=e<this.W-1?1:0,i=t>this.T-this.H/2?-1:0,o=t<this.T-1?1:0;let a,r;do{a=Math.floor(this.S.rngex.nextFloat()*(s-n+1))+n,r=Math.floor(this.S.rngex.nextFloat()*(o-i+1))+i}while(0===a&&0===r);return console.log("xMin: ",n,"xMax: ",s,"yMin: ",i,"yMax: ",o,"dx: ",a,"dy: ",r,"x: ",e,"y: ",t),[e+a,t+r]}CountActorsOfType(e){let t=0;for(const n of Object.values(this.S.actors))n.type===e&&t++;return t}DestroyActor(e){delete this.S.actors[e],this.self.c.IsServer()||this.self.hm.IsTinyMode()||!this._visualActors.has(e)||(this._visualActors.get(e).delete(),this._visualActors.delete(e))}DestroyAllActors(){for(const e of Object.keys(this.S.actors))this.DestroyActor(e)}PullActors(e){if(!this.self.hm.IsTinyMode()&&!this.self.c.IsServer())for(const t of this._visualActors.values())t.progress(e)}ClearVisualActors(){for(const e of this._visualActors.values())e.delete();this._visualActors.clear()}RedrawActors(){if(this.ClearVisualActors(),!this.self.hm.IsTinyMode()&&!this.self.c.IsServer())for(const e of Object.keys(this.S.actors))this._visualActors.set(e,this.self.hm.H.board.af(this.S.actors[e].type).create({},this.S.actors[e],!1))}ProgressActorByType(...e){for(const t of Object.values(this.S.actors))e.includes(t.type)&&this.ProgressActor(t)}ProgressActors(){for(const e of Object.values(this.S.actors))this.ProgressActor(e)}ActionActor(e,...t){this.self.hm.IsTinyMode()||this.self.c.IsServer()||this._visualActors.get(e)?.action(...t)}ProgressActor(e){switch(e.type){case"wound_timer":{let t=!1;switch(e.data.type){case"time":if("INF"===e.data.amt)break;e.data.amt--,t=e.data.amt<=0;break;case"clears":if("INF"===e.data.amt)break;t=e.data.amt<=0}if(t){if(e.data.firstOfRow){for(let t=0;t<this.W;t++)this.S.board[e.y][t]="gb"===this.S.board[e.y][t]?null:"gb";this.self.hm.H.stackdirty=!0,this.self.hm.H.fallingdirty=!0,this.self.bm.ClearIsLegalAtPosMemo(),this.self.sfx.Play("wound_repel")}this.DestroyActor(e.id)}break}case"voidhole":{const t=this.S.board[e.y][e.x];if(t){if(this.OnClient((()=>{const n=nc(this.self.hm.H.stackobj,e.x*ws(_c.x)+ws(_c.x/2),(e.y-this.B)*ws(_c.x)+ws(_c.x/2)),s=Ac.getColor(this.options.minoskin[t]||this.options.minoskin.other,t);"tiny"!==this.self.hm.H.displaymode&&0!==this.self.lm.H.soundSkipRate&&(xl.play("void_burst",{x:n.x,y:n.y,s:this.self.hm.S(),color:s}),this.self.hm.H.holderstate.ds+=5*this.self.lm.H.lastdT,this.self.sfx.Play("voidhole"))})),this.S.board[e.y][e.x]=null,e.data.nom++,e.data.nom%e.data.amt==0){const[t,n]=this.GetNewActorPos(e);this.self.bm.RemoveLinesFromStack([e.y]),this.self.bm.ClearIsLegalAtPosMemo(),this.self.hm.H.fallingdirty=!0,this.OnClient((()=>{if(["medium","high","ultra"].includes(ot.video.graphics)){const t=nc(this.self.hm.H.stackobj,ws(_c.x)*this.Wh,(e.y-this.B)*ws(_c.x)+ws(_c.x/2));xl.play("wound_spawn",{x:t.x,y:t.y,s:this.self.hm.S(),w:this.W,tint:8388821}),this.self.sfx.Play("wound_repel")}})),e.x=t,e.y=n}this.self.bm.ClearIsLegalAtPosMemo(),this.self.hm.H.fallingdirty=!0,this.self.hm.H.stackdirty=!0,this._visualActors.get(e.id)?.action()}if(this.S.pause||this.self.fm.IsSleep())return;const n=this.S.falling.type,s=this.self.fm.GetPieceDefinition(n,this.S.falling.r,!0),i=this.S.falling.x,o=Math.ceil(this.S.falling.y);for(const[t,[a,r]]of s.data.entries()){if(this.S.falling.skip.includes(t))continue;if(e.x===i+(a-s.dx)&&e.y===o+(r-s.dy)){if(this.OnClient((()=>{const t=nc(this.self.hm.H.stackobj,e.x*ws(_c.x)+ws(_c.x/2),(e.y-this.B)*ws(_c.x)+ws(_c.x/2)),s=this.self.cm.GetMinoColor(n);"tiny"!==this.self.hm.H.displaymode&&0!==this.self.lm.H.soundSkipRate&&(xl.play("void_burst",{x:t.x,y:t.y,s:this.self.hm.S(),color:s}),this.self.sfx.Play("voidhole"),this.self.hm.H.holderstate.ds+=5*this.self.lm.H.lastdT)})),this.S.falling.skip.push(t),this.self.bm.ClearIsLegalAtPosMemo(),this.self.hm.H.fallingdirty=!0,this._visualActors.get(e.id)?.action(),e.data.nom++,e.data.nom%e.data.amt==0){const[t,n]=this.GetNewActorPos(e);this.self.bm.RemoveLinesFromStack([e.y]),this.self.bm.ClearIsLegalAtPosMemo(),this.self.hm.H.fallingdirty=!0,this.OnClient((()=>{if(["medium","high","ultra"].includes(ot.video.graphics)){const t=nc(this.self.hm.H.stackobj,ws(_c.x)*this.Wh,(e.y-this.B)*ws(_c.x)+ws(_c.x/2));xl.play("wound_spawn",{x:t.x,y:t.y,s:this.self.hm.S(),w:this.W,tint:8388821}),this.self.sfx.Play("wound_repel")}})),e.x=t,e.y=n}this.S.falling.skip.length>=s.data.length&&(this.self.hm.H.fallingdirty=!0,this.self.fm.SetSleep(!0),this.S.falling.flags|=R.STATE_NODRAW,this.self.wfm.WaitFrames(30,"are",{}))}}break}}}RemoveRow(e){for(const t of Object.keys(this.S.actors)){const n=this.S.actors[t];if("stack"===n.anchor)n.y<e?n.y++:n.y===e&&this.DestroyActor(t)}}AddRow(e){for(const t of Object.keys(this.S.actors)){const n=this.S.actors[t];if("stack"===n.anchor)n.y<e&&n.y--}}ClearLines(e){for(const e of Object.values(this.S.actors))if("wound_timer"===e.type){if("clears"!==e.data.type)continue;if(this.options.zenith_allspin&&this.S.zenith.lastclearwasdupe)continue;e.data.amt--,this.ActionActor(e.id,e.data.amt<=0?"clear":"good")}}}const z=function(e){"use strict";const t=e.gsm;function n(e){for(const n of t.impendingdamage)if(n.id===e)return n;return null}function s(){const e=Math.min(t.setoptions.garbagecapmax,t.setoptions.garbagecap);return Math.floor(e)}function i(e){let t="medium";return e<3&&(t="small"),e>5&&(t="large"),t}function o(e=!1){let n=0;for(const s of t.impendingdamage)s.shielded||(!e||s.active&&"spawn"===s.status)&&(n=n+=s.amt);return n}function a(){let n=0;if(t.setoptions.zenith&&"volatile_reversed"===t.setoptions.zenith_mods[0]&&t.zenith.garbageahead.shift(),0!==t.setoptions.garbagefavor)n=function(){const n=[];let s=-1;for(let n=e.T-1;n>=0;n--){let i=-1,o=!1;for(let s=0;s<e.W;s++)-1===i&&null===t.board[n][s]&&(i=s),"gb"===t.board[n][s]&&(o=!0);if(-1!==i){o&&(s=i);break}}e:for(let i=0;i<e.W;i++){for(let o=0;o<e.T;o++)if(null!==t.board[o][i]){const a=e.T-o,r=-1===s?0:Math.abs(i-s);n.push([i,a+5*r+.1*t.rngex.nextFloat()]);continue e}n.push([i,.1*t.rngex.nextFloat()])}n.sort(((e,t)=>e[1]-t[1]));let i=0;for(let s=0;s<n.length;s++){let o=Math.max(0,10+t.setoptions.garbagefavor+s*((20-2*(10+t.setoptions.garbagefavor))/9));if(t.setoptions.messiness_nosame&&t.lastcolumn===n[s][0]&&(o=0),t.setoptions.messiness_center){const t=Math.round(e.W/5);(n[s][0]<t||n[s][0]>=e.bm.ColumnWidth()-t)&&(o=0)}n[s][2]=i+o,i+=o}const o=t.rngex.nextFloat()*i;for(let e=0;e<n.length;e++)if(0!==n[e][2]&&o<=n[e][2])return t.lastcolumn=n[e][0],t.lastcolumn;return 0}();else{const s=t.setoptions.messiness_center?Math.round(e.W/5):0;t.setoptions.messiness_nosame&&null!==t.lastcolumn?(n=s+Math.floor(t.rngex.nextFloat()*(e.bm.ColumnWidth()-1-2*s)),n>=t.lastcolumn&&n++):n=s+Math.floor(t.rngex.nextFloat()*(e.bm.ColumnWidth()-2*s)),t.lastcolumn=n}return t.setoptions.zenith&&"volatile_reversed"===t.setoptions.zenith_mods[0]?(t.zenith.garbageahead.push(n),t.lastcolumn=t.zenith.garbageahead[0],t.lastcolumn):n}function r(){return!!t.setoptions.hasgarbage&&!(t.setoptions.shielded&&t.setoptions.shielded>e.esm.frame)}function l(n){if(!t.setoptions.hasgarbage)return;if(n<1)return;t.lastoffensive.offence+=n,t.stats.garbage.sent+=n,t.stats.garbage.sent_nomult+=Math.floor(n/t.setoptions.garbagemultiplier),e.zthm.AwardLines(n,!0),e.zthm.IncrementPrompt("send",n);const s=i(n);e.sfx.Play(`garbage_out_${s}`,2);for(const s of e.tm.GetTargets()){const i=++t.interactionid;if(["zero","consistent"].includes(t.setoptions.passthrough)&&(t.garbageacknowledgements.outgoing[s]||(t.garbageacknowledgements.outgoing[s]=[]),t.garbageacknowledgements.outgoing[s].push({iid:i,amt:n})),e.c.IsServer()){let o=n;t.setoptions.zenith_expert&&"expert_reversed"===t.setoptions.zenith_mods[0]&&(o=Math.floor(o/2));const a=t.setoptions.zenith?4:1/0;for(;o>0;){const n=Math.min(o,a);e.elm.emit("interaction",{iid:i,type:"garbage",amt:n,ackiid:t.garbageacknowledgements.incoming[s]??0,x:t.lastoffensive.x,y:t.lastoffensive.y,zthalt:t.setoptions.zenith?t.stats.zenith.altitude:void 0},[s]),o-=n}}else _(n,s)}}function c(e){switch(t.setoptions.roundmode){case"down":return Math.floor(e);case"rng":{const n=Math.floor(e);if(n===e)return e;const s=e-n;return n+(t.rngex.nextFloat()<s?1:0)}}return 0}function p(n){const s=n.gameid,o=n.cid;if(null!=o){if(n=function(e){for(const n of t.impendingdamage)if(n.cid===e)return n;return null}(o),!n)return}else t.lastatktime=e.esm.frame,t.zenith.stalepieces=0,e.zthm.AwardHasBeenAttacked("volatile_reversed"===t.setoptions.zenith_mods[0]?Math.floor(n.amt/3):n.amt);if(t.zenith.incapacitated)return;const a=i(n.amt);if(!e.c.IsServer()&&e.iom.IsLocal()){const i=sc(e.hm.H.stackobj,ws(_c.x*(e.Wh+e.Wh*(Math.random()-.5))),ws(_c.x*(e.Hh+e.Hh*(Math.random()-.5))),e.hm.S());let r=null;null!=s&&(e.sfx.Play(`garbage_in_${a}`),r=e.elm.emit("garbage",s)),null==r&&(r={pos:sc(e.hm.H.stackobj,ws(_c.x*e.Wh),ws(-10*_c.x),e.hm.S()),scale:e.hm.S()});const l=Il.create({pointA:[r.pos.x+r.scale*ws(_c.x*(n.x-(e.Wh-.5))),r.pos.y+r.scale*ws(_c.x*(n.y-(e.Hh+e.B-.5)))],pointB:[i.x,i.y],duration:t.setoptions.garbagespeed/(e.lm.H.playbackSpeed||1)/60,intensity:n.amt,layer:"front"});o&&l&&function(e,n){for(const s of t.impendingdamage)if(s.cid===e)return s.beam=n}(o,l)}t.killer.gameid=s??0,t.killer.username=n.username,t.garbagereceived+=n.amt,t.stats.garbage.received+=n.amt,t.notyetreceivedattacks++,e.wfm.WaitFrames(t.setoptions.garbagespeed,"incoming-attack-hit",{gid:n.id})}function h(n){let s=n.amt;const i=[];t.garbageid--;let o=16;t.setoptions.zenith&&t.stats.zenith.altitude>=4e3&&(o+=Math.floor((t.stats.zenith.altitude-3500)/500)),t.setoptions.zenith_volatile&&(o*=2);const a=Math.floor(o/4),r=o-4*a,l=[a,a,a,a];for(let e=0;e<r;e++)l[3-e]++;let c=0;for(;i.length<l.length&&s;){const e=Math.min(l[c++],s);s-=e,i.push({...n,amt:e,id:++t.garbageid})}const p=120+30*i.length;t.windupwaituntil>e.esm.frame?(e.wfm.WaitFrames(t.windupwaituntil-e.esm.frame,"start-explode-attack",i),t.windupwaituntil+=p):(d(i),t.windupwaituntil=e.esm.frame+p)}function d(t){for(let n=0;n<t.length;n++)e.wfm.WaitFrames(60+30*n,"process-exploded-attack",t[n]);e.c.OnClient((()=>{e.sfx.Play(`garbagewindup_${Math.max(1,Math.min(4,t.length))}`),e.hm.H.board.el("garbagewindupicon").create(Math.max(1,Math.min(4,t.length)))}))}function u(n){if(t.setoptions.zenith&&n.amt>=(t.setoptions.zenith_volatile?16:8))return h(n);t.impendingdamage.push(n),e.c.OnClient((()=>e.pbm.UpdateGarbageBar("impending"))),null==n.cid?p(n):(t.lastatktime=e.esm.frame,t.zenith.stalepieces=0,e.zthm.AwardHasBeenAttacked("volatile_reversed"===t.setoptions.zenith_mods[0]?Math.floor(n.amt/3):n.amt))}function _(n,s){if(e.c.IsServer())return;if(("low"===ot.video.graphics||"minimal"===ot.video.graphics)&&e.hm.IsTinyMode()||0===e.lm.H.soundSkipRate)return;const i=e.elm.emit("garbage",s);if(null==i)return;const o=sc(e.hm.H.stackobj,ws(_c.x*t.lastoffensive.x),ws(_c.x*(t.lastoffensive.y-20)),e.hm.S());Il.create({pointA:[o.x,o.y],pointB:[i.pos.x+(Math.random()-.5)*(i.scale*ws(_c.x*e.Wh)),i.pos.y+(Math.random()-.5)*(i.scale*ws(_c.x*e.Hh))],duration:t.setoptions.garbagespeed/(e.lm.H.playbackSpeed||1)/60,intensity:n*e.hm.H.holderstate.cos,layer:e.hm.IsFullMode()?"front":"sub"}),e.wfm.WaitFrames(t.setoptions.garbagespeed/(e.lm.H.playbackSpeed||1),"outgoing-attack-hit",{})}function m(s=t.impendingdamage[0]?.id){if(!s)return;const o=n(s);if(o){switch(o.status){case"sleeping":o.queued?o===t.impendingdamage[0]&&(o.delay>=1?(o.status="caution",e.wfm.WaitFrames(o.delay,"process-garbage-status",{id:o.id})):o.status="spawn"):(o.status="caution",e.wfm.WaitFrames(o.delay,"process-garbage-status",{id:o.id}));break;case"caution":o.firstcycle&&(o.status="danger"),e.wfm.WaitFrames(o.delay,"process-garbage-status",{id:o.id});break;case"danger":o.status="spawn"}o.firstcycle=!0,"spawn"===o.status&&e.c.OnClient((()=>{const t=i(o.amt);e.gpm.Vibrate(mi[`damage_${t}`.toUpperCase()]),e.sfx.Play(`damage_${t}`),e.hm.H.holderstate.dw+=Math.min(40,1.25*o.amt)*e.lm.H.lastdT})),e.c.OnClient((()=>e.pbm.UpdateGarbageBar("impending")))}}return{GetGarbageCap:s,GetGarbageAbsoluteCap:function(){return t.setoptions.garbageabsolutecap},GetPendingGarbageCount:o,AddPendingGarbage:function(n){const s=n.gameid??null;let i=n.amt,o=t.setoptions.garbagephase;if(["zero","consistent"].includes(t.setoptions.passthrough)&&s&&(i=function(e,n){t.garbageacknowledgements.incoming[n]=Math.max(e.iid,t.garbageacknowledgements.incoming[n]??0);let s=e.amt;if(t.garbageacknowledgements.outgoing[n]){const i=[];for(const o of t.garbageacknowledgements.outgoing[n]){if(o.iid<=e.ackiid)continue;const t=Math.min(o.amt,s);o.amt-=t,s-=t,o.amt>0&&i.push(o)}t.garbageacknowledgements.outgoing[n]=i}return s}(n,s)),t.setoptions.zenith){const s=t.stats.zenith.altitude,a=Math.max(Math.min(3500,n.zthalt),Math.min(2e3,s-1e3));a<s&&(i*=1+.004*(s-a)**2/(s+a)),t.setoptions.zenith_duo&&t.zenith.allyincapacitated&&(i*=1.5);let r=t.cancelstreak,l=.001;t.setoptions.zenith_volatile&&!t.setoptions.zenith_allspin&&(l=3e-4),!t.setoptions.zenith_volatile&&t.setoptions.zenith_allspin&&(l=.002),t.setoptions.TEMP_zenith_rng&&(r=0);const c=1*i+l*r**2;let p=me.CancelingFatigueBumpCap[t.stats.zenith.floor];if(t.windupwaituntil>=e.esm.frame&&(p=Math.min(6,p)),t.setoptions.zenith_volatile&&(p*=2),i=Math.max(i,Math.min(c,p)),r>=25&&!t.setoptions.zenith_volatile&&(o=Math.floor(o/2)),t.setoptions.zenith_duo&&(t.stats.zenith.totalbonus||t.zenith.bonusfromally)){const e=t.stats.zenith.totalbonus/(t.stats.zenith.totalbonus+t.zenith.bonusfromally);e<=.2&&(i*=e-.2+.75)}t.stats.zenith.targetinggrace>8&&(i*=1-.05*(t.stats.zenith.targetinggrace-8))}if(i=c(i*t.setoptions.receivemultiplier),t.setoptions.garbageabsolutecap){const e=t.impendingdamage.reduce(((e,t)=>e+t.amt),0);t.setoptions.garbageabsolutecap<=e?n.shielded=!0:i+e>t.setoptions.garbageabsolutecap&&(i=t.setoptions.garbageabsolutecap-e)}if(t.zenith.incapacitated||i<=0)return void(i&&(t.lastatktime=e.esm.frame,t.zenith.stalepieces=0,e.zthm.AwardHasBeenAttacked(i)));const a=++t.garbageid,r=n.cid??null,l=n.iid??null,d=n.ackiid??null,u=n.type,_=n.pos,m=n.neg,g=n.active??null==r,f=n.column,b=n.username||null,C=n.shielded,y=n.delay??o,x=n.queued??t.setoptions.garbagequeue,A=n.size??t.setoptions.garbageholesize,v=n.hardened,k=n.position,w=n.color,B=n.actor_pos,L=n.actor_neg,[S,z]=[n.x,n.y];let F="spawn";(x||y>=1)&&(F=y>=1?"caution":"spawn",t.impendingdamage.length>0&&x&&(F="sleeping"));const T={id:a,cid:r,iid:l,ackiid:d,gameid:s,username:b,type:u,active:g,status:F,hardened:v,shielded:C,delay:y,queued:x,amt:i,x:S,y:z,pos:_,neg:m,size:A,column:f,position:k,color:w,actor_pos:B,actor_neg:L};return t.setoptions.zenith?function(e){t.hesitatedattacks.push(e)}(T):t.setoptions.zenith&&i>=(t.setoptions.zenith_volatile?16:8)?h(T):(t.impendingdamage.push(T),e.c.OnClient((()=>e.pbm.UpdateGarbageBar("impending"))),void(null==r?p(T):(t.lastatktime=e.esm.frame,t.zenith.stalepieces=0,e.zthm.AwardHasBeenAttacked("volatile_reversed"===t.setoptions.zenith_mods[0]?Math.floor(i/3):i))))},AddGarbageToQueue:function(e,n,s,i=t.setoptions.garbagequeue,o=t.setoptions.garbagephase){t.impendingdamage.push({id:++t.garbageid,type:"garbage",amt:e,status:n,active:!0,column:s,delay:o,queued:i})},FightLines:function(n){if(!t.setoptions.hasgarbage)return;t.stats.garbage.attack+=n,e.zthm.IncrementPrompt("attack",n);const s=!!t.impendingdamage.length;s&&e.sfx.Play("offset",.65,.2);let i=0;"defensive"===t.setoptions.garbagetargetbonus&&(i+=c(t.garbagebonus*t.setoptions.garbagemultiplier));let r=t.setoptions.cancelmultiplier;if(t.setoptions.zenith_duo&&(r*=2),i+=c(r*n-n),t.stats.piecesplaced<=t.setoptions.openerphase&&o()>=t.stats.garbage.sent&&(i+=n),2===t.setoptions.zenith_mods.length&&t.setoptions.zenith_messy&&t.setoptions.zenith_expert)if(t.stats.piecesplaced<=400&&(t.zenith.blockrationing+=n),t.stats.piecesplaced<400){const e=t.zenith.blockrationing+Math.max(0,t.stats.btb-t.setoptions.b2bcharge_at)+(t.stats.btb>t.setoptions.b2bcharge_at?t.setoptions.b2bcharge_base:0);t.zenith.blockrationing_app=e>=150&&e/t.stats.piecesplaced>=.9?e/t.stats.piecesplaced:0,t.zenith.blockrationing_final=0}else t.zenith.blockrationing_app=0,t.zenith.blockrationing_final=t.zenith.blockrationing;let p=0,h=0;for(;n>0||i>0;){const e=t.garbageareentries[h];if(!e)break;e.hardened?h++:(t.garbageareentries.splice(h,1),n?n--:i--,p++,n<=0&&i<=0&&t.garbageareentries[h]&&(t.garbageareentries[h].edges|=64))}let d=0;for(;n>0||i>0;){const e=t.impendingdamage[d];if(!e)break;e.hardened?d++:(e.amt--,e.amt||(t.impendingdamage.splice(d,1),e.queued&&m(),t.rngex.nextFloat()<t.setoptions.messiness_change&&(a(),t.haschangedcolumn=!0)),n?n--:i--,p++)}if(t.lastoffensive.defense+=p,p){let n=1;(t.setoptions.zenith_expert||"volatile_reversed"===t.setoptions.zenith_mods[0])&&(n=0),e.zthm.AwardLines(p*n,!1),e.zthm.IncrementPrompt("cancel",p),e.zthm.NixPrompt("nocancel"),t.zenith.lastcancel=e.esm.frame,t.cancelstreak+=p}n>0&&(s&&e.sfx.Play("counter",.65,.2),"consistent"===t.setoptions.passthrough&&t.notyetreceivedattacks>0&&e.sfx.Play("exchange",1,.2),l(n)),s&&!e.c.IsServer()&&(e.pbm.UpdateGarbageBar("impending"),p&&e.pbm.FlashGarbageBar("impending",Math.min(e.H,p)))},Offence:l,IncomingAttack:p,IncomingAttackHit:function(s){const o=n(s);if(o){if(!r()||o.shielded)return t.impendingdamage=t.impendingdamage.filter((e=>e.id!==s)),e.c.OnClient((()=>{const n=i(o.amt);if(e.sfx.Play(`protected_${n}`),e.pbm.UpdateGarbageBar("impending"),o.amt){const n=t.impendingdamage.reduce(((e,t)=>e+t.amt),0);e.pbm.FlashGarbageBar("impending",Math.min(e.H,o.amt),n)}}));e.c.OnClient((()=>e.sfx.Play("impact"))),t.notyetreceivedattacks--,o.active=!0,m(o.id)}},OutgoingAttack:_,OutgoingAttackHit:function(){e.sfx.Play("impact")},ExplodeAttack:h,StartExplodeAttack:d,ProcessExplodedAttack:function(n){t.impendingdamage.push(n),e.c.OnClient((()=>e.pbm.UpdateGarbageBar("impending"))),p(n)},ProcessGarbageStatus:m,ProcessHesitatedAttacks:function(){if(0===t.hesitatedattacks.length)return;const e=new Map;for(const n of t.hesitatedattacks)n.gameid?(e.has(n.gameid)||e.set(n.gameid,[]),e.get(n.gameid).push(n)):u(n);for(const[,t]of e){const e={...t[0],amt:0};for(const n of t)e.amt+=n.amt;u(e)}t.hesitatedattacks.length=0},TakeAllDamage:function(n=!1){if(!r())return;let i=!0;const o=n?400:s();let l=!1,c=!1,p=0;!t.haschangedcolumn&&t.setoptions.messiness_timeout&&e.esm.frame>=t.lasttanktime+t.setoptions.messiness_timeout&&(a(),t.haschangedcolumn=!0);let h=t.setoptions.messiness_change,d=t.setoptions.messiness_inner;!t.setoptions.zenith||t.setoptions.zenith_messy||t.zenith.gracestillmessy||(h=Math.max(0,h-.0375*t.stats.zenith.targetinggrace),d=Math.max(0,d-.015*t.stats.zenith.targetinggrace));const u=[];for(let e=t.impendingdamage.length-1;e>=0;e--){const n=t.impendingdamage[e];n.active&&"spawn"===n.status||(u.unshift(n),t.impendingdamage.splice(e,1))}for(let n=0;n<o&&0!==t.impendingdamage.length;n++){const s=t.impendingdamage[0];s.amt--,t.lastreceivedcount++;let r=t.lastcolumn;if(null!=s.column)r=s.column;else if(null===r||t.rngex.nextFloat()<d){!t.haschangedcolumn&&("volatile_reversed"!==t.setoptions.zenith_mods[0]||0!==n)&&(r=a(),t.haschangedcolumn=!0)}const u=s.size,_=(i?64:0)|(s.amt<=0||n>=o-1?4:0),m=s.position,g=s.pos,f=s.neg??null,b=s.actor_pos,C=s.actor_neg,y=s.hardened??!1;switch(e.hm.H.holderstate.ds+=(n>=40?0:2)*e.lm.H.lastdT,l=!0,t.setoptions.garbageentry){case"delayed":e.wfm.WaitFrames(t.setoptions.garbageare*(n+1),"push-garbage-line",{pos:g,neg:f,column:r,size:u,edges:_,position:m,actor_pos:b,actor_neg:C});break;case"continuous":t.garbageareentries.push({pos:g,neg:f,column:r,size:u,edges:_,position:m,actor_pos:b,actor_neg:C,hardened:y}),t.garbagearelockeduntil=Math.max(t.garbagearelockeduntil,e.esm.frame+t.setoptions.garbageare);break;default:p++,e.bm.AreWeToppedYet(),e.bm.PushLine({pos:g,neg:f,column:r,size:u,edges:_,position:m,actor_pos:b,actor_neg:C})}i=!1,t.haschangedcolumn=!1,s.amt||(t.impendingdamage.shift(),c=!0,i=!0,t.rngex.nextFloat()<h&&(a(),t.haschangedcolumn=!0))}t.impendingdamage.push(...u),c&&t.impendingdamage[0]?.queued&&m(),l&&!e.c.IsServer()&&(e.gpm.Vibrate(mi.GARBAGERISE),e.sfx.Play("garbagerise"),e.pbm.UpdateGarbageBar("impending")),e.zthm.IncrementPrompt("tank",p),l&&(t.cancelstreak=Math.max(0,t.cancelstreak-3*p),t.lasttanktime=e.esm.frame,t.zenith.staletime=e.esm.frame,t.zenith.stalepieces=0)},AnnounceOffensive:function(){if(t.lastoffensive.offence&&(t.spike.count>=10&&e.fim.AddFire(5),t.lastoffensive.offence>=10&&e.fim.AddFire(3*t.lastoffensive.offence)),t.setoptions.usezenconfig&&t.lastoffensive.offence>0&&e.znm.UpdateGarbageOffense(t.lastoffensive.offence),t.lastoffensive.offence&&(t.spike.count+=t.lastoffensive.offence,t.spike.count_nomult+=Math.floor((t.lastoffensive.offence-t.lastoffensive.surge)/t.setoptions.garbagemultiplier),t.spike.count>t.stats.garbage.maxspike&&(t.stats.garbage.maxspike=t.spike.count),t.spike.count_nomult>t.stats.garbage.maxspike_nomult&&(t.stats.garbage.maxspike_nomult=t.spike.count_nomult),t.spike.timer=60),!e.c.IsServer()&&"minimal"!==ot.video.graphics&&(t.lastoffensive.defense&&e.hm.H.board.fx("popup_defense").create(t.lastoffensive.defense,{x:t.lastoffensive.x,y:t.lastoffensive.y,evasive:e.iom.IsLocal()}),t.lastoffensive.offence)){if(e.hm.IsFullMode()&&t.spike.count>=10&&0!==e.lm.H.soundSkipRate){const n=nc(e.hm.H.holder,ws(_c.x)*e.Wh,ws(_c.x)*e.Hh);xl.play("spike_flair",{x:n.x,y:n.y,w:e.W*e.hm.S(),h:e.H*e.hm.S()});const s=nc(e.hm.H.stackobj,ws(_c.x*t.lastoffensive.x),ws(_c.x*(t.lastoffensive.y-e.B)));Bl(s.x,s.y,1+Math.min(t.spike.count-10,22.5)/2.5),t.lastoffensive.offence>=4&&e.sfx.Play(`thunder${Math.floor(6*Math.random())+1}`,1,!0)}e.hm.H.board.fx("popup_offence").create(t.spike.count,{x:t.lastoffensive.x,y:t.lastoffensive.y,evasive:e.iom.IsLocal()})}},AutoRound:c}};class F extends k{static BagList=["total mayhem","classic","pairs","14-bag","7+1-bag","7+2-bag","7+x-bag","7-bag+oo","7+1-lone-bag","14+1-lone-bag","7+2-lone-bag","14+2-lone-bag","zenith","7-bag"];GetLonelyPieces(){const e=this.self.cm.constants.minotypes,t=Object.keys(this.self.cm.constants.tetrominoes).filter((t=>!e.includes(t)));return t.length?t:e}PopulateBag(){const e=this.self.cm.constants.minotypes,t=this.S;let n=[];switch(t.setoptions.bagtype){case"total mayhem":for(let s=0;s<7;s++)n.push(e[Math.floor(t.rng.nextFloat()*e.length)]);break;case"classic":for(let s=0;s<7;s++){let s=Math.floor(t.rng.nextFloat()*(e.length+1));(s===t.lastGenerated||s>=e.length)&&(s=Math.floor(t.rng.nextFloat()*e.length)),t.lastGenerated=s,n.push(e[s])}break;case"pairs":{const s=[...e];t.rng.shuffleArray(s),n=[s[0],s[0],s[0],s[1],s[1],s[1]],t.rng.shuffleArray(n);break}case"14-bag":n=[...e,...e],t.rng.shuffleArray(n);break;case"7+1-bag":n=[...e,e[Math.floor(t.rng.nextFloat()*e.length)]],t.rng.shuffleArray(n);break;case"7+2-bag":n=[...e,e[Math.floor(t.rng.nextFloat()*e.length)],e[Math.floor(t.rng.nextFloat()*e.length)]],t.rng.shuffleArray(n);break;case"7+x-bag":{const s=[3,2,1,1][t.bagid]??0;t.bagex.length<s&&(t.bagex=[...e],t.rng.shuffleArray(t.bagex)),n=[...e,...t.bagex.splice(0,s)],t.rng.shuffleArray(n);break}case"7-bag+oo":{const s=[...e],i=[...e.map((e=>"o"===e?"oo":e))];t.rng.shuffleArray(s),t.rng.shuffleArray(i),n=[...s,...i];break}case"7+1-lone-bag":{const s=this.GetLonelyPieces();n=[...e,s[Math.floor(t.rng.nextFloat()*s.length)]],t.rng.shuffleArray(n);break}case"14+1-lone-bag":{const s=this.GetLonelyPieces();n=[...e,...e,s[Math.floor(t.rng.nextFloat()*s.length)]],t.rng.shuffleArray(n);break}case"7+2-lone-bag":{const s=this.GetLonelyPieces();n=[...e,s[Math.floor(t.rng.nextFloat()*s.length)],s[Math.floor(t.rng.nextFloat()*s.length)]],t.rng.shuffleArray(n);break}case"14+2-lone-bag":{const s=this.GetLonelyPieces();n=[...e,...e,s[Math.floor(t.rng.nextFloat()*s.length)],s[Math.floor(t.rng.nextFloat()*s.length)]],t.rng.shuffleArray(n);break}case"zenith":{const s=[...e];t.rng.shuffleArray(s);const i=[],o=t.cancelstreak,a=t.setoptions.zenith_volatile?2:1;o>=20*a&&i.push("o"),o>=30*a&&i.push(t.rng.nextFloat()<.5?"l":"j"),o>=40*a&&i.push(t.rng.nextFloat()<.5?"s":"z"),o>=50*a&&i.push(t.rng.nextFloat()<.5?"l":"j"),o>=50*a&&i.push(t.rng.nextFloat()<.5?"t":"i"),o>=60*a&&i.push(t.rng.nextFloat()<.5?"s":"z"),i.length&&t.rng.shuffleArray(i),n=[...s,...i],o>=40&&!t.zenith.hasseenI5&&(t.zenith.hasseenI5=!0,n.unshift("i5"));break}default:n=[...e],t.rng.shuffleArray(n)}t.bag.push(...n),t.bagid++}PullFromBag(){let e=14;for("zenith"===this.S.setoptions.bagtype&&(e=6);this.S.bag.length<e;)this.PopulateBag();return this.S.bag.shift()}}const T=function(e){"use strict";const t=e.gsm;function n(){const t=e.gsm.setoptions,[n,s,i]=[t.boardwidth,t.boardheight,t.boardbuffer];e.W=n,e.H=s,e.B=i,e.T=s+i,e.Wh=n/2,e.Hh=s/2}function s(){const n=[],s=[];for(let t=0;t<e.T;t++){const t=[],i=[];for(let n=0;n<e.W;n++)t.push(null),i.push(255);n.push(t),s.push(i)}t.board=n,t.boardedges=s,t.quadcolumns=new Array(e.W).fill(0)}const i=[];function o(t,n,s,o,a=!1){const l=10+Math.ceil(s)*(2*e.W)+n;if(!a&&l in i){const e=i[l]>>2*o&3;if(1===e)return!0;if(2===e)return!1}const c=e.fm.GetPieceDefinition(t,o);if(!c)return!1;let p=!0;for(const[e,t]of c.data){if(r(n+(e-c.dx),s+(t-c.dy))){p=!1;break}}if(!a){i[l]|=(p?1:2)<<2*o}return p}function a(){i.length=0}function r(n,s){return n<0||n>=e.W||(s<0||s>=e.T||(s=Math.ceil(s),void 0===t.board[s]||null!==t.board[s][n]))}function l(){return t.board[0].every((e=>null!==e))}function c(e){return e.some((e=>"gb"===e||"gbd"===e))}function p(){for(let n=0;n<e.T;n++)if(t.board[n].some((e=>null!==e)))return n;return e.T}function h(){for(let n=0;n<e.T;n++)if(t.board[n].some((e=>"gbd"===e)))return n;return e.T}function d(){for(let n=0;n<e.T;n++)if(t.board[n].every((e=>"gbd"===e)))return n;return e.T}function u(n,s,i,o,a=!1){const r=e.fm.GetPieceDefinition(n,o,!a),l=e.cm.GetPieceColor(n);let c=0;for(const[o,p,h=255]of r.data){const d=Math.ceil(i),u=s+(o-r.dx),m=d+(p-r.dy);c=Math.max(m,c),t.board[m][u]=l,t.boardedges[m][u]=h,e.c.OnClient((()=>e.hm.H.stackmud.push([m,u,l,h]))),a&&t.setoptions.usebombs&&_(n,u,m)}return c<e.B}function _(n,s,i){let o=0;for(let a=i+1;a<e.T&&"gbd"===t.board[a]?.[s];a++)t.board[a][s]="gb",o++,e.c.OnClient((()=>{if(e.hm.IsFullMode()&&("high"===ot.video.graphics||"ultra"===ot.video.graphics)){const t=nc(e.hm.H.stackobj,s*ws(_c.x)+ws(_c.x/2),(a-e.B)*ws(_c.x)+ws(_c.x/2)),i=e.cm.GetMinoColor(n);xl.play("mino_explode",{x:t.x,y:t.y,s:e.hm.S(),color:i})}}));o&&e.c.OnClient((()=>{e.gpm.Vibrate(mi.DAMAGE_LARGE),e.sfx.Play("bombdetonate"),e.hm.H.holderstate.ds+=20*o*e.lm.H.lastdT,e.hm.H.stackdirty=!0}))}function m(t,n,s,i){const o=e.fm.GetPieceDefinition(t,i),a=[],r=[];let l=0;for(const[e,t]of o.data){const i=Math.ceil(s),c=n+(e-o.dx),p=i+(t-o.dy);l=Math.max(p,l),a.push(`${p}x${c}`),r.push([p,c])}return{besty:l,shadowTiles:a,shadowTilesArr:r}}function g(n){let{column:s=0,size:i=t.setoptions.garbageholesize,edges:o=68,position:a="aboveUnclearable",pos:r="gb",neg:c=null,actor_pos:u={tile:null,data:null,anchor:"stack"},actor_neg:_={tile:null,data:null,anchor:"stack"}}=n;if(l())return!1;const m=[...t.board],g=[...t.boardedges],f=[],b=[];let C;if(Array.isArray(s))C=new Set(s);else if(C=function(t,n){const s=new Set([t]);for(let i=1,o=0;i<n;i++)o=t+(o+1)>=e.W?-1:Math.sign(o)>=0?o+1:o-1,s.add(t+o);return s}(s,i),t.setoptions.zenith_doublehole&&t.rngex.nextFloat()<.5){let n=Math.floor(t.rngex.nextFloat()*(e.bm.ColumnWidth()-1));n>=s&&n++,C.add(n)}else if("doublehole_reversed"===t.setoptions.zenith_mods[0]){const n=t.rngex.nextFloat()<.5?7:6,s=t.rngex.shuffleArray(Array.from({length:e.W},((e,t)=>t)));C.clear();for(let e=0;e<n;e++)C.add(s.pop())}else if("nohold_reversed"===t.setoptions.zenith_mods[0]){t.rngex.nextFloat()<me.RevNoHoldHoleSideChangeChance[t.stats.zenith.floor]&&(t.zenith.garbageside=(t.zenith.garbageside+1)%2);const n=[...C][0];let s=0;s=0===n?1:n===e.bm.ColumnWidth()-1?n-1:1===t.zenith.garbageside?n+1:n-1,C.add(s)}for(let n=0;n<e.W;n++){let s=r,i=o;C.has(n)?(s=t.setoptions.usebombs?"gbd":c,i=255):((C.has(n+1)||n===e.W-1)&&(i|=16),(C.has(n-1)||0===n)&&(i|=1)),f.push(s),b.push(i)}t.setoptions.usebombs&&"aboveUnclearable"===a&&(a="abovePerma");let y=0;switch(a){case"aboveStack":y=p();break;case"aboveUnclearable":y=h();break;case"abovePerma":y=d();break;default:y=e.T}m.shift(),g.shift(),m.splice(y-1,0,f),g.splice(y-1,0,b),e.am.AddRow(y);let x=!0,A=!0;if(u.tile||_.tile)for(let t=0;t<e.W;t++)_.tile&&C.has(t)&&(e.am.CreateActor(_.tile,t,y-1,_.anchor,{..._.data,firstOfRow:x}),x=!1),u.tile&&!C.has(t)&&(e.am.CreateActor(u.tile,t,y-1,u.anchor,{...u.data,firstOfRow:A}),A=!1);return t.board=m,t.boardedges=g,t.lastwasattack=!0,e.hm.H.stackdirty=!0,e.am.ProgressActors(),!0}function f(){if(!t.pause&&!e.fm.IsSleep()&&!o(t.falling.type,t.falling.x,t.falling.y,t.falling.r)){if(!o(t.falling.type,t.falling.x,t.falling.y-1,t.falling.r))return e.stm.LoseStockOrGameOver(e.gsm.setoptions.topoutisclear?"topout_clear":"topout");t.falling.y-=1,e.hm.H.fallingdirty=!0}}function b(){if(!t.pause&&!e.fm.IsSleep()&&!o(t.falling.type,t.falling.x,t.falling.y,t.falling.r))return o(t.falling.type,t.falling.x-1,t.falling.y,t.falling.r)?(t.falling.x-=1,void(e.hm.H.fallingdirty=!0)):o(t.falling.type,t.falling.x+1,t.falling.y,t.falling.r)?(t.falling.x+=1,void(e.hm.H.fallingdirty=!0)):e.stm.LoseStockOrGameOver(e.gsm.setoptions.topoutisclear?"topout_clear":"garbagesmash")}function C(){if(!t.pause&&!e.fm.IsSleep()&&!o(t.falling.type,t.falling.x,t.falling.y,t.falling.r))return o(t.falling.type,t.falling.x-1,t.falling.y,t.falling.r)?(t.falling.y+=1,void(e.hm.H.fallingdirty=!0)):e.stm.LoseStockOrGameOver(e.gsm.setoptions.topoutisclear?"topout_clear":"garbagesmash")}function y(){if(!l())return!1;return e.stm.LoseStockOrGameOver(t.setoptions.topoutisclear?"topout_clear":"garbagesmash"),!0}return{Resize:n,SetSize:function(s,i,o=i){const r=e.W,l=r-s,p=e.T-(i+o),h=l>0,d=p>0;t.setoptions.boardheight=i,t.setoptions.boardbuffer=o;for(let e=0;e<Math.abs(p);e++){for(const e of Object.values(t.actors))e.y=e.y+(d?-1:1);d?(t.board.shift(),t.boardedges.shift(),t.falling.y--,C()):(t.board.unshift(new Array(r).fill(null)),t.boardedges.unshift(new Array(r).fill(255)),t.falling.y++)}for(let e=0;e<Math.abs(l);e++){t.setoptions.boardwidth=t.setoptions.boardwidth+(h?-1:1);for(const e of Object.values(t.actors))e.x=e.x+(h?-1:1);for(const[e,s]of t.board.entries()){const i=1&(h?s.length-1:s.length),o=h?i?"pop":"shift":i?"push":"unshift",r=!h&&c(s),l=r?s.some((e=>"gbd"===e))?"gbd":"gb":null;let p=0;if(s[o](l),r){const n=i?t.boardedges[e].length-1:0,o=i?t.boardedges[e-1].length-1:0;e===t.board.length-1&&(p|=4),t.board[e-1]&&(c(t.board[e-1])?4&t.boardedges[e-1][o]&&(p|=64):p|=64),p|=i?16:1;const a=s[i?s.length-2:1];null===a&&(p|=i?1:16),"gb"===a&&(t.boardedges[e][n]^=i?16:1,4&t.boardedges[e][n]&&(p|=4),64&t.boardedges[e][n]&&(p|=64,t.boardedges[e-1][o]|=4))}t.boardedges[e][o](p),h&&(n(),a(),b())}}for(const e of Object.values(t.actors))e.x>this.W&&e.x--,e.y>this.T&&e.y--;n(),a(),e.am.RedrawActors(),e.hm.H.stackdirty=!0,e.hm.H.fallingdirty=!0},ColumnWidth:function(){return Math.max(0,e.W-(t.setoptions.garbageholesize-1))},GetFullLines:function(){const n=[];for(let s=0;s<e.T;s++)t.board[s].every((e=>null!==e&&"gbd"!==e))&&n.push(s);return n},SetupBoard:s,LoadMap:function(n){try{const s=(n=n.replace(/[\s\n\r]/g,"").toLowerCase()).split("?");n=s[0];const i=Object.keys(e.cm.constants.tetrominoes),o=s[1]?.split(",").filter((e=>i.includes(e)));if(t.hold=s?.[2]||null,i.includes(t.hold)||(t.hold=null),n.length%e.W!=0)return;for(t.bag.unshift.apply(t.bag,o??[]);t.bag.length<7;)e.bam.PopulateBag();const a=e.T-n.length/e.W;for(let s=0;s<n.length;s++){const i=a+Math.floor(s/e.W);let o=n[s];"_"===o&&(o=null),"#"===o&&(o="gb"),"@"===o&&(o="gbd"),t.board[i][s%e.W]=o}}catch{s(),t.hold=null,t.bag=[]}},BoardToMap:function(){let n="";for(let s=0;s<e.T;s++)for(let i=0;i<e.W;i++){const e=t.board[s][i];n+=null===e?"_":"gb"===e?"#":"gbd"===e?"@":e}const s=[];return t.started&&t.falling.type&&s.push(t.falling.type),s.push(...t.bag.slice(0,5)),s.length&&(n+=`?${s.toString()}`),n+=""+(t.hold?`?${t.hold}`:""),n},IsLegalAtPos:o,ClearIsLegalAtPosMemo:a,ClearEdges:function(){const n=[];for(let t=0;t<e.T;t++){const t=[];for(let n=0;n<e.W;n++)t.push(255);n.push(t)}t.boardedges=n},IsOccupied:r,IsOccupiedInv:function(n,s){if(!(Math.round(n)<0||Math.round(n)>=e.W||Math.round(s)<0||Math.round(s)>=e.T||void 0===t.board[Math.round(s)]))return null!==t.board[Math.round(s)][Math.round(n)]},IsFull:l,IsEmpty:function(){return t.board.every((e=>e.every((e=>null===e))))},IsEmptyWithPerma:function(){return t.board.every((e=>e.every((e=>[null,"gbd"].includes(e)))))},IsEmptyWithUnclearable:function(){return t.board.every((e=>e.every((e=>[null,"gbd"].includes(e)))||e.every((e=>["gb","gbd"].includes(e)))))},IsUncolored:function(){return t.board.every((e=>e.every((e=>[null,"gb","gbd"].includes(e)))))},RowHasGarbage:c,HighestLine:p,HighestLineOfGarbage:function(){for(let n=0;n<e.T;n++)if(t.board[n].some((e=>"gb"===e||"gbd"===e)))return n;return e.T},HighestLineOfUnclearables:h,HighestLineOfPerma:d,CountGarbageLines:function(){let n=0;for(let s=0;s<e.T;s++)t.board[s].some((e=>["gb","gbd"].includes(e)))&&n++;return n},CountGarbageLinesNoPerma:function(){let n=0;for(let s=0;s<e.T;s++)t.board[s].some((e=>"gb"===e))&&n++;return n},PushActiveToStack:function(){return u(t.falling.type,t.falling.x,t.falling.y,t.falling.r,!0)},PushTetrominoToStack:u,GetTilesAndNextYForPiece:m,PieceMayLockHere:function(n,s,i,o){const a=m(n,s,i,o);if(a.besty<e.B&&!t.setoptions.nolockout)return!1;const r=e.atm.GetPendingGarbageCount(!0),l=Math.min(r,e.atm.GetGarbageCap()),c=t.bag[0],p=e.cm.GetPieceOffset(c),h=e.cm.GetPieceSpawnRotation(c),d=m(c,Math.ceil(e.W/2)-1+p[h][0],e.B-2.04+p[h][1]+l,h);let u=!1;return a.shadowTiles.forEach((e=>{d.shadowTiles.includes(e)&&(u=!0)})),d.shadowTilesArr.forEach((n=>{(n[0]>=e.T||null!==t.board[n[0]][n[1]])&&(u=!0)})),!u},PieceMaySpawnHere:function(t,n,s,i){const a=e.atm.GetPendingGarbageCount(!0);return o(t,n,s+Math.min(a,e.atm.GetGarbageCap()),i)},RemoveLinesFromStack:function(n,s="line_burst",i=!1){const o=[...t.board],a=[...t.boardedges];n.sort(((e,t)=>t-e));for(let e=0;e<n.length;e++){if(a[n[e]-1])for(let t=0;t<a[n[e]-1].length;t++)a[n[e]-1][t]|=4;if(a[n[e]+1])for(let t=0;t<a[n[e]+1].length;t++)a[n[e]+1][t]|=64}for(let t=0;t<n.length;t++)o.splice(n[t],1),a.splice(n[t],1),e.c.OnClient((()=>e.fxm.ExplodeLine(n[t],s)));for(let t=n.length-1;t>=0;t--)e.am.RemoveRow(n[t]);for(;o.length<e.T;){const t=[],n=[];for(let s=0;s<e.W;s++)t.push(null),n.push(255);o.unshift(t),a.unshift(n)}if(t.board=o,t.boardedges=a,i){const s=Math.max(t.setoptions.lineclear_are/1.5);for(let i=0;i<n.length;i++)for(let o=0;o<e.W;o++){const a=s*(Math.abs(t.falling.x-o)/e.W)*(.8+.4*t.rngex.nextFloat());e.wfm.WaitFrames(Math.max(1,Math.min(t.setoptions.lineclear_are,Math.ceil(a))),"clearanim",[n[i],o])}e.wfm.WaitFrames(t.setoptions.lineclear_are,"are_collapse",{line:n[0]})}else e.hm.H.stackdirty=!0},PushLine:g,PushUpFallingIfNeeded:f,MoveFallingHorizontallyIfNeeded:b,CheckStackAgainstMap:function(n){if((n=n.replace(/[\s\n\r]/g,"")).length%e.W!=0)return!1;const s=e.T-n.length/e.W;for(let i=0;i<n.length;i++){const o=s+Math.floor(i/e.W),a=i%e.W,r=n[i];if(!t.board[o])return!1;if("*"!==r){if("_"===r&&null!==t.board[o][a])return!1;if("_"!==r&&null===t.board[o][a])return!1}}return!0},AreWeToppedYet:y,DestroyBoard:function(){t.impendingdamage=[];for(let n=0;n<e.T;n++)for(let s=0;s<e.W;s++)null!==t.board[n][s]&&(e.c.OnClient((()=>{if(e.hm.IsFullMode()&&("high"===ot.video.graphics||"ultra"===ot.video.graphics)){const i=nc(e.hm.H.stackobj,s*ws(_c.x)+ws(_c.x/2),(n-e.B)*ws(_c.x)+ws(_c.x/2)),o=e.cm.GetMinoColor(t.board[n][s]);xl.play("mino_dust",{x:i.x,y:i.y,s:e.hm.S(),color:o})}})),t.board[n][s]=null);e.am.DestroyAllActors(),e.c.OnClient((()=>{e.hm.H.stackdirty=!0,e.pbm.UpdateGarbageBar("impending")}))},BlackoutBoard:function(){t.impendingdamage=[];for(let n=0;n<e.T;n++)for(let s=0;s<e.W;s++)null!==t.board[n][s]&&(t.board[n][s]=t.rngex.nextFloat()<.5?"gb":"gbd",e.c.OnClient((()=>{if(e.hm.IsFullMode()&&("high"===ot.video.graphics||"ultra"===ot.video.graphics)){const i=nc(e.hm.H.stackobj,s*ws(_c.x)+ws(_c.x/2),(n-e.B)*ws(_c.x)+ws(_c.x/2)),o=e.cm.GetMinoColor(t.board[n][s]);xl.play("mino_dust",{x:i.x,y:i.y,s:e.hm.S(),color:o})}})));e.am.DestroyAllActors(),e.c.OnClient((()=>{e.hm.H.stackdirty=!0,e.pbm.UpdateGarbageBar("impending")}))},ProcessGarbageARE:function(){if(t.pause||e.fm.IsSleep())return;if(!t.garbageareentries.length||e.esm.frame<t.garbagearelockeduntil)return;const n=t.garbageareentries.shift();y()||(g(n),a(),f(),e.hm.H.fallingdirty=!0,e.zthm.IncrementPrompt("tank",1),t.cancelstreak=Math.max(0,t.cancelstreak-3),t.lasttanktime=e.esm.frame,t.zenith.staletime=e.esm.frame,t.zenith.stalepieces=0,e.c.OnClient((()=>{e.gpm.Vibrate(mi.GARBAGERISE),e.sfx.Play("garbagerise")})),t.garbagearelockeduntil=e.esm.frame+t.setoptions.garbageare)}}},I=function(e){"use strict";const t=e.gsm;return{IsInactive:function(n,s,i=!1){if(t.falling.x>=n-2&&t.falling.x<=n+2&&(t.falling.y>=s-2&&t.falling.y<=s+2||e.sdm.H.lastLegal>=s-2&&e.sdm.H.lastLegal<=s+2))return!1;const o=e.bm.IsOccupiedInv(n,s);return i?[[n-2,s-2],[n-1,s-2],[n+0,s-2],[n+1,s-2],[n+2,s-2],[n-2,s-1],[n-1,s-1],[n+0,s-1],[n+1,s-1],[n+2,s-1],[n-2,s+0],[n-1,s+0],[n+1,s+0],[n+2,s+0],[n-2,s+1],[n-1,s+1],[n+0,s+1],[n+1,s+1],[n+2,s+1],[n-2,s+2],[n-1,s+2],[n+0,s+2],[n+1,s+2],[n+2,s+2]].every((t=>{const n=e.bm.IsOccupiedInv(t[0],t[1]);return n===o||void 0===n})):[[n-1,s-1],[n+0,s-1],[n+1,s-1],[n-1,s+0],[n+1,s+0],[n-1,s+1],[n+0,s+1],[n+1,s+1]].every((t=>{const n=e.bm.IsOccupiedInv(t[0],t[1]);return n===o||void 0===n}))}}},E=function(e){"use strict";return{OnClient:function(t){e.iom.IsHeadless()||Ut(t)},OnServer:function(t){e.iom.IsHeadless()?t():Xt(t)},IsServer:function(t=!1){return!(t||!e.iom.IsHeadless())||jt()}}};class M extends k{_constants={};constructor(e){super(e),this._constants_overrides={}}get constants(){return this._constants}get overrides(){return this._constants_overrides}get kickset(){return this._constants.kickset??this._constants.kicksets[this.options.kickset]??this._constants.kicksets["SRS+"]}GetMinoColor(e){return Ac.getColor(this.options.minoskin[e]||this.options.minoskin.other,this.GetPieceColor(e))}GetPieceColor(e){return this.kickset.color_overrides[e]??this._constants.tetrominoes_color[e]}GetPieceKickset(e){const t=this._constants.tetrominoes[e];let n=this.kickset;return t.kickset_override&&t.kickset_override in this._constants.kicksets&&(n=this._constants.kicksets[t.kickset_override]),!(t.disallow_kick&&!n.allow_o_kick)&&(t.kickset_special?n[`${t.kickset_special}_kicks`]??n.kicks:n.kicks)}GetPieceOffset(e){return this.kickset.additional_offsets[e]??Array(4).fill([0,0])}GetPieceSpawnRotation(e){return this.kickset.spawn_rotation[e]??0}SetConstantsOverrides(e){for(const[t,n]of Object.entries(e))this._constants_overrides[t]=n}Reload(){0===Object.keys(this._constants_overrides).length?this._constants=w:(this._constants=qt(w),Object.assign(this._constants,this._constants_overrides))}}const D=function(e){"use strict";const t=e.gsm;return{UpdateCounter:function(n,s){for(let i=1;i<=5;i++)t.setoptions[`slot_counter${i}`]===n&&e.hm.H.board.el(`counter${i}`).update(s)},UpdateCounterTitle:function(n,s){for(let i=1;i<=5;i++)t.setoptions[`slot_counter${i}`]===n&&e.hm.H.board.el(`counter${i}`).update(void 0,void 0,s)},UpdateCounterSubtitle:function(n,s){for(let i=1;i<=5;i++)t.setoptions[`slot_counter${i}`]===n&&e.hm.H.board.el(`counter${i}`).update(void 0,s)}}};class O extends k{static DisplayCounters={timer:"time",stopwatch:"time",level:"level",lines:"lines",allclears:"all clears",hold:"hold",pieces:"pieces",pieces_duo:"pieces",finesse_l:"finesse",finesse:"finesse",keys:"inputs",score:"score",spp:"score",garbage:"garbage",attack:"attack",attack_duo:"attack",vs:"VS score",kills:"KO's",kills_duo:"KO's",placement:"placement"};static DisplayCountersList=Object.keys(this.DisplayCounters);constructor(e){super(e),this.frozen=!1}IsFrozen(){return this.frozen}StartStopwatch(){this.S.time.start=performance.now(),this.S.time.zero=!1}DisplayCounts(){if(!this.IsServer()&&!this.S.destroyed){for(const[e,t]of this.self.stam.GetSlotCounters())this.self.hm.H.board.el(`counter${e}`).update(void 0,void 0,O.DisplayCounters[t]);(this.options.b2bchaining||this.options.b2bcharging)&&this.S.stats.btb>1&&this.self.hm.H.board.el("b2b").create(this.S.stats.btb-1)}}UpdateCounts(){if(this.IsServer())return;if(this.S.destroyed)return;if(this.IsFrozen())return;const e=this.options,t=this.S.stats,n=this.self.atm.GetPendingGarbageCount();if(this.self.pbm.UpdateBar("impending",n/this.H),this.self.pbm.UpdateGarbageBar("impending"),this.self.pbm.UpdateBarTicker("impending","garbagecap",this.self.atm.GetGarbageCap()/this.H),this.self.pbm.UpdateBarTicker("impending","garbageabsolutecap",this.self.atm.GetGarbageAbsoluteCap()/this.H),e.zenlevels?this.self.pbm.UpdateBar("progress",t.zenprogress):e.levels&&!e.absolute_lines?this.self.pbm.UpdateBar("progress",t.level_lines/t.level_lines_needed):"lines"===e.objective_type?this.self.pbm.UpdateBar("progress",t.lines/e.objective_count):"garbage"===e.objective_type&&this.self.pbm.UpdateBar("progress",t.garbage.cleared/e.objective_count),!this.self.hm.IsFullMode())return;this.self.esm.frame%60==0&&(Yl=!0),e.display_zen&&this.self.hm.H.board.el("zen").update(t.score,t.zenlevel),e.levels&&!e.absolute_lines?this.self.ctm.UpdateCounter("lines",`${t.level_lines}\f3/${t.level_lines_needed}`):"lines"===e.objective_type?(this.self.ctm.UpdateCounter("lines",`${t.lines}\f3/${e.objective_count}`),e.pro&&(this.self.hm.H.board.el("backer").update(`${Math.max(0,e.objective_count-t.lines)}`),this.self.hm.H.board.el("stackhint").update(Math.max(0,e.objective_count-t.lines)))):this.self.ctm.UpdateCounter("lines",t.lines);let s=t.level;if(e.masterlevels&&t.level>20&&(s="M"+(t.level-20)),this.UpdateVSStats(),"garbage"===e.objective_type?(this.self.ctm.UpdateCounter("garbage",`${t.garbage.cleared}\f3/${e.objective_count}`),e.pro&&(this.self.hm.H.board.el("backer").update(`${Math.max(0,e.objective_count-t.garbage.cleared)}`),this.self.hm.H.board.el("stackhint").update(Math.max(0,e.objective_count-t.garbage.cleared)))):this.self.ctm.UpdateCounter("garbage",t.garbage.cleared),this.self.ctm.UpdateCounter("level",s),this.self.ctm.UpdateCounter("score",t.score.toLocaleString("en-US")),this.self.ctm.UpdateCounter("kills",t.kills),this.self.ctm.UpdateCounter("placement",`\f3#\f5${this.S.placement}`),this.self.ctm.UpdateCounter("keys",`${t.inputs}\f3, ${(t.inputs/Math.max(1,t.piecesplaced)).toFixed(2)}/P`),this.self.ctm.UpdateCounter("spp",`${t.score.toLocaleString("en-US")}\f3, ${Math.round(t.score/Math.max(1,t.piecesplaced)).toLocaleString("en-US")}/P`),this.self.ctm.UpdateCounter("finesse",`${t.finesse.combo}\f3, ${(t.finesse.perfectpieces/Math.max(1,t.piecesplaced)*100).toFixed(2)}%`),this.self.ctm.UpdateCounterSubtitle("finesse",`${t.finesse.faults} fault${1===t.finesse.faults?"":"s"}`),this.self.ctm.UpdateCounter("finesse_l",`${t.finesse.combo}\f3, ${(t.finesse.perfectpieces/Math.max(1,t.piecesplaced)*100).toFixed(2)}%,${t.finesse.faults}F`),this.self.ctm.UpdateCounter("hold",`${t.holds}\f3, ${(t.holds/Math.max(1,t.piecesplaced)*100).toFixed(2)}%`),this.self.ctm.UpdateCounter("allclears",t.clears.allclear),e.zenith_duo&&this.self.zthm.duoOtherSideGame){this.self.ctm.UpdateCounter("kills_duo",t.kills+this.self.zthm.duoOtherSideGame.state.stats.kills)}e.zenith&&"doublehole_reversed"===e.zenith_mods[0]&&this.self.hm.H.board.el("stackhint").update(this.T-this.self.bm.HighestLineOfGarbage()),or&&(this.self.ctm.UpdateCounterTitle("kills","canceling sickness"),this.self.ctm.UpdateCounter("kills",this.S.cancelstreak))}UpdateTimers(){if(this.S.time.locked)return;const e=this.S.time,t=this.options,n=e.zero?0:(this.self.esm.frame-e.frameoffset)/60*1e3,s=Math.max(0,(t.objective_time||0)-n);let i=wt(n);parseInt(i.m)>=60&&(i.m=`${Math.floor(parseInt(i.m)/60)}:${(parseInt(i.m)%60).toString().padStart(2,"0")}`),this.self.ctm.UpdateCounter("stopwatch",ot.video.lowrescounters||"minimal"===ot.video.graphics?`${i.m}:${i.s}`:`${i.m}:${i.s}\f3.${i.ms}`),i=wt(s),this.self.ctm.UpdateCounter("timer",ot.video.lowrescounters||"minimal"===ot.video.graphics?`${i.m}:${i.s}`:`${i.m}:${i.s}\f3.${i.ms}`);const o=wt(1e3*Math.ceil(s/1e3));"timed"===t.objective_type&&t.pro&&(o.m>=10||"minimal"!==ot.video.graphics&&"off"!==ot.video.actiontext&&"some"!==ot.video.actiontext&&"0"===o.m&&o.s<=10?this.self.hm.H.board.el("backer").update(""):this.self.hm.H.board.el("backer").update(`${"0"===o.m?"":o.m}:${o.s}`))}UpdateVSStats(){if(this.S.time.locked)return;const e=this.S.stats,t=this.self.esm.frame-this.S.time.frameoffset,n=t/60||1,s=t/3600||1,i=(e.garbage.attack+e.garbage.cleared)/Math.max(1,e.piecesplaced)*(e.piecesplaced/n)*100;if(this.self.ctm.UpdateCounter("pieces",ot.video.lowrescounters||"minimal"===ot.video.graphics?`${e.piecesplaced}\f3, ${(e.piecesplaced/n).toFixed(1)}/S`:`${e.piecesplaced}\f3, ${(e.piecesplaced/n).toFixed(2)}/S`),this.self.ctm.UpdateCounter("attack",ot.video.lowrescounters||"minimal"===ot.video.graphics?`${e.garbage.attack}\f3, ${Math.round(e.garbage.attack/s)}/M`:`${e.garbage.attack}\f3, ${(e.garbage.attack/s).toFixed(2)}/M`),this.self.ctm.UpdateCounter("vs",ot.video.lowrescounters||"minimal"===ot.video.graphics?`${Math.floor(i)}`:`${Math.floor(i)}\f3.${Math.floor(100*(i-Math.floor(i))).toString().padStart(2,"0")}`),this.options.zenith_duo&&this.self.zthm.duoOtherSideGame){const t=this.self.zthm.duoOtherSideGame.state;this.self.ctm.UpdateCounter("pieces_duo",ot.video.lowrescounters||"minimal"===ot.video.graphics?`${e.piecesplaced+t.stats.piecesplaced}\f3, ${((e.piecesplaced+t.stats.piecesplaced)/n).toFixed(1)}/S`:`${e.piecesplaced+t.stats.piecesplaced}\f3, ${((e.piecesplaced+t.stats.piecesplaced)/n).toFixed(2)}/S`),this.self.ctm.UpdateCounter("attack_duo",ot.video.lowrescounters||"minimal"===ot.video.graphics?`${e.garbage.attack+t.stats.garbage.attack}\f3, ${Math.round((e.garbage.attack+t.stats.garbage.attack)/s)}/M`:`${e.garbage.attack+t.stats.garbage.attack}\f3, ${((e.garbage.attack+t.stats.garbage.attack)/s).toFixed(2)}/M`),this.self.ctm.UpdateCounter("kills_duo",e.kills+t.stats.kills)}}FinalizeTimer(e){let t=wt(e);this.self.ctm.UpdateCounter("stopwatch",ot.video.lowrescounters||"minimal"===ot.video.graphics?`${t.m}:${t.s}`:`${t.m}:${t.s}\f3.${t.ms}`),t=wt(0),this.self.ctm.UpdateCounter("timer",ot.video.lowrescounters||"minimal"===ot.video.graphics?`${t.m}:${t.s}`:`${t.m}:${t.s}\f3.${t.ms}`)}}class P extends k{static _EVENTKEYS=["keydown","gpdown","keyup","gpup"];static _KEYBINDS=new Set(["moveLeft","moveRight","rotate180","rotateCCW","rotateCW","softDrop","hardDrop","hold","retry","exit"]);constructor(e,t,n=null){super(e),this._type=t,this._gameid=null,this._replay=n,this._binds=new Map,this._keys=new Set,this._listeners=new Map,this._events=[],this._frame=0,this._frameLength=1e3/60,this._frameDiffs=[],this._lastFrameTime=0,this._lastProvision=15,this._provision=0,this._Setup()}get replay(){return this._replay}get frame(){return this._frame}get gameid(){return this._gameid}set gameid(e){this._gameid=e}_Setup(){switch(this._type){case"keyboard":for(const[e,t]of P._EVENTKEYS.entries()){const n=(e>=2?this._RawKeyUp:this._RawKeyDown).bind(this);this._binds.set(t,n),document.addEventListener(t,n)}if(this.socket){const e=e=>this.Push("ige",...e.iges);this._binds.set("ige",e),this.socket.SetFasterPing(!0),this.socket.on("game.replay.ige",e)}break;case"socket":{const e=this._OnReplayData.bind(this);this._binds.set("replay",e),this.socket.on("game.replay",e);break}}}_OnReplayData(e){this._gameid===e.gameid&&(this._events.push.apply(this._events,e.frames),this._lastProvision=e.provisioned-this._provision,this._provision=e.provisioned,e.frames.some((e=>"end"===e.type))&&this._provision++)}_RawKeyDown(e){if(e.repeat&&!(e.shiftKey||e.ctrlKey||e.altKey))return;if(document.body.classList.contains("chatfocus")||Ji>=1)return;if(!e.detail&&e.target.closest("#zen_panel_content"))return;const t=yt(e);if(this._keys.has(t))return;this._keys.add(t);let n=0;if(this._lastFrameTime){const t=Math.min(performance.now(),e.timeStamp)-this._lastFrameTime,s=Math.floor(t/this._frameLength*10);n=Math.max(0,s/10)}if(e.ctrlKey)switch(e.key){case"z":case"Z":case"y":case"Y":return this._events.push({frame:this._frame+Math.floor(n),type:"keydown",data:{key:"z"===e.key.toLowerCase()?"undo":"redo",subframe:10*n%10/10}}),e.preventDefault()}for(const[s,i]of Object.entries(rt))i.includes(t)&&P._KEYBINDS.has(s)&&(this._events.push({frame:this._frame+Math.floor(n),type:"keydown",data:{key:s,subframe:10*n%10/10}}),"retry"===s?this.self.gom.Retry():"exit"===s&&this.self.gom.Forfeit(),e.detail||e.preventDefault())}_RawKeyUp(e){if(document.body.classList.contains("chatfocus")||Ji>=1)return;if(!e.detail&&e.target.closest("#zen_panel_content"))return;const t=yt(e);if(!this._keys.has(t))return;let n=0;if(this._lastFrameTime){const t=Math.min(performance.now(),e.timeStamp)-this._lastFrameTime,s=Math.floor(t/this._frameLength*10);n=Math.max(0,s/10)}this._keys.delete(t);for(const[s,i]of Object.entries(rt))i.includes(t)&&P._KEYBINDS.has(s)&&(this._events.push({frame:this._frame+Math.floor(n),type:"keyup",data:{key:s,subframe:10*n%10/10}}),e.detail||e.preventDefault())}GetBehindness(){return!!this.IsSocketLike()&&(this._provision-this._frame)/this._lastProvision}IsReplay(){return"replay"===this._type}IsSocket(){return"socket"===this._type}IsKeyboard(){return"keyboard"===this._type}IsPipe(){return"pipe"===this._type}IsSocketLike(){return"socket"===this._type||"pipe"===this._type}IsFinished(){return!!this.IsReplay()&&this._frame>this._replay.frame}IsNextFrameReady(){return!this.IsSocketLike()||this._provision>this._frame}IsFallingBehind(){return!!this.IsSocketLike()&&this._provision>this._frame+60}_gameIDContext=0;get gameIDContext(){return this.IsReplay()?this._gameIDContext?this._gameIDContext:(this._gameIDContext=ea,ea):0}Start(){if(this.IsSocketLike())return;const e=new Set,t=[];for(const n of this._events)"keydown"!==n.type?"keyup"!==n.type?t.push(n):e.delete(n.data.key):e.add(n.data.key);for(const n of e)t.push({frame:this._frame,type:"keydown",data:{key:n,hoisted:!0,subframe:0}});this._events=t}AdvanceFrame(){if(this._frame++,!this.IsKeyboard())return;if(this._events.length)return this._lastFrameTime+=this._frameLength;const e=performance.now(),t=e-this._lastFrameTime;t>=1e3/90&&t<=40&&(this._frameDiffs.push(t),this._frameDiffs.length>10&&(this._frameDiffs.shift(),this._frameLength=this._frameDiffs.reduce(((e,t)=>e+t))/10)),this._lastFrameTime=e}AmountToCatchUp(){return this.IsReplay()?this._replay.frame-this._frame:this.IsSocketLike()?this._provision-this._frame:0}Emit(e){this._listeners.get(e.type)?.forEach((t=>t(e)))}On(e,t){const n=this._listeners.get(e);if(!n)return this._listeners.set(e,[t]);n.push(t)}Pull(){switch(this._type){case"replay":this._replay.GetEventsAtFrame(this._frame).forEach(this.Emit.bind(this));break;case"keyboard":case"socket":case"pipe":{const e=[];for(const t of this._events)t.frame!==this._frame?e.push(t):this.Emit(t);this._events=e;break}}}Push(e,...t){for(const n of t)this._events.push({frame:this._frame,type:e,data:n})}Pipe(e){e.gameid=this._gameid,this._OnReplayData(e)}Seek(e){this._frame=e,this._events.length=0,this._provision=15}Destroy(){if(this._listeners.clear(),this.IsKeyboard())for(const e of P._EVENTKEYS.values())document.removeEventListener(e,this._binds.get(e));this._binds.has("ige")&&this.socket?.off("game.replay.ige",this._binds.get("ige")),this._binds.has("replay")&&this.socket?.off("game.replay",this._binds.get("replay"))}}const H=function(e){"use strict";const t=e.gsm;let n=new Map;const s=["interaction","action"];return{emit:function(i,...o){const a=n.get(i);if(!a)return;let r;for(let e=a.length-1;e>=0;--e){const t=a[e].cb(...o);if(a[e].once&&a.splice(e,1),void 0!==t&&(r=t),t===H.BREAK)return t}return!t.setoptions.noreplay&&s.includes(i)&&e.iom.replay.FlushNextFrame(),r},on:function(t,s,i,o=!1){let a=n.get(t);a||(a=[],n.set(t,a)),"function"==typeof s&&(o=i,i=s,s=void 0),a.unshift({id:s,cb:i.bind(e.parent),orig_cb:i,once:o})},once:function(...e){this.on(...e,!0)},remove:function(e,t){if(!e)return void n.clear();if(!t)return void n.set(e,[]);const s=n.get(e);s&&n.set(e,s.filter((e=>e.id!==t)))},Export:function(){return n},Import:function(t){n=t;for(const t of n.values())for(const n of t)n.cb=n.orig_cb.bind(e.parent)}}};H.BREAK=Symbol();class R extends k{static init(){this.ROTATION_LEFT=1,this.ROTATION_RIGHT=2,this.ROTATION_180=4,this.ROTATION_SPIN=8,this.ROTATION_MINI=16,this.ROTATION_SPIN_ALL=32,this.ROTATION_ALL=this.ROTATION_LEFT|this.ROTATION_RIGHT|this.ROTATION_180|this.ROTATION_SPIN|this.ROTATION_MINI|this.ROTATION_SPIN_ALL,this.STATE_WALL=64,this.STATE_SLEEP=128,this.STATE_FLOOR=256,this.STATE_NODRAW=512,this.STATE_ALL=this.STATE_WALL|this.STATE_SLEEP|this.STATE_FLOOR|this.STATE_NODRAW,this.ACTION_IHS=1024,this.ACTION_FORCELOCK=2048,this.ACTION_SOFTDROP=4096,this.ACTION_MOVE=8192,this.ACTION_ROTATE=16384,this.FLAGS_COUNT=15}get piece(){return this.S.falling}get pieceObj(){return this.self.hm.H.fallingobj}GetPieceDefinition(e,t,n=!1){const s=this.self.cm.constants.tetrominoes[e];if(!s)return null;const{dx:i,dy:o}=s.matrix,a=s.matrix.data[t];let r=a;if(this.piece.skip.length&&!n&&this.piece.type===e){r=[];for(const[e,t]of a.entries())this.S.falling.skip.includes(e)||r.push(t)}return{data:r,dx:i,dy:o}}GetPiecePreviewDefinition(e){const t=this.self.cm.kickset;if(t.preview_overrides[e])return{data:t.preview_overrides[e]};const n=this.self.cm.constants.tetrominoes[e];return n?{data:n.preview.data}:null}GetEffectiveGravity(){return this.S.glock<=0?this.S.g:this.S.glock<=180?(1-this.S.glock/180)**2*this.S.g:0}HasHitWall(){return!!(this.piece.flags&R.STATE_WALL)}HasRotated(){return!!(this.piece.flags&(R.ROTATION_LEFT|R.ROTATION_RIGHT))}HasRotated180(){return!!(this.piece.flags&R.ROTATION_180)}IsSpin(){return!!(this.piece.flags&R.ROTATION_SPIN)}IsSpinMini(){return!(~this.piece.flags&(R.ROTATION_SPIN|R.ROTATION_MINI))}IsSpinAll(){return!!(this.piece.flags&R.ROTATION_SPIN_ALL)}IsSleep(){return!!(this.piece.flags&R.STATE_SLEEP)}IsFloored(){return!!(this.piece.flags&R.STATE_FLOOR)}IsVisible(){return!(this.piece.flags&R.STATE_NODRAW)}IsSoftdropped(){return!!(this.piece.flags&R.ACTION_SOFTDROP)}IsIHS(){return!!(this.piece.flags&R.ACTION_IHS)}WasMoved(){return!!(this.piece.flags&R.ACTION_MOVE)}WasRotated(){return!!(this.piece.flags&R.ACTION_ROTATE)}IsInBoard(){return this.piece.y>=this.self.B}Is20G(){const e=this.options.version;if(e<17)throw new Error("The 20G check should not be called before TETR.IO engine version 17. Report this to the programmers.");const t=this.options.boardheight,n=this.GetEffectiveGravity()>=t,s=!(e>=18)||this.S.setoptions.gravitymay20g;if(this.S.inputSoftdrop){const i=!(e>=18)||this.S.handling.may20g||n&&s;return(41===this.S.handling.sdf||this.GetEffectiveGravity()*this.S.handling.sdf>=t)&&i}return n&&s}IsForcedToLock(){return!!(this.piece.flags&R.ACTION_FORCELOCK)}ShouldLock(){return!this.options.infinite_movement&&this.piece.lockresets>=this.options.lockresets}ShouldFallFaster(){if(this.options.infinite_movement)return!1;return this.piece.rotresets>this.options.lockresets+15}ClearFlags(e){this.piece.flags&=~e}_ClampRotation(e){return((this.piece.r+e)%4+4)%4}_InternalLocking(e=1-this.S.subframe){return this.piece.locking+=this.options.version>=15?e:1,this.IsFloored()||(this.piece.flags|=R.STATE_FLOOR,this.sfx.Play("hit")),this.piece.locking>this.options.locktime||(!!this.IsForcedToLock()||this.ShouldLock())}_InternalFall(e){const t=this.piece,{type:n,x:s,y:i,r:o}=t;let a=Math.round(1e6*(i+e))/1e6;a%1==0&&(a+=1e-6);let r=i+1;if(r%1==0&&(r-=2e-6),!this.self.bm.IsLegalAtPos(n,s,a,o)||!this.self.bm.IsLegalAtPos(n,s,r,o))return!1;const{hy:l,y:c}=t;return l<a&&(t.hy=Math.ceil(a)),t.y=a,t.flags&=~R.STATE_FLOOR,this.self.am.ProgressActorByType("voidhole"),this.OnClient((()=>{Math.ceil(a)!==Math.ceil(c)&&(this.self.hm.H.fallingdirty=!0)})),(a>l||this.options.infinite_movement)&&(t.lockresets=0,t.rotresets=0),!this.IsSleep()}_InternalFinesse(){const{type:e,keys:t,x:n,r:s}=this.piece,i=this.self.cm.constants.finesse[e];let o=Math.max(0,i?t-(i[s.toString()][n+1]||0):0);return this.IsSoftdropped()&&(o=0),this.S.stats.finesse.faults+=o,this.S.stats.finesse.combo++,o>0?(this.S.stats.finesse.combo=0,!1):(this.S.stats.finesse.perfectpieces++,!0)}_InternalLockout(e){if(this.options.nolockout)return;if(!e||!1===this.options.clutch)return this.self.stm.LoseStockOrGameOver(this.options.topoutisclear?"topout_clear":"topout");if(this.IsServer())return;const t=ot.video;this.sfx.Play("clutch"),"minimal"!==t.graphics&&"off"!==t.actiontext&&"some"!==t.actiontext&&this.self.hm.H.board.fx("clutch").create("CLUTCH")}_InternalDCD(){if(!this.HasHitWall()||!this.S.handling.dcd)return;const e=this.S;e.lShift.das=Math.min(e.lShift.das,e.handling.das-e.handling.dcd),e.lShift.arr=e.handling.arr,e.rShift.das=Math.min(e.rShift.das,e.handling.das-e.handling.dcd),e.rShift.arr=e.handling.arr}_InternalRotate(e,t,n,s,{index:i=0,kx:o=0,ky:a=0}={},r=!1){const l=this.piece;s>=2?(s=n>l.r?1:-1,l.flags|=R.ROTATION_180,this.S.zenith.was180Used=!0):1===s?this.S.zenith.wasCWUsed=!0:this.S.zenith.wasCCWUsed=!0,l.x=e,l.y=t,l.r=n,l.flags|=1===s?R.ROTATION_RIGHT:R.ROTATION_LEFT,l.flags&=~(R.ROTATION_SPIN|R.ROTATION_MINI|R.ROTATION_SPIN_ALL),l.kick=i,l.lockresets<31&&l.lockresets++,l.rotresets<63&&l.rotresets++;const c=this.self.rbm.IsTSpin();if(c?l.flags|=R.ROTATION_SPIN|("mini"===c&&R.ROTATION_MINI):this.options.zenith_duo&&(l.flags|=this.self.rbm.IsTSpin("all")&&R.ROTATION_SPIN_ALL),this.self.hm.H.fallingdirty=!0,this.S.totalRotations++,this.sfx.Play(r?"irs":"rotate"),this.self.zthm.IncrementPrompt("rotate"),"t"===l.type&&this.self.zthm.NixPrompt("tnorotate"),this._InternalDCD(),this.ShouldLock()||(l.locking=0),!this.IsServer()&&c&&(this.sfx.Play("spin"),this.self.gpm.Vibrate(mi.SPIN),this.self.hm.H.holderstate.dr+=s/4*this.self.lm.H.lastdT,this.self.hm.IsFullMode())){const i={direction:1===s?"right":"left",kx:o,ky:a};this.HasRotated180()&&(i.direction=n%2==0?"vertical":"horizontal"),this.self.fxm.EffectAtTetromino("piece_spin",i,this.pieceObj,l.type,e,t,n)}}Fall(e=1-this.S.subframe){if(this.piece.safelock>0&&this.piece.safelock--,this.S.pause)return;if(this.IsSleep())return;const t=this.options,n=t.version,{type:s,x:i,y:o,r:a}=this.piece;let r=this.GetEffectiveGravity()*e;this.S.glock>0&&(this.S.glock-=e,this.S.glock<0&&(this.S.glock=0)),this.S.inputSoftdrop&&(this.S.handling.sdf==(n>=15?41:21)?r=(n>=15?400:20)*e:(r*=this.S.handling.sdf,r=Math.max(r,n>=13?.05*this.S.handling.sdf:.42))),this.ShouldLock()&&!this.self.bm.IsLegalAtPos(s,i,o+1,a)&&(r=20,this.piece.flags|=R.ACTION_FORCELOCK),this.ShouldFallFaster()&&(r+=.5*e*(this.piece.rotresets-(t.lockresets+15)));for(let t=r;t>0;t-=Math.min(1,t)){const{y:n}=this.piece;if(!this._InternalFall(Math.min(1,t)))return void(this._InternalLocking(e)&&(this.S.handling.safelock&&(this.piece.safelock=7),this.Lock()));Math.ceil(n)!==Math.ceil(this.piece.y)&&(this.piece.flags&=~R.ROTATION_ALL,this.S.inputSoftdrop&&(this.S.stats.score+=this.self.cm.constants.scoring.SOFTDROP,this.options.zenlevels&&(this.S.stats.zenprogress+=this.self.znm.ScoreToZenProgress(this.self.cm.constants.scoring.SOFTDROP,this.S.stats.zenlevel)),this.sfx.Play("softdrop")))}}Harddrop(){if(!this.S.pause&&!this.IsSleep())for(this.OnClient((()=>{this.self.gpm.Vibrate(mi.HARDDROP),this.sfx.Play("harddrop")}));;){if(!this._InternalFall(1))return this.OnClient((()=>{if(!this.self.hm.IsFullMode())return;if(0===this.self.lm.H.soundSkipRate)return;const{type:e,x:t,y:n,r:s}=this.piece;xl.play("bgsplash",{direction:180,amt:5}),this.self.fxm.EffectAtTetrominoEdge("harddrop_edge",{},this.pieceObj,e,t,n,s)})),this._InternalLocking(1),this.Lock();this.S.stats.score+=this.self.cm.constants.scoring.HARDDROP,this.options.zenlevels&&(this.S.stats.zenprogress+=this.self.znm.ScoreToZenProgress(this.self.cm.constants.scoring.HARDDROP,this.S.stats.zenlevel)),this.options.version<17&&this.S.inputSoftdrop&&(this.S.stats.score+=this.self.cm.constants.scoring.SOFTDROP,this.options.zenlevels&&(this.S.stats.zenprogress+=this.self.znm.ScoreToZenProgress(this.self.cm.constants.scoring.SOFTDROP,this.S.stats.zenlevel))),this.OnClient((()=>{if(!this.self.hm.IsFullMode())return;const{type:e,x:t,y:n,r:s}=this.piece;this.self.fxm.EffectAtTetromino("harddrop_trail",{},this.pieceObj,e,t,n,s)}))}}ComputeKick(e,t,n,s,i){const o=this.self.cm.kickset,a=`${s}${i}`,r=this.self.cm.GetPieceOffset(e),[l,c]=r[s],[p,h]=r[i],[d,u]=[p-l,h-c],[_,m]=[t+d,n+u],g=this.self.cm.GetPieceKickset(e);if(this.self.bm.IsLegalAtPos(e,_,m,i))return{x:_,y:m,r:i,kick:void 0};if(!g)return;let f=g[a];this.options.version<17&&"ARS"===this.options.kickset&&(f=o.kicks[a]);e:for(const[s,[a,r]]of f.entries()){const p=t+a+d;let h=Math.floor(n)+.1+r+u;if(!this.options.infinite_movement&&this.S.totalRotations>this.options.lockresets+15&&(h=n+r+u),this.self.bm.IsLegalAtPos(e,p,h,i)){if(o.center_column?.pieces.includes(e))for(const[e,s]of o.center_column.rules)if(this.self.bm.IsOccupied(t-l+e,n-c+s)){if(0===e)continue e;break}return{x:p,y:h,r:i,kick:{index:s,kx:a,ky:r}}}}return!1}Rotate(e,t=!1){if(this.IsSleep())return void("tap"===this.S.handling.irs&&(this.piece.irs=((this.piece.irs+e)%4+4)%4,this.self.hm.H.fallingdirty=!0));const n=this.piece,[s,i]=[n.r,this._ClampRotation(e)],{x:o,y:a,type:r}=n;n.flags|=R.ACTION_MOVE,n.flags|=R.ACTION_ROTATE;const l=this.ComputeKick(r,o,a,s,i);return l?this._InternalRotate(l.x,l.y,l.r,e,l.kick,t):void 0}Hold(e=!1,t=!1){if(this.IsSleep())return void("tap"===this.S.handling.ihs&&(this.piece.flags|=R.ACTION_IHS,this.self.hm.H.fallingdirty=!0,this.self.bm.ClearIsLegalAtPosMemo()));if(this.S.holdlocked||!1===this.options.display_hold)return;const n=this.piece.type;this.Next(this.S.hold,t,!0),this.sfx.Play(e?"ihs":"hold"),this.self.zthm.IncrementPrompt("hold"),this.self.zthm.IncrementPrompt("holdconsecutive"),this.self.zthm.NixPrompt("singlesonly"),this.self.zthm.NixPrompt("nohold"),this.self.zthm.NixPrompt("combonohold"),this.S.hold=n,this.S.holdlocked=!this.options.infinite_hold,this.S.stats.holds++,this.self.hm.H.holddirty=!0}Lock(){if(this.IsSleep())return;const{type:e}=this.piece;this.emit("lock",this.piece,-1===this.S.firstInputTime?-1:this.self.esm.frame+this.S.subframe-this.S.firstInputTime),this.piece.flags|=R.STATE_SLEEP,this.S.stats.piecesplaced++,this.S.zenith.stalepieces++,75===this.S.zenith.stalepieces&&(this.S.cancelstreak+=5),this.self.zthm.IncrementPrompt("pieces"),this.self.zthm.IncrementPrompt("nohold"),this.S.setoptions.zenith_duo&&!this.WasMoved()?this.self.zthm.IncrementPrompt("spam"):this.self.zthm.NixPrompt("spam"),this.S.inputSoftdrop&&this.self.zthm.IncrementPrompt("softdrop"),this.S.zenith.was180Used||this.S.zenith.wasCWUsed?this.self.zthm.NixPrompt("norotateclockwise"):this.self.zthm.IncrementPrompt("norotateclockwise"),this.self.zthm["o"===this.S.falling.type?"IncrementPrompt":"NixPrompt"]("placeoconsecutive"),(this.S.lShift.held||this.S.rShift.held)&&this.WasMoved()&&this.self.zthm.IncrementPrompt("holddas"),"t"===this.S.falling.type&&this.self.zthm[0===this.piece.r?"IncrementPrompt":"NixPrompt"]("tnorotate"),this.S.lastpiecetime=this.self.esm.frame,this.self.zthm.NixPrompt("idle"),this.OnClient((()=>{const t=this.self.cm.constants.tetrominoes[e].weight;this.sfx.Play("floor"),this.self.hm.H.holderstate.dy+=2*this.self.lm.H.lastdT,t&&(this.sfx.Play("impact",.4*t),this.sfx.Play(`thunder${Math.floor(6*Math.random())+1}`,.1*t),this.self.hm.H.holderstate.dy+=4*t*this.self.lm.H.lastdT,this.self.hm.H.holderstate.ds+=2*t*this.self.lm.H.lastdT,this.self.hm.H.holderstate.dj+=2*t*this.self.lm.H.lastdT)})),"o"===this.S.falling.type&&0===this.S.falling.x&&this.self.zthm.IncrementPrompt("columnopiece");const t=this.self.bm.PushActiveToStack(),n=this.self.lcm.ClearLines();let s=n?this.options.lineclear_are:this.options.are;if("delayed"===this.options.garbageentry&&(s=Math.max(s,this.S.lastreceivedcount*this.options.garbageare)),this._InternalFinesse()||this.OnClient((()=>{this.self.hm.IsFullMode()&&this.self.iom.IsLocal()&&(this.options.pro_alert&&(this.sfx.Play("finessefault"),this.self.hm.H.holderstate.ds+=1.5*this.self.lm.H.lastdT),this.options.can_retry&&this.options.pro_retry&&(this.self.hm.H.holderstate.ds+=50*this.self.lm.H.lastdT,this.self.gom.GameOver("retry",!0),this.sfx.Play("detonate2")))})),t&&this._InternalLockout(n),this.options.zenlevels){if(this.S.stats.combo<=2&&this.S.stats.zenprogress>=1&&(this.self.hm.H.fallingdirty=!0,this.self.znm.ZenLevelup()))return;this.self.znm.UpdateZenGravity()}if(s)return this.self.hm.H.fallingdirty=!0,this.self.wfm.WaitFrames(s,"are",{});this.Next()}Next(e,t=!1,n=!1){if(this.S.pause)return;if("hold"===this.S.handling.irs){let e=0;this.S.inputRotateCCW&&(e-=1),this.S.inputRotateCW&&(e+=1),this.S.inputRotate180&&(e+=2),this.piece.irs=(e%4+4)%4}"hold"===this.S.handling.ihs&&this.S.inputHold&&!n&&(this.piece.flags|=R.ACTION_IHS),this.self.bm.ClearIsLegalAtPosMemo(),this._InternalDCD();const s=e??this.self.bam.PullFromBag(),i=this.piece,o=this.self.cm.GetPieceSpawnRotation(s),[a,r]=this.self.cm.GetPieceOffset(s)[o],[l,c]=[Math.ceil(this.W/2)-1+a,this.B-2.04+r];return i.type=s,i.x=l,i.y=c,i.r=o,i.hy=this.B-2,i.flags&=~(R.ROTATION_ALL|R.STATE_ALL|R.ACTION_FORCELOCK|R.ACTION_SOFTDROP|R.ACTION_MOVE|R.ACTION_ROTATE),i.keys=0,i.locking=0,i.rotresets=0,i.lockresets=0,i.skip.length=0,this.S.totalRotations=0,this.S.holdlocked=!1,this.self.hm.H.fallingdirty=!0,this.self.hm.H.nextdirty=!0,this.self.hm.H.holddirty=!0,this.S.zenith.wasCWUsed=!1,this.S.zenith.wasCCWUsed=!1,this.S.zenith.was180Used=!1,this.S.firstInputTime=-1,this.self.iom.IsLocal()&&void 0===e&&!1!==this.options.display_next&&this.sfx.Play(this.S.bag[0]),!t&&this.ConsiderBlockout(i,n)?(this.self.stm.LoseStockOrGameOver(this.options.topoutisclear?"topout_clear":this.S.lastwasattack?"garbagesmash":"topout"),i.flags^=R.ACTION_IHS,void(i.irs=0)):i.flags&R.ACTION_IHS?(i.flags^=R.ACTION_IHS,void this.Hold(!0,t)):(0!==i.irs&&(this.Rotate(i.irs,!0),i.irs=0),void(this.ConsiderBlockout(i,!t||n)?this.self.stm.LoseStockOrGameOver(this.options.topoutisclear?"topout_clear":this.S.lastwasattack?"garbagesmash":"topout"):(this.S.lastwasattack=!1,void 0===e&&this.emit("piece",i),this.self.svm.Update(),0===this.S.stats.combo&&this.self.svm.UpdateCheeseLayer(),this.options.version>=17&&this.Is20G()&&this.SlamToFloor())))}Clean(){this.piece.flags^=R.ACTION_IHS,this.piece.irs=0}SlamToFloor(){let e=!1;for(;this._InternalFall(1);)this.S.inputSoftdrop&&(this.S.stats.score+=this.self.cm.constants.scoring.SOFTDROP,this.options.zenlevels&&(this.S.stats.zenprogress+=this.self.znm.ScoreToZenProgress(this.self.cm.constants.scoring.SOFTDROP,this.S.stats.zenlevel)),e=!0);e&&this.sfx.Play("softdrop")}SetSleep(e){this.piece.flags=this.piece.flags&~R.STATE_SLEEP|e<<Math.log2(R.STATE_SLEEP)}ConsiderBlockout(e,t=!1){if(this.self.bm.IsLegalAtPos(e.type,e.x,e.y,e.r))t||(this.S.clutchCount=0);else{let n=!1;if(this.S.lastwasclear&&!1!==this.options.clutch){const t=e.y,s=e.hy;for(;e.y>0;)if(e.hy--,e.y--,this.self.bm.IsLegalAtPos(e.type,e.x,e.y,e.r)){n=!0;break}n||(e.hy=s,e.y=t)}if(!n)return this.IsServer()||!1===ot.video.siren||this.self.fxm.EffectAtTetromino("piece_blockout",{front:this.self.hm.IsFullMode()},this.pieceObj,e.type,e.x,e.y,e.r,!0),!0;t||this.S.clutchCount++,this.IsServer()||(this.sfx.Play("clutch",t?.6:1,t?.6:1,Math.min(2,Math.pow(1.05946,this.S.clutchCount-1))),t||"minimal"===ot.video.graphics||"off"===ot.video.actiontext||"some"===ot.video.actiontext||(this.S.clutchCount<=1?this.self.hm.H.board.fx("clutch").create("CLUTCH"):this.S.clutchCount<=10?this.self.hm.H.board.fx("clutch").create(`${this.self.cm.constants.Strings.cleartypes[this.S.clutchCount]} CLUTCH`):this.self.hm.H.board.fx("clutch").create(`CLUTCH \fc3X\f5${this.S.clutchCount}`)))}}}R.init();const W=function(e){"use strict";const t=e.gsm;return{LowerFire:function(){t.fireGrace>0?t.fireGrace--:t.fire=Math.max(0,t.fire-5/60)},AddFire:function(n){if(!t.setoptions.display_fire)return;const s=t.fire>=500;t.fire=Math.min(700,t.fire+n),t.fire>=500&&!s&&(e.hm.IsFullMode()&&!e.c.IsServer()&&"minimal"!==ot.video.graphics&&!1!==ot.video.fire&&(e.sfx.Play("fire"),e.hm.H.board.el("username").action("startfire")),t.fireGrace=300,t.fire=Math.min(700,t.fire+14))},PullFire:function(n=1){e.c.IsServer()||(t.fire!==t.fireAppr&&("minimal"===ot.video.graphics||e.hm.IsTinyMode()?t.fireAppr=t.fire:(t.fireAppr=t.fire+(t.fireAppr-t.fire)*Math.pow(.9,n),Math.abs(t.fireAppr-t.fire)<.01&&(t.fireAppr=t.fire))),"minimal"!==ot.video.graphics&&!1!==ot.video.fire&&(e.hm.H.board.el("username").update(t.fireAppr),t.fireAppr>=500&&t.playing&&e.hm.H.board.el("username").action("continuefire")))}}},N=function(e){"use strict";const t=e.gsm;return{ExplodeLine:function(n,s="line_burst"){e.c.IsServer()||"low"!==ot.video.graphics&&"minimal"!==ot.video.graphics&&e.hm.IsFullMode()&&0!==e.lm.H.soundSkipRate&&e.hm.IsFullMode()&&(xl.play("bgsplash",{direction:90,amt:5}),xl.play("bgsplash",{direction:270,amt:5}),function(n,s,i){if(e.c.IsServer())return;if("low"===ot.video.graphics||"minimal"===ot.video.graphics||e.hm.IsTinyMode()||0===e.lm.H.soundSkipRate)return;for(let o=0;o<e.W;o++){const a=nc(e.hm.H.stackobj,o*ws(_c.x)+ws(_c.x/2),(i-e.B)*ws(_c.x)+ws(_c.x/2));let r=e.cm.GetMinoColor(t.board[i][o]),l=n;"line_burst"===n&&"bob"===t.board[i][o]&&(l="line_bubble",r=61695),xl.play(l,{x:a.x,y:a.y,s:e.hm.S(),color:r,...s})}}(s,{},n))},EffectAtTetromino:function(t,n,s,i,o,a,r,l=!1){if(e.c.IsServer())return;if("low"===ot.video.graphics||"minimal"===ot.video.graphics||0===e.lm.H.soundSkipRate)return;const c=e.fm.GetPieceDefinition(i,r),p=e.cm.GetMinoColor(i);for(const[i,r]of c.data){const h=Math.ceil(a),d=o+(i-c.dx),u=h+(r-c.dy),_=nc(s,d*ws(_c.x)+ws(_c.x/2),(u-e.B)*ws(_c.x)+ws(_c.x/2)),m=l&&e.bm.IsOccupied(d,u);xl.play(t,{x:_.x,y:_.y,s:e.hm.S(),color:p,bright:m,...n})}},EffectAtTetrominoEdge:function(t,n,s,i,o,a,r){if(e.c.IsServer())return;if("low"===ot.video.graphics||"minimal"===ot.video.graphics||0===e.lm.H.soundSkipRate)return;const l=e.fm.GetPieceDefinition(i,r),c=e.cm.GetMinoColor(i);for(const[i,r]of l.data){const p=Math.ceil(a),h=o+(i-l.dx),d=p+(r-l.dy);if(!e.bm.IsOccupied(h,d+1))continue;const u=nc(s,h*ws(_c.x)+ws(_c.x/2),(d-e.B)*ws(_c.x)+ws(_c.x));xl.play(t,{x:u.x,y:u.y,color:c,...n})}}}};class $ extends k{constructor(e){super(e),this._seenIGEs=new Set,this._defIGEs=new Set(["interaction_confirm","kev","targeted"]),this.self.esm.On("ige",this.HandleIGE.bind(this)),this.self.esm.On("strategy",this.HandleStrategies.bind(this)),this.self.esm.On("manual_target",this.HandleManualTarget.bind(this))}_PushReplay(e,t){this.options.noreplay||this.self.iom.replay.PushEvent(e,t)}_IsDeferrable(e){if(this.IsServer())return!1;if(!this.self.iom.IsLocal())return!1;const{type:t,data:{gameid:n,frame:s}}=e;if(!this._defIGEs.has(t))return!1;if(null==s)return!1;if(null==n)return!1;const i=A.get(n+this.self.esm.gameIDContext);if(!i?.isScoped())return!1;const o=i.getFrame(),a=this.self.esm.frame-o;return!(!a||a>200)}HandleIGE({data:e}){if(this._seenIGEs.has(e.id))return;if(this._seenIGEs.add(e.id),!this._IsDeferrable(e))return this._IGEAction(e);const t=A.get(e.data.gameid+this.self.esm.gameIDContext);Promise.race([new Promise((e=>setTimeout(e,4e3))),t.awaitFrame(e.data.frame)]).then((()=>this._IGEAction(e)))}_IGEAction(e){this._PushReplay("ige",e);const t=e.data;switch(e.type){case"interaction":return"garbage"===t.type?this.self.atm.AddPendingGarbage(t):void 0;case"interaction_confirm":switch(t.type){case"garbage":return this.self.atm.IncomingAttack(t);case"zenith.climb_pts":return this.self.zthm.GiveClimbPts(t.amt,!0);case"zenith.bonus":return this.self.zthm.GiveBonus(t.amt,!0);case"zenith.incapacitated":return this.self.zthm.IncapacitateOther();case"zenith.revive":return this.self.zthm.ReviveSelf();default:return}case"target":return this.self.tm.SetTargets(t.targets);case"targeted":return t.value?this.self.tm.AddEnemy(t.gameid):this.self.tm.RemoveEnemy(t.gameid);case"allow_targeting":return this.self.tm.SetEnabled(t.value);case"kev":this.self.tm.RemovePlayer(t.victim.gameid),t.killer.gameid===this.id&&(this.self.fim.AddFire(150+t.fire/700*200),this.S.stats.kills++,this.options.zenith&&this.self.zthm.AwardKill());break;case"custom":return this.DoCustomEvents(e.data)}}HandleStrategies(e){this._PushReplay("strategy",e.data),this.self.tm.SetStrategy(e.data)}HandleManualTarget(e){this._PushReplay("manual_target",e.data),this.self.tm.SetStrategy(4,e.data)}ClearSeenIGEs(){return this._seenIGEs.clear()}_IsSamePiece(e,t){const n=e.matrix,s=t.matrix,i=n.data[0],o=s.data[0];switch(!1){case n.w===s.w:case n.h===s.h:case n.dx===s.dx:case n.dy===s.dy:case i.length===o.length:case i.every(((e,t)=>o[t][0]===e[0]&&o[t][1]===e[1])):return!1}return!0}DoCustomEvents(e){const t=e.data,n=this.S;switch(e.type){case"garbage":{const e=t.column??Math.floor(n.rngex.nextFloat()*this.self.bm.ColumnWidth()),s={type:t.type??"garbage",amt:t.amt,pos:t.pos,neg:t.neg,delay:t.delay,queued:t.queued,hardened:t.hardened,size:t.size,position:t.position,username:t.username,color:t.color,column:e};"impending"!==n.setoptions.slot_bar1&&(n.setoptions.slot_bar1="impending",this.self.hm.CreateHolder()),t.actor_neg&&(s.actor_neg={},s.actor_neg.tile=t.actor_neg,s.actor_neg.data={type:t.actor_neg_data_type,amt:t.actor_neg_data_amt},s.actor_neg.anchor=t.anchor),t.actor_pos&&(s.actor_pos={},s.actor_pos.tile=t.actor_pos,s.actor_pos.data={type:t.actor_pos_data_type,amt:t.actor_pos_data_amt},s.actor_pos.anchor=t.anchor),this.self.atm.AddPendingGarbage(s);break}case"map":this.self.bm.DestroyBoard(),this.self.bm.ClearIsLegalAtPosMemo(),this.self.bm.ClearEdges(),t.w&&t.h&&(t.w!==this.W||t.h!==this.H)&&(n.setoptions.boardwidth=t.w,n.setoptions.boardheight=t.h,n.setoptions.boardbuffer=t.h,this.self.bm.Resize(),this.self.bm.SetupBoard(),this.self.hm.CreateHolder()),this.self.bm.LoadMap(t.map),this.self.fm.SetSleep(!0),this.self.hm.H.fallingdirty=!0,this.self.wfm.WaitFrames(60,"are",{}),this.OnClient((()=>this.self.hm.H.holderstate.ds+=25*this.self.lm.H.lastdT)),this.sfx.Play("map_change");break;case"queue":{const e=Object.keys(this.self.cm.constants.tetrominoes),s=t.queue.filter((t=>e.includes(t)));if(!s.length)return;n.bag[t.start?"unshift":"push"].apply(n.bag,s),this.self.hm.H.nextdirty=!0,t.start&&this.sfx.Play("queue_change",.5,.33);break}case"piece":{const e=Object.keys(this.self.cm.constants.tetrominoes),s=t.piece;if(!e.includes(s))return;n.bag.unshift(n.falling.type),n.bag.unshift(s),this.self.fm.SetSleep(!0),this.self.hm.H.fallingdirty=!0,this.self.wfm.WaitFrames(60,"are",{}),this.OnClient((()=>this.self.hm.H.holderstate.ds+=25*this.self.lm.H.lastdT)),this.sfx.Play("piece_change");break}case"lines":{const e=t.action,s=t.column??Math.floor(n.rngex.nextFloat()*this.self.bm.ColumnWidth()),i=t.size,o=t.slow??0,a=t.position,r=t.effect,l=t.pos,c=t.neg,p={tile:null,data:null,anchor:"stack"},h={tile:null,data:null,anchor:"stack"},d="gbd"===l&&"gbd"===c;t.actor_neg&&(p.tile=t.actor_neg,p.data={type:t.actor_neg_data_type,amt:t.actor_neg_data_amt},p.anchor=t.anchor),t.actor_pos&&(h.tile=t.actor_pos,h.data={type:t.actor_pos_data_type,amt:t.actor_pos_data_amt},h.anchor=t.anchor);const u=d?this.T:this.self.bm.HighestLineOfPerma();let _=Math.min(t.amt,u);switch(e){case"add":{let e=!0,t=!1;for(let n=1;_>0;_--,n++){t=_<=0;const r={column:s,edges:(e?64:0)|(t?4:0),size:i,pos:l,neg:c,position:a,actor_neg:p,actor_pos:h};o>=1&&!d?this.self.wfm.WaitFrames(o*(n+1),"push-garbage-line",r):(this.self.bm.PushLine(r),this.self.bm.ClearIsLegalAtPosMemo(),this.self.bm.PushUpFallingIfNeeded(),this.self.hm.H.fallingdirty=!0,this.OnClient((()=>{this.self.gpm.Vibrate(mi.GARBAGERISE),this.self.sfx.Play("garbagerise")}))),e=!1}break}default:{const e=[];for(let t=_;t;t--)e.push(u-t);this.self.bm.RemoveLinesFromStack(e,r),this.self.bm.ClearIsLegalAtPosMemo(),this.self.hm.H.fallingdirty=!0,this.OnClient((()=>{this.self.gpm.Vibrate(mi.GARBAGERISE),this.sfx.Play("garbagerise")}));break}}break}case"boardsize":{const[e,s]=[t.w,t.h];this.self.bm.ClearIsLegalAtPosMemo(),this.self.bm.DestroyBoard(),n.setoptions.boardwidth=e,n.setoptions.boardheight=s,n.setoptions.boardbuffer=s,this.self.bm.Resize(),this.self.bm.SetupBoard(),this.self.hm.CreateHolder(),n.bag.unshift(n.falling.type),this.self.fm.SetSleep(!0),this.self.hm.H.fallingdirty=!0,this.self.wfm.WaitFrames(30,"are",{}),this.OnClient((()=>this.self.hm.H.holderstate.ds+=25*this.self.lm.H.lastdT)),this.sfx.Play("map_change");break}case"boardresize":{const[e,n]=[t.w,t.h];this.self.bm.SetSize(e,n),this.self.hm.CreateHolder(),this.self.hm.H.fallingdirty=!0;break}case"holderstate":for(const[e,n]of Object.entries(t.options))this.self.hm.H.holderstate[e]=n;break;case"setoptions":{let e=!1;for(const[s,i]of Object.entries(t.options))switch(n.setoptions[s]=i,s){case"g":n.g=i;break;case"shielded":i&&this.OnClient((()=>this.self.pbm.UpdateGarbageBar("impending")));break;case"display_impending":n.setoptions.slot_bar1=i?"impending":"",e=!0;break;case"display_progress":n.setoptions.slot_bar2=i?"progress":"",e=!0;break;case"inverted":n.rShift.held=!1,n.rShift.das=0,n.lShift.held=!1,n.lShift.das=0;break;case"stock":n.stock=i,e=!0;break;case"username":n.setoptions.display_username=!0,e=!0;break;case"tutorial":case"minoskin":case"boardskin":case"nextcount":case"display_hold":case"display_next":e=!0}e&&this.self.hm.CreateHolder();break}case"constants":this.self.cm.SetConstantsOverrides(t.options),this.self.cm.Reload();break;case"tetrominoes":{const e={...this.self.cm.constants.tetrominoes},s=t.tetrominoes,i=t.minotypes,o=t.tetrominoes_color,a=n.falling.type,r=n.bag.filter((e=>e in s));let l=!1;this.self.cm.SetConstantsOverrides({minotypes:i,tetrominoes:s,tetrominoes_color:o}),this.self.cm.Reload(),this.self.bm.ClearIsLegalAtPosMemo(),this.self.hm.H.nextdirty=!0,this.self.hm.H.holddirty=!0,n.hold in s||(n.hold=null),n.bag.length!==r.length&&(n.bag=r),a in s?this._IsSamePiece(s[a],e[a])||(n.bag.unshift(n.falling.type),l=!0):l=!0,l&&(n.falling.flags|=R.STATE_NODRAW,this.self.fm.SetSleep(!0),this.self.hm.H.fallingdirty=!0,this.self.wfm.WaitFrames(30,"are",{}),this.OnClient((()=>this.self.hm.H.holderstate.ds+=25*this.self.lm.H.lastdT)),this.sfx.Play("piece_change"));break}}}}const G=function(e){"use strict";return{otherstates:{lastpiece:null,undo:[],redo:[]},setoptions:{},handling:{},subframe:0,started:!1,countdown_started:!1,playing:!0,pause:!0,destroyed:!1,successful:!1,endqueued:!1,waitingframes:[],unsafewaitingframes:[],garbagearelockeduntil:0,garbageareentries:[],gameoverreason:null,g:.25,glock:0,board:[],boardedges:[],bag:[],bagex:[],bagid:0,hold:null,holdlocked:!1,actors:{},rng:null,rngex:null,lastGenerated:null,falling:{type:"i",x:0,y:0,r:0,hy:0,irs:0,kick:0,keys:0,flags:0,safelock:0,locking:0,lockresets:0,rotresets:0,skip:[]},totalRotations:0,clutchCount:0,lShift:{held:!1,arr:0,das:0,dir:-1},rShift:{held:!1,arr:0,das:0,dir:1},lastshift:-1,inputSoftdrop:!1,inputRotateCCW:!1,inputRotateCW:!1,inputRotate180:!1,inputHold:!1,firstInputTime:-1,time:{start:0,zero:!0,locked:!1,prev:0,frameoffset:0},lastpiecetime:0,stats:{lines:0,level_lines:0,level_lines_needed:1,inputs:0,holds:0,score:0,zenlevel:1,zenprogress:0,level:0,combo:0,topcombo:0,combopower:0,btb:0,topbtb:0,btbpower:0,tspins:0,piecesplaced:0,clears:{singles:0,doubles:0,triples:0,quads:0,pentas:0,realtspins:0,minitspins:0,minitspinsingles:0,tspinsingles:0,minitspindoubles:0,tspindoubles:0,minitspintriples:0,tspintriples:0,minitspinquads:0,tspinquads:0,tspinpentas:0,allclear:0},garbage:{sent:0,sent_nomult:0,maxspike:0,maxspike_nomult:0,received:0,attack:0,cleared:0},kills:0,finesse:{combo:0,faults:0,perfectpieces:0},zenith:{altitude:0,rank:1,peakrank:1,avgrankpts:0,floor:0,targetingfactor:3,targetinggrace:0,totalbonus:0,revives:0,revivesTotal:0,revivesMaxOfBoth:0,speedrun:!1,speedrun_seen:!1,splits:[0,0,0,0,0,0,0,0,0]}},zenith:{climb_pts:0,rank_locked_until:-1,last_rank_change_was_promote:!1,promotion_fatigue:0,bonusremaining:0,incapacitated:!1,allyincapacitated:!1,reviveprompts:[],promptstarttime:0,quadbuckets:[],spinbuckets:[],isDanger:!1,top3rowsince:null,nogarbagesince:null,lastcancel:0,bonusfromally:0,highestrevive:0,blockrationing:0,blockrationing_app:0,blockrationing_final:0,lastfloorchange:0,garbagerowcount:0,escapeartist:0,gracestillmessy:!1,maxmessy:!1,garbageahead:[],garbageside:0,revivelevel:0,wasCWUsed:!1,wasCCWUsed:!1,was180Used:!1,lastclearcount:null,lastclearpiece:null,lastclearspin:null,lastclearwasdupe:!1,talentless:!1,blighted:!1,columnsicknessbuckets_sz:[],columnsicknessbuckets_lj:[],columnsicknessbuckets_i:[],szsickness:[],stalepieces:0,staletime:0,hasseenI5:!1},stock:0,quadcolumns:[],clearsbypiece:{},diyusi:0,enemies:[],targets:[],laststrategychange:0,interactionid:0,killer:{gameid:0,type:"sizzle"},impendingdamage:[],garbageid:0,windupwaituntil:0,lastwasattack:!1,lastwasclear:!1,lastreceivedcount:0,garbagereceived:0,garbagebonus:0,lastoffensive:{x:0,y:0,offence:0,defense:0,surge:0},nextwilltank:!1,lastcolumn:null,haschangedcolumn:!1,lastdoublepiece:null,lastatktime:0,lasttanktime:0,cancelstreak:0,cheesespawned:0,notyetreceivedattacks:0,garbageacknowledgements:{outgoing:{},incoming:{}},hesitatedattacks:[],spike:{count:0,count_nomult:0,timer:0},placement:1,fire:0,fireAppr:0,fireGrace:0,escAllowed:!0,esc:!1,esciter:0,retryAllowed:!0,retry:!1,retryiter:0,hyperRetryAllowed:!0,hyperForfeitAllowed:!0,tutorial:{stage:-1,progress:0,reqs:0,freeze:60,finished:0}}},U=function(e){"use strict";return{Vibrate:function(t){e.c.IsServer()||e.iom.IsLocal()&&mi.pulse(...t)}}},X=function(e){"use strict";const t=e.gsm;function n(n,i=!1){if((!t.pause||i)&&t.playing){if(e.fm.SetSleep(!0),t.playing=!1,t.escAllowed=!1,t.retryAllowed=!1,t.gameoverreason=n,t.stats.finaltime=e.lm.GetGameTime(),t.setoptions.noreplay||e.iom.replay.PushEvent("end",e.siom.Export()),e.c.IsServer()){switch(n){case"disconnect":case"topout":case"garbagesmash":case"forfeit":e.elm.emit("fail",n,t.killer,t.fire);break;case"clear":case"topout_clear":case"winner":e.elm.emit("finish",e.lm.GetGameTime())}return e.elm.emit("stop",n),void s()}switch(t.setoptions.zenlevels&&(Ys.saveZen({...Ys.getZen(),map:e.bm.BoardToMap(),level:t.stats.zenlevel,progress:t.stats.zenprogress,score:t.stats.score,b2b:t.stats.btb},800),t.setoptions.usezenconfig&&xt("zen_panel").classList.add("hidden")),e.hm.H.fallingobj.visible=!1,e.dsm.UpdateCounts(),e.iom.IsLocal()&&"forfeit"!==n&&xt("forfeit").classList.add("hidden"),e.iom.IsLocal()&&"retry"!==n&&xt("retry").classList.add("hidden"),e.lm.H.stopgame=!0,e.iom.IsLocal()&&!t.setoptions.display_replay&&(document.body.classList.remove("ingame_phys"),!hl()&&ot.notifications.suppress&&ln()),e.rbm.AwardSecrets(),t.setoptions.zenith&&e.iom.IsLocal()&&["topout","garbagesmash"].includes(n)&&(n="zenith"),n){case"topout":if(t.setoptions.hasgarbage&&e.iom.IsOnline()&&e.atm.TakeAllDamage(!0),e.gpm.Vibrate(mi.TOPOUT),e.sfx.Play("topout"),e.mm.Stop(.2),e.hm.H.holderstate.ds+=50*e.lm.H.lastdT,e.hm.IsFullMode()&&(xl.play("bgsplashdanger",{direction:0,amt:50}),xl.play("bgcircle",{color:16720384,amt:300,speed:300})),!1!==ot.video.siren&&e.hm.IsFullMode()){const t=nc(e.hm.H.stackobj,ws(_c.x*e.Wh),ws(_c.x*e.Hh));xl.play("death_flair",{x:t.x,y:t.y,w:e.W*e.hm.S(),h:e.H*e.hm.S()})}t.killer.type="sizzle",e.elm.emit("fail",n,t.killer,t.fire),setTimeout((()=>{e.pm.H.siren=!1,e.hm.H.pullingholder=!1;const t=Math.sign(Math.random()-.5);dc.animate(e.hm.H.holder,{0:{y:"inherit",rotation:0},1:{y:ws(800)+window.innerHeight,rotation:.3*t}},1,a(.37,.06,.75,.56))}),250),setTimeout((()=>{s()}),1250);break;case"garbagesmash":{if(t.setoptions.hasgarbage&&e.iom.IsOnline()&&e.atm.TakeAllDamage(!0),e.sfx.Play("topout"),e.gpm.Vibrate(mi.GARBAGESMASH),e.sfx.Play("garbagesmash"),e.mm.Stop(.2),e.hm.H.holderstate.ds+=100*e.lm.H.lastdT,e.hm.IsFullMode()&&(xl.play("bgsplashdanger",{direction:0,amt:50}),xl.play("bgcircle",{color:16720384,amt:300,speed:300})),!1!==ot.video.siren&&e.hm.IsFullMode()){const t=nc(e.hm.H.stackobj,ws(_c.x*e.Wh),ws(_c.x*e.Hh));xl.play("death_flair",{x:t.x,y:t.y,w:e.W*e.hm.S(),h:e.H*e.hm.S()})}t.killer.type="spark";let i=e.T-e.bm.HighestLine();i+=e.atm.GetPendingGarbageCount(),i>=e.T&&(t.killer.type="spike"),e.elm.emit("fail",n,t.killer,t.fire),setTimeout((()=>{e.pm.H.siren=!1,e.hm.H.pullingholder=!1;const t=Math.sign(Math.random()-.5);dc.animate(e.hm.H.holder,{0:{y:"inherit",rotation:0},1:{y:ws(800)+window.innerHeight,rotation:.3*t}},1,a(.37,.06,.75,.56))}),250),setTimeout((()=>{s()}),1250);break}case"zenith":{if(t.setoptions.hasgarbage&&e.iom.IsOnline()&&e.atm.TakeAllDamage(!0),e.sfx.Play("topout"),e.gpm.Vibrate(mi.GARBAGESMASH),e.sfx.Play("garbagesmash"),e.mm.Stop(.2),e.hm.H.holderstate.ds+=100*e.lm.H.lastdT,e.hm.H.holderstate.dw+=15*e.lm.H.lastdT,e.hm.H.holderstate.dj+=20*e.lm.H.lastdT,e.hm.IsFullMode()&&(xl.play("bgsplashdanger",{direction:0,amt:50}),xl.play("bgcircle",{color:16720384,amt:300,speed:300}),e.ssm.GlobalShout("gameover","GAME OVER")),!1!==ot.video.siren&&e.hm.IsFullMode()){const t=nc(e.hm.H.stackobj,ws(_c.x*e.Wh),ws(_c.x*e.Hh));xl.play("death_flair",{x:t.x,y:t.y,w:e.W*e.hm.S(),h:e.H*e.hm.S()})}t.killer.type="spark";let i=e.T-e.bm.HighestLine();i+=e.atm.GetPendingGarbageCount(),i>=e.T&&(t.killer.type="spike"),e.elm.emit("fail",n,t.killer,t.fire),setTimeout((()=>{dc.animate(e.hm.H.holder,{0:{"scale.x":"inherit","scale.y":"inherit"},1:{"scale.x":.6,"scale.y":.6}},1.5,a(.12,.51,.67,.86))}),250),setTimeout((()=>{e.hm.H.pullingholder=!1,e.pm.H.siren=!1;const t=Math.sign(Math.random()-.5);dc.animate(e.hm.H.holder,{0:{y:"inherit",rotation:0},1:{y:ws(800)+window.innerHeight,rotation:.3*t}},1,a(.37,.06,.75,.56))}),750),setTimeout((()=>{s()}),1750);break}case"clear":{e.sfx.Play("finish"),e.mm.Stop(.2),e.pm.H.siren=!1,e.hm.H.pullingholder=!1,t.time.locked=!0,e.gpm.Vibrate(mi.CLEAR),dc.animate(e.hm.H.holder,{0:{"scale.x":"inherit","scale.y":"inherit",alpha:1},1:{"scale.x":5,"scale.y":5,alpha:0}},5,a(.1,.16,.94,.06)),e.hm.IsFullMode()&&(xl.play("bgcircle",{amt:300,speed:300}),e.ssm.GlobalShout("finish","FINISH"));const n=e.lm.GetGameTime();e.elm.emit("finish",n),e.dsm.FinalizeTimer(n),setTimeout((()=>{s()}),1e4);break}case"topout_clear":e.gpm.Vibrate(mi.TOPOUT),e.sfx.Play("gameover"),e.mm.Stop(.2),e.hm.H.holderstate.ds+=100*e.lm.H.lastdT,e.hm.IsFullMode()&&(xl.play("bgsplashdanger",{direction:0,amt:50}),xl.play("bgcircle",{color:16720384,amt:300,speed:300}),e.ssm.GlobalShout("gameover","GAME OVER")),setTimeout((()=>{e.pm.H.siren=!1,e.hm.H.pullingholder=!1,t.time.locked=!0,dc.animate(e.hm.H.holder,{0:{"scale.x":"inherit","scale.y":"inherit",alpha:1},1:{"scale.x":.5,"scale.y":.5,alpha:0}},5,a(.1,.16,.94,.06));const n=e.lm.GetGameTime();e.elm.emit("finish",n),e.dsm.FinalizeTimer(n)}),250),setTimeout((()=>{s()}),1e4);break;case"winner":e.sfx.Play("finish"),e.mm.Stop(.2),e.pm.H.siren=!1,e.hm.H.pullingholder=!1,t.time.locked=!0,e.gpm.Vibrate(mi.CLEAR),dc.animate(e.hm.H.holder,{0:{"scale.x":"inherit","scale.y":"inherit",alpha:1},1:{"scale.x":2,"scale.y":2,alpha:0}},3,a(.1,.16,.94,.06)),e.hm.IsFullMode()&&xl.play("bgcircle",{amt:300,speed:300}),e.elm.emit("finish",e.lm.GetGameTime()),setTimeout((()=>{s()}),3500);break;case"forfeit":e.mm.Stop(.2),e.pm.H.siren=!1,e.hm.H.pullingholder=!1,dc.animate(e.hm.H.holder,{0:{"scale.x":"inherit","scale.y":"inherit",alpha:1},1:{"scale.x":0,"scale.y":0,alpha:.5}},1,a(.22,.09,.84,.23)),xt("forfeit").classList.add("hidden"),e.elm.emit("quit",n),setTimeout((()=>{xl.play("bgcircle",{radius:10}),e.sfx.Play("detonated")}),1e3),setTimeout((()=>{s()}),5e3);break;case"retry":e.pm.H.siren=!1,e.hm.H.pullingholder=!1,dc.animate(e.hm.H.holder,{0:{"scale.x":"inherit"},1:{"scale.x":0}},t.setoptions.stride?.05:.25,a(.36,.01,.75,.3)),xt("retry").classList.add("hidden"),setTimeout((()=>{s()}),t.setoptions.stride?50:1e3),t.setoptions.bgmnoreset||e.mm.Stop(.2),setTimeout((()=>{t.setoptions.fromretry||(t.setoptions.countdown_interval*=.75),Ai=new v("keyboard"),Ai.importListeners(e.elm.Export()),Ai.setGame({...e.stam.gameOptions,precountdown:500,prestart:0,mission:"",zoominto:"fast",fromretry:!0,...e.stam.gameOptions.bgmnoreset&&e.mm.H.songWasPlayed?{song:"none"}:{}}),Ai.createGameHolder(e.hm.H.displaymode),Ai.startGame()}),t.setoptions.stride?50:250),Ys.reportAbortedGame();break;case"drop":e.mm.Stop(.2),e.pm.H.siren=!1,e.hm.H.pullingholder=!1,e.elm.emit("quit",n),dc.animate(e.hm.H.holder,{0:{"scale.x":"inherit","scale.y":"inherit",alpha:1},1:{"scale.x":0,"scale.y":0,alpha:.5}},.5,a(.36,.01,.75,.3)),setTimeout((()=>{xl.play("bgcircle",{radius:10}),e.sfx.Play("detonated")}),500),setTimeout((()=>{s()}),550);break;case"dropnow":return e.mm.Stop(.2),e.pm.H.siren=!1,e.hm.H.pullingholder=!1,dc.animate(e.hm.H.holder,{0:{"scale.x":"inherit","scale.y":"inherit",alpha:1},1:{"scale.x":0,"scale.y":0,alpha:.5}},.5,a(.36,.01,.75,.3)),setTimeout((()=>{xl.play("bgcircle",{radius:10}),e.sfx.Play("detonated")}),500),setTimeout((()=>{s()}),550),void e.elm.emit("stop",n);case"disconnect":e.mm.Stop(.2),e.pm.H.siren=!1,e.hm.H.pullingholder=!1,e.elm.emit("fail",n,t.killer,t.fire),dc.animate(e.hm.H.holder,{0:{"scale.x":"inherit","scale.y":"inherit",alpha:"inherit"},1:{"scale.x":2,"scale.y":0,alpha:0}},.25,a(.09,.73,.23,.9)),setTimeout((()=>{s()}),300);break;default:s()}e.elm.emit("end",n),e.elm.emit("stop",n)}}function s(){e.esm.Destroy(),e.c.IsServer()||(e.am.DestroyAllActors(),A.delete(t.setoptions.gameid+e.esm.gameIDContext),e.iom.SetScoped(!1),e.hm.H.holder&&!e.hm.H.holder._destroyed&&e.hm.H.holder.destroy(),t.destroyed=!0,e.lm.H.stopdraw=!0,e.lm.H.stopgame=!0,e.iom.IsLocal()&&(Ml.opacity(1),Ml.scale(1)),e.otm.EndOverText())}return{GameOver:n,Retry:function(){e.iom.IsLocal()&&t.setoptions.can_retry&&(t.setoptions.retryisclear||t.hyperRetryAllowed&&(n("retry",!0),e.sfx.Play("detonate2"),t.hyperRetryAllowed=!1))},Forfeit:function(){e.iom.IsLocal()&&t.setoptions.can_retry&&t.hyperForfeitAllowed&&(n("forfeit",!0),e.sfx.Play("detonate2"),t.hyperForfeitAllowed=!1)},Destroy:s}},j=function(e){"use strict";const t=e.gsm,n={holder:null,displaymode:"none",board:null,leftside:null,rightside:null,stackobj:null,stackmud:[],stackdirty:!0,fallingobj:null,fallingdirty:!0,nextobj:null,nextdirty:!0,holdobj:null,holddirty:!0,tintables:[],fgtintables:[],hybridtintables:[],pullingholder:!0,holderneedsrepull:!1,holderstate:{x:0,y:0,r:0,s:0,w:0,j:0,br:0,dx:0,dy:0,dr:0,ds:0,dw:0,dj:0,ox:0,oy:0,os:1,cox:0,coy:0,cos:1,btr:255,btg:255,btb:255,tr:255,tg:255,tb:255,ctr:255,ctg:255,ctb:255,fgtr:0,fgtg:0,fgtb:0,fgctr:0,fgctg:0,fgctb:0,asf:1},duoSideLock:null,duoIsRight:!1,rhythmBlast:0},s=n.holderstate;function i(){return"full"===n.displaymode}function r(){return"tiny"===n.displaymode}let l=null,c=null,p=null,h=null;function d(e,t,s,i,o){n.holder&&!n.holder._destroyed&&(s=s/360*2*Math.PI,(e!==l||o)&&(l=e,n.holder.x=ws(800)+e),(t!==c||o)&&(c=t,n.holder.y=ws(400)+t),(s!==p||o)&&(p=s,n.holder.rotation=s),(i!==h||o)&&(h=i,n.holder.scale.set(i),n.holder.zIndex=n.duoIsRight?n.holderstate.os+1e-6:n.holderstate.os))}function u(e,t,n){return e<<16|t<<8|n}function _(i=!1,o=1){if(e.c.IsServer())return;if(e.lm.H.lastdTs.push(o),e.lm.H.lastdTs.length>10&&e.lm.H.lastdTs.shift(),e.lm.H.lastdT=e.lm.H.lastdTs.reduce(((e,t)=>e+t))/e.lm.H.lastdTs.length,n.holderneedsrepull=!1,!n.pullingholder)return;if("minimal"===ot.video.graphics){s.cox=s.ox,s.coy=s.oy,s.cos=s.os;const e=400*s.coy,t=s.cos*s.asf;return void d(ws(800*s.cox),ws(e),s.br,t,i)}if(r()){s.cox=s.ox+(s.cox-s.ox)*Math.pow(.9,o),s.coy=s.oy+(s.coy-s.oy)*Math.pow(.9,o),s.cos=s.os+(s.cos-s.os)*Math.pow(.9,o),Math.abs(s.cox-s.ox)<("minimal"!==ot.video.graphics?.001:1)&&(s.cox=s.ox),Math.abs(s.coy-s.oy)<("minimal"!==ot.video.graphics?.001:1)&&(s.coy=s.oy),Math.abs(s.cos-s.os)<.01&&(s.cos=s.os);const e=400*s.coy,a=s.cos*s.asf;d(ws(800*s.cox),ws(e),s.br,a,i);const r=u(Math.round(s.ctr),Math.round(s.ctg),Math.round(s.ctb)),l=u(Math.round(s.fgctr),Math.round(s.fgctg),Math.round(s.fgctb));n.tintables.forEach((e=>{e.destroyed||e.tint!=r&&(e.tint=r)})),n.fgtintables.forEach((e=>{e.destroyed||e.tint!=l&&(e.tint=l)}));const c=t.setoptions.display_fire&&t.fire>=500?l:r;n.hybridtintables.forEach((e=>{e.destroyed||(e.tint=c)})),s.dx=0,s.dy=0,s.dr=0,s.ds=0,s.dw=0,s.dj=0;const p=255===s.tr&&255===s.tg&&255===s.tb;return s.ctr=p?s.btr:s.tr,s.ctg=p?s.btg:s.tg,s.ctb=p?s.btb:s.tb,s.fgctr=s.fgtr,s.fgctg=s.fgtg,void(s.fgctb=s.fgtb)}const a=Math.pow(.55+.2*ot.video.bounciness,o),l=Math.pow(.82+.08*ot.video.bounciness,o),c=Math.pow(.55+.2*ot.video.shakiness,o),p=Math.pow(.35+.5*ot.video.shakiness,o),h=Math.pow(.35+.5*ot.video.shakiness,o);s.x*=a,s.y*=a,s.r+=(s.br-s.r)*(1-l),s.s*=c,s.w*=p,s.j*=h,s.x+=s.dx,s.y+=s.dy,s.r+=s.dr,s.s+=s.ds,s.w+=s.dw,s.j+=s.dj,s.dx*=a,s.dy*=a,s.dr*=l,s.ds*=c,s.dw*=p,s.dj*=h;let _=Math.random()*s.s-s.s/2+Math.sin((e.esm?.frame??0)/1.5*Math.max(1,(s.w+120)/150))*Math.min(30,s.w),m=Math.random()*s.s-s.s/2+Math.sin((e.esm?.frame??0)/1.5*Math.max(1,(s.j+120)/150))*Math.min(30,s.j);if(t.setoptions.zenith_duo&&e.zthm.duoOtherSideGame){const t=e.zthm.duoOtherSideGame.getHolderData().holderstate;_=Math.random()*(s.s+t.s)-(s.s+t.s)/2+Math.sin((e.esm?.frame??0)/1.5*Math.max(1,(s.w+t.w+120)/150))*Math.min(30,s.w+t.w),m=Math.random()*(s.s+t.s)-(s.s+t.s)/2+Math.sin((e.esm?.frame??0)/1.5*Math.max(1,(s.j+t.j+120)/150))*Math.min(30,s.j+t.j)}0!=ot.video.bounciness&&0!==e.lm.H.soundSkipRate||(s.x=0,s.y=0,s.r=s.br,s.s=0),0!=ot.video.shakiness&&0!==e.lm.H.soundSkipRate||(_=0,m=0),!1!==ot.video.spin&&0!==e.lm.H.soundSkipRate||(s.r=s.br),s.cox=s.ox+(s.cox-s.ox)*Math.pow(.9,o),s.coy=s.oy+(s.coy-s.oy)*Math.pow(.9,o),s.cos=s.os+(s.cos-s.os)*Math.pow(.9,o);const g=800*s.cox,f=400*s.coy,b=s.cos*s.asf;if(t.setoptions.zenith_duo&&e.zthm.duoOtherSideGame){const t=e.zthm.duoOtherSideGame.getHolderData().holderstate;d(ws(g)+Math.round(ws(s.x+t.x+_)*s.cos),ws(f)+Math.round(ws(s.y+t.y+m)*s.cos),s.r+t.r,b,i)}else d(ws(g)+Math.round(ws(s.x+_)*s.cos),ws(f)+Math.round(ws(s.y+m)*s.cos),s.r,b,i);const C=255===s.tr&&255===s.tg&&255===s.tb,y=C?s.btr:s.tr,x=C?s.btg:s.tg,A=C?s.btb:s.tb;s.ctr=y+(s.ctr-y)*Math.pow(.9,o),s.ctg=x+(s.ctg-x)*Math.pow(.9,o),s.ctb=A+(s.ctb-A)*Math.pow(.9,o),s.fgctr=s.fgtr+(s.fgctr-s.fgtr)*Math.pow(.9,o),s.fgctg=s.fgtg+(s.fgctg-s.fgtg)*Math.pow(.9,o),s.fgctb=s.fgtb+(s.fgctb-s.fgtb)*Math.pow(.9,o);let v=u(Math.round(Math.min(255,s.ctr+24*n.rhythmBlast**2)),Math.round(Math.min(255,s.ctg+24*n.rhythmBlast**2)),Math.round(Math.min(255,s.ctb+24*n.rhythmBlast**2))),k=u(Math.round(s.fgctr),Math.round(s.fgctg),Math.round(s.fgctb));if(t.stats.zenith.speedrun&&n.board.el("grid").update(n.rhythmBlast**2),t.setoptions.zenith_duo&&e.zthm.duoOtherSideGame){const t=e.zthm.duoOtherSideGame.getHolderData().holderstate;v=u(Math.round(Math.min(s.ctr,t.ctr)),Math.round(Math.min(s.ctg,t.ctg)),Math.round(Math.min(s.ctb,t.ctb))),k=u(Math.round(Math.min(s.fgctr,t.fgctr)),Math.round(Math.min(s.fgctg,t.fgctg)),Math.round(Math.min(s.fgctb,t.fgctb)))}n.tintables.forEach((e=>{e.destroyed||(e.tint=v)})),n.fgtintables.forEach((e=>{e.destroyed||(e.tint=k)}));const w=t.setoptions.display_fire&&t.fire>=500?k:v;n.hybridtintables.forEach((e=>{e.destroyed||(e.tint=w)}))}function m(t="full"){if(n.displaymode!==t)switch(n.displaymode=t,t){case"full":case"small":e.iom.SetScoped(!0);break;default:e.iom.SetScoped(!1)}}function g(){if(e.c.IsServer())return;if(!t.playing)return;if(0===Object.keys(t.setoptions).length)return;if(e.iom.IsHeadless())return;let a=!1;n.holder&&(a=n.holder.visible,n.holder.destroy(),n.holder=null,n.leftside=null,n.rightside=null,e.pm.H.alerting=!1),e.otm.EndOverText(),n.tintables=[],n.fgtintables=[],n.stackdirty=!0,n.fallingdirty=!0,n.nextdirty=!0,n.holddirty=!0;const[l,c]=[e.W,e.H],[p,h]=[l/10,c/20];s.asf=p>h?12/l:20/c;let d=t.setoptions.boardskin;t.setoptions.zenith_duo&&(n.duoSideLock?(d+=`_duo${n.duoSideLock}`,n.duoIsRight="right"===n.duoSideLock):(d+="_duo"+(t.setoptions.username===bn.username()?"left":"right"),n.duoIsRight=t.setoptions.username!==bn.username())),n.board=new Pc[d].ns.Board(e),n.holder=new o.Container,n.holder.position.set(ws(800),ws(400)),n.holder.pivot.set(ws(_c.x*e.Wh),ws(_c.x*e.Hh)),n.holder.visible=a,n.holder.sortableChildren=!0,(i()?Xl:jl).addChild(n.holder),n.leftside=new o.Container,n.leftside.zIndex=1,n.holder.addChild(n.leftside),n.rightside=new o.Container,n.rightside.zIndex=1,n.holder.addChild(n.rightside),n.board.el("boardsides").create(),r()&&(n.holder.interactive=!0,n.holder.interactiveChildren=!1,n.holder.on("click",(()=>e.elm.emit("click"))),n.holder.on("mouseover",e.otm.CreateOverText),n.holder.on("mousemove",e.otm.MoveOverText),n.holder.on("mouseout",e.otm.EndOverText));const u=n.board.el("background").create();u.interactive=!0,u.on("click",(()=>e.elm.emit("click"))),"full"!==n.displaymode&&(u.on("mouseover",e.otm.CreateOverText),u.on("mousemove",e.otm.MoveOverText),u.on("mouseout",e.otm.EndOverText)),n.board.el("grid").create(),n.stackobj=n.board.el("stack").create(),n.board.el("stock").create(),n.fallingobj=n.board.el("falling").create(),n.board.el("border").create(),n.board.el("bar1").create(),n.board.el("bar2").create(),n.board.el("replaytag").create(),n.nextobj=n.board.el("next").create(),n.holdobj=n.board.el("hold").create(),n.board.el("zenithmods").create(),n.board.el("zenithblighted").create(),n.board.el("tutorial").create(),n.board.el("zenithgarbageahead").create(),n.board.el("backer").create(),n.board.el("zen").create(),n.board.el("counter1").create(),n.board.el("counter2").create(),n.board.el("counter3").create(),n.board.el("counter4").create(),n.board.el("counter5").create(),n.board.el("username").create(),n.board.el("zenithrank").create(),n.board.el("zenithprompts").create(),n.board.el("zenithpromptsself").create(),e.tm.SetTargeted(),e.tm.SetEnemy(),e.dsm.DisplayCounts(),_(!0),e.pbm.UpdateGarbageBar("impending"),e.am.RedrawActors(),r()&&"low"!==ot.video.caching&&(n.holder.cacheAsBitmap=!0),"full"===n.displaymode&&(Yl=!0)}function f(){e.c.IsServer()||(e.hm.H.holder&&!e.hm.H.holder._destroyed&&e.hm.H.holder.destroy(),e.iom.SetScoped(!1),e.iom.SetHeadless(!0),e.lm.H.stopdraw=!0,e.lm.H.stopgame=!0,e.iom.IsLocal()&&(Ml.opacity(1),Ml.scale(1)),e.otm.EndOverText())}let b=null;return{H:n,IsFullMode:i,IsSmallMode:function(){return"small"===n.displaymode},IsTinyMode:r,SetHolderTransformData:d,TripletToSingle:u,PullHolder:_,SetDisplayMode:m,CreateHolder:g,Restate:function(){(t.setoptions.b2bchaining||t.setoptions.b2bcharging)&&t.stats.btb>1?n.board.el("b2b").update("set",t.stats.btb-1):n.board.el("b2b").delete()},Behead:f,Rehead:function(t=!1){e.c.IsServer()&&(e.iom.SetHeadless(!1),m("tiny"),g(),xs(!1),e.lm.H.ticksdraw||o.Ticker.shared.add(e.lm.DrawLoop),e.lm.H.ticksgame||o.Ticker.shared.add(e.lm.GameLoop),e.lm.H.stopdraw=!1,e.lm.H.stopgame=!1,e.lm.H.ticksdraw=!0,e.lm.H.ticksgame=!0,e.dsm.DisplayCounts(),n.holder.visible=!0,t&&dc.animate(n.holder,{0:{alpha:0},1:{alpha:1}},1,a(0,0,1,1)),b&&(clearTimeout(b),b=null))},FadeOutAndBehead:function(t){e.iom.SetHeadless(!0),dc.animate(n.holder,{0:{"scale.x":"inherit","scale.y":"inherit",alpha:1},1:{"scale.x":0,"scale.y":0,alpha:0}},t/1e3,a(0,0,1,1)),b=setTimeout((()=>{b=null,f()}),t)},S:()=>n.holderstate.cos*n.holderstate.asf}};class q extends k{constructor(e){super(e),this.self.esm.On("keydown",this._KeyDown.bind(this)),this.self.esm.On("keyup",this._KeyUp.bind(this)),this.forfeitHidden=!0,this.retryHidden=!0}_KeyDown({data:e}){const t=this.S;if(this._ProcessSubframe(e.subframe),t.setoptions.noreplay||this.self.iom.replay.PushEvent("keydown",e),t.setoptions.inverted)switch(e.key){case"moveLeft":e.key="moveRight";break;case"moveRight":e.key="moveLeft"}switch(e.key){case"moveLeft":return t.stats.inputs++,t.falling.keys++,-1==t.firstInputTime&&(t.firstInputTime=this.self.esm.frame+t.subframe),this.self.trm.TutorialMoveLeft(),this._ActivateShift(t.lShift,e.hoisted),this._InternalShift()&&this.sfx.Play("move");case"moveRight":return t.stats.inputs++,t.falling.keys++,-1==t.firstInputTime&&(t.firstInputTime=this.self.esm.frame+t.subframe),this.self.trm.TutorialMoveRight(),this._ActivateShift(t.rShift,e.hoisted),this._InternalShift()&&this.sfx.Play("move");case"softDrop":return t.stats.inputs++,t.inputSoftdrop=!0,-1==t.firstInputTime&&(t.firstInputTime=this.self.esm.frame+t.subframe),void this.self.trm.TutorialSoftDrop();case"exit":return t.esciter=0,void(t.esc=!0);case"retry":return t.retryiter=0,void(t.retry=!0);case"undo":return this.self.um.Undo();case"redo":return this.self.um.Redo();case"rotateCCW":t.inputRotateCCW=!0,"hold"===t.handling.irs&&this.self.fm.IsSleep()&&(this.self.hm.H.fallingdirty=!0);break;case"rotateCW":t.inputRotateCW=!0,"hold"===t.handling.irs&&this.self.fm.IsSleep()&&(this.self.hm.H.fallingdirty=!0);break;case"rotate180":t.inputRotate180=!0,"hold"===t.handling.irs&&this.self.fm.IsSleep()&&(this.self.hm.H.fallingdirty=!0);break;case"hold":t.inputHold=!0,"hold"===t.handling.ihs&&this.self.fm.IsSleep()&&(this.self.bm.ClearIsLegalAtPosMemo(),this.self.hm.H.fallingdirty=!0)}if(!t.pause)switch(e.key){case"rotateCCW":t.stats.inputs++,-1==t.firstInputTime&&(t.firstInputTime=this.self.esm.frame+t.subframe),this.self.trm.TutorialRotateCCW(),this._ProcessRotate(-1);break;case"rotateCW":t.stats.inputs++,-1==t.firstInputTime&&(t.firstInputTime=this.self.esm.frame+t.subframe),this.self.trm.TutorialRotateCW(),this._ProcessRotate(1);break;case"rotate180":if(!t.setoptions.allow180)return;t.stats.inputs++,-1==t.firstInputTime&&(t.firstInputTime=this.self.esm.frame+t.subframe),this._ProcessRotate(2);break;case"hardDrop":if(!1===t.setoptions.allow_harddrop||0!==t.falling.safelock)return;return t.stats.inputs++,this.self.trm.TutorialHardDrop(),this.self.fm.Harddrop();case"hold":return t.stats.inputs++,this.self.trm.TutorialHold(),this.self.fm.Hold()}}_KeyUp({data:e}){const t=this.S;if(this._ProcessSubframe(e.subframe),t.setoptions.noreplay||this.self.iom.replay.PushEvent("keyup",e),t.setoptions.inverted)switch(e.key){case"moveLeft":e.key="moveRight";break;case"moveRight":e.key="moveLeft"}switch(e.key){case"moveLeft":t.lShift.held=!1,t.lShift.das=0,t.lastshift=t.rShift.held?t.rShift.dir:t.lastshift,t.handling.cancel&&(t.rShift.arr=t.handling.arr,t.rShift.das=0),this.self.zthm.NixPrompt("holddas");break;case"moveRight":t.rShift.held=!1,t.rShift.das=0,t.lastshift=t.lShift.held?t.lShift.dir:t.lastshift,t.handling.cancel&&(t.lShift.arr=t.handling.arr,t.lShift.das=0),this.self.zthm.NixPrompt("holddas");break;case"softDrop":t.falling.flags|=R.ACTION_SOFTDROP,t.inputSoftdrop=!1,this.self.zthm.NixPrompt("softdrop");break;case"exit":t.esciter=0,t.esc=!1;break;case"retry":t.retryiter=0,t.retry=!1;break;case"rotateCCW":t.inputRotateCCW=!1,"hold"===t.handling.irs&&this.self.fm.IsSleep()&&(this.self.hm.H.fallingdirty=!0);break;case"rotateCW":t.inputRotateCW=!1,"hold"===t.handling.irs&&this.self.fm.IsSleep()&&(this.self.hm.H.fallingdirty=!0);break;case"rotate180":t.inputRotate180=!1,"hold"===t.handling.irs&&this.self.fm.IsSleep()&&(this.self.hm.H.fallingdirty=!0);break;case"hold":t.inputHold=!1,"hold"===t.handling.ihs&&this.self.fm.IsSleep()&&(this.self.bm.ClearIsLegalAtPosMemo(),this.self.hm.H.fallingdirty=!0)}}_ActivateShift(e,t){const n=this.S;e.held=!0,e.das=t?n.handling.das-n.handling.dcd:0,e.arr=n.setoptions.version>=12?n.handling.arr:e.arr,n.lastshift=e.dir,this.self.zthm.NixPrompt("holddas")}_ProcessRotate(e){return this.S.falling.keys+=e>=2?2:1,this.self.fm.Rotate(e)}_ProcessSubframe(e){if(e<=this.S.subframe)return;const t=e-this.S.subframe;this.ProcessAllShift(t),this.self.fm.Fall(t),this.S.subframe=e}_InternalShift(){const e=this.S.falling;if(!this.self.fm.IsSleep()&&!this.S.pause)return this.S.falling.flags|=R.ACTION_MOVE,this.self.bm.IsLegalAtPos(e.type,e.x+this.S.lastshift,e.y,e.r)?(this.self.am.ProgressActors(),e.x=e.x+this.S.lastshift,e.lockresets<31&&e.lockresets++,this.self.fm.ClearFlags(R.ROTATION_ALL|R.STATE_WALL),this.self.hm.H.fallingdirty=!0,this.options.version>=17&&this.self.fm.Is20G()&&this.self.fm.SlamToFloor(),this.self.fm.ShouldLock()||(e.locking=0),this.self.bm.IsLegalAtPos(e.type,e.x+this.S.lastshift,e.y,e.r)||this.sfx.Play("sidehit"),!0):(this.S.falling.flags|=R.STATE_WALL,!1)}_ProcessShift(e,t){const n=this.S;if(!e.held||n.lastshift!==e.dir)return;const s=Math.max(0,t-Math.max(0,n.handling.das-e.das));if(e.das=Math.min(e.das+t,n.handling.das),e.das<n.handling.das)return;if(this.self.fm.IsSleep()||n.pause)return;if(e.arr+=n.setoptions.version>=15?s:t,e.arr<n.handling.arr)return;const i=0===n.handling.arr?this.W:Math.floor(e.arr/n.handling.arr);e.arr-=n.handling.arr*i;for(let e=0;e<i;e++)this._InternalShift()&&0===e&&this.sfx.Play("move"),this.self.fm.HasHitWall()&&this.OnClient((t=>{Math.max(1,10*ot.video.bounciness-10)>e&&(this.self.hm.H.holderstate.dx+=.5*this.self.lm.H.lastdT*n.lastshift)}))}_HandleRetryClear(){const e=this.S;e.setoptions.can_undo&&this.self.um.Save(),e.retry=!1,e.retryiter=0,e.hold=null,e.holdlocked=!1,e.bag=[],e.stats.lines=0,e.stats.inputs=0,e.stats.piecesplaced=0,e.stats.garbage.sent=0,e.stats.garbage.attack=0,e.stats.garbage.cleared=0,e.stats.combo=0,e.stats.combopower=0,e.stats.btbpower=0,e.stats.btb=0,e.stats.finesse.combo=0,e.stats.finesse.faults=0,e.stats.finesse.perfectpieces=0,e.time.frameoffset=this.self.esm.frame,this.self.bm.DestroyBoard(),this.self.bam.PopulateBag(),this.self.fm.Next(),this.OnClient((()=>{this.self.hm.H.board.el("b2b").delete(),this.self.gpm.Vibrate(mi.CLEAR),this.self.hm.H.holderstate.ds+=50*this.self.lm.H.lastdT,this.sfx.Play("shatter")}))}ProcessAllShift(e=1-this.S.subframe){for(const t of[this.S.lShift,this.S.rShift])this._ProcessShift(t,e)}ProcessInterrupts(){const e=this.S;if(e.esc&&e.escAllowed&&this.self.iom.IsLocal()){const t=e.esciter++;let n=e.setoptions.forfeit_time||60;e.setoptions.stride&&(n/=3),this.OnClient((()=>{xt("forfeit").style.height=1.5+t/20+"em",xt("forfeit").style.lineHeight=1.7+t/20+"em",xt("forfeit").style.boxShadow=`0px 0px ${8+t/3}px #F00`,xt("forfeit").style.filter=`brightness(${1+Math.max(0,(t-n+5)/5)})`,xt("forfeit").classList.remove("hidden")})),this.forfeitHidden=!1,t>n?(this.self.gom.GameOver("forfeit",!0),this.sfx.Play("detonate2")):t%20==0&&this.sfx.Play("detonate1")}else this.forfeitHidden||(this.OnClient((()=>{xt("forfeit").classList.add("hidden")})),this.forfeitHidden=!0);if(e.retry&&e.retryAllowed&&e.setoptions.can_retry){if(e.setoptions.stride&&!e.setoptions.usezenconfig)if(e.setoptions.retryisclear)this._HandleRetryClear();else if(!this.IsServer()&&this.self.iom.IsLocal())return this.self.gom.GameOver("retry",!0),void this.sfx.Play("detonate2");if(this.IsServer()||!this.self.iom.IsLocal())return;const t=e.retryiter++;xt("retry").style.height=1.5+t/20+"em",xt("retry").style.lineHeight=1.7+t/20+"em",xt("retry").style.boxShadow=`0px 0px ${8+t/3}px #FA0`,xt("retry").style.filter=`brightness(${1+Math.max(0,(t-15+5)/5)})`,xt("retry").classList.remove("hidden"),this.retryHidden=!1,t>15?(e.setoptions.retryisclear?this._HandleRetryClear():this.self.gom.GameOver("retry",!0),this.sfx.Play("detonate2")):t%5==0&&this.sfx.Play("detonate1")}else this.IsServer()||!this.self.iom.IsLocal()||this.retryHidden||(xt("retry").classList.add("hidden"),this.retryHidden=!0)}}class K extends k{constructor(e,t){super(e),this._socket=t,this._replay=new B,this._scoped=!0,this._synced=!0,this._headless=!1,this._timeoutID=null}get socket(){return this._socket}get replay(){return this._replay}get scoped(){return this._scoped}set scoped(e){this._scoped=e}get synced(){return this._synced}set synced(e){this._synced=e}IsLocal(){return this.self.esm.IsKeyboard()}IsOnline(){return this.self.esm.IsSocket()}IsReplay(){return this.self.esm.IsReplay()}IsMultiplayer(){return null!==this.id}IsScoped(){return this._scoped}IsSynced(){return!!this.IsLocal()||this._scoped&&this._synced}IsHeadless(){return this._headless}SetHeadless(e){this._headless=e}SetScoped(e){if(this.IsOnline())return e?void(this.IsSynced()||(this.scoped=!0,clearTimeout(this._timeoutID),this._timeoutID=setTimeout((()=>{this.IsScoped()&&this.SendToServer("game.scope.start",this.id)}),300))):(this.IsSynced()&&this.SendToServer("game.scope.end",this.id),this.scoped=!1,this.synced=!1,clearTimeout(this._timeoutID),this.self.wfm.ExecuteUnsafeWaitingFrames(!0))}async RequestState(){this.IsSynced()||(await Ht(1e3),this.S.destroyed||this.self.hm.IsTinyMode()||this.SendToServer("game.scope.start",this.id))}SendToServer(e,t){if(!this._socket)throw new ReferenceError("Attempted to use socket on a singleplayer session");return this._socket.send(e,t)}}const V=function(e){"use strict";const t=e.gsm;function n(n,s=!1,i=1){if(s)t.stats.level=i,t.g=Math.min(Number.MAX_SAFE_INTEGER-1,1/60/Math.pow(Math.max(1e-9,t.setoptions.levelgbase-(t.stats.level-1)*t.setoptions.levelgspeed),t.stats.level-1)),t.stats.level_lines=0,t.stats.level_lines_needed=t.setoptions.levelstatic?t.setoptions.levelstaticspeed:Math.ceil(t.stats.level*t.setoptions.levelspeed*5),t.setoptions.masterlevels&&t.stats.level>20&&(t.setoptions.locktime=30-Math.min(25,t.stats.level-20)),t.setoptions.masterlevels&&t.stats.level>45&&(t.setoptions.lockresets=15-Math.min(10,t.stats.level-45));else if(t.stats.level_lines+=n,t.stats.level_lines>=t.stats.level_lines_needed){for(;t.stats.level_lines>=t.stats.level_lines_needed;)t.stats.level_lines-=t.stats.level_lines_needed,t.stats.level++,t.g=Math.min(Number.MAX_SAFE_INTEGER-1,1/60/Math.pow(Math.max(1e-9,t.setoptions.levelgbase-(t.stats.level-1)*t.setoptions.levelgspeed),t.stats.level-1)),t.stats.level_lines_needed=t.setoptions.levelstatic?t.setoptions.levelstaticspeed:Math.ceil(t.stats.level*t.setoptions.levelspeed*5),t.setoptions.masterlevels&&t.stats.level>20&&(t.setoptions.locktime=30-Math.min(25,t.stats.level-20)),t.setoptions.masterlevels&&t.stats.level>45&&(t.setoptions.lockresets=15-Math.min(10,t.stats.level-45));e.c.OnClient((()=>{e.sfx.Play("levelup");let n=t.stats.level;t.setoptions.masterlevels&&t.stats.level>20&&(n="M"+(t.stats.level-20)),"minimal"!==ot.video.graphics&&"off"!==ot.video.actiontext&&"some"!==ot.video.actiontext&&e.hm.H.board.fx("levelup").create(n),e.hm.IsFullMode()&&0!==e.lm.H.soundSkipRate&&xl.play("bgcircle"),t.setoptions.levels&&!t.setoptions.absolute_lines&&e.pbm.BlastBar("progress")}))}}function s(n){let s=0;for(let e=0;e<n.length;e++)t.board[n[e]].some((e=>"gb"===e||"gbd"===e))&&s++;return!s||"l"!==t.falling.type&&"j"!==t.falling.type||!e.fm.IsSpin()&&!e.fm.IsSpinMini()||e.zthm.IncrementPrompt("ljgarbage",s),!s||"s"!==t.falling.type&&"z"!==t.falling.type||!e.fm.IsSpin()&&!e.fm.IsSpinMini()||e.zthm.IncrementPrompt("szgarbage",s),t.setoptions.zenith&&(e.fm.IsSpin()||e.fm.IsSpinMini())&&3===t.setoptions.zenith_mods.length&&t.setoptions.zenith_doublehole&&t.setoptions.zenith_messy&&t.setoptions.zenith_allspin&&(t.zenith.escapeartist+=s),s&&(t.lasttanktime=e.esm.frame,t.cancelstreak=0,t.zenith.staletime=e.esm.frame,t.zenith.stalepieces=0),t.stats.garbage.cleared+=s,e.zthm.IncrementPrompt("garbageclear",s),s}function i(s,i,o){let a=0;t.stats.lines+=s,t.setoptions.levels&&n(s),i&&(a+=t.setoptions.allclear_b2b);const r=e.fm.IsSpin(),l=e.fm.IsSpinMini(),c=r||"t"!==t.falling.type&&l;if("allspin_reversed"===t.setoptions.zenith_mods[0]&&(s&&!c&&(s=1),!s&&c&&t.stats.btb>t.setoptions.b2bcharge_at&&a++),s&&!c&&"allspin_reversed"===t.setoptions.zenith_mods[0]&&(s=1),t.setoptions.zenith&&5===s&&(s=4),(s||r)&&t.setoptions.zenith_allspin){const n=l?"mini":r?"spin":"none";if(t.zenith.lastclearwasdupe=!1,"allspin_reversed"===t.setoptions.zenith_mods[0]?("none"===t.zenith.lastclearspin&&"none"===n||t.zenith.lastclearcount===s&&"none"!==t.zenith.lastclearspin&&"none"!==n)&&(t.zenith.lastclearwasdupe=!0):t.zenith.lastclearcount===s&&("none"===t.zenith.lastclearspin&&"none"===n||t.zenith.lastclearspin===n&&t.zenith.lastclearpiece===t.falling.type)&&(t.zenith.lastclearwasdupe=!0),t.zenith.lastclearcount=s,t.zenith.lastclearpiece=t.falling.type,t.zenith.lastclearspin=n,t.zenith.lastclearwasdupe){const n="allspin_reversed"===t.setoptions.zenith_mods[0]?20:1;"allspin_reversed"===t.setoptions.zenith_mods[0]&&(t.setoptions.clutch=!1);for(let s=0;s<n;s++)e.bm.PushLine({column:Math.floor(t.rngex.nextFloat()*e.bm.ColumnWidth()),position:"abovePerma",pos:"gbd",neg:"gb",actor_neg:{tile:"wound_timer",data:{type:"clears",amt:5+t.stats.zenith.floor},anchor:"stack"}});e.c.OnClient((()=>{e.gpm.Vibrate(mi.GARBAGERISE),e.sfx.Play("garbagerise"),e.sfx.Play("wound"),e.hm.H.holderstate.ds+=5*e.lm.H.lastdT}))}e.c.OnClient((()=>{e.hm.H.board.fx("clear").delete(),e.hm.H.board.fx("tspin").delete()}))}let p=null;if(s){e.am.ClearLines(s),t.clearsbypiece[t.falling.type]||(t.clearsbypiece[t.falling.type]={});const n=`${l?"m":r?"s":"c"}${s}`;if(t.clearsbypiece[t.falling.type][n]=(t.clearsbypiece[t.falling.type][n]??0)+1,"none"!==t.setoptions.combotable&&(t.stats.combo++,t.stats.topcombo=Math.max(t.stats.combo,t.stats.topcombo),e.zthm.BumpPrompt("combo",t.stats.combo-1),t.stats.combo>1&&e.zthm.IncrementPrompt("combonohold",1)),2===s&&(e.zthm[t.lastdoublepiece===t.falling.type?"IncrementPrompt":"NixPrompt"]("doublespiece",1),t.lastdoublepiece=t.falling.type),!e.c.IsServer()&&t.stats.combo>1&&e.hm.H.board.fx("combo").create(t.stats.combo-1+" \fc3COMBO"),p="clearline",s>=4?(a++,e.c.OnClient((()=>{t.stats.btb?(e.gpm.Vibrate(mi.CLEARB2B),p="clearbtb"):(e.gpm.Vibrate(mi.CLEARQUAD),p="clearquad")}))):r?(a++,e.c.OnClient((()=>{e.gpm.Vibrate(mi.CLEARSPIN),p="clearspin"}))):e.c.OnClient((()=>{e.gpm.Vibrate(mi.CLEARLINE)})),e.hm.H.holderstate.dy+=8*s*e.lm.H.lastdT,!e.c.IsServer()&&s>=1){let n=e.cm.constants.Strings.cleartypes[s]||e.cm.constants.Strings.cleartypes[21];c||"allspin_reversed"!==t.setoptions.zenith_mods[0]||(n=e.cm.constants.Strings.cleartypes[0]),e.hm.H.board.fx("clear").create(n)}if(e.zthm.IncrementPrompt("lines",s),"o"===t.falling.type&&e.zthm.IncrementPrompt("oclear",s),"i"===t.hold&&e.zthm.IncrementPrompt("iholdlines",s),e.zthm.NixPrompt("noclear"),1===s&&e.zthm[1===t.stats.combo?"IncrementPrompt":"NixPrompt"]("singlenocombo"),"t"===t.falling.type||"i"===t.falling.type?e.zthm.NixPrompt("linesnoti"):e.zthm.IncrementPrompt("linesnoti",s),t.setoptions.zenith_expert||e.zthm.AwardLines(Math.min(2,s),!1),i&&!t.setoptions.allclear_b2b_dupes&&(a=Math.max(t.setoptions.allclear_b2b,a-t.setoptions.allclear_b2b)),t.setoptions.allclear_charges&&i&&(a=Math.max(a,t.setoptions.b2bcharge_at+1-t.stats.btb)),c)switch(t.falling.type){case"s":case"z":e.zthm.IncrementPrompt("szspin");break;case"l":case"j":e.zthm.IncrementPrompt("ljspin")}t.setoptions.zenith_duo&&c&&(t.zenith.spinbuckets.includes(t.falling.type)||(t.zenith.spinbuckets.push(t.falling.type),e.zthm.IncrementPrompt("spinbuckets"))),e.zthm[1===s?"IncrementPrompt":"NixPrompt"]("singlesonly")}else t.stats.combo>3&&e.sfx.Play("combobreak"),t.stats.combo=0,t.stats.combopower=0,e.zthm.NixPrompt("combo"),e.zthm.IncrementPrompt("noclear"),e.zthm.NixPrompt("combonohold"),e.zthm.NixPrompt("combospin");if("doublehole_reversed"===t.setoptions.zenith_mods[0]&&(a=0),a>0)t.stats.btb+=a,t.stats.topbtb=Math.max(t.stats.btb,t.stats.topbtb),e.zthm.BumpPrompt("b2b",t.stats.btb-1),e.c.OnClient((()=>{e.hm.IsFullMode()&&0!==e.lm.H.soundSkipRate&&xl.play("bgcircle"),t.stats.btb>1&&(t.setoptions.b2bchaining||t.setoptions.b2bcharging||e.hm.H.board.fx("also").create(`${e.cm.constants.Strings.extra.btb}${t.stats.btb>2?" \fc3X\f5"+(t.stats.btb-1):""}`))}));else if(s){if(!e.c.IsServer()&&t.setoptions.b2bcharging)switch(e.hm.H.board.el("b2b").update(t.stats.btb>t.setoptions.b2bcharge_at?"down_send":"down",0),!0){case t.stats.btb>=t.setoptions.b2bcharge_at+20:e.sfx.Play("b2bcharge_blast_4");break;case t.stats.btb>=t.setoptions.b2bcharge_at+8:e.sfx.Play("b2bcharge_blast_3");break;case t.stats.btb>=t.setoptions.b2bcharge_at+4:e.sfx.Play("b2bcharge_blast_2");break;case t.stats.btb>t.setoptions.b2bcharge_at:e.sfx.Play("b2bcharge_blast_1")}else!e.c.IsServer()&&t.setoptions.b2bchaining&&e.hm.H.board.el("b2b").update(t.stats.btb>2?"down_large":"down",0);if(t.setoptions.b2bcharging&&t.stats.btb>t.setoptions.b2bcharge_at){const n=Math.floor((t.stats.btb-t.setoptions.b2bcharge_at+t.setoptions.b2bcharge_base)*t.setoptions.garbagemultiplier),s=[Math.round(n/3),Math.round(n/3),n-2*Math.round(n/3)],i=t.stats.garbage.attack;for(const n of s)if(n)switch(t.setoptions.garbageblocking){case"combo blocking":case"limited blocking":e.atm.FightLines(n);break;case"none":t.stats.garbage.attack+=n,e.atm.Offence(n)}t.lastoffensive.surge+=t.stats.garbage.attack-i,e.c.OnClient((()=>{if(e.hm.IsFullMode()&&0!==e.lm.H.soundSkipRate){const t=nc(e.hm.H.stackobj,0,0);xl.play("b2bcharge_release",{x:t.x,y:t.y,w:e.W*e.hm.S(),h:e.H*e.hm.S()})}}))}t.stats.btb=0,e.zthm.NixPrompt("b2b"),t.setoptions.b2bchaining&&t.stats.btbpower>=2&&e.sfx.Play("btb_break")}if(e.zthm[2!==s||!c||"s"!==t.falling.type&&"z"!==t.falling.type?"NixPrompt":"IncrementPrompt"]("szspinconsecutive"),e.zthm[2!==s||!c||"l"!==t.falling.type&&"j"!==t.falling.type?"NixPrompt":"IncrementPrompt"]("ljspinconsecutive"),e.zthm[2===s&&"o"===t.falling.type?"IncrementPrompt":"NixPrompt"]("odoubleconsecutive"),e.zthm[2===s&&"z"===t.falling.type?"IncrementPrompt":"NixPrompt"]("zdoubleconsecutive"),e.zthm[2===s&&"s"===t.falling.type?"IncrementPrompt":"NixPrompt"]("sdoubleconsecutive"),e.zthm[2===s&&["s","z"].includes(t.falling.type)?"IncrementPrompt":"NixPrompt"]("szdoubleconsecutive"),e.zthm[3===s&&"j"===t.falling.type?"IncrementPrompt":"NixPrompt"]("jtripleconsecutive"),e.zthm[3===s&&"l"===t.falling.type?"IncrementPrompt":"NixPrompt"]("ltripleconsecutive"),e.zthm[3===s&&["l","j"].includes(t.falling.type)?"IncrementPrompt":"NixPrompt"]("ljtripleconsecutive"),e.zthm[4===s?"IncrementPrompt":"NixPrompt"]("quadconsecutive"),e.zthm[1===s?"IncrementPrompt":"NixPrompt"]("singleconsecutive"),e.zthm[4===s&&t.stats.combo>2?"IncrementPrompt":"NixPrompt"]("quadcombo"),e.zthm[1!==s||"s"!==t.falling.type&&"z"!==t.falling.type?"NixPrompt":"IncrementPrompt"]("szsingle"),s>0&&c&&e.zthm.IncrementPrompt("combospin"),c&&["s","z","l","j"].includes(t.falling.type)&&e.zthm.IncrementPrompt("szljspin"),t.holdlocked||e.zthm.NixPrompt("holdconsecutive"),c&&"i"===t.falling.type&&s&&(t.cancelstreak=Math.max(0,t.cancelstreak-2),t.zenith.staletime=e.esm.frame,t.zenith.stalepieces=0),r&&(e.c.OnClient((()=>{if(e.sfx.Play("spinend"),e.hm.IsFullMode()&&0!==e.lm.H.soundSkipRate){const n=e.cm.GetMinoColor(t.falling.type),s=e.cm.constants.Strings.tspins[l?"mini":"normal"].replace("%%PIECE%%",t.falling.type.toUpperCase());e.hm.H.board.fx("tspin").create(s,{color:n})}})),t.stats.tspins++,l&&"t"===t.falling.type&&(e.zthm.IncrementPrompt("tspinmini"),s&&e.zthm.IncrementPrompt("tspinminiclear"))),"i"===t.falling.type&&s&&c&&e.zthm.IncrementPrompt("ispinclear"),s&&c){let n;if(e.zthm.IncrementPrompt("spinclear"),["s","z"].includes(t.falling.type)&&(n=t.zenith.columnsicknessbuckets_sz),["l","j"].includes(t.falling.type)&&(n=t.zenith.columnsicknessbuckets_lj),n){const s=n.indexOf(t.falling.x);-1!==s&&n.splice(s,1),n.push(t.falling.x),n.length>2&&(n.shift(),t.cancelstreak=Math.max(0,t.cancelstreak-2),t.zenith.staletime=e.esm.frame,t.zenith.stalepieces=0)}}else s||e.zthm.NixPrompt("spinclear");if(c&&e.zthm.IncrementPrompt("spin"),!s&&"i"===t.falling.type&&t.falling.r%2==1){const n=t.falling.x+(1===t.falling.r?1:0),s=Math.min(e.T-4,Math.floor(t.falling.y));let i=-1;switch(n){case 0:i=1;break;case 1:i=0;break;case e.W-2:i=e.W-1;break;case e.W-1:i=e.W-2}let o=0;if(-1!==i)for(let e=0;e<4;e++)"i"===t.board[s+e][i]&&o++;4===o&&(t.cancelstreak+=3)}if(s&&c&&("s"===t.falling.type||"z"===t.falling.type)){let e=0;for(let n=0;n<t.zenith.szsickness.length;n++)t.zenith.szsickness[n]===t.falling.type&&e++;e>=5&&(t.cancelstreak+=2),t.zenith.szsickness.push(t.falling.type),t.zenith.szsickness.length>6&&t.zenith.szsickness.shift()}let h=0,d=0;switch(s){case 0:l?(h=e.cm.constants.scoring.TSPIN_MINI,d=e.cm.constants.garbage.TSPIN_MINI,t.stats.clears.minitspins++):r&&(h=e.cm.constants.scoring.TSPIN,d=e.cm.constants.garbage.TSPIN,t.stats.clears.realtspins++),c&&e.zthm.IncrementPrompt("noclearspin");break;case 1:l?(h=e.cm.constants.scoring.TSPIN_MINI_SINGLE,d=e.cm.constants.garbage.TSPIN_MINI_SINGLE,t.stats.clears.minitspinsingles++):r?(h=e.cm.constants.scoring.TSPIN_SINGLE,d=e.cm.constants.garbage.TSPIN_SINGLE,t.stats.clears.tspinsingles++,"t"===t.falling.type&&e.zthm.IncrementPrompt("tspinsingle")):(h=e.cm.constants.scoring.SINGLE,d=e.cm.constants.garbage.SINGLE,t.stats.clears.singles++,!t.setoptions.zenith||t.setoptions.zenith_expert||t.setoptions.zenith_mods.length&&t.setoptions.zenith_mods[0].includes("_reversed")||1!==t.stats.combo||d++),"i"===t.falling.type&&t.falling.r%2==0&&e.zthm.IncrementPrompt("iflat"),"i"!==t.falling.type||e.fm.WasMoved()||e.zthm.IncrementPrompt("iclearspam"),"o"===t.falling.type&&e.zthm.IncrementPrompt("osingle");break;case 2:l?(h=e.cm.constants.scoring.TSPIN_MINI_DOUBLE,d=e.cm.constants.garbage.TSPIN_MINI_DOUBLE,t.stats.clears.minitspindoubles++,"t"===t.falling.type&&e.zthm.IncrementPrompt("tspindoublemini")):r?(h=e.cm.constants.scoring.TSPIN_DOUBLE,d=e.cm.constants.garbage.TSPIN_DOUBLE,t.stats.clears.tspindoubles++,"t"===t.falling.type&&(e.zthm.IncrementPrompt("tspindouble"),0!==t.falling.x&&9!==t.falling.x||e.zthm.IncrementPrompt("tspindtcolumn"),0===t.falling.r&&e.zthm.IncrementPrompt("tspindoubleup"),t.stats.combo>2&&e.zthm.IncrementPrompt("tspincombo"))):(h=e.cm.constants.scoring.DOUBLE,d=e.cm.constants.garbage.DOUBLE,t.stats.clears.doubles++),e.zthm.IncrementPrompt("double"),"o"===t.falling.type&&e.zthm.IncrementPrompt("odouble"),"z"===t.falling.type&&(e.zthm.IncrementPrompt("zdouble"),e.zthm.IncrementPrompt("szdouble")),"s"===t.falling.type&&(e.zthm.IncrementPrompt("sdouble"),e.zthm.IncrementPrompt("szdouble")),c&&"i"===t.falling.type&&e.zthm.IncrementPrompt("ispindouble"),"o"!==t.falling.type||e.fm.WasMoved()||e.zthm.IncrementPrompt("oclearspam");break;case 3:l?(h=e.cm.constants.scoring.TSPIN_MINI_TRIPLE,d=e.cm.constants.garbage.TSPIN_MINI_TRIPLE,t.stats.clears.minitspintriples++):r?(h=e.cm.constants.scoring.TSPIN_TRIPLE,d=e.cm.constants.garbage.TSPIN_TRIPLE,t.stats.clears.tspintriples++,"t"===t.falling.type&&e.zthm.IncrementPrompt("tspintriple"),"t"!==t.falling.type||0!==t.falling.x&&9!==t.falling.x||e.zthm.IncrementPrompt("tspindtcolumn")):(h=e.cm.constants.scoring.TRIPLE,d=e.cm.constants.garbage.TRIPLE,t.stats.clears.triples++),e.zthm.IncrementPrompt("triple"),"j"===t.falling.type&&(e.zthm.IncrementPrompt("jtriple"),e.zthm.IncrementPrompt("ljtriple")),"l"===t.falling.type&&(e.zthm.IncrementPrompt("ltriple"),e.zthm.IncrementPrompt("ljtriple")),!c||"l"!==t.falling.type&&"j"!==t.falling.type||e.zthm.IncrementPrompt("ljspintriple"),!c||"s"!==t.falling.type&&"z"!==t.falling.type||e.zthm.IncrementPrompt("szspintriple");break;case 4:{l?(h=e.cm.constants.scoring.TSPIN_MINI_QUAD,d=e.cm.constants.garbage.TSPIN_MINI_QUAD,t.stats.clears.minitspinquads++):r?(h=e.cm.constants.scoring.TSPIN_QUAD,d=e.cm.constants.garbage.TSPIN_QUAD,t.stats.clears.tspinquads++):(h=e.cm.constants.scoring.QUAD,d=e.cm.constants.garbage.QUAD,t.stats.clears.quads++),e.zthm.IncrementPrompt("quad"),t.cancelstreak=Math.max(0,t.cancelstreak-3),t.zenith.staletime=e.esm.frame,t.zenith.stalepieces=0;const n=t.falling.x+(1===t.falling.r?1:0);if(void 0!==t.quadcolumns[n]&&t.quadcolumns[n]++,t.setoptions.zenith_duo){const s=Math.floor(t.falling.y)+2;t.zenith.quadbuckets.includes(n)||(t.zenith.quadbuckets.push(n),e.zthm.IncrementPrompt("quadbuckets")),s<e.T-e.Hh&&e.zthm.IncrementPrompt("upperhalfquad")}if(t.setoptions.zenith){const s=t.zenith.columnsicknessbuckets_i.indexOf(n);-1!==s&&t.zenith.columnsicknessbuckets_i.splice(s,1),t.zenith.columnsicknessbuckets_i.push(n),t.zenith.columnsicknessbuckets_i.length>2&&(t.zenith.columnsicknessbuckets_i.shift(),t.cancelstreak=Math.max(0,t.cancelstreak-4),t.zenith.staletime=e.esm.frame,t.zenith.stalepieces=0)}break}case 5:r?(h=e.cm.constants.scoring.TSPIN_PENTA,d=e.cm.constants.garbage.TSPIN_PENTA,t.stats.clears.tspinpentas++):(h=e.cm.constants.scoring.PENTA,d=e.cm.constants.garbage.PENTA,t.stats.clears.pentas++);break;default:{const t=s-5;r?(h=e.cm.constants.scoring.TSPIN_PENTA+600*t,d=e.cm.constants.garbage.TSPIN_PENTA+2*t):(h=e.cm.constants.scoring.PENTA+400*t,d=e.cm.constants.garbage.PENTA+t);break}}r&&"handheld"===t.setoptions.spinbonuses&&"t"!==t.falling.type&&(d/=2);const u=t.setoptions.allclear_b2b_sends||!(t.setoptions.allclear_b2b===a&&i);if((s||a)&&t.stats.btb>1){if(u&&(h*=e.cm.constants.scoring.BACKTOBACK_MULTIPLIER),t.setoptions.b2bcharging&&e.c.OnClient((()=>{const n=t.stats.btb-a>t.setoptions.b2bcharge_at,s=t.stats.btb>t.setoptions.b2bcharge_at;switch(e.hm.H.board.el("b2b").update(s&&!n?"up_charged":"up",t.stats.btb-1),s&&!n&&e.sfx.Play("b2bcharge_start"),!0){case t.stats.btb>t.setoptions.b2bcharge_at+20:e.sfx.Play("b2bcharge_4");break;case t.stats.btb>t.setoptions.b2bcharge_at+8:e.sfx.Play("b2bcharge_3");break;case t.stats.btb>t.setoptions.b2bcharge_at+4:e.sfx.Play("b2bcharge_2");break;case t.stats.btb>t.setoptions.b2bcharge_at:e.sfx.Play("b2bcharge_1")}if(t.stats.btb>4&&0!==e.lm.H.soundSkipRate)switch(!0){case e.tm.b2bdistance>=19:setTimeout((()=>e.sfx.Play("b2bcharge_distance_3")),50);break;case e.tm.b2bdistance>=11:setTimeout((()=>e.sfx.Play("b2bcharge_distance_2")),50);break;case e.tm.b2bdistance>=7:setTimeout((()=>e.sfx.Play("b2bcharge_distance_1")),50)}if(t.stats.btb>t.setoptions.b2bcharge_at&&e.hm.IsFullMode()&&0!==e.lm.H.soundSkipRate){const i=nc(e.hm.H.stackobj,0,0);xl.play("b2bcharge_flair",{x:i.x,y:i.y,w:e.W*e.hm.S(),h:e.H*e.hm.S(),start:s&&!n,amt:t.stats.btb-1,evil:"allspin_reversed"===t.setoptions.zenith_mods[0]})}})),t.setoptions.b2bchaining){const n=e.cm.constants.garbage.BACKTOBACK_BONUS*(Math.floor(1+Math.log1p((t.stats.btb-1)*e.cm.constants.garbage.BACKTOBACK_BONUS_LOG))+(t.stats.btb-1==1?0:(1+Math.log1p((t.stats.btb-1)*e.cm.constants.garbage.BACKTOBACK_BONUS_LOG)%1)/3));if(u&&(d+=n),Math.floor(n)>=2&&e.fim.AddFire(20*Math.floor(n-1)-10),e.c.OnClient((()=>{Math.floor(n)>t.stats.btbpower&&Math.floor(n)>=2?e.hm.H.board.el("b2b").update("up_large",t.stats.btb-1):e.hm.H.board.el("b2b").update("up",t.stats.btb-1)})),Math.floor(n)>t.stats.btbpower&&(t.stats.btbpower=Math.min(Math.floor(n),255),e.c.OnClient((()=>{2===t.stats.btbpower?e.sfx.Play("btb_1"):3===t.stats.btbpower?e.sfx.Play("btb_2",1.25):t.stats.btbpower>=4&&e.sfx.Play("btb_3",1.5)}))),!e.c.IsServer()&&t.stats.btbpower>=3&&e.hm.IsFullMode()){const t=nc(e.hm.H.stackobj,0,0);xl.play("b2b_flair",{x:t.x,y:t.y,w:e.W*e.hm.S(),h:e.H*e.hm.S()})}}else if(u){let n=1;t.setoptions.b2bextras&&(4===s||s>=2&&r)&&(n=2),d+=e.cm.constants.garbage.BACKTOBACK_BONUS*n}}else(s||a)&&t.stats.btb<=1&&(t.stats.btbpower=0);if(t.stats.combo>1)if(h+=e.cm.constants.scoring.COMBO*(t.stats.combo-1),"multiplier"===t.setoptions.combotable)d*=1+e.cm.constants.garbage.COMBO_BONUS*(t.stats.combo-1),t.stats.combo>2&&(d=Math.max(Math.log1p(e.cm.constants.garbage.COMBO_MINIFIER*(t.stats.combo-1)*e.cm.constants.garbage.COMBO_MINIFIER_LOG),d));else{const n=e.cm.constants.garbage.combotable[t.setoptions.combotable]||[0];d+=n[Math.max(0,Math.min(t.stats.combo-2,n.length-1))]}if(s&&"none"!==t.setoptions.garbagetargetbonus){let e=0;switch(t.enemies.length){case 0:case 1:break;case 2:e+=1;break;case 3:e+=3;break;case 4:e+=5;break;case 5:e+=7;break;default:e+=9}"offensive"===t.setoptions.garbagetargetbonus?d+=e:t.garbagebonus=e*t.setoptions.garbagemultiplier}let _=e.atm.AutoRound(d*t.setoptions.garbagemultiplier);if(t.setoptions.garbagespecialbonus&&o&&(4===s||r)&&_++,t.setoptions.garbageattackcap&&(_=Math.floor(Math.min(t.setoptions.garbageattackcap,_))),"doublehole_reversed"===t.setoptions.zenith_mods[0])if(t.zenith.blighted&&(_=e.atm.AutoRound(1.75*_)),o){if(!t.zenith.blighted&&(t.zenith.blighted=!0,!e.c.IsServer()&&e.hm.IsFullMode()&&0!==e.lm.H.soundSkipRate)){const t=nc(e.hm.H.stackobj,0,0);xl.play("b2b_flair",{x:t.x,y:t.y,w:e.W*e.hm.S(),h:e.H*e.hm.S(),tint:[16711762,16765010]}),e.sfx.Play("b2bcharge_start")}}else if(t.zenith.blighted&&s){if(t.zenith.blighted=!1,!e.c.IsServer()&&e.hm.IsFullMode()&&0!==e.lm.H.soundSkipRate){const t=nc(e.hm.H.stackobj,0,0);xl.play("b2bcharge_release",{x:t.x,y:t.y,w:e.W*e.hm.S(),h:e.H*e.hm.S()}),e.sfx.Play("b2bcharge_blast_1")}_++}else _=0;switch("allspin_reversed"===t.setoptions.zenith_mods[0]&&c&&t.stats.btb-1>t.setoptions.b2bcharge_at&&_++,t.stats.combo>2&&(t.stats.combopower=Math.min(Math.max(t.stats.combopower,_),7)),h*=t.stats.level,t.stats.score+=h,t.setoptions.zenlevels&&(t.stats.zenprogress+=e.znm.ScoreToZenProgress(h,t.stats.zenlevel)),p&&"doublehole_reversed"===t.setoptions.zenith_mods[0]&&_<=0&&(p="clearline"),p&&!e.c.IsServer()&&e.sfx.Play(p),s&&t.stats.combo>1&&e.sfx.Play(`combo_${Math.min(16,t.stats.combo-1)}${t.stats.combopower>=7?"_power":""}`,t.stats.combopower>=7?_>=7?2.2:1.75:1),s&&t.stats.combo>1&&t.stats.combopower>=7&&e.fim.AddFire(5),t.setoptions.b2bcharging&&e.elm.emit("b2bstate",t.stats.btb),t.setoptions.garbageblocking){case"combo blocking":return(s||_)&&e.atm.FightLines(_),!(!s&&!_);case"limited blocking":return(s||_)&&e.atm.FightLines(_),!1;case"none":return t.stats.garbage.attack+=_,e.atm.Offence(_),!1}}function o(n){if(n){e.c.OnClient((()=>{e.sfx.Play("allclear"),e.hm.IsFullMode()&&0!==e.lm.H.soundSkipRate&&("minimal"!==ot.video.graphics&&"off"!==ot.video.actiontext&&"some"!==ot.video.actiontext&&e.hm.H.board.fx("allclear").create(e.cm.constants.Strings.extra.clear),xl.play("bgcircle"))})),t.stats.score+=e.cm.constants.scoring.ALL_CLEAR*t.stats.level,t.setoptions.zenlevels&&(t.stats.zenprogress+=e.znm.ScoreToZenProgress(e.cm.constants.scoring.ALL_CLEAR*t.stats.level,t.stats.zenlevel)),t.stats.clears.allclear++,t.cancelstreak+=3;const n=e.atm.AutoRound(t.setoptions.allclear_garbage*t.setoptions.garbagemultiplier);switch(t.setoptions.garbageblocking){case"combo blocking":case"limited blocking":e.atm.FightLines(n);break;case"none":t.stats.garbage.attack+=n,e.atm.Offence(n)}}t.setoptions.zenith_duo&&e.bm.IsUncolored()&&e.zthm.IncrementPrompt("colorclear")&&e.c.OnClient((()=>{e.sfx.Play("allclear"),e.hm.IsFullMode()&&0!==e.lm.H.soundSkipRate&&("minimal"!==ot.video.graphics&&"off"!==ot.video.actiontext&&"some"!==ot.video.actiontext&&e.hm.H.board.fx("allclear").create(e.cm.constants.Strings.extra.colorclear),xl.play("bgcircle"))}))}return{ClearLines:function(){const n=e.bm.GetFullLines();t.lastoffensive.x=t.falling.x,t.lastoffensive.y=Math.round(n.length?n[Math.round((n.length-1)/2)]:t.falling.y),t.lastoffensive.offence=0,t.lastoffensive.defense=0,t.lastoffensive.surge=0,t.lastwasclear=!!n.length,t.lastreceivedcount=0;const a=s(n);n.length&&e.bm.RemoveLinesFromStack(n,void 0,t.setoptions.lineclear_are>0);const r=!1!==t.setoptions.allclears&&(t.setoptions.zenith?e.bm.IsEmptyWithUnclearable():e.bm.IsEmptyWithPerma());return t.nextwilltank=!i(n.length,r,a),t.nextwilltank||(t.garbagearelockeduntil=Math.max(t.garbagearelockeduntil,e.esm.frame+t.setoptions.garbagearebump)),!1!==t.setoptions.allclears&&o(r),!t.nextwilltank||0!==(n.length?t.setoptions.lineclear_are:t.setoptions.are)&&"instant"===t.setoptions.garbageentry||(e.atm.TakeAllDamage(),t.nextwilltank=!1),e.atm.AnnounceOffensive(),e.zthm.AfterLineClear(),n.length},LevelLines:n,AnnounceDownstack:s,AnnounceLines:i,AnnounceClear:o}},Y=function(e){"use strict";const t=e.gsm,n={playbackSpeed:1,soundSkipRate:1,soundPitchAdjust:1,soundVolumeAdjust:1,stopgame:!1,stopdraw:!1,ticksgame:!1,ticksdraw:!1,lastdT:1,lastdTs:[],mustRerenderTiny:!1,diter:0,cheekystep:Math.floor(60+60*Math.random())},s=1/60;let i=0,a=!0,r=0,l=null;let c=0;function p(){if(e.iom.IsSynced()&&!e.esm.IsFinished()&&e.esm.IsNextFrameReady()&&!e.elm.emit("frame",e.esm.frame,0===n.soundSkipRate)){if(t.subframe=0,e.esm.Pull(),e.esm.AdvanceFrame(),e.im.ProcessAllShift(),e.fm.Fall(),e.im.ProcessInterrupts(),e.wfm.ExecuteWaitingFrames(),e.wfm.ExecuteUnsafeWaitingFrames(),e.bm.ProcessGarbageARE(),e.rbm.CheckObjectiveCleared(),e.spm.LowerSpikeClock(),e.atm.ProcessHesitatedAttacks(),t.setoptions.display_fire&&e.fim.LowerFire(),t.setoptions.gincrease&&e.esm.frame>t.setoptions.gmargin&&(t.g+=t.setoptions.gincrease/60),t.setoptions.garbageincrease&&e.esm.frame>t.setoptions.garbagemargin&&(t.setoptions.garbagemultiplier+=t.setoptions.garbageincrease/60),t.setoptions.garbagecapincrease&&e.esm.frame>t.setoptions.garbagecapmargin&&(t.setoptions.garbagecap+=t.setoptions.garbagecapincrease/60),e.svm.Update(),e.tm.Update(),e.am.ProgressActors(),e.trm.Update(),e.zthm.Update(),e.sfx.Update(),!t.setoptions.noreplay){e.iom.replay.AdvanceFrame();const n=e.iom.replay.frame-t.setoptions.fulloffset;0!==n&&n%t.setoptions.fullinterval!=0||e.iom.replay.PushEvent("full",e.siom.Snapshot())}if(e.esm.IsFallingBehind()&&++c<=1200){const t=e.esm.AmountToCatchUp();n.soundSkipRate=Math.max(0,n.soundSkipRate/1.25),n.soundSkipRate<=1e-6&&(n.soundSkipRate=0),p(),n.soundSkipRate=1,!e.c.IsServer()&&!e.hm.IsTinyMode()&&t>90&&Ia("loss")}if(e.esm.GetBehindness()>=1.25){const t=Math.max(Math.floor(8-(e.esm.GetBehindness()-1.25)),0)+2;e.esm.frame%t==0&&p()}c=0}}function h(n){e.c.IsServer()||(e.hm.H.stackdirty&&(tc(e.hm.H.stackobj),e.sdm.DrawStack(),e.hm.H.stackdirty=!1,e.hm.H.stackmud=[],e.hm.IsFullMode()&&(Yl=!0)),e.hm.H.stackmud.length&&(e.sdm.DrawStackMud(),e.hm.H.stackmud=[],e.hm.IsFullMode()&&(Yl=!0)),"minimal"===ot.video.graphics||!1===ot.video.siren||t.setoptions.nosiren||e.pm.WarningSiren(n),e.hm.H.fallingdirty&&!e.hm.IsTinyMode()&&(tc(e.hm.H.fallingobj),e.sdm.DrawFalling(),e.hm.H.fallingdirty=!1,e.hm.IsFullMode()&&(Yl=!0)),e.hm.IsTinyMode()||e.sdm.DrawFallingOpacity(),e.hm.IsTinyMode()||(e.dsm.UpdateCounts(),e.dsm.UpdateTimers()),"minimal"===ot.video.graphics||!1===ot.video.siren||t.setoptions.nosiren||(e.pm.HyperTopoutWarningExtremePlus(n),e.pm.HoldWarning()),e.hm.PullHolder(!1,n),t.setoptions.display_fire&&e.fim.PullFire(n),e.hm.H.nextdirty&&!e.hm.IsTinyMode()&&(e.sdm.DrawNext(),e.hm.H.nextdirty=!1,e.hm.IsFullMode()&&(Yl=!0)),e.hm.H.holddirty&&!e.hm.IsTinyMode()&&(e.sdm.DrawHold(),e.hm.H.holddirty=!1,e.hm.IsFullMode()&&(Yl=!0)),!e.stm.H.stockExploding||!e.hm.IsFullMode()||"high"!==ot.video.graphics&&"ultra"!==ot.video.graphics||t.setoptions.infinite_stock||e.stm.ExplodingStock(n),t.setoptions.invisible&&!e.hm.IsTinyMode()&&e.sdm.RenderPulsingInvisible(n),t.setoptions.master_invisible&&!e.hm.IsTinyMode()&&e.sdm.RenderInvisible(),e.hm.IsTinyMode()||(e.hm.H.board.progress(n),e.am.PullActors(n)))}return{H:n,GetGameTime:function(){return 1e3*(e.esm.frame+t.subframe)/60},GameLoop:function c(){if(e.c.IsServer(!0))return;if(n.stopgame)return n.stopgame=!1,o.Ticker.shared.remove(c),void(n.ticksgame=!1);if(e.c.IsServer())return;if(!t.started)return;null===l&&(l=performance.now());const h=performance.now();r+=Math.min(5,(h-l)/1e3);let d=-2;for(;r>=s;){for(r-=s,d++,i+=n.playbackSpeed;i>=1;)i--,p();a&&(a=!1,r=0)}e.iom.IsLocal()&&Wo.addGameM(Math.max(0,d)),l=h},DoFrame:function(){e.c.IsServer()&&p()},DrawLoop:function t(s){if(!e.c.IsServer(!0)){if(n.stopdraw)return n.stopdraw=!1,o.Ticker.shared.remove(t),void(n.ticksdraw=!1);if(!e.c.IsServer())if(e.hm.IsTinyMode()){const t=e.hm.H.holderneedsrepull||Math.round(e.hm.H.holderstate.ox*("minimal"!==ot.video.graphics?100:1))!=Math.round(e.hm.H.holderstate.cox*("minimal"!==ot.video.graphics?100:1))||Math.round(e.hm.H.holderstate.oy*("minimal"!==ot.video.graphics?100:1))!=Math.round(e.hm.H.holderstate.coy*("minimal"!==ot.video.graphics?100:1))||Math.round(e.hm.H.holderstate.oy*("minimal"!==ot.video.graphics?100:1))!=Math.round(e.hm.H.holderstate.coy*("minimal"!==ot.video.graphics?100:1));n.diter+=s,n.mustRerenderTiny||n.diter>=n.cheekystep?(n.diter-=n.cheekystep,n.mustRerenderTiny=!1,"low"!==ot.video.caching&&(e.hm.H.holder.cacheAsBitmap=!1),h(),"low"!==ot.video.caching&&(e.hm.H.holder.cacheAsBitmap=!0)):t&&e.hm.PullHolder(s)}else h(s)}},AdvanceFrames:function(t,s){s&&(n.soundSkipRate=0);for(let e=0;e<t;e++)p();s&&(n.soundSkipRate=1,e.hm.H.holderstate.x=0,e.hm.H.holderstate.y=0,e.hm.H.holderstate.r=0,e.hm.H.holderstate.s=0,e.hm.H.holderstate.w=0,e.hm.H.holderstate.dx=0,e.hm.H.holderstate.dy=0,e.hm.H.holderstate.dr=0,e.hm.H.holderstate.ds=0,e.hm.H.holderstate.dw=0,e.elm.emit("frame",e.esm.frame,!1))},Update:p,Render:h}},Q=function(e){"use strict";let t=0,n=1/0;return{SetPlacement:function(s){e.gsm.placement=s,e.c.IsServer()||(t=Math.max(t,s),"minimal"!==ot.video.graphics&&"off"!==ot.video.actiontext&&"some"!==ot.video.actiontext&&(t>=150&&n>100&&s<=100&&e.hm.H.board.fx("timeleft").create("100 \fc3PLAYERS LEFT"),t>=60&&n>30&&s<=30&&e.hm.H.board.fx("timeleft").create("30 \fc3PLAYERS LEFT"),t>=30&&n>10&&s<=10&&e.hm.H.board.fx("timeleft").create("10 \fc3PLAYERS LEFT")),n=Math.min(n,s))}}},Z=function(e){"use strict";const t=e.gsm,n={songWasPlayed:!1};return{H:n,Start(s=t.setoptions.song){e.c.IsServer()||"none"!==s&&(e.iom.IsOnline()||e.iom.IsReplay()||t.started||(xa.BgmPlaySmoothlyWithRandom(s),n.songWasPlayed=!0))},Stop(n){e.c.IsServer()||e.iom.IsOnline()||e.iom.IsReplay()||t.setoptions.neverstopbgm||xa.BgmFadeOut(n)}}},J=function(e){"use strict";const t=e.gsm;let n=null;return{CreateOverText:function(e){if(!t.setoptions.display_username)return;if(document.body.classList.contains("idlemouse"))return;n&&(n.bg.destroy(),n.fg.destroy());const s=new o.Graphics;s.beginFill(0,.75),s.drawRect(0,0,ws(10*_c.x+4),ws(26)),s.endFill(),s.position.set(e.data.global.x-ws(5*_c.x+2),e.data.global.y+32),Al.addChild(s);const i=new d.Text(t.setoptions.username.toUpperCase(),{font:Rl.get("hun"),rasterize:"minimal"===ot.video.graphics,fontSize:ws(19),weight:600,tint:14540253,anchor:[.5,0]});i.position.set(e.data.global.x,e.data.global.y+32+ws(5)),Al.addChild(i),dc.animate(s,{0:{alpha:0,"pivot.y":32},.1:{alpha:1,"pivot.y":0},.75:{alpha:1,"pivot.y":0},1:{alpha:0,"pivot.y":0}},5,a(0,.34,.86,.46)),dc.animate(i,{0:{alpha:0,"pivot.y":32},.1:{alpha:1,"pivot.y":0},.75:{alpha:1,"pivot.y":0},1:{alpha:0,"pivot.y":0}},5,a(0,.34,.86,.46),(()=>{n.bg.destroy(),n.fg.destroy(),n=null})),n={bg:s,fg:i}},MoveOverText:function(e){n&&(n.bg.position.set(e.data.global.x-ws(5*_c.x+2),e.data.global.y+32),n.fg.position.set(e.data.global.x,e.data.global.y+32+ws(5)))},EndOverText:function(){n&&(n.bg.destroy(),n.fg.destroy(),n=null)}}},ee=function(e){"use strict";const t=e.gsm,n={siren:!0,sireniter:0,panicking:!1,hyperTopoutWarning:!1,alerting:!1,sirenAlwaysGood:!1,overridePos:null};let s=null,i=0;return{H:n,WarningSiren:function(s){if(e.c.IsServer())return;if(t.destroyed)return;if(!n.siren)return;let i=e.bm.HighestLine();const o=e.atm.GetPendingGarbageCount(!0);if(i=Math.max(0,i-Math.min(e.atm.GetGarbageCap(),o)),(i>e.B-1||!o||n.sirenAlwaysGood)&&n.alerting&&(e.hm.H.board.el("garbagedangericon").delete(),n.alerting=!1),i>e.B+2||n.sirenAlwaysGood)return void(n.panicking&&(e.hm.H.holderstate.tr=255,e.hm.H.holderstate.tg=255,e.hm.H.holderstate.tb=255,e.hm.H.holderstate.fgtr=0,e.hm.H.holderstate.fgtg=0,e.hm.H.holderstate.fgtb=0,n.panicking=!1,e.hm.H.board.el("skyline").delete(),e.iom.IsLocal()&&(Ml.opacity(1),Ml.scale(1))));if(n.panicking||(e.hm.H.holderstate.tr=255,e.hm.H.holderstate.tg=51,e.hm.H.holderstate.tb=0,e.hm.H.holderstate.fgtr=255,e.hm.H.holderstate.fgtg=255,e.hm.H.holderstate.fgtb=255,n.panicking=!0,e.hm.H.board.el("skyline").create(),e.iom.IsLocal()&&(Ml.opacity(.5),Ml.scale(1.01))),!e.hm.IsFullMode()||0===e.lm.H.soundSkipRate)return;if(!n.alerting&&i<=e.B-1&&o&&(e.hm.H.board.el("garbagedangericon").create(),n.alerting=!0,e.sfx.Play("damage_alert",1,.33)),e.hm.H.board.el("skyline").update(),n.sireniter+=s,0===Math.floor(n.sireniter/Math.max(50,100-15*(e.B+2-i))))return;n.sireniter-=Math.max(50,100-15*(e.B+2-i)),e.sfx.Play("warning",1,.33);const a=nc(e.hm.H.stackobj,ws(_c.x)*e.Wh,ws(_c.x)*e.Hh);xl.play("danger_flair",{x:a.x,y:a.y,w:e.W*e.hm.S(),h:e.H*e.hm.S()}),xl.play("bgsplashdanger",{direction:0,amt:e.B+6-i})},HyperTopoutWarningExtremePlus:function(o){if(t.pause)return;if(!e.hm.IsFullMode())return;if(!n.panicking)return;if(!e.fm.IsVisible())return;if(i+=o,i<1)return;i--;let a=!1;if(n.overridePos&&e.fm.IsSleep()?a=!e.bm.PieceMaySpawnHere(n.overridePos.type,n.overridePos.x,n.overridePos.y,n.overridePos.r):(n.overridePos=null,a=!e.bm.PieceMayLockHere(t.falling.type,t.falling.x,e.sdm.H.lastLegal,t.falling.r)),a){const t=nc(e.hm.H.stackobj,0,0),i=nc(e.hm.H.stackobj,ws(_c.x*e.W),ws(_c.x*e.H));return xl.play("danger_smoke",{x:t.x,y:t.y,w:i.x-t.x,h:i.y-t.y}),void(n.hyperTopoutWarning||(e.iom.IsLocal()&&(Ml.opacity(.25),Ml.scale(1.03)),n.hyperTopoutWarning=!0,s=e.sfx.Play("hyperalert",1,.33)))}n.hyperTopoutWarning&&(e.iom.IsLocal()&&(Ml.opacity(n.panicking?.5:1),Ml.scale(n.panicking?1.01:1)),n.hyperTopoutWarning=!1,s&&e.sfx.Stop(s))},HoldWarning:function(){if(!e.hm.IsFullMode()||!t.setoptions.display_hold)return;let s=!0;if(n.panicking&&e.fm.IsVisible()&&!t.pause&&!t.holdlocked||(s=!1),!s)return void e.hm.H.board.el("holdwarn").delete();const i=t.hold??t.bag[0],o=e.cm.GetPieceOffset(i),a=e.cm.GetPieceSpawnRotation(i),r=Math.ceil(e.W/2)-1+o[a][0];!e.bm.IsLegalAtPos(i,r,e.B-2.04+o[a][1],a,!0)?e.hm.H.board.el("holdwarn").create():e.hm.H.board.el("holdwarn").delete()}}},te=function(e){"use strict";const t=e.gsm,n={leftBarCount:0,rightBarCount:0,seenGarbageIDs:new Set};function s(s){for(let i=1;i<=2;i++){if(t.setoptions[`slot_bar${i}`]!==s)continue;const o=new Set,a=`bar${i}`;for(const s of t.impendingdamage){const t=s.id,i=s.type,r=s.amt/e.H,l=s.color;let c="inactive";s.active&&(c=s.status),e.hm.H.board.el(a).update("upsert",{id:t,type:i,size:r,style:c,color:l}),n.seenGarbageIDs.delete(s.id),o.add(s.id)}for(const t of n.seenGarbageIDs)e.hm.H.board.el(a).update("upsert",{id:t,size:0});n.seenGarbageIDs=o}}function i(n,s,i=0){for(let o=1;o<=2;o++)t.setoptions[`slot_bar${o}`]===n&&e.hm.H.board.el(`bar${o}`).action("flash",{size:s/e.H,pos:i})}return{H:n,UpdateBar:function(n,s){for(let i=1;i<=2;i++)t.setoptions[`slot_bar${i}`]===n&&e.hm.H.board.el(`bar${i}`).update("simple",s)},UpdateBarTicker:function(n,s,i){for(let o=1;o<=2;o++)t.setoptions[`slot_bar${o}`]===n&&e.hm.H.board.el(`bar${o}`).update("ticker",{id:s,value:i})},BlastBar:function(t){i(t,e.H)},UpdateGarbageBar:s,ResetGarbageBar:function(n){for(let s=1;s<=2;s++)t.setoptions[`slot_bar${s}`]===n&&e.hm.H.board.el(`bar${s}`).update("clear");s(n)},FlashGarbageBar:i,ForceUpdateGarbageBar:function(n){for(let s=1;s<=2;s++)t.setoptions[`slot_bar${s}`]===n&&e.hm.H.board.el(`bar${s}`).action("forceupdate")}}},ne=function(e){"use strict";const t=e.gsm;function n(n){const s=e.cm.constants.tetrominoes[n],i=e.cm.constants.spinbonuses_rules[t.setoptions.spinbonuses];return s?.spinbonus_override?s.spinbonus_override?.mini:i?.types_mini?.includes(n)}function s(){if(e.bm.IsLegalAtPos(t.falling.type,t.falling.x,t.falling.y+1,t.falling.r))return!1;if(!e.fm.HasRotated())return!1;let s=0,i=0;for(let n=0;n<4;n++){const o=e.cm.constants.cornerTable[t.falling.type]?.[t.falling.r];if(!o)break;e.bm.IsOccupied(t.falling.x+o[n][0],t.falling.y+o[n][1])&&(s++,t.falling.r!==o[n][2]&&t.falling.r!==o[n][3]||i++)}if(s<3)return!1;let o="normal";return n(t.falling.type)&&2!==i&&(o="mini"),3===t.falling.kick&&(o="normal"),o}function i(){return!(e.bm.IsLegalAtPos(t.falling.type,t.falling.x-1,t.falling.y,t.falling.r)||e.bm.IsLegalAtPos(t.falling.type,t.falling.x+1,t.falling.y,t.falling.r)||e.bm.IsLegalAtPos(t.falling.type,t.falling.x,t.falling.y-1,t.falling.r)||e.bm.IsLegalAtPos(t.falling.type,t.falling.x,t.falling.y+1,t.falling.r))}function o(){return!(t.setoptions.map||t.setoptions.can_undo||!t.setoptions.seed_random)&&e.bm.CheckStackAgainstMap("#*********_##########_##########_##########_##########_##########_##########_##########_##########_##########_########_########_########_########_########_########_########_########_########_#########")}return{IsTSpin:function(o){const a=o??function(n){const s=e.cm.constants.tetrominoes[n],i=e.cm.constants.spinbonuses_rules[t.setoptions.spinbonuses];return s?.spinbonus_override?s.spinbonus_override?.rule??"none":i?.types?.includes(n)?t.setoptions.spinbonuses:"none"}(t.falling.type);switch(a){case"stupid":return!e.bm.IsLegalAtPos(t.falling.type,t.falling.x,t.falling.y+1,t.falling.r)&&"normal";case"all":case"all+":case"all-mini":case"all-mini+":case"mini-only":{if(n(t.falling.type)){const e=s();if(e&&"mini-only"===a)return"mini";if(e||"all-mini"===a||"all"===a)return e}const e="mini-only"===a||"all-mini"===a||"all-mini+"===a||"all+"===a&&"t"===t.falling.type;return i()&&(e?"mini":"normal")}case"handheld":case"T-spins":return s();case"T-spins+":return s()||i()&&"mini";default:return!1}},CheckObjectiveCleared:function(){if(t.playing&&t.setoptions.objective_type)switch(t.setoptions.objective_type){case"lines":return void(t.stats.lines>=t.setoptions.objective_count&&(t.successful=!0,e.gom.GameOver("clear"),e.c.IsServer()||e.pbm.BlastBar("progress")));case"garbage":return void(t.stats.garbage.cleared>=t.setoptions.objective_count&&(t.successful=!0,e.gom.GameOver("clear"),e.c.IsServer()||e.pbm.BlastBar("progress")));case"timed":{const n=e.esm.frame*(1e3/60),s=Math.ceil(Math.max(0,t.setoptions.objective_time-n)/1e3);e.c.IsServer()||s===t.time.prev||t.time.locked||("minimal"!==ot.video.graphics&&"off"!==ot.video.actiontext&&"some"!==ot.video.actiontext&&(60===s&&e.hm.H.board.fx("timeleft").create("60\f3S LEFT"),30===s&&e.hm.H.board.fx("timeleft").create("30\f3S LEFT")),s>3&&s<=10?(e.iom.IsLocal()&&e.sfx.Play("timer1"),"minimal"!==ot.video.graphics&&"off"!==ot.video.actiontext&&"some"!==ot.video.actiontext&&e.hm.H.board.fx("countdown").create(s)):s<=3&&s>0&&(e.iom.IsLocal()&&e.sfx.Play("timer2"),"minimal"!==ot.video.graphics&&"off"!==ot.video.actiontext&&"some"!==ot.video.actiontext&&e.hm.H.board.fx("countdown").create(s))),t.time.prev=s,n>=t.setoptions.objective_time&&(t.successful=!0,e.gom.GameOver("clear"))}}},CheckSecretGrade:o,AwardSecrets:function(){e.iom.IsLocal()&&o()&&(e.sfx.Play("allclear"),Qt({msg:"you did a thing!",color:"#FFAE00",icon:"achievement"}),Cn.post("/api/users/award",{type:"secretgrade"}))},GetAchievements:function(){return{oneeight:10===t.quadcolumns[1]||10===t.quadcolumns[8],mrboardwide:t.quadcolumns.every((e=>1===e)),zenithduotoprevive:t.zenith.highestrevive,zenithblockrationing:t.zenith.blockrationing,zenithescapeartist:t.zenith.escapeartist,zenithtalentless:t.zenith.talentless,tsd20:(t.clearsbypiece.t?.s2??0)+(t.clearsbypiece.t?.m2??0)>=20}}}};ne.SpinRules=["none","T-spins","T-spins+","all","all+","all-mini","all-mini+","mini-only","handheld","stupid"];class se extends k{static tetrominoes=new Set(["o","l","j","z","s","t","i"]);static attacks=new Set(["garbage_out_small","garbage_in_small","garbage_out_medium","garbage_in_medium","garbage_out_large","garbage_in_large","counter","offset","damage_small","damage_medium","damage_large","impact","damage_alert"]);static importantSfx=new Set(["thunder1","thunder2","thunder3","thunder4","thunder5","thunder6","allclear","clearbtb","clearquad","clearspin","clearline"]);static shouldOnlyPlayOnce=new Set(["voidhole"]);_played=new Set;Update(){this._played.clear()}Play(e,t=1,n=1,s=1){if(this.self.c.IsServer())return;if(0===this.self.lm.H.soundSkipRate)return;if(this.options.nosound)return;if(this.self.iom.IsOnline()&&("minimal"===ot.video.graphics||!1===ot.volume.others))return;if(this.self.hm.IsTinyMode())return;if(se.tetrominoes.has(e)&&!1===ot.volume.next)return;if(se.attacks.has(e)&&("minimal"===ot.video.graphics||!1===ot.volume.attacks))return;if(this._played.has(e))return;se.shouldOnlyPlayOnce.has(e)&&this._played.add(e);const i=se.importantSfx.has(e);!this.self.iom.IsLocal()&&this.self.hm.IsSmallMode()&&(t=n,t*=i?.2:.05),i||(t*=this.self.lm.H.soundSkipRate),t*=this.self.lm.H.soundVolumeAdjust;const o=this.self.hm.H.holderstate.cox,a=Math.min(1,this.self.hm.H.holderstate.cos)*t,r=Math.max(-1,Math.min(1,o*(void 0===ot.volume.stereo?.5:ot.volume.stereo)));return xa.SePlay(e,a,r,s*=this.self.lm.H.soundPitchAdjust)}Stop(e){return xa.SeStop(e)}}const ie=function(e){"use strict";const t=e.gsm;return{LowerSpikeClock:function(){0!==t.spike.timer&&(t.spike.timer--,0===t.spike.timer&&(t.spike.count=0,t.spike.count_nomult=0))}}},oe=function(e){"use strict";return{GlobalShout:function(t,n,s){if(e.c.IsServer())return;if(!e.hm.IsFullMode())return;if(!e.iom.IsLocal()&&!s)return;const i=document.createElement("div");i.className=`ns shout ${t}`,i.textContent=n,document.getElementsByClassName("globalshouts")[0].appendChild(i),setTimeout((()=>{i.remove()}),5e3),"ultra"===ot.video.graphics&&$l&&e.cm.constants.globalShoutStyles[t]&&e.cm.constants.globalShoutStyles[t]()}}},ae=function(e){"use strict";const t=e.gsm,n={lastLegal:e.T-5};function s(...t){return e.hm.IsTinyMode()?Ac.generatePlaceholder(...t):Ac.generate(...t)}function i(...t){return e.hm.IsTinyMode()?kc.generatePlaceholder(...t):kc.generate(...t)}let o=0;function a(n,o,a,r,l,c=!1,p=!1,h=!1){if(e.c.IsServer())return;const d=e.fm.GetPieceDefinition(o,l),u=e.cm.GetPieceColor(o),_=t.setoptions.minoskin[u]||t.setoptions.minoskin.other,m=c?p?"x":"g":`${h?"s_":""}${u}`,g=c?i:s;for(const[s,i,o=255]of d.data){const l=Math.ceil(r),h=a+(s-d.dx),f=l+(i-d.dy),b=g(c?t.setoptions.minoskin.ghost:_,m,o);b.position.set(h*ws(_c.x),(f-e.B)*ws(_c.x)),c&&!p&&(b.alpha=void 0===ot.video.shadowopacity?.15:ot.video.shadowopacity,ot.video.colorshadow&&(b.tint=Ac.getColor(_,u))),n.addChild(b)}}function r(n,i,o,a,r=!1,l=1){if(e.c.IsServer())return;const c=e.fm.GetPiecePreviewDefinition(i),p=e.cm.GetPieceColor(i),h=t.setoptions.minoskin[p]||t.setoptions.minoskin.other,d=r?"d":p;for(const[e,t,i]of c.data){const r=s(h,d,i,l);r.position.set(o+e*ws(_c.x*l)-("ultra"===ot.video.graphics?1:0),a+t*ws(_c.x*l)-("ultra"===ot.video.graphics?1:0)),n.addChild(r)}}return{H:n,DrawStack:function(){if(e.c.IsServer())return;let n=null;for(let i=e.hm.IsTinyMode()?e.B:0;i<e.T;i++)for(let o=0;o<e.W;o++){const a=t.board[i][o];if(null!==a){const r=s(t.setoptions.minoskin[a]||t.setoptions.minoskin.other,a,t.boardedges[i][o]);"gb"!==a&&"gbd"!==a||(null===n&&(n=i),r.__gy=i-n),r.__mino=a,r.__at=0,r.__x=o,r.__y=i,r.position.set(o*ws(_c.x),(i-e.B)*ws(_c.x)),e.hm.H.stackobj.addChild(r)}}},DrawStackMud:function(){if(!e.c.IsServer())for(const n of e.hm.H.stackmud){if(null===n)continue;if(n[0]<(e.hm.IsTinyMode()?e.B:0))continue;if(null===n[2]){for(const t of e.hm.H.stackobj.children)if(t.__x===n[1]&&t.__y===n[0]){t.destroy();break}continue}const i=n[2],o=t.setoptions.minoskin[i]||t.setoptions.minoskin.other,a=s(o,i,n[3]);if(a.__mino=i,a.__at=e.esm.frame,a.__x=n[1],a.__y=n[0],a.position.set(n[1]*ws(_c.x),(n[0]-e.B)*ws(_c.x)),e.hm.H.stackobj.addChild(a),e.hm.IsFullMode()&&!["minimal","low"].includes(ot.video.graphics)){const e=Ac.generateFlash(o);e&&a.addChild(e)}}},RenderPulsingInvisible:function(n){if(e.c.IsServer()||!e.hm.H.stackobj)return;const s=(e.esm.frame+o)/60%5;let i=0;i=s<.15?s/.15:1-Math.min(1,Math.max(0,1*(s-.35)));for(const n of e.hm.H.stackobj.children){if(!n.__mino||null==n.__at)continue;let o=Math.min(1,i+Math.max(0,1-(e.esm.frame-n.__at)/10));"minimal"===ot.video.graphics&&(o=s<1?1:0),!t.pause&&t.playing||(o=1),t.setoptions.display_replay&&(o=.4+.6*o),n.alpha="gb"===n.__mino||"gbd"===n.__mino?.7+.3*o:o}o=(o+n)%1},RenderInvisible:function(){if(!e.c.IsServer()&&e.hm.H.stackobj)for(const n of e.hm.H.stackobj.children){if(!n.__mino||null==n.__at)continue;let s=Math.min(1,Math.max(0,1-(e.esm.frame-n.__at)/25));null!=n.__gy&&(s=Math.max(0,1-.34*n.__gy)),t.setoptions.display_replay&&(s=.4+.6*s),!t.pause&&t.playing||(s=1),n.alpha=s}},DrawFalling:function(){if(e.c.IsServer()||t.pause||!e.fm.IsVisible())return;if(!e.fm.IsSleep()){let s=t.falling.y;for(;;){if(!e.bm.IsLegalAtPos(t.falling.type,t.falling.x,s+1,t.falling.r)){!1!==t.setoptions.display_shadow&&a(e.hm.H.fallingobj,t.falling.type,t.falling.x,s,t.falling.r,!0);break}s++}n.lastLegal=s,a(e.hm.H.fallingobj,t.falling.type,t.falling.x,t.falling.y,t.falling.r,!1,!1,!0)}if(!e.hm.IsFullMode()||!1===t.setoptions.display_next||!e.pm.H.panicking)return;let s=t.bag[0];e.fm.IsSleep()&&!1!==t.setoptions.display_hold&&("tap"===t.handling.ihs&&e.fm.IsIHS()||"hold"===t.handling.ihs&&t.inputHold)&&(s=t.hold??t.bag[1]);const i=e.cm.GetPieceOffset(s);let o=e.cm.GetPieceSpawnRotation(s),r=Math.ceil(e.W/2)-1+i[o][0],l=e.B-2.04+i[o][1];if(e.fm.IsSleep()){let n=0;if("tap"===t.handling.irs?n=t.falling.irs:"hold"===t.handling.irs&&(t.inputRotateCCW&&(n-=1),t.inputRotateCW&&(n+=1),t.inputRotate180&&(n+=2)),0!==n){const t=e.fm.ComputeKick(s,r,l,o,((o+n)%4+4)%4);t&&({x:r,y:l,r:o}=t)}e.pm.H.overridePos={type:s,x:r,y:l,r:o}}a(e.hm.H.fallingobj,s,r,l,o,!0,!0)},DrawFallingOpacity:function(){if(e.c.IsServer())return;const n=e.hm.H.fallingobj.alpha;t.pause||e.fm.IsSleep()||"minimal"===ot.video.graphics?e.hm.H.fallingobj.alpha=1:(e.hm.H.fallingobj.alpha=1-t.falling.locking/t.setoptions.locktime/2,n!==e.hm.H.fallingobj.alpha&&e.hm.IsFullMode()&&(Yl=!0))},DrawNext:function(){if(!e.c.IsServer())for(let n=0;n<t.setoptions.nextcount;n++){if(!t.bag[n])return;if(!e.hm.H.nextobj||!e.hm.H.nextobj[n])return;tc(e.hm.H.nextobj[n]);const s=e.cm.constants.tetrominoes[t.bag[n]],[i,o]=[s.preview.w,s.preview.h];let a=1;(i>4||o>2)&&(a=i>o?3/i:2/o),r(e.hm.H.nextobj[n],t.bag[n],i*ws(_c.x*a)/-2,o*ws(_c.x*a)/-2,!1,a)}},DrawHold:function(){if(e.c.IsServer())return;if(!e.hm.H.holdobj)return;if(tc(e.hm.H.holdobj),null===t.hold)return;const n=e.cm.constants.tetrominoes[t.hold],[s,i]=[n.preview.w,n.preview.h];let o=1;(s>4||i>2)&&(o=s>i?3/s:2/i),r(e.hm.H.holdobj,t.hold,s*ws(_c.x*o)/-2,i*ws(_c.x*o)/-2,t.holdlocked&&!1!==ot.video.holdlocked,o)},RenderTetromino:a,RenderTetrominoPreview:r}},re=function(e){"use strict";const t=e.gsm,n={inputSoftdrop:!0,lShift:!0,rShift:!0,lastshift:!0,targets:!0,enemies:!0,source:!0,replay:!0,aggregatestats:!0};function s(){return{game:{board:t.board,bag:t.bag,hold:{piece:t.hold,locked:t.holdlocked},g:t.g,controlling:{lShift:t.lShift,rShift:t.rShift,lastshift:t.lastshift,inputSoftdrop:t.inputSoftdrop},falling:t.falling,handling:t.handling,playing:t.playing},stats:t.stats,diyusi:t.diyusi}}return{Snapshot:s,Export:function(){const n=Math.max(1,e.esm.frame/60),i=(t.stats.garbage.attack+t.stats.garbage.cleared)/Math.max(1,t.stats.piecesplaced);return{successful:t.successful,gameoverreason:t.gameoverreason,options:{...t.setoptions},killer:t.killer,aggregatestats:{apm:(t.stats.garbage.attack||0)/(e.esm.frame/3600||1),pps:(t.stats.piecesplaced||0)/(e.esm.frame/60||1),vsscore:i*(t.stats.piecesplaced/n)*100},...s()}},EjectState:function(){return qt({game:{...t,unsafewaitingframes:[],started:!0,countdown_started:!0,rng:t.rng?.seed,rngex:t.rngex?.seed},frame:e.esm.frame,overrides:e.cm.overrides})},OverlayState:function(s){if(!t.setoptions.can_undo)return;const i=s.game,o=s.overrides;e.wfm.ExecuteUnsafeWaitingFrames(!0),i.rng=new C(i.rng),i.rngex=new C(i.rngex||0);for(const[e,s]of Object.entries(i))"function"!=typeof t[e]&&(n[e]||("actors"!==e?"object"!=typeof t[e]||null===t[e]||Array.isArray(t[e])?t[e]=s:Object.assign(t[e],s):t[e]=s));e.cm.SetConstantsOverrides(o),e.cm.Reload(),e.bm.Resize(),e.hm.H.stackdirty=!0,e.hm.H.fallingdirty=!0,e.hm.H.nextdirty=!0,e.hm.H.holddirty=!0,e.dsm.frozen=!1,e.stm.H.stockExploding=!1,e.bm.ClearIsLegalAtPosMemo(),e.gem.ClearSeenIGEs(),e.lm.H.lastdT=1,e.lm.H.lastdTs=[],e.pbm.H.seenGarbageIDs=new Set,e.zthm.duoOtherSideGame=null,e.c.OnClient((()=>{e.zthm.ClearBonusDisplay(),e.pbm.ResetGarbageBar("impending"),e.am.RedrawActors(),e.hm.Restate()}))},EjectOverlayState:function(){return qt({game:{...t,otherstates:void 0,unsafewaitingframes:[],rng:t.rng?.seed,rngex:t.rngex?.seed,started:!0,countdown_started:!0},overrides:e.cm.overrides})},InjectState:function(n){if(e.iom.IsOnline()&&e.iom.IsSynced())return;const s=n.game,i=n.overrides;e.wfm.ExecuteUnsafeWaitingFrames(!0),s.rng=new C(s.rng),s.rngex=new C(s.rngex||0);const[o,a,r,l]=[t.setoptions.boardwidth,t.setoptions.boardheight,t.setoptions.boardskin,JSON.stringify(t.setoptions.minoskin)];for(const[e,n]of Object.entries(s))"function"!=typeof t[e]&&("actors"!==e?"object"!=typeof t[e]||null===t[e]||Array.isArray(t[e])?t[e]=n:Object.assign(t[e],n):t[e]=n);e.cm.SetConstantsOverrides(i),e.cm.Reload(),e.bm.Resize(),e.hm.H.stackdirty=!0,e.hm.H.fallingdirty=!0,e.hm.H.nextdirty=!0,e.hm.H.holddirty=!0,e.dsm.frozen=!1,e.stm.H.stockExploding=!1,e.bm.ClearIsLegalAtPosMemo(),e.gem.ClearSeenIGEs(),e.iom.synced=!0,e.lm.H.lastdT=1,e.lm.H.lastdTs=[],e.pbm.H.seenGarbageIDs=new Set,e.zthm.duoOtherSideGame=null,e.c.OnClient((()=>{e.pbm.ResetGarbageBar("impending"),e.zthm.ClearBonusDisplay(),e.am.RedrawActors(),e.hm.Restate();const[n,s,i,c]=[t.setoptions.boardwidth,t.setoptions.boardheight,t.setoptions.boardskin,JSON.stringify(t.setoptions.minoskin)];o===n&&a===s&&r===i&&l===c||e.hm.CreateHolder()}))},EjectBoardState:function(){return{b:qt(t.board.slice(e.bm.HighestLine())),f:t.fire,g:t.garbagereceived,w:e.W,h:e.H}},InjectBoardState:function(n){if(e.iom.IsSynced())return;t.fire=n.f,t.garbagereceived=n.g;const[s,i]=[t.setoptions.boardwidth,t.setoptions.boardheight],[o,a]=[n.w,n.h];s!==o||i!==a?(t.setoptions.boardwidth=o,t.setoptions.boardheight=a,t.setoptions.boardbuffer=a,e.bm.Resize(),e.hm.CreateHolder()):e.hm.H.stackdirty=!0;const r=[],l=[];for(let t=0;t<e.T;t++)l.push(new Array(e.W).fill(255)),r.push(e.T-t<=n.b.length?n.b[t-(e.T-n.b.length)]:new Array(e.W).fill(null));t.board=r,t.boardedges=l,e.lm.H.mustRerenderTiny=!0}}},le=function(e){"use strict";const t=e.gsm,n={stockExploding:!1};return{H:n,ExplodingStock:function(t){e.c.IsServer()||e.hm.H.board.el("stock").action("fire",{frame:e.esm.frame,dT:t})},LoseStockOrGameOver:function(s){if(!t.pause)return t.setoptions.zenith_duo?e.zthm.IncapacitateSelf(s):void(t.stock<=0&&!t.setoptions.infinite_stock?e.gom.GameOver(s):(t.pause=!0,e.fm.SetSleep(!0),e.hm.H.fallingdirty=!0,e.wfm.WaitFrames(1,"freeze-counters",{}),e.rbm.AwardSecrets(),e.c.OnClient((()=>{if(e.gpm.Vibrate(mi.TOPOUT),n.stockExploding=!0,e.sfx.Play("losestock"),e.hm.H.holderstate.ds+=100*e.lm.H.lastdT,e.hm.IsFullMode()&&(xl.play("bgsplashdanger",{direction:0,amt:50}),xl.play("bgcircle",{color:16720384,amt:300,speed:300})),!1!==ot.video.siren&&e.hm.IsFullMode()){const t=nc(e.hm.H.stackobj,ws(_c.x*e.Wh),ws(_c.x*e.Hh));xl.play("death_flair",{x:t.x,y:t.y,w:e.W*e.hm.S(),h:e.H*e.hm.S()})}})),e.wfm.WaitFrames(90,"revive-from-stock-loss",{})))},ReviveFromStockLoss:function(){t.setoptions.infinite_stock||t.stock--,t.pause=!1,e.dsm.frozen=!1,e.bm.DestroyBoard(),t.setoptions.zenlevels&&(t.stats.lines=0,t.stats.inputs=0,t.stats.piecesplaced=0,t.stats.garbage.sent=0,t.stats.garbage.attack=0,t.stats.garbage.cleared=0,t.stats.finesse.combo=0,t.stats.finesse.faults=0,t.stats.finesse.perfectpieces=0,t.time.frameoffset=e.esm.frame),t.stats.combo=0,t.stats.combopower=0,t.stats.btbpower=0,t.stats.btb=0,t.hold=null,t.holdlocked=!1,e.fm.Clean(),e.fm.Next(),e.c.OnClient((()=>{e.gpm.Vibrate(mi.CLEAR),t.setoptions.infinite_stock||e.hm.H.board.el("stock").action("drop"),n.stockExploding=!1,e.hm.H.holderstate.ds+=50*e.lm.H.lastdT,e.sfx.Play("shatter"),(t.setoptions.b2bchaining||t.setoptions.b2bcharging)&&e.hm.H.board.el("b2b").delete()}))}}},ce=function(e){"use strict";const t=e.gsm;function n(){for(let n=0;n<100;n++){const n=Math.floor(t.rngex.nextFloat()*e.bm.ColumnWidth());if(t.lastcolumn!==n){t.lastcolumn=n;break}}}function s(s=!1){if("layer"!==t.setoptions.survivalmode)return;const i=t.board.reduce(((e,t)=>e+(0|t.some((e=>"gb"===e)))),0),o=Math.min(e.H,Math.max(0,Math.floor(s?t.setoptions.survival_layer_min:t.setoptions.survival_layer_amt))),a=t.setoptions.survival_cap>0?t.setoptions.survival_cap:1/0;if(i<o&&t.cheesespawned<a){e.c.OnClient((()=>{e.gpm.Vibrate(mi.GARBAGERISE),e.sfx.Play("garbagerise")}));for(let s=0;s<o-i&&((null===t.lastcolumn||100*t.rngex.nextFloat()<=t.setoptions.survival_messiness)&&n(),e.hm.H.holderstate.ds+=2*e.lm.H.lastdT,e.bm.PushLine({column:t.lastcolumn}),e.bm.ClearIsLegalAtPosMemo(),e.bm.PushUpFallingIfNeeded(),e.hm.H.fallingdirty=!0,!(++t.cheesespawned>=a));s++);}else if(i>o&&!s){e.c.OnClient((()=>{e.gpm.Vibrate(mi.GARBAGERISE),e.sfx.Play("garbagerise")}));const n=[];for(let e=0;e<i-o;e++)n.push(t.board.length-1-e);e.hm.H.holderstate.ds+=2*e.lm.H.lastdT,e.bm.ClearIsLegalAtPosMemo(),e.bm.RemoveLinesFromStack(n),e.bm.PushUpFallingIfNeeded(),e.hm.H.fallingdirty=!0}}return{Update:function(){if("none"!==t.setoptions.survivalmode)switch(t.setoptions.survivalmode){case"layer":s(!!t.setoptions.survival_layer_non);break;case"timer":!function(){if(t.pause||e.fm.IsSleep())return;if(t.setoptions.survival_cap>0&&t.cheesespawned>=t.setoptions.survival_cap)return;e.esm.frame%t.setoptions.survival_timer_itv==0&&(e.bm.IsFull()&&e.stm.LoseStockOrGameOver("garbagesmash"),(null===t.lastcolumn||100*t.rngex.nextFloat()<=t.setoptions.survival_messiness)&&n(),e.hm.H.fallingdirty=!0,e.hm.H.holderstate.ds+=2*e.lm.H.lastdT,e.c.OnClient((()=>{e.gpm.Vibrate(mi.GARBAGERISE),e.sfx.Play("garbagerise")})),e.bm.PushLine({column:t.lastcolumn}),e.bm.ClearIsLegalAtPosMemo(),e.bm.PushUpFallingIfNeeded(),t.cheesespawned++)}()}},UpdateCheeseLayer:s}};class pe extends k{static EVEN=0;static ELIMINATION=1;static RANDOM=2;static PAYBACK=3;static MANUAL=4;constructor(e){super(e),this.enabled=!0,this.targeted=!1,this.enemy=!1,this.interval=0,this.b2bdistance=0}GetTargets(){return this.S.targets}SetTargets(e){const t=[];for(const n of this.S.targets)e.includes(n)?t.push(n):this.self.elm.emit("target",n,!1);for(const n of e)t.includes(n)||this.self.elm.emit("target",n,!0);this.S.targets=[...e],this.S.targets.length||this.UpdateStrategy()}SetTargeted(e=this.targeted){this.targeted=e,this.self.iom.IsHeadless()||(this.self.hm.H.board.el("targeticon")[e?"create":"delete"](),this.self.lm.H.mustRerenderTiny=!0)}SetEnemy(e=this.enemy){this.enemy=e,this.self.iom.IsHeadless()||(this.self.hm.H.board.el("enemyicon")[e?"create":"delete"](),this.self.lm.H.mustRerenderTiny=!0)}IsEnabled(){return this.enabled}SetEnabled(e){this.enabled=e,this.self.elm.emit("allow_target",e)}IsEven(){return this.S.diyusi===pe.EVEN}IsElimination(){return this.S.diyusi===pe.ELIMINATION}IsRandom(){return this.S.diyusi===pe.RANDOM}IsPayback(){return this.S.diyusi===pe.PAYBACK}IsManual(){return this.S.diyusi>=pe.MANUAL}AddEnemy(e){this.S.enemies.includes(e)||(this.S.enemies.push(e),this.self.elm.emit("enemy",e,!0)),this.IsPayback()&&this.options.new_payback&&(this.S.targets.includes(e)||(this.S.targets.push(e),this.self.elm.emit("target",e,!0)),this.S.targets=this.S.targets.filter((e=>!!this.S.enemies.includes(e)||(this.self.elm.emit("target",e,!1),!1))))}RemoveEnemy(e){this.S.enemies=this.S.enemies.filter((t=>t!==e)),this.self.elm.emit("enemy",e,!1),this.IsPayback()&&this.options.new_payback&&(this.S.targets=this.S.targets.filter((t=>t!==e)),this.self.elm.emit("target",e,!1),this.S.targets.length||this.UpdateStrategy())}RemovePlayer(e){let t=this.S.enemies.indexOf(e);-1!==t&&(this.S.enemies.splice(t,1),this.self.elm.emit("enemy",e,!1)),t=this.S.targets.indexOf(e),-1!==t&&(this.S.targets.splice(t,1),this.self.elm.emit("target",e,!1)),this.S.targets.length||this.UpdateStrategy()}SetStrategy(e,t=null){if(this.IsEnabled()){if(this.S.laststrategychange>this.self.esm.frame)return this.self.iom.IsLocal()&&this.self.sfx.Play("no");this.S.diyusi=e,this.UpdateStrategy(t),this.S.laststrategychange=this.self.esm.frame+30,this.self.iom.IsLocal()&&this.self.sfx.Play("target"),this.self.elm.emit("strategy",this.S.diyusi)}}UpdateStrategy(e=null){this.self.c.IsServer()&&(this.interval=this.self.esm.frame+300,this.self.elm.emit("action",{type:"strategy",value:this.S.diyusi,target:e}))}Update(){this.IsEnabled()&&(this.IsManual()||this.IsPayback()&&this.options.new_payback&&this.S.enemies.length||this.self.esm.frame===this.interval&&this.UpdateStrategy())}SetB2BDistance(e){const t=this.b2bdistance;if(t!==e){if(this.b2bdistance=e,t<=-8&&e>-8)return this.self.hm.H.board.el("b2bdistance").delete(Math.min(0,e));e<=-8&&t>-8?(this.self.hm.H.board.el("b2bdistance").create(e),this.self.sfx.Play("b2bcharge_danger")):this.self.hm.H.board.el("b2bdistance").update(e)}}}class he extends k{Update(){if(this.options.tutorial){switch(this.S.tutorial.stage){case-1:this.S.tutorial.stage=1;break;case 0:!this.self.c.IsServer()&&this.self.iom.IsLocal()&&(Ya=!0);break;case 5:this.S.tutorial.reqs=1,this.S.tutorial.progress+=1/150;default:if(this.S.stats.piecesplaced>=20){this.S.tutorial.stage=0,this.S.tutorial.finished=this.self.esm.frame;break}this.S.tutorial.progress>=1&&this.S.tutorial.reqs>=1&&(this.S.tutorial.stage++,this.S.tutorial.reqs=0,this.S.tutorial.progress=0,this.S.tutorial.freeze=40,6===this.S.tutorial.stage&&(this.S.tutorial.stage=0,this.S.tutorial.finished=this.self.esm.frame))}this.S.tutorial.freeze>0&&this.S.tutorial.freeze--}}TutorialMoveLeft(){!this.options.tutorial||this.S.tutorial.freeze>0||1===this.S.tutorial.stage&&(.25!==this.S.tutorial.reqs&&(this.S.tutorial.reqs+=.25),this.S.tutorial.progress+=.17)}TutorialMoveRight(){!this.options.tutorial||this.S.tutorial.freeze>0||1===this.S.tutorial.stage&&(.75!==this.S.tutorial.reqs&&(this.S.tutorial.reqs+=.75),this.S.tutorial.progress+=.17)}TutorialRotateCCW(){!this.options.tutorial||this.S.tutorial.freeze>0||2===this.S.tutorial.stage&&(this.S.tutorial.reqs=1,this.S.tutorial.progress+=.17)}TutorialRotateCW(){!this.options.tutorial||this.S.tutorial.freeze>0||2===this.S.tutorial.stage&&(this.S.tutorial.reqs=1,this.S.tutorial.progress+=.17)}TutorialSoftDrop(){!this.options.tutorial||this.S.tutorial.freeze>0||3===this.S.tutorial.stage&&(this.S.tutorial.reqs+=.1,this.S.tutorial.progress+=.17)}TutorialHardDrop(){!this.options.tutorial||this.S.tutorial.freeze>0||3===this.S.tutorial.stage&&(this.S.tutorial.reqs=1,this.S.tutorial.progress+=.25)}TutorialHold(){!this.options.tutorial||this.S.tutorial.freeze>0||4===this.S.tutorial.stage&&(this.S.tutorial.reqs=1,this.S.tutorial.progress+=1)}}const de=function(e){"use strict";const t=e.gsm;function n(){t.otherstates.lastpiece=e.siom.EjectOverlayState()}function s(){t.otherstates.undo.push(t.otherstates.lastpiece),t.otherstates.undo.length>100&&t.otherstates.undo.shift(),t.otherstates.redo.length=0}return{Enable:function(){e.elm.on("piece","undo",n),e.elm.on("lock","undo",s)},Disable:function(){t.otherstates.undo.length=0,t.otherstates.redo.length=0,t.otherstates.lastpiece=null,e.elm.remove("piece","undo"),e.elm.remove("lock","undo")},Copy:n,Save:s,Undo:function(){if(t.setoptions.can_undo&&!t.pause){if(t.otherstates.undo.length<1)return e.c.OnClient((()=>{e.hm.H.holderstate.ds+=10*e.lm.H.lastdT,e.sfx.Play("no")}));t.otherstates.redo.push(t.otherstates.lastpiece),t.otherstates.lastpiece=t.otherstates.undo.pop(),e.siom.OverlayState(qt(t.otherstates.lastpiece)),t.impendingdamage=t.impendingdamage.filter((e=>e.active)),e.bm.Resize(),e.hm.CreateHolder(),e.znm.UpdateFromZenConfig(),t.retry=!1,t.retryiter=0,t.esc=!1,t.esciter=0,e.c.OnClient((()=>{e.hm.H.holderstate.dx-=7*e.lm.H.lastdT,e.hm.H.board.fx("undoredo").create(!1),e.sfx.Play("undo",.7)}))}},Redo:function(){if(t.setoptions.can_undo&&!t.pause){if(t.otherstates.redo.length<1)return e.c.OnClient((()=>{e.hm.H.holderstate.ds+=10*e.lm.H.lastdT,e.sfx.Play("no")}));t.otherstates.undo.push(t.otherstates.lastpiece),t.otherstates.lastpiece=t.otherstates.redo.pop(),e.siom.OverlayState(qt(t.otherstates.lastpiece)),t.impendingdamage=t.impendingdamage.filter((e=>e.active)),e.bm.Resize(),e.hm.CreateHolder(),e.znm.UpdateFromZenConfig(),t.retry=!1,t.retryiter=0,t.esc=!1,t.esciter=0,e.c.OnClient((()=>{e.hm.H.holderstate.dx+=7*e.lm.H.lastdT,e.hm.H.board.fx("undoredo").create(!0),e.sfx.Play("redo",.7)}))}}}},ue=function(e){"use strict";const t=e.gsm;function n(n){switch(n.type){case"are":t.nextwilltank&&e.atm.TakeAllDamage(),e.fm.Next(void 0,!0);break;case"are_collapse":e.hm.H.stackdirty=!0,e.c.OnClient((()=>{t.board[n.data.line]&&t.board[n.data.line].every((e=>null===e))||(e.gpm.Vibrate(mi.GARBAGERISE),e.sfx.Play("collapse"))}));break;case"clearanim":{if(e.c.IsServer())break;e.hm.H.stackmud.push([n.data[0],n.data[1],null]);const t=nc(e.hm.H.stackobj,n.data[1]*ws(_c.x)+ws(_c.x/2),(n.data[0]-e.B)*ws(_c.x)+ws(_c.x/2));xl.play("line_burst",{x:t.x,y:t.y,s:e.hm.S(),color:16777215,bright:!0});break}case"incoming-attack-hit":e.atm.IncomingAttackHit(n.data.gid);break;case"start-explode-attack":e.atm.StartExplodeAttack(n.data);break;case"process-exploded-attack":e.atm.ProcessExplodedAttack(n.data);break;case"outgoing-attack-hit":e.atm.OutgoingAttackHit();break;case"process-garbage-status":e.atm.ProcessGarbageStatus(n.data.id);break;case"push-garbage-line":e.bm.AreWeToppedYet(),e.bm.PushLine(n.data),e.bm.ClearIsLegalAtPosMemo(),e.bm.PushUpFallingIfNeeded(),e.hm.H.fallingdirty=!0,e.zthm.IncrementPrompt("tank",1),t.cancelstreak=Math.max(0,t.cancelstreak-3),t.lasttanktime=e.esm.frame,t.zenith.staletime=e.esm.frame,t.zenith.stalepieces=0,e.c.OnClient((()=>{e.gpm.Vibrate(mi.GARBAGERISE),e.sfx.Play("garbagerise")}));break;case"freeze-counters":e.dsm.frozen=!0;break;case"revive-from-stock-loss":e.stm.ReviveFromStockLoss();break;case"revive-other":e.zthm.ReviveOther();break;case"revive-self-finish":e.zthm.ReviveSelfFinish()}}return{WaitFrames:function(n,s,i){t.waitingframes.push({target:(e.esm?.frame??0)+n,type:s,data:i})},ExecuteWaitingFrames:function(){const s=e.esm?.frame??0;for(let e=t.waitingframes.length-1;e>=0;e--)t.waitingframes[e].target===s&&(n(t.waitingframes[e]),t.waitingframes.splice(e,1))},ExecuteWaitingFrame:n,WaitFramesUnsafe:function(n,s){t.unsafewaitingframes.push({target:(e.esm?.frame??0)+n,handler:s})},ExecuteUnsafeWaitingFrames:function(n=!1){const s=e.esm?.frame??0;for(let e=t.unsafewaitingframes.length-1;e>=0;e--)(t.unsafewaitingframes[e].target===s||n)&&(t.unsafewaitingframes[e].handler(),t.unsafewaitingframes.splice(e,1))}}},_e=function(e){"use strict";const t=e.gsm,n={leveling:"on",spins:"all-mini+",combotable:"multiplier",kickset:"SRS+",stride:"on",gravitymode:"relaxed",gravitystatic:20,counters:"off",garbagemode:"off",cheeselayer_height:6,cheesetimer_interval:4,cheesemessiness:100,infinite_hold:"off"};function s(){localStorage.setItem("zenConfig",JSON.stringify(n))}function i(){switch(n.gravitymode){case"subzero":t.g=0,t.setoptions.infinite_movement=!0,t.setoptions.locktime=999999999;break;case"off":t.g=0,t.setoptions.infinite_movement=!1,t.setoptions.locktime=30;break;case"relaxed":t.g=.015+.035*a(.78,.21,.86,.43)(Math.min(1,Math.max(0,t.stats.zenprogress))),t.setoptions.infinite_movement=!1,t.setoptions.locktime=30;break;case"engaging":t.g=.05+.2*a(.78,.21,.86,.43)(Math.min(1,Math.max(0,t.stats.zenprogress))),t.setoptions.infinite_movement=!1,t.setoptions.locktime=30;break;case"spicy":t.g=.25+2.25*a(.78,.21,.86,.43)(Math.min(1,Math.max(0,t.stats.zenprogress))),t.setoptions.infinite_movement=!1,t.setoptions.locktime=30;break;case"static":t.g=n.gravitystatic,t.setoptions.infinite_movement=!1,t.setoptions.locktime=30}}return{ScoreToZenProgress:function(e,s){return t.setoptions.usezenconfig&&"off"===n.leveling?0:e/(1e4+1e4*(Math.log2(s+1)-1))},ZenLevelup:function(){if(t.setoptions.usezenconfig&&"discreet"===n.leveling)return e.sfx.Play("levelup"),t.stats.zenlevel++,t.stats.zenprogress=0,i(),"minimal"!==ot.video.graphics&&"off"!==ot.video.actiontext&&"some"!==ot.video.actiontext&&e.hm.H.board.fx("levelup").create(t.stats.zenlevel),e.hm.IsFullMode()&&0!==e.lm.H.soundSkipRate&&xl.play("bgcircle"),e.pbm.BlastBar("progress"),Ys.saveZen({...Ys.getZen(),map:e.bm.BoardToMap(),level:t.stats.zenlevel,progress:t.stats.zenprogress,score:t.stats.score,b2b:t.stats.btb}),ei(),xa.BgmPlaySmoothlyWithRandom("RANDOMcalm"),!1;t.pause=!0,e.fm.SetSleep(!0),e.wfm.WaitFrames(1,"freeze-counters",{}),t.escAllowed=!1,t.retryAllowed=!1,xt("zen_panel").classList.add("noop"),e.hm.H.board.fx("zenlevel").create(e.cm.constants.Strings.extra.zenlevel),xl.play("bgcircle",{amt:300,speed:300}),xa.BgmFadeOut(3),e.sfx.Play("warp",1.25);const s=new o.Graphics;s.beginFill(14540253,1),s.drawRect(0,0,innerWidth,innerHeight),s.endFill(),s.position.set(0,0),s.alpha=0,Al.addChild(s);const r=new o.Graphics;return r.beginFill(14540253,1),r.drawRect(innerWidth/-2,-2,innerWidth,4),r.endFill(),r.position.set(innerWidth/2,innerHeight/2),r.alpha=0,r.scale.x=0,Al.addChild(r),dc.animate(e.hm.H.holder,{0:{"scale.x":"inherit","scale.y":"inherit",rotation:0},1:{"scale.x":0,"scale.y":0,rotation:-1}},3.1,a(.93,0,.83,-.89)),setTimeout((()=>{if("ultra"===ot.video.graphics){const e=new o.filters.PixelateFilter(1),t=new o.filters.TwistFilter(innerWidth,0);t.offset=new o.Point(innerWidth/2,innerHeight/2);const n=new o.filters.TwistFilter(innerWidth/3,0);n.offset=new o.Point(innerWidth/2,innerHeight/2),Ol.filters=[e,t,n],dc.animate(t,{0:{angle:0},1:{angle:-3}},2.1,a(.61,.01,.94,.04)),dc.animate(n,{0:{angle:0},1:{angle:10}},2.1,a(.61,.01,.94,.04)),dc.animate(e,{0:{size:1},1:{size:100}},2.1,a(.61,.01,.94,.04)),setTimeout((()=>{Ml.scale(3)}),1950)}}),1e3),setTimeout((()=>{dc.animate(Dl,{0:{alpha:"inherit"},1:{alpha:0}},.5,a(.5,.5,.5,.5))}),2600),setTimeout((()=>{dc.animate(s,{0:{alpha:0},1:{alpha:1}},.2,a(.5,.5,.5,.5)),dc.animate(r,{0:{alpha:0,"scale.x":0},1:{alpha:1,"scale.x":1}},.2,a(.5,.5,.5,.5)),xl.play("zen_wormhole")}),2900),setTimeout((()=>{t.stats.zenlevel++,t.stats.zenprogress=0,Ml.opacity(0),e.dsm.frozen=!1,Ol.filters=null,t.stats.lines=0,t.stats.inputs=0,t.stats.piecesplaced=0,t.stats.garbage.sent=0,t.stats.garbage.attack=0,t.stats.garbage.cleared=0,t.stats.finesse.combo=0,t.stats.finesse.faults=0,t.stats.finesse.perfectpieces=0,i();const n=t.board.reduce(((e,t)=>e+(t.some((e=>"gb"===e))?1:0)),0);for(let s=0;s<n;s++)t.board.pop(),t.board.unshift(Array(e.W).fill(null)),t.boardedges.pop(),t.boardedges.unshift(Array(e.W).fill(255)),e.bm.ClearIsLegalAtPosMemo(),e.am.RemoveRow(e.T-1),e.hm.H.fallingdirty=!0,e.hm.H.stackdirty=!0;Ys.saveZen({...Ys.getZen(),map:e.bm.BoardToMap(),level:t.stats.zenlevel,progress:t.stats.zenprogress,score:t.stats.score,b2b:t.stats.btb}),dc.animate(s,{0:{alpha:1},1:{alpha:0}},1,a(.5,.5,.5,.5))}),3100),setTimeout((()=>{Ml.scale(1),ei(),dc.animate(s,{0:{alpha:0},.2:{alpha:1},1:{alpha:.2}},.4,a(.5,.5,.5,.5)),xl.play("zen_wormhole_exit")}),6400),setTimeout((()=>{dc.animate(s,{0:{alpha:.2},1:{alpha:1}},.6,a(.5,.5,.5,.5)),dc.animate(r,{0:{"scale.y":1},1:{"scale.y":300}},.6,a(.46,.06,.79,.09))}),6800),setTimeout((()=>{r.destroy(),t.destroyed||(e.hm.H.holder.rotation=0,dc.animate(e.hm.H.holder,{0:{"scale.x":0,"scale.y":0},1:{"scale.x":1,"scale.y":1}},3,a(.24,.59,.32,.96))),dc.animate(s,{0:{alpha:1},1:{alpha:0}},1,a(.5,.5,.5,.5)),Dl.alpha=Math.min(1,10*ot.video.background),Ml.opacity(.9)}),7400),setTimeout((()=>{s.destroy(),t.destroyed||(t.pause=!1,t.escAllowed=!0,t.retryAllowed=!0,t.time.frameoffset=e.esm.frame,e.fm.SetSleep(!1),e.fm.Next(),e.hm.CreateHolder(),xa.BgmPlaySmoothlyWithRandom("RANDOMcalm")),Ml.opacity(1),xt("zen_panel").classList.remove("noop")}),10400),!0},GetZenConfig:function(){return n},LoadZenConfig:function(){const e=localStorage.getItem("zenConfig");if(e){const t=JSON.parse(e);for(const e in t)n[e]||delete t[e];Object.assign(n,t);for(const e of vt("#zen_panel_content .panel_optionset .panel_option")){const t=e.getAttribute("data-key"),s=e.getAttribute("data-value");n[t]===s?e.classList.add("selected"):e.classList.remove("selected")}}},SaveZenConfig:s,UpdateFromZenConfig:function(){if(t.setoptions.usezenconfig){switch(n.leveling){case"off":t.setoptions.slot_bar2="";break;case"on":case"discreet":t.setoptions.slot_bar2="progress"}switch(n.spins&&(t.setoptions.spinbonuses=n.spins),n.combotable&&(t.setoptions.combotable=n.combotable),n.kickset&&(t.setoptions.kickset=n.kickset),t.setoptions.infinite_hold="on"===n.infinite_hold,t.setoptions.infinite_hold&&(t.holdlocked=!1),i(),t.setoptions.slot_counter1="",t.setoptions.slot_counter2="",t.setoptions.slot_counter3="",t.setoptions.slot_counter4="",t.setoptions.slot_counter5="",t.setoptions.hasgarbage=!1,n.counters){case"versus":t.setoptions.slot_counter1="attack",t.setoptions.slot_counter2="pieces",t.setoptions.slot_counter5="vs",t.setoptions.hasgarbage=!0;break;case"time":t.setoptions.slot_counter1="stopwatch",t.setoptions.slot_counter2="lines",t.setoptions.slot_counter3="pieces",t.setoptions.slot_counter5="finesse";break;case"speed":t.setoptions.slot_counter1="pieces",t.setoptions.slot_counter2="keys",t.setoptions.slot_counter5="finesse";break;case"efficiency":t.setoptions.slot_counter1="finesse_l",t.setoptions.slot_counter2="keys",t.setoptions.slot_counter5="vs"}switch(n.garbagemode){case"off":t.setoptions.slot_bar1="",t.setoptions.survivalmode="none";break;case"backfire_half":case"backfire_full":case"backfire_double":t.setoptions.slot_bar1="impending",t.setoptions.hasgarbage=!0,t.setoptions.survivalmode="none";break;case"unclear_half":case"unclear_full":case"unclear_double":t.setoptions.slot_bar1="",t.setoptions.hasgarbage=!0,t.setoptions.survivalmode="none";break;case"cheeselayer":t.setoptions.slot_bar1="",t.setoptions.survivalmode="layer",t.setoptions.survival_messiness=n.cheesemessiness,t.setoptions.survival_layer_amt=n.cheeselayer_height;break;case"cheesetimer":t.setoptions.slot_bar1="",t.setoptions.survivalmode="timer",t.setoptions.survival_messiness=n.cheesemessiness,t.setoptions.survival_timer_itv=60*n.cheesetimer_interval}e.hm.CreateHolder(),s()}},UpdateZenGravity:i,UpdateGarbageOffense:function(s){if(n.garbagemode.startsWith("backfire_")){let i=s;if("backfire_half"===n.garbagemode&&(i=Math.floor(s/2)),"backfire_double"===n.garbagemode&&(i=Math.floor(2*s)),i<1)return;e.atm.AddPendingGarbage({type:"garbage",amt:i,column:Math.floor(t.rngex.nextFloat()*e.bm.ColumnWidth()),x:5,y:35,active:!1})}else if(n.garbagemode.startsWith("unclear_")){let i=s;if("unclear_half"===n.garbagemode&&(i=Math.floor(s/2)),"unclear_double"===n.garbagemode&&(i=Math.floor(2*s)),i<1)return;const o=Math.floor(t.rngex.nextFloat()*e.bm.ColumnWidth());e.gpm.Vibrate(mi.GARBAGERISE),e.sfx.Play("garbagerise");for(let t=0;t<i;t++)e.bm.IsFull()&&e.stm.LoseStockOrGameOver("garbagesmash"),e.hm.H.holderstate.ds+=2*e.lm.H.lastdT,e.bm.PushLine({column:o,edges:(0===t?64:0)|(t>=i-1?4:0)})}}}};class me extends k{static FloorDistance=[0,50,150,300,450,650,850,1100,1350,1650,1/0];static GravityBumps=[0,.48,.3,.3,.3,.3,.3,.3,.3,.3,.3];static GLockDelay=[0,30,29,28,27,26,24,22,20,18,16];static GRLockDelay=[0,24,22,20,18,16,15,14,13,12,11];static SpeedrunReq=[7,8,8,9,9,10,0,0,0,0,0];static Mods=["invisible","messy","volatile","nohold","doublehole","allspin","gravity","expert","duo"];static TargetingGraceRevEx=[0,1,.9,.8,.7,.6,.5,.4,.3,.2,.1];static RevNoHoldHoleSideChangeChance=[.1,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55];static ReviveLevelIncrease=[1,1,1,1,1,1,2,2,2,2,3];static CancelingFatigueBumpCap=[4,4,5,6,7,8,9,10,1/0,1/0,1/0];static GetSpeedCap(e){const t=this.FloorDistance.find((t=>e<t))-e;return Math.max(0,Math.min(1,t/5-.2))}static GetFloorLevel(e){return this.FloorDistance.filter((t=>e>=t)).length||1}constructor(e){super(e),this.duoOtherSideGame=null,this.duoOtherSidePrompts=[],this.lastBg=null,this._targetingGrace=[0,4.8,3.9,2.1,1.4,1.3,.9,.6,.4,.3,.2]}Update(){if(!this.S.setoptions.zenith)return;!this.self.c.IsServer()&&this.S.setoptions.zenith_duo&&er&&!this.duoOtherSideGame&&(this.duoOtherSideGame=er.Find(this.S.setoptions.zenith_ally[1]),this.duoOtherSideGame&&this.S.zenith.reviveprompts.length&&(this.duoOtherSideGame.duoSetPrompts(this.S.zenith.reviveprompts,!0),this.self.hm.H.board.el("zenithpromptsself").update(this.S.zenith.reviveprompts),this.self.hm.H.board.el("zenithpromptsself").action("fix"))),this.self.c.IsServer()&&this.S.setoptions.zenith_duo&&(this.duoOtherSideGame=null);const e=this.self.esm.frame;let t=Math.floor(this.S.stats.zenith.rank);const n=this.S.stats.zenith.altitude;if(e>=this.S.zenith.rank_locked_until){let e=3;this.S.setoptions.zenith_duo?(this.S.setoptions.zenith_expert&&e++,this.S.setoptions.zenith_allyexpert&&e++):this.S.setoptions.zenith_expert&&(e=5);this.S.zenith.climb_pts-=e*(t**2+t)/3600}const s=4*t,i=4*(t-1);if(this.S.zenith.climb_pts<0)if(t<=1)this.S.zenith.climb_pts=0;else{this.S.zenith.climb_pts+=i,this.S.zenith.last_rank_change_was_promote=!1,t--,this.self.c.OnClient((()=>{let e=!this.self.hm.H.duoIsRight&&!this.self.iom.IsOnline();if(e||this.self.hm.H.duoIsRight||!this.self.zthm.duoOtherSideGame||this.self.zthm.duoOtherSideGame.isOnline()||(e=!0),e&&!1!==ot.volume.zenithrank)if(this.S.stats.zenith.speedrun)this.self.sfx.Play("zenith_downspeed_csharp",.4+.6*ot.volume.music);else{const e=me.GetFloorLevel(this.S.stats.zenith.altitude),t=this.S.setoptions.zenith_mods.length&&this.S.setoptions.zenith_mods[0].includes("_reversed");this.self.sfx.Play(`zenith_downspeed_${["","c","b","a","fsharp","e",t?"g":"a","ahalfsharp","e","e","a"][e]}`,.4+.6*ot.volume.music)}this.self.hm.H.board.el("zenithrank").action("flashdown")}));const e=me.SpeedrunReq[0];10!==me.GetFloorLevel(this.S.stats.zenith.altitude)&&t<e&&(this.S.stats.zenith.speedrun=!1)}else if(this.S.zenith.climb_pts>=s){this.S.zenith.climb_pts-=s,this.S.zenith.last_rank_change_was_promote=!0,this.S.zenith.rank_locked_until=e+Math.max(60,60*(5-this.S.zenith.promotion_fatigue)),this.S.zenith.promotion_fatigue++,t++,this.self.c.OnClient((()=>{let e=!this.self.hm.H.duoIsRight&&!this.self.iom.IsOnline();if(e||this.self.hm.H.duoIsRight||!this.self.zthm.duoOtherSideGame||this.self.zthm.duoOtherSideGame.isOnline()||(e=!0),e&&!1!==ot.volume.zenithrank)if(this.S.stats.zenith.speedrun)this.self.sfx.Play("zenith_upspeed_csharp",.4+.6*ot.volume.music);else{const e=me.GetFloorLevel(this.S.stats.zenith.altitude),t=this.S.setoptions.zenith_mods.length&&this.S.setoptions.zenith_mods[0].includes("_reversed");this.self.sfx.Play(`zenith_upspeed_${["","c","b","a","fsharp","e",t?"g":"a","ahalfsharp","e","e","a"][e]}`,.4+.6*ot.volume.music)}this.self.hm.H.board.el("zenithrank").action("flashup")}));const n=me.SpeedrunReq[me.GetFloorLevel(this.S.stats.zenith.altitude)];!this.S.setoptions.zenith_mods.length&&0!==n&&t>=n&&(this.S.stats.zenith.speedrun=!0,this.S.stats.zenith.speedrun_seen=!0)}this.S.zenith.last_rank_change_was_promote&&this.S.zenith.climb_pts>=2*(t-1)&&(this.S.zenith.promotion_fatigue=0),this.S.stats.zenith.rank=t+this.S.zenith.climb_pts/(4*t),this.S.stats.zenith.peakrank=Math.max(this.S.stats.zenith.rank,this.S.stats.zenith.peakrank),this.S.stats.zenith.avgrankpts+=this.S.stats.zenith.rank;const o=this.S.stats.zenith.altitude,a=me.GetFloorLevel(o);if("expert_reversed"===this.S.setoptions.zenith_mods[0]){this.S.stats.zenith.altitude=Math.max(me.FloorDistance[a-1],o-.05*(a**2+a+10)/60)}else{const e=.25*t,n=me.GetSpeedCap(o);this.S.stats.zenith.altitude+=e/60*n}if(this.S.zenith.bonusremaining>0)if(this.S.zenith.bonusremaining<=.05)this.S.stats.zenith.altitude+=this.S.zenith.bonusremaining,this.S.zenith.bonusremaining=0;else{const e=Math.min(10,.1*this.S.zenith.bonusremaining);this.S.stats.zenith.altitude+=e,this.S.zenith.bonusremaining-=e}if(this.options.tutorial&&this.S.stats.zenith.altitude>=50&&this.S.tutorial.stage>0&&this.S.tutorial.stage<5&&(this.S.stats.zenith.altitude=Math.min(49.99,n),this.S.zenith.bonusremaining=0),this.S.setoptions.zenith_allspin&&1===this.S.setoptions.zenith_mods.length&&0===this.S.stats.tspins&&(this.S.zenith.talentless=this.S.stats.zenith.altitude),a!==this.S.stats.zenith.floor&&(this.self.c.OnClient((()=>{if(!this.self.hm.H.duoIsRight){if(this.self.hm.IsFullMode()&&a>1){const e=nc(this.self.hm.H.holder,ws(_c.x)*this.self.Wh,ws(_c.x)*this.self.Hh);xl.play("spike_flair",{x:e.x,y:e.y,w:this.self.W*this.self.hm.S(),h:this.self.H*this.self.hm.S()})}const e=["","HALL OF BEGINNINGS","THE HOTEL","THE CASINO","THE ARENA","THE MUSEUM","ABANDONED OFFICES","THE LABORATORY","THE CORE","CORRUPTION","PLATFORM OF THE GODS"];this.self.hm.H.board.fx("timeleft").create(`\fc3FLOOR \fc9${a}\f3\n\n${e[a]}`);const t=[null,null,"zenith_levelup_c","zenith_levelup_b","zenith_levelup_a","zenith_levelup_fsharp","zenith_levelup_e","zenith_levelup_a","zenith_levelup_ahalfsharp","zenith_levelup_e","zenith_levelup_e"],n=[null,null,"zenith_levelup_c","zenith_levelup_b","zenith_levelup_a","zenith_levelup_fsharp","zenith_levelup_e","zenith_levelup_g","zenith_levelup_ahalfsharp","zenith_levelup_e","zenith_levelup_e"],s=this.S.setoptions.zenith_mods.length&&this.S.setoptions.zenith_mods[0].includes("_reversed")?n:t;null==s[a]||this.S.stats.zenith.speedrun||this.self.sfx.Play(s[a])}})),this.S.setoptions.zenith_gravity?(this.S.g+=me.GravityBumps[a],this.S.setoptions.locktime=me.GLockDelay[a]):"gravity_reversed"===this.S.setoptions.zenith_mods[0]&&(this.S.g=20,this.S.setoptions.locktime=me.GRLockDelay[a]),this.S.zenith.lastfloorchange=e,1===a?this.S.glock=240:this.S.stats.zenith.splits[a-2]=Math.round(this.self.lm.GetGameTime())),this.S.stats.zenith.floor=a,!this.self.c.IsServer()&&("minimal"===ot.video.graphics||ot.video.nozenithanim)&&this.self.iom.IsLocal()){const e=me.GetApplicableBg(o);e!==this.lastBg&&(Ml.setBackground(e),this.lastBg=e)}if("expert_reversed"===this.S.setoptions.zenith_mods[0]&&e-this.S.zenith.lastfloorchange>3600&&(this.S.setoptions.receivemultiplier+=.005/60),void 0!==this.S.TEMP_zenith_apm_cycle){if(this.S.TEMP_zenith_apm_cycle+=this.S.TEMP_zenith_apm/3600/2.5*(.75+.5*this.S.rngex.nextFloat()),this.S.TEMP_zenith_apm_cycle>=1){this.S.TEMP_zenith_apm_cycle--;const e=this.S.rngex.nextFloat()>=.5?4:1;this.self.atm.FightLines(e)}}if(void 0!==this.S.TEMP_zenith_instakill_at){this.self.atm.GetPendingGarbageCount(!0)>=this.S.TEMP_zenith_instakill_at&&this.self.gom.GameOver("garbagesmash")}10800!==e&&18e3!==e&&25200!==e||this.S.stats.zenith.targetingfactor++;let r=60*this._targetingGrace[a];"expert_reversed"===this.S.setoptions.zenith_mods[0]&&(r=60*me.TargetingGraceRevEx[a]),this.S.stats.zenith.targetinggrace>0&&e>=this.S.lastatktime+r&&(this.S.stats.zenith.targetinggrace--,this.S.lastatktime=e);const l=(this.S.setoptions.zenith_expert?.05:.03)*a;let c=0;this.S.setoptions.zenith_messy&&(c+="messy_reversed"===this.S.setoptions.zenith_mods[0]?1:.25),"allspin_reversed"===this.S.setoptions.zenith_mods[0]&&(c+=.3),this.S.setoptions.messiness_change=2.5*(l+c),this.S.setoptions.messiness_inner=l+c,this.S.zenith.maxmessy&&(this.S.setoptions.messiness_change=1,this.S.setoptions.messiness_inner=1),this.S.setoptions.messiness_center=this.S.setoptions.messiness_inner<=.15&&a<=5,this.S.setoptions.garbagefavor=(this.S.setoptions.zenith_expert?0:33)-3*a-(this.S.setoptions.zenith_messy?25:0),"volatile_reversed"===this.S.setoptions.zenith_mods[0]&&(this.S.setoptions.garbagefavor=50,this.S.setoptions.messiness_center=!0),this.S.setoptions.garbagephase=this.S.setoptions.zenith_expert?66-6*a:165-15*a,this.S.setoptions.zenith_mods.length&&this.S.setoptions.zenith_mods[0].includes("_reversed")&&!this.S.setoptions.zenith_expert&&(this.S.setoptions.garbagephase=["messy_reversed","volatile_reversed","doublehole_reversed"].includes(this.S.setoptions.zenith_mods[0])?75:[75,75,75,75,75,75,75,60,45,30,15][a]);const p=this.self.esm.frame-this.S.zenith.staletime;p>0&&p%1800==0&&(this.S.cancelstreak+=5);const h=this.S.stats.zenith.altitude,d=Math.min(8,Math.floor(this.S.zenith.bonusremaining)+1);if(!this.self.c.IsServer()&&!this.self.hm.H.duoIsRight&&this.self.hm.IsFullMode()&&Math.floor(h*d)>Math.floor(n*d)&&this.self.sfx.Play(`speed_tick_${1+Math.floor(4*Math.random())}`,Math.min(1,.2+this.S.zenith.bonusremaining)),this.RecolorForAltitude(this.S.stats.zenith.altitude),e%15==0&&(!this.S.setoptions.zenith_expert||this.S.setoptions.zenith_duo)){const t=this.self.bm.HighestLine();if(!(this.S.setoptions.zenith_expert||this.S.setoptions.zenith_mods.length&&this.S.setoptions.zenith_mods[0].includes("_reversed"))){const e=t<this.B+5;e!==this.S.zenith.isDanger&&(this.S.zenith.isDanger=e,this.S.stats.zenith.targetingfactor+=e?-1.5:1.5)}if(this.S.setoptions.zenith_duo){const n=t<this.B+3;n!==!!this.S.zenith.top3rowsince?(this.S.zenith.top3rowsince=n?e:null,n||this.self.zthm.NixPrompt("top3rows")):n&&this.self.zthm.BumpPrompt("top3rows",Math.floor((e-Math.max(this.S.zenith.promptstarttime,this.S.zenith.top3rowsince))/60));const s=0===this.self.bm.CountGarbageLinesNoPerma();s!==!!this.S.zenith.nogarbagesince?(this.S.zenith.nogarbagesince=s?e:null,s||this.self.zthm.NixPrompt("nogarbage")):s&&this.self.zthm.BumpPrompt("nogarbage",Math.floor((e-Math.max(this.S.zenith.promptstarttime,this.S.zenith.nogarbagesince))/60)),this.self.zthm.BumpPrompt("idle",Math.floor((e-Math.max(this.S.zenith.promptstarttime,this.S.lastpiecetime))/60)),this.self.zthm.BumpPrompt("nocancel",Math.floor((e-Math.max(this.S.zenith.promptstarttime,this.S.zenith.lastcancel))/60))}}if(e%15==0&&["messy_reversed","doublehole_reversed","allspin_reversed"].includes(this.S.setoptions.zenith_mods[0])){const e=this.self.bm.CountGarbageLinesNoPerma();if(e!==this.S.zenith.garbagerowcount){const t=Math.max(0,2.5-.5*this.S.zenith.garbagerowcount),n=Math.max(0,2.5-.5*e);this.S.stats.zenith.targetingfactor+=n-t,this.S.zenith.garbagerowcount=e}}for(const e of this.S.zenith.reviveprompts)e.stunned&&(e.stunned=!1,this.S.zenith.quadbuckets=[],this.S.zenith.spinbuckets=[]);if(this.S.zenith.incapacitated&&this.S.zenith.allyincapacitated)return this.self.gom.GameOver("garbagesmash",!0);const u="expert_reversed"===this.S.setoptions.zenith_mods[0]?this.self.cm.constants.zenithFatigueRevEx:this.self.cm.constants.zenithFatigue;for(const[t,n]of u)if(e===t){for(const[e,t]of n)switch(e){case"dim":Array.isArray(t)?(this.self.hm.H.holderstate.tr=Math.round(this.self.hm.H.holderstate.btr*t[0]),this.self.hm.H.holderstate.tg=Math.round(this.self.hm.H.holderstate.btg*t[1]),this.self.hm.H.holderstate.tb=Math.round(this.self.hm.H.holderstate.btb*t[2])):(this.self.hm.H.holderstate.tr=Math.round(this.self.hm.H.holderstate.btr*t),this.self.hm.H.holderstate.tg=Math.round(this.self.hm.H.holderstate.btg*t),this.self.hm.H.holderstate.tb=Math.round(this.self.hm.H.holderstate.btb*t));break;case"color":this.self.hm.H.holderstate.tr=(16711680&t)>>16,this.self.hm.H.holderstate.tg=(65280&t)>>8,this.self.hm.H.holderstate.tb=255&t;break;case"unclearable":this.self.bm.PushLine({column:[],pos:"gbd",position:"bottom"}),this.self.bm.ClearIsLegalAtPosMemo(),this.self.bm.PushUpFallingIfNeeded(),this.self.hm.H.fallingdirty=!0;break;case"shake":this.self.hm.H.holderstate.ds+=t*this.self.lm.H.lastdT,this.self.c.OnClient((()=>{this.self.gpm.Vibrate(mi.GARBAGERISE),this.self.sfx.Play("garbagerise")}));break;case"waterfall":!this.self.c.IsServer()&&this.self.iom.IsLocal()&&cn(t);break;case"receivemultiplier":this.S.setoptions.receivemultiplier+=t*(this.S.setoptions.zenith_volatile?"volatile_reversed"===this.S.setoptions.zenith_mods[0]?3:2:1);break;case"gracestillmessy":this.S.zenith.gracestillmessy=!0;break;case"maxmessy":this.S.zenith.maxmessy=!0}break}}AwardKill(){if(!this.S.setoptions.zenith)return;const e=.25*Math.floor(this.S.stats.zenith.rank);this.GiveBonus(e*("expert_reversed"===this.S.setoptions.zenith_mods[0]?8:15))}AwardLines(e,t=!0,n=!0){if(!this.S.setoptions.zenith)return;let s=.25*Math.floor(this.S.stats.zenith.rank)*e*(t?1:0);const i=me.FloorDistance.find((e=>this.S.stats.zenith.altitude<e))-this.S.stats.zenith.altitude-s-this.S.zenith.bonusremaining;i>=0&&i<=2&&(s+=3),this.GiveBonus(s),this.S.stats.zenith.altitude>=800&&this.S.stats.garbage.cleared<5&&"allspin_reversed"===this.S.setoptions.zenith_mods[0]&&(n=!1),this.GiveClimbPts((e+.05)*(n?1:0))}AwardHasBeenAttacked(e){if(!this.S.setoptions.zenith)return;const t=Math.min(18-this.S.stats.zenith.targetinggrace,e);t<=0||(this.S.stats.zenith.targetinggrace+=t)}GiveClimbPts(e,t=!1){this.S.zenith.climb_pts+=e,!t&&e&&this.self.c.IsServer()&&this.self.elm.emit("interaction",{type:"zenith.climb_pts",amt:e},["allies"])}_bonusCount=0;_bonusExpires=0;GiveBonus(e,t=!1){this.options.tutorial&&this.S.tutorial.stage>0&&this.S.tutorial.stage<5&&(e*=me.GetSpeedCap(this.S.stats.zenith.altitude)),this.S.zenith.bonusremaining+=e,e>=2&&!this.self.c.IsServer()&&this.self.hm.IsFullMode()&&!this.self.hm.H.duoIsRight&&this.self.sfx.Play("speed_tick_whirl"),this._bonusExpires<this.self.esm.frame&&(this._bonusCount=0),this._bonusCount+=e,this._bonusExpires=this.self.esm.frame+60,this._bonusCount>=1&&!this.self.c.IsServer()&&this.self.hm.IsFullMode()&&this.self.hm.H.board.el("zenithrank").action("bonus",this._bonusCount,this.S.setoptions.zenith_duo?t?"ally":"self_duo":"self"),!t&&e?(this.self.c.IsServer()&&this.self.elm.emit("interaction",{type:"zenith.bonus",amt:e},["allies"]),this.S.stats.zenith.totalbonus+=e):e&&(this.S.zenith.bonusfromally+=e)}ClearBonusDisplay(){this._bonusCount=0,this._bonusExpires=0}static TINT_GRADIENT=[[0,35,16683866,14117965,null],[35,47,14117965,16760176,null],[47,95,16760176,16687178,null],[95,110,16687178,14193237,null],[110,130,14193237,14193285,null],[130,145,14193285,14927239,null],[145,160,14927239,14653566,null],[160,230,14653566,15968362,null],[230,245,15968362,12555371,null],[245,255,12555371,9023674,null],[255,280,9023674,7125688,null],[280,295,7125688,12229777,null],[295,345,12229777,15580330,null],[345,358,15580330,5982571,null],[358,382,5982571,7623247,null],[382,385,7623247,16763504,null],[385,408,16763504,16756549,null],[408,412,16756549,9662309,null],[412,416,9662309,6778029,null],[416,428,6778029,5725075,null],[428,445,5725075,16315363,null],[445,475,16315363,16310229,null],[475,485,16310229,13484475,null],[485,507,13484475,14668491,null],[507,514,14668491,16772840,null],[514,536,16772840,16774888,null],[536,575,16772840,15785171,null],[575,585,15785171,12496551,null],[585,612,12496551,11574171,null],[612,618,11574171,9535616,null],[618,638,9535616,8615028,null],[638,648,8615028,9463379,null],[648,740,9463379,9460031,null],[740,745,9460031,13808806,null],[745,765,13808806,13750950,null],[765,770,13750950,13801081,null],[770,830,13801081,9463379,null],[830,840,9463379,7183027,null],[840,875,7183027,4492467,null],[875,885,4492467,3369094,null],[885,965,3369094,3570574,null],[965,980,3570574,9420378,null],[980,1015,9420378,11199083,null],[1015,1025,11199083,2840688,null],[1025,1080,2840688,22129,null],[1080,1095,22129,16477811,null],[1095,1110,16477811,12735833,null],[1110,1185,12735833,9125184,null],[1185,1200,9125184,5063018,null],[1200,1210,5063018,6963539,null],[1210,1212,6963539,16663431,null],[1212,1228,16663431,16673183,null],[1228,1230,16673183,11824613,null],[1230,1255,11824613,11229157,null],[1255,1260,11229157,13172817,null],[1260,1273,13172817,11141188,null],[1273,1275,11141188,9125184,null],[1275,1315,9125184,10894143,null],[1315,1320,10894143,14258747,null],[1320,1335,14258747,6511674,null],[1335,1347,6511674,9625255,null],[1347,1365,9625255,5273962,null],[1365,1434,5273962,2714705,null],[1434,1437,2714705,1785394,null],[1437,1460,1785394,2180674,null],[1460,1463,2180674,3631420,null],[1463,1476,3631420,4225093,null],[1476,1485,4225093,13106296,null],[1485,1510,13106296,15073152,null],[1510,1525,15073152,2255687,null],[1525,1571,2255687,1651504,null],[1571,1579,1651504,2507296,null],[1579,1585,2507296,15587430,null],[1585,1610,15587430,16757387,null],[1610,1624,16757387,2236962,null],[1624,1648,2236962,2236962,null],[1648,1653,2236962,16759846,null],[1653,1680,16759846,11160739,null],[1680,1750,11160739,7626448,null],[1750,1850,7626448,8012982,null],[1850,1950,8012982,4945761,null],[1950,2050,4945761,8729938,null],[2050,2200,8729938,8011418,null],[2200,2500,8011418,5260921,null],[2500,3e3,5260921,12233466,null],[3e3,99999,12233466,12233466,null]];static TINT_GRADIENT_BG_BACK=[[0,1645,10838527,3284558,null],[1645,1700,3284558,1642310,null],[1700,1900,1642310,0,null],[1900,99999,0,0,null]];static TINT_GRADIENT_BG_FRONT=[[0,1645,16754502,6888748,null],[1645,1700,6888748,6429533,null],[1700,1750,6429533,3481977,null],[1750,1850,3481977,2036290,null],[1850,1950,2036290,1196602,null],[1950,2050,1196602,4330002,null],[2050,2200,4330002,3215938,null],[2200,2500,3215938,0,null],[2500,99999,0,0,null]];static GetAltitudeColor(e,t=me.TINT_GRADIENT){for(const n of t){if(e<n[0]||e>=n[1])continue;n[4]||(n[4]=[n[2]>>16,n[2]>>8&255,255&n[2],n[3]>>16,n[3]>>8&255,255&n[3]]);const t=(e-n[0])/(n[1]-n[0]),s=Math.round(n[4][0]+t*(n[4][3]-n[4][0])),i=Math.round(n[4][1]+t*(n[4][4]-n[4][1])),o=Math.round(n[4][2]+t*(n[4][5]-n[4][2]));return{r:s,g:i,b:o,tint:s<<16|i<<8|o}}return{r:255,g:255,b:255,tint:16777215}}RecolorForAltitude(e){if(this.self.c.IsServer(!0)||"minimal"===ot.video.graphics)return 16777215;const t=me.GetAltitudeColor(e);return this.self.hm.H.holderstate.btr=t.r,this.self.hm.H.holderstate.btg=t.g,this.self.hm.H.holderstate.btb=t.b,t.tint}static MINIMAL_BGS=[[0,"1fa"],[50,"2fa"],[110,"2fb"],[150,"3fa"],[240,"3fb"],[300,"4fa"],[360,"4fb"],[450,"5fa"],[515,"5fb"],[585,"5fc"],[650,"6fa"],[750,"6fb"],[850,"7fa"],[900,"7fb"],[980,"7fc"],[1030,"7fd"],[1100,"8fa"],[1200,"8fb"],[1350,"9fa"],[1450,"9fb"],[1575,"9fc"],[1650,"10fa"]];static GetApplicableBg(e){for(let t=me.MINIMAL_BGS.length-1;t>=0;t--)if(me.MINIMAL_BGS[t][0]<=e)return`/res/bg/zenith/${me.MINIMAL_BGS[t][1]}.jpg`}IncapacitateSelf(e){if(this.S.zenith.allyincapacitated)return this.self.gom.GameOver(e,!0);this.S.zenith.incapacitated=!0,this.self.c.IsServer()&&this.self.elm.emit("interaction",{type:"zenith.incapacitated"},["allies"]),this.S.pause=!0,this.self.hm.H.fallingdirty=!0,this.self.pm.H.sirenAlwaysGood=!0,this.self.bm.BlackoutBoard(),this.self.c.OnClient((()=>{if(this.self.gpm.Vibrate(mi.TOPOUT),this.self.sfx.Play("losestock"),this.self.hm.H.holderstate.ds+=100*this.self.lm.H.lastdT,this.self.hm.IsFullMode()&&(xl.play("bgsplashdanger",{direction:0,amt:50}),xl.play("bgcircle",{color:16720384,amt:300,speed:300})),!1!==ot.video.siren&&this.self.hm.IsFullMode()){const e=nc(this.self.hm.H.stackobj,ws(_c.x*this.Wh),ws(_c.x*this.Hh));xl.play("death_flair",{x:e.x,y:e.y,w:this.W*this.self.hm.S(),h:this.H*this.self.hm.S()})}}))}GetPromptsList(){const e=[],t=Math.min(this.self.cm.constants.zenithReviveDecks.length-1,this.S.stats.zenith.floor+this.S.zenith.revivelevel),n={...this.self.cm.constants.zenithReviveDecks[t]},s=new Set;for(const t of this.self.cm.constants.zenithRevivePrompts)t[5].length&&t[5].some((e=>this.S.setoptions.zenith_mods.includes(e)))||n[t[0]]&&e.push(t);this.S.rngex.shuffleArray(e);const i=[];for(const t of e){const[e,o]=t;n[e]&&(s.has(o)||(n[e]--,s.add(o),i.push(t)))}if("order"in n){const e=[...i];i.length=0;for(const t of n.order)for(const[n,s]of e.entries())if(s[0]===t){e.splice(n,1),i.push(s);break}}return i}IncapacitateOther(){if(this.S.zenith.incapacitated)return this.self.gom.GameOver("garbagesmash",!0);this.S.zenith.allyincapacitated=!0,this.S.zenith.reviveprompts=[],this.S.zenith.promptstarttime=this.self.esm.frame,this.S.zenith.quadbuckets=[],this.S.zenith.spinbuckets=[];for(const[e,t,n,s,i]of this.GetPromptsList()){this.S.zenith.reviveprompts.push({id:t,rank:e,label:s,labelType:i,count:0,target:n,complete:!1,locked:this.S.zenith.reviveprompts.length>=1,stunned:!1})}this.self.c.OnClient((()=>{this.duoOtherSideGame?.duoSetPrompts(this.S.zenith.reviveprompts),this.self.hm.H.board.el("zenithpromptsself").update(this.S.zenith.reviveprompts),this.self.hm.H.board.el("zenithpromptsself").action("create"),this.self.sfx.Play("boardlock"),setTimeout((()=>this.self.hm.H.holderstate.ds+=5*this.self.lm.H.lastdT),550),setTimeout((()=>this.self.hm.H.holderstate.ds+=5*this.self.lm.H.lastdT),600),setTimeout((()=>this.self.hm.H.holderstate.ds+=5*this.self.lm.H.lastdT),650),setTimeout((()=>this.self.hm.H.holderstate.ds+=5*this.self.lm.H.lastdT),700),setTimeout((()=>this.self.hm.H.holderstate.ds+=25*this.self.lm.H.lastdT),750),setTimeout((()=>this.self.hm.H.holderstate.ds+=15*this.self.lm.H.lastdT),800),setTimeout((()=>this.self.hm.H.holderstate.ds+=15*this.self.lm.H.lastdT),850)}))}IncrementPrompt(e,t=1){if(this.S.setoptions.zenith&&this.S.setoptions.zenith_duo&&this.S.zenith.allyincapacitated&&t)for(const n of this.S.zenith.reviveprompts){if(n.id!==e||n.complete||n.locked||n.stunned)continue;n.count=Math.min(n.count+t,n.target);let s=!1;return n.count===n.target&&(n.complete=!0,s=this.CheckPromptCompletion()),this.self.c.OnClient((()=>{this.duoOtherSideGame?.duoSetPromptProgress(e),this.self.hm.H.board.el("zenithpromptsself").update(this.S.zenith.reviveprompts),this.self.hm.H.board.el("zenithpromptsself").action(s?"revive":n.complete?"clear":"advance",e),this.self.sfx.Play("boardlock_clink"),n.complete&&setTimeout((()=>{this.self.sfx.Play("boardlock_clear"),this.self.hm.H.holderstate.ds+=25*this.self.lm.H.lastdT}),200)})),!0}}BumpPrompt(e,t){if(this.S.setoptions.zenith&&this.S.setoptions.zenith_duo&&this.S.zenith.allyincapacitated&&t)for(const n of this.S.zenith.reviveprompts){if(n.id!==e||n.complete||n.locked||n.stunned||t<=n.count)continue;n.count=Math.min(t,n.target);let s=!1;return n.count===n.target&&(n.complete=!0,s=this.CheckPromptCompletion()),this.self.c.OnClient((()=>{this.duoOtherSideGame?.duoSetPromptProgress(e),this.self.hm.H.board.el("zenithpromptsself").update(this.S.zenith.reviveprompts),this.self.hm.H.board.el("zenithpromptsself").action(s?"revive":n.complete?"clear":"advance",e),this.self.sfx.Play("boardlock_clink"),n.complete&&setTimeout((()=>{this.self.sfx.Play("boardlock_clear"),this.self.hm.H.holderstate.ds+=25*this.self.lm.H.lastdT}),200)})),!0}}NixPrompt(e,t=0){if(this.S.setoptions.zenith&&this.S.setoptions.zenith_duo&&this.S.zenith.allyincapacitated)for(const n of this.S.zenith.reviveprompts)if(!(n.id!==e||n.complete||n.locked||n.stunned||0===n.count&&0===t))return t>n.count?this.IncrementPrompt(e,t-n.count):(n.count=t,this.self.c.OnClient((()=>{this.duoOtherSideGame?.duoSetPromptProgress(e),this.self.hm.H.board.el("zenithpromptsself").update(this.S.zenith.reviveprompts),this.self.hm.H.board.el("zenithpromptsself").action("nix",e),this.self.sfx.Play("boardlock_fail"),this.self.hm.H.holderstate.ds+=10*this.self.lm.H.lastdT})),!0)}CheckPromptCompletion(){if(!this.S.setoptions.zenith||!this.S.setoptions.zenith_duo||!this.S.zenith.allyincapacitated)return;if(this.S.zenith.reviveprompts.every((e=>e.complete)))return this.S.zenith.highestrevive=Math.max(this.S.zenith.highestrevive,this.S.stats.zenith.altitude),this.self.wfm.WaitFrames(12,"revive-other",{}),!0;const e=this.S.zenith.reviveprompts.find((e=>!e.complete&&e.locked));e&&(e.locked=!1,e.stunned=!0,this.S.zenith.promptstarttime=this.self.esm.frame,this.S.zenith.quadbuckets=[],this.S.zenith.spinbuckets=[])}ReviveOther(){this.S.zenith.allyincapacitated=!1,this.S.stats.zenith.revives++,this.S.stats.zenith.revivesTotal++,this.S.zenith.revivelevel+=me.ReviveLevelIncrease[this.S.stats.zenith.floor],this.S.stats.zenith.revivesMaxOfBoth=Math.max(this.S.stats.zenith.revives,this.S.stats.zenith.revivesTotal-this.S.stats.zenith.revives),this.self.c.IsServer()&&this.self.elm.emit("interaction",{type:"zenith.revive"},["allies"])}ReviveSelf(){this.S.zenith.incapacitated=!1,this.self.c.OnClient((()=>{this.self.sfx.Play("boardlock_revive"),this.self.hm.H.board.fx("boardflash").create(16777215),this.self.hm.H.board.el("zenithprompts").action("revive"),this.self.hm.H.board.fx("duorevive").create("REVIVED!")})),this.self.wfm.WaitFrames(12,"revive-self-finish",{})}ReviveSelfFinish(){this.duoOtherSidePrompts=[],this.S.glock=360,this.S.pause=!1,this.S.stats.zenith.revivesTotal++,this.S.zenith.revivelevel+=me.ReviveLevelIncrease[this.S.stats.zenith.floor],this.S.stats.zenith.revivesMaxOfBoth=Math.max(this.S.stats.zenith.revives,this.S.stats.zenith.revivesTotal-this.S.stats.zenith.revives),this.self.pm.H.sirenAlwaysGood=!1,this.self.bm.DestroyBoard(),this.S.lasttanktime=this.self.esm.frame,this.S.cancelstreak=0,this.S.zenith.staletime=this.self.esm.frame,this.S.zenith.stalepieces=0,this.S.bag=[],this.S.hold=null,this.S.holdlocked=!1,this.S.stats.combo=0,this.S.stats.combopower=0,this.S.stats.btbpower=0,this.S.stats.btb=0,this.self.bam.PopulateBag(),this.self.fm.Clean(),this.self.fm.Next();let e=0;const t=this.self.esm.frame;t>28800&&e++,t>28830&&e++,t>36e3&&e++,t>36030&&e++,t>36060&&e++,t>43200&&e++,t>43230&&e++,t>43260&&e++,t>43310&&e++,t>43360&&e++;for(let t=0;t<e;t++)this.self.bm.PushLine({column:[],pos:"gbd",position:"bottom"});this.self.c.OnClient((()=>{this.self.gpm.Vibrate(mi.CLEAR),this.self.hm.H.board.fx("boardflash").create(16760176),this.self.hm.H.holderstate.ds+=250*this.self.lm.H.lastdT,this.self.hm.H.board.el("b2b").delete()}))}VisualSetPrompts(e,t){this.duoOtherSidePrompts=e,this.S.setoptions.zenith&&!this.self.c.IsServer()&&(this.self.hm.H.board.el("zenithprompts").update(this.duoOtherSidePrompts),this.self.hm.H.board.el("zenithprompts").action(t?"fix":"create"),t||setTimeout((()=>{this.self.hm.H.board.fx("boardflash").create(16777215)}),750))}VisualSetPromptProgress(e){if(!this.S.setoptions.zenith||this.self.c.IsServer())return;const t=this.duoOtherSidePrompts.find((t=>t.id===e));t&&(this.self.hm.H.board.el("zenithprompts").update(this.duoOtherSidePrompts),this.self.hm.H.board.el("zenithprompts").action(t.complete?"clear":0===t.count?"nix":"advance",e))}AfterLineClear(){if(!this.S.setoptions.zenith||"doublehole_reversed"!==this.S.setoptions.zenith_mods[0])return;const e=4-this.self.bm.CountGarbageLinesNoPerma();if(!(e<=0))for(let t=0;t<e;t++)this.self.bm.PushLine({column:Math.floor(this.S.rngex.nextFloat()*this.self.bm.ColumnWidth())})}}class ge extends k{static OptionsList={version:{default:x,static:!0},gameid:{default:0,min:0,max:8192,strict:!0},seed:{default:0},seed_random:{default:!1},score:{default:0},are:{default:0},lineclear_are:{default:0},g:{default:.02},gincrease:{default:0},gmargin:{default:0},gravitymay20g:{default:!0},shielded:{default:0},hasgarbage:{default:!1},usebombs:{default:!1},garbagespeed:{default:20,integer:!0,min:1},garbagefavor:{default:0},garbagemultiplier:{default:1},receivemultiplier:{default:1},cancelmultiplier:{default:1},garbagemargin:{default:0},garbageincrease:{default:0},garbageholesize:{default:1},garbagephase:{default:0},garbagequeue:{default:!1},garbageentry:{default:"instant",allowed:["instant","continuous","delayed"]},garbageare:{default:5,integer:!0,min:1},garbagearebump:{default:12,integer:!0,min:0},garbagecap:{default:8},garbagecapincrease:{default:0},garbagecapmargin:{default:0},garbagecapmax:{default:40},garbageabsolutecap:{default:0},garbageattackcap:{default:0},garbagetargetbonus:{default:"none",allowed:["none","defensive","offensive"]},garbageblocking:{default:"combo blocking",allowed:["none","combo blocking","limited blocking"]},passthrough:{default:"zero",allowed:["zero","limited","consistent","full"]},openerphase:{default:0},roundmode:{default:"down",allowed:["down","rng"]},garbagespecialbonus:{default:!1},spinbonuses:{default:"T-spins",allowed:ne.SpinRules},combotable:{default:"multiplier",allowed:["none","multiplier","classic guideline","modern guideline"]},kickset:{default:"SRS+",possibles:["none","SRS","SRS+","TETRA-X","NRS","ARS","ASC"]},bagtype:{default:"7-bag",allowed:F.BagList},messiness_change:{default:1},messiness_inner:{default:0},messiness_nosame:{default:!1},messiness_center:{default:!1},messiness_timeout:{default:0},b2bchaining:{default:!1},b2bcharging:{default:!1},b2bextras:{default:!1},b2bcharge_at:{default:4,integer:!0,min:0,max:10},b2bcharge_base:{default:0,integer:!0,min:0,max:10},allclears:{default:!0},allclear_garbage:{default:10,integer:!0,min:0},allclear_b2b:{default:0,integer:!0,min:0},allclear_b2b_sends:{default:!1},allclear_b2b_dupes:{default:!0},allclear_charges:{default:!1},allow_harddrop:{default:!0},allow180:{default:!1},infinite_hold:{default:!1},infinite_movement:{default:!1},nextcount:{default:5,integer:!0,min:1,max:6},clutch:{default:!0},no_szo:{default:!1},nolockout:{default:!1},manual_allowed:{default:!0},new_payback:{default:!1},can_undo:{default:!1},boardwidth:{default:10,min:4,max:100},boardheight:{default:20,min:1,max:100},boardbuffer:{default:20,min:0,max:100},stock:{default:0,min:0,max:10},infinite_stock:{default:!1},locktime:{default:30},lockresets:{default:15,min:0,max:30},prestart:{default:0},precountdown:{default:0},countdown:{default:!1},countdown_count:{default:3},countdown_interval:{default:1e3},inverted:{default:!1},mission:{default:""},mission_type:{default:"mission",allowed:["mission","mission_free","mission_versus","mission_league"]},no_mission_sound:{default:!1},objective_type:{default:"none",allowed:["none","lines","timed"]},objective_count:{default:0},objective_time:{default:0},objective_result:{default:"",allowed:["","score","time","lines"]},zoominto:{default:"none",allowed:["none","slow","fast","cinematic","fade","zenithduoleft"]},noextrawidth:{default:!1},stride:{default:!1},pro:{default:!1},pro_alert:{default:!1},pro_retry:{default:!1},can_retry:{default:!1},slot_counter1:{default:"",allowed:["",...O.DisplayCountersList]},slot_counter2:{default:"",allowed:["",...O.DisplayCountersList]},slot_counter3:{default:"",allowed:["",...O.DisplayCountersList]},slot_counter4:{default:"",allowed:["",...O.DisplayCountersList]},slot_counter5:{default:"",allowed:["",...O.DisplayCountersList]},slot_bar1:{default:"",allowed:["","impending","progress"]},slot_bar2:{default:"",allowed:["","impending","progress"]},absolute_lines:{default:!1},display_zen:{default:!1},display_username:{default:!1},display_fire:{default:!1},display_replay:{default:!1},display_next:{default:!0},display_hold:{default:!0},display_shadow:{default:!0},levels:{default:!1},masterlevels:{default:!1},startinglevel:{default:1},levelspeed:{default:1},levelstatic:{default:!1},levelstaticspeed:{default:10},levelgbase:{default:.8},levelgspeed:{default:.007},minoskin:{default:{z:"tetrio",l:"tetrio",o:"tetrio",s:"tetrio",i:"tetrio",j:"tetrio",t:"tetrio",other:"tetrio",ghost:"tetrio"}},boardskin:{default:"generic",possibles:["generic","tetrio"]},map:{default:""},handling:{default:{}},room_handling:{default:!1},room_handling_arr:{default:2},room_handling_das:{default:10},room_handling_sdf:{default:6},noreplay:{default:!1},nosound:{default:!1},bgmnoreset:{default:!1},neverstopbgm:{default:!1},song:{default:"RANDOMcalm",possibles:["none","RANDOM","RANDOMcalm","RANDOMbattle"]},survivalmode:{default:"none",allowed:["none","layer","timer"]},survival_messiness:{default:0},survival_layer_amt:{default:10},survival_layer_non:{default:!1},survival_layer_min:{default:0},survival_timer_itv:{default:1},survival_cap:{default:0},invisible:{default:!1},master_invisible:{default:!1},void_holes:{default:0,integer:!0,min:0,max:15},void_holes_hungryness:{default:12,integer:!0,min:1},tutorial:{default:!1},usezenconfig:{default:!1},zenlevels:{default:!1},zenlevel:{default:1},zenprogress:{default:0},nosiren:{default:!1},anchorseed:{default:!1},forfeit_time:{default:60},username:{default:""},latencymode:{default:"medium",allowed:["zero","low","medium","high","xhigh"]},fulloffset:{default:300},fullinterval:{default:300},fromretry:{default:!1},retryisclear:{default:!1},topoutisclear:{default:!1},zenith:{default:!1},zenith_expert:{default:!1},zenith_doublehole:{default:!1},zenith_volatile:{default:!1},zenith_gravity:{default:!1},zenith_messy:{default:!1},zenith_allspin:{default:!1},zenith_duo:{default:!1},zenith_mods:{default:[],allowed:me.Mods},zenith_ally:{default:[]},zenith_allyexpert:{default:!1},TEMP_zenith_rng:{default:!1},TEMP_zenith_grace:{default:""}};static DeprecatedOptions=["garbagequadbonus","garbagespinbonus","garbageaspinbonus"];static localGameID=0;static init(){this.OptionsTemplate={};for(const[e,t]of Object.entries(this.OptionsList)){this.OptionsTemplate[e]=t.default;const n=b(t.default);switch(n){case"boolean":case"number":case"array":case"object":t.type=n;break;case"string":t.type=t.allowed||t.possibles?"table":"string";break;default:throw new TypeError(`Error while templating ${e}: typeof ${n} is not supported as default values`)}}}static*ValidateOptions(e){const{OptionsList:n}=this;let s=0;for(let[i,o]of Object.entries(e)){if(!(i in n)){if(ge.DeprecatedOptions.includes(i))continue;const e=`Unknown game option received | key: ${i} -> value: ${o} | Please report this message to the developers!`;if(s++,"production"===_.mode){console.warn(e);continue}throw new ReferenceError(e)}if(typeof o!=typeof n[i].default)throw new TypeError(`Options "${i}" type mismatch | actual: ${typeof o} -> expected: ${typeof n[i].default} | Please report this message to the developers!`);const{integer:e,min:a,max:r,strict:l}=n[i];if(l&&(o<a||o>r))throw new RangeError(`Options "${i}" out of range | actual: ${o} -> expected: ${a} .. ${r} | Please report this message to the developers!`);(a||r)&&(o=Math.min(r??1/0,Math.max(a??-1/0,o))),e&&(o=Math.floor(o)),(n[i].static||n[i].default!==o&&!t.strictShallowEqual(n[i].default,o))&&(yield[i,o])}s>0&&Qt({msg:`this replay contains one or more unknown options ${s}`,color:"#FFD800",icon:"warning",timeout:7500})}constructor(e){super(e),this.S.setoptions=qt(ge.OptionsTemplate),this.gameOptions={}}*GetSlotCounters(){for(let e=1;e<=5;e++){const t=this.options[`slot_counter${e}`];t&&(yield[e,t])}}SetOptions(e){if(e.TEMP_zenith_rng){const t=Math.pow(Math.random(),4.5);if(this.S.TEMP_zenith_apm=105*t+15,this.S.TEMP_zenith_apm_cycle=0,this.S.TEMP_zenith_instakill_at=Math.floor(15+11*Math.random()),e.g=.0025*Math.random()+.0025,e.gincrease=0,e.openerphase=0,e.zenith_mods=[],t>=.5){const n=(t-.5)/.7+.1;Math.random()<n&&(e.zenith_mods.push("expert"),e.zenith_expert=!0,e.garbageentry="instant")}}e.TEMP_zenith_grace&&(this.self.zthm._targetingGrace=JSON.parse(e.TEMP_zenith_grace));const t="das"in(e.handling??{})?e.handling:void 0!==ot?ot.handling:{};this.S.handling={arr:Math.floor(10*Math.max(0,Math.min(t.arr,5)))/10,das:Math.floor(10*Math.max(1,Math.min(t.das,20)))/10,dcd:Math.floor(10*Math.max(0,Math.min(t.dcd||0,20)))/10,sdf:Math.floor(Math.max(5,Math.min(t.sdf,41))),safelock:e.version>=12&&!1!==t.safelock,cancel:!!t.cancel,may20g:!(e.version>=18)||!1!==t.may20g,irs:["off","hold","tap"].includes(t.irs)?t.irs:"tap",ihs:["off","hold","tap"].includes(t.ihs)?t.ihs:"tap"},e.handling=this.S.handling,e.seed_random&&(e.seed=Math.floor(2147483646*Math.random()+1)),void 0===e.gameid&&(e.gameid=++ge.localGameID%8192),null===e.objective_count&&(e.objective_count=0),!1===e.shielded&&(e.shielded=0);for(const[t,n]of ge.ValidateOptions(e))this.gameOptions[t]=n,this.S.setoptions[t]=n;this.options.usebombs&&(this.options.minoskin.other="_bomb"),this.options.inverted&&(this.self.hm.H.holderstate.br=180),this.options.zenith&&(this.options.boardskin=this.options.zenith_expert?"zenith_expert":"zenith",this.options.zenith_mods[0]&&this.options.zenith_mods[0].includes("_reversed")&&(this.options.boardskin="zenith_reversed"),this.options.zenith_duo&&this.self.iom.IsLocal()&&(this.options.prestart=0,this.options.zoominto="zenithduoleft")),this.OnClient((()=>{this.options.version<x&&Qt({msg:"this replay is outdated and may not play properly",color:"#FFD800",icon:"warning",timeout:7500}),A.set(this.options.gameid+this.self.esm.gameIDContext,this.self.parent),this.options.usezenconfig&&xt("zen_panel").classList.remove("hidden");for(const[e,t]of Object.entries(this.options.minoskin))"ghost"!==e?Ac.load(t):kc.load(t)})),this.S.g=this.options.g,this.S.stock=this.options.stock,this.S.stats.score=this.options.score,this.S.rng=new C(this.options.seed),this.S.rngex=new C(this.options.seed),this.options.zenlevels&&(this.S.stats.zenlevel=this.options.zenlevel,this.S.stats.zenprogress=this.options.zenprogress),this.self.bm.Resize(),this.self.bm.SetupBoard(),this.options.map&&this.self.bm.LoadMap(this.options.map),this.options.room_handling&&(this.S.handling.arr=Math.floor(10*Math.max(0,Math.min(this.options.room_handling_arr,5)))/10,this.S.handling.das=Math.floor(10*Math.max(1,Math.min(this.options.room_handling_das,20)))/10,this.S.handling.sdf=Math.floor(Math.max(5,Math.min(this.options.room_handling_sdf,41)))),this.options.levels?this.self.lcm.LevelLines(0,!0,this.options.startinglevel):this.S.stats.level=this.options.startinglevel,this.self.bam.PopulateBag();const n=this.S.bag;if(this.options.no_szo&&n.length){const e=new Set(["s","z","o"]);for(let t=0;t<n.length&&e.has(n[0]);t++)n.push(n.shift())}if(this.options.void_holes){const e=Math.floor(this.S.rngex.nextFloat()*this.options.void_holes)+1,t=new Set;for(let n=0;n<e;n++){const e=Math.floor(this.S.rngex.nextFloat()*this.W),n=this.B+Math.floor(this.H/2)+Math.floor(this.S.rngex.nextFloat()*(this.H-Math.floor(this.H/2))),s=`${e}:${n}`;t.has(s)||(t.add(s),this.self.am.CreateActor("voidhole",e,n,!0,{nom:0,amt:this.options.void_holes_hungryness}))}}if(this.self.svm.UpdateCheeseLayer(),this.options.latencymode&&this.self.iom.replay?.SetLatencyMode(this.options.latencymode),this.options.can_undo&&this.self.um.Enable(),"allspin_reversed"===this.options.zenith_mods[0]){const e=this.S.rngex.shuffleArray(Array.from({length:this.W},((e,t)=>t)));for(let t=0;t<10;t++)this.self.atm.AddGarbageToQueue(1,"spawn",e.pop(),!1,0)}else if("invisible_reversed"===this.options.zenith_mods[0]){const e=this.S.rngex.shuffleArray(Array.from({length:this.W},((e,t)=>t)));for(let t=0;t<3;t++)this.self.atm.AddGarbageToQueue(1,"spawn",e.pop(),!1,0)}else if("volatile_reversed"===this.options.zenith_mods[0]){for(let e=0;e<2;e++)if(0===e)this.S.zenith.garbageahead.push(2+Math.floor(this.S.rngex.nextFloat()*(this.self.bm.ColumnWidth()-4)));else{let t=2+Math.floor(this.S.rngex.nextFloat()*(this.self.bm.ColumnWidth()-5));t>=this.S.zenith.garbageahead[e-1]&&t++,this.S.zenith.garbageahead.push(t)}this.S.lastcolumn=this.S.zenith.garbageahead[0]}else"nohold_reversed"===this.options.zenith_mods[0]&&(this.S.zenith.garbageside=Math.floor(2*this.S.rngex.nextFloat()))}SetConstants(e={}){this.self.cm.SetConstantsOverrides(e),this.self.cm.Reload()}async StartGame(){const e=this.options;if(this.IsServer())return this.options.noreplay||(this.self.iom.replay.PushEvent("start",{}),this.self.iom.replay.PushEvent("full",this.self.siom.Snapshot())),this.S.started=!0,this.S.pause=!1,this.S.time.zero=!1,this.self.elm.emit("start"),this.self.fm.Next(),void this.self.tm.Update();this.self.lm.H.ticksgame||o.Ticker.shared.add(this.self.lm.GameLoop),this.self.lm.H.ticksdraw||o.Ticker.shared.add(this.self.lm.DrawLoop),this.self.lm.H.ticksdraw=!0,this.self.lm.H.ticksgame=!0,this.self.dsm.DisplayCounts(),e.usezenconfig&&this.self.znm.UpdateFromZenConfig(),this.self.iom.IsLocal()&&!e.display_replay&&document.body.classList.add("ingame_phys"),this.self.iom.replay.PushEvent("start",{}),this.self.iom.replay.PushEvent("full",this.self.siom.Snapshot()),this.S.countdown_started=!0,await this._StartCountdown(),this.S.playing&&(this.S.hyperRetryAllowed=!1,this.S.hyperForfeitAllowed=!1,e.countdown&&(this.self.hm.H.board.fx(e.stride?"countdown_stride":"countdown").create("GO!"),this.self.sfx.Play("go")),this.self.esm.Start(),this.self.iom.IsLocal()&&!this.self.c.IsServer()&&e.anchorseed&&Ys.anchorSeed(e.seed),this.self.elm.emit("start",this.S.started),this.self.mm.Start(),this.self.dsm.StartStopwatch(),this.S.started=!0,this.S.pause=!1,this.self.fm.Next())}async _StartCountdown(){const e=this.options,t=e.prestart;if(await Ht(t),this.S.playing&&(!e.stride&&e.mission&&(this.self.ssm.GlobalShout(e.mission_type,e.mission,!0),e.no_mission_sound||this.sfx.Play(e.mission_type)),this.self.hm.H.holder.visible=!0,this.PlayZoomInto(),e.countdown)){const t=e.stride?e.mission?500:0:e.precountdown;if(await Ht(t),!this.S.playing)return;if(e.stride){if(this.self.hm.H.board.fx("countdown_stride").create("ready"),this.sfx.Play("countdown5"),await Ht(500),!this.S.playing)return;this.self.hm.H.board.fx("countdown_stride").create("set"),this.sfx.Play("countdown4"),await Ht(500)}else for(let t=e.countdown_count;t>0;t--)this.self.hm.H.board.fx("countdown").create(t),this.sfx.Play(`countdown${Math.min(t,5)}`),await Ht(e.countdown_interval)}}PlayZoomInto(e=this.options.zoominto){switch(e){case"slow":dc.animate(this.self.hm.H.holder,{0:{"pivot.y":ws(_c.x*this.H+1600)},1:{"pivot.y":ws(_c.x*this.Hh)}},.5,a(.06,.18,.42,1.16));break;case"fast":dc.animate(this.self.hm.H.holder,{0:{"scale.x":0},1:{"scale.x":"inherit"}},this.options.stride?.05:.25,a(.06,.18,.45,.98));break;case"cinematic":dc.animate(this.self.hm.H.holder,{0:{alpha:.5,"scale.x":0,"scale.y":0,"pivot.x":ws(_c.x*this.Wh+(0===this.self.hm.H.holderstate.ox?0:this.self.hm.H.holderstate.ox>0?300:-300))},1:{alpha:1,"scale.x":"inherit","scale.y":"inherit","pivot.x":ws(_c.x*this.Wh)}},6,a(.47,.66,.54,.98));break;case"fade":dc.animate(this.self.hm.H.holder,{0:{alpha:0},1:{alpha:1}},.5,a(0,0,1,1));break;case"zenithduoleft":dc.animate(this.self.hm.H.holder,{0:{"pivot.x":ws(_c.x*this.Wh+1600)},1:{"pivot.x":ws(_c.x*this.Wh)}},1,a(.17,.54,.58,1));break;case"zenithduoright":dc.animate(this.self.hm.H.holder,{0:{"pivot.x":ws(_c.x*this.Wh-1600)},1:{"pivot.x":ws(_c.x*this.Wh)}},1,a(.17,.54,.58,1))}}SpectateGame(){this.self.iom.synced=!1,this.IsServer()||(this.self.iom.IsHeadless()||(this.self.lm.H.ticksgame||o.Ticker.shared.add(this.self.lm.GameLoop),this.self.lm.H.ticksdraw||o.Ticker.shared.add(this.self.lm.DrawLoop),this.self.lm.H.ticksdraw=!0,this.self.lm.H.ticksgame=!0,this.self.dsm.DisplayCounts(),this.self.hm.H.holder.visible=!0,dc.animate(this.self.hm.H.holder,{0:{"pivot.y":ws(_c.x*this.H+1600)},1:{"pivot.y":ws(_c.x*this.Hh)}},.5,a(.06,.18,.42,1.16))),this.self.hm.IsTinyMode()||this.self.iom.SetScoped(!0))}}ge.init(),function(e,t){const n=1262,s="5Hno",i=1134,o="X(di",a=445,r=639,l="PmF#",c=395,p="qIb@",h=648,d=719,u=795;const _=ve();function m(e,t,n,s,i){return Be(i- -307,t)}function g(e,t,n,s,i){return Be(i- -d,n)}function f(e,t,n,s,i){return Be(t- -h,i)}for(;;)try{if(148031===parseInt(m(0,"PEOQ",0,0,n))/1*(-parseInt(m(0,"apzg",0,0,23))/2)+parseInt(m(0,"VlCh",0,0,421))/3*(parseInt(m(0,s,0,0,i))/4)+-parseInt((b=1237,C=o,Be(b-u,C)))/5+parseInt(g(0,0,"XRtz",0,-a))/6+-parseInt(f(0,r,0,0,l))/7+parseInt(g(0,0,"WCYY",0,c))/8*(-parseInt(g(0,0,"WjvE",0,563))/9)+parseInt(m(0,"08hj",0,0,1050))/10*(parseInt(f(0,432,0,0,p))/11))break;_.push(_.shift())}catch(e){_.push(_.shift())}var b,C}();const fe={};function be(e,t,n,s,i){return Be(t-383,i)}fe[ke(1951,1579,1988,2604,"PF26")+ke(1014,2208,1537,2439,"5Hno")+"e"]=Ie(132,186,"IfVL",-623,161)+"r",fe[be(1205,1197,639,1519,"PF26")+et(739,2046,"sZ[B",612,1378)+Fe(1439,439,472,1379,"WjvE")]=!1,fe[Fe(192,155,929,467,"XRtz")+et(1872,2654,"X(di",1943,2571)]=!1;const Ce=fe,ye=new(r[Fe(877,561,1109,695,"#GCG")])(Ce),xe=new(r[Fe(348,1192,1546,1113,"ImC8")+"kr"])(Ce),Ae={};function ve(){const e=["W78zfSoeW7y","W5WMW73cMmkR","W4hcOdBdOmo1","WODDhW","zMCUx8kX","W6tcH8orDSoB","zr8EWQqI","rCk4WO8KCG","qYjx","W5tcNYVdOqO","s8kzWQq","W5OrWPe2BG","pCoZAW","p23cT1W","oedcHCoL","WRv2yq","W4q6WPm","F0DA","FI85WQCN","qcjgnq","WQvrbJRdUq","x1euwmos","W4RdI2K","W5uTd8oQW6O","cehcQ17dTa","FSogaa","tmkqWQmA","yu9ywq","WQnseW","WR7cJmo2wCow","rSoxi8ov","qtvRpem","rmoyhCkaWQ8","oeBcNmoPW74","W5yoimolW5a","W70TkSoEW4K","WPhcImoPfCom","zgddTWtcRq","q8oKWQ/dGSou","WP7dUSoEtmko","jd7dQCkrW7O","a8otBSonvW","CCkcWRGuFW","Dmogb2ldUa","WR3cKCo5W47cTq","W5ekW7Gi","DSoNeCkRWRi","W493W5ZcSvC","iJupECkX","WQ0RWR4yva","W5ZdHNW","W7ddNd/dGCoi","WQVcO8osdG","l0xcLSoUW7G","xWdcUeVdPq","s8kyWQ8","W5ajkmoBW4y","WRpdRmoOd8kZ","mXJdPCkW","umk+mH4I","WRBdRmktWRKL","WPRdGCkMWPif","WOrWw8kqW7K","amo/WQtdISoe","nsJdPhG","lSkXW77dLW","pSkTW63dNCot","WQVdRmkf","qKjkFSk5","ouNcQ8kixW","gHpdNN8U","mc3dGSkiW4i","uIzSpvy","W4OkW6NcSCkF","zCkTlGuU","xXRcV0pdLG","c8kimW","D8o9bhldPG","wXyRwSks","umonaa","WR4lWQqUDa","WOVdL8kqW5ddHa","ACozfNhdUa","WRdcN8orgmoH","yr5ogMq","W7NcNZTDyW","W77dJsa","WRRdVCkyWQq/","WOJcTmofD8oI","W6O3W6u","DSoFdhNdUa","cSkRW6ddHSoA","WQNdTdBdHG","AmotfNpdOW","F8oKpSoJxW","W7BcPSoqvSoa","WR18CCoaBW","fWRcVuxcVW","t8oVmLxdNW","DSkcWQe5vW","cuVcTKxcVW","yXqOWQaa","W77cUSoQB8oJ","D8oekvBdMa","jXqHBx8","W67cKCoHwCoV","oL/cNCkzrW","WPpcG3m1mW","F2hdUWy","CCo3pmkHWOq","DSkxWQGrDa","WR5UkZddSa","nuRcOfVdIq","WPxcG8oH","mqJdK0ys","uszQpMG","WR9sbbddMG","WPRcJMNcMCkV","W7uSW58AWPu","WQFdUSkFWRmJ","WR3cJ8o6rmou","W4K2W73cMxu","W7mdjSo/W4S","W47cRSoLF8o/","nwhcV3VdMW","rmkAWQSAyG","wuhdRXC","W6GAW5lcMSkL","WRVcN8oNW4JcUa","W4RdHtFdL8o8","WPBcMmopc8ok","hJymFSk3","W5JdQq7dSmoN","WRJcHgm+aG","W4lcT8oQ","W4aXW4/cObu","za4/zwy","v1hcRKNdNG","h8oZWQVdH8oX","F09mu8kq","E07cSSoPWQJdTMHNWRRcVH8n","WPmIWOWrsq","fLNcPSk5qq","j1/dHrK4z8oOWQ7cTSooW4FcIJu","CwhcI2ddVW","W7RcMtnHrq","i8o3WOq","lK3cJmkzzW","WOVdQComsCkb","z8oWfmo9uq","WPu+WP0y","ESo7cSoACW","WPFcKSoTW7xcRq","WOVdHSkCW5BcGq","iX7dHuiu","jvVcO8kfxW","vSktWQ4","WPRdUCkuWRSZ","lM3cT1W","o8ocBmoBjG","W7JcUCobwSo0","CSoceq","oSo+ESkTva","tCk0WPOAuG","eSoIFmo6gq","uv3cO0i","WORcQNiiiW","W6NdV1lcKSkU","WP3cNCo7W6FcPW","rCo1kWKG","WPe1WOil","W6hdGtVdIG","WQ/dNSkrW6hcHa","rmkYpa0","WR/dHrxdOCom","mrxdVmkVW7W","Fx3dPbBcHa","la7dQmk+W6O","WQ3dKSkz","f0FcVuVdVa","WOnEdHJdIG","WPNcQgu","WO3dQCosvSkj","W4amW7tcLxK","dfBcSfZdTa","kCkRW6hdGmos","W7xcTdBdKCoZ","W5aAW4y5WQK","WOLqaH3dJq","W54XWO4V","WQ3dUCkyW7dcKW","W7NcNtpdPmou","nL7cTSkgqq","W5C0W7dcTCk6","Bq7dP8kVW70","WOa0mhGx","zJnSnLK","WPFcPmo6h8os","huFcPuNdJW","WRBdVmoivSkI","WRb0rSoGyW","e8kUW6ddPmoW","WR/cJSoyp8o8","wX/cVMnp","xLSjq8kz","n8kHW6a","W4yynCoaW5e","pePlwSkb","l1RdKCoYW7O","WQBcK8oSW4RcMa","WRRdVCks","W4BcT8oQESoS","iatdLa","WRfztCoAqa","imoCzmoDmW","nL/cRCkFvG","t8kFWQquzq","W6HTW7KsWPy","vHRcR1tdMW","o8o+sSo7lq","W4lcSCoGEq","of/cL8kgEW","WPHLCCkNW5e","W77cNt0","amo/WQtdJmov","WOjzbGG","gmoZWRldSCoX","WOFdHmozfmoG","fHWXumko","W442W5ZcVSkT","WR/dOsNdGmog","W5uQW7a","WRlcGCo5W6pcMq","W4yjnq","W4O3W4FcOa","EGf8EdK","W7qpimomW4G","expcO0FdOq","AaCVWQ0b","WO3dJmoHmG","W6munmonW48","WOldOYpdHmoY","WP/dOmoDqSkt","ExhdHGZcIW","AmoAdwC","WOzzbHVdIG","oxhcN27dLa","bHOZwmkq","c8ouzCoBha","omkKW6S","WO3cNSood8oN","lehcKmoZW6S","W6ldQW7dHmoh","W7VcIdpdL8oF","rComhSoCxG","dLtcVuNdPq","W7yXWP4","W4O2W4a","r1hcUvtdKW","W67cPXz3tG","W5CGW57cSq","oLtcRmkgua","xI5noCkE","d13cQu0","xMO/zSkM","WQ3dMmke","vM9msa","WQ/cPCo6lCoM","reBcPfldNW","WO9OECoSyW","wmoFoCozxW","lmoYWQ7dT8or","W7hcNJXx","rJnSnLq","e8kMW7RcGCkf","d8oxESoB","W5ZcT8o+Eq","W5FdHhdcGG","W4umW7m5WOm","W601WR0oCW","W4esl8ooW48","WQFdT8kyWQq","x8kHWRldSmoCs8k4aW","bmknnL0X","h8oZWQVdJ8oz","i1JcRmkAwG","eCozwSoipW","cmkCB8obfW","W5yXWOmO","B8kZWPG2zq","W7VcGdpdUCoS","W6RcVmkuWRS9","amo5WQ7dHG","reqE","mmo/ymoOfa","WO9qsq/dIG","W7itWQOxta","W7lcLd8","rmoHlSoFxG","WP3dL8o+nSkH","WOJcPLCVha","WO/dL8ktWPiV","CSoyc2q","bSoEzG","tCoaoveG","W53cLtXIDq","WOfUDSkN","WQlcJ8o5W4q","WReofvCZ","W4OMW7/cK8kC","W4hcMsVdVbC","bJddGCktW4W","rN9YECkM","WPddIxhcL8kO","W7pdJJpdNq","W67cUSoGtmoK","W4usl8ol","AmoBhCkjWQu","W4xdMdxdHSoU","W4FcIJ7dSa4","W7BcVb/dT8oy","WPaLWP0/CG","FCo7z8o4cW","W44DkmomW4i","dexcSfZdOG","WRyvouuV","WQFdPIxdSmoD","i1lcImkivG","rZdcOgHF","WPPVCmk+WP4","WPlcR0Sbla","qYHan8kG","x3ZdSXBcGG","vJe3WQ4u","WPFcNSop","vSoucupdIq","WORcHCoVdSo2","zXRcGerI","W7xcNYXTCW","WPdcMSoMW4dcUa","W4O3W4NcUf4","AIrTk3e","imo1ymo/","iNddSWa","a2tcKSkSya","WPq6ixmx","omoFWQtdLW","W7xcLdrwDa","WQlcHmoGW4/cQW","W6lcJZNdTqa","W4i3W4RcPW","laNdO8kPW6W","WOq8nvyu","W6hcTtRdLHW","W7NcIsXTza","W4iviSoaW4C","rSohpCkiWQq","quSqu8kF","WQW4phWB","jCowz8o8ga","WQtcKSoSW5pcVW","W6xdHYu","r1hcUvtdLq","mbddVmk+","xSophmkA","j8opBCo3bq","W5CZW7VcHCk7","ouZcNSoKW5S","WRuuWOKCtq","W7CMW6upWPm","W6hdGw8","W7ZcQSo2DCo4","a0KAr8ks","sWabWOuU","WPuOWP0svq","DCoUdmoZEW","DSoflSk9WOu","W4JcU8o3CCo3","FbVcPfr8","WOZcNmobW5VcGG","guJcR8klvG","Bmoxeh0","Ev8zwCkz","DKFcGKHT","W7exW6ikWR8","WRRcN8o6xW","WRjwDmkIW5O","W6CUW7FcMCkC","f8oBECon","WPv3E8o2","W53cQJC","W5e8W53cOeK","W6G5WO4Jqa","wcH6oG","cmkCW4VdTSoO","WR7dOIldHG","WPZdOSoiv8kj","qazQcNi","qY5zoW","WONcN8oNW5lcQq","WPi2nG","mrddPmk5W7C","q8kOiHir","W4u1W4hcU0K","WONdGSokfSkI","eJ7dOwK4","FSoyax/dQa","W53cVJ13FG","oGNdOW","ndW4ESkf","WP7dVmkEWPuA","WQhdKCkUWQax","mqJdK0ap","s0Wuwa","cLr7W7HxtwxdU8kcW5ddKSoC","WOldOglcSSk3qmkTWOBcLxxdNNm","eq/dGW","Ag3dPWlcLa","WQyDp34x","W6BdGsZdIG","nqZdOfKR","W4RdMwNcN8kY","ha/dRq","ewnQjKC","WR/cN8oT","wsj/oei","gLJcQCkyua","W6KSW7iz","W7GpWPqZyq","vKLxxSkz","xZbnhmk0","WONdL8kpW4hcGW","eSo0ASopaq","qg/dJZxcOW","W7ZdNd/dGmob","W4mEiSoaW4C","wmoBlmouDG","W4BdKNdcGSk/","W5SSW7RcKG","W60TW78i","tbNcGKj8","frxdQSk1W60","j8oPFSo+","uG3cLh1+","WRRcHCojgmoO","gaq0WRub","DCkUia4S","W5aPWOuYAa","FSogeSkhWQu","w8kggSkbWR8","zKDaumkq","y27dPW","WOJdK8kEW5RcJG","W7WPW4hcP2q","WOdcOg8spG","WPOHnG","W5ldMflcSmki","W6VcKs3dLq4","cSokqSo+iq","W5uoiSoBW5y","WRRcHCofCCo7","mSo1WQxdJSoD","DM3cPgFdIG","yGBcUuTJ","lXZdP8k8W60","cSkhl1qm","WQCmWPCXza","kX47A3K","bXBdS8k5W7q","bCoCD8obgG","iKFcMa","WQBcMw/cNCkDzavEk8oEzq","qLVcHeddLq","kvVcNSoJW7q","WRBdQd/dKa","dCoCASoC","W6eTW7utWP4","W6RcNJreyG","W6azWRuDsW","WQ/dUSkzWQeZ","bhNcJmoOW7G","W44jjmol","mbBdPCkYW7K","vYT7","rmoMi1pdHW","W4m3WRexra","lmoYWQ7dSmoe","xsHhoW","W6GMW7GBWO4","z1xcR0RdNW","W4CWWPqYCG","WRhcJmoL","WQ/dQcxdJmoF","W6yFjCoQW5S","uSkzWR0","WORdKCkyWQm","W73cQmoSCCoX","bmkrmeCM","t8oUjh/dNW","u8kzWOmBFG","xSk1lXW","E8kdbZaQ","WOj/daxdLq","h3xcPmkOvG","W47cNYG","WPpcHCokh8oi","W4lcJZNdTqa","iHiJya","W5lcTG3dKG8","imo9vSoQnq","yHZcKuL/","WQCIi3q","WOG/WP4","A1BcMK3dRW","WQxcS2O","lSkLaMqJ","gL7cUmozW6G","W5pdI3FcG8k9","cK3cM8ouW74","W4y3W43cU18","WPyJoMu","F8otax/dQa","W7hdJtxdGmol","W5m+WPm6wq","W4/cIJRdOre","W4WsiSoe","b8oXBmo3bq","AmodaG","mahdNmkvW48","BWTQdCkv","rmoCfCkAWQi","qmkAWQ8","WR3dSCkmWRi","W7CqW5RcLCkT","xuSixq","WQNcSxmsja","zXdcGeG","tfixvSkq","qWRcNLLH","uSoMb8kCWR4","yrvse3G","lHBdOSk+","WPi3WOqtuW","W5VcP8o0Eq","yW07","gSoKWQpdL8ov","WR4Ac04H","W7W0W4FcUNK","bHuLrwe","vtvq","W50bW64AWOO","W6GSW7GB","nmkMW6VdKCod","yYTYmui","nSkdW6JdKmoD","W4mMWPC+","WRZdPG3dJ8oc","C0Tw","WO7cIdRdPqO","W6hdH3JcJSkE","amoKFmoYdG","fSoDBmofvW","WPWHW6FcG8kQ","j0BcKCoN","WRNcUCooW4BcVa","seypASkF","W5CbW4WXWRK","omoxWQ7dGCoG","WQldT8krW6u","s8oDlSovqa","oLZcUG","WOXqbHVdJa","WO8sfaNdJW","iCo/ESo6fa","W5dcLdy","u19ArmkW","WPD9Bmo2","WRRdRmo1iW","kmoDySompa","WO3cPSonsmo+","WRtdG8o2xSoy","WPJcSgCDlW","W5dcLsZdUHe","BWRdTSoBa8kNWRNdLSk9W7OIeG","WPNcM8o2o8oI","WQ3dRdtdL8ou","r8ojiCk0WPi","vgPwEmky","W5hcNXpdOYS","WP7dK8krW5RcIW","W7dcQmoV","WQJdQmosvSkv","rIH4k3m","dbGRECkj","F09m","C8kHWOuVvq","WOOjk0GL","W4OTW68pWQi","WPTtlHRdKa","DCooiSod","W4RdMuJcM8k3","mbWsvSkX","xupdMrNcRG","evtcR8kFwW","xcL3kW","gSklo1S1","pGq/yq","rCohg8kdW6u","F23dTrdcKq","wZn7mvy","W5ddHxFcKW","W7WkW7dcGW","WRVcImoH","qs5Xmq","pSodWPRdS8o/","kKRcI8oVW60","W4OujCok","rKtcQuFdJG","W6i3W5C","W53cTt7dPCoY","q8ojamkl","W7JdPLJcSq","qCoNb3JdOW","WQRdQCk1W7RcPq","emolC8on","WRZdQCozsCkm","f8oxCCoEha","WPa0p2qB","kHddQmk9W6i","lCkTnKy","Amo3oCowCW","wsC8WPmM","WQxcT2qAlG","W4RdSmoSC8oL","qGFcG0H6","WQ1muSkFW7O","zCkZnY86","WP40jxqK","W4RcLtBdVq","WQj5pW","F0Lgwq","hCkTW7RdUSow","WPNdHmo2mSo7","mCkTW7FdH8oh","l0BcISoIW7m","WQC6mx0t","rd5toW","pLpcQ8kD","qczrkSk4","WPH5yCoKsa","wfhcTfu","W7lcN8oWx8oE","W5VcVZK","WQXxDCk1W6G","ea3dP8kV","yWGOWQy","WPu3nMKF","WONdLbBdPSo+","CLdcQxBdIa","WOFdNmkIWP8","qSkJltin","WRtcSSojhmou","B8otdgpdPq","oKBcTSoMW7a","C8ozdNq","WP9mdJpdQq","WO7cMZZdUa","ygrdw8kc","orhdGG","jXW3","WRtdQcRdH8oE","xComjmoevq","yutcGmkkuSo+WOe","tCoFimovhG","cmo4WR7dHSoc","W5NcMXBdQsK","wmoBlmouEa","CahcKvKI","vSk3kGCQ","xLCbua","yWJcPxDv","WPFcKSoTW7lcUa","WRuMWO8rrq","qY5QoHK","mmoRu8oTkG","eKlcSeVdSa","WOLzyCoquG","kSoXr8oHla","FCoea33dQq","W4tcKdfHsW","ofNcLSoUW6W","WOOIWPqo","WQTOC8khW54","W6uUW6i","W6VcOd3dSSoE","WRuYpMCE","W4VcPbnwDq","rJjHf8kJ","q18x","z23cNwpdQq","WP3dJCo6iW","nMxcGxFdGG","W6m/kmoJW6y","vSofaa","WOm6iwup","hSkgj8oPx8oclN4","WPn2ymo2","uvJcQa","avlcQmkqFW","W5RcU8o8tSox","WQtcK8oOW4xcGG","W4OMW7/cK8k2","vI9/mvK","W5NcVZBdPa","uLRcUvu","lHJdVG","W6JcIcHx","yuFcKuLO","WRpcMmoQW47cQa","xetcQftdJG","uCktWQ8w","iqS6B8ku","kKFcNmoOW7a","WQVcN8o8rSou","yLRcVKpdJa","W7m4WRmFDa","vcrQnLG","W4ZdK8kismk8W4msC0lcSSoR","nSkjouOh","rmoyhCkaWQK","m0RcSSkRzG","Ca9sb3a","WO4OWOeyqq","WONdG8oxe8kF","c8owzG","ouJcI8oL","qmk+WPK/Ca","WQ/cImoH","W5/cLrTfyG","W4a2W4RcSq","mu/cJSkgAW","WQxcN8oZW4q","EwCRCmkV","W5K3W7FcMmkH","FWBcLX8","W5VcOdFdS8o1","W7yMW7CyWQ8","mqNdIfKy","WPbidX3dKW","oLtcRmkgvG","W6aXW7KmWPq","WPZdMCkoW5ZcNG","WRJcG8oLW40","W5tdHuRcU8ks","qs9ie3u","WPZdOSoBuCki","BSo7c8oXzq","qIfsg30","g8kSW6RdPSow","WOJcOhexkW","W7W7W4hcUvK","WP3cJ8obW4xcIW","W5JdGKNcTCkw","WOe+i30x","WRvtfWJdUq","guJcVfS","cuhcT0NdVa","W4e2W5RcOfq","jmkgm2er","zSk/WQqj","ntJdK10u","pHW7yw8","d8o6WQ8","WORdL8oYj8k5","WOnsdGG","WQ/dTSksWQq","jvlcSG","WPZdNmoVmSkA","gSkcpua","vaC+","W7RcL8oQAmkG","W5NcSsBdOSoP","rx0qtmkw","gfdcKSodW7i","W4FcTspdTmoK","fb4P","cSoxza","oJJcSvddLXSoWRZcQ3K2lW","WRVcN8oN","yadcIKG","BSkrWOqRuW","u8onf8kbWQ8","WPJcQwq","pYSOwCkS","WRVcOwuVkW","WOaPWOmsvq","W7aMW7GpWPm","l0ZcNmoVW7S","ytdcV0jE","kcBdMq","y8oXjmkRWPG","W7ddUbpdUmoB","gSkniLC","WPRdO8oqumkn","W6ySW7CoWP4","W4Kyja","W68rWR42uW","WOrjcH7dMG","W7FcMdy","j8kWhxur","wCk6kW0","umoBi8ozra","WQ/dQcFdJ8oz","W5u4W4lcOv4","FSoSW6ZdNSoC","n8kPW7y","W4BcSsBdPmoL","WQClWQW6","WR18CCorDG","WP7dQqxdLmoi","WORcK8omhW","WRJdQmoy","zGFcLei","x8oHchBdLa","amkkmuy","uSkFWQ8EDa","WOTQFmoXCG","uG3cLhLT","vYT1","W6NcPsXeqG","dWldIvWy","WPBcOhuplW","wsLkkG","fINdTumv","umk6naOO","W5quiSogW4i","xKOjxmkF","WOhdLCoQs8kw","W7ZcGqldQCoI","v1hcOupdJG","WO53ESoOoq","WRi/nW","W5ynW5RcON4","oqxdJLS","uqKPWQq","W5yzmCoTW7e","ANRdRG4","c1hcQKa","W5qlkmobW5a","s8otoq","r0FcVu/dLa","FejowCkh","kHFdR8kV","W4JcK8orw8oq","W6/cLGPlDq","qraFwa","b1JcSmkeuG","W4q4W4pcSru","cgJcJmk5CG","nSk+y8o6fa","WRddUc7dLSoF","AenmvCkb","WQxdVCkpWQq","WR7dSCkyWRa","E8o8k8kVWPK","uCkYWRK1qa","WR3dRmkxWQuI","WPtdRCoeDSkj","FGBcLeG","jH5izCkAWOfEW7W","W4ZcTCoHAa","y3JdTqRcJG","imoxWPldVmoN","u2pdTW","WRZdRI3dISoe","qmkzWR4jFG","eHyPvmkk","eryZrG","uITg","WRRcJ8oFfCoG","WR5DbrddMG","wsLxo8kZ","nHFdOSk+W74","W5/dHNxcMCk/","xXRcVuFdIa","tGKIWQXk","WQhdQmkcWR45","pmkTnKy","WRVcVhKddW","hbWZ","W4z3W4/cOu8","WRpdRcO","W7JcLCoLW4tcRq","CePnx8kE","EGFcMvK","WRJdG8ozymkz","W4aTWO4VyW","reGRtCkn","jbiHyq","aSoEySopcG","WPlcI8oPmSk5","mYFdPL4k","WPJdQcpdJ8ob","fCoCESoFdq","WONdGSotW5JcHq","sCo0WRpdL8ov","WOCIi3q","WQCca1qL","WPlcI8oYoCkJ","WRNcG8o2xCov","nW7dK0ql","tCkgWQ8pzq","WRlcGSoHw8ox","WQhdT8kLW6RcVq","WPJdQmokrmko","lYi4v8kt","W53dSmo2ECo7","hSkwmuyX","W58+WPu/qG","twBdUa","WR7cJg8p","Amo6cfBdNW","WOldT8kxWRmt","aY7dNxO+","smoska","WPiUWPCy","WPZdGIpdPSou","WP3cPgWEza","na7dI04e","WOhdMCkzW5a","c8o6WQ/dM8oz","WRKJkKeL","tXyKWQ8v","r8ojf8kfWQ4","W53cSCoRCCk4","W6i9W4RcGfO","pSkNW7VdKmoB","W7KNW7RcP8k9","W6iQWOiiqa","hmoZWOBdK8o+","W5ZdK23cKW","W7GVWPmYAq","W4JcQaH3va","gbW5wG","kXeJA3W","WOpdV8kLW4lcQW","W4pcVCoGF8o7","W6GRWOy5AG","WRvXjItdOa","qb3cGKrI","cZddOCkEW5m","umktWQSzvq","Fubet8kq","EmkRmHSl","rLSc","mCoLymo/da","WPnQqCo8zW","hexcTe3cVW","WPpdISo/mG","wWCGWQq","BmoHdmo8Fa","WO4OWOy","w8oIfSkEWRS","WOFdL8kPW4BcPq","aH3dOG","WORcI8oEfSoH","W7pcGsXBAa","W6ddKd3dTCoR","EGOOWRKn","WQlcL8o5","W53cLtXMzG","W7NcQstdJ8og","wmoriSoDhG","WOJcQM4wza","WQRdKCoWe8kt","F23dTq","p8oxWPm","WQJcNSoXsmoP","W4xcMXpdLmox","wXRcPeJdMq","WPJdJ8knW5a","hCklW7/dKCo7","WQmOWOirrq","g8kbovyw","WPFcHmovdG","w8kYka06","W47dG3ZcLCk5","iX/dHKKB","FmoSlSk2WRO","ugL7mum","WP5HyCoG","WOiUWOK","W5n3W5TogmkPW6SCW4RcP8o0fG","W5ZcQSoLESoW","EghdRG3dJW","W7/cNJzuBG","W5mjkmoFW48","W5CHW7tcKSkS","Fmoxd3xcOG","mbpcQSkixq","WP/dK8kj","yb3cKuTQ","pSo/ASo+","W5OVW7S","WRBcJSoSm8oT","talcHG","eZxdKCk/W6a","A8kYWP41","kmkTW6/dLSo+","ESoPgSoGDa","W4ZcSCoQCSoZ","WQZdTmkt","gHWSB3K","rsz9na","WRhcGSoXvW","AduPWQaj","lM3cJf3dVW","wGFcHa","pCoXy8o+","W6VcVJFdPG","fSobD8ojdq","WPPmtCksW5O","WPNcQM1Bpa","WP3cPhmzkW","gXldR0S6","W4KSW5FcKCkG","WONdM8khWRqA","W48Am8olW4y","W7ySW7KrW5q","W4ZdHxBcM8oY","WOCUWPuyra","c8krpLqX","WRpdLCkoW4hcRa","WPVcPNusjq","EHpcLq","DWJcHeXt","cmkinf0J","ltmkxwG","zSoQeSoXyG","iX/dHL0j","W7mIeCoQW7a","wJjWpfi","jSoGASo6fa","qrRcOe/dNq","BWm5WOWx","WPLvhrK","zK9nuSkg","WPPqbGxdMG","WPhcMmoOa8o0","WRtcMSoMW4lcPW","FwFdIaxcJG","WP/cQ3ujiW","qhjNEmkQ","tctcSxvt","y8kcfI0A","W7mwWOKV","W40lW5RcHei","WP1Qz8oKBG","W5G8DmoMyW","gSoBs8ooma","W4yWW7KMWQS","W7etWQyC","WORdVmovs8kc","aSkJW5NdGSoX","pfnswmku","DWHowCku","D2HrtSka","usG7WQWm","WPddJmo1mmkk","WPJdJmo1nSk5","WRDZDSkPW5u","c8knnLy","sb89WQq","qCkQcsOg","eq/dG3SC","W7y7WOmpzW","WRZdRYNdKCoz","iXmMCa","w8orbmowxW","mXddO8k4W70","vY5fkG","WPVcQw0upq","W5tdJdldU8oo","WQJdTmktWQ8/","W48ZWP8CtG","W43dG2pcKW","lSkmex4x","WQZcHSo2ySoB","rmkWlWy6","maZdPmkOW7S","whhdSqBcRG","uKdcPeNdLa","mulcNmotW68","WQ/cMCo0vmox","kSouB8oedq","BMtdPa","WO93DSoSDG","WOpdQCostmku","WRXzt8kwW6m","ouJcLf7dIa","ECoAb2m","W5RdH8oIi8kW","nmocymoboa","WORdMSkCW5lcMq","W4m6WPqV","tSoBlSoFva","WQ3cPSouz8oN","umkQdcKV","imo5Dmo+","WOu2zSoXDG","W6WkW6RcTLK","iW7dK0an","WP06pNq","WRpcT8o4W7pcJG","WPOUFSk9W54","WRDVB8kNW7y","WRxcMSoSW4dcVG","WPBdQmozbCkj","WR/dGCo/","WO3dGmoVpSkX","W48tW4ZcPeS","amoxymohhq","bCoIvCoFnG","qt5UoG","WQ7dR8opsCkl","b8otB8oe","tCkAWQupyG","WO9sbbpdMW","wSomiSoa","WPtdO8oyqa","FMFdRG7dJW","WPhdTCkzWRmZ","wmoNm8kjWRS","WOePmMG","W7xcNJy","WOpdG8kjW5hcIW","BwRdRHhcLq","WQFdTSkFWQm","W53cH8kyW7NcJSkqB2C","omo9ymoAcW","W4lcId7dSa4","W6JcNIHDCG","WRuEWR04CW","WQXpqSovuW","C1zsumkm","DaJcNuHL","WQLhwmkLW6i","Eg3dRXdcIa","W4ypkmoaW40","vqGKWRu","W4ifW5SlWPq","patdGb0","WRJcImo2xCov","W4e1W4S","W4ixB8oAW40","uCkgWQ8EEa","ueLnumkq","jmoDWO/dTSoG","WO3dTComqa","bCogzG","t1euwCkz","tSktWQSAza","WPtcPCoZC8ou","cCoDz8on","Ab89WQq","o8oCzSopjG","WOJcPhusjq","wSosbG","mvxcQCk6Cq","bCoqBmoEha","dSkrW57dT8oK","lmk9mxmK","WOFdLCovj8kb","W5SVW7/dHmo9","xqtcN3HG","WQFdOmkf","WPuIWPKptW","WRicWPCOyW","WQZcN8o6rSoE","W6BdPvBcKmkp","WQJdOZBdGSoo","pqRdNW","W6SQW6tcKG","WPf5E8oWDG","jreGDNG","EhhdSqy","vLRcRKNdNG","As8JWRu","q8oqjmoe","WOyMWOaydG","WQpdT8ksWRi","q8orbmkl","wLFcUq","WO13xmoJEa","WR/cJSoykSo2","W5BdHxxcKSk5","bXxcPrW","W4hcTJtdPmoZ","W7e1gmoSW4C","CqxcLq","rmoyb3FdKW","vGxdTry","tSoWdN/dRq","WPJcQwrBjW","W4RcSSoREW","W7NcIsXazG","W4SyW5VcVuS","WQLpESkwW4K","WPJcImo2xCov","WQ7cGSoL","l0ZcMCoHW6O","t8kxWRi","xG8JWQu","WRpdU8k8W63cTq","iSoYAmoHdq","W6hdKsBdIG","WPtdHGpdTSo9","h8oFWR3dPCoG","CCktWR4WyG","u0jgBmkh","WPHVBmkGW5K","e8ohWQ8XDCoLWQBdHG","WO03WQK+Aq","gCoVWRRdHG","W7OWW7hcRCkE","rczroCkK","kuxcMG","w8o1nHOS","WOTBtCoUFW","W4ZcQbPODq","q2xdOcxcPW","nrddSSk+","WQxdSCkvWRW","pmkLpfae","W53cU8oLEmox","xK4xxmki","WQ7dOCkZW5RcNW","W7pcUbVdJCoc","WPe0mMms","WPmIWOasvG","W7dcMY3dOaa","FLhdJGZcSW","aqOTwG","W6COW6G","vmogfNNdOW","mrZdP8k/W40","WQ3dKCo6nmk+","WRpcTmoCW7JcJG","bbWuwCkt","yqBcN0aI","jq0QDN8","hG9cb8oouNOzn2zj","W5dcMCoig8o2","kb/dGKeo","pdCjDW","WPBdIgNcQLBdVfdcNNagW5/dIa","q8ojgmklWQu","W7GllSoC","WO7cNCoEW5hcIG","o8orBmomha","W7RcNt1kBG","fKVcVu0","A23dTq","WPaZmN8y","uamSWQyr","pmoBvSoDea","W6ZdIY7dTCo7","umktWROrCa","E2FdSWC","sfaywSky","W43dGNBcHmkO","eq/dG2Of","W7KXW6ZcLSk2","WRStevyo","W5eTW7FcGW","pmoGA8oPfa","wgLbmCkV","a8o1Fmo2aq","WPv2FmoX","W7NcKcO","W5e8W4/cSg4","zvrlsmkq","W7ZcTaldImoO","WRpdICoTgCkz","WQxdUCkIWQqz","evhcRCkirW","W7RcNtLvDa","tLyAqCos","uHubWQGx","W7eyW7C","z8o/fCoVEa","ucL9mfm","aHK/rNW","pX7dHumy","WOHqaG","W4u2WPC3yW","W7e6W5etWPa","WP50Ca","WObtndhdSq","WP/dOmozxCkj","gCk3iWK/","W4xcVXVdP8oU","WOnFi8odW4G","CSoyb3q","n0ZcS2NdUW","WOC1WQesEa","WPn3FG","dmo7Ea","cSo3WQFdHSkE","WO9XB8oG","hSo1WQxdK8ov","dCkbo10W","B8otbG","bwNcH8kTBa","WQ/dPctdHG","t8o9gG","W50KW6C","fgntmCkY","W480WPqtqW","WRFcSSok","W43cKZhdVby","WPZdQsi","fCoDsSoofG","WP7dIbFdKCo4","WQTyaYJdNG","WOpdMmkiW4BcJW","WPyMW7dcKW","WPnVE8oGzq","nGRdO8kPW7y","hKddUvhdTa","WPbhyCoKzq","pCkbp2aK","W4W6W67cKG","t8ktWQqj","zczbmSkK","WRpcI8oZqCou","WPNcPmosESoL","pCk9chCh","uCkUkGq","WOhdTmovuCkd","WPf5Bq","hcZdImklW5K","m8kVW6S","WPa0n3q","W53dPs7dQSo6","qdnkmCkV","W6SVW7KoWOK","FLaUBmkv","WQbNW7CFWO4","FSoybG","Fmo7n1FdIG","vslcIMfi","DSk2hdSh","W4msmSomW4W","W4BcKYFdTGe","jbJdL0yt","WOBcH8oDsmo/","E0Hlsa","dSo6WQ/dGSoc","tSo1jaCO","zmkofJGg","WOechh4K","W6O3W5O","W5ddHJxdGmol","W6CmW4qXWRe","yb3cGKrI","j8o5y8o+","yqZcKuLz","wSosbKtdRq","W6BdJWtdLSoD","rmkeWQuq","xSoTjmokvq","p8kMW63dNCot","W7NcVctdJ8on","WR4HWOqfzG","W6hcNJVdLH0","umojgCklW6u","WR7cSSo8W4NcJG","tf0pwSko","W7/dJN3cS8kK","WPNcHCoo","d8oBymodcG","FSoNhCo1yW","vCkOjrOG","mSoIWQVdKCox","W67cLZddHGK","WOOjjhi3","WP5vcqu","WPfsz8kkW6m","WPFdSSoue8kp","jmosWP7dQW","n8kNW6RdLW","aKJcP8k6Dq","WPBdQ28upG","fZhdSKGR","xSonhmoDwW","ACozdx3cOG","W5pdG3C","WOdcMCoJW5JcGa","WPldKmoWmCk2","WPiZWOWBrG","WRFcJhiJla","WPFcUCoSW6tcTq","hrWVvSkg","WPFdI8oVmSkN","yajKnmkc","BSoBahxdVG","sebUESkG","n8oXESo6pW","xCo8bCkJWRK","vCoeeq","BfOFyCkD","WODWA8k6W58","WRLifrxdKq","DqdcGKa","WRnMkXNdVG","W4pcSCoLAa","W6OrW6iSWOm","W7tdUaddMmoG","W4TRWPTOEG","W6/cMcjx","WPddGSo6qmk2","WRTcrCkEW7m","bCkFdmk9WQFdIJOz","fCkLW6/dTmoX","A0jhE8ky","dYBdPNCI","WPPzcqJdNG","W4VcVmkkfSoyxtWvdfqCWOe","jCowz8o4cW","WRqPWP0CqW","wCoklmowvG","W5VcPdRdPmoZ","WORcNmo2qCoD","FSorjwBdMG","nSoKFq","bmknnMe9","WR18Cq","qmk8ic8R","WPpcHCoyhW","W5qso8ok","sMtdRGlcLq","feRcKmoTW7i","FCkgWQuotG","y8ojfSkcWQ4","W7NcNGVdJmoG","WPSIWOmuva","WOC6ixyt","WPtdIrldQW","cuhcS03dSG","W7ddMZxdJSoF","oCopWPRdPSoJ","W5ZcQSo2FCoI","ouZcNSoKW4W","rmori8ov","h0JcNCoSW7O","mSoKz8o0dG","WOVdQCoDqCk0","ewn/pem","kbeQ","rJnSnLK","WPVcOwu","WO9HCSk2WP4","uSoNg8oErG","l1FdTmk+W7q","mZieB8ks","nCkKW6hdGmoe","fYddLSkEW4S","WQhdQCosbmkb","wfhdKsBcSG","W5lcLtddVKS","bSo7WQtdOSoB","WQ7dQComm8kT","WP7dG3tcHSkW","zqfNlSkM","DSk/iJWO","kSkJW63dOSoD","iWKQ","gCoBhCkcWQ4","kX8Jyq","W4yWWQ49Aq","vJjTk1G","WQFdT8kAWRyI","WOxdPbpdLSoe","W7xcTdBdHmo5","W6qZf8o3W5S","W63dNMVcG8k/","zu7cNSoTW7O","W5eSW7a","W7C9i8o6W5K","oW7dNLW","bSoXWRRdJmoj","WQvmeXxdKa","WR/cRCo7dmow","pKFcPW","yg3dObxcHa","geVcVu0","W6NdJvZcSmk+","FX/dISk0WQTdl8kJamk/gmo/vW","WR/cJSoy","k2lcU33dQW","BwxdTq","WP/cQ2iulG","WOe0phXy","W6BcUmoQsSor","W5RcRSoTu8oa","ofVcPa","WPLeptldQa","orGHz24","W6m+WOu3yW","ywFdPqy","wWCGWQrk","WPX5B8k2","bmknnG","WOvJESk8W4i","dSkPW6ZdNSos","W4u6WPmPFW","CePj","WOf1mMqc","DdCDWQKh","WQlcL8oRW43cQq","W6yFjCo7W4i","WOFcVSofcSoH","B8kilaWH","WOFcI8o+oCkH","beNcSmkaxq","l33cIw3dGG","W6hcVbRdJcW","yuLbvCku","lqZdQ8k5W70","W7qvfmo2W4O","WONcRhSE","rSkxWR4CtG","WOLKE8kwW4G","WPaVnNuP","uYf7lq","W7RdMGldLSoF","mmo8A8o6eG","o8ouE8oZiG","cehcRq","W50TW6RcHCkM","obGUyeK","wsjpoSkY","wSorp8oevq","xgFcGe/dQq","WRtcMSoS","WQWWjq","igZcRSobW5q","qetcQexdJG","W7dcISofxSoA","W60uW5K4WQa","W7FcLcfwAa","o0JcM8otW6S","xdn9nW","DCotlmoiyW","W4RdHtNdI8ok","WO/dISosmCk6","W6K+j8o8W6K","FCkaWQe","qcdcT2nj","WPWRnMmc","hIqFqvG","W47cVmoRASoZ","W43cLtVdTG","hbBdTSkVW54","eCofESoZfG","WQNdVSkXW63cRq","WR3cNCoL","WPBcQM8C","j8oMWOVdJSos","cCoBBq","qf3cT0m","WOtcVSo/vSoz","W442W4RcSq","nWRdIKPt","wmoyeCkCWR8","mCkHW63dMCoe","qfeFua","lK/cMCoLW7W","u0jg","ESk5WOuBqG","zMFdKI7cRW","W6tdJ8k9WPpdTbBdRCk1Bmkmwq","uSogf8kbWQ8","W4NcUmo3ECoI","yMpcGNtdVG","iCoZwmopnG","WRPhxmob","W5CsjmomW4y","WO4WWOm/vq","tNi6rmkl","BSo3i8oe","W6ZcM8ovBSod","bWy+s8kj","W5efW6ZcUCk2","WPmYWO4jvq","W5C1W7S","uSoyfIBcUa","BSkIfq0p","lHddQa","AmoFghu","W5xdJ2dcHq","WQlcJ8kNW4JcOG","W5/dIw3cMCkU","tGm5WRmD","WPFcHCoDW5JcVa","W6JdPedcTCk4","guhcJSohW6W","WQ3dLCoSymkZ","WPHzfXddNG","W4NdJuJcT8kR","W7NdRZ/dL8oi","cfdcUe7dTW","W4yRW5ZcU0K","mgdcG3ddOa","eHuUWQ4w","gIaqvSkV","WORdN8kfW5dcJG","kH40uCkV","WRtdGCoDqmk1","kfdcQ0hdVW","FCkFWQqoDa","WPdcN8orgmoH","c8oKWQVdJSov","W7NdNt3dICom","WRfcz8k1W4a","DSozbNu","WPnPWOaurW","WR/cMmoGW5u","WRRdOCkgWRi","WPrzymoSzW","W7GYd8oRW6y","W4ZdVKhcLCk3","WPdcUSoiW6y","W7JdGtG","lCk6W6FdHSos","Er9Fb1q","WORdTSoSvSkQ","W6WcW6mvWOO","nbC5A8kD","xIHtoW","vcvYoG","W43dG3FcKCkW","iHldJCk3W7C","WO99z8oZCG","WOzvcrK","e8oaASoCha","mLpcOCkgvW","d8kfmv4","W53cU8o3DCoS","WPJcG8oKW4pcQq","dcioseC","wmoBlmouCG","wmoBpCoCuq","zKnmt8kC","W6VcL8oQAa","WPBdHmoO","WOLYwSoMFG","wYr7","vSkpWROy","yb1TdfG","WPpcNCoHqCoZ","WPpcMmoQW47cQa","uIzZoHK","Ad8DWOq3","W6JcVWC","W57cPHzDCG","W6BdTYtdMSod","W7y0b8o4W4e","W4SSW73cNSkU","y0LRwSkA","aGSbsKG","WPy1WOqjrq","CWftkfK","qsHQomkU","y8keWRGCAa","hCoGDmoloa","CCkAhZGN","WPVcT2azjG","r8ohaW","xxzdrmky","W43dNNJcHmkO","W5lcStVdRq","rCkccqCB","WR1xCmoaBG","qc1rpf4","yaBcK0rT","Dc4pWOyC","F23dSXxcHa","hM/cU8oWW7G","WQ7cGSo6x8kF","WOaOACk3AW","WO9SDmoJCq","kCoOW6ddNCod","WP7dGCk0WO0K","wwBdOG/cHa","wCopbW","W5a+WOO+ka","o8ksmf8Z","umkTjaeN","W4NcNZpdTXy","WRJdO8owimk7","W6KIW6iFWPi","W63cSCoRCmoZ","cqNdH8k2W7O","vhpcOMZdMa","W4BcSmoTAa","WOe0jN8s","W7JdHZldIG","jKBcM8oL","W4uIexixpCkh","eq/dG3Wj","WQrwtmoOqG","DmosbW","W4tcT8oNuCog","WONcPmo7rG","W7RdR1/cT8kj","fSoWySopdG","WOldUY0","cXKRugO","DWz8gN8","W4e2W4hcUf4","dCoxB8omcG","rvqXt8kA","deZcI8ojW7e","mXZdO8kWW5W","W7RcKaxdHHa","mGFdGG","W5m2WOi","W5uEn8ogW5u","vCoommouta","WQNcNCoXu8of","tSo1lW8S","W4NcUa1hAq","W6uGW6itWOG","WPiOWO4uqq","d8klkLqX","v8kxWQ4o","F8onda","W43dMNdcMmkO","lWLHD3W","bWJdLemw","WRlcImoX","nSkhnfC1","W7hcKca","xSk0ka","kCoZw8o3lG","WRT0BCk6W54","usrxn8kU","ouBcKmoTWRe","WPNcJ8oi","jGRdI1Oy","W7mAWQeAuW","W5/cUthdJmor","WPBcHCoqhG","l8odWOZdPCo1","WPFdI8oYiW","x8oqpCoruW","WOHfeXNdSW","WRVcL8oX","WR3dRCond8kT","DaJcNuGI","ndeqwCkS","WQ1MmHVdQq","oCkDW5tdS8o1","WPXSESkGW4m","WOFdQWRdPCo4","WP17yCoQzq","WPpdQYRdJ8oz","bmoFkCou","W6ZcNtLlyG","WPtcJ8oDW5JcVa","WP3cR8oyvmoH","WODFaHpdJq","W6xdIstdM8ow","WOZdJCkcWR8G","WOFdK8keW4y","W4dcQsldPa","bHONwG","WORdNmoRmG","q8kvWQe","WPFdGmo3m8kM","EH3cMujI","rSkeWQun","W5hdMeRcMSkY","W7dcK8ofrmoj","hSo/WRddHG","baRdHumy","WQJcLmoLvW","jvlcTSkirW","WOXHA8kYW68","WP3dG8kyW4dcJW","hMdcKCo0","WO7dMSky","mqxdHeCs","obGUyfG","md03A8kL","W5hcVtFdR8o1","W5lcVdFdUCoO","uY9ckSoV","WPpdJmo1omk2","W4BcTtBdRG","W7KTW6C","r8orkCov","kLVcJCoHW6y","W4xcSJtdU8oS","W7CQW6Wz","W54LWOi","WRpdMmkyW5lcTq","W4uAl8odW4O","W73dGcddImoJ","W6S2W7qqWP8","rmoygmkhWR8","WRvJfX3dNa","WO9LA8kLW5S","vSogemkD","WRZdT8kzWRP4","dSo5WQ7dHG","gSo+EG","W5hdMNZcHmkO","W5uOW6hcLNq","qCoxlSoB","W6KIW64","BfOFzCko","cCoBBCohgG","W4/dMCkPk8oL","gCofeCkdWQK","ybNcNer4","nCkUW6JdGCos","k8oIBCk1eG","WR5LnZNdRa","lbSQDG","W4q2WP0+","WPhdU8kzWRO7","W5mcB8ogW40","WPNcQM0uoa","hCowzSoVfa","yWBcG0r4","W6eqW7RcHW","W7SwWRqp","sr8kWQ4o","WPf3CCoG","vsVcOKfK","jvhcUmkDvW","og3cJmoiW44","W4iRW4/cTLC","W63cNHfuAa","geVcQ1RdPa","W5ZcVCoRBmoZ","reOc","WRNdSCkyWRKZ","WPpcG8osfCoN","i0tcSSkm","W7JcKcXtwa","WQ/cPmo+W4lcJq","kehcNSo0WRe","h3dcR8ofW4W","g8kbkf41","W4KiW5/cOSkz","FKLdwa","WOzHCW","vcjamCkL","WR/cJSoylSoL","W4qRWOy9ya","v8oIpuddNG","cmo4WQNdJmou","WQRcNe0wia","oLlcPSkm","WQbjEmkwW7S","ebuP","W5hdVJhdRSo0","cKFcHG","tWm5","WPVdI8oVjCk8","WQxcRNC","nSkhn1yX","qmoAhCkAWQ4","W7tcOHNdVdy","kmkkW6/dLCoa","mHBdJ8k9W7C","g8o0FSozfW","WPhcQmoShCoh","jatdRu4y","W6mgWRCEvq","jLlcI8kpxa","wXRcV0pdJa","Cf9wwq","xgLtp8kZ","WRxdJSkPW7/cVa","DCoHpCoruW","WPNcI8orh8kQ","W5ivi8ooW40","cSkPW7ZdGCos","wKlcQa"];return(ve=function(){return e})()}function ke(e,t,n,s,i){return Be(n-73,i)}Ae[ke(1529,145,892,617,"q08X")+"OC"]=1,Ae[et(2079,1453,"rtkN",931,1231)+"K"]=2,Ae[et(2456,2933,"W3KH",2166,2195)]=128;const we=new class{[Fe(1027,1430,1262,1125,"08hj")+et(1714,901,"6[6j",2014,1383)]=new Map;[Fe(657,1166,832,942,"9uOv")+"s"]=new Map;[ke(608,-10,416,327,"azri")]=null;[Ie(890,-259,"X(di",219,212)+"CK"]=null;[et(2069,1286,"08hj",2244,1391)+"d"]=Symbol(Fe(1844,1399,1402,1758,"Qzoo"));[be(1656,863,145,1608,"!3Qz")]=Ae;[et(2697,1686,"qIb@",1768,1826)+be(2431,2455,2835,2210,"WCYY")+"r"](e,t){const n="t@jS",s=1665,i=2428,o="]KEn",a=622,r=461,l="C#3#",c="BVMs",p=3564,h=2044,d=2686,u=455,_=216,m=12,g=95,f=438,b=456;var C,y,x,A;function v(e,t,n,s,i){return be(e-191,i-234,n-_,s-m,e)}function k(e,t,n,s,i){return ke(e-224,t-145,t- -u,s-389,s)}this[k(-925,-148,-425,"q08X",-108)]=e[v(n,2731,1750,s,i)][(C=o,y=1703,x=1762,A=842,ke(C-g,y-f,A- -161,x-b,C))](e),this[k(a,818,0,"t@jS")+"CK"]=t[k(r,657,0,l)+"k"][v(c,0,p,h,d)](t)}[et(1526,1263,"ZBp6",938,1249)+ke(1331,1077,783,1403,"VlCh")+"s"](){const e=894,t=1246,n=346,s="j$uk",i=1769,o=821,a=80,r="BVMs",l=2195,c=2231,p=1185,h=1224,d=363,u=141,_="xZLj",m=1701,g="q08X",f=507,b=871,C=650,y=230,x=84,A=67,v=1121,k=859,w=459,B=604,L=494,S=248,z=1012,F=1976,T=1259,I="PEOQ",E=2043,M=393,D=185,O="ECiW",P=955,H=1871,R=1181,W=832,N=559,$=1423,G=2031,U=524,X=1088,j=438,q=38,K=201,V=1334,Y=289,Q=314,Z=615,J=647,ee="9uOv",te=888,ne=1371,se=507,ie=1188,oe=1958,ae=1986,re="WjvE",le=30,ce="8qu1",pe=478,he=1461,de="TKgk",ue=156,_e=1216,me="C#3#",ge=1109,fe=107,Ce=493,ye="VlCh",xe=360,Ae=601,ve=353,we=138,Be=701,Le=21,Se=52,ze=53,Te=399,Ie=343,Ee=407,Me=467,De={};function Oe(e,t,n,s,i){return Fe(e-398,t-146,n-Ee,s- -Me,n)}function Pe(e,t,n,s,i){return be(e-Te,n- -1257,n-48,s-Ie,s)}function He(e,t,n,s,i){return ke(e-Le,t-Se,i-ze,s-178,s)}function Re(e,t,n,s,i){return Fe(e-ve,t-314,n-we,s- -Be,i)}De[Pe(-1410,-731,-658,"BYvL",28)]=function(e,t){return e!==t},De[Pe(1008,1237,711,"WCYY",1279)]=Re(e,t,210,n,s),De[He(i,o,1381,"5Hno",1243)]=Re(452,-a,-426,-316,r),De[He(2818,1794,l,"PEOQ",c)]=function(e,t){return e&t},De[Ne(p,1080,h,"5Hno",1434)]=He(-d,506,u,_,578),De[Ne(1319,602,m,g,f)]=Re(961,550,161,b,"q08X")+Ne(C,1106,-195,"L4X9",-18),De[Pe(-y,0,x,"9ROd")]=function(e,t){return e===t},De[Oe(-A,v,"t@jS",k)]=Re(-w,B,-L,S,"apzg"),De[Ne(1099,1140,z,"C#3#",F)]=Ne(-153,608,-287,"08hj",-611);const We=De;function Ne(e,t,n,s,i){return ke(e-392,t-281,e- -Ae,s-86,s)}const $e=[];for(const e of this[Oe(-T,338,I,-426)+He(3041,E,0,"uUWF",2167)][Oe(-M,D,O,29)+"s"]()){if(!We[Ne(P,1363,0,"apzg")](We[Oe(H,1296,"uUWF",1389)],We[He(R,W,0,"ZBp6",1048)])){const e=meGumu.readUInt8(0),t=this.getvk(e),n=yuKari(chIhaya.subarray(1));return{[teWi.SymCmd]:t,data:n}}We[He(N,1714,0,"@j!&",$)](e[He(G,U,0,"rtkN",X)],this[Re(660,-j,-q,-K,"ImC8")][Ne(V,2082,0,"WjvE")+"K"])&&(We[Oe(Y,-Q,"4[ec",Z)](We[Pe(J,0,661,ee)],We[He(2258,te,0,"PEOQ",ne)])?(MarIbel=ChiMata+TokIko,this.seek(8*RenKo)):$e[Ne(-135,-se,0,"BYvL")](e[He(ie,oe,0,"PEOQ",1097)]))}const Ge=this[Re(772,1049,720,815,"6[6j")+He(1057,ae,0,re,1800)][Oe(416,-le,ce,pe)](We[Re(786,he,988,642,de)])?.[Pe(ue,0,505,"5Hno")];if(Ge){if(We[Pe(893,0,1199,"XRtz")](We[Re(-_e,-z,93,-462,me)],We[Oe(892,ge,"9uOv",310)]))return this._insert(cloWnpiece<0,1),this._insert(lyrIca.round(okaBe*kotOri),shiMako);$e[Re(490,-fe,-915,-171,"9ROd")][Oe(-145,Ce,ye,xe)]($e,Object[Ne(-195,-437,0,"C#3#")](Ge))}return $e}[Ie(387,-714,"PmF#",694,175)](t,n){const s=2562,i=1314,o=1608,a="4[ec",r=873,l=1562,c="C#3#",p="yora",h=348,d=1189,u=318,_="ZBp6",m=1157,g=1577,f="]KEn",b=493,C=397,y=2123,x=2959,A=1492,v=913,k=570,w=741,B="Y!uW",L=158,S=260,z=1944,F="ECiW",T=1780,I=792,E=1785,M=2492,D="9ROd",O="]KEn",P=1127,H=2156,R=321,W=1118,N="PF26",$=808,G=1078,U=1217,X="PmF#",j="uUWF",q=123,K=340,V=1713,Y=909,Q=59,Z="j$uk",J=785,ee=317,te=1061,ne=165,se=152,ie=1361,oe=733,ae=1919,re=1882,le="9uOv",ce=75,pe=966,he=790,de=1055,ue="^jyP",_e=871,me="C#3#",ge="sZ[B",fe=569,Ce=1553,ye="wEbn",xe="0SiJ",Ae=1718,ve="IPZB",we=150,Be=77,Le=819,Se=2420,ze="8qu1",Te=1158,Ie=955,Ee=1283,Me=1090,De=1132,Oe=1975,Pe="Qzoo",He=1119,Re=349,We=642,Ne=299,$e=932,Ge=771,Ue="8qu1",Xe=199,je=282,qe=404,Ke=164,Ve=233,Ye=273,Qe=73,Ze=984,Je=306,et=249,tt=278,nt=174,st=262,it=122,ot=402,at=563,rt={};function lt(e,t,n,s,i){return Fe(e-st,t-it,n-ot,e-at,n)}function ct(e,t,n,s,i){return Fe(e-et,t-tt,n-nt,t-600,i)}function pt(e,t,n,s,i){return be(e-Qe,t- -Ze,n-264,s-Je,s)}function ht(e,t,n,s,i){return ke(e-Ke,t-Ve,n- -Ye,s-462,t)}rt[lt(1319,1813,"@j!&",1867,1909)]=function(e,t){return e&t},rt[ct(s,1984,i,o,a)]=function(e,t){return e===t},rt[ct(r,1499,1266,l,c)]=ht(1208,p,h,d,-u),rt[ut(1288,_,298,m,2032)]=lt(g,1144,f),rt[ht(b,"yora",C,962,584)]=function(e,t){return e===t},rt[ct(2136,y,x,A,"^jyP")]=ut(601,"xZLj",-v,-120,k);const dt=rt;function ut(e,t,n,s,i){return Fe(e-304,t-Xe,n-je,s- -qe,t)}if(this[ut(-w,B,L,-S,-1105)+ut(z,F,T,1523,I)][lt(E,M,D)](t,n),this[ut(1493,O,1505,1154,P)+"s"][lt(H,2457,"uUWF")](n[pt(-R,601,1076,"PEOQ")],n),n[ht(W,N,677,$)]=t,dt[pt(1166,G,U,"ECiW")](n[pt(647,1394,1209,X)],this[ut(-112,j,q,K)][pt(V,Y,1265,"#GCG")+"OC"])){if(!dt[pt(-Q,408,938,Z)](dt[pt(J,ee,te,"PF26")],dt[lt(1403,961,B)])){const e=this.byteOffset,t=e+pArSee;return this.seek(8*t),this.buffer.toString("hex",e,t)}n[ht(-540,"WCYY",ne,-753)+"r"]=e[pt(-se,104,1045,"8qu1")]([n[ct(340,678,ie,0,"C#3#")]])}if(n[ct(866,oe,1646,0,"VlCh")]){if(!dt[lt(ae,1817,"TKgk")](dt[pt(1001,975,re,le)],dt[pt(722,-ce,-pe,"VlCh")]))throw new eirIn(`Type ${yuuMa} is not implemented for NetCodec.TYPES.Any`);n[lt(he,de,ue)]=new Map,n[ht(_e,me,1377,1131)]=new Map,n[ht(1465,ge,fe,840)]=e=>n[lt(1792,1243,"PEOQ")][ht(2107,"IPZB",1409,1376)](e),n[ct(Ce,2097,2161,0,ye)]=e=>n[lt(760,547,"Qzoo")][pt(1099,1231,1340,"WjvE")](e);for(const[e,t]of Object[ht(537,xe,1199,Ae)+"es"](n[ht(1184,ve,624,944)])){if(!dt[pt(we,Be,Le,"C#3#")](dt[ct(2153,Se,3172,0,ze)],dt[ht(Te,"j$uk",Ie,Ee)])){const e=this.byteOffset;return this.seek(8*e+64),this.buffer.readBigUInt64BE(e)}n[pt(Me,De,Oe,Pe)][pt(1693,1160,He,"(03]")](e,t),n[ut(Re,"t@jS",-We,-Ne)][ct($e,1258,Ge,0,Ue)](t,e)}}}[ke(2115,741,1295,1880,"apzg")+"e"](t,n,s={}){const i=this._commands.get(t)??this._commands.get("__pack__");let o=i.code,a=1;if(i.flags&this.FLAG.F_ALLOC)return i.buffer;!s.batched&&(i.flags&this.FLAG.F_ID||s.id)&&(a+=3,o|=this.FLAG.F_ID);const r=i.encode(n,this._PACK,t),l=e.allocUnsafe(a+r.byteLength);return l.writeUInt8(o,0),l.set(r,a),l}[et(1137,899,"IPZB",2236,1487)+"e"](e){const t=new n(e),s=t.peek(6,2),i=this._codes.get(s),o={command:i?.name};let a=1;if(!i)throw new ReferenceError(`received an unknown code [0x${s.toString(16).padStart(2,"0")}]`);if(i.flags&this.FLAG.F_ALLOC)return o;e[0]&this.FLAG.F_ID&&(o.id=t.peek(24,8),a+=3),e=e.subarray(a);try{o.data=i.decode(e,this._UNPACK)}catch(t){throw console.error(`Failed to decode command ${i.name}: ${e.toString()}`),t}return this.SymCmd in o.data&&(o.command=o.data[this.SymCmd],o.data=o.data.data),o}};function Be(e,t){const n=ve();return Be=function(t,s){let i=n[t-=216];if(void 0===Be.vfuGtp){Be.tKNaFQ=function(e,t){let n,s,i=[],o=0,a="";for(e=function(e){let t="",n="";for(let n,s,i=0,o=0;s=e.charAt(o++);~s&&(n=i%4?64*n+s:s,i++%4)?t+=String.fromCharCode(255&n>>(-2*i&6)):0)s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(let e=0,s=t.length;e<s;e++)n+="%"+("00"+t.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(n)}(e),s=0;s<256;s++)i[s]=s;for(s=0;s<256;s++)o=(o+i[s]+t.charCodeAt(s%t.length))%256,n=i[s],i[s]=i[o],i[o]=n;s=0,o=0;for(let t=0;t<e.length;t++)s=(s+1)%256,o=(o+i[s])%256,n=i[s],i[s]=i[o],i[o]=n,a+=String.fromCharCode(e.charCodeAt(t)^i[(i[s]+i[o])%256]);return a},e=arguments,Be.vfuGtp=!0}const o=t+n[0],a=e[o];return a?i=a:(void 0===Be.TsQqGU&&(Be.TsQqGU=!0),i=Be.tKNaFQ(i,s),e[o]=i),i},Be(e,t)}{const{F_ALLOC:t,F_HOOK:n,F_ID:s}=we[Ie(1927,946,"5Hno",930,987)],i={};i[Ie(1192,1629,"9ROd",943,850)]=25,i[et(1010,1632,"IfVL",907,1179)]=t,we[Ie(1280,492,"IPZB",816,853)](ke(718,1311,436,519,"WCYY"),i);const o={};o[be(1693,2059,2627,1707,"Y!uW")]=63,o[be(2879,2261,2132,1884,"qIb@")]=t,we[ke(1406,1364,1253,372,"C#3#")](et(3217,1801,"uUWF",1893,2336),o);const a={};a[et(205,668,"0SiJ",1699,1046)]=19,a[Ie(453,1002,"yora",308,640)]=n|t,we[be(1643,2314,2186,2642,"rtkN")](be(1922,1691,2120,1651,"9ROd")+ke(2664,2698,2036,1400,"6[6j"),a);const r={};r[Fe(64,436,-163,422,"ECiW")]=33,r[Fe(473,213,290,582,"9uOv")]=n|t,we[et(1534,1445,"sZ[B",1831,1024)](et(368,250,"rtkN",1360,1197)+"d",r),we[ke(836,1234,1369,1071,"W3KH")](ke(1132,991,795,1459,"6[6j"),{code:9,flags:n,encode({recvid:t}){const n=e.allocUnsafe(4);return n.writeUInt32BE(t,0),n},decode(e){const t=2500,n=1849,s=413,i=978;return{recvid:e[(l="ECiW",c=1218,p=1198,ke(l-326,c-48,c-6,p-342,l)+(o=t,a="ZBp6",r=n,Ie(o-s,a-387,a,r-396,o-i))+"BE")](0)};var o,a,r,l,c,p}}),we[Fe(674,1627,1775,1262,"VlCh")](Ie(431,-957,"j$uk",-285,-277)+"on",{code:44,encode({ribbonid:t,tokenid:n}){const s=e.allocUnsafe(16);return s.write(t,0,8,"hex"),s.write(n,8,8,"hex"),s},decode:e=>({ribbonid:e.toString("hex",0,8),tokenid:e.toString("hex",8,16)})}),we[ke(1459,914,773,613,"PEOQ")](be(720,1175,752,396,"WjvE")+"ts",{code:7,encode({packets:t}){const n=t.reduce(((e,t)=>e+t.length),0),s=e.allocUnsafe(n+4*t.length);for(let e=0,n=0;e<t.length;e++){const i=t[e];s.writeUInt32BE(i.length,n),s.set(i,n+4),n+=i.length+4}return s},decode(e){const t=[];for(let n=0;n<e.length;){const s=e.readUInt32BE(n);n+=4;const i=e.subarray(n,n+s);t.push(i),n+=s}return{packets:t}}});const l={};l[Fe(868,504,668,818,"rtkN")+ke(1319,1036,1982,1663,"qIb@")]=1,l[be(1657,767,277,998,"BVMs")]=2,l[be(-265,633,1219,753,"ECiW")+et(1823,1907,"orc9",1873,1800)]=3,l[be(3293,2366,2481,2448,"C#3#")]=4,l[Ie(-331,365,"9uOv",-99,-177)+be(2136,2361,1822,1594,"IfVL")]=5,l[Ie(-269,1442,"W3KH",166,537)+"l"]=6,l[Ie(336,873,"9ROd",856,120)+"e"]=7,we[be(603,1206,1753,885,"t@jS")](et(2242,1927,"6[6j",1830,1840),{table:l,flags:n,code:4,encode({reason:t}){let n=e.allocUnsafe(1);const s=this.getkv(t);return n.writeUInt8(s,0),s||(n=e.concat([n,e.from(t)])),n},decode(e){const t=e.readUInt8(0);let n=this.getvk(t);return n||(n=e.toString("utf8",1)),{reason:n}}});const c={};c[Fe(608,16,1306,861,"L4X9")+et(2394,2147,"Qzoo",723,1630)+ke(1652,2312,1414,1634,"6[6j")+Ie(938,432,"yora",610,488)]=0,c[be(1383,643,1203,335,"t@jS")+Fe(1750,1114,1121,1830,"apzg")+ke(152,929,413,491,"BVMs")]=1,we[be(1e3,1063,1651,1684,"PmF#")](Ie(140,1296,"(03]",1146,994),{table:c,code:42,encode({reason:t}){return e.from([this.getkv(t)])},decode(e){const t=e.readUInt8(0);return{reason:this.getvk(t)}}});const p={};p[et(2251,2106,"L4X9",1650,2531)+ke(1576,2461,1639,980,"PEOQ")]=0,p[ke(1039,330,1167,1046,"BYvL")]=1,p[be(1428,2101,2929,1847,"VlCh")]=2,we[be(628,1360,636,1071,"4[ec")](Ie(866,-729,"WCYY",-436,-72),{table:p,code:51,flags:n,encode({type:t,timeout:n}){const s=e.allocUnsafe(3);return s.writeUInt8(this.getkv(t),0),s.writeUInt16BE(n,1),s},decode(e){return{type:this.getvk(e.readUInt8(0)),timeout:e.readUInt16BE(1)}}});const h={};h[et(2280,2038,"xZLj",1766,1485)]=1,h[ke(521,439,313,-587,"azri")]=2,h.ok=3,h[ke(1785,2096,1545,727,"ECiW")]=4,h[ke(172,621,727,1155,"ImC8")+be(1185,1900,968,2291,"TKgk")]=5,we[Ie(714,-157,"4[ec",639,472)](Fe(626,1162,1239,595,"L4X9")+"y",{table:h,code:49,flags:n|s,encode(t,n){const s=this.getkv(t.type),i=e.from([s]);switch(s){case 1:{const n=e.allocUnsafe(2+t.msg.length);return n.writeUInt16BE(t.timeout),n.write(t.msg,2),e.concat([i,n])}case 2:case 3:case 4:case 5:return e.concat([i,e.from(t.msg)]);default:return e.concat([i,n(t)])}},decode(e,t){const n=e.readUInt8(0),s=this.getvk(n);switch(n){case 1:return{type:s,timeout:e.readUInt16BE(1),msg:e.toString("utf8",3)};case 2:case 3:case 4:case 5:return{type:s,msg:e.toString("utf8",1)};default:return t(e.subarray(1))}}});const d={};d[Ie(-467,-434,"yora",505,349)+ke(160,1835,931,1856,"X(di")+Fe(2363,2304,1745,1630,"08hj")]=1,d[ke(912,1719,1195,864,"PEOQ")+Ie(2349,1507,"IfVL",1518,1543)+be(747,1625,845,2226,"@j!&")+"be"]=2,d[be(1479,954,181,532,"TKgk")+Ie(371,1055,"BVMs",212,508)+ke(529,1500,1021,423,"t@jS")+et(1121,1738,"C#3#",1880,1922)]=3,d[ke(-243,-174,537,-252,"]KEn")+Ie(-123,-245,"@j!&",1234,581)+et(1330,2690,"#GCG",2908,2116)]=16,d[be(865,1770,968,1971,"VlCh")+et(884,688,"4[ec",2343,1516)+et(2281,1208,"#GCG",1661,2085)]=17,d[be(1355,1911,2292,1788,"0SiJ")+ke(2729,1473,2113,3004,"9uOv")+"k"]=18,d[Fe(1991,1381,2240,1352,"0SiJ")+Ie(1311,1497,"j$uk",618,1465)+et(1655,3285,"qIb@",3367,2557)]=19,d[Fe(2095,1232,2445,1908,"(03]")+et(1249,2326,"Qzoo",2823,2001)+Ie(492,-371,"9ROd",831,39)+ke(-118,-247,545,-373,"TKgk")]=20,d[et(1764,3018,"ImC8",3280,2343)+ke(920,175,381,211,"WjvE")+et(3415,3143,"BVMs",2058,2825)+ke(1127,1216,926,1281,"8qu1")+Ie(418,1685,"qIb@",1375,1134)]=21,d[et(3094,3077,"0SiJ",2980,2277)+ke(1165,279,787,749,"BYvL")]=22,d[ke(2060,1547,2021,2935,"PEOQ")+Ie(421,1550,"9ROd",1652,1345)+be(2212,1890,1535,1847,"]KEn")]=23,d[Ie(744,553,"zXbz",1916,1040)+be(1001,1142,1602,1168,"4[ec")+ke(1348,974,1388,1835,"PF26")+et(575,1556,"WCYY",2199,1274)]=24,d[be(1444,1338,588,1009,"W3KH")+Fe(1919,974,993,1652,"orc9")+et(2556,1410,"BVMs",2305,1756)+ke(1692,926,1701,1045,"q08X")]=25,d[be(2446,1911,2108,1041,"0SiJ")+Ie(85,1083,"t@jS",1361,818)+et(1444,1587,"0SiJ",1267,1351)+Ie(-689,-166,"L4X9",-414,5)+"ve"]=26,d[be(759,724,1077,1364,"t@jS")+et(1434,1843,"t@jS",2761,2072)+et(1763,1100,"BVMs",2573,1756)+be(1333,1306,1005,1242,"VlCh")+"te"]=27,d[ke(1959,2796,1859,2374,"08hj")+be(1688,2183,1856,1808,"ECiW")+et(2272,978,"orc9",1796,1699)+ke(748,1353,824,562,"5Hno")+"r"]=28,d[et(849,931,"BVMs",961,1443)+Ie(1372,404,"(03]",1056,1241)+Fe(2296,1119,2355,1517,"BVMs")+Fe(1506,741,1012,914,"t@jS")]=29,d[Ie(-537,-661,"t@jS",62,-164)+et(1001,762,"orc9",1789,1492)+Ie(1856,1222,"5Hno",1326,956)+be(1350,925,466,58,"TKgk")+be(1629,811,1267,623,"q08X")+"t"]=30,d[ke(335,177,889,852,"9ROd")+Fe(856,-239,-345,357,"Y!uW")]=48,d[Ie(1613,360,"^jyP",531,865)+be(2510,1895,1803,2525,"q08X")+"ce"]=49,d[ke(2735,1232,1867,1596,"9uOv")+ke(1696,2566,1668,1636,"]KEn")+"it"]=50,d[et(1267,1736,"azri",2407,1606)+Ie(275,189,"0SiJ",-576,65)]=51,d[Fe(1903,2271,1752,1346,"TKgk")+Fe(676,-170,-24,549,"6[6j")]=52,d[ke(645,630,930,380,"azri")+Ie(1346,756,"orc9",432,902)+et(2578,1326,"9uOv",1857,1767)]=53,d[Fe(1795,807,914,1658,"rtkN")+Ie(1048,1309,"sZ[B",1561,1402)+"t"]=54,d[Ie(-214,702,"Qzoo",-477,281)+Fe(220,758,593,597,"PmF#")+"ce"]=55,d[be(998,1550,1151,1366,"Y!uW")+et(1398,767,"C#3#",1286,1684)]=56,d[ke(2132,2217,1693,950,"zXbz")+be(1403,1591,1494,1758,"azri")]=57,d[Ie(586,2231,"9uOv",526,1289)+Ie(979,1047,"ZBp6",2303,1433)]=58,d[Fe(1574,1553,239,1059,"WjvE")+Ie(2334,1815,"9ROd",1073,1572)+ke(988,789,552,280,"WjvE")]=59,d[et(2096,2993,"uUWF",2944,2305)+ke(1677,2356,1634,1163,"j$uk")]=60,d[et(2527,1904,"sZ[B",1264,2182)+Fe(-20,984,1263,464,"XRtz")+be(1060,1857,2434,2508,"^jyP")+"e"]=61,d[Fe(1160,-407,1458,540,"ECiW")+et(1856,2137,"PEOQ",898,1371)+"y"]=62,d[Ie(939,920,"azri",-22,352)+ke(1612,2043,1974,2502,"PmF#")+be(1958,1766,977,2112,"4[ec")+"er"]=63,d[ke(1852,518,1394,948,"wEbn")+et(2633,2364,"IfVL",1881,2217)+Fe(1007,764,1559,1415,"@j!&")]=64,d[Ie(128,-688,"q08X",149,27)+Ie(1874,1366,"]KEn",589,1211)+ke(1300,1926,1041,1224,"W3KH")+"te"]=65,d[be(1164,915,1825,593,"q08X")+et(1089,2008,"qIb@",2521,1875)+be(2162,1601,1429,2418,"@j!&")+"rd"]=66,d[et(1889,1242,"wEbn",1507,2070)+Ie(-236,656,"Qzoo",408,113)+Fe(987,1325,981,1804,"IPZB")]=67,d[Ie(336,1249,"IPZB",2130,1244)+be(1850,1552,751,1486,"Y!uW")+be(850,1494,1412,1754,"IPZB")+"t"]=68,d[be(-45,884,751,1276,"4[ec")+ke(1045,1882,1780,1504,"H!o^")+et(2730,1047,"0SiJ",1660,1934)]=69,d[ke(879,447,1121,1213,"ImC8")+be(1653,850,1375,408,"8qu1")+"ec"]=70,d[Fe(2086,2238,1464,1380,"uUWF")+Fe(812,800,443,175,"C#3#")+ke(1091,1097,2034,2021,"08hj")+Fe(-600,-649,887,160,"yora")+"d"]=71,d[ke(-170,-146,636,946,"PEOQ")+Fe(1858,2261,2066,1615,"Y!uW")+"y"]=80,d[be(2330,2016,1957,2901,"apzg")+ke(1166,1742,1232,2108,"@j!&")+"e"]=81,d[Ie(872,-793,"C#3#",-838,-61)+Fe(2003,1951,1055,1509,"WjvE")+Ie(777,-850,"(03]",506,-97)]=83,d[Ie(-26,-855,"(03]",-121,2)+be(1284,1560,1666,1462,"ImC8")]=82,d[et(1811,2515,"ImC8",1988,2008)+ke(1807,1546,2139,2658,"!3Qz")]=96,d[Fe(1537,713,1962,1114,"q08X")+ke(1862,1528,1962,1682,"#GCG")]=97,d[ke(1276,1525,1025,767,"L4X9")+Fe(788,-65,7,55,"BYvL")]=98,d[ke(1310,1305,919,989,"sZ[B")+Ie(1384,1167,"WjvE",129,832)+ke(1941,1668,1838,1273,"PF26")]=99,d[et(2520,1223,"zXbz",841,1609)+et(2518,2079,"VlCh",2481,2709)]=100,d[Fe(996,1032,44,676,"H!o^")+et(2515,2898,"PF26",3570,2824)+Fe(671,614,1230,1365,"XRtz")]=101,d[Fe(1663,1308,566,1295,"9ROd")+ke(1595,2599,2024,1372,"orc9")+"t"]=102,d[Fe(1979,598,1596,1375,"W3KH")+Ie(1132,2198,"t@jS",1818,1442)+Fe(2001,2259,1939,1732,"X(di")]=103,d[Fe(1151,2281,2290,1546,"uUWF")+Ie(-38,1560,"08hj",-63,841)+ke(2027,1576,1904,2832,"xZLj")+"t"]=104,d[Fe(1443,1733,1516,1114,"q08X")+et(2012,3311,"8qu1",3263,2845)]=105,d[et(1513,1962,"j$uk",1774,1636)+Fe(2447,1962,968,1876,"4[ec")+"e"]=128,d[be(974,1491,2204,1524,"zXbz")+ke(-193,823,570,887,"WCYY")]=129,d[Fe(680,1547,1756,1499,"6[6j")+be(2657,1737,2654,1613,"8qu1")]=130,d[Ie(815,1052,"08hj",367,1103)+et(2274,819,"8qu1",1228,1744)]=131,d[Fe(1071,-240,745,290,"WjvE")+Fe(-187,1143,1028,722,"sZ[B")]=132,d[ke(-120,535,817,448,"^jyP")+et(1505,2022,"q08X",2131,2429)]=133,d[be(1189,1932,2579,2125,"L4X9")+Ie(331,1862,"BVMs",1483,1245)]=134,d[et(3289,1889,"BYvL",2901,2523)+Fe(1188,2437,697,1492,"BVMs")+"st"]=135,d[et(2804,1989,"9ROd",2264,2602)+be(2284,1361,911,2298,"4[ec")]=136,d[et(1901,1160,"W3KH",2095,1448)+be(2416,2229,1766,2833,"azri")+Ie(1912,701,"qIb@",1740,1274)]=137,d[Ie(2193,2281,"wEbn",2156,1577)+Fe(1463,579,1586,1414,"L4X9")+"e"]=138,d[et(864,572,"W3KH",1482,1448)+et(1894,980,"PF26",1551,1650)+Fe(2699,1171,1249,1795,"orc9")+Ie(-115,-211,"H!o^",-698,224)]=139,d[et(2508,1708,"!3Qz",1132,1637)+et(3072,2105,"9ROd",2034,2757)+Ie(925,-490,"H!o^",-517,-13)+"t"]=140,d[et(723,989,"Qzoo",2414,1581)+et(2844,2905,"XRtz",3362,2504)+et(1144,1365,"ECiW",1720,1498)+"o"]=141,d[et(1537,1457,"L4X9",1740,2298)+et(1697,1966,"orc9",482,1225)+et(654,1749,"IfVL",1606,1180)+et(2227,3019,"q08X",1273,2151)+"r"]=142,d[Ie(455,577,"L4X9",1725,1044)+ke(2369,1996,1702,1478,"yora")+Ie(146,-427,"zXbz",529,71)]=143,d[be(2236,1712,2273,1825,"WCYY")+et(2044,1169,"IfVL",1592,1655)+Ie(-183,-340,"H!o^",561,270)+ke(1307,1181,1528,1499,"0SiJ")]=144,d[et(1197,1710,"9uOv",2064,1169)+Ie(110,7,"WCYY",516,494)+et(1733,2327,"#GCG",2140,2348)+Ie(1750,1494,"TKgk",526,907)]=145,d[et(2864,1755,"azri",1634,2004)+be(267,715,568,283,"08hj")+Fe(25,200,-323,587,"rtkN")+"ve"]=146,d[et(646,1692,"H!o^",854,1542)+be(1385,2313,3188,1996,"t@jS")+be(423,1326,1625,1924,"ImC8")+Ie(-61,423,"]KEn",888,132)]=147,d[be(1446,2236,2732,2074,"9ROd")+et(2392,1177,"W3KH",1006,1935)+Fe(-119,732,133,241,"WCYY")+"ke"]=148,d[et(2960,2753,"9ROd",1720,2602)+ke(-82,1529,632,1213,"4[ec")]=149,d[Fe(1001,733,334,655,"q08X")+Fe(1672,1400,1888,1482,"(03]")+ke(1568,1501,2168,3076,"PF26")]=150,d[ke(1036,1541,772,1555,"W3KH")+et(903,968,"zXbz",776,1285)+ke(2539,1174,2014,1404,"IfVL")]=151,d[be(698,1372,1103,1263,"8qu1")+Ie(485,1571,"BYvL",1311,641)+ke(693,9,771,50,"orc9")+"e"]=152,d[et(1209,1916,"azri",2825,2004)+et(2873,1946,"08hj",3077,2463)+ke(592,103,1012,1620,"(03]")]=153,d[et(1345,1793,"PEOQ",2263,2111)+Ie(1046,857,"ECiW",1325,1383)+ke(457,1799,891,651,"^jyP")]=154,d[et(3501,2348,"wEbn",2575,2831)+Ie(205,348,"9uOv",1196,479)]=155,d[Fe(-498,261,589,147,"t@jS")+be(2128,1231,1673,1793,"TKgk")+"er"]=177,d[ke(2309,1498,2071,1920,"IfVL")+Ie(261,-250,"VlCh",12,419)+"ve"]=178,d[Ie(714,485,"qIb@",529,515)+be(639,1101,323,1131,"PF26")+"ch"]=179,d[et(325,1821,"TKgk",1477,1033)+ke(1360,1682,1802,2661,"XRtz")+Fe(2075,2314,2414,1666,"j$uk")]=180,d[be(1470,1506,1910,710,"^jyP")+Fe(638,-134,792,66,"zXbz")+"dy"]=181,d[Ie(297,402,"9uOv",364,-20)+be(2657,2305,1629,1538,"@j!&")+Fe(-458,1046,975,292,"TKgk")+Ie(-755,1106,"BVMs",-262,159)]=208,d[be(1871,2160,1824,1748,"9ROd")+ke(157,1364,1046,235,"wEbn")+ke(1820,1436,973,511,"TKgk")+et(2523,1175,"qIb@",2430,1941)]=209,d[et(2199,1838,"W3KH",2389,2252)+ke(1798,1116,1450,1783,"PEOQ")+ke(1770,968,1335,2238,"xZLj")+"e"]=210,d[et(2589,2214,"BYvL",3158,2706)+be(890,1285,1688,892,"orc9")+be(1702,977,872,1343,"08hj")]=211,d[be(1114,1930,2162,2399,"8qu1")+be(1422,1869,1891,2176,"ImC8")+Fe(-404,149,815,499,"XRtz")]=212,d[Ie(577,1400,"PF26",812,1183)+Ie(-225,648,"H!o^",-53,558)]=255,we[Ie(-287,1167,"azri",467,521)](et(2643,2932,"IfVL",2254,2421)+et(1248,903,"t@jS",2078,1407),{table:d,flags:s,code:43,encode(t,n,s){const i=n(t),o=e.allocUnsafe(1+i.length),a=this.getkv(s);return o.writeUInt8(a,0),o.set(i,1),o},decode(e,t){const n=e.readUInt8(0),s=this.getvk(n),i=t(e.subarray(1));return{[we.SymCmd]:s,data:i}}})}const Le={};Le[be(2762,2029,1777,1785,"sZ[B")]=0,Le[Ie(572,-209,"0SiJ",1456,626)]=1,Le[et(1816,2879,"!3Qz",2329,2094)+"t"]=2,Le[et(1349,2880,"9ROd",2166,2228)+"g"]=3,Le[Ie(-501,742,"@j!&",-897,-200)+"r"]=4,Le[Ie(202,684,"VlCh",752,510)+"an"]=5,Le[be(1186,2060,1631,1438,"PF26")]=6,Le[et(3547,2840,"8qu1",2287,2628)]=7,Le[be(2024,1897,1898,1006,"H!o^")]=8,Le[Fe(1645,2075,2384,1916,"5Hno")]=9,Le[be(1324,660,73,642,"PEOQ")+"t"]=10,Le[ke(3002,2119,2066,1353,"BVMs")+"e"]=11,Le[Ie(1416,1752,"5Hno",1572,1004)+"r"]=12,Le[Ie(1103,813,"uUWF",595,1504)]=13;const Se={};Se[ke(1816,2096,1972,2805,"Y!uW")]=0,Se[Fe(510,768,496,131,"WjvE")+Fe(1545,850,2145,1532,"BYvL")]=1,Se[Fe(1908,2148,1081,1475,"08hj")]=2,Se[Fe(1476,398,195,700,"zXbz")]=3,Se[et(1178,143,"IPZB",1995,1052)+"e"]=4;const ze={};function Fe(e,t,n,s,i){return Be(s- -176,i)}ze[Ie(-58,362,"sZ[B",-641,-241)+"R"]=1,ze[Fe(887,-245,1138,192,"9uOv")+"E"]=2,ze[Ie(389,1540,"orc9",996,939)]=3,ze[ke(1797,1871,1597,2380,"WCYY")]=4;class Te{static[Ie(565,324,"8qu1",689,823)]=Le;static[ke(2473,1379,1762,2149,"IfVL")+ke(1507,2104,1563,1392,"BVMs")+"X"]=Array[et(635,1935,"L4X9",1813,993)](Object[ke(1635,1846,1708,2331,"rtkN")](this[ke(620,1511,1314,1782,"q08X")]));static[Ie(1641,1589,"@j!&",680,714)+Fe(997,170,84,77,"ZBp6")+Fe(1257,-146,1603,737,"@j!&")]=new Set([Fe(-50,621,37,565,"t@jS")+ke(1755,813,1235,2049,"azri"),et(2120,810,"5Hno",955,1360),ke(2293,1913,1653,1849,"ECiW")+"an",Fe(2033,1936,1959,1305,"IPZB")+"r",ke(1877,1873,1297,724,"zXbz")+"g",be(2019,2046,1417,2586,"08hj")]);static[be(1425,1415,1664,1791,"0SiJ")](e){return e>>>0===e?Math.max(32-Math.clz32(e),1):Math.max(32-Math.clz32(~e)+1,2)}static[be(1184,1966,2388,1713,"08hj")+Fe(189,1478,926,1054,"q08X")](e){return Math.ceil(this.cla32(e)/4)}static[ke(1275,603,852,681,"Qzoo")]=class{constructor({min:e,max:t}){const n=1930,s=3292,i=2419,o=2402,a="IPZB",r=406,l="!3Qz",c=133,p=1861,h="0SiJ",d=1812,u="sZ[B",_=936,m=68,g=1778,f=1169,b=629,C="PEOQ",y=1991,x=436,A=322,v=316,k=452,w=285,B=296,L=289,S=243;var z,F,T,I,E,M;function D(e,t,n,s,i){return et(e-392,t-k,t,s-w,s- -B)}function O(e,t,n,s,i){return Ie(e-309,t-49,s,s-441,i-220)}function P(e,t,n,s,i){return ke(e-150,t-230,s-242,s-261,i)}this[P(1208,-101,979,721,"ECiW")+P(n,s,i,o,a)]=e,this[O(75,-r,-272,l,c)+(z="azri",F=p,T=1525,be(z-18,F- -x,F-A,T-v,z))]=t,this[(I=h,E=-348,M=-655,Ie(I-367,E-L,I,M-S,E- -89)+D(d,u,0,980))]=Math[O(-348,_,0,"qIb@",m)](2,e),this[P(1462,g,0,1728,"q08X")+P(f,327,0,b,C)]=Math[D(2331,"WjvE",0,y)](2,t)}get[Fe(932,1107,675,1119,"]KEn")+"ze"](){const e=302,t=144;function n(n,s,i,o,a){return be(n-e,n-165,i-t,o-234,o)}return this[n(2025,0,1953,"xZLj")+n(797,0,1104,"XRtz")]}get[be(444,1109,335,916,"PmF#")+"ze"](){const e=1278,t="BYvL",n=111;function s(e,t,s,i,o){return ke(e-n,t-435,i- -175,i-214,s)}return this[s(893,1441,"apzg",1780)+s(e,2087,t,1944)]}[ke(2746,1854,2135,2548,"0SiJ")+et(2308,2570,"zXbz",1911,1642)](e){return e?this._maxBits:this._minBits}[Ie(113,739,"ZBp6",1299,989)+be(1294,1424,934,1569,"0SiJ")](e){let t;switch(e){case e>>>0:t=this._minSize<=e;break;case e|0:t=-this._minSize/2>e;break;default:throw new RangeError(`Float/Double is not supported for DInt: got ${e}`)}return{bit:t,size:t?this._maxBits:this._minBits}}};static[Ie(2211,2226,"IPZB",1863,1331)+"r"]=new class{[ke(1826,1651,1493,1448,"#GCG")]=Se;[et(1975,2662,"Y!uW",2055,2473)+"e"](e,t){const{TYPES:n}=this;if("number"!=typeof t)throw new TypeError(`Attempted to encode ${typeof t} as a number`);if(Number.isNaN(t))return e.writeUInt(n.NaN,3);if(!Number.isFinite(t))return e.writeUInt(n.Infinity,3),e.writeBoolean(t===Number.POSITIVE_INFINITY);switch(t){case t>>>0:{const s=Te.GetIntSize(t);e.writeUInt(n.UInt,3),e.writeUInt(s-1,3),e.writeUInt(t,4*s);break}case t|0:{const s=Te.GetIntSize(t);e.writeUInt(n.Int,3),e.writeUInt(s-1,3),e.writeInt(t,4*s);break}default:e.writeUInt(n.Double,3),e.writeDouble(t)}}[be(1361,1347,1475,959,"q08X")+"e"](e){switch(e.readUInt(3)){case 0:return NaN;case 1:return e.readBoolean()?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;case 2:{const t=e.readUInt(3)+1;return e.readUInt(4*t)}case 3:{const t=e.readUInt(3)+1;return e.readInt(4*t)}case 4:return e.readDouble()}}};static[ke(780,2348,1447,1467,"ZBp6")]=class{constructor(e,t=be(523,1078,455,590,"BYvL")+"t"){const n=1107,s="8qu1",i=1814,o=892,a=1841,r="IfVL",l=286,c=248,p=684,h=1249,d="H!o^",u=666,_="4[ec",m=1250,g=571,f="ZBp6",b=313,C=698,y=244,x="!3Qz",A="^jyP",v=1606,k=900,w=150,B="6[6j",L="wEbn",S=397,z=8,F="ECiW",T=1357,I=1397,E="ECiW",M=1111,D="0SiJ",O=683,P=965,H=162,R=161,W=119,N="zXbz",$=757,G=1949,U=1408,X=496,j=815,q=326,K=348,V=323,Y=296,Q=171,Z=913,J=383,ee=493,te=180,ne=471,se=279,ie=308,oe=14,ae=301,re=55,le={};function ce(e,t,n,s,i){return be(e-oe,n-ae,n-re,s-212,s)}function pe(e,t,n,s,i){return et(e-ne,t-se,e,s-ie,i- -1168)}function he(e,t,n,s,i){return ke(e-ee,t-110,s- -te,s-103,t)}le[pe("VlCh",1357,1127,1287,1402)]=function(e,t){return e!==t},le[he(n,s,i,982,1615)]=pe("PmF#",o,0,1109,1077),le[ce(1872,0,a,r)]=function(e,t){return e+t};const de=le;function ue(e,t,n,s,i){return ke(e-Y,t-Q,s- -Z,s-J,i)}this[_e("!3Qz",l,-c,529,-p)]=new Map,this[ce(h,0,1133,d)]=new Map;for(const[t,n]of e[ue(u,1499,0,892,_)+"es"]())if(de[ue(-199,-m,0,-g,"6[6j")](de[he(800,f,0,1176)],de[he(2420,"IfVL",0,1666)])){const e=kOgASa.split("");lUcIA.writeDInt(e.length,this.$word);for(const t of e)mEgUMu.writeTable(t,this.$$letters)}else this[pe("8qu1",246,0,1212,b)][ue(-C,-539,0,-y,"L4X9")](n,de[he(1013,x,0,505)](t,1)),this[ce(2060,0,2101,"qIb@")][ce(1629,0,2415,A)](de[pe("8qu1",v,0,543,1021)](t,1),n);function _e(e,t,n,s,i){return Fe(e-K,t-V,n-378,n- -301,e)}this[ue(k,-293,0,w,B)]=t,this[pe(L,S,0,z,510)]=de[_e(F,T,I)](Math[he(542,E,0,155)](Math[ce(1321,0,M,"6[6j")](this[pe(D,94,0,1324,O)][pe("(03]",-P,0,-827,-H)])),1),this[_e("^jyP",1046,R)]=this[he(-W,N,0,$)][he(G,"4[ec",0,U)][ce(1431,0,1755,A)](this[ue(X,j,0,q,"PF26")])}get[Ie(1066,1209,"ECiW",1648,927)](){return this._mode}get[be(2258,1773,1664,1242,"Qzoo")](){return this._size}get[et(2804,3391,"IPZB",2191,2752)+"t"](){const e=950,t=1017,n=522,s=729,i=87,o=1211,a=2262,r=2658,l=1391,c=1788,p="BVMs",h=2706,d=1963,u=1169,_="IPZB",m=1787,g=364,f=247,b=737,C=1109,y=1551,x=370,A=399,v=126,k=413,w=1645,B=344;function L(e,t,n,s,i){return ke(e-B,t-229,e- -38,s-40,s)}const S={};function z(e,t,n,s,i){return et(e-k,t-432,n,s-300,i- -w)}function F(e,t,n,s,i){return Fe(e-137,t-383,n-217,i- -v,s)}S[F(-126,-683,420,"wEbn",210)]=function(e,t){return e!==t},S[z(523,e,"H!o^",1798,t)]=z(138,376,"]KEn",-623,-n),S[F(942,-s,-198,"orc9",70)]=L(320,-i,0,"X(di");const T=S,I={};for(const[e,t]of this[(E=o,M=382,D="WjvE",Ie(E-63,M-18,D,D-462,E-1330))][O(a,r,2316,1871,"0SiJ")+"es"]())T[O(439,881,674,1154,"azri")](T[L(l,1303,0,"!3Qz")],T[L(c,917,0,p)])?I[e]="0x"+t[F(h,d,u,_,m)+L(g,-f,0,"08hj")](16)[F(1151,162,b,"08hj",C)+O(2678,2703,y,2458,"BVMs")](2,"0"):FUtO[PArSee]=reIMu.readByType(chIMata,yuUMa);var E,M,D;function O(e,t,n,s,i){return be(e-x,s-89,n-A,s-152,i)}return I}[ke(90,887,808,1719,"xZLj")](e){return this._kv.get(e)}[be(2713,2195,1547,1837,"@j!&")](e){return this._vk.get(e)}};static[be(1935,2300,2926,2285,"PF26")]=class{constructor(e=be(1134,1452,2003,1925,"08hj")+"lt",{list:t,min:n,max:s}={}){const i=3132,o="TKgk",a=2200,r=1676,l=2535,c=2978,p=2487,h=1113,d="6[6j",u=1973,_=364,m=393,g=354,f="#GCG",b=710,C=9,y=845,x=283,A="^jyP",v=1198,k=937,w="PmF#",B=1640,L=1553,S=3155,z="!3Qz",F=1381,T=1919,I=1428,E=1633,M=976,D=1095,O="9ROd",P=1105,H=2826,R=1509,W="XRtz",N=1491,$=645,G="8qu1",U=1763,X="yora",j=1220,q="BYvL",K=1376,V=1365,Y="X(di",Q=1310,Z=507,J=193,ee="uUWF",te=556,ne=1417,se=2019,ie=1618,oe=969,ae=168,re=570,le=361,ce=484,pe=147,he="9ROd",de=375,ue=390,_e=1158,me="]KEn",ge=2134,fe=1202,Ce=799,ye=977,xe=362,Ae=355,ve=121,we=514,Be=292,Le=282,Se=342,ze=31,Ie=745,Ee=107,Me=212,De=99,Oe=52,Pe={};function He(e,t,n,s,i){return be(e-Ee,e- -Me,n-De,s-Oe,n)}function Re(e,t,n,s,i){return Fe(e-128,t-ze,n-351,s- -Ie,i)}function We(e,t,n,s,i){return be(e-Le,i-448,n-Se,s-486,n)}Pe[He(725,875,"PEOQ",272,-97)]=He(2197,i,o,a,r)+"t",Pe[$e(1938,"X(di",l,c,p)]=He(h,290,d,885,u)+Re(-_,-m,-g,397,f),Pe[He(b,71,"zXbz",C,y)]=Ue(879,-x,214,A,-561)+Ue(v,-405,449,"Qzoo",-335)+He(1147,k,w,1280,1518)+We(B,L,"ZBp6",S,2383)+$e(1077,z,F,1194,T)+$e(I,"XRtz",E,1753,2243)+Ue(M,D,575,O,P)+"t",Pe[We(H,R,W,2389,2135)]=Re(-1079,-1566,-N,-$,G)+"lt",Pe[He(U,0,X,j)]=function(e,t){return e??t},Pe[He(812,0,q,K)]=function(e,t){return e??t};const Ne=Pe;switch(this[He(1585,0,"apzg",2364)]=e,e){case Ne[$e(V,Y,1882,Q,1049)]:this[Ue(Z,718,J,ee,-728)+"e"]=new(Te[He(te,0,"PF26",-336)])(t);break;case Ne[$e(702,"4[ec",ne,se,ie)]:throw new Error(Ne[Ue(-526,-oe,-ae,"WjvE",-re)]);case Ne[He(2073,0,"q08X",1652)]:}function $e(e,t,n,s,i){return ke(e-Ae,t-ve,i-we,s-Be,t)}n=Ne[Re(-le,-ce,pe,-46,he)](n,7),s=Ne[Re(-de,-ue,-_e,-560,"IfVL")](s,15);const Ge={};function Ue(e,t,n,s,i){return ke(e-xe,t-151,n- -686,s-436,s)}Ge[He(1543,0,me,1190)]=n,Ge[We(ge,0,"yora",2077,2434)]=s,this[He(470,0,"zXbz",fe)]=new(Te[He(Ce,0,"qIb@",ye)])(Ge)}get[Ie(1252,758,"4[ec",-68,312)](){return this._mode}[be(2053,1533,1617,1214,"TKgk")+"e"](e,t){switch(e.writeDInt(t.length,this._prop),this._mode){case"strict":for(const n of t)e.writeTable(n,this._table);break;case"flexible":throw new Error("Flexible mode is not implemented yet");default:for(const n of t)e.writeAny(n,this)}}[Ie(474,-418,"BVMs",-733,-211)+"e"](e){const t=e.readDInt(this._prop),n=[];if("strict"===this._mode)for(let s=0;s<t;s++)n.push(e.readTable(this._table));else for(let s=0;s<t;s++)n.push(e.readAny(this));return n}};static[ke(903,949,775,1653,"sZ[B")](){const e="X(di",t=356,n=1764,s="BYvL",i=1324,o=590,a="Y!uW",r=869,l=430,c=121,p=1532,h=1171,d="VlCh",u=426,_=919,m="L4X9",g=11,f=934,b=653,C=688,y=322,x=704,A=1451,v=1119,k=1423,w=1229,B="Y!uW",L=1231,S=1320,z=771,F=1085,T=1077,I=146,E=555,M=1420,D="q08X",O=28,P=816,H=170,R=471,W=253,N=201,$=197,G=136,U=202,X=440,j=901,q=140,K=133,V=43,Y=0,Q=440;function Z(e,t,n,s,i){return et(e-Y,t-Q,e,s-60,t- -1512)}var J,ee,te,ne;this[ie(1159,1216,1941,"@j!&",1339)+Z(e,409,0,-489)+Z("Y!uW",547,0,1198)+ae(t,"H!o^",508,501,642)+"E"]=new(this[oe(1844,"uUWF",n,1585,2252)])(Array[oe(1382,s,668,i,o)](this[oe(-74,a,r,l,c)+(J=p,ee=h,te=d,ne=u,Ie(J-W,ee-N,te,ne-$,ee-765))+ae(_,m,-g,f,b)][ie(490,C,-103,"ImC8",y)]())),this[ae(-22,"uUWF",147,x,982)+oe(A,"WjvE",v,1176,k)+oe(w,B,L,S,523)]=new(this[Z("qIb@",z,0,F)]);const se={};function ie(e,t,n,s,i){return ke(e-q,t-444,e- -K,s-V,s)}function oe(e,t,n,s,i){return Ie(e-42,t-324,t,s-457,n-j)}function ae(e,t,n,s,i){return Fe(e-G,t-U,n-X,s- -731,t)}se[ae(1549,"0SiJ",1904,T,1639)]=8,se[ae(879,"5Hno",910,711,I)]=32,this[ie(E,M,0,D)+ae(-O,"azri",155,P)+"OP"]=new(this[ae(-H,"4[ec",-944,-R)])(se)}constructor(){this.ref=new Map,this.refid=0}static[Ie(327,464,"5Hno",1064,1016)+"er"]=class t extends(this){static[Ie(540,493,"8qu1",1471,823)]=ze;constructor(e=null,t=null){super(),this._buffer=[],this._size=0,this._packr=e,this._packBuffer=t}get[et(1407,941,"]KEn",2394,1639)+"r"](){return this._buffer}get[be(678,1031,669,1782,"zXbz")](){return this._size}get[be(2016,2e3,1961,2157,"IfVL")+et(1540,514,"PmF#",1600,1363)](){return Math.ceil(this._size/8)}[be(1365,2277,2167,2334,"ImC8")+"gn"](){return this._size+=(8-this._size%8)%8}[et(2213,1338,"qIb@",1651,2229)+"rt"](e,t,n=null){return n&&this.realign(),this._size+=t,this._buffer.push({val:e,size:t,type:n})}[be(824,1159,607,1111,"]KEn")+et(2493,2121,"^jyP",2398,2740)](e,t){if("strict"===t.mode)return this._insert(t.getkv(e),t.size);const n=t.getkv(e);return void 0===n?(this._insert(null,t.size),this.writeAny(e)):this._insert(n,t.size)}writeArray(e,t=Te.DEFAULT_ARRAY){return"strict"===t.mode?t.encode(this,e):this.ref.has(e)?(this._insert(!0,1),this.writeDInt(this.ref.get(e),Te.DEFAULT_PROP)):(this._insert(!1,1),this.ref.set(e,this.refid++),t.encode(this,e))}[Fe(1814,1480,2348,1761,"9ROd")+et(3781,3250,"8qu1",3304,2834)+"t"](e,t){return t.encode(this,e)}[et(1888,938,"q08X",2134,1279)+Ie(47,150,"PF26",806,-86)+"g"](n,s=!0){return n=e.from(s?`${n}\0`:n),this._insert(n,8*n.byteLength,t.TYPES.BUFFER)}[be(1795,2192,1996,1599,"BVMs")+be(1999,2485,2305,3316,"WCYY")+"r"](e){return this._insert(e,8*e.byteLength,t.TYPES.BUFFER)}[Ie(758,725,"uUWF",-344,250)+et(1191,895,"ImC8",1936,1590)+"an"](e){return this._insert(!!e,1)}[Fe(1103,2134,1261,1355,"ImC8")+Ie(1284,917,"IfVL",1907,1276)](e,t){return this._insert(e,t)}[be(1866,2320,2203,1905,"9ROd")+Ie(1761,496,"IPZB",1247,1300)](e,t){return this._insert(e,t)}[be(2771,1888,2256,1902,"9uOv")+Ie(-590,-134,"H!o^",105,134)+"4"](e){const n=1416,s=250,i=196,o=1138;function a(e,t,n,a,r){return Fe(e-s,t-i,n-27,e-o,t)}return this[(r=854,l=490,c=1768,p="5Hno",be(r-271,r-213,l-119,c-266,p)+"rt")](e,64,t[a(2813,"azri",2945)][a(n,"qIb@",1612)]);var r,l,c,p}[Ie(385,-603,"Y!uW",-415,-101)+et(343,1397,"6[6j",1935,1103)](e,t){const n=t.writeSize(e);return this._insert(n.bit,1),this._insert(e,n.size)}[Fe(299,980,1853,964,"VlCh")+Fe(814,1866,1194,1124,"8qu1")](e,t,n){return this._insert(e<0,1),this._insert(Math.round(e*n),t)}[ke(589,127,758,671,"W3KH")+ke(1522,530,1134,234,"azri")+"t"](e,t,n){return this._insert(Math.round(e*n),t)}[Ie(1867,1035,"WjvE",1402,1230)+ke(-210,-186,361,-9,"VlCh")+"e"](e){return this._insert(e,64,t.TYPES.DOUBLE)}[ke(-38,905,655,244,"L4X9")+Fe(-188,-778,-168,63,"X(di")+"r"](e){return Te.Number.encode(this,e)}[Ie(754,-281,"VlCh",-238,635)+be(2290,1980,2878,1228,"WjvE")](e,n){const s=891,i=1098,o=671,a=1387,r=1186,l="08hj",c=1495,p=1697,h=80,d=386,u="IfVL",_=260,m=54,g=402,f=370,b=336,C=78,y=1042;function x(e,t,n,s,i){return et(e-f,t-b,t,s-57,i- -767)}const A={};A[x(1124,"sZ[B",0,1048,742)]=function(e,t){return e*t};const v=A;return this[x(s,"sZ[B",0,i,o)+"rt"](e,v[(S=1203,z="BYvL",F=a,T=r,I=790,be(S-C,I- -y,F-160,T-314,z))](n,8),t[x(2252,l,0,c,p)][(k=848,w=-h,B=-d,L=u,Fe(k-27,w-_,B-m,w- -g,L))]);var k,w,B,L,S,z,F,T,I}[et(1838,2077,"VlCh",2224,1889)+et(2128,1833,"8qu1",1061,1527)](e,t){const n=b(e);if(!Te.SUPPORTED_TYPES.has(n))throw new TypeError(`Type ${n} is not implemented for NetCodec.TYPES.Any`);switch(this.writeTable(n,Te.SUPPORTED_TYPES_TABLE),n){case"boolean":this.writeBoolean(e);break;case"null":case"undefined":break;case"number":Te.Number.encode(this,e);break;case"string":this.writeString(e);break;case"array":this.writeArray(e,t)}}[Ie(681,673,"orc9",910,1516)+ke(2432,1591,1703,2246,"5Hno")+"e"](e,t,...n){return this[`write${Te.TYPES_INDEX[e]}`](t,...n)}[Fe(1137,863,769,696,"TKgk")](e){this._packr.useBuffer(this._packBuffer);const n=this._packr.pack(e);return this._insert(n,8*n.byteLength,t.TYPES.BUFFER)}[be(2143,1311,2172,1534,"4[ec")+Fe(1937,2301,1902,1490,"uUWF")](s=null){const i=s??e.allocUnsafe(this.byteLength),o=new n(i);for(const{val:e,size:n,type:s}of this._buffer)switch(s){case t.TYPES.BUFFER:o.offset+=(8-o.offset%8)%8,i.set(e,o.offset/8),o.seek(8*e.byteLength,2);break;case t.TYPES.DOUBLE:o.offset+=(8-o.offset%8)%8,i.writeDoubleBE(e,o.offset/8),o.seek(64,2);break;case t.TYPES.QWORD:o.offset+=(8-o.offset%8)%8,i.writeBigUInt64BE(e,o.offset/8),o.seek(64,2);break;case t.TYPES.HEX:o.offset+=(8-o.offset%8)%8,i.write(e,o.offset/8,"hex"),o.seek(n,2);break;default:o.write(e,n)}return i}};static[et(2627,2143,"L4X9",1391,1816)+"er"]=class e extends(this){static[be(1835,1295,800,697,"zXbz")+be(2864,2080,2375,1601,"ECiW")]=Math[Fe(922,970,595,834,"sZ[B")](Number[be(532,943,20,1787,"9ROd")+Fe(693,1743,768,1210,"WCYY")+be(1686,1051,1846,1521,"]KEn")+"R"]);static[ke(879,1075,1358,1228,"sZ[B")+be(2575,2422,3194,3220,"PF26")+Fe(2122,2147,1500,1242,"zXbz")+"D"]=32;constructor(e,t=null){super(),this._bits=new n(e),this._unpack=t}get[be(289,730,1023,269,"j$uk")+"h"](){return this._bits.length}get[Ie(2290,1875,"9uOv",1410,1496)+"t"](){return this._bits.offset}set[be(1076,1577,1946,2345,"L4X9")+"t"](e){this._bits.offset=e}get[be(1086,823,1231,383,"Qzoo")+"r"](){return this._bits.buffer}get[ke(806,570,709,538,"4[ec")+et(2548,1970,"H!o^",2973,2192)](){return Math.ceil(this.offset/8)}[be(2683,2420,1927,2358,"Y!uW")+"gn"](){this.offset=8*this.byteOffset}[Fe(-446,600,-139,315,"Qzoo")+be(3121,2453,3260,2922,"WjvE")+"ed"](t){const n=e._MAX_BITS_SIGNED-t;return this._read(t)<<n>>n}[ke(1656,2637,1927,2390,"^jyP")](e){return this._bits.read(e)}[ke(2154,1531,1389,1897,"PmF#")+Ie(1054,-82,"#GCG",1066,833)](e){const t=e.size;return 0!==this.peek(t)?e.getvk(this._read(t)):(this.seek(t,2),this.readAny())}[ke(713,713,1166,1313,"H!o^")+et(1001,1689,"PEOQ",1165,1741)](e=Te[Ie(1947,1520,"!3Qz",1246,1070)+Ie(-534,360,"q08X",188,392)+be(761,1531,808,1499,"ECiW")]){if("strict"===e.mode)return e.decode(this);if(this._read(1))return this.ref.get(this.readDInt(Te.DEFAULT_PROP));const t=[];return this.ref.set(this.refid++,t),t.push.apply(t,e.decode(this)),t}[et(1799,2147,"#GCG",3018,2403)+Fe(1042,2203,1732,1608,"TKgk")](e){return e.decode(this)}[Ie(356,547,"08hj",1582,807)+et(2669,3025,"5Hno",3341,2850)](e){const t=this.byteOffset;let n;return"number"==typeof e?(n=t+e,this.seek(8*n)):(n=this.buffer.indexOf(0,t),this.seek(8*(n+1))),this.buffer.toString("utf8",t,n)}[Fe(1044,1539,1463,666,"]KEn")+Ie(1369,646,"XRtz",-221,551)](e){const t=this.byteOffset,n=t+e;return this.seek(8*n),this.buffer.subarray(t,n)}[ke(1620,1163,1584,2267,"q08X")+be(1450,974,580,1495,"ImC8")+"n"](){return!!this._read(1)}[Ie(-132,763,"ZBp6",-343,362)+"nt"](t){if(t>e._MAX_BITS_SIGNED)throw new RangeError(`${t} of bits is not supported for signed values, max is ${e._MAX_BITS_SIGNED}`);return this._read_signed(t)}[ke(723,871,1299,1347,"zXbz")+Ie(796,957,"WjvE",1064,1273)](t){if(t>e._MAX_BITS)throw new RangeError(`${t} of bits is not supported, max is ${e._MAX_BITS}`);return this._read(t)}[Ie(-348,-149,"j$uk",73,100)+Ie(1592,337,"azri",1726,951)](){const e=this.byteOffset;return this.seek(8*e+64),this.buffer.readBigUInt64BE(e)}[et(1695,456,"08hj",1342,975)+Fe(1394,833,393,1045,"ECiW")](e,t=!1){const n=e.readSize(this._read(1));return t?this._read_signed(n):this._read(n)}[Ie(-409,-1029,"q08X",-169,-210)+Ie(735,-30,"H!o^",1286,770)](e,t){return this.peek(1)?this._read_signed(e+1)/t:(this.seek(1,2),this._read(e)/t)}[be(2270,1487,1012,1015,"t@jS")+et(1219,1112,"X(di",1452,1893)](e,t){return this._read(e)/t}[ke(1779,1602,883,260,"qIb@")+Ie(2005,2043,"j$uk",2017,1165)](){const e=this.byteOffset;return this.seek(8*e+64),this.buffer.readDoubleBE(e)}[be(1826,952,1702,430,"5Hno")+et(2174,2432,"azri",1703,2014)](){return Te.Number.decode(this)}[et(1404,1395,"q08X",1801,1284)+"ex"](e){const t=this.byteOffset,n=t+e;return this.seek(8*n),this.buffer.toString("hex",t,n)}[ke(2452,2258,1964,1032,"Y!uW")+"ny"](e){switch(this.readTable(Te.SUPPORTED_TYPES_TABLE)){case"boolean":return this.readBoolean();case"null":return null;case"undefined":return;case"number":return Te.Number.decode(this);case"string":return this.readString();case"array":return this.readArray(e)}}[be(1626,1783,941,1537,"#GCG")+be(1513,1764,1994,1366,"IPZB")](e,...t){return this[`read${Te.TYPES_INDEX[e]}`](...t)}[et(3383,3309,"(03]",1982,2521)](e,t){return this._bits.peek(e,t)}[Ie(1814,846,"5Hno",830,1457)+ke(868,2324,1573,628,"TKgk")](e,t=this[Ie(1111,-202,"VlCh",-163,306)+"t"]){return e.getvk(this.peek(e.size,t))}[ke(2127,1907,1657,1535,"t@jS")+ke(2672,2407,1841,1840,"W3KH")](e,t=this[Ie(670,1777,"ZBp6",414,1182)+"t"]){return this.peek(e.readSize(this.peek(1,t)),t+1)}[Ie(-631,-673,"qIb@",548,74)](e,t){this._bits.seek(e,t)}[Fe(1754,1261,1797,1440,"q08X")+"k"](){return this.realign(),this._unpack(this.byteOffset)}}}function Ie(e,t,n,s,i){return Be(i- -505,n)}class Ee{static[Ie(502,1154,"H!o^",1652,1139)+Ie(1592,694,"9ROd",2379,1494)+"R"]=65536;static[Fe(872,1408,1718,1721,"orc9")+"R"]=e[Ie(-721,693,"@j!&",-126,32)](this[ke(882,947,1145,365,"rtkN")+ke(1334,1460,2134,2196,"PEOQ")+"R"]);static[be(565,771,711,1108,"(03]")]={};static get[Fe(596,2328,2198,1522,"uUWF")](){return this[(e=1402,t="ImC8",n=1915,be(e-165,e- -814,t-409,n-235,t))];var e,t,n}static[Fe(1717,276,1247,1167,"XRtz")+et(2952,2803,"PmF#",2866,2684)+"on"](t,n={}){const s=194,i=1459,o=1771,a=1140,r=1988,l=1248,c="apzg",p=2165,h=997,d=1091,u=1998,_=653,m="WjvE",g=1479,f=1816,b="W3KH",C="uUWF",y="4[ec",x=1369,A=332,v=765,k=480,w=2621,B=971,L=1956,S="qIb@",z=1858,F=2763,T=3090,I="PF26",E=2299,M="#GCG",D=2317,O="!3Qz",P=553,H=387,R=1121,W=2519,N="9ROd",$=139,G=172,U=216,X=246,j=938,q=377,K=303,V=399,Y=239,Q=1301,Z=362;function J(e,t,n,s,i){return be(e-Z,i- -341,n-423,s-138,e)}function ee(e,t,n,s,i){return Ie(e-8,t-Y,i,s-193,e-Q)}const te={};function ne(e,t,n,s,i){return et(e-q,t-K,n,s-V,i- -651)}function se(e,t,n,s,i){return et(e-G,t-U,n,s-X,i- -j)}te[J("H!o^",0,1070,886,1405)]=function(e,t){return e in t},te[ne(s,508,"#GCG",i,994)]=J("0SiJ",0,o,a,r)+ne(l,1771,c,2739,p),te[ne(526,65,"azri",h,878)]=function(e,t){return e===t},te[J("zXbz",0,d,2136,u)]=ne(2002,_,m,g,1366),te[ee(2312,2182,0,f,b)]=oe(1104,C,171,1141,1332);const ie=te;function oe(e,t,n,s,i){return Ie(e-152,t-$,t,s-150,e-1025)}if(this[J(y,0,2061,1162,x)][t[se(A,-101,"@j!&",v,k)]]=t,ie[ne(1895,w,"ZBp6",2252,2052)](ie[ne(B,L,S,1613,z)],n)){if(ie[ee(F,T,0,2137,I)](ie[ne(E,1631,M,1311,1628)],ie[J("TKgk",0,D,2164,1586)]))throw new AliCe(`${YuuMa} of bits is not supported, max is ${ShiZuru._MAX_BITS}`);t[ee(2410,1926,0,2983,"Y!uW")+"R"]=e[se(436,1222,O,244,P)](this[J("IfVL",0,H,R,849)+oe(W,N,0,2388)+"R"])}}static[Ie(2136,1186,"IPZB",1809,1216)+ke(2101,306,1229,1512,"W3KH")](e,t,n){var s,i,o,a,r;this["$$"+e]=new(Te[(s=-88,i="orc9",o=30,a=-679,r=3,be(s-273,r- -728,o-164,a-337,i))])(t,n)}static[ke(1270,1953,2131,2800,"yora")+Fe(1160,1729,884,1502,"!3Qz")+"y"](e,t){var n,s,i;this["$"+e]=new(Te[(n="uUWF",s=592,i=-283,Ie(n-377,s-350,n,i-136,s-183))])(t)}static[et(2430,1319,"6[6j",1614,1530)+be(1236,1495,1181,1678,"sZ[B")+ke(2249,2420,2107,1395,"6[6j")](e){const t=1756,n=1108,s="apzg",i=574,o=2052,a=2269,r=2870,l=1740,c=1699,p=2031,h=2707,d="!3Qz",u=1568,_=913,m=1140,g=1654,f=1993,b="0SiJ",C=569,y=2550,x="azri",A="wEbn",v=1903,k=2150,w=204,B=1143,L=72,S="9uOv",z=1566,F="orc9",T=1633,I=329,E=335,M=112,D=281,O=467,P=122,H=29,R=322,W=424,N=192,$=202,G=48,U=425,X={};function j(e,t,n,s,i){return ke(e-$,t-G,t- -U,s-424,n)}function q(e,t,n,s,i){return Ie(e-23,t-W,i,s-234,s- -N)}X[Z(2323,1896,2400,1963,"Qzoo")]=function(e,t){return e===t},X[Y(1998,"W3KH",2873,1271,t)]=j(n,308,s,i,363),X[Y(o,"C#3#",a,r,l)]=Z(1725,c,p,h,d);const K=X;let V=10;function Y(e,t,n,s,i){return et(e-149,t-H,t,s-314,e- -R)}function Q(e){return e.encode.call(e,new Te.Encoder(this,e.constructor.BUFFER))}function Z(e,t,n,s,i){return ke(e-M,t-D,n-O,s-P,i)}function J(e,t,n,s){return e.decode(new Te.Decoder(t,(e=>n(s+e))))}function ee(e,t,n,s,i){return ke(e-437,t-I,n-685,s-E,e)}for(const t of Object[q(1808,u,0,_,"sZ[B")+"s"](this[j(m,1620,"9uOv",g)])){if(K[Z(2899,2066,f,2740,b)](K[ee("uUWF",1205,1423,963)],K[q(126,-6,0,C,"VlCh")]))return SATori.encode(this,GIL);t[Y(2534,"yora",0,y)+j(1289,1220,x,1325)]=V++,e[ee(A,v,k,2342)+q(w,1888,0,B,"6[6j")+"on"]({Class:t,type:t[j(618,L,"BYvL",-846)+Y(1020,S,0,812)],pack:Q,unpack:J[j(628,z,F,T)](null,t)})}}}class Me extends Ee{static[ke(296,545,418,-114,"Y!uW")+Fe(1956,1932,1488,1278,"ImC8")+"re"](e){const t=295,n=1840,s=105,i=662,o=1684,a="9ROd",r=2147,l=1793,c="WjvE",p=665,h=808,d=327,u=1751,_=1496,m="!3Qz",g=92,f=694,b=1283,C=1224,y="C#3#",x=219,A=410,v=30,k="rtkN",w=642,B=1411,L=822,S=1003,z="C#3#",F=1541,T=1806,I="ImC8",E=2962,M=3038,D=775,O=882,P="wEbn",H=238,R=1285,W=142,N=333,$=1371,G=1478,U=1375,X="BVMs",j=1673,q="TKgk",K=2844,V=2010,Y=1517,Q=2055,Z="9uOv",J="^jyP",ee=2593,te=2679,ne=371,se=1228,ie=328,oe=684,ae=31,re=721,le="uUWF",ce=262,pe=2,he=936,de="WCYY",ue=1929,_e=1475,me=768,ge=282,fe=837,Ce=48,ye="IPZB",xe=102,Ae="orc9",ve=778,ke=303,we="t@jS",Be=588,Le=1024,Se="(03]",ze=1073,Te=423,Ee=1156,Me=385,De=47,Oe=652,Pe="IfVL",He=876,Re=46,We=1340,Ne=1706,$e=254,Ge=1195,Ue=449,Xe=195,je=400,qe=66,Ke=4,Ve=285,Ye=150,Qe=289,Ze=979,Je={};function et(e,t,n,s,i){return Ie(e-211,t-Ye,s,s-Qe,n-Ze)}function tt(e,t,n,s,i){return be(e-16,n-479,n-483,s-Ve,e)}function nt(e,t,n,s,i){return Ie(e-243,t-Ke,n,s-424,i-421)}function st(e,t,n,s,i){return Ie(e-qe,t-52,e,s-321,i- -72)}Je[nt(1847,1660,"L4X9",1326,1547)]=function(e,t){return e===t},Je[et(t,n,1066,"4[ec")]=ot(-s,660,88,"BYvL",-i),Je[nt(1999,o,a,r,l)]=nt(-320,777,c,p,305)+"c",Je[ot(111,-h,715,"5Hno",d)]=tt("ImC8",0,u,1395),Je[et(1966,_,2394,m)]=st("wEbn",530,g,19,f)+et(538,b,C,y),Je[st("PF26",-205,0,x,421)]=st("q08X",161,0,-94,A);const it=Je;this[ot(v,893,406,k,w)+et(B,L,S,z)]=new Map,this[et(F,T,1707,I)+tt("yora",0,E,M)]=new Map,this[ot(113,D,O,P,H)+ot(540,R,469,"(03]",250)]=new Map;for(const[t,{mode:n,type:s,size:i,value:o}]of Object[st("Qzoo",-W,0,1119,N)+"es"](e))if(it[et($,1916,2095,"xZLj")](it[tt("TKgk",0,G,U)],it[tt("^jyP",0,1094,855)]))switch(n){case it[tt(X,0,2278,j)]:this[nt(2826,2112,q,K,V)+et(1478,Y,Q,Z)][tt(J,0,ee,te)](t,o);break;case it[ot(-ne,290,-1157,"^jyP",-se)]:const e={};e[st(Z,-ie,0,-oe,-94)]=s,e[et(13,ae,re,"9uOv")]=i,this[st(le,ce,0,pe,-326)+nt(he,u,de,ue,_e)][st(k,-130,0,me,ge)](t,e);break;case it[ot(-306,-fe,-479,"yora",Ce)]:const n={};n[st(ye,-8,0,-679,xe)]=s,n[st(Ae,ve,0,813,853)]=i,this[ot(562,ke,1334,we,1487)+ot(779,Be,267,"4[ec",Le)][tt(Se,0,2623,2023)](t,n)}else{const e=mURASa.successful,t=hISAMi.gameoverreason,n=sEIRAn.killer.gameid,s="spark"===kIVUSayhi.killer.type,i=sEKIBanki.killer.username??"",{apm:o,pps:a,vsscore:r}=oKINA.aggregatestats,{game:l,stats:c,diyusi:p}=mAYURi;hECATia.writeBoolean(e),eSAKA.writeTable(t,this.$$gor),aKANE.writeUInt(n,13),iNOUE.writeBoolean(s,1),mYSTIa.writeString(i),kAGUYa.writeStruct(wAKASagihime.options,kEIKI),mEGUMu.writeDouble(o),fLANDre.writeDouble(a),mARIBel.writeDouble(r),lYRICa.writeStruct({game:l,stats:c,diyusi:p},aKYUU)}function ot(e,t,n,s,i){return Fe(e-Ue,t-Xe,n-je,e- -685,s)}super[et(1650,2301,1744,"BYvL")+ot(-230,-ze,-Te,"Y!uW")](it[nt(Ee,778,"Y!uW",Me,1246)],Array[st("qIb@",-197,0,-De,Oe)](this[st(Pe,-He,0,826,Re)+tt("XRtz",0,We,Ne)][et($e,1728,Ge,"6[6j")]()))}static[ke(2267,961,1515,1718,"WjvE")+"e"](e,t){for(const[n,{type:s,size:i}]of this._fixFields.entries())e.writeByType(s,t[n],i);for(const[n,{type:s,size:i}]of this._optFields.entries())void 0!==t[n]&&(s===Te.TYPES.DInt&&null===t[n]||(e.writeTable(n,this.$$prop),e.writeByType(s,t[n],i)));e.writeUInt(null,this.$$prop.size)}static[et(2659,3318,"orc9",3168,2639)+"e"](e){const t={},n=this.$$prop.size;for(const[n,{type:s,size:i}]of this._fixFields.entries())t[n]=e.readByType(s,i);for(let s=e.peek(n);0!==s;s=e.peek(n)){const n=e.readTable(this.$$prop),{type:s,size:i}=this._optFields.get(n),o=e.readByType(s,i);t[n]=o}for(const[e,n]of this._cstFields.entries())t[e]=n;return t}}class De extends Ee{static[et(1095,1e3,"IfVL",638,1382)](){const e=679,t=570,n=1110,s=1579,i=2831,o=1307,a=2418,r=1665,l=2363,c="t@jS",p="IfVL",h=561,d=852,u="XRtz",_=1263,m=2750,g="H!o^",f=1,b=409,C=1196,y=155,x={};x[k(-443,61,-363,"PmF#",-262)]=k(e,t,n,"ImC8",743);const A=x;function v(e,t,n,s,i){return ke(e-165,t-458,n-832,s-93,i)}function k(e,t,n,s,i){return be(e-102,n- -C,n-362,s-y,s)}super[v(s,i,2143,o,"!3Qz")+v(2807,2331,a,3123,"VlCh")+"on"](this);const w={};function B(e,t,n,s,i){return Ie(e-f,t-b,i,s-45,e-462)}w[v(r,2993,l,2270,c)]=18,w[k(531,0,943,p)]=26,super[k(-267,0,-296,"orc9")+B(h,d,0,252,u)+"y"](A[B(1812,_,0,m,g)],w)}static[Fe(767,935,525,804,"9uOv")+"e"](e){return new this(e.readUInt(13),e.readDInt(this.$prov),e.unpack())}constructor(e,t,n){super(),this.gameid=e,this.provisioned=t,this.frames=n.map((e=>new He(e)))}[Ie(-200,696,"ECiW",-719,-127)+"e"](e){const t=this.constructor,n=this.provisioned;return e.writeUInt(this.gameid,13),e.writeDInt(n,t.$prov),e.pack(this.frames),e.finalize()}}class Oe extends Ee{static[et(2021,1545,"#GCG",1294,1685)](){const e=926,t="Qzoo",n=2657,s=2112,i=1022,o=2172,a=2507,r=1123,l="BYvL",c=1423,p="PF26",h=989,d=2252,u="apzg",_=230,m=321,g=103,f=178,b=216,C=386,y=194,x=291,A=373,v=203,k=462,w=343,B=439;const L={};L[R(1669,"9uOv",1419,1327,2003)]=W(1369,e,1716,t,2140);const S=L;function z(e,t,n,s,i){return Fe(e-97,t-A,n-v,s- -335,i)}super[W(1561,651,1419,"sZ[B",1079)+R(n,"VlCh",1971,s,2906)+"on"](this);const F={};var T,I,E,M,D,O,P,H;function R(e,t,n,s,i){return et(e-332,t-y,t,s-455,n- -x)}function W(e,t,n,s,i){return ke(e-g,t-f,n-b,s-C,s)}F[(T=i,I=o,E="H!o^",M=1689,D=1730,ke(T-431,I-54,D- -_,M-m,E))]=16,F[(O=a,P=2407,H="j$uk",be(O-k,P-w,P-B,H-380,H))]=32,super[z(r,1815,554,1171,l)+W(492,1403,c,p)+"y"](S[z(h,d,911,1560,u)],F)}static[ke(-178,732,367,1136,"BVMs")+"e"](e){const t=[],n=e.readUInt(13);for(let s=0;s<n;s++){const n={board:{}};n.gameid=e.readUInt(13),n.board.f=e.readUInt(10),n.board.g=e.readDInt(this.$long),n.board.w=e.readUInt(Ne.MAX_WIDTH),n.board.h=e.readUInt(Ne.MAX_HEIGHT),n.board.b=e.readStruct(Ne),t[s]=n}return new this(t)}constructor(e){super(),this.boards=e}[Ie(360,1572,"X(di",104,1001)+"e"](e){const t=this.constructor;e.writeUInt(this.boards.length,13);for(const{gameid:n,board:{b:s,f:i,g:o,w:a,h:r}}of this.boards)e.writeUInt(n,13),e.writeUInt(i,10),e.writeDInt(o,t.$long),e.writeUInt(a,Ne.MAX_WIDTH),e.writeUInt(r,Ne.MAX_HEIGHT),e.writeStruct(s,Ne);return e.finalize()}}class Pe extends Ee{static[Ie(162,-484,"j$uk",-564,-207)](){const e="5Hno",t=792,n=757,s=172,i="t@jS",o=311,a=1538,r=1500,l=525,c="!3Qz",p=1358,h=1290,d=1250,u=1316,_=2548,m=2244,g="apzg",f=1034,b=204,C=1137,y=1006,x="BVMs",A=477,v=1615,k="Qzoo",w="(03]",B=2977,L="L4X9",S=1040,z=1398,F=1555,T=2288,I=1685,E=2500,M=1118,D=2096,O=1647,P=129,H=155,R=1934,W=1266,N="wEbn",$=1727,G="WCYY",U=1365,X="8qu1",j=1086,q=1799,K="WjvE",V=1838,Y=56,Q=924,Z=734,J=498,ee=2018,te=1387,ne=822,se=1126,ie=1134,oe=173,ae=241,re=279,le=423,ce=305,pe=396,he=453,de=445,ue=1352,_e=370,me=411,ge=251,fe={};function be(e,t,n,s,i){return ke(e-292,t-_e,e- -me,s-ge,s)}function Ce(e,t,n,s,i){return Ie(e-234,t-he,e,s-de,i-ue)}function ye(e,t,n,s,i){return ke(e-153,t-le,s- -ce,s-pe,t)}function xe(e,t,n,s,i){return Fe(e-oe,t-61,n-ae,i-re,n)}function Ae(e,t,n,s,i){return ke(e-463,t-269,s- -459,s-76,n)}fe[xe(871,506,e,339,526)]=ye(1364,"yora",t,832,n)+be(175,s,-236,i,o),fe[Ce("ECiW",a,2006,r,1826)]=Ae(-5,-l,c,83,718),fe[Ce("IPZB",p,0,917,h)]=be(d,u,0,"BVMs")+"es",fe[Ce("PF26",2761,0,_,m)]=ye(1407,g,0,1077)+Ce("rtkN",f,0,b,C)+"st",fe[be(y,328,0,x)]=Ae(-223,A,"VlCh",366)+ye(v,k,0,793)+Ce(w,B,0,3496,2862)+Ae(995,1399,L,S),fe[be(z,2247,0,"WCYY")]=Ce(e,F,0,T,1755)+be(I,E,0,"q08X")+be(589,M,0,"4[ec")+Ae(955,D,"BVMs",O),fe[ye(-P,"t@jS",0,H)]=xe(R,1664,"WjvE",0,1218)+xe(W,1401,N,0,$);const ve=fe;super[Ae(1249,947,G,848)+be(668,U,0,X)+"on"](this),super[be(491,j,0,"yora")+Ce("zXbz",q,0,1409,1905)](ve[Ce(K,2192,0,924,V)],[ve[xe(Y,1558,"WjvE",0,Q)],ve[ye(1496,"@j!&",0,Z)],ve[be(898,J,0,"5Hno")],ve[ye(ee,"4[ec",0,te)],ve[ye(-ne,"azri",0,125)],ve[ye(se,"IfVL",0,ie)]])}static[ke(2414,2009,1827,1180,"0SiJ")+"e"](e){const t=[],n=e.readUInt(13);for(let s=0;s<n;s++){const n={stats:{},allies:[]};t[s]=n,n.gameid=e.readUInt(13),n.stats.rank=e.readUInt(6),n.stats.altitude=e.readFloat(18,10),n.stats.btb=e.readUInt(13),n.specCount=e.readUInt(10),n.speedrun=e.readBoolean(),n.nearWR=e.readBoolean();const i=e.readUInt(3);for(let t=0;t<i;t++)n.allies.push(e.readUInt(13));n.stats.revives=0,n.stats.escapeartist=0,n.stats.blockrationing_app=0,n.stats.blockrationing_final=0;switch(e.readTable(this.$$extraStat)){case"none":break;case"revives":n.stats.revives=e.readUInt(8);break;case"escapeartist":n.stats.escapeartist=e.readUInt(9);break;case"blockrationing_app":n.stats.blockrationing_app=e.readFloat(10,100);break;case"blockrationing_final":n.stats.blockrationing_final=e.readUInt(11);break;case"talentless":n.talentless=!0}}return new this(t)}constructor(e){super(),this.sb=e}[Ie(1449,2054,"BVMs",2227,1603)+"e"](e){const t=this.constructor;e.writeUInt(this.sb.length,13);for(const{gameid:n,stats:s,allies:i,specCount:o,speedrun:a,nearWR:r,talentless:l}of this.sb){if(e.writeUInt(n,13),e.writeUInt(Math.floor(s.rank),6),e.writeFloat(s.altitude.toFixed(2),18,10),e.writeUInt(s.btb,13),e.writeUInt(o,10),e.writeBoolean(a),e.writeBoolean(r),i){e.writeUInt(i.length,3);for(const t of i)e.writeUInt(t,13)}else e.writeUInt(0,3);let c="none";switch(s.revives&&(c="revives"),s.escapeartist&&(c="escapeartist"),s.blockrationing_app&&(c="blockrationing_app"),s.blockrationing_final&&(c="blockrationing_final"),l&&(c="talentless"),e.writeTable(c,t.$$extraStat),c){case"none":case"talentless":break;case"revives":e.writeUInt(s.revives,8);break;case"escapeartist":e.writeUInt(s.escapeartist,9);break;case"blockrationing_app":e.writeFloat(s.blockrationing_app.toFixed(3),10,100);break;case"blockrationing_final":e.writeUInt(s.blockrationing_final,11)}}return e.finalize()}}class He extends Ee{static[Ie(-593,-485,"zXbz",315,248)](){const e="uUWF",t=1293,n=846,s=1903,i=1043,o=1814,a=759,r="j$uk",l=360,c="rtkN",p=1187,h=2831,d="yora",u=1741,_=1367,m=1305,g=596,f=111,b="WjvE",C="!3Qz",y=2036,x=2719,A=57,v=514,k=735,w=532,B=1431,L=1086,S="08hj",z=850,F=697,T=1013,I=822,E=473,M=1006,D=464,O=306,P=1383,H=507,R=765,W="H!o^",N=1807,$=1304,G=569,U=1082,X=827,j=43,q=300,K="ImC8",V="!3Qz",Y=1092,Q=972,Z=1190,J=35,ee="L4X9",te=643,ne=1339,se=1778,ie=29,oe="BYvL",ae=87,re="azri",le=961,ce=860,pe=1444,he=458,de=837,ue="H!o^",_e=42,me=1458,ge=1989,fe=1084,Ce=1503,ye="azri",xe=1248,Ae=1842,ve=165,ke=2571,we=1834,Be=742,Le=427,Se=304,ze=1355,Te="sZ[B",Ie=2175,Ee="X(di",Me=2144,De=380,Oe=1313,Pe="q08X",He="ECiW",Re=1018,We="TKgk",Ne=1100,$e=2373,Ge="L4X9",Ue=375,Xe="zXbz",je=2104,qe=1273,Ke=101,Ve="X(di",Ye=1266,Qe="XRtz",Ze=356,Je=588,tt=964,nt=1838,st=197,it=292,ot="t@jS",at=1422,rt="#GCG",lt=553,ct=288,pt=614,ht=1313,dt=952,ut="PEOQ",_t=565,mt=2051,gt="#GCG",ft=711,bt=433,Ct="sZ[B",yt=145,xt=1835,At="0SiJ",vt=287,kt="WCYY",wt=1747,Bt=680,Lt="Y!uW",St=99,zt=105,Ft="Y!uW",Tt=376,It=386,Et=1639,Mt=751,Dt="BVMs",Ot=205,Pt=1011,Ht=445,Rt=705,Wt=1026,Nt=2110,$t=1240,Gt=228,Ut=619,Xt=581,jt=739,qt=668,Kt="5Hno",Vt=147,Yt=410,Qt=370,Zt=687,Jt=449,en="ZBp6",tn=252,nn=121,sn="orc9",on="]KEn",an=740,rn="Y!uW",ln=1924,cn=1335,pn=191,hn=59,dn=66,un=304,_n=284,mn=476,gn=178,fn=54,bn=113,Cn=62,yn=351,xn=1485,An={};function vn(e,t,n,s,i){return et(e-88,t-442,i,s-yn,s- -xn)}function kn(e,t,n,s,i){return be(e-8,s-bn,n-286,s-Cn,n)}function wn(e,t,n,s,i){return be(e-_n,s- -mn,n-gn,s-fn,i)}function Bn(e,t,n,s,i){return et(e-dn,t-un,t,s-451,i- -1644)}function Ln(e,t,n,s,i){return Fe(e-pn,t-242,n-hn,t- -286,n)}An[kn(1777,1982,e,t,n)]=kn(s,700,"azri",i,o),An[vn(-a,-1055,0,-311,r)]=Ln(1096,620,"Y!uW",1326,803),An[Ln(72,l,c,p,248)]=kn(h,2788,d,1906,1707)+"wn",An[Ln(u,1003,"!3Qz",1758,_)]=kn(1768,m,"ZBp6",998,323),An[vn(-g,-226,0,f,b)]=kn(2750,2272,C,y,x),An[vn(A,v,0,-289,"WCYY")]=Ln(1376,k,"@j!&",539,w),An[Ln(B,L,S,631,1666)]=wn(z,F,T,1115,"azri"),An[vn(230,I,0,E,"azri")]=Bn(M,"ZBp6",D,293,O),An[Ln(P,H,"ECiW",1371,R)]=kn(2724,2667,W,N,1560)+wn($,1373,G,U,"0SiJ"),An[vn(X,j,0,q,K)]=kn(181,41,V,872,Y)+wn(k,Q,Z,1096,"W3KH")+wn(-J,-274,803,378,ee),An[Ln(te,ne,"xZLj",se,412)]=Bn(ie,oe,4,ae,-82),An[Bn(85,re,492,1883,le)]=kn(124,0,"IPZB",ce)+kn(pe,0,"xZLj",2224),An[vn(705,he,0,de,ue)]=wn(-_e,0,-471,403,"PEOQ")+kn(me,0,"WjvE",719),An[Ln(961,1621,"Qzoo",ge,fe)]=Bn(Ce,ye,xe,Ae,940)+Bn(679,"orc9",135,-587,ve),An[wn(2129,0,ke,we,"C#3#")]=vn(-Be,-Le,0,-Se,"PF26")+Ln(1337,ze,Te),An[kn(Ie,0,Ee,1523)]=kn(1605,0,"X(di",Me)+wn(De,0,Oe,1081,Pe),An[vn(631,1708,0,1200,He)]=Bn(-Re,We,0,-Ne,-444)+kn($e,0,Ge,1564),An[Ln(-Ue,31,Xe)]=kn(je,0,e,qe)+vn(-926,404,0,-Ke,Ve),An[kn(Ye,0,Qe,1592)]=wn(-Ze,0,1118,Je,"zXbz"),An[kn(tt,0,"C#3#",nt)]=vn(210,st,0,924,"XRtz"),An[Bn(it,ot,0,at,668)]=kn(-25,0,rt,862),An[Ln(ct,pt,"Y!uW")]=Ln(ht,913,"uUWF"),An[vn(722,-118,0,614,"Y!uW")]=kn(dt,0,ut,875);const Sn=An,zn={};zn[Bn(qe,"ImC8",0,_t,lt)+wn(2335,0,mt,1597,gt)]=!0,super[kn(2679,0,"W3KH",2345)+vn(ft,341,0,-215,ye)+"on"](this,zn);const Fn={};Fn[vn(1096,1217,0,1248,"0SiJ")]=18,Fn[Bn(-bt,Ct,0,418,yt)]=26,super[kn(xt,0,At,1292)+Bn(vt,kt,0,-1290,-512)+"y"](Sn[kn(1245,0,"X(di",wt)],Fn),super[Ln(Bt,1562,Lt)+vn(St,773,0,-zt,Ft)](Sn[Bn(Tt,"wEbn",0,-71,It)],[Sn[kn(1073,0,"6[6j",Et)],Sn[vn(-370,Mt,0,321,Dt)],Sn[Ln(Ot,Pt,"9ROd")],Sn[wn(Ht,0,806,Rt,"Y!uW")],Sn[wn(Wt,0,Nt,$t,"(03]")],Sn[wn(Gt,0,811,Ut,"H!o^")],Sn[wn(Xt,0,1200,299,"0SiJ")],Sn[Ln(1092,320,"sZ[B")]]),super[Bn(1257,"#GCG",0,jt,683)+vn(797,751,0,qt,Kt)](Sn[kn(1644,0,"uUWF",833)],[Sn[Ln(G,-Vt,C)],Sn[Ln(Yt,1150,"XRtz")],Sn[Bn(Qt,oe,0,478,Zt)],Sn[wn(Jt,0,1004,502,"qIb@")],Sn[Ln(913,1436,"yora")],Sn[kn(2678,0,en,2119)],Sn[Ln(-tn,nn,sn)],Sn[vn(270,954,0,209,on)],Sn[wn(an,0,432,1031,"9uOv")],Sn[kn(1897,0,rn,ln)],Sn[kn(1531,0,"0SiJ",2322)],Sn[Ln(649,cn,Kt)]])}static[Fe(592,-56,394,135,"rtkN")+"e"](e){const t={};switch(t.type=e.readTable(this.$$type),t.frame=e.readDInt(this.$frame),t.type){case"keydown":case"keyup":{const n=e.readTable(this.$$key),s=e.readBoolean(),i={key:n,subframe:e.readFloat(4,10)};s&&(i.hoisted=!0),t.data=i;break}case"start":t.data={};break;case"full":t.data=e.readStruct(We);break;case"end":t.data=e.readStruct(Je);break;case"ige":t.data=e.readStruct(Xe);break;case"strategy":t.data=e.readUInt(3);break;case"manual_target":t.data=e.readUInt(13);break;default:t.data=e.unpack()}return new this(t)}constructor(e){super(),this.type=e.type,this.frame=e.frame,this.data=e.data}[be(1457,1151,1157,1414,"L4X9")+"e"](e){const t=this.constructor;switch(e.writeTable(this.type,t.$$type),e.writeDInt(this.frame,t.$frame),this.type){case"keydown":case"keyup":{const n=this.data.hoisted,s=this.data.subframe;return e.writeTable(this.data.key,t.$$key),e.writeBoolean(n),e.writeFloat(s,4,10),e.finalize()}case"start":return e.finalize();case"full":return e.writeStruct(this.data,We),e.finalize();case"end":return e.writeStruct(this.data,Je),e.finalize();case"ige":return e.writeStruct(this.data,Xe),e.finalize();case"strategy":return e.writeUInt(this.data,3),e.finalize();case"manual_target":return e.writeUInt(this.data,13),e.finalize();default:return console.warn(`Fallback to packer ${this.type} -> ${JSON.stringify(this.data)}`),e.pack(this.data),e.finalize()}}}class Re extends Ee{static[Ie(166,-1100,"j$uk",-362,-207)](){const e=1109,t=195,n=270;var s,i,o,a,r,l,c,p;super[(r=168,l=-5,c="BVMs",p=-562,be(r-179,l- -740,c-419,p-158,c)+(s="j$uk",i=293,o=383,a=e,Fe(s-t,i-124,o-n,a-630,s))+"on")](this)}static[ke(2021,2640,1963,1306,"orc9")+"e"](e){const t=[],n=e.readUInt(13);for(let s=0;s<n;s++){const n={};n.userid=e.readHex(12),n.gameid=e.readUInt(13),n.alive=e.readBoolean(),n.naturalorder=e.readUInt(13),n.options=e.readStruct(Qe),t.push(n)}return t}constructor(e){super(),this.players=e}[et(1857,2265,"yora",3139,2587)+"e"](e){e.writeUInt(this.players.length,13);for(const{gameid:t,userid:n,alive:s,naturalorder:i,options:o}of this.players)e.writeHex(n,12),e.writeUInt(t,13),e.writeBoolean(s),e.writeUInt(i,13),e.writeStruct(o,Qe);return e.finalize()}}class We extends Ee{static[Fe(826,1083,1694,1766,"uUWF")](){const e=743,t=1194,n=2028,s=1693,i=1794,o=870,a=895,r=1744,l="0SiJ",c="@j!&",p=2009,h=1576,d=1067,u=851,_=1960,m=584,g="rtkN",f="IPZB",b=136,C=832,y="BVMs",x=237,A=2628,v=2124,k=1288,B=1695,L="0SiJ",S=646,z=47,F=1965,T="sZ[B",I=94,E="]KEn",M=1074,D=472,O=1480,P="rtkN",H="IfVL",R=95,W=982,N=1775,$=2108,G=1539,U=1571,X=548,j=900,q="ImC8",K=1133,V=1065,Y=219,Q=313,Z=40,J=175,ee=230,te=277,ne=1324,se=490,ie=71;function oe(e,t,n,s,i){return be(e-68,t- -ne,n-se,s-ie,e)}const ae={};function re(e,t,n,s,i){return et(e-252,t-te,e,s-48,i- -124)}function le(e,t,n,s,i){return be(e-121,i- -1164,n-ee,s-68,t)}ae[re("uUWF",274,1510,587,969)]=he(e,"!3Qz",1037,t,1257),ae[re("H!o^",n,s,i,2473)]=he(1344,"PmF#",o,1507,1165)+pe(a,525,582,r,l),ae[he(1298,c,p,1806,h)]=pe(d,1639,1949,u,"6[6j"),ae[re("ZBp6",1017,0,1505,_)]=le(-345,"X(di",-185,701,m),ae[re(g,3362,0,3131,2550)]=le(1436,f,b,878,C),ae[oe(y,-x,253,-224)]=he(A,"!3Qz",1708,v,1699);const ce=ae;function pe(e,t,n,s,i){return ke(e-111,t-55,e- -Z,s-J,i)}function he(e,t,n,s,i){return ke(e-Y,t-59,s-276,s-Q,t)}super[re("xZLj",k,0,B,2123)+he(368,L,0,1211)](ce[pe(S,-z,0,859,"TKgk")],[null,...Object[he(F,T,0,1698)](w[oe("ImC8",I,-86,-646)+oe(E,1095,M,D)+"s"])],ce[pe(1780,1735,0,O,P)]),super[he(858,y,0,1729)+oe(H,212,-R,W)](ce[he(N,"^jyP",0,$)],[ce[re("L4X9",G,0,857,U)],ce[he(X,"wEbn",0,j)],ce[oe(q,K,V,1671)]])}static[Fe(158,353,1581,810,"IfVL")+"e"](e,t){const n=t.game.board,s=t.game.bag,i=t.game.hold,o=t.game.g,a=t.game.controlling,r=t.game.falling,l=t.game.handling;e.writeUInt(s.length,12);for(const t of s)e.writeTable(t,this.$$piece);e.writeStruct(n,Ne),e.writeBoolean(i.locked),e.writeTable(i.piece,this.$$piece),e.writeDouble(o),e.writeBoolean(a.inputSoftdrop),e.writeBoolean(-1===a.lastshift),e.writeBoolean(a.lShift.held),e.writeBoolean(a.rShift.held),e.writeUInt(t.diyusi,4),e.writeDouble(a.lShift.arr),e.writeDouble(a.rShift.arr),e.writeDouble(a.lShift.das),e.writeDouble(a.rShift.das),e.writeStruct(r,$e),e.writeFloat(l.arr,6,10),e.writeUInt(l.sdf,6),e.writeBoolean(l.safelock),e.writeBoolean(l.cancel),e.writeBoolean(l.may20g),e.writeBoolean(t.game.playing),e.writeFloat(l.das,8,10),e.writeFloat(l.dcd,8,10),e.writeTable(l.irs,this.$$ixs),e.writeTable(l.ihs,this.$$ixs),e.writeStruct(t.stats,Ge)}static[ke(490,2077,1243,1855,"]KEn")+"e"](e){const t={},n={bag:[],controlling:{lShift:{dir:-1},rShift:{dir:1}},handling:{}},s=n.controlling,i=n.handling,o=e.readUInt(12);for(let t=0;t<o;t++)n.bag.push(e.readTable(this.$$piece));return n.board=e.readStruct(Ne),n.hold={locked:e.readBoolean(),piece:e.readTable(this.$$piece)},n.g=e.readDouble(),s.inputSoftdrop=e.readBoolean(),s.lastshift=e.readBoolean()?-1:1,s.lShift.held=e.readBoolean(),s.rShift.held=e.readBoolean(),t.diyusi=e.readUInt(4),s.lShift.arr=e.readDouble(),s.rShift.arr=e.readDouble(),s.lShift.das=e.readDouble(),s.rShift.das=e.readDouble(),n.falling=e.readStruct($e),i.arr=e.readFloat(6,10),i.sdf=e.readUInt(6),i.safelock=e.readBoolean(),i.cancel=e.readBoolean(),i.may20g=e.readBoolean(),n.playing=e.readBoolean(),i.das=e.readFloat(8,10),i.dcd=e.readFloat(8,10),i.irs=e.readTable(this.$$ixs),i.ihs=e.readTable(this.$$ixs),t.stats=e.readStruct(Ge),t.game=n,t}}class Ne extends Ee{static[Ie(1420,1559,"9uOv",1368,1100)+ke(1833,1744,1186,1179,"xZLj")]=Math[Ie(967,535,"zXbz",251,98)](512);static[et(2276,3162,"apzg",2016,2634)+et(2604,2831,"t@jS",2114,2813)]=Math[et(794,1136,"zXbz",2060,1352)](512);static[Ie(138,1241,"q08X",-232,542)](){const e=1741,t="VlCh",n=1972,s=1284,i="sZ[B",o=1108,a=2782,r=2667,l="xZLj",c=2542,p=2537,h=2546,d=2688,u=1010,_=497,m=241,g=814,f=69,b=355,C=493,y=387,x=354,A=151;const v={};function k(e,t,n,s,i){return et(e-f,t-b,n,s-C,t- -398)}function B(e,t,n,s,i){return ke(e-m,t-471,n-g,s-348,t)}v[B(3083,"PEOQ",2965,2460,3609)]=k(e,1727,t,n,1598);const L=v;var S,z,F,T;super[k(1744,s,i,o)+B(a,"WjvE",2156,r)](L[B(2278,l,c,3411)],[!1,null,...w[B(p,"4[ec",h,d)+(S=1234,z=u,F=_,T="j$uk",be(S-y,S- -x,z-18,F-A,T))]])}static[Ie(646,1465,"WjvE",593,937)+"e"](e,t){const n=t[0]?.length??0,s=t.length;if(!n)return e.writeUInt(0,this.MAX_WIDTH);e.writeUInt(n,this.MAX_WIDTH),e.writeUInt(s,this.MAX_HEIGHT);for(const n of t)if(n.some((e=>null!==e)))for(const t of n)e.writeTable(t,this.$$blk);else e.writeTable(!1,this.$$blk)}static[Fe(-103,-687,633,205,"apzg")+"e"](e){const t=[],n=e.readUInt(this.MAX_WIDTH);if(!n)return t;const s=e.readUInt(this.MAX_HEIGHT);for(let i=0;i<s;i++)if(!1!==e.peekTable(this.$$blk)){t[i]=[];for(let s=0;s<n;s++)t[i][s]=e.readTable(this.$$blk)}else e.seek(4,2),t[i]=new Array(n).fill(null);return t}}class $e extends Ee{static[Fe(520,884,-277,122,"j$uk")](){const e=453,t=263,n=193,s=456,i=561,o=674,a="6[6j",r=1890,l=1631,c="9uOv",p=188,h=227,d=632,u=2651,_=2821,m=432,g=449,f="VlCh",b=1639,C=1684,y=2489,x="Y!uW",A=422,v=35,k=310,B=406,L=251,S=825,z=1260,F=0,T=209;const I={};function E(e,t,n,s,i){return be(e-458,i- -z,n-211,s-F,s)}var M;function D(e,t,n,s,i){return Fe(e-B,t-377,n-L,e-S,n)}function O(e,t,n,s,i){return Ie(e-v,t-k,i,s-353,n- -361)}I[O(-2,319,-119,-676,"Qzoo")]=E(-e,0,t,"qIb@",-n),I[O(-271,-471,85,-s,"08hj")]=O(656,-i,76,-o,a)+et(1791-279,(M=r)-294,c,l-T,M- -915);const P=I;super[O(-p,-h,d,1307,"xZLj")+D(u,_,"ZBp6")](P[O(-525,-430,-m,g,f)],[null,...Object[D(1084,b,"W3KH")](w[D(C,1281,"ImC8")+D(2626,y,x)+"s"])],P[E(1594,0,A,"C#3#",1202)])}static[ke(1274,573,650,854,"5Hno")+"e"](e,t){if(e.writeTable(t.type,this.$$piece),e.writeInt(t.x,Ne.MAX_WIDTH),e.writeUInt(t.r,2),e.writeUInt(t.hy,Ne.MAX_HEIGHT),e.writeUInt(t.irs,2),e.writeUInt(t.kick,5),e.writeUInt(t.keys,16),e.writeUInt(t.flags,R.FLAGS_COUNT),e.writeUInt(t.safelock,3),e.writeUInt(t.lockresets,5),e.writeUInt(t.rotresets,6),e.writeBoolean(t.skip.length),t.skip.length){for(const n of t.skip)e.writeUInt(n+1,7);e.writeUInt(0,7)}e.writeDouble(t.y),e.writeDouble(t.locking)}static decode(e){const t={};if(t.type=e.readTable(this.$$piece),t.x=e.readInt(Ne.MAX_WIDTH),t.r=e.readUInt(2),t.hy=e.readUInt(Ne.MAX_HEIGHT),t.irs=e.readUInt(2),t.kick=e.readUInt(5),t.keys=e.readUInt(16),t.flags=e.readUInt(R.FLAGS_COUNT),t.safelock=e.readUInt(3),t.lockresets=e.readUInt(5),t.rotresets=e.readUInt(6),t.skip=[],e.readBoolean()){const n=7;for(let s=e.peek(n);0!==s;s=e.peek(n))t.skip.push(e.readUInt(n)-1);e.seek(n,2)}return t.y=e.readDouble(),t.locking=e.readDouble(),t}}class Ge extends Ee{static[Ie(42,1051,"IPZB",308,338)](){const e=823,t=330,n=977,s=656,i=971,o="azri",a="PEOQ",r=566,l=129,c="9ROd",p=1073,h=1898,d=1607,u=2005,_="!3Qz",m=737,g=1162,f=1903,b=1565,C=464,y=1197,x=928,A=612,v=407,k="X(di",B=3463,L=1017,S=1355,z=377,F="08hj",T=2228,I=1350,E=831,M=274,D=652,O=880,P="X(di",H="zXbz",R=522,W="W3KH",N=1793,$=2774,G=2493,U="wEbn",X=570,j=1307,q=142,K=1292,V="5Hno",Y=1198,Q=442,Z=847,J=2806,ee=2363,te=2002,ne=80,se=450,ie=438,oe="uUWF",ae=500,re=311,le=2596,ce=1876,pe=2897,he="ECiW",de=1513,ue=119,_e=367,me=714,ge=781,fe=1681,be=2532,Ce="4[ec",ye=2576,xe="Y!uW",Ae=580,ve=1790,we="^jyP",Be=2119,Le=785,Se=554,ze=848,Te=1112,Ie=939,Ee="ECiW",Me=1308,De="#GCG",Oe=925,Pe=2116,He=1612,Re=1100,We=1993,Ne=921,$e=2076,Ge=110,Ue=131,Xe=688,je="wEbn",qe=1038,Ke=1844,Ve=556,Ye=1385,Qe=824,Ze=827,Je=1629,tt=884,nt=1653,st="08hj",it=659,ot=1227,at="orc9",rt=2716,lt=2339,ct=1820,pt=1603,ht="zXbz",dt=2263,ut="IfVL",_t=1200,mt="yora",gt=351,ft=164,bt=12,Ct="zXbz",yt="sZ[B",xt=1619,At=639,vt="xZLj",kt=13,wt=722,Bt="WCYY",Lt=975,St=2372,zt=109,Ft=239,Tt=963,It=1171,Et=246,Mt=1378,Dt=1496,Ot=1595,Pt=1737,Ht="H!o^",Rt="PEOQ",Wt=1918,Nt=66,$t="j$uk",Gt=759,Ut=265,Xt=561,jt=254,qt=379,Kt=1422,Vt=327,Yt=292,Qt=564,Zt=2192,Jt=2170,en=1974,tn="L4X9",nn=1054,sn="apzg",on=3755,an=221,rn=1525,ln=944,cn=915,pn=1076,hn=1107,dn=183,un=641,_n="t@jS",mn=2287,gn=930,fn=489,bn=830,Cn=1028,yn=2688,xn=1761,An=3248,vn=2333,kn=170,wn=485,Bn=607,Ln="sZ[B",Sn=860,zn=33,Fn=189,Tn=358,In=346,En=136,Mn=396,Dn=309,On=231,Pn=204,Hn=424,Rn=209,Wn={};function Nn(e,t,n,s,i){return Fe(e-Pn,t-199,n-Hn,i-Rn,n)}function $n(e,t,n,s,i){return et(e-23,t-Mn,i,s-Dn,s- -On)}function Gn(e,t,n,s,i){return ke(e-71,t-19,e-731,s-En,n)}function Un(e,t,n,s,i){return Fe(e-Fn,t-Tn,n-398,e- -In,i)}function Xn(e,t,n,s,i){return ke(e-64,t-104,n- -Sn,s-zn,t)}Wn[Nn(e,t,"azri",430,514)]=Nn(n,856,"t@jS",s,i),Wn[Xn(1767,o,1043,452,1758)]=Xn(-185,a,-272,-947,-r)+Un(l,692,515,1057,"Qzoo"),Wn[Nn(1822,2525,c,p,h)]=Nn(d,u,_,m,g),Wn[$n(1240,f,933,1724,"BYvL")]=$n(b,C,y,x,"j$uk"),Wn[$n(785,A,v,1117,k)]=Gn(2804,2206,"xZLj",3435,B)+"es",Wn[$n(1431,L,2126,1601,"0SiJ")]=Nn(S,z,F,1073,536)+"es",Wn[Gn(T,I,"PF26",2791,2519)]=Gn(1659,2313,"BVMs",E,1341)+"es",Wn[$n(M,D,62,O,P)]=Xn(-1325,H,-418,-R,88),Wn[Nn(1444,214,W,0,1120)]=$n(N,2851,$,G,U)+"s",Wn[Un(X,996,361,290,"]KEn")]=$n(1806,j,0,1189,"C#3#")+Xn(-339,"08hj",-238,-639,q),Wn[Xn(K,V,Y,Q,Z)]=Nn(J,ee,"qIb@",0,te)+Xn(-355,"BVMs",-ne,-se,447),Wn[Xn(ie,oe,-ae,-re,-167)]=Nn(1814,le,"azri",0,ce)+Nn(874,339,"ImC8",0,434)+Gn(pe,3197,he,2085,3338)+"s",Wn[$n(729,de,0,925,"#GCG")]=Xn(-ue,"!3Qz",-507,-_e,-1383)+Xn(1032,"!3Qz",me,467,ge)+"es",Wn[$n(fe,be,0,1849,Ce)]=$n(2746,ye,0,2334,xe)+Xn(858,"WjvE",998,203,924)+Xn(-Ae,"sZ[B",365,1179,-356)+"s",Wn[Nn(1490,ve,we,0,Be)]=Xn(Le,"orc9",-78,Se,ze)+Un(273,Te,1172,Ie,"ZBp6")+"es",Wn[Un(393,-428,X,960,Ee)]=Xn(Me,De,1070,1521,Oe)+$n(1765,1581,0,Pe,_)+Nn(He,2046,"uUWF",0,1187)+"s",Wn[$n(Re,2068,0,We,"xZLj")]=Nn(Ne,$e,"sZ[B",0,1247)+Un(Ge,-Ue,-404,-Xe,"4[ec")+"es",Wn[Nn(987,309,je,0,qe)]=Xn(Ke,V,1094,Ve,Ye)+Nn(43,637,"^jyP",0,Qe)+Nn(1238,Ze,"qIb@",0,Je),Wn[Un(tt,nt,26,0,st)]=$n(1091,it,0,ot,at)+Nn(rt,lt,"BVMs",0,ct),Wn[Gn(1885,1572,"ImC8",pt)]=Xn(470,ht,1303,1503,460)+$n(983,dt,0,1804,ut)+"s",Wn[Nn(2043,2529,H,0,1734)]=Un(-126,-305,-141,0,"BYvL")+Xn(_t,mt,gt,72);const jn=Wn;super[Un(ft,-188,bt,0,Ct)+Nn(2346,1741,yt,0,xt)](jn[$n(608,At,0,1292,vt)],[...Object[Un(-kt,-107,wt,0,"orc9")](w[Xn(163,Bt,Lt,216)+Nn(2818,St,"VlCh",0,1925)+"s"])],jn[Un(-zt,-Ft,-687,0,"ZBp6")]);const qn={};qn[Xn(Tt,"ZBp6",It,Et)]=8,qn[Gn(Mt,Dt,"t@jS",Ot)]=16,super[Nn(1713,Pt,Ht,0,2101)+Gn(2223,2755,Rt,Wt)+"y"](jn[Un(-Nt,-519,41,0,$t)],qn);const Kn={};Kn[Gn(1257,Gt,"VlCh",1963)]=16,Kn[Nn(-Ut,102,"#GCG",0,Xt)]=32,super[Nn(277,-jt,H,0,335)+Un(587,-185,qt,0,De)+"y"](jn[Nn(554,574,"BVMs",0,Kt)],Kn),this[Xn(Vt,"]KEn",815,1622)+"rs"]=[jn[Xn(-Yt,"ImC8",z,Qt)],jn[Gn(1723,Zt,$t,2317)],jn[Nn(Jt,2026,"6[6j",0,1667)],jn[Nn(en,223,tn,0,nn)],jn[Gn(2809,2646,sn,on)],jn[$n(an,rn,0,ln,"Y!uW")],jn[$n(cn,pn,0,hn,"X(di")],jn[Un(-dn,599,477,0,st)],jn[Un(un,586,O,0,"9ROd")],jn[Gn(1669,1115,_n,mn)],jn[Xn(1941,"9ROd",1203,443)],jn[Xn(gn,"j$uk",fn,1319)],jn[$n(2142,1399,0,1921,"orc9")],jn[Un(bn,495,Cn,0,"IPZB")],jn[Gn(yn,xn,"xZLj",An)],jn[$n(1876,2113,0,vn,"wEbn")],jn[Un(kn,wn,Bn,0,Ln)]]}static[Ie(234,831,"ZBp6",-30,726)+"e"](e,t){const n=t.garbage,s=t.clears,i=t.finesse;e.writeDInt(t.lines,this.$short),e.writeDInt(t.level_lines,this.$short),e.writeDInt(t.level_lines_needed,this.$short),e.writeDInt(t.inputs,this.$long),e.writeDInt(t.holds,this.$long),e.writeDInt(t.score,this.$long),e.writeUInt(t.level,8),e.writeDInt(t.combo,this.$long),e.writeDInt(t.topcombo,this.$long),e.writeUInt(t.combopower,3),e.writeDInt(t.btb,this.$short),e.writeDInt(t.topbtb,this.$short),e.writeUInt(t.btbpower,8),e.writeDInt(t.tspins,this.$long),e.writeDInt(t.piecesplaced,this.$long);for(const t of this._clears)e.writeDInt(s[t],this.$short);e.writeDInt(n.sent,this.$long),e.writeDInt(n.sent_nomult,this.$long),e.writeDInt(n.maxspike,this.$long),e.writeDInt(n.maxspike_nomult,this.$long),e.writeDInt(n.received,this.$long),e.writeDInt(n.attack,this.$long),e.writeDInt(n.cleared,this.$long),e.writeDInt(t.kills,this.$short),e.writeDInt(i.combo,this.$long),e.writeDInt(i.faults,this.$long),e.writeDInt(i.perfectpieces,this.$long),e.writeStruct(t.zenith,Ue)}static[Fe(954,608,1018,1544,"(03]")+"e"](e){const t={zenlevel:1,zenprogress:0,clears:{},garbage:{},finesse:{}};t.lines=e.readDInt(this.$short),t.level_lines=e.readDInt(this.$short),t.level_lines_needed=e.readDInt(this.$short),t.inputs=e.readDInt(this.$long),t.holds=e.readDInt(this.$long),t.score=e.readDInt(this.$long),t.level=e.readUInt(8),t.combo=e.readDInt(this.$long),t.topcombo=e.readDInt(this.$long),t.combopower=e.readUInt(3),t.btb=e.readDInt(this.$short),t.topbtb=e.readDInt(this.$short),t.btbpower=e.readUInt(8),t.tspins=e.readDInt(this.$long),t.piecesplaced=e.readDInt(this.$long);for(const n of this._clears)t.clears[n]=e.readDInt(this.$short);return t.garbage.sent=e.readDInt(this.$long),t.garbage.sent_nomult=e.readDInt(this.$long),t.garbage.maxspike=e.readDInt(this.$long),t.garbage.maxspike_nomult=e.readDInt(this.$long),t.garbage.received=e.readDInt(this.$long),t.garbage.attack=e.readDInt(this.$long),t.garbage.cleared=e.readDInt(this.$long),t.kills=e.readDInt(this.$short),t.finesse.combo=e.readDInt(this.$long),t.finesse.faults=e.readDInt(this.$long),t.finesse.perfectpieces=e.readDInt(this.$long),t.zenith=e.readStruct(Ue),t}}class Ue extends Ee{static[et(3297,2517,"ECiW",3474,2736)](){const e=907,t=1564,n=746,s="5Hno",i=1535,o=2120,a=1122,r="W3KH",l=1610,c="9uOv",p="orc9",h=2758,d=2931,u=58,_=474,m=283,g=243,f=124,b={};function C(e,t,n,s,i){return be(e-m,t- -47,n-g,s-284,i)}var y;b[v(2458,1657,2751,"BYvL",3002)]=Fe(855-420,(y=e)-f,t-81,y-661,"08hj");const x=b,A={};function v(e,t,n,s,i){return be(e-398,e-u,n-_,s-36,s)}A[v(1088,0,n,s)]=16,A[C(1925,i,o,a,r)]=32,super[v(1729,0,l,c)+v(1019,0,853,p)+"y"](x[C(h,2160,2371,d,"t@jS")],A)}static[Ie(686,899,"BYvL",765,623)+"e"](e,t){e.writeDouble(t.altitude),e.writeDouble(t.rank),e.writeDouble(t.peakrank),e.writeDouble(t.avgrankpts),e.writeDouble(t.totalbonus),e.writeFloat(t.targetingfactor,16,100),e.writeFloat(t.targetinggrace,16,100),e.writeUInt(t.floor,4),e.writeUInt(t.revives,8),e.writeUInt(t.revivesTotal,8),e.writeBoolean(t.speedrun),e.writeBoolean(t.speedrun_seen);for(let n=0;n<9;n++)e.writeDInt(t.splits[n],this.$long)}static[Ie(51,-774,"apzg",-148,-124)+"e"](e){const t={};t.altitude=e.readDouble(),t.rank=e.readDouble(),t.peakrank=e.readDouble(),t.avgrankpts=e.readDouble(),t.totalbonus=e.readDouble(),t.targetingfactor=e.readFloat(16,100),t.targetinggrace=e.readFloat(16,100),t.floor=e.readUInt(4),t.revives=e.readUInt(8),t.revivesTotal=e.readUInt(8),t.revivesMaxOfBoth=Math.max(t.revives,t.revivesTotal-t.revives),t.speedrun=e.readBoolean(),t.speedrun_seen=e.readBoolean(),t.splits=[];for(let n=0;n<9;n++)t.splits[n]=e.readDInt(this.$long);return t}}class Xe extends Ee{static[be(2181,1516,1357,1820,"0SiJ")](){const e=1980,t=2709,n=2113,s="sZ[B",i=984,o=760,a=358,r="4[ec",l=2694,c=3004,p="(03]",h=3487,d=2807,u="(03]",_=1515,m=1771,g=3031,f="q08X",b=3156,C=2783,y=3665,x=1763,A=2984,v=2152,k="zXbz",w=2363,B=1220,L=2674,S=2064,z=2702,F=2021,T="azri",I=1651,E=2269,M="j$uk",D=2069,O=2392,P=3585,H="apzg",R=1534,W="4[ec",N=2776,$=1822,G=2643,U="t@jS",X=3246,j=2132,q=1560,K="xZLj",V=1342,Y=2048,Q="yora",Z=3247,J=3068,ee="t@jS",te=774,ne=1674,se="Qzoo",ie=2013,oe=1179,ae=1163,re=1012,le=1313,ce=686,pe=1318,he="L4X9",de=3169,ue="8qu1",_e=1512,me="VlCh",ge=1927,fe=2850,Ce=2170,ye=2324,xe="t@jS",Ae=1816,ve=1159,we=886,Be=2878,Le=1422,Se=1907,ze=1260,Te=1511,Ee=1559,Me=1070,De=868,Oe=2536,Pe=1992,He=2837,Re=3304,We=1725,Ne=3142,$e=2450,Ge=2631,Ue="apzg",Xe="X(di",je=1129,qe=2181,Ke=1958,Ve="X(di",Ye=2340,Qe=3419,Ze=1806,Je=2741,et=3037,tt=2729,nt=3502,st=2935,it="9uOv",ot=1872,at=2853,rt=2107,lt=2262,ct="5Hno",pt=2210,ht=2023,dt="C#3#",ut=2337,_t=2712,mt="qIb@",gt=1708,ft=2106,bt=1945,Ct="08hj",yt=1109,xt=2197,At=2090,vt="BVMs",kt=2766,wt=3421,Bt="TKgk",Lt=547,St=2395,zt=2843,Ft="H!o^",Tt=1235,It="]KEn",Et=777,Mt=24,Dt=1384,Ot=303,Pt=214,Ht=968,Rt=907,Wt=432,Nt=291,$t={};function Gt(e,t,n,s,i){return be(e-Nt,e-477,n-323,s-323,n)}function Ut(e,t,n,s,i){return ke(e-404,t-466,e-Rt,s-Wt,t)}$t[qt(2556,2145,2953,1834,"uUWF")]=qt(2537,e,t,1682,"VlCh"),$t[Gt(n,0,s,1232)]=Gt(1699,0,"rtkN",1935),$t[Kt(i,o,a,1278,"TKgk")]=Gt(2123,0,r,1839)+Kt(l,2930,c,2486,p)+"n",$t[Kt(2309,h,3732,d,"t@jS")]=Gt(1600,0,u,1657)+Kt(2292,1146,_,m,"Qzoo")+Ut(g,f,b,C,y)+Kt(2383,x,A,v,k),$t[Kt(707,2068,w,1446,"X(di")]=qt(2098,B,L,2484,"PEOQ")+"t",$t[Gt(1344,0,"PmF#",984)]=Ut(S,p,1337,2993,z)+Vt(F,2953,T,I,2672),$t[Gt(E,0,M,1624)]=Vt(1653,D,"#GCG",O,2035)+qt(2035,1175,2739,1713,"Y!uW")+Kt(2150,P,3467,2683,H),$t[qt(1625,2363,2083,R,W)]=Kt(3422,N,$,2718,"apzg"),$t[Vt(G,2983,U,3081,X)]=qt(j,1555,1743,1536,"TKgk")+"m",$t[Ut(q,K,V,2494,Y)]=Vt(2941,2787,Q,Z,J)+Gt(1127,0,ee,te),$t[Gt(2399,0,"VlCh",2763)]=qt(ne,2470,2142,2465,se)+"ge",$t[Kt(520,1261,ie,oe,U)]=Vt(ae,2004,"Qzoo",re,1036)+Kt(1261,le,ce,pe,he)+Kt(de,3153,2921,2738,"X(di")+"s",$t[Vt(1311,981,ue,1330,ae)]=qt(_e,2018,2331,1952,me)+qt(ge,fe,Ce,ye,"(03]")+"us",$t[Gt(1347,0,xe,1976)]=Gt(Ae,0,"PmF#",ve)+Ut(1818,"orc9",0,we)+Vt(2726,Be,"H!o^",2586,2892)+qt(Le,894,Se,ze,"#GCG"),$t[qt(Te,Ee,Me,2339,"C#3#")]=Ut(1650,"q08X",0,De)+qt(Oe,Pe,He,Re,"orc9")+Kt(We,Ne,$e,Ge,"orc9");const Xt=$t,jt={};function qt(e,t,n,s,i){return Fe(e-Ot,t-196,n-Pt,e-Ht,i)}function Kt(e,t,n,s,i){return Ie(e-373,t-207,i,s-Mt,s-Dt)}function Vt(e,t,n,s,i){return ke(e-35,t-140,e-Et,s-139,n)}jt[Ut(2473,Ue,0,2710)]=8,jt[Gt(1289,0,Xe,je)]=24,super[Kt(qe,Ke,0,2774,Ve)+Vt(2646,Ye,T,Qe,Ze)+"y"](Xt[Ut(1906,"^jyP",0,Je)],jt),super[Ut(2478,"xZLj",0,et)+Kt(tt,nt,0,st,it)](Xt[qt(2414,ot,2559,0,"IfVL")],[Xt[Ut(2844,"IfVL",0,2472)],Xt[Vt(2552,1983,"X(di",2261,at)],Xt[Vt(rt,lt,ct,pt,ht)],Xt[Gt(1621,0,dt,ut)],Xt[Gt(2108,0,"4[ec",1560)],Xt[Gt(_t,0,mt,2379)],Xt[qt(2356,3089,2238,0,"orc9")]]),super[Kt(2233,gt,0,ft,"azri")+Gt(bt,0,Ct,yt)](Xt[qt(2667,xt,At,0,vt)],[Xt[Vt(2893,kt,"XRtz",wt)],Xt[Gt(1272,0,Bt,382)],Xt[Gt(1298,0,"L4X9",Lt)],Xt[Kt(St,2197,0,zt,Ft)],Xt[Kt(659,511,0,Tt,It)]])}static[be(2335,1744,2510,1762,"Qzoo")+"e"](e,t){const n=t.frame,s=t.type,i=t.data;switch(e.writeDInt(t.id,this.$byte),e.writeDInt(n,this.$byte),e.writeTable(s,this.$$type),s){case"interaction":return e.writeStruct(i,je);case"interaction_confirm":switch(e.writeTable(i.type,this.$$int_type),i.type){case"garbage":return e.writeStruct(i,je);case"zenith.climb_pts":case"zenith.bonus":return e.writeUInt(i.gameid,13),e.writeDInt(i.frame,this.$byte),e.writeDouble(i.amt);case"zenith.incapacitated":case"zenith.revive":return e.writeUInt(i.gameid,13),e.writeDInt(i.frame,this.$byte);default:throw new Error(`Unknown interaction type received: ${i.type}`)}case"target":e.writeUInt(i.targets.length,13);for(const t of i.targets)e.writeUInt(t,13);break;case"targeted":e.writeBoolean(i.value),e.writeUInt(i.gameid,13),e.writeDInt(i.frame,this.$byte);break;case"allow_targeting":e.writeBoolean(i.value);break;case"kev":e.writeUInt(i.victim.gameid,13),e.writeUInt(i.killer.gameid,13),e.writeDInt(i.frame,this.$byte),e.writeUInt(i.fire,10);break;case"custom":return e.writeStruct(i,Ke)}}static[Ie(-257,311,"WjvE",-720,145)+"e"](e){const t={};t.id=e.readDInt(this.$byte),t.frame=e.readDInt(this.$byte),t.type=e.readTable(this.$$type);e:switch(t.type){case"interaction":t.data=e.readStruct(je);break;case"interaction_confirm":{const n=e.readTable(this.$$int_type);switch(n){case"garbage":t.data=e.readStruct(je);break e;case"zenith.climb_pts":case"zenith.bonus":t.data={type:n,gameid:e.readUInt(13),frame:e.readDInt(this.$byte),amt:e.readDouble()};break e;case"zenith.incapacitated":case"zenith.revive":t.data={type:n,gameid:e.readUInt(13),frame:e.readDInt(this.$byte)};break e}break}case"target":{const n=[],s=e.readUInt(13);for(let t=0;t<s;t++)n.push(e.readUInt(13));t.data={targets:n};break}case"targeted":t.data={value:e.readBoolean(),gameid:e.readUInt(13),frame:e.readDInt(this.$byte)};break;case"allow_targeting":t.data={value:e.readBoolean()};break;case"kev":t.data={victim:{gameid:e.readUInt(13)},killer:{gameid:e.readUInt(13)},frame:e.readDInt(this.$byte),fire:e.readUInt(10)};break;case"custom":t.data=e.readStruct(Ke)}return t}}class je extends Me{static[be(2711,2442,1760,1575,"wEbn")](){const e=400,t=405,n=541,s="9uOv",i=1314,o=631,a=448,r="W3KH",l=858,c=657,p=279,h=711,d=1457,u="9ROd",_=1856,m=1570,g=1197,f="!3Qz",b=304,C=506,y=309,x=1095,A=183,v=685,k="^jyP",B=1100,L="X(di",S=1857,z=2916,F="BVMs",T=2516,I=2280,E=2737,M=2792,D="8qu1",O=1935,P=1829,H=1475,R=1688,W=1740,N=2911,$=2271,G="L4X9",U=1622,X=1357,j="X(di",q=719,K=507,V=1560,Y="ECiW",Q=355,Z=3125,J=2510,ee=3231,te="L4X9",ne="TKgk",se=3247,ie=2002,oe=1680,ae=2850,re=2619,le=1329,ce=46,pe=2570,he=944,de=1874,ue=683,_e="IfVL",me=954,ge=984,fe=2074,Ce=1143,ye="wEbn",xe=3079,Ae=2522,ve=2461,ke=759,we=1306,Be=1922,Le=1399,Se="#GCG",ze=403,Ee=1132,Me="ZBp6",De=2566,Oe=1821,Pe="WjvE",He=1463,Re=369,We=542,$e=1470,Ge=938,Ue=2591,Xe=2656,je=2265,qe=1482,Ke=2375,Ve=1898,Ye=121,Qe="sZ[B",Ze=2750,Je=2436,et=3144,tt=2464,nt=1840,st=90,it="yora",ot=1345,at=1331,rt=1715,lt="ImC8",ct=724,pt=1737,ht=1299,dt=789,ut=2835,_t=1390,mt=1174,gt=741,ft=691,bt=49,Ct=1613,yt=1879,xt=2515,At="PmF#",vt=2582,kt=2342,wt=1585,Bt=1795,Lt=1365,St="0SiJ",zt=173,Ft=718,Tt=178,It=487,Et=678,Mt="BYvL",Dt=2890,Ot="VlCh",Pt=1478,Ht=1348,Rt=1370,Wt=884,Nt=998,$t="XRtz",Gt=1469,Ut=1798,Xt=2301,jt=2493,qt="azri",Kt=2011,Vt=2132,Yt=1041,Qt=1031,Zt="C#3#",Jt=2745,en=2136,tn=2040,nn=1924,sn=1383,on=2278,an="zXbz",rn=2578,ln=601,cn="wEbn",pn=192,hn=172,dn=1737,un="uUWF",_n="H!o^",mn=899,gn=630,fn="ImC8",bn=732,Cn="08hj",yn=2933,xn=2568,An=574,vn=444,kn=1132,wn=588,Bn="orc9",Ln=1571,Sn=1901,zn=44,Fn=260,Tn="WjvE",In=1341,En="6[6j",Mn=1384,Dn="]KEn",On=2383,Pn=3295,Hn=1952,Rn=1596,Wn=1377,Nn="Y!uW",$n=1593,Gn=2385,Un=1744,Xn=949,jn=2050,qn=1550,Kn="q08X",Vn=2455,Yn="08hj",Qn=2264,Zn=981,Jn=1008,es=1105,ts=2751,ns=175,ss=549,is=505,os=185,as=337,rs="BYvL",ls=666,cs=431,ps=2697,hs=2920,ds=2427,us=561,_s="Y!uW",ms=438,gs=420,fs="qIb@",bs=855,Cs=808,ys=891,xs=131,As=2384,vs=1624,ks=2392,ws=2503,Bs="8qu1",Ls=2520,Ss=2718,zs="WCYY",Fs="8qu1",Ts=3391,Is=3267,Es=2463,Ms=206,Ds=1351,Os=1664,Ps=574,Hs=1358,Rs="(03]",Ws=843,Ns=232,$s=1417,Gs=540,Us=1408,Xs=1180,js="BYvL",qs=1939,Ks=358,Vs=416,Ys=736,Qs=315,Zs=758,Js=177,ei=2231,ti=1659,ni=1304,si="j$uk",ii=875,oi=540,ai=529,ri=1814,li=1934,ci=1873,pi=1279,hi=1127,di="xZLj",ui=9,_i=193,mi=1279,gi=888,fi=604,bi=1084,Ci=1550,yi="6[6j",xi=104,Ai=1126,vi=180,ki=535,wi=1370,Bi="j$uk",Li=671,Si=97,zi=318,Fi=496,Ti="4[ec",Ii=664,Ei=501,Mi="PEOQ",Di=233,Oi=337,Pi="BYvL",Hi=1975,Ri=2067,Wi=1125,Ni=1691,$i=2347,Gi=943,Ui=1312,Xi="8qu1",ji=265,qi=845,Ki=520,Vi=677,Yi=1431,Qi=1296,Zi="BYvL",Ji=1098,eo=543,to=132,no=784,so=1242,io=673,oo=1520,ao=1389,ro=2636,lo=2062,co="#GCG",po=2997,ho=2892,uo=2245,_o=1530,mo=2004,go=2130,fo=1677,bo=841,Co=1639,yo="qIb@",xo=2015,Ao=2949,vo=58,ko=376,wo=1720,Bo=1215,Lo=539,So=2426,zo="X(di",Fo=2594,To=2858,Io=1177,Eo=1960,Mo="H!o^",Do=2523,Oo=1032,Po=1265,Ho="VlCh",Ro=2999,Wo="5Hno",No=806,$o=223,Go=1517,Uo=1481,Xo=1559,jo=1145,qo=959,Ko=871,Vo=1047,Yo="PEOQ",Qo=1755,Zo="xZLj",Jo=1361,ea=1668,ta=2250,na=1386,sa=2210,ia=2278,oa=1812,aa=329,ra=352,la=63,ca=2223,pa=1193,ha=843,da="xZLj",ua=1306,_a=589,ma=793,ga=110,fa="ZBp6",ba=1769,Ca=2146,ya=2081,xa=896,Aa=1761,va=1673,ka=565,wa=1147,Ba=2292,La=2209,Sa=1556,za=1114,Fa="WjvE",Ta=1547,Ia=2478,Ea=213,Ma=38,Da=64,Oa=872,Pa=1628,Ha=2116,Ra=913,Wa=241,Na=1492,$a="XRtz",Ga=254,Ua=584,Xa=110,ja=1730,qa=1368,Ka=939,Va="4[ec",Ya=761,Qa=653,Za=1461,Ja=135,er="rtkN",tr=1873,nr="XRtz",sr=730,ir=2865,or=1931,ar="ImC8",rr=100,lr=1859,cr=1244,pr="08hj",hr=474,dr=2704,ur=3021,_r=27,mr="zXbz",gr=1323,fr=1940,br="IPZB",Cr=1858,yr=1607,xr=851,Ar=1451,vr=1968,kr="t@jS",wr=181,Br=335,Lr=442,Sr=1870,zr=1769,Fr=346,Tr=1176,Ir="t@jS",Er=660,Mr=873,Dr=1402,Or=427,Pr=1245,Hr=1740,Rr=669,Wr=1271,Nr="Y!uW",$r=1156,Gr=281,Ur=474,Xr="5Hno",jr=2063,qr="sZ[B",Kr=1160,Vr=1287,Yr=2321,Qr=1850,Zr=1651,Jr=1726,el=1128,tl="PEOQ",nl=1429,sl=1411,il="rtkN",ol=1383,al=2562,rl="uUWF",ll=1135,cl=1249,pl=2872,hl=2592,dl=744,ul="XRtz",_l=2421,ml=1217,gl=1120,fl=856,bl=362,Cl="08hj",yl=1607,xl=1339,Al=1666,vl=1329,kl=1541,wl=3120,Bl=655,Ll=1271,Sl=1385,zl=2606,Fl=1195,Tl=1758,Il=1711,El=945,Ml=1125,Dl=1604,Ol="TKgk",Pl=1573,Hl=184,Rl=760,Wl=383,Nl=815,$l=793,Gl="yora",Ul=1141,Xl=960,jl=2017,ql=1576,Kl=140,Vl=788,Yl=1965,Ql="IPZB",Zl=2447,Jl=1880,ec=1094,tc=114,nc=401,sc=282,ic=469,oc=277,ac=1147,rc=69,lc=156,cc=448,pc=247,hc=71,dc=241,uc={};function _c(e,t,n,s,i){return Ie(e-196,t-240,s,s-hc,n-dc)}function mc(e,t,n,s,i){return Fe(e-cc,t-pc,n-450,n- -743,i)}function gc(e,t,n,s,i){return Fe(e-rc,t-295,n-lc,s-574,i)}function fc(e,t,n,s,i){return Ie(e-sc,t-ic,s,s-oc,t-ac)}function bc(e,t,n,s,i){return be(e-398,n-tc,n-1,s-nc,t)}uc[mc(-666,-1075,-e,t,"@j!&")]=mc(87,n,670,1550,s)+mc(1179,i,o,a,r)+"4",uc[mc(l,-c,p,h,"PmF#")]=fc(739,1329,d,"TKgk",1157),uc[bc(2111,u,_,1679,1272)]=gc(804,1287,m,g,f),uc[_c(561,811,b,"H!o^")]=mc(-409,C,-y,-x,"rtkN")+mc(478,-A,v,130,"@j!&"),uc[fc(1418,1516,2077,k,B)]=bc(3375,L,2465,2415,S)+bc(z,F,2486,2130,T),uc[bc(1349,"yora",2022,I,E)]=_c(700,-574,342,"sZ[B")+fc(M,2196,2756,D,2382)+gc(1329,1761,2402,O,"Qzoo")+"e",uc[_c(1275,P,H,"PF26")]=gc(R,W,N,$,G)+fc(U,X,1780,j,q),uc[fc(K,1447,534,"H!o^",694)]=fc(525,1268,V,Y,1328)+"m",uc[mc(1185,1029,Q,0,"IfVL")]=bc(Z,Y,J,1832,ee),uc[_c(1222,1534,1167,te)]=bc(1588,ne,2322,se,1757)+"ge",uc[_c(1065,ie,oe,"XRtz")]=gc(ae,re,3026,2104,"9ROd")+_c(le,357,940,"(03]"),uc[mc(70,381,ce,0,G)]=gc(pe,he,2271,de,"rtkN"),uc[bc(ue,_e,me,ge)]=gc(755,fe,1677,Ce,"6[6j")+_c(1109,2073,1455,ye),uc[fc(2176,1338,0,"PmF#")]=gc(2629,xe,Ae,ve,"WCYY")+_c(1625,612,ke,k),uc[fc(we,Be,0,"PmF#")]=fc(725,Le,0,Se),uc[gc(730,ze,195,661,"4[ec")]=_c(2076,551,Ee,"PF26")+"s",uc[_c(448,1368,576,Me)]=fc(2254,De,0,"apzg"),uc[bc(2173,"xZLj",Oe,2067)]=gc(1300,1086,1925,1902,"IfVL");const Cc=uc,yc=Cc[mc(-934,-846,-93,0,"apzg")][fc(2435,2313,0,Pe)]("|");let xc=0;for(;;){switch(yc[xc++]){case"0":super[mc(-He,-Re,-We,0,"08hj")+_c($e,1177,889,_e)](Cc[fc(339,Ge,0,"!3Qz")],[null,...w[fc(Ue,Xe,0,"X(di")+bc(je,"qIb@",qe,1792)]]);continue;case"1":const e={};e[fc(Ke,Ve,0,f)]=8,e[mc(381,-131,Ye,0,Qe)]=24,super[bc(Ze,"XRtz",Je,et)+_c(tt,2228,nt,"t@jS")+"y"](Cc[_c(619,423,1084,"BVMs")],e);continue;case"2":super[mc(777,15,-st,0,it)+gc(ot,1441,at,740,"TKgk")](Cc[_c(2217,2275,rt,"Y!uW")],[Cc[bc(878,lt,ct,19)],Cc[fc(1963,pt,0,"rtkN")],Cc[gc(dt,2439,2383,1549,"#GCG")],Cc[gc(1626,2585,ut,2330,u)]]);continue;case"3":super[bc(_t,r,mt,510)+mc(gt,ft,-bt,0,"6[6j")](Cc[fc(Ct,959,0,"PF26")],[Cc[bc(2157,"@j!&",yt,xt)],Cc[fc(2282,2120,0,At)]]);continue;case"4":const t={};t[fc(vt,kt,0,r)]=Cc[_c(Bt,Lt,1453,St)],t[_c(-zt,1427,Ft,"TKgk")]=Te[mc(-996,-Tt,-118,0,it)][mc(-It,-392,-Et,0,Mt)],t[bc(Dt,Ot,2277,Pt)]=this[mc(-Ht,22,-637,0,"TKgk")+"e"];const n={};n[bc(654,G,Rt,Wt)]=Cc[_c(Nt,243,573,$t)],n[gc(2767,Gt,Ut,Xt,lt)]=Te[fc(2683,jt,0,qt)][bc(2334,"H!o^",Kt,Vt)],n[bc(2891,"j$uk",2162,2038)]=this[gc(Yt,2683,Qt,1868,Zt)];const i={};i[gc(2013,3174,Jt,2371,"H!o^")]=Cc[gc(1268,2628,1335,en,"t@jS")],i[_c(tn,nn,sn,G)]=Te[bc(on,an,rn,3472)][mc(1569,ln,687,0,cn)+"g"],i[_c(-pn,1142,680,f)]=!0;const o={};o[bc(hn,"(03]",843,481)]=Cc[gc(1026,1635,1485,dn,un)],o[bc(1548,_n,mn,94)]=Te[gc(wt,gn,1617,1399,fn)][mc(1128,814,bn,0,Cn)],o[fc(yn,xn,0,"@j!&")]=13;const a={};a[mc(-476,-An,-vn,0,"BVMs")]=Cc[mc(-150,-kn,-wn,0,Bn)],a[bc(2273,"apzg",Ln,Sn)]=Te[mc(zn,-60,-Fn,0,Tn)][mc(702,In,991,0,En)],a[fc(Mn,1303,0,Dn)]=this[bc(On,"!3Qz",2367,Pn)+_c(Hn,Rn,Wn,"zXbz")];const l={};l[fc(3515,2687,0,Nn)]=Cc[fc($n,Gn,0,"X(di")],l[bc(1861,"9ROd",2513,Un)]=Te[mc(Xn,876,918,0,"TKgk")][_c(jn,qn,1186,Kn)],l[bc(Vn,Yn,Qn,2860)]=this[bc(Zn,k,801,86)];const c={};c[_c(Jn,1973,es,D)]=Cc[fc(2014,ts,0,"WjvE")],c[mc(-ns,-ss,-is,0,"uUWF")]=Te[_c(os,379,as,rs)][mc(-ls,55,-cs,0,"]KEn")],c[gc(ps,hs,1774,ds,_n)]=this[mc(us,-39,-155,0,_s)];const p={};p[mc(ms,469,-gs,0,"VlCh")]=Cc[bc(508,fs,bs,648)],p[mc(-Cs,ys,xs,0,Tn)]=Te[fc(1731,As,0,un)][_c(vs,ks,1502,"9ROd")],p[fc(3274,ws,0,Bs)]=this[fc(1845,1063,0,St)];const h={};h[gc(re,Ls,Ss,1820,zs)]=Cc[gc(1613,1186,502,1307,Fs)],h[mc(473,306,155,0,"apzg")]=Te[gc(3228,Ts,Is,Es,"VlCh")][_c(149,-544,Ms,St)],h[bc(Ds,"PF26",1464,1112)]=this[gc(1443,Os,Ps,Hs,"4[ec")];const d={};d[bc(-103,Rs,Ws,Ns)]=Cc[_c($s,1606,788,"W3KH")],d[bc(Sn,"TKgk",1479,Gs)]=Te[fc(2192,Us,0,"PEOQ")][fc(2228,2508,0,"L4X9")],d[fc(1836,Xs,0,js)]=Ne[gc(1966,833,qs,1170,"rtkN")+_c(-Ks,Vs,254,"6[6j")];const _={};_[_c(Ys,Qs,Zs,"9uOv")]=Cc[mc(-Js,327,-597,0,an)],_[fc(ei,ti,0,"PmF#")]=Te[_c(607,ni,1550,En)][fc(2264,2440,0,si)],_[mc(ii,88,oi,0,"azri")]=Ne[_c(467,ai,885,"q08X")+gc(ri,li,ci,$n,te)];const m={};m[_c(pi,hi,538,di)]=Cc[_c(-520,-ui,_i,"IfVL")],m[gc(mi,2605,gi,1769,"wEbn")]=Te[_c(fi,bi,Ci,yi)][mc(-xi,-Ai,-vi,0,_e)],m[_c(777,-713,127,"6[6j")]=this[bc(ki,"C#3#",1327,wi)];const g={};g[bc(480,Bi,783,Li)]=Cc[mc(-zi,-341,Fi,0,Ti)],g[_c(Ii,-24,Ei,Mi)]=Te[_c(Di,1227,Oi,Pi)][fc(Hi,1146,0,"PEOQ")],g[bc(Ri,Bs,2358,1841)]=this[mc(1017,1173,Wi,0,"6[6j")];const b={};b[fc(1642,Ni,0,yi)]=Cc[fc(2647,$i,0,"yora")],b[fc(1542,Gi,0,"PF26")]=Te[_c(404,Ui,1064,Xi)][_c(989,1581,1534,si)],b[_c(-ji,qi,Ki,fn)]=24;const C={};C[_c(1767,Vi,1221,qt)]=Cc[bc(Yi,"0SiJ",1381,Qi)],C[fc(3211,2460,0,"ZBp6")]=Te[bc(1571,Zi,Ji,745)][bc(eo,"]KEn",1243,770)],C[bc(2342,"W3KH",1665,1457)]=Ne[_c(-to,-Si,508,"rtkN")+fc(no,1508,0,"qIb@")];const y={};y[_c(1029,1534,1398,"q08X")]=Cc[_c(so,988,io,"q08X")],y[gc(1501,oo,ao,973,"yora")]=Te[fc(ro,lo,0,co)][gc(po,ho,uo,2277,Bs)],y[gc(_o,mo,go,fo,"yora")]=16;const x={};x[gc(2441,2443,1832,2371,"H!o^")]=Cc[gc(2012,1816,bo,1579,"9uOv")],x[bc(Co,yo,xo,Ao)]=Te[mc(-vo,-463,-ko,0,"9uOv")][bc(2334,"H!o^",2059,wo)+"an"];const A={};A[gc(306,1144,1382,Bo,"4[ec")]=Cc[bc(1681,Yn,1019,517)],A[_c(Lo,823,xs,"zXbz")]=Te[bc(So,zo,Fo,2458)][gc(To,1243,Io,Eo,Mo)+"an"];const v={};v[bc(1143,u,1617,Do)]=Cc[_c(Oo,500,Po,Ho)],v[bc(Ro,Wo,2557,2525)]=Te[mc(No,-$o,-118,0,"yora")][mc(Go,Uo,992,0,u)],v[bc(Xo,an,jo,qo)]=Ne[fc(Ko,Vo,0,Yo)+fc(1382,Qo,0,Zo)];const B={};B[gc(Jo,ea,ta,na,"PmF#")]=Cc[mc(418,-112,gs,0,un)],B[fc(sa,ia,0,$t)]=Te[bc(1590,"ZBp6",1526,oa)][_c(-aa,-ra,la,"t@jS")+"e"];const L={};L[bc(1502,zo,ca,1469)]=Cc[_c(pa,885,ha,da)],L[gc(713,ua,_a,ma,an)]=Te[mc(95,144,ga,0,fa)][bc(2272,_e,ba,Ca)+"g"];const S={};S[_c(ya,xa,Aa,"yora")]=Cc[mc(va,ka,824,0,"X(di")],S[fc(1487,wa,0,"(03]")]=Te[mc(-583,-953,-361,0,"orc9")][bc(1979,"qIb@",Ba,1903)+"g"];const z={};z[fc(3076,La,0,"apzg")]=Cc[gc(1083,za,296,720,"zXbz")],z[bc(1298,Fa,Ta,Ia)]=Te[mc(972,Ea,Ma,0,"wEbn")][fc(Da,Oa,0,_n)+"g"];const T={};T[gc(Pa,Ha,Ra,1186,"rtkN")]=Cc[mc(-212,725,Wa,0,$t)],T[_c(2099,Na,1372,$a)]=Te[mc(-Ga,-Ua,Xa,0,"ZBp6")][gc(958,ja,qa,Ka,lt)],T[bc(1650,Va,2489,3172)]=this[_c(Ya,ht,Qa,"W3KH")+bc(1846,"IPZB",1404,1406)+"e"];const I={};I[fc(Za,1369,0,"zXbz")]=Cc[fc(2382,2513,0,"j$uk")],I[mc(Ja,758,452,0,"wEbn")]=Te[fc(1934,1838,0,"]KEn")][_c(2065,1782,1754,er)];const E={};E[bc(tr,nr,1069,sr)]=Cc[gc(ir,2161,1842,or,"(03]")],E[mc(96,1332,984,0,ar)]=Te[_c(-rr,381,635,F)][gc(1513,lr,cr,1712,pr)],E[mc(hr,1088,726,0,"Y!uW")]=this[bc(dr,u,2304,ur)+_c(467,-880,-_r,mr)+"e"];const M={};M[fc(gr,fr,0,br)]=Cc[_c(Cr,2230,yr,Bi)],M[_c(xr,Ar,927,"0SiJ")]=Te[fc(2739,vr,0,kr)][mc(wr,Br,-Lr,0,"ECiW")];const O={};O[gc(1675,1913,Sr,zr,"wEbn")]=t,O[mc(-Fr,-849,-367,0,Bi)]=n,O[fc(Tr,1829,0,Ir)+mc(-150,-593,-Er,0,"PEOQ")]=i,O[gc(1464,1474,Mr,Dr,"zXbz")+"d"]=o,O[fc(ce,991,0,un)+bc(Or,"xZLj",Pr,Hr)]=a,O[mc(Rr,Wr,563,0,Nr)]=l,O[bc($r,"ImC8",1347,826)]=c,O[mc(-Gr,-Ur,-636,0,Xr)]=p,O[bc(345,Zt,1230,1983)+"d"]=h,O.x=d,O.y=_,O[gc(2878,jr,2670,2363,qr)]=m,O[fc(Kr,Vr,0,s)]=g,O[gc(Yr,Qr,Zr,2379,"xZLj")]=b,O[fc(Jr,el,0,tl)+"n"]=C,O[fc(1109,nl,0,"sZ[B")]=y,O[mc(sl,1091,731,0,il)+"d"]=x,O[bc(sr,F,ol,1433)+fc(2475,2243,0,G)]=A,O[fc(al,2333,0,rl)]=v,O[fc(ll,cl,0,"IfVL")+"t"]=B,O[gc(pl,2795,hl,2024,"W3KH")+mc(-dl,821,-41,0,ul)]=L,O[gc(2147,_l,ml,1991,"j$uk")+gc(Or,gl,1585,fl,"q08X")]=S,O[_c(bl,250,317,Cl)+"r"]=z,O[gc(yl,xl,1407,1860,"!3Qz")+fc(864,Al,0,"9uOv")+fc(1670,2033,0,fs)+bc(vl,"8qu1",kl,2183)]=T,O[bc(3214,"BVMs",2456,wl)+bc(1085,"azri",Sa,617)+_c(Bl,Ll,Sl,cn)+gc(zl,Fl,2521,Tl,"8qu1")]=I,O[gc(Il,2975,2320,2461,zs)+_c(840,1015,289,nr)+_c(El,Ml,Dl,Ol)+fc(2273,Pl,0,"^jyP")]=E,O[gc(-Hl,-116,418,Rr,"sZ[B")+mc(Rl,378,Wl,0,"qIb@")+mc(Nl,1056,$l,0,Gl)+bc(944,"xZLj",Ul,643)]=M,super[mc(-250,104,651,0,"sZ[B")+fc(1100,Xl,0,F)+"re"](O);continue;case"5":super[fc(jl,ql,0,"uUWF")+gc(682,-19,-Kl,Vl,"qIb@")](Cc[fc(Yl,1964,0,"q08X")],[Cc[bc(3293,Ql,Zl,2142)],Cc[gc(Jl,ec,Jt,1867,"!3Qz")],Cc[fc(706,1527,0,"6[6j")],Cc[fc(3079,2178,0,"@j!&")]]);continue}break}}}class qe extends Me{static[ke(1220,193,1069,1047,"6[6j")](){const e=1446,t=856,n="]KEn",s=1161,i=2904,o="4[ec",a=1038,r=1590,l=1550,c=977,p=135,h="PEOQ",d=261,u=2324,_=1847,m=1107,g=2173,f=1535,b=1390,C=523,y=1057,x=1953,A=1633,v=1676,k=2898,B="wEbn",L=1815,S=1543,z="q08X",F=178,T=1050,I=932,E=49,M=8,D=682,O=371,P="PF26",H="Qzoo",R=743,W=1196,N=1822,$="ImC8",G=709,U=1119,X=818,j=338,q="BVMs",K=1211,V=407,Y="6[6j",Q=582,Z=51,J="@j!&",ee=1292,te=1029,ne=132,se=548,ie="9uOv",oe=2238,ae=1733,re=1382,le=1955,ce=2317,pe="PF26",he=1670,de=53,ue=157,_e="XRtz",me=308,ge="W3KH",fe=1797,Ce=2348,ye=1589,xe=366,Ae=965,ve=1296,we="WCYY",Be="W3KH",Le=1154,Se="yora",ze=1400,Fe=893,Ie="BYvL",Ee=2736,Me=2957,De=1706,Oe=2622,Pe=1905,He="zXbz",Re=1094,We="5Hno",$e=1337,Ge=2544,Ue=356,Xe=975,je=1754,qe=370,Ke=1838,Ve=1255,Ye=1384,Qe=101,Ze="IfVL",Je=1718,et=583,tt=882,nt="orc9",st=1567,it="VlCh",ot=1500,at="WCYY",rt=1351,lt=1089,ct=989,pt=773,ht=458,dt=1077,ut=943,_t="@j!&",mt=417,gt=795,ft=928,bt=164,Ct=5,yt="wEbn",xt=1724,At=1963,vt=1666,kt=2009,wt=745,Bt=623,Lt="qIb@",St=1346,zt="^jyP",Ft=68,Tt=413,It=714,Et=1109,Mt=761,Dt=1148,Ot=562,Pt="IPZB",Ht=1133,Rt="#GCG",Wt=467,Nt=463,$t=704,Gt=80,Ut=1248,Xt=1506,jt=2305,qt="uUWF",Kt=2412,Vt=797,Yt=628,Qt=108,Zt=3461,Jt=2108,en=1762,tn="ECiW",nn=1433,sn=667,on=207,an=112,rn="PEOQ",ln=643,cn=1471,pn=1507,hn=1520,dn=2671,un=1938,_n="5Hno",mn=1175,gn=1627,fn="0SiJ",bn=996,Cn=878,yn=668,xn=1675,An="ECiW",vn=1646,kn=2337,wn=269,Bn="IfVL",Ln=1907,Sn=2093,zn=2178,Fn=428,Tn="C#3#",In=242,En=1165,Mn=1247,Dn="PmF#",On="H!o^",Pn=966,Hn=1192,Rn="TKgk",Wn=1516,Nn=109,$n=388,Gn=350,Un=2404,Xn=1686,jn=1197,qn=2095,Kn=1207,Vn=2419,Yn=2248,Qn="08hj",Zn=2102,Jn=2467,es=1144,ts=1814,ns=1125,ss=1063,is=524,os=435,as=1286,rs=528,ls=38,cs=992,ps=1061,hs=1027,ds=1486,us=658,_s=817,ms="IfVL",gs=2264,fs=485,bs=716,Cs=115,ys=2474,xs=1328,As=791,vs="(03]",ks=137,ws=397,Bs=2237,Ls=1333,Ss=1329,zs="uUWF",Fs=1352,Ts="j$uk",Is="L4X9",Es=1166,Ms=1833,Ds=1702,Os=2541,Ps=671,Hs=1009,Rs=275,Ws=731,Ns=1167,$s=1836,Gs=1517,Us=1986,Xs="xZLj",js=1635,qs=513,Ks=1100,Vs=947,Ys="!3Qz",Qs=443,Zs=555,Js="rtkN",ei=211,ti=1659,ni="WjvE",si=1691,ii=1887,oi=3314,ai=2412,ri=3076,li=1578,ci=1098,pi=880,hi=2464,di=1906,ui=1939,_i=1972,mi=2453,gi=152,fi="^jyP",bi=946,Ci="X(di",yi=44,xi=284,Ai=1384,vi=1398,ki=1222,wi="9ROd",Bi=352,Li="zXbz",Si=178,zi="apzg",Fi=1145,Ti=966,Ii=381,Ei=61,Mi=272,Di="Qzoo",Oi=969,Pi="t@jS",Hi="j$uk",Ri=139,Wi="uUWF",Ni=1800,$i="zXbz",Gi=2075,Ui=1985,Xi=1692,ji=1468,qi=1768,Ki=1345,Vi=227,Yi=1120,Qi=735,Zi=10,Ji=786,eo=585,to=802,no=711,so=1631,io=1292,oo=1324,ao=2094,ro=1341,lo=1168,co=2120,po=1641,ho=570,uo=154,_o="9uOv",mo=94,go=2430,fo=1488,bo=2749,Co=1878,yo=1139,xo="!3Qz",Ao=367,vo=1190,ko=881,wo=500,Bo=1642,Lo="ZBp6",So=1825,zo=1841,Fo="rtkN",To=1452,Io=889,Eo=1624,Mo=1283,Do=1527,Oo=1705,Po=1478,Ho=1894,Ro=1161,Wo=861,No=18,$o="apzg",Go=357,Uo=2584,Xo=1155,jo="WCYY",qo=1016,Ko="qIb@",Vo=1918,Yo=71,Qo=391,Zo=422,Jo="PmF#",ea=1479,ta="08hj",na=2735,sa=1971,ia=379,oa=63,aa=2460,ra=2127,la=161,ca=847,pa=1714,ha=1413,da=2542,ua=1592,_a=2277,ma=1789,ga=2569,fa=194,ba="uUWF",Ca=1593,ya=2141,xa=517,Aa=660,va=379,ka=1278,wa=596,Ba=1072,La=1042,Sa=22,za=86,Fa=1828,Ta=2487,Ia=97,Ea="ECiW",Ma=441,Da=1171,Oa=887,Pa="zXbz",Ha=505,Ra=851,Wa="VlCh",Na=799,$a="5Hno",Ga=1160,Ua="xZLj",Xa=2027,ja=650,qa=6,Ka=479,Va=291,Ya=461,Qa=220,Za=484,Ja=313,er=467,tr=121,nr=192,sr=48,ir=253,or=226,ar={};function rr(e,t,n,s,i){return be(e-393,i- -772,n-or,s-57,t)}function lr(e,t,n,s,i){return be(e-tr,s-nr,n-sr,s-ir,n)}function cr(e,t,n,s,i){return ke(e-Za,t-496,s- -Ja,s-er,i)}function pr(e,t,n,s,i){return ke(e-Ka,t-Va,i-Ya,s-Qa,n)}function hr(e,t,n,s,i){return ke(e-19,t-414,s- -ja,s-qa,n)}ar[pr(e,t,n,1570,s)]=pr(1571,i,o,2393,2218)+cr(994,1046,1754,a,"uUWF")+"5",ar[cr(r,1916,2003,l,"8qu1")]=rr(733,"j$uk",328,c,1204)+cr(p,41,117,130,h),ar[hr(652,-504,"IfVL",-53,d)]=pr(u,2075,"q08X",2039,_),ar[lr(m,g,"apzg",1803,1593)]=cr(f,b,1148,735,"5Hno")+"s",ar[hr(C,y,"4[ec",1233,x)]=cr(A,1427,v,985,"PF26"),ar[pr(1924,k,B,1345,2261)]=cr(2376,L,0,S,z),ar[pr(F,T,"WjvE",411,I)]=hr(E,-511,"TKgk",M,-D)+"n",ar[lr(O,0,P,1121)]=hr(292,1045,H,R),ar[lr(W,0,"wEbn",N)]=rr(89,$,879,1624,G)+"e",ar[hr(369,-296,"L4X9",259)]=hr(1501,b,"zXbz",U)+cr(1631,1887,0,1107,"0SiJ"),ar[hr(X,j,q,K)]=rr(-V,Y,222,-Q,-Z)+cr(172,615,0,865,o),ar[pr(1703,1817,J,ee,te)]=cr(ne,se,0,788,ie)+cr(2476,2159,0,1629,"IfVL")+pr(1773,2700,"ECiW",3149,oe)+"e",ar[rr(892,"^jyP",ae,1777,re)]=pr(1032,1408,"H!o^",2143,le)+pr(ce,1246,pe,1910,he),ar[lr(2750,0,"^jyP",2121)]=rr(de,"qIb@",-390,586,345)+"m",ar[rr(-ue,_e,892,796,me)]=pr(1984,1127,ge,2192,1383),ar[pr(2293,3027,"0SiJ",2356,2414)]=cr(fe,Ce,0,ye,n),ar[hr(xe,506,"@j!&",Ae)]=hr(ve,437,we,636),ar[rr(1995,Be,249,1350,Le)]=lr(1332,0,Se,ze)+hr(146,-Fe,Ie,-20);const dr=ar,ur=dr[pr(Ee,Me,"azri",De,Oe)][cr(Pe,608,0,e,He)]("|");let _r=0;for(;;){switch(ur[_r++]){case"0":super[rr(Re,We,1955,$e,1516)+lr(Ge,0,"yora",2551)](dr[lr(1771,0,"apzg",2244)],[dr[rr(103,"H!o^",Ue,1622,Xe)],dr[pr(je,1246,"yora",qe,1247)],dr[pr(Ke,1254,H,Ve,1794)],dr[lr(1340,0,"t@jS",Ye)]]);continue;case"1":super[rr(-Qe,Ze,Je,et,794)+cr(tt,130,0,326,nt)](dr[lr(st,0,it,ot)],[dr[rr(-218,at,928,377,145)],dr[pr(169,rt,h,lt,ct)]]);continue;case"2":super[hr(pt,-507,"ZBp6",40)+cr(ht,590,0,1164,"5Hno")](dr[pr(dt,ut,_t,mt,gt)],[dr[cr(ft,bt,0,Ct,yt)],dr[hr(-55,xt,"08hj",889)],dr[lr(At,0,z,1064)],dr[pr(1142,1404,h,1820,vt)]]);continue;case"3":const e={};e[hr(447,kt,"ZBp6",1381)]=8,e[rr(wt,"ZBp6",483,-47,285)]=32,super[cr(-418,182,0,62,"zXbz")+pr(Bt,898,Lt,St,1304)+"y"](dr[cr(1126,1892,0,1138,zt)],e);continue;case"4":super[cr(-Ft,1128,0,Tt,"Qzoo")+cr(835,-3,0,It,"8qu1")](dr[hr(Et,Mt,"Qzoo",Dt)],[null,...w[hr(Ot,796,Pt,Ht)+hr(1376,824,Rt,466)]]);continue;case"5":const t={};t[cr(Wt,-365,0,Nt,"^jyP")]=dr[hr(319,-$t,"zXbz",Gt)],t[cr(1540,1717,0,Ut,"6[6j")]=Te[pr(Xt,jt,qt,Kt,2276)][cr(-Vt,Yt,0,Qt,"orc9")],t[lr(2344,0,"xZLj",2212)]=this[lr(Zt,0,"]KEn",2632)+hr(1888,en,tn,nn)];const n={};n[hr(sn,1084,"X(di",1149)]=dr[hr(-on,-an,rn,ln)],n[cr(2312,646,0,cn,"X(di")]=Te[hr(pn,669,"X(di",hn)][pr(dn,2593,"VlCh",un,2553)],n[lr(2066,0,_n,mn)]=this[lr(gn,0,fn,bn)];const s={};s[cr(yn,403,0,1010,"ZBp6")]=dr[lr(he,0,"8qu1",xn)],s[rr(2289,An,vn,1646,1624)]=Te[cr(325,1213,0,761,"ImC8")][cr(1437,kn,0,1859,"Y!uW")],s[hr(-wn,971,Bn,327)]=Ne[pr(Ln,Sn,"Y!uW",zn,1265)+rr(Fn,Tn,In,En,918)];const i={};i[cr(Mn,276,0,748,Dn)]=dr[rr(763,On,Pn,921,1469)],i[pr(Hn,706,Rn,1142,Wn)]=Te[cr(141,Nn,0,1001,"q08X")][rr(-482,"IfVL",462,-$n,Gn)],i[cr(790,Un,0,Xn,"@j!&")]=this[pr(jn,qn,"ZBp6",1960,Kn)];const o={};o[pr(Vn,Yn,Qn,3045,Zn)]=dr[cr(Jn,es,0,ts,Y)],o[cr(-338,1022,0,599,"rtkN")]=Te[rr(ns,"@j!&",ss,447,is)][hr(os,1997,"qIb@",as)],o[cr(-772,rs,0,ls,"apzg")]=this[pr(cs,ps,"BVMs",2421,1695)];const a={};a[cr(540,hs,0,ds,"X(di")]=dr[cr(us,645,0,545,"C#3#")],a[cr(1006,_s,0,691,"^jyP")]=Te[lr(2347,0,ms,gs)][rr(252,h,fs,-bs,Cs)],a[cr(ys,xs,0,1527,"08hj")]=this[rr(As,vs,ks,1111,787)+cr(-ws,103,0,53,"apzg")];const l={};l[lr(2199,0,"q08X",Bs)]=dr[lr(Ls,0,"PmF#",Ss)],l[lr(190,0,zs,ct)]=Te[rr(Fs,Ts,2012,Le,1551)][pr(2751,2197,Is,2176,Jt)],l[pr(2635,Es,"BVMs",2730,Ms)]=Ne[lr(Ds,0,Be,Os)+cr(1367,Ps,0,Hs,"Y!uW")];const c={};c[hr(-Rs,-Ws,"TKgk",-325)]=dr[lr(Ns,0,"5Hno",$s)],c[pr(Gs,Us,Xs,769,js)]=Te[pr(1078,1049,_t,qs,1447)][lr(Ks,0,"^jyP",1621)],c[rr(Vs,Ys,1032,Qs,Zs)]=16;const p={};p[hr(428,675,Js,ei)]=dr[lr(ti,0,ni,2374)],p[rr(si,Tn,885,ii,1456)]=Te[lr(oi,0,"TKgk",ai)][lr(ri,0,"TKgk",2524)+"g"];const d={};d[cr(li,ci,0,pi,"9ROd")]=dr[rr(hi,"WCYY",di,ui,1717)],d[rr(_i,"9ROd",mi,si,1627)]=Te[hr(518,gi,fi,bi)][lr(2209,0,Ci,1959)+"g"];const u={};u[hr(1011,-yi,"PF26",xi)]=dr[hr(694,1572,ge,Pn)],u[cr(Ai,2213,0,vi,"4[ec")]=Te[pr(ki,2060,wi,1154,1919)][rr(-Bi,Li,-Si,-307,419)+"g"];const _={};_[lr(1359,0,zi,2142)]=dr[cr(-916,-603,0,26,"yora")],_[pr(1070,Fi,"#GCG",Ti,999)]=Te[hr(-401,Ii,"C#3#",-Ei)][lr(Mi,0,Di,Oi)+"g"];const m={};m[lr(389,0,Pi,975)]=dr[hr(1085,1584,Hi,1454)],m[hr(Ri,89,Wi,-163)]=Te[rr(Ni,$i,Gi,Ui,Xi)][lr(ji,0,"(03]",qi)],m[cr(465,Ki,0,664,Bn)]=this[rr(Vi,Rn,101,1330,ft)+cr(Yi,731,0,575,"W3KH")+"e"];const g={};g[pr(Qi,1536,Rn,-Zi,Ji)]=dr[pr(1624,22,"xZLj",eo,to)],g[pr(no,so,vs,io,1039)]=Te[pr(1480,2484,Dn,oo,2001)][rr(2229,"08hj",1960,ao,ro)];const f={};f[cr(lo,co,0,W,"BYvL")]=dr[lr(1093,0,B,po)],f[hr(-ho,-uo,_o,-mo)]=Te[hr(1337,go,"VlCh",fo)][lr(bo,0,"WjvE",Co)],f[hr(yo,-422,xo,Ao)]=this[rr(Dt,"j$uk",vo,ko,X)+cr(wo,366,0,1155,zi)+"e"];const b={};b[lr(Bo,0,Lo,So)]=dr[lr(zo,0,Fo,2518)],b[rr(To,"ECiW",Io,2048,Eo)]=Te[cr(435,1693,0,Mo,"^jyP")][cr(2176,1170,0,1421,"0SiJ")];const C={};C[rr(Do,"sZ[B",Oo,691,Po)+"n"]=t,C[pr(Ho,Ro,ni,1117,1096)]=n,C[cr(269,Wo,0,-No,"t@jS")]=s,C[hr(-Fe,-590,$o,-Go)]=i,C[pr(1785,2622,"yora",1959,Uo)]=o,C[lr(Xo,0,jo,qo)+rr(1756,Ko,Vo,1588,1374)]=a,C[cr(Yo,-Qo,0,Zo,Jo)+"n"]=l,C[hr(1692,r,"azri",1420)]=c,C[pr(1535,ea,ta,na,sa)+"t"]=p,C[cr(2122,2057,0,1386,"W3KH")+hr(-ia,649,fi,-oa)]=d,C[pr(3051,aa,"j$uk",2659,ra)+cr(la,ca,0,876,q)]=u,C[cr(pa,1737,0,ha,"sZ[B")+"r"]=_,C[pr(da,ua,Ci,_a,2479)+lr(ma,0,"C#3#",ga)+hr(fa,506,ba,-195)+pr(Ca,ya,Js,1775,1373)]=m,C[hr(327,xa,Ie,Aa)+rr(1848,"rtkN",950,va,ka)+pr(wa,Ba,"W3KH",180,La)+cr(-Sa,-za,0,468,"q08X")]=g,C[rr(208,"#GCG",723,-Qo,-oa)+lr(Fa,0,"9uOv",Ta)+rr(474,"PF26",398,Ia,Cn)+lr(3069,0,Ea,2588)]=f,C[pr(Ma,309,ta,427,1008)+lr(Da,0,"ECiW",Oa)+rr(309,Pa,-365,936,Ha)+lr(Ra,0,Wa,991)]=b,super[cr(-Bi,Na,0,300,$a)+lr(Ga,0,Ua,Xa)+"re"](C);continue}break}}}class Ke extends Ee{static[be(-8,717,-206,763,"9uOv")](){const e=2968,t="6[6j",n=1683,s=2185,i=3039,o=3052,a=443,r=975,l=428,c=1291,p="L4X9",h=754,d="ZBp6",u=1509,_=2196,m=2870,g="C#3#",f=528,b=2729,C="BVMs",y="ImC8",x=852,A="@j!&",v=281,k=388,w="IPZB",B=1320,L=846,S="j$uk",z=422,F=265,T="!3Qz",I=134,E=851,M=2642,D=1658,O="ImC8",P=3065,H=1698,R=1983,W=1771,N="H!o^",$=945,G=1218,U=1628,X="wEbn",j=1765,q=1655,K=2111,V="!3Qz",Y=252,Q=876,Z=1678,J="9uOv",ee=951,te=958,ne=1020,se="sZ[B",ie="VlCh",oe=1212,ae=1640,re="!3Qz",le="PF26",ce=512,pe=1119,he=514,de=556,ue="orc9",_e=10,me=522,ge="qIb@",fe=876,Ce=1460,ye=618,xe=1050,Ae=668,ve=1549,we=1609,Be=1535,Le=1415,Se=999,ze=1613,Te="ECiW",Ee=1823,Me=1306,De=1260,Oe=1008,Pe=1176,He=10,Re=759,We="PF26",Ne=394,$e=348,Ge="zXbz",Ue=2358,Xe=1867,je=1880,qe=1810,Ke=334,Ve="IfVL",Ye=484,Qe=1422,Ze="q08X",Je=1196,et="!3Qz",tt=66,nt=173,st=351,it=160,ot=1446,at=126,rt=1001,lt=35,ct=251,pt=324,ht={};function dt(e,t,n,s,i){return be(e-495,t- -946,n-ct,s-pt,e)}function ut(e,t,n,s,i){return ke(e-at,t-226,n- -rt,s-lt,e)}function _t(e,t,n,s,i){return Ie(e-st,t-it,s,s-370,n-ot)}ht[_t(1891,337,1179,"5Hno",849)]=_t(1635,e,2429,t,n),ht[_t(s,2010,2152,"@j!&",2972)]=_t(3838,2117,i,"PEOQ",o)+"ge",ht[gt(653,a,r,"VlCh",l)]=_t(1010,396,c,p,h),ht[gt(2433,1841,2434,d,u)]=_t(_,2246,m,"8qu1",2584),ht[ut(g,f,254,-602,1104)]=_t(b,2390,2388,C,1867),ht[dt(y,-238,-759,-15,-x)]=dt(A,v,-k,276,-275),ht[dt(w,B,L,1088,436)]=ut(S,-z,-F,542,97)+ut(T,I,16,-E,-491),ht[ft(M,2403,D,O,P)]=ft(1893,H,R,"PEOQ",W)+dt(N,$,G,U)+"e",ht[_t(1703,1802,2314,X,j)]=ft(2447,q,K,V,2117)+gt(Y,Q,Z,J,1704)+"e",ht[ut("Qzoo",ee,te,ne,513)]=_t(1805,2537,1911,se,2416)+dt(ie,342,-262,oe),ht[gt(1141,ae,2104,re,1096)]=ut(le,ce,pe,he,de)+dt(ue,_e,me,248),ht[dt(ge,fe,Ce,1459)]=gt(935,218,ye,"orc9",414)+_t(xe,Ae,ve,"X(di")+"s";const mt=ht;function gt(e,t,n,s,i){return Fe(e-362,t-281,n-159,t-nt,s)}function ft(e,t,n,s,i){return Fe(e-tt,t-450,n-67,t-777,s)}super[ft(we,Be,Le,"uUWF")+ft(Se,ze,1056,Te)](mt[gt(Ee,1212,Me,p)],[mt[_t(De,Oe,Pe,"WjvE")],mt[gt(He,Re,61,We)],mt[gt(895,Ne,$e,Ge)],mt[ft(2514,2052,Ue,N)],mt[_t(1653,Xe,2151,"zXbz")],mt[gt(2090,je,1098,"IPZB")],mt[ut("W3KH",qe,1025,Ke)],mt[ut(Ve,666,704,Ye)],mt[dt("TKgk",1016,Qe,412)],mt[dt(Ze,1444,Je,797)],mt[gt(187,1035,1801,et)]])}static[Ie(-768,518,"azri",-442,-240)+"e"](e,{type:t,data:n}){switch(e.writeTable(t,this.$$type),t){case"garbage":return e.writeStruct(n,je);case"map":return e.writeStruct(n.map,Ve),e.writeUInt(n.w,Ne.MAX_WIDTH),e.writeUInt(n.h,Ne.MAX_HEIGHT);case"queue":return e.writeBoolean(n.start),e.writeString(n.queue.toString());case"piece":return e.writeString(n.piece);case"lines":return e.writeStruct(n,qe);case"boardsize":case"boardresize":return e.writeUInt(n.w,Ne.MAX_WIDTH),e.writeUInt(n.h,Ne.MAX_HEIGHT);case"holderstate":case"constants":return e.pack(n);case"setoptions":return e.writeStruct(n.options,Qe);case"tetrominoes":return e.writeStruct(n,Ye)}}static[Fe(-77,-283,260,118,"BVMs")+"e"](e){const t={};switch(t.type=e.readTable(this.$$type),t.data={},t.type){case"garbage":t.data=e.readStruct(je);break;case"map":t.data.map=e.readStruct(Ve),t.data.w=e.readUInt(Ne.MAX_WIDTH),t.data.h=e.readUInt(Ne.MAX_HEIGHT);break;case"queue":t.data.start=e.readBoolean(),t.data.queue=e.readString().split(",");break;case"piece":t.data.piece=e.readString();break;case"lines":t.data=e.readStruct(qe);break;case"boardsize":case"boardresize":t.data.w=e.readUInt(Ne.MAX_WIDTH),t.data.h=e.readUInt(Ne.MAX_HEIGHT);break;case"holderstate":case"constants":t.data=e.unpack();break;case"setoptions":t.data.options=e.readStruct(Qe);break;case"tetrominoes":t.data=e.readStruct(Ye)}return t}}class Ve extends Ee{static[Fe(81,831,793,330,"X(di")](){const e=86,t="Qzoo",n=830,s=2372,i=1320,o=1440,a="Y!uW",r=1471,l=1622,c=975,p=1606,h=200,d="rtkN",u=523,_=8,m="Y!uW",g=1471,f=1872,b=798,C="orc9",y=1518,x="azri",A=398,v="5Hno",k=2289,w=2342,B=1983,L=1223,S="VlCh",z=2851,F=1745,T=2006,I="WjvE",E=334,M=199,D="6[6j",O=102,P=359,H=344,R=156,W=218,N=1353,$=373,G=8,U=18,X=372,j=227;function q(e,t,n,s,i){return Fe(e-$,t-G,n-U,n-748,i)}const K={};function V(e,t,n,s,i){return et(e-61,t-W,n,s-325,e- -N)}K[V(-325,372,"sZ[B",-180,-603)]=V(e,845,t,936,-n)+"rs",K[q(s,i,o,0,"q08X")]=q(1747,1265,1361,0,a)+ee(r,l,c,p,"orc9"),K[V(h,223,d,270)]=V(u,-_,"8qu1",1030);const Y=K;var Q,Z,J;function ee(e,t,n,s,i){return et(e-P,t-51,i,s-H,e-R)}super[(Q=2601,Z=m,J=2725,ke(Q-X,Z-j,J-628,J-349,Z)+ee(g,f,b,876,C))](Y[ee(2198,y,1985,2792,x)],["?",",","_","#","@","z","l","o","s","i","j","t","g","d"],Y[V(A,1016,"W3KH",371)]);const te={};te[q(1410,1956,1219,0,v)]=16,te[q(k,2518,w,0,"VlCh")]=32,super[ee(B,L,0,1544,S)+q(z,F,T,0,I)+"y"](Y[V(-E,M,D,-O)],te)}static[ke(281,1254,408,1296,"j$uk")+"e"](e,t){const n=t.split("");e.writeDInt(n.length,this.$word);for(const t of n)e.writeTable(t,this.$$letters)}static[et(521,651,"azri",325,1129)+"e"](e){let t="";const n=e.readDInt(this.$word);for(let s=0;s<n;s++){t+=e.readTable(this.$$letters)}return t}}class Ye extends Ee{static[Ie(259,1193,"VlCh",-12,711)](){const e="08hj",t=3219,n=1078,s=2476,i=1661,o=1925,a=2785,r="IfVL",l=1200,c=2116,p="!3Qz",h=375,d=2153,u=2439,_="ECiW",m=69,g=572,f=411,b=1215,C=1933,y="q08X",x=1432,A=1653,v=1010,k=1029,B=1539,L=2564,S="8qu1",z=1205,F=1646,T=736,I="WjvE",E="W3KH",M=1478,D=1185,O=2353,P=1549,H=386,R="qIb@",W=731,N=205,$=226,G="9uOv",U=2342,X=1975,j=265,q=946,K=1126,V=55,Y=2846,Q=2755,Z=685,J=1597,ee=160,te=236,ne=489,se=526,ie=2941,oe=3752,ae=1709,re="ZBp6",le=126,ce=796,pe="PF26",he="W3KH",de=1479,ue=2359,_e=153,me="Qzoo",ge=486,fe=2307,be=2890,Ce=2596,ye=554,xe="ZBp6",Ae="zXbz",ve=587,ke=798,we=151,Be="qIb@",Le=5,Se=46,ze="C#3#",Te=75,Ee=843,Me="rtkN",De=1304,Oe=1010,Pe="j$uk",He=501,Re=149,We="BYvL",Ne=322,$e=1206,Ge=8,Ue=96,Xe=99,je=151,qe=820,Ke=338,Ve=213,Ye=60,Qe=135,Ze={};function Je(e,t,n,s,i){return Ie(e-385,t-41,e,s-62,i-1375)}function et(e,t,n,s,i){return Ie(e-Ye,t-Qe,t,s-392,i-381)}function tt(e,t,n,s,i){return Ie(e-Ke,t-Ve,e,s-68,t-1418)}Ze[Je(e,3350,3306,2784,2573)]=Je("#GCG",2662,2045,t,2858)+Je("9ROd",n,s,i,o),Ze[tt("6[6j",a,3025,2575,2828)]=Je(r,2676,0,l,c),Ze[st(p,-h,-243,-305,-1310)]=tt("9uOv",d,0,u)+tt("6[6j",2733,0,2597),Ze[st(_,m,-g,-480,-f)]=it(1830,1159,"XRtz",b,C)+Je(y,x,0,998,A),Ze[it(v,k,"BVMs",922,B)]=Je("Qzoo",2395,0,2710,L)+"s",Ze[tt(S,z,0,F)]=it(T,90,I,332,191)+tt(E,M,0,D),Ze[it(O,1544,"qIb@",P,954)]=et(H,R,0,W,890)+"al";const nt=Ze;function st(e,t,n,s,i){return Fe(e-33,t-326,n-je,t- -qe,e)}function it(e,t,n,s,i){return Ie(e-Ge,t-Ue,n,s-Xe,t-7)}const ot=nt[it(N,$,"qIb@",1115)][Je(E,2493,0,3799,2892)]("|");let at=0;for(;;){switch(ot[at++]){case"0":const t={};t[tt(G,U,0,X)]=3,t[et(j,R,0,804,q)]=7,super[Je("IPZB",1410,0,K,1923)+st("0SiJ",-771,V)+"y"](nt[tt(r,Y,0,Q)],t);continue;case"1":super[et(2008,"IPZB",0,Z,J)+st(E,ee,te)](nt[et(-ne,"L4X9",0,-se,195)],[...Object[tt(G,ie,0,oe)](w[it(ae,937,re,127)+it(-le,ce,pe,85)])],nt[Je(he,de,0,3262,ue)]);continue;case"2":super[tt("ECiW",1707,0,868)+it(-390,_e,me,-ge)](nt[Je("IPZB",2849,0,fe,be)],[...w[tt("9uOv",Ce,0,1689)+it(ye,827,xe,1281)]]);continue;case"3":super[et(417,Ae,0,78,562)+it(-327,ve,e,94)](nt[it(ke,we,Be,-Le)],[...Object[it(-Se,-165,ze,4)](w[st("PmF#",-Te,Ee)+et(1708,Me,0,De,1060)+it(1424,1028,"apzg",Oe)+"es"])],nt[st(Pe,He,-Re)]);continue;case"4":super[et(1966,We,0,1489,1146)+st("#GCG",Ne,$e)](nt[tt(Be,2955,0,2870)],["i","i2","i3","l3","i5","oo"]);continue}break}}static[Ie(624,498,"orc9",243,540)+"e"](e,t){const n=t.tetrominoes,s=t.minotypes,i=t.tetrominoes_color,o=Object.keys(n);e.writeUInt(o.length,8);for(const t of o)e.writeString(t);for(const[t,o]of Object.entries(n)){const{matrix:n,preview:a}=o;e.writeDInt(n.w,this.$tiny),e.writeDInt(n.h,this.$tiny),e.writeUInt(n.dx,5),e.writeUInt(n.dy,5),e.writeDInt(n.data[0].length,this.$tiny);const[r,l]=[Te.cla32(n.w-1),Te.cla32(n.h-1)];for(const t of n.data)for(const[n,s]of t)e.writeUInt(n,r),e.writeUInt(s,l);e.writeDInt(a.w,this.$tiny),e.writeDInt(a.h,this.$tiny);for(const[t,n]of a.data)e.writeUInt(t,r),e.writeUInt(n,l);e.writeBoolean(void 0!==o.weight),e.writeBoolean(o.spinbonus_override),e.writeBoolean(o.kickset_override),e.writeBoolean(o.kickset_special),e.writeBoolean(s.includes(t)),e.writeTable(i[t],this.$$colors),void 0!==o.weight&&e.writeDInt(o.weight,this.$tiny),o.spinbonus_override&&(e.writeTable(o.spinbonus_override.rule,this.$$spinbonus),e.writeBoolean(o.spinbonus_override.mini)),o.kickset_override&&e.writeTable(o.kickset_override,this.$$kicksets),o.kickset_special&&e.writeTable(o.kickset_special,this.$$special)}}static[ke(448,3,729,447,"08hj")+"e"](e){const t={},n=[],s={},i=e.readUInt(8),o=[];for(let n=0;n<i;n++){const n=e.readString();t[n]={matrix:{},preview:{}},o.push(n)}for(const i of o){const o=t[i],{matrix:a,preview:r}=o;a.w=e.readDInt(this.$tiny),a.h=e.readDInt(this.$tiny),a.dx=e.readUInt(5),a.dy=e.readUInt(5);const l=e.readDInt(this.$tiny),[c,p]=[Te.cla32(a.w-1),Te.cla32(a.h-1)];a.data=[];for(let t=0;t<4;t++){a.data[t]=[];for(let n=0;n<l;n++){const[s,i]=[e.readUInt(c),e.readUInt(p)];a.data[t][n]=[s,i]}}r.w=e.readDInt(this.$tiny),r.h=e.readDInt(this.$tiny),r.data=[];for(let t=0;t<l;t++){const[n,s]=[e.readUInt(c),e.readUInt(p)];r.data[t]=[n,s]}const h=e.readBoolean(),d=e.readBoolean(),u=e.readBoolean(),_=e.readBoolean(),m=e.readBoolean();s[i]=e.readTable(this.$$colors),h&&(o.weight=e.readDInt(this.$tiny)),d&&(o.spinbonus_override={rule:e.readTable(this.$$spinbonus),mini:e.readBoolean()}),u&&(o.kickset_override=e.readTable(this.$$kicksets)),_&&(o.kickset_special=e.readTable(this.$$special)),m&&n.push(i)}return{minotypes:n,tetrominoes:t,tetrominoes_color:s}}}class Qe extends Ee{static[Ie(229,-252,"8qu1",513,444)+Ie(-693,317,"5Hno",655,-286)]=[ke(1432,167,1092,720,"BYvL")+"an",Ie(1716,1220,"t@jS",816,883)+"r",ke(1588,1094,897,403,"IPZB"),ke(796,754,929,535,"0SiJ")+"t",et(2136,2332,"W3KH",1768,1665),Ie(1013,1522,"TKgk",23,814)+"g"];static[ke(2385,1641,1593,1552,"L4X9")+ke(581,1161,584,1490,"XRtz")]=ge[Fe(165,760,576,927,"azri")+Ie(1143,529,"^jyP",1526,642)+"t"];static[be(1334,1066,1105,1904,"]KEn")](){const e=584,t=994,n=2009,s="8qu1",i=497,o=144,a=1081,r=2553,l=38,c=847,p="yora",h=55,d="IPZB",u=248,_=1953,m=2671,g=2228,f=2599,b=3033,C=1958,y=1157,x=2459,A=2382,v=1814,k="yora",w=1786,B="!3Qz",L=2478,S=2370,z=1779,F=2151,T=660,I="@j!&",E=2529,M="q08X",D=2560,O=1196,P=1724,H=1482,R=1059,W="orc9",N=1129,$=1074,G="H!o^",U=1948,X=1633,j=1286,q=2203,K="]KEn",V=1705,Y=1544,Q=874,Z="PEOQ",J=2883,ee=334,te=631,ne=655,se="sZ[B",ie=1558,oe=904,ae=621,re="ImC8",le=1178,ce=559,pe=319,he=355,de="8qu1",ue=494,_e=263,me=106,ge=1481,fe="5Hno",Ce=903,ye=414,xe=204,Ae=234,ve="BVMs",we=2451,Be=2798,Le=1414,Se=1959,ze=1365,Te=1071,Ie=267,Ee="apzg",Me=1144,De=2527,Oe=2494,Pe=3121,He=1633,Re=991,We=1494,Ne=952,$e="5Hno",Ge=2001,Ue="!3Qz",Xe=886,je=233,qe=26,Ke="!3Qz",Ve=124,Ye="@j!&",Qe=1840,Ze=901,Je=5,tt=716,nt="rtkN",st=105,it=31,ot=950,at=854,rt=299,lt=801,ct=1227,pt=1278,ht=1505,dt=1962,ut=2173,_t=1623,mt=1570,gt="ZBp6",ft=1158,bt=1366,Ct=1076,yt=390,xt=788,At=489,vt=169,kt="(03]",wt=2334,Bt="5Hno",Lt="@j!&",St=444,zt=696,Ft=190,Tt=62,It="Qzoo",Et=2341,Mt=533,Dt="PmF#",Ot=1040,Pt=2619,Ht=191,Rt=69,Wt=918,Nt=1006,$t=1553,Gt=2588,Ut=1574,Xt="Qzoo",jt=1607,qt=805,Kt=274,Vt=1049,Yt=1171,Qt=1650,Zt=645,Jt="PF26",en="qIb@",tn=218,nn=2217,sn=450,on="wEbn",an=525,rn=248,ln="yora",cn=617,pn="0SiJ",hn=2657,dn=1046,un=863,_n=484,mn=1254,gn=2028,fn=3,bn=651,Cn=775,yn=2594,xn=2131,An=802,vn=736,kn=2139,wn=670,Bn=194,Ln=163,Sn=159,zn=74,Fn=444,Tn=843,In=496,En=103,Mn=292,Dn=198,On=760,Pn={};function Hn(e,t,n,s,i){return Fe(e-En,t-Mn,n-Dn,e- -On,t)}function Rn(e,t,n,s,i){return ke(e-9,t-47,e- -702,s-In,n)}Pn[$n("xZLj",1327,e,t,n)]=Hn(-206,s,i,-o,507)+"ns",Pn[$n("W3KH",1220,1033,a,461)]=Nn(r,"WCYY",1846,2781,2064)+Rn(l,c,p,-175,h),Pn[Hn(-73,d,-u)]=Nn(_,"08hj",m,1842,3544),Pn[$n("6[6j",g,f,2599,b)]=Nn(2450,"XRtz",C,1525,y),Pn[Nn(1748,"PmF#",x,1774,A)]=Nn(v,k,w,1173,2278)+$n(B,L,1870,3176,S),Pn[Nn(z,"wEbn",F,2325,2189)]=Gn(152,T,412,1191,I),Pn[Nn(E,M,2571,D,2811)]=Gn(O,P,H,R,W)+"o",Pn[Rn(N,$,G,U,1953)]=Nn(X,"ECiW",j,1634,q)+"s",Pn[$n(K,V,U,918,2473)]=$n("H!o^",Y,1294,Q,878)+Nn(1396,Z,2060,1404,J)+Rn(ee,te,"uUWF",463,ne),Pn[$n(se,ie,oe,ae,665)]=$n(re,1046,le,1646,1829),Pn[Hn(ce,"TKgk",1356)]=Rn(-pe,he,de,ue,_e),Pn[Rn(971,78,"sZ[B",1147,345)]=Rn(-me,676,"azri",773,-444),Pn[$n("PF26",2120,2940,1377,1173)]=Gn(327,541,ge,-292,fe),Pn[Gn(Ce,ye,-xe,-Ae,"ECiW")]=function(e,t){return e!==t},Pn[$n(ve,we,2655,2943,Be)]=Nn(Le,"L4X9",Se,1082,1163),Pn[$n("WCYY",991,ze,672,Te)]=Hn(Ie,Ee,824),Pn[Hn(Me,"X(di",433)]=function(e,t){return e===t},Pn[Nn(De,"@j!&",Oe,1644,Pe)]=Nn(He,K,Re,We,Ne),Pn[Hn(-380,"(03]",-615)]=Hn(170,$e,161);const Wn=Pn;function Nn(e,t,n,s,i){return Fe(e-Fn,t-46,n-278,n-Tn,t)}function $n(e,t,n,s,i){return et(e-147,t-384,e,s-Sn,t- -zn)}function Gn(e,t,n,s,i){return be(e-233,t- -wn,n-Bn,s-Ln,i)}super[Nn(2042,"@j!&",Ge)+$n(Ue,L,1799,2479,3208)](Wn[Gn(Xe,je,295,qe,"IPZB")],Object[Rn(831,1599,Ke,757)](this[Hn(-Ve,Ye,317)+$n("W3KH",Qe,Ze,1271,1660)])),super[Hn(Je,Ee,588)+Hn(tt,nt,325)](Wn[Gn(-st,-it,-669,-685,"TKgk")],["i","j","l","o","s","t","z",Wn[Gn(ot,at,rt,815,"XRtz")],Wn[Gn(-79,lt,801,ct,"yora")]],Wn[Gn(pt,ht,801,dt,"PmF#")]),super[$n("xZLj",ut,_t,mt,2596)+Hn(1066,gt,ft)](Wn[Nn(bt,"j$uk",Ct)],[Wn[Nn(990,"(03]",1931)],Wn[Rn(1128,yt,"BYvL",1955)],Wn[Gn(-804,34,-461,538,"orc9")]],Wn[Hn(-630,"uUWF",-xt)]),super[Gn(At,330,vt,523,"ZBp6")+$n(kt,1412,0,wt)](Wn[$n(Bt,1295,0,1625)],[Wn[$n(Lt,1035,0,879)],Wn[Gn(St,zt,Ft,-Tt,"PmF#")],Wn[$n(It,2728,0,Et)]]);for(const[e,t]of Object[Rn(-374,-Mt,Dt,-Ot)+"es"](this[Nn(1903,"PmF#",Pt)+Rn(Ht,656,"ImC8",Rt)]))if(Wn[$n("j$uk",Wt,0,Nt)](Wn[$n("yora",2687,0,2646)],Wn[Nn(1661,"5Hno",Gt)])){if(t[Nn(Ut,Xt,jt)+"ed"]){if(!Wn[Hn(qt,"sZ[B",-58)](Wn[Rn(-Kt,122,"H!o^",-Vt)],Wn[Gn(469,1270,Yt,Qt,"]KEn")]))return CheN.decode(this);super[Hn(-Zt,Jt,-$t)+$n(en,1065,0,tn)]("_"+e,t[Nn(nn,"]KEn",1562)+"ed"])}else if(t[Rn(sn,737,on,an)+$n("azri",1634,0,1846)]){if(Wn[Hn(-rn,ln,cn)](Wn[$n(pn,hn,0,3573)],Wn[Hn(dn,"0SiJ",un)]))return this[Nn(_n,"]KEn",mn)+$n("X(di",gn,0,1481)];super[Hn(-fn,"sZ[B",bn)+Rn(Cn,881,"5Hno",488)]("_"+e,t[$n(It,yn,0,xn)+Rn(-5,An,"9ROd",-932)],Wn[Gn(vn,1271,1301,kn,"@j!&")])}}else{const e={},t=KaGUYa.readUInt(8);ClOWNpiece[ReIMU]=e;for(let n=0;n<t;n++){const t=DoREMy.readTable(this.$$minoskin),n=SaNAE.readTable(this.$$skins);e[t]=n}}}static*[be(1865,1482,559,1400,"WCYY")+Ie(-93,984,"uUWF",373,295)+"ns"](e){const{TypeOrders:t,OptsBook:n}=this,s=Object.keys(e);for(const i of t)for(const t of s){const s=n[t];if(s.type!==i)continue;const o=e[t];yield[t,o,s]}}static[ke(726,2144,1304,2105,"ZBp6")+"e"](e,t){for(const[n,s,i]of this.ParseOptions(t))switch(e.writeTable(n,this.$$options),i.type){case"object":if("handling"===n)e.writeFloat(s.arr,6,10),e.writeUInt(s.sdf,6),e.writeBoolean(s.safelock),e.writeBoolean(s.cancel),e.writeBoolean(s.may20g),e.writeFloat(s.das,8,10),e.writeFloat(s.dcd,8,10),e.writeTable(s.irs,this.$$ixs),e.writeTable(s.ihs,this.$$ixs);else if("minoskin"===n){e.writeUInt(Object.keys(s).length,8);for(const[t,n]of Object.entries(s))e.writeTable(t,this.$$minoskin),e.writeTable(n,this.$$skins)}break;case"array":e.writeArray(s);break;case"boolean":e.writeBoolean(s);break;case"table":e.writeTable(s,this[`$$_${n}`],i.mode);break;case"number":e.writeNumber(s);break;case"string":e.writeString(s);break;default:throw new TypeError(`Unknown type for key: ${n} value: ${s} | got -> ${i.type}`)}e.writeTable(null,this.$$options)}static[Ie(605,-329,"L4X9",485,506)+"e"](e){const t=this.$$options.size,n=this.OptsBook,s={};let i=null,o=null;for(let a=e.peek(t);0!==a;a=e.peek(t)){const t=e.readTable(this.$$options),a=n[t]?.type;switch(a){case"object":if("handling"===t){const n={};n.arr=e.readFloat(6,10),n.sdf=e.readUInt(6),n.safelock=e.readBoolean(),n.cancel=e.readBoolean(),n.may20g=e.readBoolean(),n.das=e.readFloat(8,10),n.dcd=e.readFloat(8,10),n.irs=e.readTable(this.$$ixs),n.ihs=e.readTable(this.$$ixs),s[t]=n}else if("minoskin"===t){const n={},i=e.readUInt(8);s[t]=n;for(let t=0;t<i;t++){const t=e.readTable(this.$$minoskin),s=e.readTable(this.$$skins);n[t]=s}}break;case"array":s[t]=e.readArray();break;case"boolean":s[t]=e.readBoolean();break;case"table":s[t]=e.readTable(this[`$$_${t}`]);break;case"number":s[t]=e.readNumber();break;case"string":s[t]=e.readString();break;default:throw console.error("Options dump: ",s),new TypeError(`Unknown type for key: ${t} | got -> ${a}\nLast Key: ${i}\nLast Value: ${o}\n`)}i=t,o=s[t]}return e.seek(t,2),s}}class Ze extends Qe{static*[ke(1708,1582,1824,1292,"ZBp6")+ke(2109,2120,1424,1725,"IfVL")+"ns"](e){for(const[n,s,i]of super.ParseOptions(e))i.default!==s&&("object"===i.type&&t.strictShallowEqual(i.default,s)||(yield[n,s,i]))}}class Je extends Ee{static[et(2148,857,"(03]",2160,1440)](){const e=195,t=989,n=1038,s=499,i=677,o=2258,a="yora",r=2960,l=2118,c="qIb@",p=1689,h=1256,d=386,u="H!o^",_=207,m="9uOv",g=1104,f=741,b=683,C=439,y="ImC8",x=686,A=662,v="VlCh",k=1492,w=1805,B=979,L=2151,S="Y!uW",z=851,F=1388,T="XRtz",I=136,E=707,M=1170,D=401,O=380,P=3099,H=3618,R=3600,W=94,N=843,$="6[6j",G=265,U=2809,X=2173,j=2243,q=1504,K=2384,V="]KEn",Y=1716,Q="sZ[B",Z=3240,J=2428,ee="XRtz",te="qIb@",ne=1998,se=3100,ie=221,oe="q08X",ae=1392,re=556,le=440,ce="j$uk",pe=1945,he=1594,de=1775,ue=1210,_e=990,me=1518,ge=424,fe="(03]",Ce=1885,ye=2774,xe=2302,Ae="TKgk",ve=2321,ke=1358,we="IPZB",Be=2786,Le=2075,Se="X(di",ze=1047,Te=966,Ie=1710,Ee="9uOv",Me="WjvE",De=1443,Oe=1747,Pe=2025,He=2757,Re="apzg",We=1579,Ne="4[ec",$e=1499,Ge=168,Ue="TKgk",Xe=3,je=946,qe="PF26",Ke=1566,Ve=1636,Ye="!3Qz",Qe=2722,Ze=103,Je=101,tt=52,nt=739,st=1,it=29,ot=212,at=98,rt=227,lt=106,ct=472,pt=411;function ht(e,t,n,s,i){return et(e-33,t-ct,n,s-pt,t- -1615)}const dt={};function ut(e,t,n,s,i){return be(e-at,s- -rt,n-lt,s-327,i)}dt[gt(622,-59,131,"WCYY",0)]=gt(617,-e,t,"IPZB",n),dt[ht(403,-s,"WCYY",-i)]=ft(1948,2604,1748,o,a)+"t",dt[ut(1154,r,l,2072,c)]=bt("@j!&",p,h,1361,1677)+gt(-d,101,-1068,u,-_)+"sh",dt[bt(m,2053,1544,g,f)]=ht(b,C,y,x)+"h",dt[gt(A,626,603,v,k)]=ut(w,B,L,1373,S),dt[ut(z,2289,458,F,T)]=ft(I,E,981,63,"ImC8")+ut(336,M,D,O,"PF26")+"ar",dt[ft(P,H,2797,R,"uUWF")]=ht(W,N,$,G)+"r",dt[ft(1344,U,X,j,"rtkN")]=ut(q,925,K,1751,V)+"it",dt[ft(1933,3457,2571,Y,Q)]=ut(1111,1837,848,1619,"^jyP"),dt[ft(2654,Z,2412,J,ee)]=bt(te,ne,2205,se,2370),dt[gt(632,-ie,696,oe,702)]=ft(ae,re,1357,le,ce)+"ow",dt[ut(1914,0,2168,pe,"IPZB")]=bt("BVMs",he,de,ue,1339)+ft(_e,me,1159,ge,"ZBp6");const _t=dt,mt={};function gt(e,t,n,s,i){return be(e-149,e- -1005,n-it,s-ot,s)}function ft(e,t,n,s,i){return et(e-442,t-105,i,s-209,n- -st)}function bt(e,t,n,s,i){return Fe(e-Ze,t-Je,n-tt,n-nt,e)}mt[ut(-128,0,-281,445,fe)+ft(Ce,ye,2142,xe,Ae)]=!0,super[ut(ve,0,ke,2111,we)+ft(3341,2195,Be,Le,Se)+"on"](this,mt),super[ft(512,ze,Te,Ie,Ee)+bt(Me,ke,1832)](_t[bt("zXbz",1402,1596)],[null,_t[bt("wEbn",1574,De)],_t[ft(3060,Oe,2488,1882,we)],_t[ft(2055,2480,Pe,He,Re)],_t[ft(We,1625,2443,2985,m)],_t[ht(-196,276,Ne,-D)],_t[bt("wEbn",$e,1057)],_t[gt(-32,0,Ge,Ue)],_t[ut(551,0,Xe,je,"PEOQ")],_t[bt(qe,Ke,Ve)],_t[bt(Ye,99,1022)],_t[ft(2196,2083,Qe,2026,"X(di")]])}static[Fe(728,865,1444,952,"BYvL")+"e"](e,t){const n=t.successful,s=t.gameoverreason,i=t.killer.gameid,o="spark"===t.killer.type,a=t.killer.username??"",{apm:r,pps:l,vsscore:c}=t.aggregatestats,{game:p,stats:h,diyusi:d}=t;e.writeBoolean(n),e.writeTable(s,this.$$gor),e.writeUInt(i,13),e.writeBoolean(o,1),e.writeString(a),e.writeStruct(t.options,Ze),e.writeDouble(r),e.writeDouble(l),e.writeDouble(c),e.writeStruct({game:p,stats:h,diyusi:d},We)}static[et(1837,2452,"ZBp6",2878,2568)+"e"](e){const t={killer:{},aggregatestats:{}};return t.successful=e.readBoolean(),t.gameoverreason=e.readTable(this.$$gor),t.killer.gameid=e.readUInt(13),t.killer.type=e.readBoolean()?"spark":"sizzle",t.killer.username=e.readString(),t.options=e.readStruct(Ze),t.aggregatestats.apm=e.readDouble(),t.aggregatestats.pps=e.readDouble(),t.aggregatestats.vsscore=e.readDouble(),Object.assign(t,e.readStruct(We)),t}}function et(e,t,n,s,i){return Be(i-749,n)}function tt(e,t){const n=nt();return tt=function(t,s){let i=n[t-=434];if(void 0===tt.gZXmrB){tt.qBmpOs=function(e,t){let n,s,i=[],o=0,a="";for(e=function(e){let t="",n="";for(let n,s,i=0,o=0;s=e.charAt(o++);~s&&(n=i%4?64*n+s:s,i++%4)?t+=String.fromCharCode(255&n>>(-2*i&6)):0)s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(let e=0,s=t.length;e<s;e++)n+="%"+("00"+t.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(n)}(e),s=0;s<256;s++)i[s]=s;for(s=0;s<256;s++)o=(o+i[s]+t.charCodeAt(s%t.length))%256,n=i[s],i[s]=i[o],i[o]=n;s=0,o=0;for(let t=0;t<e.length;t++)s=(s+1)%256,o=(o+i[s])%256,n=i[s],i[s]=i[o],i[o]=n,a+=String.fromCharCode(e.charCodeAt(t)^i[(i[s]+i[o])%256]);return a},e=arguments,tt.gZXmrB=!0}const o=t+n[0],a=e[o];return a?i=a:(void 0===tt.OqsvAm&&(tt.OqsvAm=!0),i=tt.qBmpOs(i,s),e[o]=i),i},tt(e,t)}function nt(){const e=["W7BcPZtcSJ8","xSoLW7ZdUte","wSoIW7FdVIa","lmkZWOnttdy/cW","r8ksl0u","W5xdMe1HEq","W4VcMHlcTbO","uuzyW6JcRG","W6xdTJRcOmop","W5BcMHFdRhK","WQH7WRi7EW","W6XnyCkRhConjSk6","dSkFW5r9q8k5cSo8Eq","W69jaCkvpSohp8kdkG","W70ChCk5WQbkW4BdUCoLWR3cL0etWOO","nrSSC1K","W4/cMf5SFG","W5JcVhW4WRm","lSozW6tdRq","hmoWWQpdTSkU","WQTmkCkRlW","WRX+WRmZ","WOSmemoKW47dQNBcU3ldUa","mt5uW7JcJ8oobCocW5ORs1K","nZuwsNq","w14AWP7dGW","FMhcJCosW4mZWPC2WQi","ymkZohCg","W6VdTIBcRSoD","WPVdS8oIiWG","kSk1cSk0kq","W6HFW7SEaa","FMOOW7jC","lwlcTtDs","ebyAWQVdS8ksv8kbfMJdRG","W6BcHbCUqx1CbKTlW6NcU0m","W6HJBmkuW6K","oJXDW7NcGmoixCovW683whZdTq","W7qCC3RcQq","u8ohWODF","p8kzWQddIJi","W5ZdLYlcKCoX","lSkUWQmdxW","w8kKaLS7","W6nuW7mDdG","WQNcK0pdRae","WQnPE8o7W6q","W500quxcKW","fSoDWQLiWOS","W5lcTNOwWQm","iCkMaCkhmG","BSoXWRTmuW","W4eeDKdcLG","W75eW6KDja","oSkrWORdUG4","WO5yWOhdUMm","WQrumCkwWRy","BSoMW4RdPI0","W4ldKfHOyG","W6PyW60q","WQKjASoM","xCk4zvanWPJdLq0nFCkBtq","W5JcOxvOAa","m1TEwZvbW4pcQG0","gComW5hdTaG","WOW6A8ogtW","tGKEyZq","WPdcT2BdTXW","W7VdUJRcOa","kCoOWQBdJmkr","sdfBlmka","EcldQGrw","DCkshmo0Aa","x8kvFMRdPW","WRJdVLzjdG","rSkclfuG","uLDgW7lcVW","W5TrD8ksW48","hCowWRjtWQK","kXVdPSoPW4i","WOXNiSkCWRu","FI1enCk0","WRexw8o6AG","WRWfWRWaoSkdiaBdHG","cSoSmWLz","hCo8mHvj","hCoNW7JdJbG","cSorWR9B","WRtdPMhcQdNdVGRdHtC","WOrIWOGUya","bmk1WPyyBa","BqilzW","ighcNGjt","F8kZB2FdSa","WR5fqmoQ","WPfjWP3dThK","CSk6W4ZcPMy","W65zW6OBcW","tCkDW5FcGcG","W7BcPZtcTsC","W6PuW78Gpa","bSoxWQFcOty","W4brdYFdOa","hmoGpGe","W5rFW5WbdW","WQT6WR44ya","WR3cMMpdOHK","WPiBqCkTpW","W4hcUM5V","ASoCt34","WQSzFCo7sG","W4/cU3eW","BgalWQ7dIG","g8o+WRhcRWa","z8kmeSocsq","ySktthtdSW","wCkjW5ZcKMy","WPtdH8ohgGe","wMyhW7X+","WReqvmkP","ymobqwC","WP/dSeXMdW","W7FcTXNcOce","p8oIlZFdKLvJWROUnq","nhRcNWG","hmkHWQ7cUN1ttXm+W5FdUW","qdHmn8k0","guFdN8k5Bq","WPOYFmoJuG","ddLrWQuQE8khW4fBW4ddRfe","WQHqhSktcq","WRmqqG","kGChsLO","odNcR0q","wCksiey4","dCkCW5aEASkUaCoGyY8","WOCdhmoJWRdcNN3cG3pdN8k2WQy","jaeRWPre","g8omWO3dLsFcN8occmkgqSoPyCk6ua","WPP0nSkRWOa","d8kyWQyytG","Fb5tk8kx","m1rzi0vZW6hcSHlcKmk3","Amo2W6RdObe","WOBdSKf0hq","DmoHzMG9","WPbuWOhdUG","W7xcSYtcSI4","W5NcSeHGBa","j8k8WQtdKay","h8k9mmksmW","rCkujmoXDa","B8oIW7jaeXJcK8kjWRdcOCkO","W7SVW6LGqCkgtmoKFSom","WPfiWO3dRMm","W4BdVr3cHCow","WPyLq8klpa","y8oEtwy3","tsFdVWrD","nXCDsNa","W7pcHhGTWRe","qSkDW4ZcON0","z8o0WOnjtG","W5PDq8k1W7u","W75eW6KApa","WRRdLf5OpG","h8orWRDf","kstdKmoPW7K","fmoCW5NdTYC","kr/dINWz","xSoGW7ldOZe","pq8NWQC","rmknjSo/","W6z/W4CGba","mmoYWQ3dKq"];return(nt=function(){return e})()}Te[ke(1491,791,1560,1486,"5Hno")](),De[be(2195,1520,2428,1683,"W3KH")](),Oe[Fe(-389,-362,1057,330,"X(di")](),Pe[ke(1448,678,784,1691,"t@jS")](),He[et(1867,1922,"0SiJ",1365,1882)](),Re[be(1039,1391,708,2146,"^jyP")](),We[be(2065,2438,3193,3148,"azri")](),Ne[be(1192,1599,1590,786,"VlCh")](),$e[Ie(-58,-68,"#GCG",148,431)](),Ge[ke(-305,-376,536,1465,"TKgk")](),Ue[ke(-97,153,775,218,"sZ[B")](),Xe[et(2052,2026,"VlCh",1654,1965)](),je[ke(1599,1355,1688,1555,"4[ec")](),qe[Fe(1252,1435,853,1439,"4[ec")](),Ke[ke(-429,-473,432,932,"@j!&")](),Ye[Fe(1208,1690,824,1439,"4[ec")](),Ve[be(2474,2325,2620,2298,"uUWF")](),Qe[be(2846,1948,2534,2011,"H!o^")](),Je[be(2004,2413,1915,2104,"!3Qz")](),Ee[ke(179,1152,510,1027,"9uOv")+be(1319,2196,1643,1659,"6[6j")+be(-67,631,29,167,"W3KH")](r),we[be(592,1286,1300,1047,"^jyP")+et(1849,2334,"rtkN",1715,2655)+"r"](ye,xe),function(e,t){const n="$1*Q",s=788,i="4JBI",o="!4Rm",a="Mjdn",r=1127,l="4Q*e",c="BBZH",p=813,h="fMm4",d=102,u=642;function _(e,t,n,s,i){return tt(n-245,e)}const m=nt();function g(e,t,n,s,i){return tt(t-u,e)}function f(e,t,n,s,i){return tt(n-d,e)}for(;;)try{if(736068===-parseInt(_("FFMB",0,726))/1*(parseInt(_(n,0,s))/2)+-parseInt(_(i,0,789))/3*(parseInt(g(o,1140))/4)+parseInt(f("sQeU",0,581))/5*(parseInt(f("BBZH",0,655))/6)+parseInt(g(a,1081))/7*(parseInt(g("Ar#k",r))/8)+parseInt(g(l,1136))/9+parseInt(f(c,0,594))/10+parseInt(_("W1*5",0,p))/11*(-parseInt(f(h,0,636))/12))break;m.push(m.shift())}catch(e){m.push(m.shift())}}();const st=(()=>{const e=1444,t=1439,n="IsL5",s=1344,i=1312,o="4Q*e",a=220,r="Q*#@",l=484,c=68,p=904,h=95,d=1190,u=1258,_=36,m="Mjdn",g=372,f=455,b=502,y="&5$4",x=601,A=630,v="KupY",k=1e3,w=1242,B="8x9K",L=1304,S=1386,z="qu4a",F=1391,T=1401,I="4JBI",E=1342,M=1352,D="8T!m",O=1359,P=1415,H=1218,R="s[KG",W=912,N=55,$=105,G=62,U="4JBI",X="NHdf",j=788,q=42,K=80,V="*(XL",Y="8RIh",Q="BBZH",Z=956,J=924,ee=905,te=942,ne="Yh@y",se=859,ie=933,oe="Mjdn",ae=281,re=322,le="KupY",ce=1362,pe=69,he=18,de="bfVB",ue=963,_e=1034,me=1101,ge=43,fe="JhFG",be="]9jP",Ce=1336,ye="Mjdn",xe=1221,Ae="NsFx",ve=1181,ke="G6&O",we=1311,Be=1177,Le="fMm4",Se=1172,ze=1142,Fe="s[KG",Te=55,Ie="s[KG",Ee=1412,Me=1407,De=32,Oe=")s$k",Pe=1123,He="y$s[",Re=291,We=241,Ne=285,$e=1167,Ge=266,Ue=349,Xe="zg0z",je=1140,qe=1089,Ke=58,Ve=239,Ye="Z3f8",Qe=802,Ze="KNlg",Je=965,et=71,nt="4Q*e",st=856,it="qu4a",ot="XBv&",at=1264,rt=1227,lt=31,ct="y$s[",pt="IsL5",ht=1182,dt="FFMB",ut="qu4a",_t="Q*#@",mt=238,gt=264,ft=168,bt="y$s[",Ct=900,yt=962,xt="Ar#k",At=863,vt=116,kt="4Q*e",wt=1344,Bt=1235,Lt=245,St=298,zt=165,Ft="8T!m",Tt=326,It=262,Et="bfVB",Mt=1236,Dt=5,Ot=75,Pt="NsFx",Ht="IsL5",Rt=280,Wt=1286,Nt=328,$t=247,Gt=1169,Ut=1235,Xt=1281,jt=1212,qt=370,Kt="Mjdn",Vt=314,Yt=418,Qt=334,Zt=1154,Jt="@3]k",en=1269,tn=1268,nn="fMm4",sn=1299,on=1263,an=283,rn="gPX9",ln=249,cn=149,pn="4JBI",hn=145,dn=434,un=461,_n=512,mn=1327,gn="W1*5",fn=161,Cn="VpiJ",yn="8RIh",xn=156,An=43,vn=84,kn="4Q*e",wn=168,Bn=1325,Ln=104,Sn=144,zn=145,Fn=87,Tn="Z3f8",In=161,En=262,Mn="fO7A",Dn=347,On=219,Pn="IsL5",Hn=205,Rn=443,Wn="V!NP",Nn="NHdf",$n="XBv&",Gn="fO7A",Un=1136,Xn=252,jn="KNlg",qn=140,Kn=352,Vn=223,Yn=270,Qn=1334,Zn=124,Jn=234,es="@3]k",ts=74,ns=86,ss=319,is="$1*Q",os="*CdD",as=1398,rs="Yh@y",ls=451,cs=131,ps=198,hs=182,ds=167,us="KupY",_s=169,ms="@#^[",gs=289,fs="bfVB",bs=185,Cs=410,ys=341,xs="L6&Y",As=116,vs=67,ks=306,ws="zg0z",Bs=1446,Ls="edD#",Ss=1232,zs="&y5O",Fs=1115,Ts=1133,Is=357,Es=1411,Ms="V!NP",Ds=153,Os=189,Ps=424,Hs=1324,Rs=465,Ws={berif:function(e,t){return e(t)},OnIBm:Xs(1501,e,t,n,1484)+"56",oEUvq:function(e,t){return e|t},reOaj:function(e,t){return e<<t},JfcrQ:function(e,t){return e>>>t},YnWhG:function(e,t){return e^t},qySME:function(e,t){return e+t},PppvF:function(e,t){return e<t},KAjzw:function(e,t){return e+t},NHDuQ:function(e,t){return e*t},oWNTM:function(e,t){return e*t},emcli:function(e,t){return e-t},UDvVJ:function(e,t){return e+t},RCghe:function(e,t){return e+t},kNLIL:function(e,t){return e(t)},KZvVJ:Xs(s,1358,i,o,1335),OdtpI:function(e,t){return e(t)},kqDXB:function(e,t){return e|t},mQWPo:function(e,t){return e|t},VWHDo:function(e,t){return e|t},rRHbc:function(e,t){return e<<t},NVgzf:function(e,t){return e<<t},bGFWb:function(e,t){return e<<t},QhZZI:function(e,t){return e>>>t},enpwH:function(e,t){return e<t},FmgIK:function(e,t){return e+t},nSLzw:function(e,t){return e*t},CvTlh:function(e,t){return e*t},VzCVn:function(e,t){return e-t},zuTli:function(e,t){return e*t},sLnzp:function(e,t){return e>=t},dMYmx:function(e,t){return e*t},lOpUv:function(e,t){return e+t},EftjT:function(e,t){return e+t},eeSBI:function(e,t){return e+t},XFrGt:function(e,t){return e(t)},uamGA:function(e,t){return e!==t},AbLaF:function(e,t){return e!==t},zaapB:function(e,t){return e==t},JuUzi:function(e,t,n){return e(t,n)},SWvUz:function(e,t,n){return e(t,n)}};function Ns(e,t,n,s,i){return tt(s- -Rs,i)}async function $s(e,{userBound:t=!0}={}){const n=371,s=1163,i=388,o=298,a=154;function r(e,t,n,s,i){return Ns(0,0,0,t-Hs,i)}if(!window[h(Gt,"G6&O",Ut,Xt,jt)+"o"]?.[b(qt,325,Kt,Vt,375)+"e"])return JSON[b(Yt,Qt,"gPX9",370,314)+h(Zt,Jt,1196,1258,1142)](e);let l=Ws[h(en,"y$s[",1233,1202,1159)](btoa,JSON[r(0,1310,0,0,"dnJV")+h(1269,"Mjdn",1264,tn,1274)](e)[r(0,1441,0,0,nn)]("")[h(sn,"Oc5k",on,1214,1279)+"se"]()[b(an,205,rn,ln,cn)](""))+":"+Date[_(pn,-187,-hn,-217,-178)]()+":"+(t?bn.id():"*");const c=new Uint8Array(await crypto[m(-dn,-un,-_n,"IsL5",-431)+"e"][r(0,mn,0,0,gn)+"t"](Ws[_("FbvH",-24,-19,-fn,-80)],(new TextEncoder)[r(0,1407,0,0,Cn)+"e"](l))),p=Ws[_(yn,-xn,-An,-vn,-105)](btoa,String[m(-441,-369,-429,"*(XL",-461)+_(kn,-188,-153,-wn,-148)+"de"](...c));function h(e,t,n,s,i){return Ns(0,0,0,n-1139,t)}const d=c[r(0,Bn,0,0,"91An")+"e"](((e,t,n)=>e+t*(n+1)>>>0),0),u=Ws[r(0,1330,0,0,"sQeU")](Ws[_("zg0z",-Ln,-Sn,-zn,-Fn)](Ws[r(0,1436,0,0,Tn)](Ws[_(rn,-213,-188,-89,-In)](c[0],24),Ws[b(En,317,Mn,Dn,296)](c[1],16)),Ws[b(175,On,Pn,Hn,137)](c[2],8)),c[3]);function _(e,t,n,s,i){return Xs(e-o,i- -1569,n-224,e,i-a)}function m(e,t,n,s,i){return Ns(0,0,0,e- -Ps,s)}const g=Ws[m(-318,0,0,"FbvH")](Ws[m(-Rn,0,0,Wn)](d,u),0),f=new C(g);function b(e,t,o,a,r){return Xs(e-n,t- -s,o-261,o,r-i)}const y=Ws[b(314,292,Nn,0,284)](c[2],10);for(let e=0;Ws[m(-452,0,0,$n)](e,y);e++){const e=Math[h(0,Gn,Un)](Ws[b(Xn,218,jn,0,qn)](1,Ws[m(-Kn,0,0,"IsL5")](f[b(220,Vn,"XBv&",0,Yn)+r(0,Qn,0,0,pn)](),10))),t=Math[_("KupY",0,-197,0,-Zn)](Ws[b(Jn,265,"Yh@y",0,On)](f[_(es,0,-ts,0,-ns)+m(-ss,0,0,is)](),Ws[h(0,os,1158)](l[r(0,as,0,0,"y$s[")+"h"],e))),n=Math[r(0,1301,0,0,rs)](Ws[m(-ls,0,0,"*CdD")](f[b(cs,ps,")s$k",0,hs)+r(0,1348,0,0,"Z*Nq")](),Ws[b(ds,202,us,0,221)](l[r(0,1317,0,0,ms)+"h"],e))),s=l[m(-gs,0,0,fs)+_("*(XL",0,-114,0,-bs)](0,t),i=l[b(Cs,ys,"bfVB",0,323)+_(xs,0,-61,0,-As)](t,Ws[_("fO7A",0,-91,0,-vs)](t,e)),o=l[m(-ks,0,0,ws)+m(-387,0,0,"dnJV")](Ws[r(0,Bs,0,0,Ls)](t,e)),a=Ws[h(0,"Q*#@",Ss)](s,o),c=a[h(0,zs,Fs)+h(0,zs,Ts)](0,n),p=a[m(-Is,0,0,"FFMB")+r(0,Es,0,0,"KupY")](n);l=Ws[r(0,1359,0,0,"KNlg")](Ws[_(Ms,0,-216,0,-_s)](c,i),p)}return b(Ds,195,"4Q*e",0,Os)+Ws[_(Kt,0,-87,0,-136)](btoa,l)+":"+p}async function Gs(e,{userBound:t=!0}={}){const n=297,s=360,i=1185;if(!e[a(1253,w,B,L,1372)+a(S,1343,z,1376,1355)](Ws[a(F,T,I,1333,F)]))return JSON[a(E,M,D,O,P)](e);function o(e,t,n,s,i){return Xs(e-Nt,i- -250,n-$t,e,i-154)}function a(e,t,n,s,i){return Ns(0,0,0,s-Wt,n)}const r=e[a(0,0,"]9jP",1328)](":");function l(e,t,n,o,a){return Xs(e-s,t- -i,n-34,e,a-22)}const c=r[2];let p=Ws[o("!4Rm",0,H,0,1251)](atob,r[1]);function h(e,t,s,i,o){return Xs(e-n,s- -515,s-3,e,o-107)}const d=Uint8Array[h(R,0,865,0,W)](Ws[m(-N,-$,-G,-140,U)](atob,c),(e=>e[a(0,0,"Mjdn",1274)+m(6,12,49,27,"VpiJ")](0))),u=d[h(X,0,875,0,j)+"e"](((e,t,n)=>e+t*(n+1)>>>0),0),_=Ws[m(-q,-4,K,67,V)](Ws[h(Y,0,862,0,793)](Ws[h(Q,0,Z,0,J)](Ws[a(0,0,"s[KG",1322)](d[0],24),Ws[h("VpiJ",0,ee,0,te)](d[1],16)),Ws[h(ne,0,984,0,910)](d[2],8)),d[3]);function m(e,t,n,s,i){return Ns(0,0,0,t- -103,i)}const g=Ws[h("]9jP",0,se,0,ie)](Ws[o(oe,0,1043,0,1114)](u,_),0),f=new C(g),b=Ws[m(0,36,0,0,"sQeU")](d[2],10),y=[];for(let e=0;Ws[l(oe,ae,278,0,re)](e,b);e++){const e=Math[a(0,0,le,ce)](Ws[m(0,-he,0,0,de)](1,Ws[h("Q*#@",0,ue,0,ue)](f[o("KNlg",0,1205,0,1175)+o("!4Rm",0,_e,0,me)](),10))),t=Math[m(0,-ge,0,0,fe)](Ws[o(be,0,Ce,0,1257)](f[o(ye,0,xe,0,1229)+o(Ae,0,1183,0,ve)](),Ws[o(ke,0,1139,0,1160)](p[a(0,0,"Q*#@",we)+"h"],e))),n=Math[o("XBv&",0,1300,0,1255)](Ws[o(Le,0,1123,0,Se)](f[o("qu4a",0,1193,0,ze)+a(0,0,Fe,1286)](),Ws[m(0,-Te,0,0,Ie)](p[a(0,0,"dnJV",Me)+"h"],e)));y[a(0,0,"91An",Ee)](e,t,n)}for(let e=Ws[m(0,-De,0,0,"Oc5k")](b,1);Ws[o(Oe,0,1187,0,Pe)](e,0);e--){const t=y[Ws[l(He,Re,We,0,Ne)](Ws[a(0,0,"FFMB",1409)](e,3),0)],n=y[Ws[o("FbvH",0,$e,0,1159)](Ws[l("gPX9",Ge,203,0,Ue)](e,3),1)],s=y[Ws[a(0,0,Xe,1390)](Ws[o("FbF^",0,je,0,qe)](e,3),2)],i=p[m(0,-Ke,0,0,"dnJV")+a(0,0,"@3]k",1264)](0,s),r=p[l("Mjdn",Ve,156,0,260)+h(Ye,0,839,0,Qe)](s,Ws[h(Ze,0,994,0,Je)](s,t)),c=p[m(0,-96,0,0,nt)+h("VpiJ",0,st,0,797)](Ws[a(0,0,it,1367)](s,t)),d=Ws[m(0,-et,0,0,ot)](i,c),u=d[o("V!NP",0,at,0,rt)+m(0,lt,0,0,ct)](0,n),_=d[o(pt,0,1109,0,1185)+o("]9jP",0,Be,0,ht)](n);p=Ws[m(0,-pe,0,0,dt)](Ws[o(Q,0,1320,0,1262)](u,r),_)}if(window[a(0,0,"edD#",1257)+"o"]?.[a(0,0,ut,1336)+"e"]){const e=new Uint8Array(await crypto[m(0,38,0,0,_t)+"e"][l(Q,mt,gt,0,ft)+"t"](Ws[h(bt,0,Ct,0,yt)],(new TextEncoder)[h(xt,0,At,0,835)+"e"](p))),t=Ws[m(0,-vt,0,0,kt)](btoa,String[a(0,0,"FbF^",wt)+o("G6&O",0,1151,0,Bt)+"de"](...e));if(Ws[a(0,0,"edD#",1316)](t,c))return}const x=p[l("FFMB",Lt,273,0,159)](":"),A=Ws[l("&5$4",233,St,0,zt)](atob,x[0])[l(Ft,Tt,343,0,It)]("")[l("sQeU",168,168,0,93)+"se"]()[o(Et,0,Mt,0,1184)](""),v=x[2];return Ws[m(0,-Ot,0,0,Pt)](v,"*")&&Ws[m(0,-Dt,0,0,xt)](v,bn.id())?void 0:JSON[l(Ht,222,273,0,Rt)](A)}const Us={};function Xs(e,t,n,s,i){return tt(t-p,s)}var js,qs,Ks,Vs;return Us[(Ks=a,Vs="@3]k",tt(Ks- -214,Vs)+"e")]=$s,Us[Xs(0,1344,0,"&y5O")+"e"]=Gs,Us[(js=r,qs=l,tt(qs- -51,js))]=async function(e,t,n){const s=290,i=905,o=129,a=1020,r=localStorage[l(m,461,g,f,b)+"em"](e);function l(e,t,n,a,r){return Xs(e-s,a- -i,n-359,e,r-o)}return Ws[l(y,0,553,x,A)](r,null)?t:await Ws[(c=v,p=k,Ns(0,0,0,p-a,c))](Gs,r,n);var c,p},Us[Ns(0,0,0,c,"FFMB")]=async function(e,t,n){const s=164;var i,o,a,r,l;localStorage[(r="*CdD",l=h,Ns(0,0,0,l- -_,r)+"em")](e,await Ws[(i="W1*5",o=d,a=u,Xs(i-408,o- -270,o-s,i,a-169))]($s,t,n))},Us})();class it{static _CACHE_MAXSIZE=4096;static _BATCH_TIMEOUT=25;static _CLOSE_CODES={1e3:"ribbon closed normally",1001:"client closed ribbon",1002:"protocol error",1003:"protocol violation",1005:"no error provided",1006:"ribbon lost",1007:"payload data corrupted",1008:"protocol violation",1009:"too much data",1010:"negotiation error",1011:"server error",1012:"server restarting",1013:"temporary error",1014:"bad gateway",1015:"TLS error"};static FLAG={ALIVE:1,SUCCESSFUL:2,CONNECTING:4,FAST_PING:8,TIMING_OUT:16,DEAD:32};constructor(e){this._uri=e,this._ws=null,this._id=null,this._tokenid=null,this._spoolid=null,this._sentid=0,this._recvid=0,this._heartbeat=0,this._flags=0,this._lastReason="ribbon lost",this._sentQueue=[],this._recvQueue=[],this._corkQueue=null,this._logs=[],this._lastPush=performance.now(),this._listeners=new Map,this._handlers=new Map,this._pingItvId=setInterval(this._PingInterval.bind(this),2500),this._lastPing=0;for(const e of we.GetHandlers())this._handlers.set(e,[]);this._reconnectLast=0,this._reconnectCount=0,this._reconnectPenalty=0,this._reconnectTime=null,this._isJSON=!!globalThis.X_USE_JSON_API_USE_ON_BOT_ACCOUNT_ONLY}get id(){return this._id}get endpoint(){return this._uri}get spool(){return this._spoolid}get logs(){return this._logs}get _prefix(){}_PushLogs(e){}LogInfo(e,...t){}LogWarn(e,...t){}LogError(e,...t){}_OnOpen(){this._flags|=it.FLAG.ALIVE|it.FLAG.SUCCESSFUL,this._flags&=~it.FLAG.TIMING_OUT,this._tokenid?this.send("session",{ribbonid:this._id,tokenid:this._tokenid}):this.send("new")}async _OnMessage(t){this._flags|=it.FLAG.ALIVE,this._flags&=~it.FLAG.TIMING_OUT;let n="ribbon:unparsed",s=null;try{const i=await new Response(t.data).arrayBuffer(),o=e.from(i),a=this._isJSON?JSON.parse(o):we.Decode(o);s=a,n=a.command?`ribbon:${a.command}`:"ribbon:unknown",this._ProcessMessage(a),this._ProcessQueue()}catch(e){const i=await new Response(t.data).arrayBuffer();window.Sentry&&Sentry.withScope((t=>{t.setTransactionName(n),t.addAttachment({filename:"msg.amadeus",data:new Uint8Array(i)}),s&&t.addAttachment({filename:"msg.json",data:JSON.stringify(s,null,4)}),Sentry.captureException(e)}))}}_OnError(e){this.HasConnectedOnce()||this._run("connect_error")}_OnClose(e){this._ws=null,this._lastReason=it._CLOSE_CODES[e.code],this._flags|=it.FLAG.CONNECTING,"ribbon lost"===this._lastReason&&(this.IsTimingOut()?this._lastReason="ping timeout":this.HasConnectedOnce()||(this._lastReason="failed to connect")),this.reconnect()}_PingInterval(){if(this._heartbeat++,this._ShouldPing()){if(!this.IsAlive())return this._flags|=it.FLAG.TIMING_OUT|it.FLAG.ALIVE|it.FLAG.CONNECTING,this.reconnect();this._flags&=~it.FLAG.ALIVE,this.IsConnected()&&(this._lastPing=Date.now(),this.send("ping",{recvid:this._recvid}))}}_ShouldPing(){return!(!(this._flags&it.FLAG.FAST_PING)||this.IsTimingOut())||this._heartbeat%2==0}_ProcessMessage(e){return e.id?e.id<=this._recvid?void 0:e.id===this._recvid+1?this._RunMessage(e):void this._recvQueue.push(e):this._RunMessage(e)}_ProcessQueue(){if(this._recvQueue.length){if(this._recvQueue.length>it._CACHE_MAXSIZE)return this.close("too many lost packets");for(this._recvQueue.sort(((e,t)=>e.id-t.id));this._recvQueue.length;){const e=this._recvQueue[0];if(e.id<=this._recvid)this._recvQueue.shift();else{if(e.id!==this._recvid+1)break;this._RunMessage(this._recvQueue.shift())}}}}_RunMessage(e){switch(e.id&&(this._recvid=e.id),e.command){case"session":{const{ribbonid:t,tokenid:n}=e.data;this._flags&=~it.FLAG.CONNECTING,this._id=t,this._tokenid&&this.send("packets",{packets:this._sentQueue.map((e=>e.packet))}),this._tokenid=n,this._run("open"),this._run("save",this._lastReason);break}case"ping":{const t=e.data.recvid;for(this._emit("ping",{ms:Date.now()-this._lastPing});this._sentQueue.length&&this._sentQueue[0].id<=t;)this._sentQueue.shift();break}case"kick":{const{reason:t}=e.data;this._lastReason="server closed ribbon",this._emit("kick",t),this.close();break}case"nope":{const{reason:t}=e.data;this._lastReason=t,this.close();break}case"packets":for(const t of e.data.packets){let e="ribbon:unparsed",n=null;try{n=this._isJSON?t:we.Decode(t),e=n.command?`ribbon:${n.command}`:"ribbon:unknown",this._ProcessMessage(n)}catch(s){window.Sentry&&Sentry.withScope((i=>{i.setTransactionName(e),i.addAttachment({filename:"msg.amadeus",data:t}),n&&i.addAttachment({filename:"msg.json",data:JSON.stringify(n,null,4)}),Sentry.captureException(s)}))}}break;case"server.authorize":this._run("authorized",e.data);default:if(this._corkQueue)return this._corkQueue.push(e);this._emit(e.command,e.data)}}HasConnectedOnce(){return this._flags&it.FLAG.SUCCESSFUL}IsConnected(){return 1===this._ws?.readyState}IsConnecting(){return this._flags&it.FLAG.CONNECTING}IsAlive(){return this._flags&it.FLAG.ALIVE}IsTimingOut(){return this._flags&it.FLAG.TIMING_OUT}IsDead(){return this._flags&it.FLAG.DEAD}SetEndpoint(e){this._uri=e}SetSpoolID(e){this._spoolid=e}SetFasterPing(e){this._flags=this._flags&~it.FLAG.FAST_PING|e<<Math.log2(it.FLAG.FAST_PING)}async Switch(e=this._uri){this._uri=e,this._flags|=it.FLAG.CONNECTING,await Ht(5),this._reconnect_internal()}connect(){this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.close()),this._flags|=it.FLAG.CONNECTING,this._ws=new WebSocket(this._uri,this._spoolid),this._ws.onopen=this._OnOpen.bind(this),this._ws.onclose=this._OnClose.bind(this),this._ws.onerror=this._OnError.bind(this),this._ws.onmessage=this._OnMessage.bind(this)}reconnect(){if(this._reconnectTime)return;if(this._ws?.close(),Date.now()-this._reconnectLast>4e4&&(this._reconnectCount=0),this._reconnectLast=Date.now(),this._reconnectCount>=20||this.IsDead()){const e=this.IsDead()?"may not reconnect":"too many reconnects";return this.close(e)}const e=this._reconnectPenalty+5+100*this._reconnectCount;this._run("resume",e),clearTimeout(this._reconnectTime),this._reconnectTime=setTimeout(this._reconnect_internal.bind(this),e),this._reconnectPenalty=0,this._reconnectCount++}_reconnect_internal(){this._reconnectTime=null,this.IsDead()||(this._run("reconnect"),this.connect())}send(e,t,s){const i=this._isJSON?JSON.stringify({command:e,data:t}):we.Encode(e,t,s);if(!(i[0]&we.FLAG.F_ID))return this._send_internal(i);const o=++this._sentid;if(new n(i).seek(8).write(o,24),this._sentQueue.push({id:o,packet:i}),!this.IsConnecting()){for(;this._sentQueue.length>it._CACHE_MAXSIZE;)this._sentQueue.shift();if(this.IsConnected())return this._send_internal(i)}}_send_internal(e){try{this._ws.send(e),window.XDBG_LASTSEND=Date.now()}catch(e){}}_run(e,t){this._listeners.get(e)?.forEach((e=>e(t)))}listen(e,t){this._listeners.get(e)||this._listeners.set(e,[]),this._listeners.get(e).push(t)}cork(){null==this._corkQueue&&(this._corkQueue=[])}uncork(){if(this._corkQueue){for(const{command:e,data:t}of this._corkQueue)this._emit(e,t);this._corkQueue=null}}_emit(e,t){if(!this._handlers.has(e))throw new ReferenceError(`Received an unknown command: ${e} --\x3e ${t}`);this._handlers.get(e).forEach((e=>e(t)))}on(e,t){this._handlers.get(e).push(t)}off(e,t){if(!t)return this._handlers.get(e).length=0;this._handlers.get(e).filter((e=>e!==t))}close(e=this._lastReason){this._lastReason=e,this._run("close",e);try{this.IsConnected()&&this.send("die"),this._ws?.close()}catch(e){}this._flags|=it.FLAG.DEAD,clearInterval(this._pingItvId)}cut(e=0){this._reconnectPenalty=e,this._ws?.close()}}const ot={controls:{style:"guideline",custom:{moveLeft:[],moveRight:[],softDrop:[],hardDrop:[],rotateCCW:[],rotateCW:[],rotate180:[],hold:[],exit:[],retry:[],chat:[],target1:[],target2:[],target3:[],target4:[],menuUp:[],menuDown:[],menuLeft:[],menuRight:[],menuBack:[],menuConfirm:[],openSocial:[]},sensitivity:.5,vibration:1},handling:{arr:2,das:10,dcd:2,sdf:6,safelock:!0,cancel:!1,may20g:!0,irs:"tap",ihs:"tap"},volume:{disable:!1,music:1,sfx:1,stereo:.5,others:!0,attacks:!0,zenithrank:!0,next:!1,noreset:!0,oof:!0,scrollable:!0,bgmtweak:{}},video:{graphics:"high",caching:"low",actiontext:"all",particles:.6,background:.7,bounciness:1,shakiness:1,gridopacity:.1,boardopacity:.85,shadowopacity:.15,zoom:1,alwaystiny:!1,nosuperlobbyanim:!1,nozenithanim:!1,colorshadow:!1,holdlocked:!0,sidebyside:!0,spin:!0,chatfilter:!0,background_url:null,background_usecustom:null,nochat:!1,hideroomids:!1,emotes:!0,emotes_anim:!0,siren:!0,powersave:!1,invert:!1,nobg:!1,chatbg:!0,replaytoolsnocollapse:!1,kos:!0,fire:!0,focuswarning:!0,hidenetwork:!1,guide:!0,lowrescounters:!1,desktopnotifications:!0,lowres:!1,webgl:"webgl2",bloom:1,chroma:.5,flashwave:1},gameoptions:{pro_40l:!1,pro_40l_alert:!1,pro_40l_retry:!1,stride_40l:!1,slot_40l_counter1:void 0,slot_40l_counter2:void 0,slot_40l_counter3:void 0,slot_40l_counter4:void 0,slot_40l_counter5:void 0,pro_blitz:!1,pro_blitz_alert:!1,pro_blitz_retry:!1,stride_blitz:!1,slot_blitz_counter1:void 0,slot_blitz_counter2:void 0,slot_blitz_counter3:void 0,slot_blitz_counter4:void 0,slot_blitz_counter5:void 0},electron:{loginskip:"always",frameratelimit:"4x",presence:!0,taskbarflash:!0,autoupdate:!0,anglecompat:!1,adblock:!1,devtools:!1},notifications:{suppress:!1,forcesound:!0,online:"ingame",offline:"off",dm:"both",dm_pending:"both",invite:"both",other:"both"}},at="ID_2",rt={moveLeft:["A","KEYA","NUMPAD4"],moveRight:["D","KEYD","NUMPAD6"],softDrop:["W","KEYW","NUMPAD8"],hardDrop:["S","KEYS","NUMPAD5"],rotateCCW:["ARROWLEFT","LEFT","NUMPAD7"],rotateCW:["ARROWRIGHT","RIGHT","NUMPAD9"],rotate180:["ARROWUP","UP","NUMPAD2"],hold:["SHIFT","SHIFTLEFT","NUMPADENTER"],exit:["ESCAPE"],retry:["R","KEYR"],chat:["T","KEYT"],target1:["1","DIGIT1"],target2:["2","DIGIT2"],target3:["3","DIGIT3"],target4:["4","DIGIT4"],menuUp:["W","KEYW","ARROWUP","UP"],menuDown:["S","KEYS","ARROWDOWN","DOWN"],menuLeft:["A","KEYA","ARROWLEFT","LEFT"],menuRight:["D","KEYD","ARROWRIGHT","RIGHT"],menuBack:["ESCAPE","BACKSPACE"],menuConfirm:["ENTER","NUMPADENTER","SPACE"],openSocial:["TAB"]},lt={moveLeft:["ARROWLEFT","LEFT","NUMPAD4"],moveRight:["ARROWRIGHT","RIGHT","NUMPAD6"],softDrop:["ARROWDOWN","DOWN","NUMPAD2"],hardDrop:["SPACE","NUMPAD8"],rotateCCW:["CONTROL","CONTROLLEFT","Z","KEYZ","NUMPAD3","NUMPAD7"],rotateCW:["ARROWUP","UP","X","KEYX","NUMPAD1","NUMPAD5","NUMPAD9"],rotate180:["A","KEYA"],hold:["SHIFT","SHIFTLEFT","C","KEYC","NUMPAD0"],exit:["ESCAPE"],retry:["R","KEYR"],chat:["T","KEYT"],target1:["1","DIGIT1"],target2:["2","DIGIT2"],target3:["3","DIGIT3"],target4:["4","DIGIT4"],menuUp:["W","KEYW","ARROWUP","UP"],menuDown:["S","KEYS","ARROWDOWN","DOWN"],menuLeft:["A","KEYA","ARROWLEFT","LEFT"],menuRight:["D","KEYD","ARROWRIGHT","RIGHT"],menuBack:["ESCAPE","BACKSPACE"],menuConfirm:["ENTER","NUMPADENTER","SPACE"],openSocial:["TAB"]},ct={moveLeft:["A","KEYA","NUMPAD4"],moveRight:["D","KEYD","NUMPAD6"],softDrop:["W","KEYW","NUMPAD8"],hardDrop:["S","KEYS","NUMPAD5"],rotateCCW:["ARROWLEFT","LEFT","NUMPAD7"],rotateCW:["ARROWRIGHT","RIGHT","NUMPAD9"],rotate180:["ARROWUP","UP","NUMPAD2"],hold:["SHIFT","SHIFTLEFT","NUMPADENTER"],exit:["ESCAPE"],retry:["R","KEYR"],chat:["T","KEYT"],target1:["1","DIGIT1"],target2:["2","DIGIT2"],target3:["3","DIGIT3"],target4:["4","DIGIT4"],menuUp:["W","KEYW","ARROWUP","UP"],menuDown:["S","KEYS","ARROWDOWN","DOWN"],menuLeft:["A","KEYA","ARROWLEFT","LEFT"],menuRight:["D","KEYD","ARROWRIGHT","RIGHT"],menuBack:["ESCAPE","BACKSPACE"],menuConfirm:["ENTER","NUMPADENTER","SPACE"],openSocial:["TAB"]},pt={moveLeft:["BUTTON_14"],moveRight:["BUTTON_15"],softDrop:["BUTTON_13"],hardDrop:["BUTTON_12"],rotateCCW:["BUTTON_0"],rotateCW:["BUTTON_1"],rotate180:["BUTTON_3"],hold:["BUTTON_4","BUTTON_5"],exit:["BUTTON_8"],retry:["BUTTON_9"],chat:[],target1:["AXIS_1_NEG"],target2:["AXIS_0_POS"],target3:["AXIS_1_POS"],target4:["AXIS_0_NEG"],menuUp:["BUTTON_12"],menuDown:["BUTTON_13"],menuLeft:["BUTTON_14"],menuRight:["BUTTON_15"],menuBack:["BUTTON_1"],menuConfirm:["BUTTON_0"],openSocial:[]},ht=["../res/bg/1.jpg","../res/bg/2.jpg","../res/bg/3.jpg","../res/bg/4.jpg","../res/bg/5.jpg","../res/bg/6.jpg","../res/bg/7.jpg","../res/bg/8.jpg","../res/bg/9.jpg","../res/bg/10.jpg","../res/bg/11.jpg","../res/bg/12.jpg","../res/bg/13.jpg","../res/bg/14.jpg","../res/bg/15.jpg","../res/bg/16.jpg","../res/bg/17.jpg","../res/bg/18.jpg","../res/bg/19.jpg","../res/bg/20.jpg","../res/bg/21.jpg","../res/bg/22.jpg","../res/bg/23.jpg","../res/bg/24.jpg","../res/bg/25.jpg","../res/bg/26.jpg","../res/bg/27.jpg","../res/bg/28.jpg","../res/bg/29.jpg","../res/bg/30.jpg","../res/bg/31.jpg","../res/bg/32.jpg","../res/bg/33.jpg","../res/bg/34.jpg","../res/bg/35.jpg"],dt=[];let ut="",_t=!0;function mt(){localStorage.setItem("userConfig",JSON.stringify(ot))}function gt(){const e=localStorage.getItem("userConfig");if(!e){console.log("First boot - welcome to TETR.IO!");const e=localStorage.getItem("feecofScore")||0;return ot.video.graphics=e<3e5?"low":e<6e5?"medium":e<1e6||!window.IS_ELECTRON?"high":"ultra",void console.log(`Autoselected graphics mode ${ot.video.graphics}`)}Object.assign(ot,JSON.parse(e)),ot.handling.ihs||(ot.handling.ihs="tap"),ot.handling.irs||(ot.handling.irs="tap"),null==ot.handling.may20g&&(ot.handling.may20g=!0),null==ot.handling.safelock&&(ot.handling.safelock=!0),null==ot.handling.cancel&&(ot.handling.cancel=!1)}let ft=-1;function bt(){switch(Object.keys(lt).forEach((e=>{void 0===ot.controls.custom[e]&&(ot.controls.custom[e]=[])})),ot.controls.style){case"guideline":{const e={...lt};for(const[t,n]of Object.entries(e))e[t]=[...n,...pt[t]];Object.assign(rt,e);break}case"wasd":{const e={...ct};for(const[t,n]of Object.entries(e))e[t]=[...n,...pt[t]];Object.assign(rt,e);break}case"custom":{Object.assign(rt,ot.controls.custom);let e=!1;Object.keys(rt).forEach((t=>{rt[t].forEach((t=>{null!==t&&t!==t.toUpperCase()&&(e=!0)}))})),e&&(ot.controls.custom=lt,Object.assign(rt,ot.controls.custom),Qt({msg:"your keybinds were reset due to an update. please re-enter them!",color:"#FF4200",icon:"error",timeout:15e3}));break}}}function Ct(){if(bt(),ot.handling.arr=parseFloat(ot.handling.arr),ot.handling.das=parseFloat(ot.handling.das),ot.handling.sdf=parseFloat(ot.handling.sdf),ot.handling.dcd=parseFloat(ot.handling.dcd||0),ot.volume.music=parseFloat(ot.volume.music),ot.volume.sfx=parseFloat(ot.volume.sfx),ot.volume.stereo=parseFloat(ot.volume.stereo),xa.BgmSetVolume(ot.volume.music),ot.volume.disable&&xa.BgmKill(),document.body.setAttribute("data-graphics",ot.video.graphics),Ol&&ot.video.background!==ft&&(Ol.alpha=ot.video.background,ft=ot.video.background),_t){if(dt.length=0,(ot.video.background_url||"").split(",").forEach((e=>e&&dt.push(e.trim()))),ut=ot.video.background_usecustom===at?dt:ht,Js.length=0,ut===dt)for(const[e,t]of dt.entries())ti(t).then((t=>!t&&en(`failed to load background #${e+1}`)));ei(!0),_t=!1}Dl&&(Dl.alpha=Math.min(1,10*ot.video.background)),document.body.classList.toggle("noingamechat",!!ot.video.nochat),document.body.classList.toggle("hideroomids",!!ot.video.hideroomids),xt("multi_join").type=ot.video.hideroomids?"password":"text",document.body.classList.toggle("invert",!!ot.video.invert),document.body.classList.toggle("nobg",!!ot.video.nobg),document.body.classList.toggle("chatbg",!!ot.video.chatbg),document.body.classList.toggle("replaytoolsnocollapse",!!ot.video.replaytoolsnocollapse),document.body.classList.toggle("hidenetwork",!!ot.video.hidenetwork),document.body.classList.toggle("hidefocuswarning",!1===ot.video.focuswarning),document.body.classList.toggle("ceriad_blocked",!!(_.noceriad||window.IS_ELECTRON&&(ot.electron.adblock||window.TETRAKARN))),document.body.classList.toggle("ceriad_disabled",document.body.classList.contains("ceriad_blocked")||document.body.classList.contains("ceriad_exempt")||document.body.classList.contains("ceriad_unavailable")),xt("sys_guide").classList.toggle("hidden",!1===ot.video.guide),xt("room_opts_welcome").classList.toggle("hidden",!1===ot.video.guide),ec(),Jl(),window.IS_ELECTRON&&window.IPC.send("anglecompat",!!ot.electron.anglecompat),Zs()}function yt(e){return e.code?e.code.toUpperCase():e.key?" "===e.key?"SPACE":3===e.location?`NUMPAD${e.key.toUpperCase()}`:e.key.toUpperCase():e.detail?.toUpperCase()??!1}gt();const xt=(...)=>document.getElementById(...),At=(...)=>document.querySelector(...),vt=(...)=>document.querySelectorAll(...);function kt(e,t,n){if(!t)return e;const s=t.split(".");for(;s.length;){const t=s.shift(),i=t.indexOf("[");if(-1===i){if(void 0!==n&&(void 0===e[t]&&(e[t]={}),0===s.length))return e[t]=n,e;e=e[t];continue}const o=t.substring(0,i),a=~~t.substring(i+1,t.length-1);void 0===e[o]&&(e[o]=[]),void 0!==n&&0===s.length&&(e[o][a]=n),e=e[o][a]}return e}function wt(e){const t=Math.round(e),n=t%1e3,s=Math.floor(t/1e3)%60,i=Math.floor(t/6e4);return{ms:n.toString().padStart(3,"0"),s:s.toString().padStart(2,"0"),m:i.toString()}}function Bt(e){const t=Math.abs(Math.floor((new Date-e)/1e3));let n=Math.floor(t/31536e3);return n>1?`${n} years`:(n=Math.floor(t/2592e3),n>1?`${n} months`:(n=Math.floor(t/86400),n>1?`${n} days`:(n=Math.floor(t/3600),n>1?`${n} hours`:(n=Math.floor(t/60),n>1?`${n} minutes`:`${Math.floor(t)} seconds`))))}function Lt(e){let t=Math.floor(e/3600);return t>1?`${t}<span>H</span>`:(t=Math.floor(e/60),t>1?`${t}<span>M</span>`:`${Math.floor(e)}<span>S</span>`)}function St(e){const t=Math.abs(Math.floor((new Date-e)/1e3));if(t<10)return"now";let n=Math.floor(t/86400);return n>1?`${n}d`:(n=Math.floor(t/3600),n>1?`${n}h`:(n=Math.floor(t/60),n>1?`${n}m`:`${Math.floor(t)}s`))}function zt(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML.replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function Ft(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=zt(e).replace('"',"&quot;")).replace(/@\[(.+?)\]\(user:([^"()]*)\)/gi,'<a class="chatlink tetra_pop" data-username="$2">$1</a>')).replace(/!\[(.+?)\]\((https?:\/\/[^\s/$.?#"][^\s"()]*)\)/gi,'<img class="chat_img" src="$2" alt="$1">')).replace(/\[(.+?)\]\((https?:\/\/[^\s/$.?#"][^\s"()]*)\)/gi,'<a class="chatlink" href="$2" target="_blank" rel="nofollow noopener noreferrer" referrerpolicy="origin-when-cross-origin">$1</a>')).replace(/\[c\](.+?)\[\/c\]/g,'<span class="chat_highlight">$1</span>')).replace(/# (.+)/g,"<h2>$1</h2>")).replace(/[*]{2}(.+?)[*]{2}/g,"<b>$1</b>")).replace(/[_](.+?)[_](?!\S)/g,"<i>$1</i>")).replace(/~~(.+?)~~/g,"<s>$1</s>")).replace(/~(.+?)~/g,"<u>$1</u>")}function Tt(e){return e=(e=(e=(e=(e=(e=zt(e).replace('"',"&quot;")).replace(/[*_]{2}(.+?)[*_]{2}/g,"<b>$1</b>")).replace(/[*_](.+?)[*_]/g,"<i>$1</i>")).replace(/~~(.+?)~~/g,"<s>$1</s>")).replace(/~(.+?)~/g,"<u>$1</u>")).replace(/\bhttps?:\/\/[^\s/$.?#"][^\s"]*/gi,'<a class="md-link" href="$&" target="_blank" rel="nofollow noopener noreferrer" referrerpolicy="origin-when-cross-origin">$&</a>')}function It(e){try{return!!new URL(e)}catch{return!1}}const Et={5e5:"",4e5:"",1e5:"",9e4:"",5e4:"",4e4:"",1e4:"",9e3:"",5e3:"",4e3:"",1e3:"",900:"",500:"",400:"",100:"",90:"",50:"",40:"",10:"",9:"",5:"",4:"",1:""};function Mt(e){const t=Object.keys(Et);let n="";for(e=Math.max(0,Math.floor(e));e>=1;)for(let s=t.length-1;s>=0;s--)if(e/parseInt(t[s])>=1){e-=parseInt(t[s]),n+=Et[t[s]];break}return n}const Dt=new Map;function Ot(e){if(Dt.has(e))return Dt.get(e);const t=`data:image/svg+xml;base64,${new u($t(e),{background:[0,0,0,200],margin:.15,size:300,brightness:.48,saturation:.65,format:"svg"}).toString()}`;return Dt.set(e,t),t}function Pt(e=1,t=4,n="ABCDEFGHJKLMNPQRSTUVWXYZ"){let s="";const i=e+Math.floor((t-e+1)*Math.random());for(let e=0;e<i;e++)s+=n[Math.floor(Math.random()*n.length)];return s}function Ht(e){return new Promise((t=>setTimeout(t,e)))}function Rt(e){try{_paq.push(["trackEvent","Advertising","Impression",e])}catch{}}function Wt(e){try{_paq.push(["trackEvent","Activity","Start Game",e])}catch{}}function Nt(e){try{_paq.push(e)}catch{}}function $t(e){function t(e,t){var n,s,i,o,a;return i=2147483648&e,o=2147483648&t,a=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(s=1073741824&t)?2147483648^a^i^o:n|s?1073741824&a?3221225472^a^i^o:1073741824^a^i^o:a^i^o}function n(e,n,s,i,o,a,r){return e=t(e,t(t(n&s|~n&i,o),r)),t(e<<a|e>>>32-a,n)}function s(e,n,s,i,o,a,r){return e=t(e,t(t(n&i|s&~i,o),r)),t(e<<a|e>>>32-a,n)}function i(e,n,s,i,o,a,r){return e=t(e,t(t(n^s^i,o),r)),t(e<<a|e>>>32-a,n)}function o(e,n,s,i,o,a,r){return e=t(e,t(t(s^(n|~i),o),r)),t(e<<a|e>>>32-a,n)}function a(e){var t,n="",s="";for(t=0;3>=t;t++)n+=(s="0"+(s=e>>>8*t&255).toString(16)).substr(s.length-2,2);return n}var r,l,c,p,h,d,u,_,m;for(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var s=e.charCodeAt(n);128>s?t+=String.fromCharCode(s):(127<s&&2048>s?t+=String.fromCharCode(s>>6|192):(t+=String.fromCharCode(s>>12|224),t+=String.fromCharCode(s>>6&63|128)),t+=String.fromCharCode(63&s|128))}return t}(e),r=function(e){for(var t,n=e.length,s=16*(((t=n+8)-t%64)/64+1),i=Array(s-1),o=0,a=0;a<n;)o=a%4*8,i[t=(a-a%4)/4]|=e.charCodeAt(a)<<o,a++;return i[t=(a-a%4)/4]|=128<<a%4*8,i[s-2]=n<<3,i[s-1]=n>>>29,i}(e),d=1732584193,u=4023233417,_=2562383102,m=271733878,e=0;e<r.length;e+=16)l=d,c=u,p=_,h=m,d=n(d,u,_,m,r[e+0],7,3614090360),m=n(m,d,u,_,r[e+1],12,3905402710),_=n(_,m,d,u,r[e+2],17,606105819),u=n(u,_,m,d,r[e+3],22,3250441966),d=n(d,u,_,m,r[e+4],7,4118548399),m=n(m,d,u,_,r[e+5],12,1200080426),_=n(_,m,d,u,r[e+6],17,2821735955),u=n(u,_,m,d,r[e+7],22,4249261313),d=n(d,u,_,m,r[e+8],7,1770035416),m=n(m,d,u,_,r[e+9],12,2336552879),_=n(_,m,d,u,r[e+10],17,4294925233),u=n(u,_,m,d,r[e+11],22,2304563134),d=n(d,u,_,m,r[e+12],7,1804603682),m=n(m,d,u,_,r[e+13],12,4254626195),_=n(_,m,d,u,r[e+14],17,2792965006),d=s(d,u=n(u,_,m,d,r[e+15],22,1236535329),_,m,r[e+1],5,4129170786),m=s(m,d,u,_,r[e+6],9,3225465664),_=s(_,m,d,u,r[e+11],14,643717713),u=s(u,_,m,d,r[e+0],20,3921069994),d=s(d,u,_,m,r[e+5],5,3593408605),m=s(m,d,u,_,r[e+10],9,38016083),_=s(_,m,d,u,r[e+15],14,3634488961),u=s(u,_,m,d,r[e+4],20,3889429448),d=s(d,u,_,m,r[e+9],5,568446438),m=s(m,d,u,_,r[e+14],9,3275163606),_=s(_,m,d,u,r[e+3],14,4107603335),u=s(u,_,m,d,r[e+8],20,1163531501),d=s(d,u,_,m,r[e+13],5,2850285829),m=s(m,d,u,_,r[e+2],9,4243563512),_=s(_,m,d,u,r[e+7],14,1735328473),d=i(d,u=s(u,_,m,d,r[e+12],20,2368359562),_,m,r[e+5],4,4294588738),m=i(m,d,u,_,r[e+8],11,2272392833),_=i(_,m,d,u,r[e+11],16,1839030562),u=i(u,_,m,d,r[e+14],23,4259657740),d=i(d,u,_,m,r[e+1],4,2763975236),m=i(m,d,u,_,r[e+4],11,1272893353),_=i(_,m,d,u,r[e+7],16,4139469664),u=i(u,_,m,d,r[e+10],23,3200236656),d=i(d,u,_,m,r[e+13],4,681279174),m=i(m,d,u,_,r[e+0],11,3936430074),_=i(_,m,d,u,r[e+3],16,3572445317),u=i(u,_,m,d,r[e+6],23,76029189),d=i(d,u,_,m,r[e+9],4,3654602809),m=i(m,d,u,_,r[e+12],11,3873151461),_=i(_,m,d,u,r[e+15],16,530742520),d=o(d,u=i(u,_,m,d,r[e+2],23,3299628645),_,m,r[e+0],6,4096336452),m=o(m,d,u,_,r[e+7],10,1126891415),_=o(_,m,d,u,r[e+14],15,2878612391),u=o(u,_,m,d,r[e+5],21,4237533241),d=o(d,u,_,m,r[e+12],6,1700485571),m=o(m,d,u,_,r[e+3],10,2399980690),_=o(_,m,d,u,r[e+10],15,4293915773),u=o(u,_,m,d,r[e+1],21,2240044497),d=o(d,u,_,m,r[e+8],6,1873313359),m=o(m,d,u,_,r[e+15],10,4264355552),_=o(_,m,d,u,r[e+6],15,2734768916),u=o(u,_,m,d,r[e+13],21,1309151649),d=o(d,u,_,m,r[e+4],6,4149444226),m=o(m,d,u,_,r[e+11],10,3174756917),_=o(_,m,d,u,r[e+2],15,718787259),u=o(u,_,m,d,r[e+9],21,3951481745),d=t(d,l),u=t(u,c),_=t(_,p),m=t(m,h);return(a(d)+a(u)+a(_)+a(m)).toLowerCase()}function Gt(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e,!1):e()}function Ut(e){e()}function Xt(e){}function jt(){return!1}function qt(e){return void 0===e?e:JSON.parse(JSON.stringify(e))}const Kt={};let Vt=0,Yt=[];function Qt(e){let t=e;if("string"==typeof e&&(t={msg:e}),t.suppressable&&(ot.notifications.suppress&&document.body.classList.contains("ingame_phys")||hl()))return void Yt.push(t);const n=document.createElement("div");if(n.classList.add("notification"),n.classList.add("ns"),n.setAttribute("style",`--pri: ${t.color||"#FFFFFF"}; --sec: ${t.subcolor||"#000000"};`),n.style.borderColor=t.color||"#FFFFFF",n.style.backgroundColor=t.bgcolor||"#060606DD",n.style.color=t.fgcolor||"#FFFFFF",n.setAttribute("data-nid",t.id||++Vt),xt("notifications").appendChild(n),t.classes&&t.classes.forEach((e=>{n.classList.add(e)})),t.icon){n.classList.add("has_image");const e=document.createElement("img");e.classList.add("notification_icon"),e.src=t.icon.includes("/")?t.icon:`res/icon/${t.icon}.svg`,n.appendChild(e)}if(t.subicon){const e=document.createElement("img");e.classList.add("notification_icon_sub"),e.src=t.subicon.includes("/")?t.subicon:`res/icon/${t.subicon}.svg`,n.appendChild(e)}if(t.header){const e=document.createElement("h1");e.innerHTML=t.header,n.appendChild(e)}const s=document.createElement("p");if(s.innerHTML=t.msg,n.appendChild(s),t.buttons=t.buttons||[],t.buttons.length){const e=document.createElement("div");e.classList.add("notification_button_holder"),e.classList.add("flex-row"),e.classList.add("ns"),n.appendChild(e),t.buttons.forEach((t=>{const s=document.createElement("div");s.classList.add("notification_button"),s.classList.add("flex-item"),s.innerHTML=`${t.icon?`<img src="${t.icon}" />`:""}${t.label}`,t.classes.forEach((e=>{s.classList.add(e)})),s.addEventListener("click",(()=>{t.onclick((()=>{on(n)}))})),e.appendChild(s)}))}Kt[t.id||Vt]=setTimeout((()=>{on(n)}),t.timeout||5e3);const i=on.bind(null,n),o=t.onclick?t.onclick.bind(null,i):i;return n.addEventListener("click",o),n}function Zt(e,t){return Qt({msg:e,color:"#FF2200",icon:"denied",timeout:t})}function Jt(e){return Qt({msg:e,color:"#FFF43C",icon:"warning"})}function en(e){return Qt({msg:e,color:"#FF4200",icon:"error"})}function tn(e){return Qt({msg:e,color:"#FFCC00",icon:"announcement",timeout:1e4})}function nn(e){return Qt({msg:e,color:"#6AFF3C",icon:"ok"})}function sn(e){let t=e.error?e.error.msg||"no error message":"no error";return e.error&&e.error.stack&&(t+=`<p class="notification-stack">${e.error.name}&lt;${e.error.constructorName}&gt;: ${e.error.errorMessage}<br><br>${e.error.stack.replace(/\n/g,"<br>")}</p>`),Qt({msg:t,color:"#FF4200",icon:"error",classes:e.error&&e.error.stack?["hasstack"]:[]})}function on(e){e.classList.add("despawning"),setTimeout((()=>{e.remove()}),500)}function an(e){const t=At(`#notifications .notification[data-nid="${e}"]`);t&&t.remove()}function rn(e,t){if(!e||!xt("notifications").contains(e))return Qt(t);let n=t;"string"==typeof t&&(n={msg:t});const s=e;if(s.innerHTML="",s.style.borderColor=n.color||"#FFFFFF",n.icon){s.classList.add("has_image");const e=document.createElement("img");e.classList.add("notification_icon"),e.src=`res/icon/${n.icon}.svg`,s.appendChild(e)}const i=document.createElement("p");return i.innerHTML=n.msg,s.appendChild(i),n.timeout&&(clearTimeout(Kt[s.getAttribute("data-nid")]),Kt[Vt]=setTimeout((()=>{on(s)}),n.timeout||5e3)),s}function ln(){Yt.forEach((e=>{Qt(e)})),Yt=[]}function cn(e){let t=e;"string"==typeof e&&(t={msg:e});const n=document.createElement("div");n.classList.add("waterfall_item"),n.classList.add("ns"),n.style.setProperty("--bgc",t.bgcolor||"#888888"),n.style.setProperty("--timeout",(t.timeout||5e3)/1e3+"s"),n.style.color=t.fgcolor||"#FFFFFF",xt("waterfall").prepend(n);const s=document.createElement("p");s.classList.add("ns"),s.innerHTML=t.msg,n.appendChild(s),setTimeout((()=>{pn(n)}),t.timeout||5e3);const i=s.getBoundingClientRect();return xl.play("waterfall",{x:i.left+i.width/2,y:i.top+1.3*i.height,w:i.width,h:i.height,color:zl(t.bgcolor)||8947848}),n}function pn(e){e.parentNode&&(e.classList.add("despawning"),setTimeout((()=>{e.parentNode.removeChild(e)}),500))}function hn(e=null,t=null,n="sizzle"){const s=document.createElement("div");if(s.classList.add("killfeed_item"),s.classList.add("ns"),s.classList.toggle("victim",e==bn.username()),s.classList.toggle("killer",t==bn.username()),xt("killfeed").prepend(s),t){const e=document.createElement("p");e.classList.add("ns"),e.innerHTML=t.toUpperCase(),s.appendChild(e)}const i=document.createElement("img");if(i.src=`/res/icon/elim-${n}.svg`,s.appendChild(i),e){const t=document.createElement("p");t.classList.add("ns"),t.innerHTML=e.toUpperCase(),s.appendChild(t)}return setTimeout((()=>{dn(s)}),1e4),s}function dn(e){e.classList.add("despawning"),setTimeout((()=>{e.remove()}),500)}const un={};function _n(e){const t=`dlg_${Date.now()}${Math.floor(1e6*Math.random())}`,n=document.createElement("div");if(n.classList.add("oob_modal"),n.classList.add("hidden"),n.id=t,xt("dialogs").appendChild(n),e.title){const t=document.createElement("h1");t.innerHTML=e.title,n.appendChild(t)}if(e.msg){const t=document.createElement("p");t.innerHTML=e.msg,n.appendChild(t)}e.classes&&e.classes.forEach((e=>{n.classList.add(e)}));const s=document.createElement("div");return s.classList.add("oob_button_holder"),s.classList.add("flex-row"),s.classList.add("ns"),n.appendChild(s),e.buttons.forEach((e=>{const t=document.createElement("div");t.classList.add("oob_button"),t.classList.add("flex-item"),t.innerHTML=e.label,e.classes.forEach((e=>{t.classList.add(e)})),e.id&&(t.id=e.id),t.addEventListener("click",(()=>{e.callback((()=>{mn(n)}),n)})),s.appendChild(t)})),setTimeout((()=>{n.classList.remove("hidden"),gi.push(),gi.bindGuide(fi.dialog)}),1),xt("dialogs").classList.remove("hidden"),no(),un[t]={id:t,options:e,el:n},n}function mn(e,t=!1){e.classList.contains("hidden")||(e.classList.add("hidden"),so(),gi.pop(),t&&un[e.id]&&un[e.id].onskip&&un[e.id].onskip(),delete un[e.id],e.__onclose&&e.__onclose(),setTimeout((()=>{1===e.parentNode.childElementCount&&e.parentNode.classList.add("hidden"),e.parentNode.removeChild(e)}),500))}function gn(){for(const e of Object.values(un))mn(e.el,!0)}Gt((()=>{xt("dialogs").addEventListener("mousedown",(e=>{if(e.target!==xt("dialogs"))return;if(!xt("dialogs").children.length)return;const t=xt("dialogs").children[xt("dialogs").children.length-1];t.classList.contains("noclickout")||t.classList.contains("hidden")||(mn(t,!0),xa.SePlay("menuclick"))}))})),Gt((()=>{document.addEventListener("keydown",(function(e){if(e.repeat||!e.target)return;let t=e.code;if("NumpadEnter"===t&&(t="Enter"),"Enter"!==t&&"Escape"!==t)return;if(!e.target.getAttribute(`data-${t.toLowerCase()}`))return;const n=xt(e.target.getAttribute(`data-${t.toLowerCase()}`));"input"===n.tagName.toLowerCase()||"textarea"===n.tagName.toLowerCase()?n.focus():n.click(),e.preventDefault()}))}));const fn=(()=>{let e=null;const t=[];let n={};async function s(e,t){if(!window.crypto?.subtle)return t;const n=await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(t)),s=Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("");return`${e?`${e}-`:""}${s.substring(s.length-9)}`}return Gt((()=>{!async function(){n.set||(window.SYS_INFO?(n=window.SYS_INFO,window.SYS_INFO=null,delete window.SYS_INFO):(n.baseboard=window.BASEBOARD,n.refreshRate=window.REFRESH_RATE,n.timeFormat=window.TIME_FORMAT,n.dateFormat=window.DATE_FORMAT,n.ready=!0),n.set=!0);let o=n;if(!o.ready&&window.IS_ELECTRON&&(n=await window.IPC.invoke("get-systeminfo"),o=n,o.set=!0,!o.ready)){let e;const t=new Promise((t=>e=t));window.IPC.on("systeminfo-ready",((t,s)=>{n=s.systemInfo,o=n,o.set=!0,e()})),await Promise.race([t,new Promise((e=>setTimeout(e,3e4)))])}let a="No-GPU";const r=document.createElement("canvas").getContext("webgl");if(r){const e=r.getExtension("WEBGL_debug_renderer_info");e&&(a=r.getParameter(e.UNMASKED_RENDERER_WEBGL))}const l=navigator.hardwareConcurrency||0,c=navigator.deviceMemory||0,p=navigator.userAgent.replace("//","--")||"No-UA",h=await i.load(),d=(await h.get()).visitorId;let u=localStorage.getItem("debugIdentity");u||(u=`${Date.now()}-${Math.floor(1e9*Math.random())}`.replace("//","--"),localStorage.setItem("debugIdentity",u)),u=u.replace("//","--");const _=`${window.screen.availWidth}x${window.screen.availHeight}@${window.devicePixelRatio||1}`,m={};switch(ot.controls.style){case"guideline":Object.assign(m,lt);break;case"wasd":Object.assign(m,ct);break;case"custom":Object.assign(m,ot.controls.custom)}const g=`${m.moveLeft[0]||"?"}, ${m.moveRight[0]||"?"}, ${m.softDrop[0]||"?"}, ${m.hardDrop[0]||"?"}, ${m.rotateCCW[0]||"?"}, ${m.rotateCW[0]||"?"}, ${m.rotate180[0]||"?"}, ${m.hold[0]||"?"}`.replace("//","--"),f=`${ot.handling.arr}F ARR, ${ot.handling.das}F DAS, ${ot.handling.sdf}X SDF`,b=o.baseboard||"N/A",C=o.majorID?`${await s("M",o.majorID)}${o.virtual?`-Virtual-${o.virtual}`:""}`:"N/A",y=o.virtual?"N/A":(await Promise.all((o.network??[]).map((e=>s("N",e))))).join(", ")||"N/A",x=o.virtual?"N/A":(o.disks??[])[0]?await s("D",o.disks[0]):"N/A";e=`xHW-${btoa(`${p} // ${l}-core // ${c}-GB // ${a} // ${d} // ${u} // ${_} // ${g} // ${f} // ${b} // ${C} // ${y} // ${x}`)}`,t.forEach((t=>t(e))),Tn.finishLoad("hwid")}()})),{get:()=>e,getWhenReady:n=>{e?n(e):t.push(n)},si:()=>n}})(),bn=(()=>{const e={loggedIn:!1,token:"",id:"",username:"",role:"user"};function t(){localStorage.setItem("tetrio_userToken",e.token),localStorage.setItem("tetrio_userID",e.id),localStorage.setItem("tetrio_username",e.username)}return function(){const t=localStorage.getItem("tetrio_userToken")||localStorage.getItem("userToken"),n=localStorage.getItem("tetrio_userID")||localStorage.getItem("userID"),s=localStorage.getItem("tetrio_username")||localStorage.getItem("username");t?(e.loggedIn=!0,e.token=t,e.id=n,e.username=s):(e.loggedIn=!1,e.token="",e.id="",e.username="")}(),{loggedIn:()=>e.loggedIn,id:()=>e.id,token:()=>e.token,username:()=>e.username,changeUsername:n=>{e.username=n,t()},setRole:t=>{e.role=t},role:()=>e.role,logout:()=>{e.loggedIn=!1,e.token="",e.id="",e.username="",Ys.resetZen(),t()},login:(n,s,i,o=!0)=>{e.loggedIn=!0,e.token=n,e.id=s,e.username=i,o&&t()},anon:()=>document.body.classList.contains("anon"),requestPassword:function(t){if(document.body.classList.contains("uses2fa"))return _n({title:"PASSWORD REQUESTED",msg:`to continue, please re-enter the password for <span class="inline_self">${e.username.toUpperCase()}</span><br><input data-escape="request_password_cancel" data-enter="request_password_totp" id="request_password" type="password" placeholder="PASSWORD" autocomplete="current-password"><br><br>as well as a six-digit code from your authenticator app, or one of your recovery codes<br><input data-escape="request_password_cancel" data-enter="request_password_submit" id="request_password_totp" placeholder="six digits" class="mono_input centered_input" autocomplete="off">`,buttons:[{label:"CANCEL",classes:[],id:"request_password_cancel",callback:e=>{e()}},{label:"SUBMIT",classes:["pri"],id:"request_password_submit",callback:e=>{t(xt("request_password").value,xt("request_password_totp").value),e()}}]}),void xt("request_password").focus();_n({title:"PASSWORD REQUESTED",msg:`to continue, please re-enter the password for <span class="inline_self">${e.username.toUpperCase()}</span><br><input data-escape="request_password_cancel" data-enter="request_password_submit" id="request_password" type="password" placeholder="PASSWORD" autocomplete="current-password">`,buttons:[{label:"CANCEL",classes:[],id:"request_password_cancel",callback:e=>{e()}},{label:"SUBMIT",classes:["pri"],id:"request_password_submit",callback:e=>{t(xt("request_password").value,""),e()}}]}),xt("request_password").focus()},esc:async function(e,t){if(!e||!crypto.subtle)return;e=await crypto.subtle.importKey("raw",e,"AES-CBC",!1,["encrypt"]);const n=crypto.getRandomValues(new Uint8Array(16)),s=await crypto.subtle.encrypt({name:"AES-CBC",iv:n},e,(new TextEncoder).encode(t));return btoa(JSON.stringify({x:btoa(String.fromCharCode(...new Uint8Array(s))),z:btoa(String.fromCharCode(...n))}))}}})(),Cn=(()=>{const e=new r.Packr({bundleStrings:!0}),t=new r.Unpackr({bundleStrings:!0});return{send:n=>{let{method:s=(()=>{throw new Error("XHR: A method is required")})(),url:i=(()=>{throw new Error("XHR: A path is required")})(),body:o,authenticated:a,parse:r=!0,ignoreSuccess:l=!1,headers:c={},accept:p,type:h="application/vnd.osk.theorypack"}=n;void 0===a&&(a=i.startsWith("/api/")),void 0===p&&(p=i.startsWith("/api/")?"application/vnd.osk.theorypack":"*/*"),globalThis.X_USE_JSON_API_USE_ON_BOT_ACCOUNT_ONLY&&("application/vnd.osk.theorypack"===p&&(p="application/json"),"application/vnd.osk.theorypack"===h&&(h="application/json"));const d=new XMLHttpRequest;return d.open(s,i,!0),d.setRequestHeader("Accept",p),"application/vnd.osk.theorypack"===p&&(d.responseType="arraybuffer"),"string"==typeof o?d.setRequestHeader("Content-Type","text/plain"):o instanceof FormData||"object"==typeof o&&(d.setRequestHeader("Content-Type",h),"application/json"===h?o=JSON.stringify(o):"application/vnd.osk.theorypack"===h&&(o=e.pack(o))),a&&bn.loggedIn()&&d.setRequestHeader("Authorization",`Bearer ${bn.token()}`),Object.keys(c).forEach((e=>{d.setRequestHeader(e,c[e])})),new Promise(((e,n)=>{d.onload=()=>{if(4===d.readyState){if(!r)return void e(d.responseText);let s=null;switch(d.getResponseHeader("Content-Type").split(";")[0]){case"application/json":s=JSON.parse(d.responseText);break;case"application/vnd.osk.theorypack":s=t.unpack(new Uint8Array(d.response))}if(!l){if(!s)return void n({success:!1,error:{msg:"A connection error has occured"}});if(!s.success)return void n(s)}e(s)}},d.onerror=()=>{n({success:!1,error:{msg:"A connection error has occured"}})},d.send(o)}))},get:(e,t={},n={})=>{let s=!1;return Object.keys(t).forEach((n=>{e+=`${s?"&":"?"}${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`,s=!0})),Cn.send({method:"GET",url:e,...n})},post:(e,t=void 0,n={})=>Cn.send({method:"POST",url:e,body:t,...n})}})();function yn(e){return Math.pow(e/500,.6)+e/(5e3+Math.max(0,e-4e6)/5e3)+1}function xn(e){return Math.floor(yn(e)%1*100)}function An(e,t=""){if(e<0||Number.isNaN(e))return'<div title="No level" class="leveltag ns lt_null">0</div>';const n=Math.floor(e),s=e%1;if(n>=5e3)return`<div title="${Math.floor(100*s)}% towards next level" class="leveltag ns lt_golden">${n}</div>`;const i=Math.floor(n/10)%10,o=Math.floor(n/100)%5,a=Math.floor(n/500)%10;return`<div ${t} title="${Math.floor(100*s)}% towards next level" class="leveltag ns lt_shape_${o} lt_badge_color_${a} lt_shape_color_${i}">${n}</div>`}function vn(e,t){if(e<0||Number.isNaN(e))return t.innerHTML="0",t.className="leveltag ns lt_null",void(t.title="No level");const n=Math.floor(e),s=e%1;if(t.innerHTML=n,n>=5e3)return t.className="leveltag ns lt_golden",void(t.title=`${Math.floor(100*s)}% towards next level`);const i=Math.floor(n/10)%10,o=Math.floor(n/100)%5,a=Math.floor(n/500)%10;t.className=`leveltag ns lt_shape_${o} lt_badge_color_${a} lt_shape_color_${i}`,t.title=`${Math.floor(100*s)}% towards next level`}function kn(e){const t=Math.floor(e);if(5e3==t)return xa.SePlay("level500"),void setTimeout((()=>{xa.SePlay("levelup"),xa.SePlay("allclear"),xa.SePlay("worldrecord")}),750);xa.SePlay(t>=5e3?"level1":t%500!=0?t%100!=0?t%10!=0?"level1":"level10":"level100":"level500")}function wn(e){const t=Math.floor(e);return 5e3==t?"MAX LEVEL!":t>=5e3?"LEVEL UP!":t%500==0?"DISTINGUISHED!":t%100==0?"PROMOTED!":t%10==0?"BADGE UP!":"LEVEL UP!"}function Bn(e,t){if(document.body.classList.contains("anon"))return;const n=yn(e),s=yn(t),i=Math.floor(n)!==Math.floor(s),o=n%1,a=i?1:s%1;vn(n,xt("me_leveling_current")),xt("me_leveling").classList.remove("levelingup"),xt("me_leveling_amt").innerHTML=`+${t-e} xp`,xt("me_leveling_message").classList.add("hidden"),xt("me_leveling_fg").style.right=`calc(${.4*o-.2}em + ${100-100*o}%)`,xt("me_leveling").getBoundingClientRect(),xt("me_leveling").classList.remove("hidden"),setTimeout((()=>{xt("me_leveling_fg").style.right=`calc(${.4*a-.2}em + ${100-100*a}%)`,vn(s,xt("me_level")),vn(s,xt("zenith_party_self_level"))}),750),i?(xt("me_leveling_message").innerHTML=wn(s),setTimeout((()=>{xt("me_leveling_message").classList.remove("hidden"),xt("me_leveling").classList.add(5e3===Math.floor(s)?"maxlevel":"levelingup"),kn(s)}),1750),setTimeout((()=>{vn(s,xt("me_leveling_current"));const e=xt("me_leveling").getBoundingClientRect();xl.play("xp_ultra",{x:e.left,y:e.top,w:e.width,h:e.height})}),2500),setTimeout((()=>{xt("me_leveling").classList.add("hidden"),xt("me_leveling").classList.remove(5001===Math.floor(s)?"maxlevel":"levelingup")}),5001===Math.floor(s)?16750:6750)):setTimeout((()=>{xt("me_leveling").classList.add("hidden")}),3e3)}let Ln=0;function Sn(e,t=!1){(e=Math.floor(e))&&!Number.isNaN(e)&&(!t&&e&&Bn(Ln,Ln+e),Ln+=e)}const zn=new class{_batteryHandle;constructor(){navigator.getBattery&&navigator.getBattery().then((e=>this._setup(e)))}_setup(e){e&&"boolean"==typeof e.charging&&(this._batteryHandle=e,e.addEventListener&&(e.addEventListener("chargingchange",(()=>this._update())),e.addEventListener("levelchange",(()=>this._update()))))}_update(){}get available(){return!!this._batteryHandle}get state(){return this.available?this._batteryHandle.charging?"charging":"discharging":"unavailable"}get charging(){return!!this.available&&this._batteryHandle.charging}get chargingTime(){return this.available?this._batteryHandle.chargingTime:0}get dischargingTime(){return this.available?this._batteryHandle.dischargingTime:1/0}get level(){return this.available?this._batteryHandle.level:1}get isLow(){return!(!this.available||this.charging)&&(this.isCritical||this.level<=.2&&this.dischargingTime<1800)}get isCritical(){return!(!this.available||this.charging)&&(this.level<=.1||this.level<=.3&&this.dischargingTime<600)}};let Fn=!1;const Tn=function(){const e={sfx:{state:"loading SFX..."},fonts:{state:null},textures:{state:null},feecof:{state:null},homebanner:{state:"loading home banner data..."},environment:{state:"checking for game updates..."},hwid:{state:"configuring client..."}};let t=0;const n=[];let s=!1,i=!1;const a=window.I;function r(){xt("preload").classList.add("hidden"),n.forEach((e=>{e()})),function(){const e=Qs.quickjoin;if(!e)return;switch(e.substring(0,2)){case"R:":va.navigateToID(e.trim());break;case"P:":case"D:":break;case"S:":Ii(void 0,e.length>2?e.substring(2).trim():void 0);break;default:qi("connecting to live servers"),i=!0,Ja.require().then((t=>{Ki(),Hi("playmulti"),t.maintenance&&document.body.classList.add("maintenance"),lr.joinRoom(e.trim())})).catch((()=>{Ki(),en("could not connect to live servers")}))}}(),i||document.body.classList.contains("banstatus_restrict")||Ja.connect()}function l(){let t="";Object.keys(e).forEach((n=>{e[n].state&&(t+=`<p>${e[n].state}</p>`)})),xt("preload_msgs").innerHTML=t}function c(){ot.electron.devtools||window.TETRAKARN||Xn.includes(bn.role())||"bot"===bn.role()||"devel"===_.mode||new Function(`debugger;/*\n\nPress F12 to close this screen.\n\n                        \n                         \n                                                                                              \n                                                          \n                                                                      \n                                                                \n                                                          \n                                                        \n                                                            \n                                                                                                \n                        \n                         \n                                                                                              \n                                 \n                                     \n                                             \n                                                                                              \n                         \n                                                                                              \n                 IF SOMEONE TOLD YOU TO OPEN THIS PANEL, YOU ARE BEING SCAMMED!                 \n   The Developer Tools panel can allow an attacker to steal your login information and more.  \n                                                                                                \n                        \n                                                                                                \n                                          \n                                                         \n                                               \n                                                                                                \n                        \n                         \n                                                                                              \n                   TETR.IO  2019 - ${(new Date).getFullYear()} osk                                                    \n                                                                                              \n                   This program is proprietary software. It is licensed                         \n                  to you (the player) for the purpose of playing TETR.IO.                     \n                   Without express written permission, you may not copy,                        \n                  reproduce, distribute, publish, display, perform, modify,                   \n                   create derivative works, transmit, or in any way exploit                     \n                  this software, unless as strictly necessary for the given                   \n                   purpose of the software.                                                     \n                                                                                              \n                         \n                                                                                              \n                                                                       \n                                                                   \n                                                                       \n                                                                                  \n                          Modifications to gameplay                         \n                        are strictly forbidden!                       \n                                                                                                \n                        \n                         \n\nPress F12 to close this screen.\n\n*/`).call(window)}return window.I=void 0,Gt((()=>{"devel"===_.mode&&document.body.classList.add("devel"),xt("js_load_error").classList.add("handled"),o.utils.isWebGLSupported()||xt("no_webgl_error").classList.remove("hidden"),l()})),Gt((()=>{console.log("%cTETR.IO","color: #DFC0F3;\n\t\t\t\t\t display: block;\n\t\t\t\t\t font-size: 5em;\n\t\t\t\t\t font-weight: 900;\n\t\t\t\t\t text-shadow: 0px 0px 2px #9150BA;\n\t\t\t\t\t background-color: #45345088;\n\t\t\t\t\t padding: 0 0.25em;\n\t\t\t\t\t border-radius: 3px;"),console.log("%cPlease be careful when pasting anything in the console. Attackers may be out to steal your login information.","color: #FFA69F;\n\t\t\t\t\t display: block;\n\t\t\t\t\t font-size: 1.2em;\n\t\t\t\t\t font-weight: 900;\n\t\t\t\t\t text-shadow: 0px 0px 2px #D53428;\n\t\t\t\t\t background-color: #993B2288;\n\t\t\t\t\t padding: 0 1em;\n\t\t\t\t\t border-radius: 3px;"),setInterval(c,1e3)})),{i:function(){return a},finishLoad:function(n){e[n].state=null,l(),++t===Object.keys(e).length&&(xt("preload").classList.add("ready"),s&&r())},setState:function(t,n){e[t].state=n,l()},finish:function(){t===Object.keys(e).length&&r(),s=!0},ready:function(e){n.push(e)},unready:function(){s&&(xt("preload").classList.remove("hidden"),s=!1,ji())},update:function(e=!1,t=void 0){Fn=!0,e||Qt({msg:"installing a required update... if this seems stuck, hit CTRL+F5 to force a reload",color:"#0060FF",icon:"update",timeout:15e3});const n=()=>{if(!t)return location.reload(!0);const e=new URLSearchParams(location.search);e.set("hv",t),location.search=e.toString(),location.reload(!0)};try{Ps((()=>{n()}))}catch(e){console.error(e)}setTimeout((()=>{n()}),1e3)}}}(),In={},En=1,Mn=2,Dn=3,On=4,Pn=[["awesome.png",En],["b1.png",En],["bigflush.png",En],["checked.png",En],["crossed.png",En],["dogchoke.png",En],["evil.png",En],["kagari.png",En],["kagayes.png",En],["kagablush.png",En],["kagri.png",En],["konata.png",En],["nicodab.png",En],["pog.png",En],["pausechamp.png",En],["weirdchamp.png",En],["sadchamp.png",En],["tetrio.png",En],["trelele.png",En],["ultreme.png",En],["woomy.png",En],["yui_eyes.png",En],["oyes.png",En],["eee.png",En],["woke.png",En],["bin.png",En],["drboob.png",En],["vno.png",En],["thonk.png",En],["konacry.png",En],["goodmorning.png",En],["goodnight.png",En],["kagasing.png",En],["kagashock.png",En],["crying.png",En],["mikotommr.png",En],["happy.png",En],["feisty.png",En],["cacopog.png",En],["chaotic_cat.png",En],["eyes.png",En,"","eyeseyes"],["unranked.png",En],["rankD.png",En],["rankDplus.png",En],["rankCminus.png",En],["rankC.png",En],["rankCplus.png",En],["rankBminus.png",En],["rankB.png",En],["rankBplus.png",En],["rankAminus.png",En],["rankA.png",En],["rankAplus.png",En],["rankSminus.png",En],["rankS.png",En],["rankSplus.png",En],["rankSS.png",En],["rankU.png",En],["rankX.png",En],["rankXplus.png",En],["kagapog.png",En,"","pogari"],["kogori.png",En],["goodkagari.png",En,"","kagablanket"],["kogori.png",En],["ohyeah.png",En],["alcapog.png",En],["link_pog.png",En],["cabpog.png",En,"","caboozledpog","caboozled_pog"],["piece_z.png",En],["piece_l.png",En],["piece_o.png",En],["piece_s.png",En],["piece_i.png",En],["piece_j.png",En],["piece_t.png",En],["pasta.png",En],["sad.png",En],["kagathink.png",En,"","thinkagari"],["notlikethis.png",En],["random.png",En],["starechamp.png",En],["bench.png",En],["mikot.png",En],["kagaxd.png",En,"","xd"],["mahoblush.png",En],["maholove.png",En],["love.png",En],["serikasip.png",En],["serikabishi.png",En],["serikalove.png",En],["serikabwah.png",En],["unamused.png",En,"","unamusedlink"],["deepwoke.png",En],["pogo.png",En,"","pg"],["nue.png",En],["kotapog.png",En],["tf.png",En,"","troll"],["rshrug.png",En,"","linkshrug"],["ghello.png",En,"","linkwave","bhi"],["bbye.png",En,"","linkbye"],["vwhoops.png",En,"","linkwhoops"],["ok.png",En],["hq.png",En],["lq.png",En],["nq.png",En],["stare.png",En],["questionable.png",En],["clownsmug.png",En],["lesanae.png",En],["vilecreature.png",En],["droidangel.png",En],["droidangry.png",En],["droidcool.png",En],["droidcrazy.png",En],["droidcry.png",En],["droidflushed.png",En],["droidhappy.png",En],["droidhmm.png",En],["droidkiss.png",En],["droidmoney.png",En],["droidsad.png",En],["droidshock.png",En],["droidsmile.png",En],["droidtehe.png",En],["droidwink.png",En],["droidwtf.png",En],["droidzipper.png",En],["daistronk.png",En],["garpog.png",En],["scott_pog.png",En],["beastpog.png",En],["supporter.png",Mn],["drake.gif",Mn],["kagaristep.gif",Mn,"","kagastep"],["nyndance.gif",Mn],["pogchomp.gif",Mn],["worthit.gif",Mn],["laundrycat.gif",Mn,"","catbedoingthelaundry"],["lizzieboi.gif",Mn],["rainbowheart.gif",Mn],["petthekagari.gif",Mn,"","petthekagarin"],["kaganom.gif",Mn],["cirno.gif",Mn],["h.gif",Mn],["blobsweat.png",Mn,'style="width: 2.53em;"'],["gg.png",Mn,'style="width: 2.53em;"'],["ggs.png",Mn,'style="width: 3.17em;"'],["glhf.png",Mn,'style="width: 3.98em;"'],["troort.png",Mn,'style="width: 2.25em;"'],["glad.png",Mn,'style="width: 2.77em;"'],["un.png",Mn,'style="width: 2.93em;"'],["goodholiday.gif",Mn],["capyboogie.gif",Mn],["yapping.gif",Mn],["verified.png",Mn],["gotcha.png",Dn],["kagahorny.png",Dn],["mikotohorny.png",Dn],["tsukasa.png",Dn,'style="width: 212px; height: 219px;"'],["donowall.png",Dn,'style="width: 200px; height: 108px;"'],["kanonsays.png",Dn,'style="width: 200px; height: 238px;"'],["capybara.png",Dn,'style="width: 200px; height: 227px;"'],["garbo.png",Dn,'style="width: 200px; height: 145px;"'],["wifeheart.png",On,'style="width: 128px; height: 127px;"']];function Hn(e,t,n="",...s){const[i,o]=e.split(/(\.\w+)$/),a={id:i.toLowerCase(),type:o,src:`/res/emotes/${i}`,access:t,extra:n};In[`:${i.toLowerCase()}:`]=a;for(const e of s)In[`:${e.toLowerCase()}:`]=a}function Rn(e){if(!e.includes(":"))return[];const t=e.match(/:(\w+):/g);return t?[...new Set(t.map((e=>e.toLowerCase())))]:[]}function Wn(e,t,n,s){const i=e.toLowerCase(),o=In[i];if(!o)return t;switch(o.access){case Mn:if(!n.supporter&&![...Xn,"bot"].includes(n.role))return t;break;case Dn:if(!Xn.includes(n.role))return t;break;case On:if("osk"!==n.username)return t}let a=o.extra;"ultreme"===o.id&&Xn.includes(n.role)&&(a='style="width: 200px; height: 200px;"');const r=new RegExp(i,"gi");return t.replace(r,`<img class="emote" ${a} "data-emotes"${o.id}" title="${i}" alt="${i}" src="${o.src+(s?".png":o.type)}" />`)}function Nn(e,t={},n){if(!1===ot.video.emotes)return e;for(const s of Rn(e))e=Wn(s,e,t,n);return e}function $n(e){if(!1===ot.video.emotes)return!1;for(const t of Rn(e)){const e=In[t.toLowerCase()];if(e&&e.access===Mn)return!0}return!1}for(const e of Pn)Hn(...e);const Gn=["z","d","d+","c-","c","c+","b-","b","b+","a-","a","a+","s-","s","s+","ss","u","x","x+"],Un={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AN:"Netherlands Antilles",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"land Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthlemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia, Plurinational State of",BQ:"Caribbean Netherlands",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, the Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Cte d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CW:"Curaao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",EU:"Europe",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",FR:"France",GA:"Gabon","GB-ENG":"England","GB-NIR":"Northern Ireland","GB-SCT":"Scotland","GB-WLS":"Wales",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran, Islamic Republic of",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova, Republic of",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia, the former Yugoslav Republic of",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Runion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen Islands",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten (Dutch part)",SY:"Syrian Arab Republic",SZ:"Swaziland",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"US Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See (Vatican City State)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela, Bolivarian Republic of",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna Islands",XK:"Kosovo",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe",XX:"Unknown",XM:"The Moon"},Xn=["halfmod","mod","admin","sysop"],jn={default:"options.presets=default;match.modename=VERSUS;match.gamemode=versus;match.ft=1;match.wb=1;match.gp=0;options.stock=0;options.bagtype=7-bag;options.spinbonuses=all-mini+;options.allow180=1;options.kickset=SRS+;options.allow_harddrop=1;options.display_next=1;options.display_hold=1;options.nextcount=5;options.display_shadow=1;options.are=0;options.lineclear_are=0;options.room_handling=0;options.room_handling_arr=2;options.room_handling_das=10;options.room_handling_sdf=6;options.g=0.02;options.gincrease=0.0025;options.gmargin=3600;options.garbagemultiplier=1;options.garbageblocking=combo blocking;options.garbagemargin=10800;options.garbagecapmargin=0;options.garbageincrease=0.008;options.locktime=30;options.garbagespeed=20;options.garbagecap=8;options.garbagecapincrease=0;options.garbagecapmax=40;options.manual_allowed=0;options.b2bchaining=0;options.combotable=multiplier;options.clutch=1;options.passthrough=zero;options.nolockout=1;options.boardwidth=10;options.boardheight=20;options.allclears=1;options.usebombs=0;options.openerphase=14;options.b2bcharging=1;options.allclear_garbage=5;options.allclear_b2b=1;options.roundmode=down;options.garbagespecialbonus=1","tetra league":"options.presets=tetra league;match.modename=TETRA LEAGUE;gamebgm=RANDOMbattle;userLimit=2;match.gamemode=versus;match.ft=7;match.wb=1;match.gp=0;options.stock=0;options.bagtype=7-bag;options.spinbonuses=all-mini+;options.allow180=1;options.kickset=SRS+;options.allow_harddrop=1;options.display_next=1;options.display_hold=1;options.nextcount=5;options.display_shadow=1;options.are=0;options.lineclear_are=0;options.room_handling=0;options.room_handling_arr=2;options.room_handling_das=10;options.room_handling_sdf=6;options.g=0.02;options.gincrease=0.0035;options.gmargin=7200;options.garbagemultiplier=1;options.garbageblocking=combo blocking;options.garbagemargin=10800;options.garbagecapmargin=0;options.garbageincrease=0.008;options.locktime=30;options.garbagespeed=20;options.garbagecap=8;options.garbagecapincrease=0;options.garbagecapmax=40;options.manual_allowed=0;options.b2bchaining=0;options.combotable=multiplier;options.clutch=1;options.passthrough=zero;options.nolockout=1;options.boardwidth=10;options.boardheight=20;options.allclears=1;options.usebombs=0;options.openerphase=14;options.b2bcharging=1;options.allclear_garbage=5;options.allclear_b2b=1;options.roundmode=down;options.garbagespecialbonus=1","tetra league (season 1)":"options.presets=tetra league (season 1);match.modename=TETRA LEAGUE;gamebgm=RANDOMbattle;userLimit=2;match.gamemode=versus;match.ft=7;match.wb=1;match.gp=0;options.stock=0;options.bagtype=7-bag;options.spinbonuses=T-spins;options.allow180=1;options.kickset=SRS+;options.allow_harddrop=1;options.display_next=1;options.display_hold=1;options.nextcount=5;options.display_shadow=1;options.are=0;options.lineclear_are=0;options.room_handling=0;options.room_handling_arr=2;options.room_handling_das=10;options.room_handling_sdf=6;options.g=0.02;options.gincrease=0.0035;options.gmargin=7200;options.garbagemultiplier=1;options.garbageblocking=combo blocking;options.garbagemargin=10800;options.garbagecapmargin=0;options.garbageincrease=0.008;options.locktime=30;options.garbagespeed=20;options.garbagecap=8;options.garbagecapincrease=0;options.garbagecapmax=40;options.manual_allowed=0;options.b2bchaining=1;options.combotable=multiplier;options.clutch=1;options.passthrough=zero;options.nolockout=1;options.boardwidth=10;options.boardheight=20;options.allclears=1;options.usebombs=0;options.openerphase=0;options.b2bcharging=0;options.allclear_garbage=10;options.allclear_b2b=0;options.roundmode=down;options.garbagespecialbonus=0",classic:"options.presets=classic;match.modename=CLASSIC VERSUS;match.gamemode=versus;match.ft=1;match.wb=1;match.gp=0;options.stock=0;options.bagtype=classic;options.spinbonuses=none;options.allow180=0;options.kickset=NRS;options.allow_harddrop=0;options.display_next=1;options.display_hold=0;options.nextcount=1;options.display_shadow=0;options.are=12;options.lineclear_are=18;options.room_handling=1;options.room_handling_arr=5;options.room_handling_das=16;options.room_handling_sdf=6;options.g=0.02;options.gincrease=0.0005;options.gmargin=3600;options.garbagemultiplier=1;options.garbageblocking=none;options.garbagemargin=10800;options.garbagecapmargin=0;options.garbageincrease=0;options.locktime=5;options.garbagespeed=20;options.garbagecap=8;options.garbagecapincrease=0;options.garbagecapmax=40;options.manual_allowed=0;options.b2bchaining=0;options.combotable=none;options.clutch=0;options.passthrough=zero;options.nolockout=1;options.boardwidth=10;options.boardheight=20;options.allclears=0;options.messiness_change=0;options.messiness_inner=0;options.usebombs=0;options.openerphase=0;options.b2bcharging=0;options.allclear_garbage=10;options.allclear_b2b=0;options.roundmode=down;options.garbagespecialbonus=0","enforced delays":"options.presets=enforced delays;match.modename=VERSUS;match.gamemode=versus;match.ft=2;match.wb=1;match.gp=0;options.stock=0;options.bagtype=7-bag;options.spinbonuses=T-spins;options.allow180=0;options.kickset=SRS;options.allow_harddrop=1;options.display_next=1;options.display_hold=1;options.nextcount=5;options.display_shadow=1;options.are=7;options.lineclear_are=35;options.room_handling=1;options.room_handling_arr=2;options.room_handling_das=9;options.room_handling_sdf=10;options.g=0.02;options.gincrease=0.00125;options.gmargin=3600;options.garbagemultiplier=1;options.garbageblocking=limited blocking;options.garbagemargin=0;options.garbagecapmargin=0;options.garbageincrease=0;options.locktime=30;options.garbagespeed=10;options.garbagecap=100;options.garbagecapincrease=0;options.garbagecapmax=100;options.manual_allowed=0;options.b2bchaining=0;options.combotable=classic guideline;options.clutch=0;options.passthrough=zero;options.nolockout=1;options.boardwidth=10;options.boardheight=20;options.allclears=1;options.garbageentry=instant;options.messiness_change=0.25;options.messiness_inner=0.25;options.usebombs=0;options.openerphase=0;options.b2bcharging=0;options.allclear_garbage=10;options.allclear_b2b=0;options.roundmode=down;options.garbagespecialbonus=0",arcade:"options.presets=arcade;match.modename=ARCADE VERSUS;match.gamemode=versus;match.ft=1;match.wb=1;match.gp=0;options.stock=0;options.bagtype=7-bag;options.spinbonuses=T-spins;options.allow180=0;options.kickset=ARS;options.allow_harddrop=1;options.display_next=1;options.display_hold=1;options.nextcount=3;options.display_shadow=0;options.are=27;options.lineclear_are=25;options.room_handling=1;options.room_handling_arr=1;options.room_handling_das=10;options.room_handling_sdf=20;options.g=0.02;options.gincrease=0.0025;options.gmargin=3600;options.garbagemultiplier=1;options.garbageblocking=combo blocking;options.garbagemargin=10800;options.garbagecapmargin=0;options.garbageincrease=0.008;options.locktime=18;options.garbagespeed=20;options.garbagecap=8;options.garbagecapincrease=0;options.garbagecapmax=40;options.manual_allowed=0;options.b2bchaining=0;options.combotable=multiplier;options.clutch=1;options.passthrough=zero;options.nolockout=1;options.boardwidth=10;options.boardheight=20;options.allclears=1;options.usebombs=0;options.openerphase=0;options.b2bcharging=0;options.allclear_garbage=10;options.allclear_b2b=0;options.roundmode=down;options.garbagespecialbonus=0",quickplay:"options.presets=quickplay;match.modename=VERSUS;match.gamemode=versus;match.ft=1;match.wb=1;match.gp=0;options.stock=0;options.bagtype=7-bag;options.spinbonuses=T-spins;options.allow180=1;options.kickset=SRS+;options.allow_harddrop=1;options.display_next=1;options.display_hold=1;options.nextcount=5;options.display_shadow=1;options.are=0;options.lineclear_are=0;options.room_handling=0;options.room_handling_arr=2;options.room_handling_das=10;options.room_handling_sdf=6;options.g=0.05;options.gincrease=0.0025;options.gmargin=0;options.garbagemultiplier=1;options.garbageblocking=combo blocking;options.garbagemargin=10800;options.garbagecapmargin=0;options.garbageincrease=0.008;options.locktime=30;options.garbagespeed=20;options.garbagecap=4;options.garbagecapincrease=0.033;options.garbagecapmax=10;options.manual_allowed=0;options.b2bchaining=1;options.combotable=multiplier;options.clutch=1;options.passthrough=zero;options.nolockout=1;options.boardwidth=10;options.boardheight=20;options.allclears=1;options.usebombs=0;options.openerphase=0;options.b2bcharging=0;options.allclear_garbage=10;options.allclear_b2b=0;options.roundmode=down;options.garbagespecialbonus=0","4wide":"options.presets=4wide;match.modename=4-WIDE;match.gamemode=versus;match.ft=1;match.wb=1;match.gp=0;options.stock=0;options.bagtype=7-bag;options.spinbonuses=handheld;options.allow180=1;options.kickset=SRS-X;options.allow_harddrop=1;options.display_next=1;options.display_hold=1;options.nextcount=5;options.display_shadow=1;options.are=0;options.lineclear_are=0;options.room_handling=0;options.room_handling_arr=2;options.room_handling_das=10;options.room_handling_sdf=6;options.g=0.02;options.gincrease=0.0025;options.gmargin=3600;options.garbagemultiplier=1;options.garbageblocking=combo blocking;options.garbagemargin=10800;options.garbagecapmargin=0;options.garbageincrease=0.008;options.locktime=30;options.garbagespeed=20;options.garbagecap=4;options.garbagecapincrease=0.02;options.garbagecapmax=8;options.manual_allowed=0;options.b2bchaining=0;options.combotable=multiplier;options.clutch=1;options.passthrough=zero;options.nolockout=1;options.boardwidth=4;options.boardheight=26;options.allclears=1;options.usebombs=0;options.openerphase=0;options.b2bcharging=0;options.allclear_garbage=5;options.allclear_b2b=1;options.roundmode=down;options.garbagespecialbonus=0","100 battle royale":"options.presets=100 battle royale;match.modename=BATTLE ROYALE;match.gamemode=royale;userLimit=100;match.ft=1;match.wb=1;match.gp=0;options.stock=0;options.bagtype=7-bag;options.spinbonuses=all-mini+;options.allow180=0;options.kickset=SRS;options.allow_harddrop=1;options.display_next=1;options.display_hold=1;options.nextcount=6;options.display_shadow=1;options.are=6;options.lineclear_are=25;options.room_handling=1;options.room_handling_arr=2;options.room_handling_das=12;options.room_handling_sdf=6;options.g=0.02;options.gincrease=0.003;options.gmargin=3600;options.garbagemultiplier=1;options.garbageblocking=combo blocking;options.garbagemargin=10800;options.garbagecapmargin=0;options.garbageincrease=0.008;options.locktime=30;options.garbagespeed=20;options.garbagecap=100;options.garbagecapincrease=0.033;options.garbagecapmax=100;options.manual_allowed=1;options.b2bchaining=0;options.combotable=classic guideline;options.clutch=0;options.passthrough=zero;options.nolockout=1;options.boardwidth=10;options.boardheight=20;options.allclears=1;options.garbagequeue=1;options.garbagetargetbonus=defensive;options.garbageentry=delayed;options.garbageare=7;options.garbagearebump=12;options.garbageattackcap=20;options.garbageabsolutecap=12;options.messiness_change=0.25;options.messiness_inner=0.25;options.usebombs=0;options.openerphase=14;options.b2bcharging=1;options.allclear_garbage=5;options.allclear_b2b=1;options.roundmode=down;options.garbagespecialbonus=1",bombs:"options.presets=bombs;match.modename=VERSUS;match.gamemode=versus;match.ft=1;match.wb=1;match.gp=0;options.stock=0;options.bagtype=7+2-bag;options.spinbonuses=all-mini+;options.allow180=1;options.kickset=SRS+;options.allow_harddrop=1;options.display_next=1;options.display_hold=1;options.nextcount=5;options.display_shadow=1;options.are=0;options.lineclear_are=0;options.room_handling=0;options.room_handling_arr=2;options.room_handling_das=10;options.room_handling_sdf=6;options.g=0.02;options.gincrease=0.0025;options.gmargin=3600;options.garbagemultiplier=0.8;options.garbageblocking=combo blocking;options.garbagemargin=0;options.garbagecapmargin=0;options.garbageincrease=0.005;options.locktime=30;options.garbagespeed=20;options.garbagecap=8;options.garbagecapincrease=0;options.garbagecapmax=40;options.manual_allowed=0;options.b2bchaining=0;options.combotable=multiplier;options.clutch=1;options.passthrough=zero;options.nolockout=1;options.boardwidth=10;options.boardheight=20;options.allclears=1;options.messiness_inner=0.3;options.usebombs=1;options.openerphase=14;options.b2bcharging=0;options.allclear_garbage=3;options.allclear_b2b=0;options.roundmode=down;options.garbagespecialbonus=0"},qn="\n---default---,DEFAULT,use the default option;\n---empty---,EMPTY,leave this slot empty;\nscore,SCORE,display the score in this slot;\nspp,SCORE (per piece),display the score and score per piece in this slot;\nstopwatch,STOPWATCH,display the time passed in this slot;\nlines,LINES,display the amount of cleared lines in this slot;\npieces,PIECES,display the amount of placed pieces and speed in this slot;\nkeys,INPUTS,display the amount of buttonpresses in this slot;\nfinesse,FINESSE,display your finesse in this slot;\nfinesse_l,FINESSE (SMALLER),display your finesse in this slot (for use on the left-hand side);\nhold,HOLD,display the amount of held pieces in this slot;\nallclears,ALL CLEARS,display the amount of ALL CLEARS in this slot\n".replace(/\n/g,""),Kn="\n---default---,DEFAULT,use the default option;\n---empty---,EMPTY,leave this slot empty;\nscore,SCORE,display the score in this slot;\nspp,SCORE (per piece),display the score and score per piece in this slot;\ntimer,TIMER,display the time remaining in this slot;\nlines,LINES,display the amount of cleared lines in this slot;\nlevel,LEVEL,display the current level in this slot;\npieces,PIECES,display the amount of placed pieces and speed in this slot;\nkeys,INPUTS,display the amount of buttonpresses in this slot;\nfinesse,FINESSE,display your finesse in this slot;\nfinesse_l,FINESSE (SMALLER),display your finesse in this slot (for use on the left-hand side);\nhold,HOLD,display the amount of held pieces in this slot;\nallclears,ALL CLEARS,display the amount of ALL CLEARS in this slot\n".replace(/\n/g,"");Tn.ready((function(e){xt("slot_40l_counter1").setAttribute("data-items",qn),xt("slot_40l_counter2").setAttribute("data-items",qn),xt("slot_40l_counter3").setAttribute("data-items",qn),xt("slot_40l_counter4").setAttribute("data-items",qn),xt("slot_40l_counter5").setAttribute("data-items",qn),xt("slot_blitz_counter1").setAttribute("data-items",Kn),xt("slot_blitz_counter2").setAttribute("data-items",Kn),xt("slot_blitz_counter3").setAttribute("data-items",Kn),xt("slot_blitz_counter4").setAttribute("data-items",Kn),xt("slot_blitz_counter5").setAttribute("data-items",Kn)}));const Vn="\n---empty---,EMPTY,leave this slot empty;\nscore,SCORE,display the score in this slot;\nspp,SCORE (per piece),display the score and score per piece in this slot;\nstopwatch,STOPWATCH,display the time passed in this slot;\ntimer,TIMER,display the time remaining in this slot (for TIMED objective);\nlines,LINES,display the amount of cleared lines in this slot;\nlevel,LEVEL,display the current level in this slot;\npieces,PIECES,display the amount of placed pieces and speed in this slot;\nkeys,INPUTS,display the amount of buttonpresses in this slot;\nhold,HOLD,display the amount of held pieces in this slot;\nallclears,ALL CLEARS,display the amount of ALL CLEARS in this slot;\ngarbage,GARBAGE CLEARED,display the amount of garbage lines cleared in this slot\n".replace(/\n/g,""),Yn=[{id:"room_content_room",classes:"hidden",blocks:[{title:"GENERAL",options:[{id:"name",label:"room name",title:"Name this room will display in the listing as",type:"text",classes:"imp",attributes:'maxlength="64" minlength="1" data-safe="consider"'},{id:"userLimit",label:"player limit",title:"Maximum players in this room. 0 = no limit. Does not apply retroactively.",type:"number",classes:"",attributes:'max="999" min="0"'},{id:"autoStart",label:"auto start",title:"Countdown until the room start. 0 = to disable.",type:"number",classes:"",attributes:'max="60" min="0"',new_until:16672608e5},{id:"public",label:"public room",title:"When enabled, broadcast the room and its info to the public room listing.",type:"checkbox",classes:"",attributes:""},{id:"allowAnonymous",label:"allow anonymous users to join",title:"Whether to allow anonymous users to enter this room. Does not apply retroactively.",type:"checkbox",classes:"",attributes:""},{id:"allowQueued",label:"allow users who are in matchmaking to join",title:"Whether to allow users who are in a matchmaking queue to enter this room. Does not apply retroactively.",type:"checkbox",classes:"",attributes:""},{id:"allowUnranked",label:"allow unranked users to play",title:"Whether to allow unranked users to play in this room.",type:"checkbox",classes:"",attributes:"",new_until:16672608e5},{id:"userRankLimit",label:"rank limit",title:"The maximum TETRA LEAGUE rank players may have to play in this room.",type:"slider",classes:"",attributes:'min="0" max="18" step="1"',new_until:16672608e5},{id:"useBestRankAsLimit",label:"limit by top rank",title:"If a rank limit is set, use the players' top ranks instead of their current ranks.",type:"checkbox",classes:"",attributes:"",new_until:1674882e6},{id:"gamebgm",label:"music",title:"Background song to play. If random, not everyone will hear the same song.",type:"music",classes:"imp",attributes:""}]}]},{id:"room_content_match",classes:"hidden",blocks:[{title:"GENERAL",options:[{id:"match.gamemode",label:"gamemode",title:"Game mode.",type:"spinner",classes:"super-imp",attributes:'data-items="versus,VERSUS,[2 -  players] great for 1v1 and small lobbies!;royale,BATTLE ROYALE,[2 -  players] a full-fledged battle royale gamemode great for big lobbies!;practice,PRACTICE,[2 players] great for live training with a friend! enables undoing and resetting your board, just like in ZEN mode"',new_until:17025984e5},{id:"match.ft",label:"first to (FT)",title:"Amount of rounds one must win to win the game.",type:"number",classes:"imp",attributes:'max="1000" min="1"'},{id:"match.wb",label:"win by (WB)",title:"Amount of rounds one must win over the second place to secure the win.",type:"number",classes:"imp",attributes:'max="1000" min="1"'},{id:"match.gp",label:"golden point (GP)",title:"When not 0, winning this amount of rounds always secures the win regardless of Win By. Only applies when Win By is greater than 1.",type:"number",classes:"imp",attributes:'max="1000" min="0"'},{id:"options.stock",label:"stock",title:"Amount of extra lives one has.",type:"number",classes:"",attributes:'max="10" min="0"'}]}]},{id:"room_content_game",classes:"hidden",blocks:[{title:"GENERAL",options:[{id:"options.presets",label:"game presets",title:"Presets to apply to this room",value:"DEFAULT",type:"spinner",classes:"super-imp",attributes:"id=\"game-presets\" data-items=\"default,DEFAULT,TETR.IO's premier room settings. optimized for battles with small groups or duels against friends and foes alike!;tetra league,TETRA LEAGUE,settings copied directly from TETR.IO's matchmaking rooms! margin times and match goals are shifted slightly with duels in mind.;tetra league (season 1),TETRA LEAGUE (season 1),last season's TETRA LEAGUE rules!;enforced delays,ENFORCED DELAYS,this preset introduces several forms of enforced handling which introduces a generous skill ceiling! puts a focus on efficient and consistent play\\, as opposed to deafeningly fast rounds.;4wide,4-WIDE,this party-focused preset uses a nonstandard board size which allows you to infinitely combo.;100 battle royale,100 BATTLE ROYALE,this preset is similar to the BATTLE ROYALE gamemode but at a slower pace.;classic,CLASSIC,an endurance-focused challenge of pure stacking intellect! almost every value is changed to imitate stacker games made many years ago.;arcade,ARCADE,featuring innovative mechanics created for a popular stacker found in arcades\\, this preset puts a focus on smart stacking and mastery with its custom kick table!;bombs,BOMBS,versus with an explosive twist! stack pieces on top of garbage to clear it and send devastating attacks to your opponents!;quickplay,LEGACY QUICK PLAY,this legacy preset emulates TETR.IO's QUICK PLAY experience pre 6.4.0\"",new_until:17025984e5},{id:"options.bagtype",label:"random bag type",title:"The type of system used to generate random pieces.",type:"spinner",classes:"imp",attributes:'data-items="7-bag,7-BAG,keep shuffling a bag of the 7 tetrominoes;14-bag,14-BAG,keep shuffling a bag of 2x the 7 tetrominoes;7+1-bag,7+1-BAG,keep shuffling a bag of the 7 tetrominoes with one random extra tetromino;7+2-bag,7+2-BAG,keep shuffling a bag of the 7 tetrominoes with two random extra tetrominoes;7+x-bag,7+X-BAG,keep shuffling a bag of the 7 tetrominoes. the first few bags contain a few extras.;classic,CLASSIC,random with repetition protection;pairs,PAIRS,alternate between 2 tetrominoes;total mayhem,TOTAL MAYHEM,completely random generation"'},{id:"options.spinbonuses",label:"allowed spins",title:"The type of pieces allowed to do spins.",type:"spinner",classes:"imp",attributes:'data-items="T-spins,T-SPINS,receive bonuses for spinning T-pieces;T-spins+,T-SPINS+,receive bonuses for spinning T-pieces (immobile allowed);all+,ALL-SPIN+,receive bonuses for spinning all pieces (immobile allowed);all,ALL-SPIN,receive bonuses for spinning all pieces;all-mini+,ALL-MINI+,receive bonuses for spinning T-pieces (immobile allowed) and receive back-to-back for spinning all other pieces;all-mini,ALL-MINI,receive bonuses for spinning T-pieces and receive back-to-back for spinning all other pieces;mini-only,MINI-ONLY,receive back-to-back for spinning all pieces;handheld,HANDHELD,receive bonuses for spinning all pieces BUT attacks are halved except for T-SPINS;stupid,STUPID,everything is a spin because YEAH WHY NOT (O-spin SUPPORTED!);none,NONE,receive no spin bonuses"',new_until:1737936e6},{id:"options.garbagespecialbonus",label:"garbage special bonus",title:"Add +1 to special clears (Quads and (All-)Spins) that clear garbage.",type:"checkbox",classes:"",attributes:"",new_until:17275608e5},{id:"options.combotable",label:"combo table",title:"What combo table to use.",type:"spinner",classes:"imp",attributes:'data-items="none,NONE,disable combo chaining;multiplier,MULTIPLIER,TETR.IO\'s combo multiplier;classic guideline,CLASSIC GUIDELINE,classic guideline combo table;modern guideline,MODERN GUIDELINE,modern guideline combo table"',new_until:16672608e5},{id:"options.allow180",label:"allow 180 spins",title:"Whether to allow the 180 rotation key to be used.",type:"checkbox",classes:"imp",attributes:""},{id:"options.kickset",label:"kick table",title:"The type of kicks that pieces can do.",type:"spinner",classes:"",attributes:'data-items="SRS+,SRS+,the default natural rotation system with symmetric I-piece rotation;SRS,SRS,the standard natural rotation system;SRS-X,SRS-X,SRS with more powerful 180 spins;TETRA-X,TETRA-X,novel rotation system by DR OCELOT;NRS,NRS,the classic rotation system;ARS,ARS,rotation system used in arcade games;ASC,ASC,permissive rotation system by WINTERNEBS;none,NONE,no kicks possible"'},{id:"options.usebombs",label:"bombs-style garbage",title:"If enabled, use Bombs-style garbage (stack on top to clear) as opposed to the standard.",type:"checkbox",classes:"",attributes:"",new_until:17131392e5},{id:"options.allow_harddrop",label:"use hard drop",title:"Whether to allow use of the Hard Drop button.",type:"checkbox",classes:"",attributes:""},{id:"options.display_next",label:"use NEXT queue",title:"Whether to show the NEXT queue.",type:"checkbox",classes:"",attributes:""},{id:"options.display_hold",label:"use HOLD queue",title:"Whether to use the HOLD queue.",type:"checkbox",classes:"",attributes:""},{id:"options.nextcount",label:"next pieces",title:"Amount of pieces shown in the NEXT queue, if said queue is enabled.",type:"number",classes:"",attributes:'min="1" max="6"',new_until:17025984e5},{id:"options.infinite_movement",label:"infinite movement",title:"Whether to never lock, as long as you keep moving the piece.",type:"checkbox",classes:"",attributes:"",new_until:1737936e6},{id:"options.infinite_hold",label:"infinite HOLD",title:"If enabled, do not disable HOLD after using it.",type:"checkbox",classes:"",attributes:"",new_until:1737936e6},{id:"options.display_shadow",label:"show shadow piece",title:"Whether to show the shadow piece.",type:"checkbox",classes:"",attributes:""},{id:"options.are",label:"ARE",title:"Amount of time in frames in between a piece being placed and the next one spawning.",type:"number",classes:"",attributes:'min="0" max="300"'},{id:"options.lineclear_are",label:"line clear ARE",title:"Amount of time in frames in between a piece being placed and the next one spawning, if a line was cleared.",type:"number",classes:"",attributes:'min="0" max="300"'},{id:"options.room_handling",label:"enforce below handling settings",title:"Whether to enforce the handling settings below.",type:"checkbox",classes:"",attributes:""},{id:"options.room_handling_arr",label:"enforced ARR",title:"Auto Repeat Rate, enforced if 'enforce below handling settings' is enabled.",type:"number",classes:"",attributes:'min="0" max="5" step="0.1"'},{id:"options.room_handling_das",label:"enforced DAS",title:"Delayed Auto Shift, enforced if 'enforce below handling settings' is enabled.",type:"number",classes:"",attributes:'min="1" max="20" step="0.1"'},{id:"options.room_handling_sdf",label:"enforced SDF",title:"Soft Drop Factor, enforced if 'enforce below handling settings' is enabled. Use 41 for MAX.",type:"number",classes:"",attributes:'min="5" max="21"'},{id:"options.nolockout",label:"disable lockout",title:"If checked, disables being eliminated from stacking above the skyline.",type:"checkbox",classes:"",attributes:""},{id:"options.boardwidth",label:"board width",title:"The width of the playing field.",type:"number",classes:"",attributes:'max="20" min="4"'},{id:"options.boardheight",label:"board height",title:"The height of the playing field.",type:"number",classes:"",attributes:'max="40" min="4"'}]},{title:"GRAVITY & MARGIN TIME",options:[{id:"options.g",label:"gravity",title:"Starting gravity (how fast blocks drop). Higher is faster.",type:"number",classes:"",attributes:'max="20" min="0" step="0.01"'},{id:"options.gincrease",label:"gravity increase",title:"The amount of gravity increase per second.",type:"number",classes:"",attributes:'max="1" min="0" step="0.0001"'},{id:"options.gmargin",label:"gravity margin time",title:"Amount of time in frames until the gravity starts to increase.",type:"number",classes:"",attributes:'max="100000" min="0" step="1"'},{id:"options.garbagemultiplier",label:"garbage multiplier",title:"Starting garbage multiplier. 1 means normal amount of garbage, 2 means double.",type:"number",classes:"",attributes:'max="100" min="0" step="0.1"'},{id:"options.garbagemargin",label:"garbage margin time",title:"Amount of time in frames until the garbage multiplier starts to increase.",type:"number",classes:"",attributes:'max="100000" min="0" step="1"'},{id:"options.garbageincrease",label:"garbage increase",title:"The amount of garbage multiplier increase per second.",type:"number",classes:"",attributes:'max="1" min="0" step="0.0001"'},{id:"options.messiness_change",label:"messiness on change",title:"The chance (from 0 to 1) that the garbage column changes per attack.",type:"number",classes:"",attributes:'max="1" min="0" step="0.01"',new_until:1711224e6},{id:"options.messiness_inner",label:"messiness within attack",title:"The chance (from 0 to 1) that the garbage column changes per garbage row.",type:"number",classes:"",attributes:'max="1" min="0" step="0.01"',new_until:1711224e6},{id:"options.messiness_nosame",label:"avoid same column RNG",title:"If checked, RNG may not roll the same garbage column twice.",type:"checkbox",classes:"",attributes:"",new_until:1711224e6},{id:"options.messiness_timeout",label:"messiness timeout",title:"Amount of time in frames until garbage will always pick a different column.",type:"number",classes:"",attributes:'max="3600" min="0" step="1"',new_until:1711224e6},{id:"options.locktime",label:"lock delay",title:"If not using master levels, the amount of frames until a piece locks down.",type:"number",classes:"",attributes:'min="1"'},{id:"options.garbagespeed",label:"garbage travel speed",title:"The time it takes in frames for garbage to travel.",type:"number",classes:"",attributes:'min="1" max="600"'},{id:"options.garbagecap",label:"garbage cap",title:"Amount of garbage that may enter the screen at once.",type:"number",classes:"",attributes:'min="1" max="40"'},{id:"options.garbagecapmargin",label:"garbage cap margin",title:"Amount of time in frames until the garbage cap starts to increase.",type:"number",classes:"",attributes:'max="100000" min="0" step="1"',new_until:1730421684e3},{id:"options.garbagecapincrease",label:"garbage cap increase",title:"The amount of garbage cap increase per second.",type:"number",classes:"",attributes:'max="1" min="0" step="0.0001"'},{id:"options.garbagecapmax",label:"garbage cap max",title:"Maximum amount the garbage cap may reach.",type:"number",classes:"",attributes:'min="1" max="40"'},{id:"options.garbageabsolutecap",label:"garbage absolute cap",title:"Maximum amount of garbage the pending queue can hold. Any received garbage beyond this limit is nullified.",type:"number",classes:"",attributes:'min="0" max="100"',new_until:17025984e5},{id:"options.garbagephase",label:"garbage phase",title:"Amount of time in frames between each garbage phase. Each pending garbage segment has three phases before activation.",type:"number",classes:"",attributes:'min="0" max="1000"',new_until:17025984e5},{id:"options.garbagetargetbonus",label:"garbage target bonus",title:"Adds a bonus to sent garbage depending on the amount of players targeting you.",type:"spinner",classes:"",attributes:'data-items="none,NONE,no bonus whatsoever;defensive,DEFENSIVE,a bonus is added when defending incoming attacks;offensive,OFFENSIVE,a bonus is added to both defense and offence"',new_until:17025984e5},{id:"options.openerphase",label:"opener phase",title:"Amount of pieces of the opener phase. During the opener phase, if your total lines sent is less than the amount pending, you cancel double.",type:"number",classes:"",attributes:'min="0" max="1000"',new_until:1724436e6},{id:"options.garbageentry",label:"garbage entry",title:"Whether garbage should enter instantly or continuously.",type:"spinner",classes:"",attributes:'data-items="instant,INSTANT,garbage enters instantly;continuous,CONTINUOUS,garbage rolls in one by one;delayed,DELAYED PIECE SPAWN,garbage rolls in one by one but delays your next piece"',new_until:17025984e5},{id:"options.garbageare",label:"garbage are",title:"Amount of time in frames to wait during garbage spawning. Not applicable to instantaneous entry.",type:"number",classes:"",attributes:'min="1" max="300"',new_until:17025984e5},{id:"options.garbagearebump",label:"garbage are hesitation",title:"Amount of extra time in frames to wait during garbage spawning if a line is cleared during the process. Not applicable to instantaneous entry.",type:"number",classes:"",attributes:'min="0" max="300"',new_until:17440524e5},{id:"options.garbagequeue",label:"garbage queue",title:"Whether to only activate the first garbage segment in the queue.",type:"checkbox",classes:"",attributes:"",new_until:17025984e5},{id:"options.garbageblocking",label:"garbage blocking",title:"The type of blocking to use.",type:"spinner",classes:"",attributes:'data-items="combo blocking,COMBO BLOCKING,incoming garbage will be delayed and reduced on successive line clears;limited blocking,LIMITED BLOCKING,incoming garbage can be reduced only once per next immediate piece;none,NONE,incoming garbage cannot be blocked"',new_until:16672608e5},{id:"options.manual_allowed",label:"allow manual targeting",title:"Whether to allow users to click boards to manually target them.",type:"checkbox",classes:"",attributes:""},{id:"options.b2bchaining",label:"enable back-to-back chaining",title:"Whether to make long Back-to-Back chains become more powerful.",type:"checkbox",classes:"",attributes:""},{id:"options.b2bcharging",label:"enable back-to-back charging",title:"Whether to charge up a large spike with Back-to-Back, sent by breaking the chain.",type:"checkbox",classes:"",attributes:"",new_until:1724436e6},{id:"options.allclears",label:"enable all clears",title:"Whether to reward clearing the entire board",type:"checkbox",classes:"",attributes:"",new_until:1693099917e3},{id:"options.allclear_garbage",label:"all clear garbage",title:"Amount of garbage sent when performing an All Clear.",type:"number",classes:"",attributes:'min="0" max="100"',new_until:1724436e6},{id:"options.allclear_b2b",label:"all clear back-to-back",title:"Amount of Back-To-Back chains applied when performing an All Clear.",type:"number",classes:"",attributes:'min="0" max="100"',new_until:1724436e6},{id:"options.clutch",label:"enable clutch clears",title:"If checked, grants immunity to death right after clearing a line.",type:"checkbox",classes:"",attributes:""},{id:"options.passthrough",label:"garbage passthrough",title:"Whether attacks can be canceled while in transit or during latency.",type:"spinner",classes:"imp",attributes:'data-items="zero,ZERO,opposing attacks in transit always cancel eachother out;limited,LIMITED,opposing attacks in transit cancel out while garbage is flying;consistent,CONSISTENT,opposing attacks in transit cancel out except when garbage is flying;full,FULL,opposing attacks in transit do not cancel eachother out"',new_until:16818624e5},{id:"options.roundmode",label:"rounding mode",title:"The type of rounding mode to use for garbage.",type:"spinner",classes:"",attributes:'data-items="down,DOWN,all values are rounded down;rng,RNG,weighted randomness is used to smooth values (e.g. 1.23 has a 23% chance to become 2)"',new_until:1724436e6}]}]}],Qn=[{id:"custom_content_game",classes:"",blocks:[{title:"GENERAL",options:[{id:"bagtype",label:"random bag type",title:"The type of system used to generate random pieces.",type:"spinner",classes:"imp",value:"7-bag",attributes:'data-items="7-bag,7-BAG,keep shuffling a bag of the 7 tetrominoes;14-bag,14-BAG,keep shuffling a bag of 2x the 7 tetrominoes;7+1-bag,7+1-BAG,keep shuffling a bag of the 7 tetrominoes with one random extra tetromino;7+2-bag,7+2-BAG,keep shuffling a bag of the 7 tetrominoes with two random extra tetrominoes;7+x-bag,7+X-BAG,keep shuffling a bag of the 7 tetrominoes. the first few bags contain a few extras.;classic,CLASSIC,random with repetition protection;pairs,PAIRS,alternate between 2 tetrominoes;total mayhem,TOTAL MAYHEM,completely random generation"'},{id:"spinbonuses",label:"allowed spins",title:"The type of pieces allowed to do spins.",type:"spinner",classes:"imp",value:"all-mini+",attributes:'data-items="T-spins,T-SPINS,receive bonuses for spinning T-pieces;T-spins+,T-SPINS+,receive bonuses for spinning T-pieces (immobile allowed);all+,ALL-SPIN+,receive bonuses for spinning all pieces (immobile allowed);all,ALL-SPIN,receive bonuses for spinning all pieces;all-mini+,ALL-MINI+,receive bonuses for spinning T-pieces (immobile allowed) and receive back-to-back for spinning all other pieces;all-mini,ALL-MINI,receive bonuses for spinning T-pieces and receive back-to-back for spinning all other pieces;mini-only,MINI-ONLY,receive back-to-back for spinning all pieces;handheld,HANDHELD,receive bonuses for spinning all pieces. non T-SPINS attacks are halved. pieces use 4-corner detection;stupid,STUPID,everything is a spin because YEAH WHY NOT (O-spin SUPPORTED!);none,NONE,receive no spin bonuses"',new_until:1737936e6},{id:"combotable",label:"combo table",title:"What combo table to use.",type:"spinner",classes:"imp",value:"multiplier",attributes:'data-items="none,NONE,Disable combo chaining;multiplier,MULTIPLIER,TETR.IO\'s combo multiplier;classic guideline,CLASSIC GUIDELINE,classic guideline combo table;modern guideline,MODERN GUIDELINE,modern guideline combo table"'},{id:"allclears",label:"enable all clears",title:"Whether to reward clearing the entire board",type:"checkbox",classes:"",attributes:"checked",new_until:1693099917e3},{id:"seed_random",label:'use random seed (overrides "seed")',title:"Whether to use a random seed.",type:"checkbox",classes:"",attributes:"checked"},{id:"seed",label:"seed",title:'Seed to use, if "use random seed" is not checked.',type:"number",classes:"",attributes:'max="2147483647" min="0" value="0"'},{id:"can_retry",label:"allow retry",title:"Whether to allow retrying.",type:"checkbox",classes:"",attributes:"checked"},{id:"stock",label:"stock",title:"Amount of extra lives one has.",type:"number",classes:"",attributes:'max="10" min="0" value="0"'},{id:"clutch",label:"enable clutch clears",title:"If checked, grants immunity to death right after clearing a line.",type:"checkbox",classes:"",attributes:"checked"},{id:"nolockout",label:"disable lockout",title:"If checked, disables being eliminated from stacking above the skyline.",type:"checkbox",classes:"",attributes:"checked"},{id:"boardwidth",label:"board width",title:"The width of the playing field.",type:"number",classes:"",attributes:'max="20" min="4" value="10"'},{id:"boardheight",label:"board height",title:"The height of the playing field.",type:"number",classes:"",attributes:'max="40" min="4" value="20"'}]},{title:"SURVIVAL",options:[{id:"survivalmode",label:"mode",title:"Type of survival garbage (cheese) to spawn.",type:"spinner",classes:"",value:"none",attributes:'data-items="none,NONE,do not spawn any garbage;layer,LAYER,keep a layer of garbage on the board;timer,TIMER,spawn garbage on a timer"'},{id:"survival_messiness",label:"garbage messiness %",title:"How messy survival garbage is, if enabled. 0 = completely clean, 100 = completely messy.",type:"number",classes:"",attributes:'max="100" min="0" value="100"'},{id:"survival_cap",label:"garbage cap",title:"Maximum amount of survival garbage to spawn. Any additional garbage will not spawn. 0 = infinite.",type:"number",classes:"",attributes:'max="1000000" min="0" value="0"'},{id:"survival_layer_amt",label:"layer height",title:"If the survival mode is set to layer, the height of said layer.",type:"number",classes:"",attributes:'max="40" min="1" value="9"'},{id:"survival_layer_non",label:"sticky layer",title:"If checked, do not raise the cheese layer while in a combo.",type:"checkbox",classes:"",attributes:"checked"},{id:"survival_layer_min",label:"minimum layer height",title:"If the survival mode is set to layer, the minimum height of said layer. (Garbage cap overrides this!)",type:"number",classes:"",attributes:'max="40" min="0" value="3"'},{id:"survival_timer_itv",label:"timer interval",title:"If the survival mode is set to timer, the interval in frames between spawns.",type:"number",classes:"",attributes:'max="216000" min="1" value="60"'}]},{title:"CONTROLS",options:[{id:"allow180",label:"allow 180 spins",title:"Whether to allow the 180 rotation key to be used.",type:"checkbox",classes:"",attributes:"checked"},{id:"kickset",label:"kick table",title:"The type of kicks that pieces can do.",type:"spinner",classes:"",value:"SRS+",attributes:'data-items="SRS+,SRS+,the default natural rotation system with symmetric I-piece rotation;SRS,SRS,the standard natural rotation system;SRS-X,SRS-X,SRS with more powerful 180 spins;TETRA-X,TETRA-X,novel rotation system by DR OCELOT;NRS,NRS,the classic rotation system;ARS,ARS,rotation system used in arcade games;ASC,ASC,permissive rotation system by WINTERNEBS;none,NONE,no kicks possible"'},{id:"allow_harddrop",label:"use hard drop",title:"Whether to allow use of the Hard Drop button.",type:"checkbox",classes:"",attributes:"checked"},{id:"display_next",label:"use NEXT queue",title:"Whether to show the NEXT queue.",type:"checkbox",classes:"",attributes:"checked"},{id:"display_hold",label:"use HOLD queue",title:"Whether to use the HOLD queue.",type:"checkbox",classes:"",attributes:"checked"},{id:"nextcount",label:"next pieces",title:"Amount of pieces shown in the NEXT queue, if said queue is enabled.",type:"number",classes:"",attributes:'min="1" value="5" max="5"'},{id:"infinite_movement",label:"infinite movement",title:"Whether to never lock, as long as you keep moving the piece.",type:"checkbox",classes:"",attributes:""},{id:"infinite_hold",label:"infinite HOLD",title:"If enabled, do not disable HOLD after using it.",type:"checkbox",classes:"",attributes:"",new_until:1737936e6},{id:"display_shadow",label:"show shadow piece",title:"Whether to show the shadow piece.",type:"checkbox",classes:"",attributes:"checked"},{id:"are",label:"ARE",title:"Amount of time in frames in between a piece being placed and the next one spawning.",type:"number",classes:"",attributes:'min="0" value="0" max="300"'},{id:"lineclear_are",label:"line clear ARE",title:"Amount of time in frames in between a piece being placed and the next one spawning, if a line was cleared.",type:"number",classes:"",attributes:'min="0" value="0" max="300"'}]},{title:"GRAVITY & LEVELLING",options:[{id:"g",label:"gravity",title:"Gravity (how fast blocks drop). Higher is faster.",type:"number",classes:"",attributes:'max="100" min="0" step="0.01" value="0.02"'},{id:"levels",label:'use levelling (overrides "gravity")',title:"Whether to allow players to level up. Overrides the normal gravity.",type:"checkbox",classes:"",attributes:"checked"},{id:"masterlevels",label:"use master levels",title:"If enabled, allow levels past 20 to become MASTER LEVELS (faster lock-down time and less resets).",type:"checkbox",classes:"",attributes:""},{id:"startinglevel",label:"starting level",title:"Level to start at.",type:"number",classes:"",attributes:'value="1" min="1"'},{id:"levelspeed",label:"level speed",title:"How fast you clear levels.",type:"number",classes:"",attributes:'step="0.01" value="1"'},{id:"levelstatic",label:'use static levelling (overrides "level speed")',title:"Use a static amount of lines to level up.",type:"checkbox",classes:"",attributes:"checked"},{id:"levelstaticspeed",label:"level static speed",title:"If using static levelling, the amount of lines needed to clear a level.",type:"number",classes:"",attributes:'min="1" value="10"'},{id:"levelgbase",label:"base gravity",title:"When using levels, the starting gravity.",type:"number",classes:"",attributes:'step="0.01" value="0.8"'},{id:"levelgspeed",label:"gravity increase",title:"When using levels, the speed with which gravity increases.",type:"number",classes:"",attributes:'step="0.001" value="0.007"'},{id:"locktime",label:"lock delay",title:"If not using master levels, the amount of frames until a piece locks down.",type:"number",classes:"",attributes:'min="1" value="30"'}]}]},{id:"custom_content_objective",classes:"hidden",blocks:[{title:"GENERAL",options:[{id:"objective_type",label:"objective",title:"Game mode.",type:"spinner",classes:"super-imp",value:"lines",attributes:'data-items="none,NONE,play infinitely;lines,LINES,get to a set amount of lines to clear;timed,TIMED,play for a set amount of time to clear;garbage,GARBAGE,get to a set amount of garbage lines to clear"'},{id:"objective_count",label:"count",title:"Amount of primary key to get in LINES mode. For example, in LINES mode this would be the amount of lines to be cleared.",type:"number",classes:"imp",attributes:'min="1" value="150"'},{id:"objective_time",label:"time",title:"Amount of time in milliseconds. For example, in TIMED mode this would be the amount of time until the game ends.",type:"number",classes:"imp",attributes:'min="1" value="120000"'},{id:"objective_result",label:"key",title:"The counter you will be judged on at the end of the game.",type:"spinner",classes:"super-imp",value:"score",attributes:'data-items="score,SCORE,final score will be displayed;time,TIME,final time will be displayed;lines,LINES,final line count will be displayed"'},{id:"topoutisclear",label:"topping out is OK",title:"If enabled, still display the results screen if the player tops out.",type:"checkbox",classes:"",attributes:"checked"},{id:"pro",label:"display objective behind board",title:"If enabled, show the objective target on the board. (pro mode)",type:"checkbox",classes:"",attributes:""}]}]},{id:"custom_content_meta",classes:"hidden",blocks:[{title:"INTRO",options:[{id:"mission",label:"mission",title:"Text displayed before starting game.",type:"text",classes:"imp",attributes:'value="CUSTOM GAME"'},{id:"stride",label:"stride mode",title:"Speeds up animations and disables some of the below settings.",type:"checkbox",classes:"",attributes:""},{id:"countdown",label:"play countdown",title:"Whether to play a countdown.",type:"checkbox",classes:"",attributes:"checked"},{id:"countdown_count",label:"countdown count",title:"Amount of steps in the countdown.",type:"number",classes:"",attributes:'min="1" value="3" max="60"'},{id:"countdown_interval",label:"countdown interval",title:"Amount of milliseconds between countdown ticks.",type:"number",classes:"",attributes:'min="1" value="1000"'},{id:"precountdown",label:"time before countdown",title:"Amount of milliseconds before the countdown is started.",type:"number",classes:"",attributes:'min="1" value="3000"'},{id:"prestart",label:"time before start",title:"Amount of milliseconds before the game is created.",type:"number",classes:"",attributes:'min="1" value="1000"'},{id:"zoominto",label:"zoom animation",title:"Type of animation to play when starting.",type:"spinner",classes:"",value:"slow",attributes:'data-items="none,NO ANIMATION,display no animation;fast,FAST,display a fast animation;slow,SLOW,display a slow animation;cinematic,CINEMATIC,display a very slow animation"'}]},{title:"COUNTERS",options:[{id:"slot_counter1",label:"left counter slot 1",title:"The type of metric to display in the first left-hand slot.",type:"spinner",classes:"",value:"stopwatch",attributes:`data-items="${Vn}"`},{id:"slot_counter2",label:"left counter slot 2",title:"The type of metric to display in the second left-hand slot.",type:"spinner",classes:"",value:"lines",attributes:`data-items="${Vn}"`},{id:"slot_counter3",label:"left counter slot 3",title:"The type of metric to display in the third left-hand slot.",type:"spinner",classes:"",value:"level",attributes:`data-items="${Vn}"`},{id:"slot_counter4",label:"left counter slot 4",title:"The type of metric to display in the fourth left-hand slot.",type:"spinner",classes:"",value:"---empty---",attributes:`data-items="${Vn}"`},{id:"slot_counter5",label:"right counter slot",title:"The type of metric to display in the right-hand slot.",type:"spinner",classes:"",value:"score",attributes:`data-items="${Vn}"`},{id:"absolute_lines",label:"enforce absolute line count",title:"Do not display the progression through the level in the line count.",type:"checkbox",classes:"",attributes:"checked"},{id:"slot_bar2",label:"display progress bar",title:"Whether to display the progress bar on the right.",type:"checkbox",classes:"",attributes:"checked"}]}]}];function Zn(e,t){let n="";return e.forEach((e=>{n+=`<div class="scroller room_content tab_content ${e.classes}" data-scope="${t}" id="${e.id}"><p class="rc_moreinfo ns">hover over a setting for more info</p>`,e.blocks.forEach((e=>{n+=`<div class="scroller_block light"><h2 class="ns">${e.title}</h2>`,e.options.forEach((e=>{let t="";switch(Date.now()<e.new_until&&(t+='<div class="room_config_newtag ns">NEW</div>'),e.type){case"text":n+=`<div class="room_config_row flex-row ${e.classes}" title="${e.title}">\n\t\t\t\t\t\t\t\t\t<div class="room_config_label flex-item ns">${e.label}</div>\n\t\t\t\t\t\t\t\t\t<input class="room_config_item flex-item" data-index="${e.id}" ${e.attributes}>\n\t\t\t\t\t\t\t\t\t${t}\n\t\t\t\t\t\t\t\t</div>`;break;case"number":n+=`<div class="room_config_row flex-row ${e.classes}" title="${e.title}">\n\t\t\t\t\t\t\t\t\t<div class="room_config_label flex-item ns">${e.label}</div>\n\t\t\t\t\t\t\t\t\t<input type="number" class="room_config_item flex-item" data-index="${e.id}" ${e.attributes}>\n\t\t\t\t\t\t\t\t\t${t}\n\t\t\t\t\t\t\t\t</div>`;break;case"checkbox":n+=`<div class="room_config_row flex-row ${e.classes}" title="${e.title}">\n\t\t\t\t\t\t\t\t\t<div class="room_config_label flex-item ns">${e.label}</div>\n\t\t\t\t\t\t\t\t\t<label class="rc_switch flex-item"><input type="checkbox" class="room_config_item" data-index="${e.id}" ${e.attributes}><span class="rc_switch_knob"></span></label>\n\t\t\t\t\t\t\t\t\t${t}\n\t\t\t\t\t\t\t\t</div>`;break;case"spinner":n+=`<div class="room_config_row flex-row ${e.classes}" title="${e.title}">\n\t\t\t\t\t\t\t\t\t<div class="room_config_label flex-item ns">${e.label}</div>\n\t\t\t\t\t\t\t\t\t<div class="room_config_item room_config_spinner flex-item ns" data-index="${e.id}" ${e.attributes}>${e.value||""}</div>\n\t\t\t\t\t\t\t\t\t${t}\n\t\t\t\t\t\t\t\t</div>`;break;case"music":n+=`<div class="room_config_row flex-row ${e.classes}" title="${e.title}">\n\t\t\t\t\t\t\t\t\t<div class="room_config_label flex-item ns">${e.label}</div>\n\t\t\t\t\t\t\t\t\t<div class="room_config_item room_config_spinner flex-item music_picker ns" data-index="${e.id}" ${e.attributes}></div>\n\t\t\t\t\t\t\t\t\t${t}\n\t\t\t\t\t\t\t\t</div>`;break;case"slider":n+=`<div class="room_config_row flex-row ${e.classes}" title="${e.title}">\n\t\t\t\t\t\t\t\t\t<div class="room_config_label flex-item ns">${e.label}</div>\n\t\t\t\t\t\t\t\t\t<div class="room_config_slider flex-item ns" title="${e.title}">\n\t\t\t\t\t\t\t\t\t\t<input id="rank_limit" data-index="${e.id}" class="room_config_item center minor_range rg_target_pri" type="range" ${e.attributes}>\n\t\t\t\t\t\t\t\t\t\t<div id="rank_field" class="verticalstrip" style="--pos: 0; --count: 18; background-image: url('/res/league-ranks/strip.png');"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t${t}\n\t\t\t\t\t\t\t\t</div>`}})),n+="</div>"})),n+="</div>"})),n}Tn.ready((function(){xt("room_opts_save").outerHTML=Zn(Yn,"room_opts")+xt("room_opts_save").outerHTML,xt("custom_content_container").innerHTML=Zn(Qn,"custom_opts"),!1===ot.video.guide&&(xt("room_opts_welcome").classList.remove("active"),xt("room_opts_room").classList.add("active"),xt("room_content_welcome").classList.add("hidden"),xt("room_content_room").classList.remove("hidden"))})),Tn.ready((function(e){xs(!0),window.addEventListener("resize",(()=>{xs(!0)}),!1),setTimeout((()=>{xs(!0)}),10)}));let Jn=0,es=0,ts=1,ns=1,ss=0,is=1;const os=30,as={top:new Map,left:new Map,right:new Map,bottom:new Map};let rs=0,ls=0;const cs=1600,ps=800;let hs=1,ds=0,us=0,_s=0,ms=0,gs=0,fs=0,bs=0,Cs=0,ys=!0;function xs(e){if(!e&&!ys)return;e||(ys=!1),Jn=window.innerWidth,ts=window.innerHeight,es=Jn-2*os-Array.from(as.left.values()).reduce(((e,t)=>e+t),0)-Array.from(as.right.values()).reduce(((e,t)=>e+t),0),ns=ts-2*os-Array.from(as.top.values()).reduce(((e,t)=>e+t),0)-Array.from(as.bottom.values()).reduce(((e,t)=>e+t),0),ss=es/Math.max(1,ns),is=ot.video.zoom||1,ss<2?(rs=es,ls=es/2):(rs=2*ns,ls=ns),hs=rs/cs*is,ds=es-rs,us=ns-ls,_s=os+Array.from(as.left.values()).reduce(((e,t)=>e+t),0)+ds/2,ms=window.innerWidth-(os+Array.from(as.right.values()).reduce(((e,t)=>e+t),0)+ds/2),gs=os+Array.from(as.top.values()).reduce(((e,t)=>e+t),0)+us/2,fs=window.innerHeight-(os+Array.from(as.bottom.values()).reduce(((e,t)=>e+t),0)+us/2);bs=_s+(ms-_s)/2-hs*cs/2,Cs=gs+(fs-gs)/2-hs*ps/2,vt('canvas[data-fit="screen"]').forEach((e=>{e.width=Jn,e.height=ts})),vt('canvas[data-fit="contain"]').forEach((e=>{e.width=rs,e.height=ls,e.style.left=`${bs}px`,e.style.top=`${Cs}px`})),vt('canvas[data-fit="constrain"]').forEach((e=>{e.width=e.getAttribute("data-w")*hs,e.height=e.getAttribute("data-h")*hs})),xt("sbt")&&(xt("sbt").style.left=`${os+Array.from(as.left.values()).reduce(((e,t)=>e+t),0)}px`,xt("sbt").style.top=`${os+Array.from(as.top.values()).reduce(((e,t)=>e+t),0)}px`,xt("sbt").style.right=`${os+Array.from(as.right.values()).reduce(((e,t)=>e+t),0)}px`,xt("sbt").style.bottom=`${os+Array.from(as.bottom.values()).reduce(((e,t)=>e+t),0)}px`),document.documentElement.style.setProperty("--r",hs),Gl&&(Zl(),Gl.position.set(bs,Cs),Ul.position.set(bs,Cs),vl.position.set(-bs,-Cs),Ml&&Ml.fit()),e&&A?.forEach((e=>e.flushCanvases()))}function As(){A?.forEach((e=>"tiny"!==e.getDisplayMode()&&e.flushCanvases()))}function vs(e,t,n){as[e].get(t)!==n&&(as[e].set(t,n),xs(!0))}function ks(e,t){void 0!==as[e].get(t)&&(as[e].delete(t),xs(!0))}function ws(e){return e*hs}function Bs(e){return e/hs}function Ls(e){return e*(30/92)}function Ss(e){return e/(30/92)}function zs(e){return ws(Ls(e))}function Fs(e){return Bs(Ss(e))}let Ts=null,Is=null,Es=!!window.TETRAKARN;function Ms(){document.body.classList.add("electron"),setTimeout((()=>{document.body.setAttribute("desktop-version",`v${window.CLIENT_VERSION}`),Es=Es||!!window.TETRAKARN}),1e3),setTimeout((()=>{document.body.setAttribute("desktop-version",`v${window.CLIENT_VERSION}`),Es=Es||!!window.TETRAKARN}),15e3),navigator.onLine||document.body.classList.add("offline"),window.addEventListener("offline",(function(e){document.body.classList.add("offline")})),window.addEventListener("online",(function(e){document.body.classList.remove("offline")})),document.addEventListener("keydown",(e=>{if(!e.repeat){if("f5"===e.key.toLowerCase()||"r"===e.key.toLowerCase()&&e.ctrlKey){if(!Fn&&document.body.classList.contains("ingame_phys")&&xt("menus").classList.contains("hidden")&&0===Ji)return;Tn.update(!0)}if("I"===e.key&&e.ctrlKey||"f12"===e.key.toLowerCase()){(ot.electron.devtools||Es||Xn.includes(bn.role())||"bot"===bn.role()||"devel"===_.mode)&&window.IPC.send("devtools")}"f11"===e.key.toLowerCase()&&"darwin"!==window.PLATFORM_TYPE&&window.IPC.send("fullscreen"),"f4"!==e.key.toLowerCase()||Ts||(Ts=setTimeout((()=>{window.IPC.send("emergency")}),5e3),Is=setTimeout((()=>{Qt("keep holding F4 to enable SAFE MODE")}),1e3))}}),!1),document.addEventListener("keyup",(e=>{"f4"===e.key.toLowerCase()&&Ts&&(clearTimeout(Ts),clearTimeout(Is),Ts=null,Is=null)}),!1),window.IPC.on("goto",((e,t)=>{if(!xt("preload").classList.contains("hidden")||document.body.classList.contains("ingame")||Ja&&Ja.isConnected()&&t.startsWith(`https://${_.domain}/#`))return Fn=!0,void(window.location=t);const n=t.replace(`https://${_.domain}/#`,"");switch(n.substring(0,2)){case"R:":va.navigateToID(n.trim());break;case"P:":case"D:":break;default:qi("connecting to live servers"),Ja.require().then((e=>{Ki(),Hi("playmulti"),e.maintenance&&document.body.classList.add("maintenance"),lr.joinRoom(n.trim())})).catch((()=>{Ki(),en("could not connect to live servers")}))}})),window.IPC.on("updater-dl-starting",((e,t)=>{xt("electron_ota_busy").classList.remove("hidden"),xt("electron_ota_done").classList.add("hidden"),xt("electron_ota_bar").style.setProperty("--progress","0%"),xt("electron_ota_num").textContent="Starting",xt("electron_ota_info_left").innerHTML="Starting download...",xt("electron_ota_info_right").innerHTML=`Update from v${window.CLIENT_VERSION} to v<b>${t.ver}</b>`})),window.IPC.on("updater-dl-status",((e,t)=>{const n=t.current/t.total*100;xt("electron_ota_busy").classList.remove("hidden"),xt("electron_ota_done").classList.add("hidden"),xt("electron_ota_bar").style.setProperty("--progress",`${n}%`),xt("electron_ota_num").textContent=`${n.toFixed(2)}%`,xt("electron_ota_info_left").innerHTML=`${(t.current/1048576).toFixed(2)} / ${(t.total/1048576).toFixed(2)} MiB downloaded`,xt("electron_ota_info_right").innerHTML=`Update from v${window.CLIENT_VERSION} to v<b>${t.ver}</b>`})),window.IPC.on("updater-dl-error",(()=>{xt("electron_ota_busy").classList.add("hidden"),xt("electron_ota_done").classList.add("hidden"),Qt({msg:"failed to download TETR.IO DESKTOP update. click here to try to update manually!",color:"#b51616",icon:"error",timeout:6e4,onclick:e=>{Gs("/about/desktop/"),e()}})})),window.IPC.on("updater-dl-verifying",((e,t)=>{xt("electron_ota_busy").classList.remove("hidden"),xt("electron_ota_done").classList.add("hidden"),xt("electron_ota_bar").style.setProperty("--progress","100%"),xt("electron_ota_num").textContent="Verifying",xt("electron_ota_info_left").innerHTML="Verifying integrity of downloaded data...",xt("electron_ota_info_right").innerHTML=`Update from v${window.CLIENT_VERSION} to v<b>${t.ver}</b>`})),window.IPC.on("updater-dl-complete",(()=>{xt("electron_ota_busy").classList.add("hidden"),xt("electron_ota_done").classList.remove("hidden"),Qt({msg:"IT'S YOUR LUCKY DAY!<br>an update to TETR.IO DESKTOP has been downloaded and will be installed next time you launch it.",color:"#87E038",icon:"/res/icon/update.svg",classes:["modalnotify"],timeout:25e3,onclick:e=>{},buttons:[{label:"LATER",icon:"/res/icon/denied.svg",classes:[],onclick:e=>{e()}},{label:"RESTART NOW",icon:"/res/icon/accepted.svg",classes:["pri"],onclick:e=>{$s(),e()}}]})})),xt("electron_ota_done").addEventListener("click",$s),_.desktop_use_reviq&&window.IPC.send("reviq")}function Ds(){}function Os(){window.IS_ELECTRON?(Fn=!0,window.IPC.send("close")):console.error("Tried to exit while not on Electron")}function Ps(e){window.IS_ELECTRON?(window.IPC.send("nuke"),setTimeout((()=>{caches.delete("tetrio-dyn").then(e).catch((e=>{console.error(e)}))}),500)):e()}function Hs(e){window.IS_ELECTRON&&!1!==ot.electron.presence&&!0!==_.norichpresence&&(e.largeImageText=bn.anon()?"Playing anonymously":`${bn.username().toUpperCase()} - Lv. ${xt("me_level").innerHTML}${xt("me_leaguerank").classList.contains("hidden")?"":` - ${xt("me_leaguerank").getAttribute("src").replace("/res/league-ranks/","").replace(".png","").toUpperCase()}`}`,bn.anon()||(e.buttons=[{label:"View Profile",url:`https://${_.ch_domain}/u/${bn.username()}`}]),window.IPC.send("presence",e))}function Rs(){window.IS_ELECTRON&&!1!==ot.electron.taskbarflash&&window.IPC.send("flash")}function Ws(e){window.IS_ELECTRON&&window.IPC.send("blockmovement",!!e)}let Ns=!1;function $s(){Ns||(Ns=!0,qi("installing update"),Fn=!0,window.IPC.send("execute-update"))}function Gs(e,t="_blank",n){if(!window.IS_ELECTRON)return window.open(e,t,n);window.IPC.send("malblock",!1);const s=window.open(e,t,n);return window.IPC.send("malblock",!0),s}window.OPEN_EXTERNAL=Gs;const Us=[];let Xs=!1,js;function qs(e){const t=bn.username().split("").reverse().join(""),n=document.body.classList.contains("trapped")||"Attempting to bypass a ban will escalate it to a permanent ban."===localStorage.getItem("trapped");if(window.IS_ELECTRON&&!Xs&&!e.repeat&&e.altKey&&!n&&1===e.key.length){for(Us.push(e.key.toLowerCase());Us.length>t.length;)Us.shift();Us.join("")===t&&(Xs=!0,xa.SePlay("zenith_split_missed"),xt("config_electron_devtools").classList.remove("hidden"))}}function Ks(){const e=_.countdown-Date.now();if(e<=0)xt("prelaunch_countdown").innerHTML="00:00:00",clearInterval(js),xt("prelaunch").classList.add("hiding"),setTimeout((()=>{xt("prelaunch").classList.add("hidden")}),7500);else{let t=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4),s=Math.floor(e%6e4/1e3);t<10&&(t=`0${t}`),n<10&&(n=`0${n}`),s<10&&(s=`0${s}`),xt("prelaunch_countdown").innerHTML=`${t}:${n}<span class="sec">:${s}</span>`}}Gt((()=>{_.countdown&&_.countdown>Date.now()&&(xt("prelaunch").classList.remove("hidden"),js=setInterval((()=>{Ks()}),100),Ks())}));const Vs=(()=>{let e=!1,t=0,n=!1,s=[],i="multiplayer-game",o="/";const a={"menus-persistent-mpu":{name:"Menus Persistent MPU",id:"ceriad-menus-persistent-mpu",placement:"tetr-io_Left_sidewall",type:"slot",enabled:!0,refresh:!1,refresh_time:3e4,min_width:1366,bodyclasses:["mpmpu-mounted"]},"home-lb":{name:"Homebanner",id:"ceriad-home-lb",placement:"tetr-io_Leaderboard_desktop_ATF",type:"slot",enabled:!0,refresh:!1,refresh_time:3e4,max_width:1365},"solo-lb":{name:"Solo Menu",id:"ceriad-solo-lb",placement:"tetr-io_Leaderboard_desktop_ATF",type:"slot",enabled:!0,refresh:!1,refresh_time:3e4,max_width:1365},"multiplayer-lb":{name:"Multiplayer Menu",id:"ceriad-multiplayer-lb",placement:"tetr-io_Leaderboard_desktop_ATF",type:"slot",enabled:!0,refresh:!1,refresh_time:3e4,max_width:1365},"lobby-lb":{name:"Custom Room Lobby",id:"ceriad-lobby-lb",placement:"tetr-io_Leaderboard_desktop_BTF",type:"slot",enabled:!0,refresh:!1,refresh_time:3e4},"sysroom-mpu":{name:"Quick Play Lobby",id:"ceriad-sysroom-mpu",placement:"tetr-io_Left_sidewall",type:"slot",enabled:!0,refresh:!1,refresh_time:3e4},"roomresults-lb":{name:"Custom Room Results",id:"ceriad-roomresults-lb",placement:"tetr-io_Leaderboard_desktop_ATF",type:"slot",enabled:!0,refresh:!1,refresh_time:3e4},"league-lb":{name:"Tetra League Home",id:"ceriad-league-lb",placement:"tetr-io_Leaderboard_desktop_ATF",type:"slot",enabled:!0,refresh:!1,refresh_time:3e4,max_width:1365},"soloresults-lb":{name:"Solo Results",id:"ceriad-soloresults-lb",placement:"tetr-io_Leaderboard_desktop_ATF",type:"slot",enabled:!0,refresh:!1,refresh_time:3e4,max_width:1365},"auth-login-lb":{name:"Login Screen",id:"ceriad-auth-login-lb",placement:"tetr-io_Leaderboard_desktop_ATF",type:"slot",enabled:!0,refresh:!1},"auth-return-lb":{name:"Welcome Back Screen",id:"ceriad-auth-return-lb",placement:"tetr-io_Leaderboard_desktop_ATF",type:"slot",enabled:!0,refresh:!1},"ingame-bottom_rail":{name:"Ingame Bottom Rail",id:"ceriad-ingame-bottom_rail",placement:"tetr-io_sticky_footer",type:"stickyFooter",enabled:!0,allowIf:()=>!document.body.classList.contains("inzenith"),refresh:!1,refresh_time:3e4,safezones:[["bottom","ingame-bottom_rail",70]],bodyclasses:["igceriad-mounted_bottom"],animated:!1,unmountIfNotLoaded:!1,onlyApplySafeZonesWhenLoaded:!0,onlyApplyBodyClassesWhenLoaded:!0},"ingame-left_rail":{name:"Ingame Left Rail",id:"ceriad-ingame-left_rail",placement:{ROS:"tetr-io_Siderail_left_ROS","multiplayer-game":"tetr-io_Siderail_left_CP_1"},type:"slot",enabled:!0,allowIf:()=>window.innerWidth>1.5*window.innerHeight&&(document.body.classList.contains("inzenith")||!er),refresh:!1,refresh_time:3e4,safezones:[["left","ingame-left_rail",130]],needsSafeZones:()=>!(!er||document.body.classList.contains("inzenith")&&!xt("zenith-duo-card").classList.contains("active")),bodyclasses:["igceriad-mounted_left"],animated:!1,unmountIfNotLoaded:!1,onlyApplySafeZonesWhenLoaded:!0,onlyApplyBodyClassesWhenLoaded:!0},"ingame-right_rail":{name:"Ingame Right Rail",id:"ceriad-ingame-right_rail",placement:{ROS:"tetr-io_siderail_right_ROS","multiplayer-game":"tetr-io_Siderail_left_CP_2"},type:"slot",enabled:!0,allowIf:()=>window.innerWidth>1.5*window.innerHeight,refresh:!1,refresh_time:3e4,safezones:[["right","ingame-right_rail",130]],needsSafeZones:()=>!(!er||document.body.classList.contains("inzenith")&&!xt("zenith-duo-card").classList.contains("active")),bodyclasses:["igceriad-mounted_right"],animated:!1,unmountIfNotLoaded:!1,onlyApplySafeZonesWhenLoaded:!0,onlyApplyBodyClassesWhenLoaded:!0}},r={login:["auth-login-lb","auth-return-lb"],main:["menus-persistent-mpu","home-lb","solo-lb","multiplayer-lb","lobby-lb","roomresults-lb","league-lb","soloresults-lb","sysroom-mpu"],ingame:["ingame-bottom_rail","ingame-left_rail","ingame-right_rail"]};function l(t=1){e&&(n||(n=!0,setTimeout((()=>{n&&function(){n=!1;const e={slot:{create:[],destroy:[]},stickyFooter:{create:[],destroy:[]}},t=[];Object.keys(a).forEach((n=>{const o=a[n].enabled&&a[n].mounted,r=s.includes(n);let l=a[n].placement;"object"==typeof l&&(l=l[i]),o&&!r?(e[a[n].type].create.push({placementName:l,slotId:a[n].id}),t.push(n)):!o&&r?e[a[n].type].destroy.push({placementName:l,slotId:a[n].id}):o&&r&&t.push(n)})),s=t;for(const t of e.slot.destroy)window.freestar.queue.push((()=>{window.freestar.deleteAdSlots(t.slotId),console.log("deleteAdSlots",t.slotId)}));for(const t of e.stickyFooter.destroy)window.freestar.queue.push((()=>{window.freestar.deleteStickyFooter(t.placementName),console.log("deleteStickyFooter",t.placementName)}));for(const t of e.slot.create)window.freestar.queue.push((()=>{window.freestar.newAdSlots(t),console.log("newAdSlots",t)}));for(const t of e.stickyFooter.create)window.freestar.queue.push((()=>{window.freestar.newStickyFooter(t.placementName),console.log("newStickyFooter",t.placementName)}))}()}),t)))}function c(n){if(!a[n])return;const s=m(n,e);if(!a[n].enabled||window.innerWidth<(a[n].min_width||0)||window.innerWidth>=(a[n].max_width||9999)||a[n].allowIf&&!a[n].allowIf())s?.classList.add("hidden");else if(!document.body.classList.contains("ceriad_disabled")){if(s?.classList.remove("hidden"),a[n].mounted||(console.log(`${n} mounted, now ${++t} mounts`),a[n].animated&&(s?.getBoundingClientRect(),s?.classList.remove("hiding"))),a[n].mounted=!0,a[n].elapsed=0,l(),a[n].safezones&&!a[n].onlyApplySafeZonesWhenLoaded&&(!a[n].needsSafeZones||a[n].needsSafeZones()))for(const e of a[n].safezones)vs(...e);if(a[n].bodyclasses&&!a[n].onlyApplyBodyClassesWhenLoaded)for(const e of a[n].bodyclasses)document.body.classList.add(e);if(a[n].unmountIfNotLoaded||a[n].onlyApplySafeZonesWhenLoaded||a[n].onlyApplyBodyClassesWhenLoaded){const t=performance.now(),s=setInterval((()=>{if(!a[n].mounted)return void clearInterval(s);const i=m(n,e);let o=!0;if(i?(""===i.innerHTML||At(`#${a[n].id}>div`)&&""===At(`#${a[n].id}>div`).innerHTML)&&(o=!1):o=!1,o){if(clearInterval(s),a[n].onlyApplySafeZonesWhenLoaded&&a[n].safezones&&(!a[n].needsSafeZones||a[n].needsSafeZones()))for(const e of a[n].safezones)vs(...e);if(a[n].bodyclasses&&a[n].onlyApplyBodyClassesWhenLoaded)for(const e of a[n].bodyclasses)document.body.classList.add(e)}else performance.now()-t>=5e3&&a[n].unmountIfNotLoaded&&(clearInterval(s),console.log(`${n} unmounted, no content available after ${performance.now()-t}ms`),p(n))}),100)}}}function p(e){if(!a[e])return;const n=m(e);if(!a[e].enabled)return;const s=a[e].mounted;if(a[e].mounted&&console.log(`${e} unmounted, now ${--t} mounts`),a[e].mounted=!1,a[e].elapsed=0,s&&l(),a[e].safezones)for(const t of a[e].safezones)ks(...t);if(a[e].bodyclasses)for(const t of a[e].bodyclasses)document.body.classList.remove(t);a[e].animated&&(n?.classList.add("hiding"),setTimeout((()=>{a[e].mounted||n?.classList.add("hidden")}),500))}function h(e){r[e]&&r[e].forEach((e=>{p(e)}))}function d(){Object.keys(a).forEach((e=>{p(e)}))}let u=0;function m(e,t){if(!a[e])return null;let n=xt(a[e].id);if(!n){if(n=At(`.ceriad[data-cid="${e}"]`),!n)return null;t&&(n.id=a[e].id)}return n}Gt((()=>{setInterval((()=>{"visible"===document.visibilityState&&(xt("menus").classList.contains("hidden")&&xt("preload").classList.contains("hidden")?(h("login"),h("main")):document.body.classList.contains("inzenith")||h("ingame"),function(e=!1){if(e||!u)return void(u=Date.now());const t=Date.now()-u;u=Date.now(),Object.keys(a).forEach((e=>{a[e].enabled&&a[e].refresh&&a[e].mounted&&(a[e].elapsed=(a[e].elapsed||0)+t,a[e].elapsed>=a[e].refresh_time&&c(e))}))}(),function(){for(const e of vt("[data-adunit-name]"))e.insertAdjacentElement("afterend",e.firstElementChild),e.remove()}(),Object.keys(a).forEach((e=>{a[e].mounted&&a[e].allowIf&&(a[e].allowIf()||p(e))})))}),1e3)}));let g=!1;return{getElement:m,mount:c,mountGroup:function(e){r[e]&&r[e].forEach((e=>{c(e)}))},mountIfMounted:function(e){a[e]&&a[e].enabled&&a[e].mounted&&c(e)},unmount:p,unmountGroup:h,unmountAll:d,loadProvider:async function(){if(!g){g=!0;try{let t,n;console.log("Loading Ceriad provider...");const s=new Promise(((e,s)=>{t=e,n=s})),i=document.createElement("script");if(i.type="text/javascript",i.text="\n\t\tvar freestar = freestar || {};\n\t\tfreestar.queue = freestar.queue || [];\n\t\tfreestar.config = freestar.config || {};\n\t\tfreestar.config.enabled_slots = [];\n\t\tfreestar.disableAutoTrackPageviews = true;\n\t\tfreestar.initCallback = function () { (freestar.config.enabled_slots.length === 0) ? freestar.initCallbackCalled = false : freestar.newAdSlots(freestar.config.enabled_slots) }\n\t",document.head.insertAdjacentElement("beforeend",i),!window.freestar)throw new Error("Ceriad provider loaded but not available. Bailing out.");const o=new Promise((e=>window.freestar.queue.push(e))),a=document.createElement("script");a.type="text/javascript",a.onload=t,a.onerror=n,a.src="https://a.pub.network/tetr-io/pubfig.min.js",document.head.insertAdjacentElement("beforeend",a),await s,console.log("Freestar loaded."),await o,console.log("Ceriad provider launched."),e=!0,l()}catch(e){console.warn("Ceriad provider could not be loaded.",e),document.body.classList.add("ceriad_unavailable"),document.body.classList.add("ceriad_disabled"),d()}}},setAlternate:function(e){i=e},setPage:function(t){if(!e)return;if(o===t)return;const n=`https://${_.domain}${t}`;window.freestar.queue.push((()=>{window.freestar.trackPageview({path:n}),console.log("trackPageview",{path:n})})),o=t},disable:function(){e&&(d(),window.freestar.queue.push((()=>{window.freestar.deleteAdSlots()})),document.body.classList.add("ceriad_disabled"))}}})(),Ys=(()=>{let e=null,t=null,n=null,s=!1,i={},o=[],a=Date.now(),r=0,l=!1,c={floor:0,altitude:0,gamesplayed:0};Tn.ready((()=>{xt("watchreplay_results").addEventListener("click",(function(){let t;xt("results").classList.contains("isreplay")||(t=xa.BgmGetCurrent()),ta(e,t)})),xt("downloadreplay_results").addEventListener("click",(function(){const t=new Blob([JSON.stringify(e)],{type:"application/json"}),n=document.createElement("a");n.download=`${e.id||"replay"}.ttr`,n.href=(window.webkitURL||window.URL).createObjectURL(t),n.dataset.downloadurl=["application/json",n.download,n.href].join(":"),document.body.appendChild(n),n.click(),document.body.removeChild(n)})),xt("downloadreplay_multilog").addEventListener("click",(function(){const t=new Blob([JSON.stringify(e)],{type:"application/json"}),n=document.createElement("a");n.download=`${e.id||"replay"}.ttrm`,n.href=(window.webkitURL||window.URL).createObjectURL(t),n.dataset.downloadurl=["application/json",n.download,n.href].join(":"),document.body.appendChild(n),n.click(),document.body.removeChild(n)})),xt("tweetreplay_results").addEventListener("click",(function(){let t="",n="",s="",i="";switch(e.gamemode){case"40l":{const t=wt(e.replay.results.stats.finaltime);s="a ",n=`time of ${t.m}:${t.s}.${t.ms}`;break}case"blitz":s="a ",n=`score of ${e.replay.results.score.toLocaleString("en-US")}`;break;case"zenith":case"zenithex":{s="an ",n=`altitude of ${Math.floor(e.replay.results.stats.zenith.altitude).toLocaleString("en-US")}.${Math.floor(e.replay.results.stats.zenith.altitude%1*10)}m`;const t=(e.replay.options.zenith_mods??[]).filter((e=>"expert"!==e));t.length&&(i=` (${t.map((e=>w.Strings.zenithModsShort[e]??"?")).join(",")})`);break}}t=xt("results").classList.contains("isreplay")?`Check out ${e.users[0].id===bn.id()?"my":`${e.users[0].username.toUpperCase()}'s`} `:`I just achieved ${s}`,t+=`${n} playing TETR.IO ${w.Strings.longTypeNames[e.gamemode]}${i}!\n\nhttps://${_.domain}/#R:${e.id}`,Gs(`https://x.com/intent/tweet?text=${encodeURIComponent(t)}`,"_blank","menubar=0,toolbar=0,location=0,personalbar=0,status=0,noopener=1,width=640,height=480")})),xt("resubmitreplay_results").addEventListener("click",(function(){t&&(qi("resubmitting"),d(...t).then((()=>{Qt("game submitted!"),xt("results").classList.remove("error"),Ki()}),(e=>{xt("dirtyflag_state").innerHTML="SUBMISSION",sn(e),Ki()})))})),xt("custom_export").addEventListener("click",(function(){const e=new Blob([JSON.stringify(z())],{type:"application/json"}),t=document.createElement("a");t.download="custom-game.ttp",t.href=(window.webkitURL||window.URL).createObjectURL(e),t.dataset.downloadurl=["application/json",t.download,t.href].join(":"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})),Ja.on("game.records.revolved",(e=>{i[e]=null,F()}))}));let p=`SESS-${Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}`,h=0;function d(e,t,n){const s=Cn.post("/api/games/submit",{type:e,replay:t,assumptions:n,aborted:h,i:Tn.i(),serverCycle:_.serverCycle,commitId:_.client.commit.id},{headers:{"X-Session-ID":p}});return h=0,s}function u(){h=Math.min(10,h+1)}function m(){if(l)return No.remove("roomzen"),document.body.classList.remove("inmultizen"),l=!1,Wi(!0),void Hi("lobby");"zen"!==n&&"custom"!==n&&u(),o.push(setTimeout((()=>{Wi(!0),Hi("home")}),600))}function g(e){n="40l",Wi(!1),Hi("none"),xa.BgmFadeOut(),s||bn.anon()||document.body.classList.contains("banstatus_restrict")?xt("noreplay").classList.remove("hidden"):xt("noreplay").classList.add("hidden"),document.body.classList.contains("inpair")||document.body.classList.contains("matchmaking")||ll("online","40l"),Wt("40 Lines"),Vs.setAlternate("ROS"),Vs.setPage("/ingame/solo"),Ai=new v("keyboard"),Ai.setGame({version:y,seed_random:!0,anchorseed:!0,g:.02,allow180:!0,spinbonuses:"all-mini+",countdown:!0,countdown_interval:1e3,precountdown:5e3,prestart:1e3,mission:w.Strings.gameMissions["40l"],zoominto:"slow",slot_counter1:ot.gameoptions.slot_40l_counter1||"stopwatch",slot_counter2:ot.gameoptions.slot_40l_counter2||"lines",slot_counter3:ot.gameoptions.slot_40l_counter3||"pieces",slot_counter4:ot.gameoptions.slot_40l_counter4||(ot.gameoptions.pro_40l?"keys":""),slot_counter5:ot.gameoptions.slot_40l_counter5||(ot.gameoptions.pro_40l?"finesse":""),slot_bar2:"progress",pro:!!ot.gameoptions.pro_40l,pro_alert:!!ot.gameoptions.pro_40l_alert,pro_retry:!!ot.gameoptions.pro_40l_retry,stride:!!ot.gameoptions.stride_40l,no_szo:!!ot.gameoptions.stride_40l,objective_type:"lines",objective_count:40,can_retry:!0,nolockout:!0,bgmnoreset:!1!==ot.volume.noreset,song:e.song}),Ai.on("finish",(function(e){x("40l",this.replay.Export(),e)})),Ai.on("fail",(function(){u(),o.push(setTimeout((()=>{xa.SePlay("failure"),Xi((t=>{"retry"===t?g({song:e.song}):(Wi(!0),Hi("home"))}))}),ot.gameoptions.stride_40l?500:3e3))})),Ai.on("quit",m),Ai.createGameHolder(),Ai.startGame()}function f(e){n="blitz",Wi(!1),Hi("none"),xa.BgmFadeOut(),s||bn.anon()||document.body.classList.contains("banstatus_restrict")?xt("noreplay").classList.remove("hidden"):xt("noreplay").classList.add("hidden"),document.body.classList.contains("inpair")||document.body.classList.contains("matchmaking")||ll("online","blitz"),Wt("Blitz"),Vs.setAlternate("ROS"),Vs.setPage("/ingame/solo"),Ai=new v("keyboard"),Ai.setGame({version:y,seed_random:!0,anchorseed:!0,allow180:!0,countdown:!0,countdown_interval:1e3,precountdown:5e3,prestart:1e3,mission:w.Strings.gameMissions.blitz,zoominto:"slow",slot_counter1:ot.gameoptions.slot_blitz_counter1||"timer",slot_counter2:ot.gameoptions.slot_blitz_counter2||"lines",slot_counter3:ot.gameoptions.slot_blitz_counter3||"level",slot_counter4:ot.gameoptions.slot_blitz_counter4||(ot.gameoptions.pro_blitz?"finesse_l":""),slot_counter5:ot.gameoptions.slot_blitz_counter5||"score",slot_bar2:"progress",pro:!!ot.gameoptions.pro_blitz,pro_alert:!!ot.gameoptions.pro_blitz_alert,pro_retry:!!ot.gameoptions.pro_blitz_retry,stride:!!ot.gameoptions.stride_blitz,no_szo:!!ot.gameoptions.stride_blitz,objective_type:"timed",objective_time:12e4,can_retry:!0,nolockout:!0,bgmnoreset:!1,song:e.song,levels:!0,levelspeed:.42,levelgbase:.65,gravitymay20g:!1}),Ai.on("finish",(function(){x("blitz",this.replay.Export(),12e4)})),Ai.on("fail",(function(){u(),o.push(setTimeout((()=>{xa.SePlay("failure"),Xi((t=>{"retry"===t?f({song:e.song}):(Wi(!0),Hi("home"))}))}),ot.gameoptions.stride_blitz?500:3e3))})),Ai.on("quit",m),Ai.createGameHolder(),Ai.startGame()}let b={map:`${"_".repeat(400)}?`,level:1,progress:0,score:0,b2b:0,cycle:1};function C(e){n="custom",Wi(!1),Hi("none"),xa.BgmFadeOut(),document.body.classList.contains("inpair")||document.body.classList.contains("matchmaking")||ll("online","custom"),Wt("Custom Solo"),Vs.setAlternate("ROS"),Vs.setPage("/ingame/solo"),Ai=new v("keyboard");const t=z();t.version=y,t.mission_type="mission_free",t.bgmnoreset=!1!==ot.volume.noreset,t.song=e.song,Ai.on("finish",(function(){o.push(setTimeout((()=>{k({version:L._VERSION_FORMAT,gamemode:"custom",users:[{id:bn.id(),username:bn.username()}],replay:this.replay.Export()},{isClientSide:!0})}),2e3))})),Ai.on("fail",(function(){o.push(setTimeout((()=>{xa.SePlay("failure"),Xi((t=>{"retry"===t?C({song:e.song}):(Wi(!0),Hi("home"))}))}),3e3))})),Ai.on("quit",m),Ai.setGame(t),Ai.createGameHolder(),Ai.startGame()}function x(e,n,i){if(bn.anon()||s)return void o.push(setTimeout((()=>{k({version:L._VERSION_FORMAT,gamemode:e,users:[{id:bn.id(),username:bn.username()}],replay:n},{isClientSide:!0})}),ot.gameoptions[`stride_${e}`]?500:2e3));const a=performance.now();t=[e,n,{seed:n.options.seed,finalTime:i}],d(...t).then((t=>{const n=performance.now()-a;Qt("game submitted!"),o.push(setTimeout((()=>{k(t.record.replay,{isClientSide:!0,record:t.record,ranks:t.ranks}),Sn(t.xp??0)}),Math.max(0,(ot.gameoptions[`stride_${e}`]?500:2e3)-n)))}),(t=>{xt("dirtyflag_state").innerHTML="SUBMISSION";const s=performance.now()-a;sn(t),o.push(setTimeout((()=>{k({version:L._VERSION_FORMAT,gamemode:e,users:[{id:bn.id(),username:bn.username()}],replay:n},{isClientSide:!0,error:t.error.msg})}),Math.max(0,(ot.gameoptions[`stride_${e}`]?500:2e3)-s)))}))}function k(t,n){if(t=L.Update(t),(t=new L(t)).users.length>=2)return function(t,{back:n="home",record:s=null,menuStyle:i=null,matchHighlight:o=null}){const a=t.replay.leaderboard,r=t.replay.rounds;a[1].id===bn.id()&&a.reverse();const l=a[0],c=a[1];Bi.multilog.footer=`<a class="tetra_pop" data-hover="tap" data-hit="click" data-username="${zt(l.username)}">${zt(l.username.toUpperCase().toUpperCase())}</a> versus <a class="tetra_pop" data-hover="tap" data-hit="click" data-username="${zt(c.username)}">${zt(c.username.toUpperCase().toUpperCase())}</a> played on ${new Date(t.ts||Date.now()).toLocaleString()}`,Bi.multilog.back=n??"home",Wi(!0),Hi("multilog"),Pi(i??(t.id?"tetra":"victory")),t.id?(xt("multilogview").classList.remove("noreplay"),xt("replayid_multilog").textContent=`R:${t.id}`):xt("multilogview").classList.add("noreplay");e=t,xt("multilog").innerHTML="";let p=0;for(const e of r){const t=p++;e[1].id===l.id&&e.reverse();const n=document.createElement("div");n.classList.add("multilog_result"),n.classList.add("scroller_block"),n.classList.add("zero"),n.setAttribute("data-hover","tap"),n.setAttribute("data-hit","click"),n.__replays__=[e[0].replay?new B(e[0].replay):null,e[1].replay?new B(e[1].replay):null],n.__users__=[l,c],n.__roundid__=t+1,n.__datalength__=r.length,xt("multilog").appendChild(n);const s=!e[0].replay||e[0].frames<=5,i=!e[1].replay||e[1].frames<=5,a=document.createElement("div");a.classList.add("multilog_result_self"),e[0].alive&&e[0].active&&a.classList.add("success"),s&&n.classList.add("multilog_result_unavailable"),a.innerHTML=`${e[0].active?"":"forfeit - "}<span>${e[0].stats.apm.toFixed(2)}</span> APM - <span>${e[0].stats.pps.toFixed(2)}</span> PPS - <span>${e[0].stats.vsscore.toFixed(2)}</span> VS`,n.appendChild(a);const h=wt(Math.min(e[0].lifetime,e[1].lifetime)||0),d=document.createElement("div");d.classList.add("multilog_result_time"),d.classList.toggle("focusedround",o==t+1),d.innerHTML=s||i?"-:--":`${h.m}:${h.s}`,n.appendChild(d);const u=document.createElement("div");u.classList.add("multilog_result_opponent"),e[1].alive&&e[1].active&&u.classList.add("success"),i&&n.classList.add("multilog_result_unavailable"),u.innerHTML=`<span>${e[1].stats.apm.toFixed(2)}</span> APM - <span>${e[1].stats.pps.toFixed(2)}</span> PPS - <span>${e[1].stats.vsscore.toFixed(2)}</span> VS${e[1].active?"":" - forfeit"}`,n.appendChild(u)}vt("#multilog .multilog_result").forEach((e=>{let t,n;e.__roundid__>0&&e.previousElementSibling&&!e.previousElementSibling.classList.contains("multilog_result_unavailable")&&(t=()=>{e.previousElementSibling.click()}),e.__roundid__<r.length&&e.nextElementSibling&&!e.nextElementSibling.classList.contains("multilog_result_unavailable")&&(n=()=>{e.nextElementSibling.click()}),e.addEventListener("click",(()=>{na(e.__replays__,e.__users__,xa.BgmGetCurrent(),t,n,e.__roundid__,e.__datalength__)}))})),At("#multilog_self").setAttribute("data-username",l.username),At("#multilog_self .leagueplayer_name").textContent=l.username.toUpperCase(),At("#multilog_self .leagueplayer_count").textContent=l.wins,At("#multilog_self .leagueplayer_extra").innerHTML=Number.isNaN(l.stats.apm)?"NO STATS AVAILABLE":`<span>${l.stats.apm.toFixed(2)}</span> APM &bull; <span>${l.stats.pps.toFixed(2)}</span> PPS &bull; <span>${l.stats.vsscore.toFixed(2)}</span> VS`,At("#multilog_self").classList.toggle("disconnected",!l.active),At("#multilog_opponent").setAttribute("data-username",c.username),At("#multilog_opponent .leagueplayer_name").textContent=c.username.toUpperCase(),At("#multilog_opponent .leagueplayer_count").textContent=c.wins,At("#multilog_opponent .leagueplayer_extra").innerHTML=Number.isNaN(c.stats.apm)?"NO STATS AVAILABLE":`<span>${c.stats.apm.toFixed(2)}</span> APM &bull; <span>${c.stats.pps.toFixed(2)}</span> PPS &bull; <span>${c.stats.vsscore.toFixed(2)}</span> VS`,At("#multilog_opponent").classList.toggle("disconnected",!c.active),0===p&&xt("multilog").insertAdjacentHTML("beforeend",'<div class="multilog_empty">no replays available for this match</div>')}(t,n);if(function(t,{back:n="home",isClientSide:o=!1,error:a=null,record:r=null,ranks:l=null,customresulttype:c=null}){const p=t.gamemode,h=t.replay.options,d=t.users[0],u=t.replay.results.stats,_=t.replay.results.aggregatestats,m=u.clears,g=wt(u.finaltime),f=u.finaltime/6e4,b=u.finaltime/1e3,C=xt("results_stats_full"),y=xt("results_stats_overview");switch(C.innerHTML="",y.innerHTML="",p){case"40l":case"blitz":case"custom":if(h.levels&&S(y,"LEVEL",u.level),S(y,"PIECES PLACED",u.piecesplaced.toLocaleString("en-US")),S(y,"PIECES per SECOND",(u.piecesplaced/b).toFixed(2)),u.inputs&&(S(y,"KEYS PRESSED",u.inputs),S(y,"KEYS per PIECE",(u.inputs/u.piecesplaced).toFixed(3)),S(y,"KEYS per SECOND",(u.inputs/b).toFixed(3))),S(y,"HOLDS",u.holds.toLocaleString("en-US")),S(y,"SCORE",u.score.toLocaleString("en-US")),"time"!==h.objective_type&&S(y,"TIME",`${g.m}:${g.s}.${g.ms}`),S(y,"LINES",u.lines.toLocaleString("en-US")),S(y,"LINES per MINUTE",(u.lines/f).toFixed(2)),"none"!==h.spinbonuses){S(y,`${(h.spinbonuses??"T-spins").startsWith("T-spins")?"T-s":"s"}pins`,u.tspins)}S(y,"maximum COMBO",Math.max(0,u.topcombo-1)),S(y,"maximum back-to-back chain",Math.max(0,u.topbtb-1)),S(y,"ALL CLEARS",m.allclear.toLocaleString("en-US")),u.finesse&&(S(y,"finesse %",`${(u.finesse.perfectpieces/Math.max(1,u.piecesplaced)*100).toFixed(2)}%`),S(y,"finesse faults",u.finesse.faults.toLocaleString("en-US")));break;case"zenith":case"zenithex":{const e=["","hall of beginnings","the hotel","the casino","the arena","the museum","abandoned offices","the laboratory","the core","corruption","platform of the gods"];S(y,"TIME",`${g.m}:${g.s}.${g.ms}`),S(y,"FLOOR",`${u.zenith.floor}: ${e[u.zenith.floor]??""}`),S(y,"KO's",u.kills.toLocaleString("en-US")),r&&r.extras.zenith.peakPos&&-1!==r.extras.zenith.peakPos&&S(y,"PEAK POSITION",`<span>${r.extras.zenith.peakPos.toLocaleString("en-US")}</span> / ${r.extras.zenith.peakCount.toLocaleString("en-US")}`),r&&r.extras.zenith.finalPos&&-1!==r.extras.zenith.finalPos&&S(y,"FINAL POSITION",`<span>${r.extras.zenith.finalPos.toLocaleString("en-US")}</span> / ${r.extras.zenith.finalCount.toLocaleString("en-US")}`),S(y,"average CLIMB SPEED",(u.zenith.avgrankpts/(60*b)).toFixed(2)),S(y,"peak CLIMB SPEED",Math.floor(u.zenith.peakrank).toLocaleString("en-US")),S(y,"ALTITUDE per SECOND",(u.zenith.altitude/b).toFixed(2)),S(y,"ATTACK per MINUTE",_.apm.toFixed(2)),S(y,"PIECES per SECOND",_.pps.toFixed(2)),S(y,"VERSUS SCORE",_.vsscore.toFixed(2)),S(y,"maximum COMBO",Math.max(0,u.topcombo-1)),S(y,"maximum back-to-back chain",Math.max(0,u.topbtb-1));break}}switch(p){case"40l":case"blitz":case"custom":if(S(C,"SINGLES",m.singles.toLocaleString("en-US")),S(C,"DOUBLES",m.doubles.toLocaleString("en-US")),S(C,"TRIPLES",m.triples.toLocaleString("en-US")),S(C,"QUADS",m.quads.toLocaleString("en-US")),"none"!==h.spinbonuses){const e=(h.spinbonuses??"T-spins").startsWith("T-spins")?"T-s":"s";S(C,`${e}pins`,m.realtspins.toLocaleString("en-US")),S(C,`${e}pin MINIS`,m.minitspins.toLocaleString("en-US")),S(C,`${e}pin MINI SINGLES`,m.minitspinsingles.toLocaleString("en-US")),S(C,`${e}pin SINGLES`,m.tspinsingles.toLocaleString("en-US")),S(C,`${e}pin MINI DOUBLES`,m.minitspindoubles.toLocaleString("en-US")),S(C,`${e}pin DOUBLES`,m.tspindoubles.toLocaleString("en-US")),(h.spinbonuses??"T-spins").startsWith("T-spins")||S(C,`${e}pin MINI TRIPLES`,m.minitspintriples.toLocaleString("en-US")),S(C,`${e}pin TRIPLES`,m.tspintriples.toLocaleString("en-US")),(h.spinbonuses??"T-spins").startsWith("T-spins")||(S(C,`${e}pin MINI QUADS`,m.minitspinquads.toLocaleString("en-US")),S(C,"spin QUADS",m.tspinquads))}S(C,"ALL CLEARS",m.allclear.toLocaleString("en-US"));break;case"zenith":case"zenithex":S(C,"LINES SENT",u.garbage.sent.toLocaleString("en-US")),S(C,"LINES RECEIVED",u.garbage.received.toLocaleString("en-US")),S(C,"PIECES PLACED",u.piecesplaced.toLocaleString("en-US")),S(C,"KEYS PRESSED",u.inputs),S(C,"KEYS per PIECE",(u.inputs/u.piecesplaced).toFixed(3)),S(C,"KEYS per SECOND",(u.inputs/b).toFixed(3)),S(C,"HOLDS",u.holds.toLocaleString("en-US")),S(C,"LINES",u.lines.toLocaleString("en-US")),S(C,"LINES per MINUTE",(u.lines/f).toFixed(2)),S(C,"SINGLES",u.clears.singles.toLocaleString("en-US")),S(C,"DOUBLES",u.clears.doubles.toLocaleString("en-US")),S(C,"TRIPLES",u.clears.triples.toLocaleString("en-US")),S(C,"QUADS",u.clears.quads.toLocaleString("en-US")),S(C,"T-spins",u.tspins),S(C,"T-spin ZEROES",u.clears.realtspins.toLocaleString("en-US")),S(C,"T-spin MINIS",u.clears.minitspins.toLocaleString("en-US")),S(C,"T-spin MINI SINGLES",u.clears.minitspinsingles.toLocaleString("en-US")),S(C,"T-spin SINGLES",u.clears.tspinsingles.toLocaleString("en-US")),S(C,"T-spin MINI DOUBLES",u.clears.minitspindoubles.toLocaleString("en-US")),S(C,"T-spin DOUBLES",u.clears.tspindoubles.toLocaleString("en-US")),S(C,"T-spin MINI TRIPLES",u.clears.minitspintriples.toLocaleString("en-US")),S(C,"T-spin TRIPLES",u.clears.tspintriples.toLocaleString("en-US")),S(C,"T-spin MINI QUADS",u.clears.minitspinquads.toLocaleString("en-US")),S(C,"T-spin QUADS",u.clears.tspinquads.toLocaleString("en-US")),S(C,"ALL CLEARS",u.clears.allclear.toLocaleString("en-US")),S(C,"finesse %",`${(u.finesse.perfectpieces/Math.max(1,u.piecesplaced)*100).toFixed(2)}%`),S(C,"finesse faults",u.finesse.faults.toLocaleString("en-US"))}switch(p){case"40l":xt("results").classList.remove("nomusicpicker"),xt("result_header").innerHTML="FINAL TIME",xt("result_result").innerHTML=`${g.m}:${g.s}<span class="ms">.${g.ms}</span>`;break;case"blitz":xt("results").classList.add("nomusicpicker"),xt("result_header").innerHTML="FINAL SCORE",xt("result_result").textContent=u.score.toLocaleString("en-US");break;case"custom":switch(xt("results").classList.remove("nomusicpicker"),h.objective_result){case"score":xt("result_header").innerHTML="FINAL SCORE",xt("result_result").textContent=u.score.toLocaleString("en-US");break;case"time":xt("result_header").innerHTML="FINAL TIME",xt("result_result").innerHTML=`${g.m}:${g.s}<span class="ms">.${g.ms}</span>`;break;case"lines":xt("result_header").innerHTML="FINAL LINE COUNT",xt("result_result").textContent=u.lines}break;case"zenith":case"zenithex":xt("result_header").innerHTML="FINAL ALTITUDE",xt("result_result").innerHTML=`${Math.floor(u.zenith.altitude).toLocaleString("en-US")}<span class="ms">.${Math.floor(u.zenith.altitude%1*10)}</span><span class="unit">M</span><span class="mods">${h.zenith_mods.map((e=>`<img src="/res/zenith-mods/pbicons-tetra/${zt(e)}.png" title="${w.Strings.zenithMods[e]??"Unknown Mod"}" />`)).join("")}</span>`}const x=new Date(t.ts)?.toLocaleString(),A=w.Strings.longTypeNames[p],v=zt(d.username??"Unknown Player");Bi.results.footer=`${A} played by <a class="tetra_pop" data-hover="tap" data-hit="click" data-username="${v}">${v.toUpperCase()}</a> on ${x}`,Bi.results.back=n,Wi(!0),Hi("results"),xt("results").classList.toggle("fakereplay",!t.id),xt("results").classList.toggle("isreplay",!o),xt("results").classList.toggle("noreplay",!t),Pi(o?p:t.id?"tetra":"custom");t.id&&(xt("replayid_results").textContent=`R:${t.id}`);e=t,xt("handling_item_arr").textContent=h.handling.arr,xt("handling_item_das").textContent=h.handling.das,xt("handling_item_sdf").textContent=h.handling.sdf>=41?"":h.handling.sdf,xt("results").classList.toggle("disputed",!!r?.disputed),a&&(a.includes("out of date")||a.includes("already submitted"))&&(a.includes("out of date")&&(s=!0),a=null);a?(xt("results").classList.add("error"),xt("submissionerror_results").textContent=a):xt("results").classList.remove("error");if(xt("results").classList.toggle("hasranks",!!l),l){if(l.user<=10){if(xt("personalrank_results").classList.toggle("textual",1===l.user),xt("personalrank_results_data").innerHTML=1===l.user?"PERSONAL BEST":l.user,xt("personalrank_results").classList.remove("hidden"),i[p]){let e=null;switch(p){case"40l":{const t=wt(Math.abs(i[p].results.stats.finaltime-u.finaltime));e=`${t.m}:${t.s}.${t.ms}`;break}case"blitz":e=`${Math.abs(i[p].results.stats.score-u.score).toLocaleString("en-US")} points`}xt("personalrank_results_sub").innerHTML=`${e||""}${e?` ${1===l.user?"improvement":"behind"} &bull; `:""}last PB was ${Bt(Date.parse(i[p].ts)).toUpperCase()} ago`}else xt("personalrank_results_sub").innerHTML="this is your first game, play more to track your improvement";xt("personalrank_results").classList.toggle("best",1===l.user)}else xt("personalrank_results").classList.add("hidden");l.local>0?(xt("countryrank_results").classList.toggle("textual",1===l.local),xt("countryrank_results_data").innerHTML=1===l.local?"COUNTRY RECORD":l.local,xt("countryrank_results_sub").innerHTML=1===l.local?"":`TOP ${Math.min(100,(l.local-1)/Math.max(1,l.localcount)*100).toFixed(2)}%`,xt("countryrank_results").classList.remove("hidden"),xt("countryrank_results").classList.toggle("best",1===l.local)):xt("countryrank_results").classList.add("hidden"),l.global>0?(xt("globalrank_results").classList.toggle("textual",1===l.global),xt("globalrank_results_data").innerHTML=1===l.global?"WORLD RECORD":l.global,xt("globalrank_results_sub").innerHTML=1===l.global?"":`TOP ${Math.min(100,(l.global-1)/Math.max(1,l.globalcount)*100).toFixed(2)}%`,xt("globalrank_results").classList.remove("hidden"),xt("globalrank_results").classList.toggle("best",1===l.global)):xt("global_results").classList.add("hidden");const e=!i[p];1===l.user&&(i[p]=r,F()),e||(1===l.global?(xa.SePlay("worldrecord"),Di("globalbest","WORLD RECORD!")):1===l.local?(xa.SePlay("personalbest"),Di("personalbest","COUNTRY BEST!")):1===l.user&&(xa.SePlay("personalbest"),Di("personalbest","PERSONAL BEST!")))}}(t,n),n.isClientSide)switch(xa.SePlay("showscore"),t.gamemode){case"40l":xa.BgmPlaySmoothlyWithRandom("success-story");break;case"blitz":xa.BgmPlaySmoothlyWithRandom("philosophy");break;case"custom":xa.BgmPlaySmoothlyWithRandom("kaiser-hige-na-neko")}}function S(e,t,n){const s=document.createElement("tr");e.appendChild(s);const i=document.createElement("td");i.textContent=t,s.appendChild(i);const o=document.createElement("td");o.innerHTML=n,s.appendChild(o)}function z(){const e={};return vt("#custom_content_container .room_config_item[data-index]").forEach((t=>{const n=t.getAttribute("data-index");let s;switch(t.getAttribute("type")){case"number":s=parseFloat(t.value);break;case"checkbox":s=!!t.checked;break;case"range":s=Gn[t.value];break;default:s=t.value}t.classList.contains("room_config_spinner")&&(s=t.innerHTML),"slot_bar2"===n&&(s="progress"),e[n]=s})),e}function F(){if(i["40l"]){const e=wt(i["40l"].results.stats.finaltime);xt("pbdisplay_40l_inner").innerHTML=`${e.m}:${e.s}<span>.${e.ms}</span>`,xt("pbdisplay_40l_inner").classList.remove("hidden"),xt("pbdisplay_40l").classList.remove("hidden")}else xt("pbdisplay_40l").classList.add("hidden"),xt("pbdisplay_40l_inner").classList.add("hidden");i.blitz?(xt("pbdisplay_blitz_inner").innerHTML=i.blitz.results.stats.score.toLocaleString("en-US"),xt("pbdisplay_blitz_inner").classList.remove("hidden"),xt("pbdisplay_blitz").classList.remove("hidden")):(xt("pbdisplay_blitz").classList.add("hidden"),xt("pbdisplay_blitz_inner").classList.add("hidden")),i.zenith?(xt("pbdisplay_zenith_inner").innerHTML=`${Math.floor(i.zenith.results.stats.zenith.altitude).toLocaleString("en-US")}<span>.${Math.floor(i.zenith.results.stats.zenith.altitude%1*10)} M</span>${i.zenith.extras.zenith.mods.map((e=>`<img src="/res/zenith-mods/pbicons/${zt(e)}.png" title="${w.Strings.zenithMods[e]??"Unknown Mod"}" />`)).join("")}`,xt("pbdisplay_zenith_inner").classList.remove("hidden"),xt("pbdisplay_zenith").classList.remove("hidden")):(xt("pbdisplay_zenith").classList.add("hidden"),xt("pbdisplay_zenith_inner").classList.add("hidden")),i.zenithex?(xt("pbdisplay_zenithex_inner").innerHTML=`${Math.floor(i.zenithex.results.stats.zenith.altitude).toLocaleString("en-US")}<span>.${Math.floor(i.zenithex.results.stats.zenith.altitude%1*10)} M</span>${i.zenithex.extras.zenith.mods.map((e=>"expert"===e?"":`<img src="/res/zenith-mods/pbicons/${zt(e)}.png" title="${w.Strings.zenithMods[e]??"Unknown Mod"}" />`)).join("")}`,xt("pbdisplay_zenithex_inner").classList.remove("hidden"),xt("pbdisplay_zenithex").classList.remove("hidden")):(xt("pbdisplay_zenithex").classList.add("hidden"),xt("pbdisplay_zenithex_inner").classList.add("hidden"))}return{playReplayByID:function(e,t){qi("fetching replay"),Cn.get(`/api/games/${encodeURIComponent(e)}`).then((e=>{Ki(),ta(new L(e.game),t)}),(e=>{Ki(),sn(e)}))},playAgain:function(e){switch(n){case"40l":g(e);break;case"blitz":e.song="hyper-velocity",f(e);break;case"custom":C(e)}},play40L:g,playBlitz:f,playZen:function(e){l=e.inroom,n="zen",a=Date.now(),Il.destroyAll(),Wi(!1),Hi("none"),xa.BgmFadeOut(),l||document.body.classList.contains("inpair")||document.body.classList.contains("matchmaking")||ll("online","zen"),Wt("Zen"),Vs.setAlternate("ROS"),Vs.setPage("/ingame/solo"),l&&(No.set("roomzen",{header:e.roomname,sub:"ZEN WHILE WAITING",buttons:["exitRoomZen"]}),document.body.classList.add("inmultizen")),Ai=new v("keyboard"),Ai.loadZenConfig(),Ai.setGame({version:y,seed_random:!0,allow180:!0,countdown:!0,countdown_interval:1e3,precountdown:e.inroom?0:3e3,prestart:e.inroom?500:1e3,stride:!0,zoominto:e.inroom?"fast":"slow",display_zen:!0,slot_bar2:"progress",mission:e.inroom?"":w.Strings.gameMissions.zen,mission_type:"mission_free",objective_type:"none",song:"RANDOMcalm",bgmnoreset:!0,nosiren:!0,infinite_stock:!0,zenlevels:!0,zenlevel:b.level,zenprogress:b.progress,score:b.score,map:b.map,forfeit_time:e.inroom?1:30,can_retry:!0,can_undo:!0,nolockout:!0,retryisclear:!0,usezenconfig:!0,noreplay:!0,garbagemultiplier:1,pro:!0,b2bcharging:!0,b2bcharge_at:4,b2bcharge_base:3,allclear_garbage:5,allclear_b2b:1,allclear_b2b_sends:!0,allclear_b2b_dupes:!1,allclear_charges:!1,b2bextras:!1,garbagespecialbonus:!0,clutch:!0}),Ai.state.stats.btb=b.b2b??0,Ai.on("stop",m),Ai.createGameHolder(),Ai.startGame()},playCustom:C,testControls:function(){Wi(!1),Ai=new v("keyboard"),Ai.setGame({version:y,seed_random:!0,g:.02,allow180:!0,countdown:!1,precountdown:0,prestart:250,zoominto:"fast",objective_type:"none",can_retry:!0,nolockout:!0,retryisclear:!0,stride:!0,infinite_stock:!0,forfeit_time:1,display_username:!0,username:`arr ${ot.handling.arr}F,das ${ot.handling.das}F,sdf ${41==ot.handling.sdf?"":`${ot.handling.sdf}X`}`,neverstopbgm:!0}),Ai.on("quit",(function(){o.push(setTimeout((()=>{Wi(!0)}),200))})),Ai.createGameHolder(),Ai.startGame()},loadReplay:k,setGameOpts:function(e){vt("#custom_content_container .room_config_item[data-index]").forEach((t=>{const n=t.getAttribute("data-index"),s=kt(e,n);switch(t.getAttribute("type")){case"number":case"text":default:t.value=s;break;case"checkbox":t.checked=!!s;break;case"range":t.value=Gn.indexOf(s)}t.classList.contains("room_config_spinner")&&(t.textContent=s)}))},reportAbortedGame:u,anchorSeed:function(e){p=`SESS-${Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}`,Cn.post("/api/games/anchor",{seed:e},{headers:{"X-Session-ID":p}})},loadZen:async function(e){const t=await st.read("zenProgression");let n=b;if(e&&!t)n=e;else if(!e&&t)n=t;else if(e&&t){n=t.level+t.progress>e.level+e.progress&&t.cycle>=e.cycle?t:e}b=n,b.b2b|=0,b.cycle|=1,st.write("zenProgression",b)},saveZen:function(e,t=0){e.level>b.level&&Wt("Zen"),b=e,st.write("zenProgression",e),bn.anon()||(Cn.post("/api/games/zen",{...e,timeplayed:Math.floor((Date.now()-a)/1e3)}).then((e=>{e.xp&&(r+=e.xp,t&&o.push(setTimeout((()=>{Sn(r??0),r=0}),t)))})),a=Date.now())},getZen:()=>b,resetZen:()=>{b={map:`${"_".repeat(400)}?`,level:1,progress:0,score:0,b2b:0,cycle:b.cycle+1},localStorage.removeItem("zenProgression")},stopNow:()=>{Ai&&Ai.endNow(),A?.forEach((e=>e.endNow())),xt("replay").classList.add("hidden"),xt("replaytools").classList.add("disabled"),xt("replaytools").classList.add("hidden"),o.forEach((e=>{clearTimeout(e)})),o=[]},leagueOnly:()=>{Ai&&Ai.endNow(),A?.forEach((e=>"mission_league"===e.state.setoptions.mission_type&&!e.source.IsReplay()||e.endNow())),xt("replay").classList.add("hidden"),xt("replaytools").classList.add("disabled"),xt("replaytools").classList.add("hidden"),o.forEach((e=>{clearTimeout(e)})),o=[]},setRecords:e=>{i=Object.fromEntries(Object.entries(e).map((e=>[e[0],e[1].record]))),F()},updatePBDisplays:F,getRecords:()=>i,setUnsafeTimeout:(...e)=>{o.push(setTimeout(...e))},addStatsLine:S,getZenithStats:()=>c,setZenithStats:(e,t)=>{if(!t){const t=[];c.floor<2&&e.floor>=2&&t.push("nohold"),c.floor<3&&e.floor>=3&&t.push("messy"),c.floor<4&&e.floor>=4&&t.push("gravity"),c.floor<5&&e.floor>=5&&t.push("volatile"),c.floor<6&&e.floor>=6&&t.push("doublehole"),c.floor<7&&e.floor>=7&&t.push("invisible"),c.floor<8&&e.floor>=8&&t.push("allspin"),c.floor<9&&e.floor>=9&&t.push("expert"),t.length&&(xa.SePlay("allclear"),Qt({msg:`you've unlocked the ${t.map((e=>`"${w.Strings.zenithMods[e].toUpperCase()}"`)).join(", ")} mod${1===t.length?"":"s"}!`,color:"#FFAE00",icon:"achievement"}),xt("zenith_deck_nag").classList.toggle("hidden",!bn.anon()));const n=[];for(const t of w.allowedReverseCards){(e.mod_distance[t]??0)>=3e4&&(c.mod_distance[t]??0)<3e4&&n.push(t)}n.length&&(xa.SePlay("allclear"),Qt({msg:`you've mastered the ${n.map((e=>`"${w.Strings.zenithMods[e].toUpperCase()}"`)).join(", ")} mod${1===n.length?"":"s"}!`,color:"#FFAE00",icon:"achievement"}),xt("zenith_deck_nag").classList.toggle("hidden",!bn.anon()))}c=e;for(const t of vt(".zenith_card")){if(t.classList.toggle("floorlocked",e.floor<t.dataset.floor),w.allowedReverseCards.includes(t.dataset.card)){const n=e.mod_distance[t.dataset.card]||0,s=n>=3e4,i=Math.floor(n).toString();s?(t.classList.add("reversable"),t.querySelector(".zenith_card_crystal_dark").classList.remove("hidden"),t.querySelector(".zenith_card_crystal").classList.remove("hidden"),t.querySelector(".zenith_card_progress").classList.add("hidden"),t.querySelector(".zenith_card_progress").innerHTML=`${i}<span><span>M</span></span>`):(t.classList.remove("reversable"),t.querySelector(".zenith_card_crystal_dark").classList.add("hidden"),t.querySelector(".zenith_card_crystal").classList.add("hidden"),n>=1?(t.querySelector(".zenith_card_progress").classList.remove("hidden"),t.querySelector(".zenith_card_progress").innerHTML=`<sub>${"0".repeat(5-i.length)}</sub>${i}<span> / 30000<span>M</span></span>`):(t.querySelector(".zenith_card_progress").classList.add("hidden"),t.querySelector(".zenith_card_progress").innerHTML=""))}_.zenith_freemod&&(t.classList.remove("floorlocked"),t.classList.add("reversable"))}_.zenith_duoisfree&&bn.anon()&&(xt("zenith_duo_lockover").src="/res/zenith-mods/lockover-incompatible.png",xt("zenith-duo-card").classList.add("locked"),xt("zenith-duo-card").classList.remove("reversable"))}}})(),Qs=(()=>{const e=`SESS-${Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}`;let t=null;const n=window.location.hash.substring(1);history.replaceState(null,null," ");let s=!1,i=[],a=!1;function r(n){return new Promise(((o,r)=>{var l,p;(l=e,p=t,new Promise(((e,t)=>{fn.getWhenReady((async n=>{Cn.get("/api/users/me",void 0,{headers:{"X-Session-ID":l,"X-Connection-ID":await bn.esc(p,n)}}).then((t=>{e(t.user)}),(e=>{if(e.error&&"A-LINED"===e.error.msg)return window.location=e.error.redirect,void Os();Tn.unready(),t()}))}))}))).then((e=>{n&&(n.classList.remove("busy"),c(n),xt("captcha_form").classList.remove("busy"),c(xt("captcha_form")),xt("totp_form").classList.remove("busy"),c(xt("totp_form")),xt("entry_form").classList.remove("busy"),c(xt("entry_form"))),Tn.ready((()=>{xt("desktop_transition").className.includes("hid")||(xt("desktop_transition").classList.add("hiding-direct"),xt("home_menu").classList.add("play-entry-anim"),setTimeout((()=>{xt("desktop_transition").classList.add("hidden"),xt("home_menu").classList.remove("play-entry-anim")}),3e3))})),e.username!==bn.username()&&(Qt({msg:`your username was changed from ${bn.username().toUpperCase()} to ${e.username.toUpperCase()}.`,color:"#FFD800",icon:"swaphost",timeout:3e4}),bn.changeUsername(e.username)),xt("me_username").innerHTML=e.username,xt("me_username").classList.toggle("lu",e.username.length>13),xt("tetra_me_username").innerHTML=e.username,xt("zenith_party_self_username").innerHTML=e.username.toUpperCase(),xt("zenith_party_self_username").classList.toggle("ln",e.username.length>12),xt("zenith_party_self").setAttribute("data-username",e.username),vn(yn(e.xp),xt("me_level")),vn(yn(e.xp),xt("zenith_party_self_level")),Sn(e.xp,!0),bn.setRole(e.role),"anon"===e.role?(document.body.classList.add("anon"),localStorage.setItem("moonKagariUsername","X-ANON"),Nt(["trackEvent","Activation","Anon",e.username])):(document.body.classList.remove("anon"),!e.email&&e.xp>11756&&po(),localStorage.setItem("tetrio_lastUsername",e.username),localStorage.setItem("moonKagariUsername",e.username),Nt(["trackEvent","Activation",s?"Registration":"Login",e.username]),window.Sentry?.setUser?.({id:e._id,email:e.email,username:e.username})),window.Sentry?.setTag?.("feecof",localStorage.getItem("feecofScore")),document.body.classList.toggle("uses2fa",!!e.totp&&!!e.totp.enabled),document.body.classList.toggle("bot","bot"===e.role),document.body.classList.toggle("staff",Xn.includes(e.role)),document.body.setAttribute("data-country",e.country),document.body.setAttribute("data-country-geo",e.geo?.country??e.country),document.body.setAttribute("data-country-hidden",!1===e.privacy_showcounty?"yes":"no"),document.body.setAttribute("data-xp",e.xp),document.body.setAttribute("data-account-ts",e.ts?new Date(e.ts).getTime():"0"),document.body.setAttribute("data-near-rank","z"===(e.league?.rank??"z")?e.league?.bestrank??"z":e.league?.rank),Ys.loadZen(e.zen),Ys.setRecords(e.records||{}),Ys.setZenithStats(e.zenith||{},!0),ot.electron.adblock&&0===e.total_supported&&e.supporter&&(ot.electron.adblock=!1,mt()),Nt(["setCustomDimension",1,e.role]),"anon"!==e.role&&Nt(["setUserId",e.username]);const t=e.supporter||Xn.includes(e.role);if(setTimeout((()=>{let e="";t?e=" (ads exempt)":window.IS_ELECTRON&&ot.electron.adblock?e=" (ads disabled)":document.body.classList.contains("ceriad_unavailable")&&(e=" (ads blocked)"),Nt(["setCustomDimension",2,window.IS_ELECTRON?`TETR.IO Desktop v${window.CLIENT_VERSION}${e}`:`Browser${e}`])}),2500),document.body.classList.toggle("supporter",!!e.supporter),document.body.classList.toggle("supporter_at_launch",!!e.supporter),localStorage.setItem("wasLastSupporter",e.supporter||Xn.includes(e.role)?"Yes, that's it!":"No, that's wrong!"),_.noceriad||e.supporter||Xn.includes(e.role)||window.IS_ELECTRON&&(ot.electron.adblock||window.TETRAKARN)||Vs.loadProvider(),i=e.warnings,a=!!e.thanked,"ok"===e.bannedstatus)h(),document.body.classList.remove("trapped"),localStorage.removeItem("trapped");else{document.body.classList.add("trapped"),localStorage.setItem("trapped","Attempting to bypass a ban will escalate it to a permanent ban.");let t="silence"==e.bannedstatus?"SILENCED users may not chat or create public rooms, but can still submit scores and play online.":"RESTRICTED users may not play online or submit scores.",n=1;e.banlist.forEach((s=>{t+=`</p><p>&nbsp;</p><p class="modal_also">#${n++}: ban id <span style="user-select: all; font-family: 'IND'; font-weight: 900; font-size: 1.3em; transform: scaleX(${s.shortid?"1.5":"1"}); display: inline-block; transform-origin: left; line-height: 0;">${s.shortid?`<span style="-webkit-text-fill-color: transparent; -webkit-text-stroke: 1px currentColor; text-fill-color: transparent; text-stroke: 1px currentColor;">BAN!</span>${s.shortid}`:s.id}</span></p><p>your ${s.from} was ${"silence"==s.type?"silenced":"restricted"} at ${new Date(s.ts).toLocaleString()} for the following reason:</p><p class="banreason">${zt(s.reason)}${s.context&&s.context.chat&&s.context.chat.length?`<span class="context">${s.context.chat.map((t=>`[${e.username.toUpperCase()}] ${zt(t)}`)).join("\n")}</span>`:""}</p><p>this ban ${Date.parse(s.expires)-Date.parse(s.ts)>=54e12?"will not expire":`expires in ${Bt(Date.parse(s.expires))}`}.`})),xt("ban_header").innerHTML="YOU HAVE BEEN "+("silence"==e.bannedstatus?"SILENCED":"RESTRICTED"),xt("ban_reasons").outerHTML=`<p id="ban_reasons">${t}</p>`,xt("banned_warning").classList.remove("hidden"),xt("banned_warning_iponly").classList.toggle("hidden",e.banlist.some((e=>"account"===e.from))),document.body.classList.add(`banstatus_${e.bannedstatus}`),xt("desktop_transition").className.includes("hid")||(xt("desktop_transition").classList.add("hiding-preload"),setTimeout((()=>{xt("desktop_transition").classList.add("hidden")}),1e3))}_.league_season.ranked?-1===e.league.tr?(xt("league_rating").innerHTML=`${e.league.gamesplayed}<span>/10 rating games played</span>`,xt("league_rating").title="",xt("leaguestanding_rating").innerHTML=`${e.league.gamesplayed}<span>/10 rating games played</span>`,xt("league_ticker").innerHTML="play rating games to receive a rating",xt("league_rank").classList.add("hidden"),xt("league_warning").classList.add("hidden"),xt("me_leaguerank").classList.add("hidden")):(vi=Math.round(e.league.tr),ki=e.league.rank,xt("league_rating").innerHTML=`${Math.round(e.league.tr)}<span>TR</span>`,xt("league_rating").title=e.league.tr,xt("leaguestanding_rating").innerHTML=`${Math.round(e.league.tr)}<span>TR</span>`,xt("league_ticker").innerHTML=`glicko: <span title="Your raw rating in the Glicko-2 system. Higher is better.">${e.league.glicko}</span><span title="How uncertain the Glicko-2 system is of your rating. Lower is better.">${e.league.rd}</span> - games won: <span>${e.league.gameswon}</span> / ${e.league.gamesplayed} (<span>${Math.floor(e.league.gameswon/e.league.gamesplayed*1e4)/100}</span>%)`,xt("league_rank").src=`/res/league-ranks/${e.league.rank}.png`,xt("leaguestanding_rank").src=`/res/league-ranks/${e.league.rank}.png`,xt("league_rank").classList.remove("hidden"),xt("league_warning").classList.toggle("hidden","z"!==e.league.rank),xt("me_leaguerank").classList.toggle("hidden","z"===e.league.rank),xt("me_leaguerank").src=`/res/league-ranks/${e.league.rank}.png`):(xt("league_rating").innerHTML="OFF-SEASON",xt("league_rating").title="",xt("leaguestanding_rating").innerHTML=`${e.league.gameswon}<span> game${1===e.league.gameswon?"":"s"} won</span>`,xt("league_ticker").innerHTML=`${e.league.gameswon} GAME${1===e.league.gameswon?"":"S"} WON`,xt("league_rank").classList.add("hidden"),xt("league_warning").classList.add("hidden"),xt("me_leaguerank").classList.add("hidden")),-1===e.league.standing?xt("league_placement").classList.add("hidden"):(wi=e.league.standing,xt("league_placement").classList.remove("hidden"),xt("league_placement").innerHTML=`#<span>${e.league.standing}</span>`,xt("league_placement").classList.toggle("t100",e.league.standing<=100&&e.league.standing>10),xt("league_placement").classList.toggle("t10",e.league.standing<=10&&e.league.standing>1),xt("league_placement").classList.toggle("t1",1===e.league.standing)),e.avatar_revision?xt("me_avatar").setAttribute("src",`/user-content/avatars/${e._id}.jpg?rv=${e.avatar_revision}`):"anon"!==e.role&&xt("me_avatar").setAttribute("src",Ot(e._id)),xt("zenith_party_self_avatar").setAttribute("src",xt("me_avatar").getAttribute("src")),(e.supporter||Xn.includes(e.role))&&(document.body.classList.add("ceriad_exempt"),document.body.classList.add("ceriad_disabled"),Vs.disable(),document.cookie=`ceriad_exempt=1;max-age=31536000;domain=${_.domain}`),Vs.unmountGroup("login"),o(e)})).catch((e=>{console.log(e),Tn.unready(),xt("desktop_transition").className.includes("hid")||(xt("desktop_transition").classList.add("hiding-preload"),setTimeout((()=>{xt("desktop_transition").classList.add("hidden")}),1e3)),n&&(n.classList.remove("busy"),c(n),xt("captcha_form").classList.remove("busy"),c(xt("captcha_form")),xt("totp_form").classList.remove("busy"),c(xt("totp_form"))),en("you were logged out. please log in again!"),xt("entry_username").value=bn.username(),xt("entry_button").click()}))}))}function l(){if(!o.utils.isWebGLSupported())return;"Attempting to bypass a ban will escalate it to a permanent ban."===localStorage.getItem("trapped")&&document.body.classList.add("trapped");const e=function(){if(!n)return;let e=!1;const t=n.substring(0,2);return"P:"!==t&&"D:"!==t?(vt(".quickjoin").forEach((s=>{switch(t){case"R:":case"r:":s.innerHTML="opening replay <span></span>",s.querySelector("span").textContent=n;break;case"S:":s.innerHTML="supporting <span></span>",s.querySelector("span").textContent=n.substring(2),e=!0;break;default:s.innerHTML="joining room <span></span>",s.querySelector("span").textContent=!0!==ot.video.hideroomids?`#${n}`:"<hidden>"}s.classList.remove("hidden")})),vt(".electron_jump").forEach((e=>{e.classList.remove("hidden"),e.addEventListener("click",(function(e){c(xt("entry_form")),c(xt("return_form")),p(xt("electron_form")),window.location=`tetrio://${n}`}))})),vt(".electron_jump_also").forEach((e=>{e.classList.remove("hidden")})),e):void 0}();if("P:"!==n.substring(0,2))if("D:"!==n.substring(0,2)){if(window.IS_ELECTRON||_.noceriad?document.body.classList.add("no_login_ceriad"):(Rt("Login Screen"),"Yes, that's it!"===localStorage.getItem("wasLastSupporter")?document.body.classList.add("no_login_ceriad"):Vs.loadProvider()),bn.loggedIn()){if(p(xt("return_form")),xt("return_is").innerHTML=bn.username().toUpperCase(),(e||window.IS_ELECTRON&&"never"!==ot.electron.loginskip&&!window.EMERGENCY_MODE)&&("always"===(ot.electron.loginskip||"always")||n))return xt("return_form").classList.add("busy"),void r(xt("return_form"))}else p(xt("entry_form"));xt("desktop_transition").className.includes("hid")||(xt("desktop_transition").classList.add("hiding-preload"),setTimeout((()=>{xt("desktop_transition").classList.add("hidden")}),1e3))}else p(xt("deletion_step1_form"));else p(xt("reset_step2_form"))}function c(e){e.classList.add("hidden"),setTimeout((()=>{e.classList.contains("hidden")&&e.classList.add("noop")}),300)}function p(e){e.classList.remove("noop"),e.getBoundingClientRect(),e.classList.remove("hidden"),document.body.classList.contains("no_login_ceriad")||("return_form"===e.id?Vs.mount("auth-return-lb"):"entry_form"===e.id&&Vs.mount("auth-login-lb"))}function h(){if(!i.length)return void(a?(_n({msg:'</p><center><img src="/res/hifive.png" /><h1>THANK YOU FOR REPORTING</h1></center><p>thank you for your recent report! reports like yours help us identify those who disrupt TETR.IO for everyone.</p><p>your recent reports led to actions against a badly behaving player and their account. thank you for making TETR.IO a better place!</p><p>we hope you\'ll continue assisting us by reporting bad behavior in the future, as well.</p><br><p>TETR.IO STAFF',classes:["noclickout"],buttons:[{label:"OK",classes:[],callback:e=>{e(),Tn.finish()}}]}),xt("desktop_transition").className.includes("hid")||(xt("desktop_transition").classList.add("hiding-preload"),setTimeout((()=>{xt("desktop_transition").classList.add("hidden")}),1e3))):Tn.finish());const e=i.shift();_n({title:"YOU HAVE BEEN WARNED",msg:`a TETR.IO moderator has left a message for you. please read it thoroughly.</p><p>&nbsp;</p><p class="modal_also">warning id ${e.id}</p><p>you were warned at ${new Date(e.ts).toLocaleString()} for the following reason:</p><p class="banreason">${zt(e.reason)}${e.context&&e.context.chat&&e.context.chat.length?`<span class="context">${e.context.chat.map((e=>`[${bn.username().toUpperCase()}] ${zt(e)}`)).join("\n")}</span>`:""}`,classes:["ban_modal","noclickout"],buttons:[{label:"OK",classes:[],callback:e=>{e(),h()}}]}),xt("desktop_transition").className.includes("hid")||(xt("desktop_transition").classList.add("hiding-preload"),setTimeout((()=>{xt("desktop_transition").classList.add("hidden")}),1e3))}function d(){if(window.location.href.includes("danger_fromDomainMismatch")){document.body.insertAdjacentHTML("beforeend",'<div id="banned_warning" class="oob_modal crash_modal"><h1>SESSION HIJACK DETECTED</h1><p class="modal_warning_stern">YOU ARE BEING SCAMMED, HACKED AND/OR PHISHED! DO NOT LOG IN!</p><p>TETR.IO has detected that your session is being hijacked. an attacker can read your passwords and tokens, steal your account, read payment information, and more. DO NOT LOG IN! make sure you are on https://tetr.io/. if you are, check for viruses immediately.</p><p class="modal_also">this also happens on open proxies/unblocker websites. these are extremely dangerous for the same reasons and are not allowed on TETR.IO.</p></div>');const e=new Audio("https://kagari.online/serious_alarm.wav");e.loop=!0,en("your session is being hijacked! DO NOT LOG IN. please make sure you are on https://tetr.io/! if you are, please check your device against malware."),e.play(),Nt(["trackEvent","Error","Session Hijack"])}else window.parent?window.parent.location=`https://${_.domain}/?danger_fromDomainMismatch`:window.location=`https://${_.domain}/?danger_fromDomainMismatch`;Tn.unready(),Tn.setState("environment","load blocked, security issue"),xt("desktop_transition").className.includes("hid")||(xt("desktop_transition").classList.add("hiding-preload"),setTimeout((()=>{xt("desktop_transition").classList.add("hidden")}),1e3))}return Gt((async()=>{if(document.getElementById("js_load_error").innerHTML.includes("TETR.IO PLUS")&&(document.body.classList.add("sigliatrip_idiot"),setTimeout((()=>{xt("sigliatrip_idiot_message").classList.add("hidden")}),15e3)),window["%hammerhead%"]||document.querySelector("src-hammerhead-stored-value")||"1"===document.body.getAttribute("__cpp")||window.alloyLocation||document.querySelector("[__uv-attr-src]"))return d();if(_.domain){if(Array.from(new Uint8Array(await crypto.subtle.digest("SHA-1",(new TextEncoder).encode(`TETR.IO:${_.serverCycle}>>DOMAIN>>${_.domain}<<KagarinSoCute`)))).map((e=>e.toString(16).padStart(2,"0"))).join("")!==_.domain_hash||_.domain!==window.location.host)return d()}Cn.get("/api/server/environment",void 0,{headers:{"X-Session-ID":e}}).then((async e=>{if(_.domain){if(Array.from(new Uint8Array(await crypto.subtle.digest("SHA-1",(new TextEncoder).encode(`TETR.IO:${_.serverCycle}>>DOMAIN>>${_.domain}<<KagarinSoCute`)))).map((e=>e.toString(16).padStart(2,"0"))).join("")!==_.domain_hash||_.domain!==window.location.host)return d()}t=Uint8Array.from(atob(e.vx),(e=>e.charCodeAt(0))),Tn.finishLoad("environment"),window.IS_ELECTRON&&(console.log("%cUsing the Desktop Client","color: #F3E5C0;\n\t\t\t\t\tfont-size: 1.2em;\n\t\t\t\t\tfont-weight: 900;\n\t\t\t\t\ttext-shadow: 0px 0px 2px #BAB650;\n\t\t\t\t\tbackground-color: #504C3488;\n\t\t\t\t\tpadding: 0 1em;\n\t\t\t\t\tborder-radius: 3px;"),Ms()),e.signature.client.build.id!==_.client.build.id||"creamykagarin18451"!==document.body.getAttribute("data-v")?(console.log(`%cOut of date. Local build ${_.client.build.id} does not match server build ${e.signature.client.build.id}`,"color: #FF8E8E;\n\t\t\t\t\t font-size: 1.2em;\n\t\t\t\t\t font-weight: 900;\n\t\t\t\t\t text-shadow: 0px 0px 2px #E83737;\n\t\t\t\t\t background-color: #B6181888;\n\t\t\t\t\t padding: 0 1em;\n\t\t\t\t\t border-radius: 3px;"),Tn.update(!1,`${e.signature.client.commit.id}.${e.signature.serverCycle}.${e.signature.client.build.id}`)):(console.log(`%cUp to date. Local version ${_.version}-${_.mode} | Commit ${_.client.commit.id}@${_.client.branch} (${new Date(_.client.commit.time).toLocaleString()}) | Server cycle ${_.serverCycle} | Build ${_.client.build.id} (${new Date(_.client.build.time).toLocaleString()})`,"color: #C0F3C8;\n\t\t\t\t\t font-size: 1.2em;\n\t\t\t\t\t font-weight: 900;\n\t\t\t\t\t text-shadow: 0px 0px 2px #50BA5C;\n\t\t\t\t\t background-color: #34503788;\n\t\t\t\t\t padding: 0 1em;\n\t\t\t\t\t border-radius: 3px;"),l()),xt("preform_players_entry").innerHTML=e.stats.players.toLocaleString("en-US"),xt("preform_players_return").innerHTML=e.stats.players.toLocaleString("en-US"),xt("preform_games_entry").innerHTML=e.stats.gamesplayed.toLocaleString("en-US"),xt("preform_games_return").innerHTML=e.stats.gamesplayed.toLocaleString("en-US"),xt("preform_hours_entry").innerHTML=Math.floor(e.stats.gametime/3600).toLocaleString("en-US"),xt("preform_hours_return").innerHTML=Math.floor(e.stats.gametime/3600).toLocaleString("en-US")}),(e=>{Tn.finishLoad("environment"),window.IS_ELECTRON&&(console.log("%cUsing the Desktop Client","color: #F3E5C0;\n\t\t\t\t\tfont-size: 1.2em;\n\t\t\t\t\tfont-weight: 900;\n\t\t\t\t\ttext-shadow: 0px 0px 2px #BAB650;\n\t\t\t\t\tbackground-color: #504C3488;\n\t\t\t\t\tpadding: 0 1em;\n\t\t\t\t\tborder-radius: 3px;"),Ms()),en("failed to check for updates. check your connection!"),l()})),xt("entry_button").addEventListener("click",(function(e){let t=xt("entry_username").value.toLowerCase();if(!t){if(localStorage.getItem("defaultAnonUsername"))xt("entry_username").value=localStorage.getItem("defaultAnonUsername");else{const e=`GUEST-${Pt(6,10,"0123456789AIUEO_")}`;localStorage.setItem("defaultAnonUsername",e),xt("entry_username").value=e}return t=xt("entry_username").value.toLowerCase(),xt("entry_form").classList.add("busy"),void xt("askregister_anon").click()}xt("entry_form").classList.add("busy"),Cn.get(`/api/users/${encodeURIComponent(t)}/exists`).then((e=>{xt("entry_form").classList.remove("busy"),c(xt("entry_form")),e.exists?(xt("login_is").innerHTML=t.toUpperCase(),xt("login_password_username_field").value=t.toUpperCase(),p(xt("login_form")),xt("login_password").focus()):(xt("askregister_is").innerHTML=t.toUpperCase(),xt("register_password_username_field").value=t.toUpperCase(),p(xt("askregister_form")))}),(e=>{xt("entry_form").classList.remove("busy"),sn(e)}))})),xt("askregister_back").addEventListener("click",(function(e){c(xt("askregister_form")),p(xt("entry_form")),xt("entry_username").focus()})),xt("askregister_register").addEventListener("click",(function(e){c(xt("askregister_form")),localStorage.getItem("tetrio_lastUsername")?(p(xt("registeralt_form")),xt("registeralt_username").textContent=localStorage.getItem("tetrio_lastUsername").toUpperCase()):(p(xt("register_form")),xt("register_password_email_field").focus())})),xt("registeralt_back").addEventListener("click",(function(e){c(xt("registeralt_form")),p(xt("entry_form")),xt("entry_username").focus()})),xt("registeralt_continue").addEventListener("click",(function(e){c(xt("registeralt_form")),p(xt("register_form")),xt("register_password_email_field").focus()})),xt("register_button").addEventListener("click",(function(t){const n=xt("entry_username").value.toLowerCase(),i=xt("register_password_email_field").value,o=xt("register_password").value;o===xt("register_password_confirmation").value?(xt("register_form").classList.add("busy"),Cn.post("/api/users/create",{username:n,password:o,email:i||void 0,captcha:xt("captcha").value},{headers:{"X-Session-ID":e}}).then((e=>{xt("register_password").value="",xt("register_password_confirmation").value="",Qt("welcome!"),s=!0,bn.login(e.token,e.userid,n),r(xt("register_form"))}),(e=>{if(e.error&&"BLOCK"===e.error.msg){document.body.classList.add("trapped"),localStorage.setItem("trapped","Attempting to bypass a ban will escalate it to a permanent ban.");let t="BLOCKED users or IPs may not create accounts. try using an existing account.",n=1;return e.error.banlist.forEach((e=>{t+=`</p><p>&nbsp;</p><p class="modal_also">#${n++}: ban id <span style="user-select: all; font-family: 'IND'; font-weight: 900; font-size: 1.3em; transform: scaleX(${e.shortid?"1.5":"1"}); display: inline-block; transform-origin: left; line-height: 0;">${e.shortid?`<span style="-webkit-text-fill-color: transparent; -webkit-text-stroke: 1px currentColor; text-fill-color: transparent; text-stroke: 1px currentColor;">BAN!</span>${e.shortid}`:e.id}</span></p><p>your ${e.from} was ${"silence"==e.type?"silenced":"restrict"==e.type?"restricted":"blocked"} at ${new Date(e.ts).toLocaleString()} for the following reason:</p><p class="banreason">${zt(e.reason)}</p><p>this ban ${Date.parse(e.expires)-Date.parse(e.ts)>=54e12?"will not expire":`expires in ${Bt(Date.parse(e.expires))}`}.`})),xt("block_reasons").outerHTML=`<p id="block_reasons">${t}</p>`,xt("blocked_warning").classList.remove("hidden"),xt("blocked_warning_iponly").classList.toggle("hidden",e.error.banlist.some((e=>"account"===e.from))),e.error.infinite&&(xt("block_header").innerHTML="YOU HAVE BEEN BANNED FROM TETR.IO",xt("blocked_warning").classList.remove("ban_modal"),xt("blocked_warning").classList.add("crash_modal")),xt("register_form").classList.remove("busy"),xt("captcha_form").classList.remove("busy"),c(xt("register_form")),void c(xt("captcha_form"))}if(e.error&&"CAPTCHA"===e.error.msg)return xt("captcha").value="",xt("register_form").classList.remove("busy"),xt("captcha_form").classList.remove("busy"),xt("captcha_button").setAttribute("data-for","register_button"),xt("captcha_image").innerHTML=e.error.captcha,c(xt("register_form")),void p(xt("captcha_form"));xt("register_form").classList.remove("busy"),xt("captcha_form").classList.remove("busy"),sn(e)}))):en("those passwords don't match")})),xt("register_back").addEventListener("click",(function(e){c(xt("register_form")),p(xt("askregister_form")),xt("register_password").value="",xt("register_password_confirmation").value=""})),xt("login_button").addEventListener("click",(function(e){const t=xt("entry_username").value.toLowerCase(),n=xt("login_password").value;xt("login_form").classList.add("busy"),Cn.post("/api/users/authenticate",{username:t,password:n,totp:xt("totp").value}).then((e=>{xt("login_password").value="",bn.login(e.token,e.userid,t),r(xt("login_form"))}),(e=>{if(e.error&&"BLOCK"===e.error.msg){document.body.classList.add("trapped"),localStorage.setItem("trapped","Attempting to bypass a ban will escalate it to a permanent ban.");let t="BLOCKED users or IPs may not use TETR.IO.",n=1;return e.error.banlist.forEach((e=>{t+=`</p><p>&nbsp;</p><p class="modal_also">#${n++}: ban id <span style="user-select: all; font-family: 'IND'; font-weight: 900; font-size: 1.3em; transform: scaleX(${e.shortid?"1.5":"1"}); display: inline-block; transform-origin: left; line-height: 0;">${e.shortid?`<span style="-webkit-text-fill-color: transparent; -webkit-text-stroke: 1px currentColor; text-fill-color: transparent; text-stroke: 1px currentColor;">BAN!</span>${e.shortid}`:e.id}</span></p><p>your ${e.from} was ${"silence"==e.type?"silenced":"restrict"==e.type?"restricted":"blocked"} at ${new Date(e.ts).toLocaleString()} for the following reason:</p><p class="banreason">${zt(e.reason)}</p><p>this ban ${Date.parse(e.expires)-Date.parse(e.ts)>=54e12?"will not expire":`expires in ${Bt(Date.parse(e.expires))}`}.`})),xt("block_reasons").outerHTML=`<p id="block_reasons">${t}</p>`,xt("blocked_warning").classList.remove("hidden"),xt("blocked_warning_iponly").classList.toggle("hidden",e.error.banlist.some((e=>"account"===e.from))),e.error.infinite&&(xt("block_header").innerHTML="YOU HAVE BEEN BANNED FROM TETR.IO",xt("blocked_warning").classList.remove("ban_modal"),xt("blocked_warning").classList.add("crash_modal")),xt("login_form").classList.remove("busy"),void c(xt("login_form"))}if(e.error&&"TOTP"===e.error.msg)return xt("totp").value="",xt("login_form").classList.remove("busy"),xt("totp_form").classList.remove("busy"),xt("totp_button").setAttribute("data-for","login_button"),c(xt("login_form")),void p(xt("totp_form"));xt("totp_form").classList.remove("busy"),xt("login_form").classList.remove("busy"),sn(e)}))})),xt("login_back").addEventListener("click",(function(e){c(xt("login_form")),p(xt("entry_form")),xt("entry_username").focus(),xt("login_password").value=""})),xt("login_reset").addEventListener("click",(function(e){c(xt("login_form")),p(xt("request_reset_form")),xt("request_reset_email").focus(),xt("login_password").value=""})),xt("request_reset_back").addEventListener("click",(function(e){c(xt("request_reset_form")),p(xt("login_form")),xt("login_password").focus(),xt("request_reset_email").value=""})),xt("request_reset_button").addEventListener("click",(function(t){const n=xt("entry_username").value.toLowerCase(),s=xt("request_reset_email").value;xt("request_reset_form").classList.add("busy"),Cn.post("/api/users/requestPasswordReset",{username:n,email:s,captcha:xt("captcha").value},{headers:{"X-Session-ID":e}}).then((e=>{nn("if the email you entered was correct, you should be receiving an email shortly!"),xt("request_reset_form").classList.remove("busy"),xt("request_reset_back").click(),xt("captcha_form").classList.remove("busy"),c(xt("captcha_form"))}),(e=>{if(e.error&&"CAPTCHA"===e.error.msg)return xt("captcha").value="",xt("request_reset_form").classList.remove("busy"),xt("captcha_form").classList.remove("busy"),xt("captcha_button").setAttribute("data-for","request_reset_button"),xt("captcha_image").innerHTML=e.error.captcha,c(xt("request_reset_form")),p(xt("captcha_form")),void xt("captcha_form").classList.remove("busy");xt("request_reset_form").classList.remove("busy"),xt("captcha_form").classList.remove("busy"),sn(e)}))})),xt("reset_step2_button").addEventListener("click",(function(e){const t=n.substring(2),s=xt("reset_step2_password").value;s===xt("reset_step2_password_confirmation").value?(xt("reset_step2_form").classList.add("busy"),Cn.post("/api/users/resetPassword",{recoveryid:t,password:s}).then((e=>{xt("reset_step2_password").value="",xt("reset_step2_password_confirmation").value="",nn("password reset!"),c(xt("reset_step2_form")),p(xt("entry_form")),xt("entry_username").focus()}),(e=>{xt("reset_step2_form").classList.remove("busy"),sn(e)}))):en("those passwords don't match")})),xt("askregister_anon").addEventListener("click",(function(t){const n=xt("entry_username").value.toLowerCase();xt("askregister_form").classList.add("busy"),Cn.post("/api/users/anonymousJoin",{username:n,captcha:xt("captcha").value},{headers:{"X-Session-ID":e}}).then((e=>{e.newname||n.startsWith("guest-")||Qt("this name has been used before - please consider registering a full account!"),s=!0,bn.login(e.token,e.userid,n,!1),r(xt("askregister_form"))}),(e=>{if(e.error&&"BLOCK"===e.error.msg){document.body.classList.add("trapped"),localStorage.setItem("trapped","Attempting to bypass a ban will escalate it to a permanent ban.");let t="BLOCKED users or IPs may not use TETR.IO. try using an existing account.",n=1;return e.error.banlist.forEach((e=>{t+=`</p><p>&nbsp;</p><p class="modal_also">#${n++}: ban id <span style="user-select: all; font-family: 'IND'; font-weight: 900; font-size: 1.3em; transform: scaleX(${e.shortid?"1.5":"1"}); display: inline-block; transform-origin: left; line-height: 0;">${e.shortid?`<span style="-webkit-text-fill-color: transparent; -webkit-text-stroke: 1px currentColor; text-fill-color: transparent; text-stroke: 1px currentColor;">BAN!</span>${e.shortid}`:e.id}</span></p><p>your ${e.from} was ${"silence"==e.type?"silenced":"restrict"==e.type?"restricted":"blocked"} at ${new Date(e.ts).toLocaleString()} for the following reason:</p><p class="banreason">${zt(e.reason)}</p><p>this ban ${Date.parse(e.expires)-Date.parse(e.ts)>=54e12?"will not expire":`expires in ${Bt(Date.parse(e.expires))}`}.`})),xt("block_reasons").outerHTML=`<p id="block_reasons">${t}</p>`,xt("blocked_warning").classList.remove("hidden"),xt("blocked_warning_iponly").classList.toggle("hidden",e.error.banlist.some((e=>"account"===e.from))),e.error.infinite&&(xt("block_header").innerHTML="YOU HAVE BEEN BANNED FROM TETR.IO",xt("blocked_warning").classList.remove("ban_modal"),xt("blocked_warning").classList.add("crash_modal")),xt("askregister_form").classList.remove("busy"),xt("captcha_form").classList.remove("busy"),c(xt("askregister_form")),c(xt("entry_form")),void c(xt("captcha_form"))}if(e.error&&"CAPTCHA"===e.error.msg)return xt("captcha").value="",xt("askregister_form").classList.remove("busy"),xt("captcha_form").classList.remove("busy"),xt("entry_form").classList.remove("busy"),xt("captcha_button").setAttribute("data-for","askregister_anon"),xt("captcha_image").innerHTML=e.error.captcha,c(xt("askregister_form")),c(xt("entry_form")),void p(xt("captcha_form"));xt("askregister_form").classList.remove("busy"),xt("captcha_form").classList.remove("busy"),sn(e)}))})),xt("captcha_button").addEventListener("click",(function(e){xt("captcha").value&&(xt("captcha_form").classList.add("busy"),xt(xt("captcha_button").getAttribute("data-for")).click())})),xt("totp_button").addEventListener("click",(function(e){xt("totp").value&&(xt("totp_form").classList.add("busy"),xt(xt("totp_button").getAttribute("data-for")).click())})),xt("return_logout").addEventListener("click",(function(e){const t=()=>{c(xt("return_form")),bn.logout(!0),p(xt("entry_form"))};document.body.classList.contains("trapped")||"Attempting to bypass a ban will escalate it to a permanent ban."===localStorage.getItem("trapped")?(c(xt("return_form")),_n({title:"AS A STERN REMINDER",msg:'IF YOU HAVE BEEN SILENCED, RESTRICTED OR OTHERWISE BANNED, YOU MAY NEVER SWITCH TO ANOTHER ACCOUNT TO EVADE THE BAN. THIS INCLUDES SWITCHING TO AN ANONYMOUS ACCOUNT. EVADING A BAN MAKES IT PERMANENT.</p><p class="modal_warning">exceptions apply if the ban was not meant for you, or when logging out of an alternate account. for more info, read the <a href="/about/rules/" target="_blank">community rules</a>.',classes:["crash_modal","noclickout"],buttons:[{label:"CANCEL",classes:[],callback:e=>{p(xt("return_form")),e()}},{label:"I'M NOT EVADING!",classes:["pri"],callback:e=>{p(xt("return_form")),e(),t()}}]})):t()})),xt("return_button").addEventListener("click",(function(e){xt("return_form").classList.add("busy"),r(xt("return_form"))})),xt("ban_skip_button").addEventListener("click",(function(e){xt("banned_warning").classList.add("hidden"),h()})),xt("deletion_step1_button").addEventListener("click",(function(e){c(xt("deletion_step1_form")),p(xt("deletion_step2_form"))})),xt("deletion_step1_cancel").addEventListener("click",(function(e){Tn.update(!0)})),xt("deletion_step2_button").addEventListener("click",(function(e){c(xt("deletion_step2_form")),p(xt("deletion_step3_form")),xt("deletion_spanner").classList.remove("hidden")})),xt("deletion_step2_cancel").addEventListener("click",(function(e){Tn.update(!0)}));let i=10,o=!1;function a(){o||(i--,xt("deletion_countdown").innerHTML=Math.max(0,i),-1===i?(xt("deletion_cancel_holder").remove(),xt("deletion_countdown").remove(),xt("deletion_header").innerHTML="DESTRUCTION!",setTimeout((()=>{Cn.post("/api/users/finalizeDeletion",{deletionid:n.substring(2)}).then((e=>{bn.logout(),xt("deletion_header").innerHTML="ACCOUNT DELETED",xt("deletion_final_form").classList.add("shudder"),setTimeout((()=>{xt("deletion_final_form").classList.remove("shudder")}),150),setTimeout((()=>{Tn.update(!0)}),5e3)}),(e=>{xt("deletion_header").innerHTML="an error has occured",sn(e)}))}),500)):setTimeout(a,1e3))}xt("deletion_step3_button").addEventListener("click",(function(e){c(xt("deletion_step3_form")),p(xt("deletion_final_form")),setTimeout(a,1e3)})),xt("deletion_step3_cancel").addEventListener("click",(function(e){Tn.update(!0)})),xt("deletion_final_cancel").addEventListener("click",(function(e){o=!0,Tn.update(!0)}))})),{quickjoin:n,newacc:()=>s}})();function Zs(){for(const e of document.getElementsByClassName("controls_keybinds_style"))e.classList.remove("pressed");xt(`controls_keybinds_style_${ot.controls.style}`).classList.add("pressed");for(const e of document.getElementsByClassName("controls_keybinds_list"))e.classList.add("hidden");xt(`controls_keybinds_list_${ot.controls.style}`).classList.remove("hidden");for(const e of document.getElementsByClassName("keybind_custom")){const t=ot.controls.custom[e.getAttribute("data-key")],n=t&&t.length&&t[parseInt(e.getAttribute("data-id"))]||"[NOT SET]";let s=n;("BUTTON"===n.substring(0,6)||n.substring(0,4))&&(s=mi.getButtonNameForCurrentController(n)),e.textContent=s,e.setAttribute("data-value",n)}for(const e of document.getElementsByClassName("keybind_custom")){const t=e.getAttribute("data-value"),n=e.getAttribute("data-scope");"[NOT SET]"!==t&&vt(`.keybind_custom${"global"!==n?`[data-scope="${n}"]`:""}[data-value="${t.replace(/"/g,"&quot;")}"]`).length>=2||"[NOT SET]"!==t&&"global"!==n&&vt(`.keybind_custom[data-scope="global"][data-value="${t.replace(/"/g,"&quot;")}"]`).length>=1?e.classList.add("keybind_warning"):e.classList.remove("keybind_warning")}for(const e of document.getElementsByClassName("guide_keybind")){const t=rt[e.getAttribute("data-key")].filter((e=>!!e));e.textContent=t&&t.length?t.join(", "):"[NOT SET]"}xt("controls_sensitivity").value=ot.controls.sensitivity||.5,xt("controls_sensitivity_field").textContent=100-Math.round(100*(ot.controls.sensitivity||.5)),xt("controls_vibration").value=ot.controls.vibration||1,xt("controls_vibration_field").textContent=0==ot.controls.vibration?"OFF":Math.round(100*(ot.controls.vibration||1)),xt("handling_arr").value=ot.handling.arr,xt("handling_arr_field").textContent=ot.handling.arr,xt("handling_arr_field_ms").value=`${Math.round(ot.handling.arr*(1e3/60))}MS`,xt("handling_das").value=ot.handling.das,xt("handling_das_field").textContent=ot.handling.das,xt("handling_das_field_ms").value=`${Math.round(ot.handling.das*(1e3/60))}MS`,xt("handling_dcd").value=ot.handling.dcd||0,xt("handling_dcd_field").textContent=ot.handling.dcd||0,xt("handling_dcd_field_ms").value=`${Math.round((ot.handling.dcd||0)*(1e3/60))}MS`,xt("handling_sdf").value=ot.handling.sdf,xt("handling_sdf_field").textContent=41==ot.handling.sdf?"":ot.handling.sdf,xt("handling_safelock").classList.toggle("checked",ot.handling.safelock),xt("handling_cancel").classList.toggle("checked",!!ot.handling.cancel),xt("handling_may20g").classList.toggle("checked",ot.handling.may20g);for(const e of document.getElementsByClassName("handling_irs"))e.classList.remove("pressed");xt(`handling_irs_${ot.handling.irs??"tap"}`).classList.add("pressed");for(const e of document.getElementsByClassName("handling_ihs"))e.classList.remove("pressed");xt(`handling_ihs_${ot.handling.ihs??"tap"}`).classList.add("pressed");const e=Math.min(1,ot.volume.music)+Math.max(0,ot.volume.music/2-.5);xt("volume_music").value=e,xt("volume_music_field").textContent=0==ot.volume.music?"MUTE":Math.round(100*ot.volume.music),xt("volume_overlay_mus_value").style.backgroundImage=`linear-gradient(to top, #FFF 0%, #FFF ${Math.min(200/3,e/1.5*100)}%, #ff0245 ${Math.min(200/3,e/1.5*100)}%, #ff0245 ${e/1.5*100}%, #FFF2 ${e/1.5*100}%, #FFF2 100%)`;const t=Math.min(1,ot.volume.sfx)+Math.max(0,ot.volume.sfx/2-.5);xt("volume_sfx").value=t,xt("volume_sfx_field").textContent=0==ot.volume.sfx?"MUTE":Math.round(100*ot.volume.sfx),xt("volume_overlay_sfx_value").style.backgroundImage=`linear-gradient(to top, #FFF 0%, #FFF ${Math.min(200/3,t/1.5*100)}%, #ff0245 ${Math.min(200/3,t/1.5*100)}%, #ff0245 ${t/1.5*100}%, #FFF2 ${t/1.5*100}%, #FFF2 100%)`,xt("volume_stereo").value=ot.volume.stereo,xt("volume_stereo_field").textContent=0==ot.volume.stereo?"OFF":Math.round(100*ot.volume.stereo),xt("volume_disable").classList.toggle("checked",!!ot.volume.disable),xt("volume_next").classList.toggle("checked",ot.volume.next),xt("volume_others").classList.toggle("checked",ot.volume.others),xt("volume_scrollable").classList.toggle("checked",!1!==ot.volume.scrollable),xt("volume_zenithrank").classList.toggle("checked",!1!==ot.volume.zenithrank),xt("volume_attacks").classList.toggle("checked",!1!==ot.volume.attacks),xt("volume_noreset").classList.toggle("checked",!1!==ot.volume.noreset),xt("volume_oof").classList.toggle("checked",!1!==ot.volume.oof),xt("volume_sfx").onchange=()=>xa.SePlay("clearline");for(const e of document.getElementsByClassName("video_graphics"))e.classList.remove("pressed");xt(`video_graphics_${ot.video.graphics}`).classList.add("pressed");for(const e of document.getElementsByClassName("video_caching"))e.classList.remove("pressed");"high"===ot.video.caching&&(ot.video.caching="medium"),xt(`video_caching_${ot.video.caching||"medium"}`).classList.add("pressed");for(const e of document.getElementsByClassName("video_actiontext"))e.classList.remove("pressed");xt(`video_actiontext_${ot.video.actiontext||"all"}`).classList.add("pressed");for(const e of document.getElementsByClassName("video_webgl"))e.classList.remove("pressed");xt(`video_webgl_${ot.video.webgl||"webgl2"}`).classList.add("pressed"),xt("video_particles").value=ot.video.particles||.6,xt("video_particles_field").textContent=Math.round(100*(ot.video.particles||.6)),xt("video_background").value=ot.video.background,xt("video_background_field").textContent=Math.round(100*ot.video.background),xt("video_bounciness").value=ot.video.bounciness,xt("video_bounciness_field").textContent=Math.round(100*ot.video.bounciness),xt("video_shakiness").value=ot.video.shakiness,xt("video_shakiness_field").textContent=Math.round(100*ot.video.shakiness),xt("video_gridopacity").value=void 0===ot.video.gridopacity?.1:ot.video.gridopacity,xt("video_gridopacity_field").textContent=Math.round(100*(void 0===ot.video.gridopacity?.1:ot.video.gridopacity)),xt("video_boardopacity").value=void 0===ot.video.boardopacity?.85:ot.video.boardopacity,xt("video_boardopacity_field").textContent=Math.round(100*(void 0===ot.video.boardopacity?.85:ot.video.boardopacity)),xt("video_shadowopacity").value=void 0===ot.video.shadowopacity?.15:ot.video.shadowopacity,xt("video_shadowopacity_field").textContent=Math.round(100*(void 0===ot.video.shadowopacity?.15:ot.video.shadowopacity)),xt("video_zoom").value=void 0===ot.video.zoom?1:ot.video.zoom,xt("video_zoom_field").textContent=Math.round(100*(void 0===ot.video.zoom?1:ot.video.zoom)),xt("video_bloom").value=void 0===ot.video.bloom?1:ot.video.bloom,xt("video_bloom_field").textContent=0==ot.video.bloom?"OFF":Math.round(100*(void 0===ot.video.bloom?1:ot.video.bloom)),xt("video_chroma").value=void 0===ot.video.chroma?.5:ot.video.chroma,xt("video_chroma_field").textContent=0==ot.video.chroma?"OFF":Math.round(100*(void 0===ot.video.chroma?.5:ot.video.chroma)),xt("video_flashwave").value=void 0===ot.video.flashwave?1:ot.video.flashwave,xt("video_flashwave_field").textContent=0==ot.video.flashwave?"OFF":Math.round(100*(void 0===ot.video.flashwave?1:ot.video.flashwave)),xt("video_powersave").classList.toggle("checked",!!ot.video.powersave),xt("video_alwaystiny").classList.toggle("checked",!!ot.video.alwaystiny),xt("video_nosuperlobbyanim").classList.toggle("checked",!!ot.video.nosuperlobbyanim),xt("video_nozenithanim").classList.toggle("checked",!!ot.video.nozenithanim),xt("video_colorshadow").classList.toggle("checked",!!ot.video.colorshadow),xt("video_holdlocked").classList.toggle("checked",!1!==ot.video.holdlocked),xt("video_sidebyside").classList.toggle("checked",!!ot.video.sidebyside),xt("video_spin").classList.toggle("checked",!!ot.video.spin),xt("video_chatfilter").classList.toggle("checked",!1!==ot.video.chatfilter),xt("video_nochat").classList.toggle("checked",!!ot.video.nochat),xt("video_hideroomids").classList.toggle("checked",!!ot.video.hideroomids),xt("video_emotes").classList.toggle("checked",!1!==ot.video.emotes),xt("video_emotes_anim").classList.toggle("checked",!1!==ot.video.emotes_anim),xt("video_invert").classList.toggle("checked",!!ot.video.invert),xt("video_nobg").classList.toggle("checked",!!ot.video.nobg),xt("video_chatbg").classList.toggle("checked",!!ot.video.chatbg),xt("video_replaytoolsnocollapse").classList.toggle("checked",!!ot.video.replaytoolsnocollapse),xt("video_kos").classList.toggle("checked",!1!==ot.video.kos),xt("video_fire").classList.toggle("checked",!1!==ot.video.fire),xt("video_focuswarning").classList.toggle("checked",!1!==ot.video.focuswarning),xt("video_hidenetwork").classList.toggle("checked",!!ot.video.hidenetwork),xt("video_guide").classList.toggle("checked",!1!==ot.video.guide),xt("video_desktopnotifications").classList.toggle("checked",!1!==ot.video.desktopnotifications),xt("video_siren").classList.toggle("checked",!1!==ot.video.siren),xt("video_lowrescounters").classList.toggle("checked",!!ot.video.lowrescounters),xt("video_lowres").classList.toggle("checked",!!ot.video.lowres),xt("config_background_usecustom").classList.toggle("checked",ot.video.background_usecustom===at),xt("config_background_url").value=ot.video.background_url||"",xt("diyusi_strategy_1").querySelector("h1").textContent=(rt.target1[0]||"*").toLowerCase(),xt("diyusi_strategy_2").querySelector("h1").textContent=(rt.target2[0]||"*").toLowerCase(),xt("diyusi_strategy_3").querySelector("h1").textContent=(rt.target3[0]||"*").toLowerCase(),xt("diyusi_strategy_4").querySelector("h1").textContent=(rt.target4[0]||"*").toLowerCase(),xt("pro_40l").classList.toggle("checked",!!ot.gameoptions.pro_40l),xt("pro_40l_alert").classList.toggle("checked",!!ot.gameoptions.pro_40l_alert),xt("pro_40l_retry").classList.toggle("checked",!!ot.gameoptions.pro_40l_retry),xt("stride_40l").classList.toggle("checked",!!ot.gameoptions.stride_40l),xt("slot_40l_counter1").textContent=ot.gameoptions.slot_40l_counter1||"---default---",xt("slot_40l_counter2").textContent=ot.gameoptions.slot_40l_counter2||"---default---",xt("slot_40l_counter3").textContent=ot.gameoptions.slot_40l_counter3||"---default---",xt("slot_40l_counter4").textContent=ot.gameoptions.slot_40l_counter4||"---default---",xt("slot_40l_counter5").textContent=ot.gameoptions.slot_40l_counter5||"---default---",xt("pro_blitz").classList.toggle("checked",!!ot.gameoptions.pro_blitz),xt("pro_blitz_alert").classList.toggle("checked",!!ot.gameoptions.pro_blitz_alert),xt("pro_blitz_retry").classList.toggle("checked",!!ot.gameoptions.pro_blitz_retry),xt("stride_blitz").classList.toggle("checked",!!ot.gameoptions.stride_blitz),xt("slot_blitz_counter1").textContent=ot.gameoptions.slot_blitz_counter1||"---default---",xt("slot_blitz_counter2").textContent=ot.gameoptions.slot_blitz_counter2||"---default---",xt("slot_blitz_counter3").textContent=ot.gameoptions.slot_blitz_counter3||"---default---",xt("slot_blitz_counter4").textContent=ot.gameoptions.slot_blitz_counter4||"---default---",xt("slot_blitz_counter5").textContent=ot.gameoptions.slot_blitz_counter5||"---default---";for(const e of document.getElementsByClassName("electron_loginskip"))e.classList.remove("pressed");xt(`electron_loginskip_${ot.electron.loginskip||"always"}`).classList.add("pressed");for(const e of document.getElementsByClassName("electron_frameratelimit"))e.classList.remove("pressed");xt(`electron_frameratelimit_${ot.electron.frameratelimit||"4x"}`).classList.add("pressed"),xt("config_electron_presence").classList.toggle("checked",!1!==ot.electron.presence),xt("config_electron_presence").classList.toggle("hidden",!0===_.norichpresence),xt("config_electron_taskbarflash").classList.toggle("checked",!1!==ot.electron.taskbarflash),xt("config_electron_anglecompat").classList.toggle("checked",!!ot.electron.anglecompat),xt("config_electron_adblock").classList.toggle("checked",!!ot.electron.adblock),xt("config_electron_autoupdate").classList.toggle("checked",!1!==ot.electron.autoupdate),xt("config_electron_devtools").classList.toggle("checked",!!ot.electron.devtools),ma.random.forEach((e=>{vt(`.bgmtweak_option[data-id="${e}"]`).forEach((t=>{t.classList.toggle("pressed",t.getAttribute("data-option")===((ot.volume.bgmtweak||{})[e]||"base"))}))})),xt("notifications_suppress").classList.toggle("checked",!1!==ot.notifications.suppress),xt("notifications_forcesound").classList.toggle("checked",!!ot.notifications.forcesound);for(const e of document.getElementsByClassName("notifications_online"))e.classList.remove("pressed");xt(`notifications_online_${ot.notifications.online}`).classList.add("pressed");for(const e of document.getElementsByClassName("notifications_offline"))e.classList.remove("pressed");xt(`notifications_offline_${ot.notifications.offline}`).classList.add("pressed");for(const e of document.getElementsByClassName("notifications_dm"))e.classList.remove("pressed");xt(`notifications_dm_${ot.notifications.dm}`).classList.add("pressed");for(const e of document.getElementsByClassName("notifications_dm_pending"))e.classList.remove("pressed");xt(`notifications_dm_pending_${ot.notifications.dm_pending}`).classList.add("pressed");for(const e of document.getElementsByClassName("notifications_invite"))e.classList.remove("pressed");xt(`notifications_invite_${ot.notifications.invite}`).classList.add("pressed");for(const e of document.getElementsByClassName("notifications_other"))e.classList.remove("pressed");xt(`notifications_other_${ot.notifications.other}`).classList.add("pressed")}Gt((async()=>{if(_.sentry_enabled&&!document.body.classList.contains("sigliatrip_idiot"))try{console.log("Loading Darkside error reporting...");const e=await Cn.get("https://darkside.moon.kagari.moe/js-sdk-loader/3bccf53f7c765dcc86a8cfc6b37a3808.min.js",void 0,{parse:!1}),t=document.createElement("script");t.type="text/javascript",t.text=e,document.head.insertAdjacentElement("beforeend",t),Sentry.onLoad((function(){Sentry.init({release:`tetrio@${_.version}+${_.client.build.id}`,tracesSampleRate:.01,profilesSampleRate:1,replaysSessionSampleRate:0,replaysOnErrorSampleRate:.1,tracePropagationTargets:[/^\/api/],transport:function(e){const t=Sentry.makeFetchTransport(e);return{send:(e,...n)=>{if(e&&e[1])for(const t of e[1])if(t&&!(t.length<2)&&t[0]&&"profile"===t[0].type){if(!t[1]||!t[1].profile||!t[1].profile.frames)continue;for(const e of t[1].profile.frames)(e.abs_path&&e.abs_path.includes("blob")||e.function&&e.function.includes("blob"))&&(e.abs_path="app:///tetrio.js",e.function&&(e.function=e.function.replace(/@?blob:?/,"")))}return t.send(e,...n)},flush:t.flush}},integrations:[Sentry.replayIntegration({maskAllText:!1,blockAllMedia:!1,mask:['input[type="password"]'],block:[".ceriad"],maxReplayDuration:12e4}),Sentry.browserTracingIntegration({beforeStartSpan:e=>({...e,name:location.pathname.replace(/\/api\/achievements\/\d+/,"/api/achievements/:k").replace(/\/api\/dms\/.+/,"/api/dms/:userid").replace(/\/api\/games\/[^/]+/,"/api/games/:replayid").replace(/\/api\/users\/[^/]+\/exists/,"/api/users/:username/exists").replace(/\/api\/users\/[^/]+\/resolve/,"/api/users/:username/resolve").replace(/\/api\/users\/[0-9a-f]{24}$/,"/api/users/:userid")})})],beforeSend:e=>{let t=!1;if(!e?.exception?.values)return e;for(const n of e.exception.values)if(n?.stacktrace?.frames)for(const e of n.stacktrace.frames)(e.filename&&e.filename.includes("blob")||e.function&&e.function.includes("blob"))&&(e.filename="app:///tetrio.js",e.function&&(e.function=e.function.replace(/@?blob:?/,"")),t=!0);return t?e:null}}),console.log("Darkside provider loaded.");const e=setInterval((()=>{document.body.classList.contains("ingame")&&(clearInterval(e),Sentry.lazyLoadIntegration("browserProfilingIntegration").then((e=>{Sentry.addIntegration(e())})))}),3e3)}))}catch(e){console.warn("Darkside provider could not be loaded.",e)}}));const Js=[];async function ei(e=!1){if(!Ml)return;Js.length||(Js.push(...ut),rr.shuffleArray(Js));const t=Js.pop(),n=await ti(t);n&&Ml.setBackground(n,e)}async function ti(e){try{return await o.Texture.fromURL(e)}catch(t){return console.error(`Failed to load background '${e}'`),!1}}async function ni(e,t=!1){try{const n=await o.Texture.fromURL(e);Ml.setBackground(n,t)}catch(t){console.error(`Failed to set and load background '${e}'`)}}let si=()=>{};function ii(e){xt("keybind_request").classList.remove("hidden"),si=e,document.addEventListener("keydown",oi,!1),document.addEventListener("gpdown",oi,!1),setTimeout((()=>{document.addEventListener("click",ai,!1)}),0)}function oi(e){document.removeEventListener("keydown",oi,!1),document.removeEventListener("gpdown",oi,!1),document.removeEventListener("click",ai,!1),xt("keybind_request").classList.add("hidden"),si(yt(e)),e.preventDefault()}function ai(e){document.removeEventListener("keydown",oi,!1),document.removeEventListener("gpdown",oi,!1),document.removeEventListener("click",ai,!1),xt("keybind_request").classList.add("hidden"),si("X-NOKEY"),e.preventDefault()}const ri=(e,t)=>{xt(e).addEventListener("click",(function(e){!1!==t(e)&&(mt(),Ct())}))},li=(e,t)=>{xt(e).addEventListener("input",(function(e){!1!==t(e)&&(mt(),Ct())}))};function ci(e,t){function n(t){let n=!0;e>0&&ot.volume[t]>=1&&ot.volume[t]<1.05&&((null===__volOverlayAllowLoudAfter||performance.now()>=__volOverlayAllowLoudAfter+5e3)&&(__volOverlayAllowLoudAfter=performance.now()+500),performance.now()<__volOverlayAllowLoudAfter&&(n=!1)),ot.volume[t]=Math.max(0,Math.min(n?2:1,parseFloat(ot.volume[t])+.05*e))}"bgm"!==t&&null!=t||n("music"),"se"!==t&&null!=t||(n("sfx"),xa.SePlay("se_vol_blip")),xt("volume_overlay").classList.remove("hidden"),xt("volume_overlay").classList.remove("hiding"),setTimeout((()=>{xt("volume_overlay").classList.add("hiding")}),100),__volOverlayTimeout&&clearTimeout(__volOverlayTimeout),__volOverlayTimeout=setTimeout((()=>{xt("volume_overlay").classList.add("hidden")}),5100),mt(),Ct()}Tn.ready((function(e){let t="";ma.random.forEach((e=>{t+=`<div class="control_group flex-row bgmtweaking">\n\t\t\t\t\t<h1 class="bgmtweak_header rg_target_pri" data-id="${e}" data-hover="tap" data-hit="click">${_a[e].artist} - ${_a[e].name} (${_a[e].genre})</h1>\n\t\t\t\t\t<div class="control_button flex-item bgmtweak_option rg_target_pri" data-id="${e}" data-option="ban" data-hover="tap" data-hit="click" title="Never play this song.">BAN</div>\n\t\t\t\t\t<div class="control_button flex-item bgmtweak_option rg_target_pri" data-id="${e}" data-option="minmin" data-hover="tap" data-hit="click" title="Play this song far less often.">--</div>\n\t\t\t\t\t<div class="control_button flex-item bgmtweak_option rg_target_pri" data-id="${e}" data-option="min" data-hover="tap" data-hit="click" title="Play this song less often.">-</div>\n\t\t\t\t\t<div class="control_button flex-item bgmtweak_option rg_target_pri" data-id="${e}" data-option="base" data-hover="tap" data-hit="click" title="Play this song a normal amount.">=</div>\n\t\t\t\t\t<div class="control_button flex-item bgmtweak_option rg_target_pri" data-id="${e}" data-option="plus" data-hover="tap" data-hit="click" title="Play this song more often.">+</div>\n\t\t\t\t\t<div class="control_button flex-item bgmtweak_option rg_target_pri" data-id="${e}" data-option="plusplus" data-hover="tap" data-hit="click" title="Play this song far more often.">++</div>\n\t\t\t\t</div>`})),xt("bgmtweak").innerHTML=t,gt(),Ct(),"legacy"===ot.video.webgl&&Qt({msg:"using LEGACY WEBGL - this may slow down your game. if your device supports it, switch to WEBGL 2 in CONFIG!",color:"#FFC600",icon:"warning",timeout:1e4}),setTimeout((()=>{ei(),xl.play("bgtransition")}),300),setTimeout((()=>{Jl()}),2e3),ri("finish_guide_room",(()=>{ot.video.guide=!1,xt("room_opts_room").click()})),ri("finish_guide_sys",(()=>(xt("sys_guide").classList.add("hiding"),xt("room_opts_room").click(),setTimeout((()=>{ot.video.guide=!1,mt(),Ct()}),1e3),!1))),ri("controls_keybinds_style_guideline",(()=>{ot.controls.style="guideline"})),ri("controls_keybinds_style_wasd",(()=>{ot.controls.style="wasd"})),ri("controls_keybinds_style_custom",(()=>{ot.controls.style="custom"}));for(const e of document.getElementsByClassName("keybind_custom"))e.addEventListener("click",(function(t){ii((t=>{ot.controls.custom[e.getAttribute("data-key")][parseInt(e.getAttribute("data-id"))]="X-NOKEY"===t?"":t,mt(),Ct()}))}));li("controls_sensitivity",(()=>{ot.controls.sensitivity=xt("controls_sensitivity").value})),li("controls_vibration",(()=>{ot.controls.vibration=xt("controls_vibration").value}));const n=()=>{Ja&&Ja.isConnected()&&Ja.updateHandling()};li("handling_arr",(()=>{ot.handling.arr=parseFloat(xt("handling_arr").value),n()})),li("handling_das",(()=>{ot.handling.das=parseFloat(xt("handling_das").value),n()})),li("handling_dcd",(()=>{ot.handling.dcd=parseFloat(xt("handling_dcd").value),n()})),li("handling_sdf",(()=>{ot.handling.sdf=parseFloat(xt("handling_sdf").value),n()})),ri("handling_safelock",(()=>{ot.handling.safelock=!xt("handling_safelock").classList.contains("checked"),n()})),ri("handling_cancel",(()=>{ot.handling.cancel=!xt("handling_cancel").classList.contains("checked"),n()})),ri("handling_may20g",(()=>{ot.handling.may20g=!xt("handling_may20g").classList.contains("checked"),n()})),ri("handling_irs_off",(()=>{ot.handling.irs="off",n()})),ri("handling_irs_hold",(()=>{ot.handling.irs="hold",n()})),ri("handling_irs_tap",(()=>{ot.handling.irs="tap",n()})),ri("handling_ihs_off",(()=>{ot.handling.ihs="off",n()})),ri("handling_ihs_hold",(()=>{ot.handling.ihs="hold",n()})),ri("handling_ihs_tap",(()=>{ot.handling.ihs="tap",n()}));for(const e of document.getElementsByClassName("stat_field"))e.addEventListener("click",(function(t){const n=e.closest(".stat");Si(n.querySelector(".stat_name").textContent,"enter a new value",n.querySelector(".stat_range").getAttribute("min"),n.querySelector(".stat_range").getAttribute("max"),n.querySelector(".stat_range").getAttribute("step")||"1",n.querySelector(".stat_range").value,(e=>{n.querySelector(".stat_range").value=e,n.querySelector(".stat_range").dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),mt(),Ct()}))}));function s(){qi("one moment"),localStorage.setItem("thirdPartyAdsDisabledAt",Date.now()),Cn.get("/api/tetra/specialthanks").then((e=>{Ki();let t="";e.supporters.forEach((e=>{t+=`<a class="adblock_st ${e.username?`tetra_pop" data-hover="tap" data-hit="click" data-username="${e.username}"`:'noclick"'}>${e.flip?e.username.toUpperCase():e.name}</a>, `})),_n({title:"3RD PARTY ADS DISABLED",msg:`this toggle made possible by these generous supporters:</p><p>${t.slice(0,-2)}</p><p>please, consider supporting TETR.IO development!`,classes:["supporter_modal"],buttons:[{label:"NO",classes:[],callback:e=>{Nt(["trackEvent","Advertising","Block","Config toggle (no conversion)"]),e()}},{label:"SUPPORT!",classes:["pri"],callback:e=>{Nt(["trackEvent","Advertising","Block","Config toggle (converted)"]),e(),Ii()}}]})}),(e=>{Nt(["trackEvent","Advertising","Block","Config toggle (could not load dialog)"]),Ki()}))}ri("handling_reset",(()=>{ot.handling.arr=2,ot.handling.das=10,ot.handling.dcd=1,ot.handling.sdf=6,n()})),xt("handling_test").addEventListener("click",(function(e){Ys.testControls()})),li("volume_music",(()=>{let e=Number.parseFloat(xt("volume_music").value);e>=.99&&e<=1.01&&(e=1),ot.volume.music=Math.min(1,e)+Math.max(0,2*(e-1))})),li("volume_sfx",(()=>{let e=Number.parseFloat(xt("volume_sfx").value);e>=.99&&e<=1.01&&(e=1),ot.volume.sfx=Math.min(1,e)+Math.max(0,2*(e-1))})),li("volume_stereo",(()=>{ot.volume.stereo=Number.parseFloat(xt("volume_stereo").value)})),ri("volume_next",(()=>{ot.volume.next=!xt("volume_next").classList.contains("checked")})),ri("volume_others",(()=>{ot.volume.others=!xt("volume_others").classList.contains("checked")})),ri("volume_scrollable",(()=>{ot.volume.scrollable=!xt("volume_scrollable").classList.contains("checked")})),ri("volume_zenithrank",(()=>{ot.volume.zenithrank=!xt("volume_zenithrank").classList.contains("checked")})),ri("volume_attacks",(()=>{ot.volume.attacks=!xt("volume_attacks").classList.contains("checked")})),ri("volume_noreset",(()=>{ot.volume.noreset=!xt("volume_noreset").classList.contains("checked")})),ri("volume_oof",(()=>{ot.volume.oof=!xt("volume_oof").classList.contains("checked")})),ri("volume_disable",(()=>{ot.volume.disable=!xt("volume_disable").classList.contains("checked")})),window.addEventListener("wheel",(function(e){if(!1===ot.volume.scrollable)return;if(!document.body.classList.contains("ingame")&&!e.altKey)return;if(e.target.closest("#ingame_chat_container")&&!e.altKey)return;if(e.target.closest("#zen_panel_content")&&!e.altKey)return;const t=Math.sign(-e.deltaY);e.target.closest("#volume_overlay_sfx")?ci(t,"se"):e.target.closest("#volume_overlay_mus")?ci(t,"bgm"):ci(t),e.altKey&&e.preventDefault()}),{passive:!1}),ri("video_graphics_minimal",(()=>{ot.video.graphics="minimal",ot.video.lowres=!0,ot.video.sidebyside=!1,El.unset(),Qt({msg:"changing GRAPHICS LEVEL requires a restart to fully go in effect. hit F5 on your keyboard to restart.",color:"#FFC600",icon:"warning"}),xt("dirtyflag_gfx").innerHTML=`DIRTY (${ot.video.graphics})`})),ri("video_graphics_low",(()=>{"minimal"===ot.video.graphics&&(ot.video.lowres=!1,ot.video.sidebyside=!0),ot.video.graphics="low",El.unset(),Qt({msg:"changing GRAPHICS LEVEL requires a restart to fully go in effect. hit F5 on your keyboard to restart.",color:"#FFC600",icon:"warning"}),xt("dirtyflag_gfx").innerHTML=`DIRTY (${ot.video.graphics})`})),ri("video_graphics_medium",(()=>{"minimal"===ot.video.graphics&&(ot.video.lowres=!1,ot.video.sidebyside=!0),ot.video.graphics="medium",El.unset(),Qt({msg:"changing GRAPHICS LEVEL requires a restart to fully go in effect. hit F5 on your keyboard to restart.",color:"#FFC600",icon:"warning"}),xt("dirtyflag_gfx").innerHTML=`DIRTY (${ot.video.graphics})`})),ri("video_graphics_high",(()=>{"minimal"===ot.video.graphics&&(ot.video.lowres=!1,ot.video.sidebyside=!0),ot.video.graphics="high",El.set(),Qt({msg:"changing GRAPHICS LEVEL requires a restart to fully go in effect. hit F5 on your keyboard to restart.",color:"#FFC600",icon:"warning"}),xt("dirtyflag_gfx").innerHTML=`DIRTY (${ot.video.graphics})`})),ri("video_graphics_ultra",(()=>{"minimal"===ot.video.graphics&&(ot.video.lowres=!1,ot.video.sidebyside=!0),ot.video.graphics="ultra",El.set(),Qt({msg:"changing GRAPHICS LEVEL requires a restart to fully go in effect. hit F5 on your keyboard to restart.",color:"#FFC600",icon:"warning"}),window.IS_ELECTRON||Qt({msg:"you are not using TETR.IO DESKTOP - ULTRA graphics may be less performant.",color:"#FFC600",icon:"warning"}),xt("dirtyflag_gfx").innerHTML=`DIRTY (${ot.video.graphics})`})),ri("video_caching_low",(()=>{ot.video.caching="low",Qt({msg:"changing CACHING LEVEL requires a restart to fully go in effect. hit F5 on your keyboard to restart.",color:"#FFC600",icon:"warning"}),xt("dirtyflag_gfx").innerHTML=`DIRTY (${ot.video.graphics})`})),ri("video_caching_medium",(()=>{ot.video.caching="medium",Qt({msg:"changing CACHING LEVEL requires a restart to fully go in effect. hit F5 on your keyboard to restart.",color:"#FFC600",icon:"warning"}),xt("dirtyflag_gfx").innerHTML=`DIRTY (${ot.video.graphics})`})),ri("video_webgl_legacy",(()=>(_n({title:"USE LEGACY WEBGL?",msg:'LEGACY WEBGL is the slowest WEBGL mode and may introduce bugs. only use it if the other modes do not work for you (for example, you see graphical glitches or flickering while playing)!</p><p class="modal_also">when reporting a bug, please mention LEGACY WEBGL is enabled.',buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"USE LEGACY WEBGL",classes:["sec"],callback:e=>{ot.video.webgl="legacy",mt(),Ct(),Qt({msg:"changing WEBGL MODE requires a restart to fully go in effect. hit F5 on your keyboard to restart.",color:"#FFC600",icon:"warning"}),xt("dirtyflag_gl").innerHTML=`DIRTY (${ot.video.webgl})`,e()}}]}),!1))),ri("video_webgl_webgl1",(()=>{ot.video.webgl="webgl1",Qt({msg:"changing WEBGL MODE requires a restart to fully go in effect. hit F5 on your keyboard to restart.",color:"#FFC600",icon:"warning"}),xt("dirtyflag_gl").innerHTML=`DIRTY (${ot.video.webgl})`})),ri("video_webgl_webgl2",(()=>{ot.video.webgl="webgl2",Qt({msg:"changing WEBGL MODE requires a restart to fully go in effect. hit F5 on your keyboard to restart.",color:"#FFC600",icon:"warning"}),xt("dirtyflag_gl").innerHTML=`DIRTY (${ot.video.webgl})`})),ri("video_actiontext_off",(()=>{ot.video.actiontext="off"})),ri("video_actiontext_some",(()=>{ot.video.actiontext="some"})),ri("video_actiontext_all",(()=>{ot.video.actiontext="all"})),li("video_particles",(()=>{ot.video.particles=xt("video_particles").value})),li("video_background",(()=>{ot.video.background=xt("video_background").value})),li("video_bounciness",(()=>{ot.video.bounciness=xt("video_bounciness").value})),li("video_shakiness",(()=>{ot.video.shakiness=xt("video_shakiness").value})),li("video_gridopacity",(()=>{ot.video.gridopacity=xt("video_gridopacity").value})),li("video_boardopacity",(()=>{ot.video.boardopacity=xt("video_boardopacity").value})),li("video_shadowopacity",(()=>{ot.video.shadowopacity=xt("video_shadowopacity").value})),li("video_zoom",(()=>{ot.video.zoom=xt("video_zoom").value,xs(!0)})),li("video_bloom",(()=>{ot.video.bloom=xt("video_bloom").value})),li("video_chroma",(()=>{ot.video.chroma=xt("video_chroma").value})),li("video_flashwave",(()=>{ot.video.flashwave=xt("video_flashwave").value})),ri("video_powersave",(()=>{ot.video.powersave=!xt("video_powersave").classList.contains("checked"),Qt({msg:"changing POWER SAVE requires a restart to go in effect. hit F5 on your keyboard to restart.",color:"#FFC600",icon:"warning"}),xt("dirtyflag_gfx").innerHTML=`DIRTY (${ot.video.graphics})`})),ri("video_lowres",(()=>{ot.video.lowres=!xt("video_lowres").classList.contains("checked"),Qt({msg:"changing LOW RESOLUTION MODE requires a restart to go in effect. hit F5 on your keyboard to restart.",color:"#FFC600",icon:"warning"}),xt("dirtyflag_gfx").innerHTML=`DIRTY (${ot.video.graphics})`})),ri("video_guide",(()=>{ot.video.guide=!xt("video_guide").classList.contains("checked"),ot.video.guide?xt("room_opts_welcome").click():xt("room_opts_room").click()})),ri("video_desktopnotifications",(()=>{ot.video.desktopnotifications=!xt("video_desktopnotifications").classList.contains("checked"),ot.video.desktopnotifications&&Po(!0)})),ri("video_lowrescounters",(()=>{ot.video.lowrescounters=!xt("video_lowrescounters").classList.contains("checked")})),ri("video_alwaystiny",(()=>{ot.video.alwaystiny=!xt("video_alwaystiny").classList.contains("checked")})),ri("video_nosuperlobbyanim",(()=>{ot.video.nosuperlobbyanim=!xt("video_nosuperlobbyanim").classList.contains("checked")})),ri("video_nozenithanim",(()=>{ot.video.nozenithanim=!xt("video_nozenithanim").classList.contains("checked")})),ri("video_colorshadow",(()=>{ot.video.colorshadow=!xt("video_colorshadow").classList.contains("checked")})),ri("video_holdlocked",(()=>{ot.video.holdlocked=!xt("video_holdlocked").classList.contains("checked")})),ri("video_sidebyside",(()=>{ot.video.sidebyside=!xt("video_sidebyside").classList.contains("checked")})),ri("video_spin",(()=>{ot.video.spin=!xt("video_spin").classList.contains("checked")})),ri("video_chatfilter",(()=>{ot.video.chatfilter=!xt("video_chatfilter").classList.contains("checked")})),ri("video_nochat",(()=>{ot.video.nochat=!xt("video_nochat").classList.contains("checked")})),ri("video_hideroomids",(()=>{ot.video.hideroomids=!xt("video_hideroomids").classList.contains("checked")})),ri("video_emotes",(()=>{ot.video.emotes=!xt("video_emotes").classList.contains("checked")})),ri("video_emotes_anim",(()=>{ot.video.emotes_anim=!xt("video_emotes_anim").classList.contains("checked")})),ri("video_invert",(()=>{ot.video.invert=!xt("video_invert").classList.contains("checked")})),ri("video_nobg",(()=>{ot.video.nobg=!xt("video_nobg").classList.contains("checked")})),ri("video_chatbg",(()=>{ot.video.chatbg=!xt("video_chatbg").classList.contains("checked")})),ri("video_replaytoolsnocollapse",(()=>{ot.video.replaytoolsnocollapse=!xt("video_replaytoolsnocollapse").classList.contains("checked")})),ri("video_kos",(()=>{ot.video.kos=!xt("video_kos").classList.contains("checked")})),ri("video_fire",(()=>{ot.video.fire=!xt("video_fire").classList.contains("checked")})),ri("video_focuswarning",(()=>{ot.video.focuswarning=!xt("video_focuswarning").classList.contains("checked")})),ri("video_hidenetwork",(()=>{ot.video.hidenetwork=!xt("video_hidenetwork").classList.contains("checked")})),ri("video_siren",(()=>{ot.video.siren=!xt("video_siren").classList.contains("checked")})),xt("config_background_url").addEventListener("keydown",(function(e){"Enter"===e.key&&(ot.video.background_url=xt("config_background_url").value,_t=!0,mt(),Ct())})),ri("config_background_usecustom",(()=>{ot.video.background_usecustom=xt("config_background_usecustom").classList.contains("checked")?null:at,_t=!0})),ri("pro_40l",(()=>{ot.gameoptions.pro_40l=!xt("pro_40l").classList.contains("checked")})),ri("pro_40l_alert",(()=>{ot.gameoptions.pro_40l_alert=!xt("pro_40l_alert").classList.contains("checked")})),ri("pro_40l_retry",(()=>{ot.gameoptions.pro_40l_retry=!xt("pro_40l_retry").classList.contains("checked")})),ri("stride_40l",(()=>{ot.gameoptions.stride_40l=!xt("stride_40l").classList.contains("checked")})),li("slot_40l_counter1",(()=>{ot.gameoptions.slot_40l_counter1="---default---"===xt("slot_40l_counter1").innerHTML?void 0:xt("slot_40l_counter1").innerHTML})),li("slot_40l_counter2",(()=>{ot.gameoptions.slot_40l_counter2="---default---"===xt("slot_40l_counter2").innerHTML?void 0:xt("slot_40l_counter2").innerHTML})),li("slot_40l_counter3",(()=>{ot.gameoptions.slot_40l_counter3="---default---"===xt("slot_40l_counter3").innerHTML?void 0:xt("slot_40l_counter3").innerHTML})),li("slot_40l_counter4",(()=>{ot.gameoptions.slot_40l_counter4="---default---"===xt("slot_40l_counter4").innerHTML?void 0:xt("slot_40l_counter4").innerHTML})),li("slot_40l_counter5",(()=>{ot.gameoptions.slot_40l_counter5="---default---"===xt("slot_40l_counter5").innerHTML?void 0:xt("slot_40l_counter5").innerHTML})),ri("pro_blitz",(()=>{ot.gameoptions.pro_blitz=!xt("pro_blitz").classList.contains("checked")})),ri("pro_blitz_alert",(()=>{ot.gameoptions.pro_blitz_alert=!xt("pro_blitz_alert").classList.contains("checked")})),ri("pro_blitz_retry",(()=>{ot.gameoptions.pro_blitz_retry=!xt("pro_blitz_retry").classList.contains("checked")})),ri("stride_blitz",(()=>{ot.gameoptions.stride_blitz=!xt("stride_blitz").classList.contains("checked")})),li("slot_blitz_counter1",(()=>{ot.gameoptions.slot_blitz_counter1="---default---"===xt("slot_blitz_counter1").innerHTML?void 0:xt("slot_blitz_counter1").innerHTML})),li("slot_blitz_counter2",(()=>{ot.gameoptions.slot_blitz_counter2="---default---"===xt("slot_blitz_counter2").innerHTML?void 0:xt("slot_blitz_counter2").innerHTML})),li("slot_blitz_counter3",(()=>{ot.gameoptions.slot_blitz_counter3="---default---"===xt("slot_blitz_counter3").innerHTML?void 0:xt("slot_blitz_counter3").innerHTML})),li("slot_blitz_counter4",(()=>{ot.gameoptions.slot_blitz_counter4="---default---"===xt("slot_blitz_counter4").innerHTML?void 0:xt("slot_blitz_counter4").innerHTML})),li("slot_blitz_counter5",(()=>{ot.gameoptions.slot_blitz_counter5="---default---"===xt("slot_blitz_counter5").innerHTML?void 0:xt("slot_blitz_counter5").innerHTML})),ri("electron_loginskip_never",(()=>{ot.electron.loginskip="never"})),ri("electron_loginskip_quickjoin",(()=>{ot.electron.loginskip="quickjoin"})),ri("electron_loginskip_always",(()=>{ot.electron.loginskip="always"})),ri("electron_frameratelimit_1x",(()=>{ot.electron.frameratelimit="1x"})),ri("electron_frameratelimit_2x",(()=>{ot.electron.frameratelimit="2x"})),ri("electron_frameratelimit_4x",(()=>{ot.electron.frameratelimit="4x"})),ri("electron_frameratelimit_off",(()=>{ot.electron.frameratelimit="off"})),ri("config_electron_presence",(()=>{ot.electron.presence=!xt("config_electron_presence").classList.contains("checked")})),ri("config_electron_taskbarflash",(()=>{ot.electron.taskbarflash=!xt("config_electron_taskbarflash").classList.contains("checked")})),ri("config_electron_autoupdate",(()=>{window.IPC.send("noautoupdate",xt("config_electron_autoupdate").classList.contains("checked")),ot.electron.autoupdate=!xt("config_electron_autoupdate").classList.contains("checked")})),ri("config_electron_anglecompat",(()=>{ot.electron.anglecompat=!xt("config_electron_anglecompat").classList.contains("checked"),Qt({msg:"changing STREAMER COMPATIBILITY MODE requires a full restart to go in effect. close TETR.IO, then reopen it.",color:"#FFC600",icon:"warning"}),xt("dirtyflag_client").innerHTML="DIRTY"})),ri("config_electron_vsync",(()=>{window.IPC.send("vsync",!xt("config_electron_vsync").classList.contains("checked")),Qt({msg:"changing VSYNC MODE requires a full restart to go in effect. close TETR.IO, then reopen it.",color:"#FFC600",icon:"warning"}),xt("dirtyflag_client").innerHTML="DIRTY",xt("config_electron_vsync").classList.toggle("checked"),xt("config_electron_frameratelimit").classList.toggle("hidden"),xt("config_electron_vsync_warning").classList.toggle("hidden")})),ri("config_electron_adblock",(()=>{if(ot.electron.adblock=!xt("config_electron_adblock").classList.contains("checked"),!ot.electron.adblock)return;Vs.disable();const e=localStorage.getItem("thirdPartyAdsDisabledAt")??0;if(Date.now()-parseInt(e)>6048e5){_n({title:"WHY ARE YOU DISABLING ADS?",msg:'we try our best to balance the costs of running TETR.IO with player experience, so we want to know what made you decide to disable ads and play TETR.IO at our cost alone.<br>please select all options that describe your problem.</p>\n\t\t\t\t<div id="ads_dis_reasons">\n\t\t\t\t\t<div class="checkbox" data-hover="tap" data-hit="click" title="The ads are too large, and cover part of the game." data-reason="COVERING_GAMEPLAY">Ads cover gameplay</div>\n\t\t\t\t\t<div class="checkbox" data-hover="tap" data-hit="click" title="The ads caused lag spikes or consistent performance dips." data-reason="PERFORMANCE_ISSUES">Ads cause performance issues</div>\n\t\t\t\t\t<div class="checkbox" data-hover="tap" data-hit="click" title="The ads made the game repeatedly lose focus and require clicking back into the game." data-reason="GAME_FOCUS_LOSS">Ads cause game to lose focus</div>\n\t\t\t\t\t<div class="checkbox" data-hover="tap" data-hit="click" title="The ads played music or audio without permission." data-reason="AUDIO_PLAYBACK">Ads play audio</div>\n\t\t\t\t\t<div class="checkbox" data-hover="tap" data-hit="click" title="The ads are disruptive to the point of making it difficult to focus on gameplay." data-reason="DISRUPTIVE_TO_FOCUS">Ads make it hard for me to focus</div>\n\t\t\t\t\t<div class="checkbox" data-hover="tap" data-hit="click" title="The ads make the game look unpleasant to the eyes." data-reason="UGLY">Ads are ugly</div>\n\t\t\t\t\t<div class="checkbox" data-hover="tap" data-hit="click" title="The ads showed non-worksafe content (nudity, gambling, etc.)." data-reason="OBSCENE_CONTENT">Ads show obscene content</div>\n\t\t\t\t\t<div class="checkbox" data-hover="tap" data-hit="click" title="You refuse to be served ads for privacy reasons." data-reason="PRIVACY">Ads do not respect my privacy</div>\n\t\t\t\t\t<div class="checkbox" data-hover="tap" data-hit="click" title="You wish to not see ads." data-reason="OTHER">None of the above, I just do not want to see ads</div>\n\t\t\t\t</div>\n\t\t\t\t<style>\n\t\t\t\t\t#ads_dis_reasons .checkbox {\n\t\t\t\t\t\tfont-family: \'C\';\n\t\t\t\t\t\tfont-size: 1.2em;\n\t\t\t\t\t\tcolor: #555;\n\t\t\t\t\t}\n\t\t\t\t\t#ads_dis_reasons .checkbox.checked {\n\t\t\t\t\t\tcolor: #1e48ff;\n\t\t\t\t\t}\n\n\t\t\t\t\t#ads_dis_reasons .checkbox::before {\n\t\t\t\t\t\tbackground-color: #eeeeee;\n\t\t\t\t\t\tborder-top: 3px solid #afafaf;\n\t\t\t\t\t\tborder-left: 3px solid #afafaf;\n\t\t\t\t\t\tborder-bottom: 3px solid #d5d5d5;\n\t\t\t\t\t\tborder-right: 3px solid #afafaf;\n\t\t\t\t\t\ttop: 0.25em;\n\t\t\t\t\t}\n\n\t\t\t\t\t#ads_dis_reasons .checkbox.checked::before {\n\t\t\t\t\t\tbackground: url(/res/checkmark.svg), #1e48ff;\n\t\t\t\t\t\tborder-top: 3px solid #5273ff;\n\t\t\t\t\t\tborder-left: 3px solid #1e48ff;\n\t\t\t\t\t\tborder-bottom: 3px solid #1e48ff;\n\t\t\t\t\t\tborder-right: 3px solid #1e48ff;\n\t\t\t\t\t\tbackground-size: contain;\n\t\t\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\t\t\tbackground-position: center;\n\t\t\t\t\t}\n\n\t\t\t\t\t#ads_dis_btn.disabled {\n\t\t\t\t\t\topacity: 0.3;\n\t\t\t\t\t\tpointer-events: none;\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t\t<p>',classes:["noclickout"],buttons:[{label:"CONTINUE",id:"ads_dis_btn",classes:["pri","disabled"],callback:e=>{!function(e){try{Cn.get("https://kagari.website/ads-disable-survey.php",{username:bn.username(),xp:parseInt(xt("me_level").textContent),resolution:`${window.innerWidth}x${window.innerHeight}`,country:document.body.dataset.countryGeo??document.body.dataset.country,feecof:localStorage.getItem("feecofScore"),reasons:e.join("+")}).catch((()=>{}))}catch(e){}}([...vt("#ads_dis_reasons .checkbox.checked")].map((e=>e.dataset.reason))),e(),s()}}]});for(const e of vt("#ads_dis_reasons .checkbox"))e.addEventListener("click",(()=>{xt("ads_dis_btn").classList.remove("disabled"),"OTHER"===e.dataset.reason?(e.classList.add("checked"),vt('#ads_dis_reasons .checkbox:not([data-reason="OTHER"])').forEach((e=>e.classList.remove("checked")))):(e.classList.toggle("checked"),At('#ads_dis_reasons .checkbox[data-reason="OTHER"]').classList.toggle("checked",0===vt('#ads_dis_reasons .checkbox:not([data-reason="OTHER"])').length))}))}else s()})),ri("config_electron_devtools",(()=>{ot.electron.devtools?ot.electron.devtools=!1:_n({title:"ENABLE DEVTOOLS?",msg:'</p><p class="modal_warning">IF YOU WERE ASKED TO DO THIS, TURN BACK! YOU ARE BEING SCAMMED!</p><p>enabling DEVTOOLS allows you access to tools that help develop TETR.IO, build on it and diagnose issues. if you do not know what you are here for, you will likely be putting your account in danger.</p><p class="modal_also">use of DEVTOOLS is pursuant to the TETR.IO terms of service, and abuse will see your account permanently suspended.</p><p class="modal_warning">we request you have respect for TETR.IO and its competitive community.',classes:["crash_modal"],buttons:[{label:"CANCEL",classes:[],callback:e=>{ot.electron.devtools=!1,xt("config_electron_devtools").classList.add("hidden"),e()}},{label:"ENABLE",classes:["pri"],callback:e=>{ot.electron.devtools=!0,xa.SePlay("zenith_split_cleared"),Nt(["trackEvent","Error","Enabled Devtools"]),mt(),Ct(),e()}}]})}));for(const e of document.getElementsByClassName("bgmtweak_option"))e.addEventListener("click",(function(t){void 0===ot.volume.bgmtweak&&(ot.volume.bgmtweak={}),ot.volume.bgmtweak[e.getAttribute("data-id")]=e.getAttribute("data-option"),mt(),Ct()}));for(const e of document.getElementsByClassName("bgmtweak_header"))e.addEventListener("click",(function(t){xa.BgmPlaySmoothlyWithRandom(e.getAttribute("data-id"))}));ri("notifications_suppress",(()=>{ot.notifications.suppress=!xt("notifications_suppress").classList.contains("checked")})),ri("notifications_forcesound",(()=>{ot.notifications.forcesound=!xt("notifications_forcesound").classList.contains("checked")})),ri("notifications_online_off",(()=>{ot.notifications.online="off"})),ri("notifications_online_ingame",(()=>{ot.notifications.online="ingame"})),ri("notifications_online_both",(()=>{ot.notifications.online="both"})),ri("notifications_offline_off",(()=>{ot.notifications.offline="off"})),ri("notifications_offline_ingame",(()=>{ot.notifications.offline="ingame"})),ri("notifications_offline_both",(()=>{ot.notifications.offline="both"})),ri("notifications_dm_off",(()=>{ot.notifications.dm="off"})),ri("notifications_dm_ingame",(()=>{ot.notifications.dm="ingame"})),ri("notifications_dm_both",(()=>{ot.notifications.dm="both"})),ri("notifications_dm_pending_off",(()=>{ot.notifications.dm_pending="off"})),ri("notifications_dm_pending_ingame",(()=>{ot.notifications.dm_pending="ingame"})),ri("notifications_dm_pending_both",(()=>{ot.notifications.dm_pending="both"})),ri("notifications_invite_ingame",(()=>{ot.notifications.invite="ingame"})),ri("notifications_invite_both",(()=>{ot.notifications.invite="both"})),ri("notifications_other_ingame",(()=>{ot.notifications.other="ingame"})),ri("notifications_other_both",(()=>{ot.notifications.other="both"}))})),__volOverlayTimeout=null,__volOverlayAllowLoudAfter=null;class pi{name="Unknown";icon="connect";_defaultConfirmButton="BUTTON_0";_defaultBackButton="BUTTON_1";_BUTTON_NAMES={BUTTON_0:"BTN BOTTOM",BUTTON_1:"BTN RIGHT",BUTTON_2:"BTN LEFT",BUTTON_3:"BTN TOP",BUTTON_4:"BTN LB",BUTTON_5:"BTN RB",BUTTON_6:"BTN LT",BUTTON_7:"BTN RT",BUTTON_8:"BTN SELECT",BUTTON_9:"BTN START",BUTTON_10:"BTN LS",BUTTON_11:"BTN RS",BUTTON_12:"D-PAD UP",BUTTON_13:"D-PAD DOWN",BUTTON_14:"D-PAD LEFT",BUTTON_15:"D-PAD RIGHT",AXIS_1_NEG:"L-STICK UP",AXIS_1_POS:"L-STICK DOWN",AXIS_0_NEG:"L-STICK LEFT",AXIS_0_POS:"L-STICK RIGHT",AXIS_3_NEG:"R-STICK UP",AXIS_3_POS:"R-STICK DOWN",AXIS_2_NEG:"R-STICK LEFT",AXIS_2_POS:"R-STICK RIGHT"};GetDefaultConfirmButton(){return this._defaultConfirmButton}GetDefaultBackButton(){return this._defaultBackButton}GetButtonName(e){return this._BUTTON_NAMES[e]??e}}const hi=(()=>{const e=new Map,t=new pi;return{GetGamepadType:function(n){if(null==n)return t;const s=e.get(function(e){if("string"!=typeof e)throw new Error("Expected string, received "+typeof e);if("xinput"===e||e.includes("(XInput STANDARD GAMEPAD)"))return"xinput";const t="Vendor: ";if(e.includes(t)){const n=e.indexOf(t)+t.length;return e.substring(n,n+4)}if("-"===e[4]&&"-"===e[9])return e.substring(0,4)}(n.id));return s??t},RegisterGamepad:function(t,n){if(null!=e.get(t))throw new Error(`Attempted to register gamepad vendor id ${t} to resolver, but one already exists.`);e.set(t,n)}}})();class di extends pi{name="Nintendo Switch";icon="controller_nintendo_switchpro";_defaultConfirmButton="BUTTON_1";_defaultBackButton="BUTTON_0";_BUTTON_NAMES={BUTTON_0:"BTN B",BUTTON_1:"BTN A",BUTTON_2:"BTN Y",BUTTON_3:"BTN X",BUTTON_4:"BTN L",BUTTON_5:"BTN R",BUTTON_6:"BTN ZL",BUTTON_7:"BTN ZR",BUTTON_8:"BTN -",BUTTON_9:"BTN +",BUTTON_10:"BTN L-STICK",BUTTON_11:"BTN R-STICK",BUTTON_12:"D-PAD UP",BUTTON_13:"D-PAD DOWN",BUTTON_14:"D-PAD LEFT",BUTTON_15:"D-PAD RIGHT",BUTTON_16:"BTN HOME",BUTTON_17:"BTN CAPTURE",AXIS_1_NEG:"L-STICK UP",AXIS_1_POS:"L-STICK DOWN",AXIS_0_NEG:"L-STICK LEFT",AXIS_0_POS:"L-STICK RIGHT",AXIS_3_NEG:"R-STICK UP",AXIS_3_POS:"R-STICK DOWN",AXIS_2_NEG:"R-STICK LEFT",AXIS_2_POS:"R-STICK RIGHT"}}hi.RegisterGamepad("057e",new di);class ui extends pi{name="Playstation";icon="controller_sony_dualshock4";_BUTTON_NAMES={BUTTON_0:"BTN CROSS",BUTTON_1:"BTN CIRCLE",BUTTON_2:"BTN SQUARE",BUTTON_3:"BTN TRIANGLE",BUTTON_4:"BTN L1",BUTTON_5:"BTN R1",BUTTON_6:"BTN L2",BUTTON_7:"BTN R2",BUTTON_8:"BTN SHARE",BUTTON_9:"BTN OPTIONS",BUTTON_10:"BTN L3",BUTTON_11:"BTN R3",BUTTON_12:"D-PAD UP",BUTTON_13:"D-PAD DOWN",BUTTON_14:"D-PAD LEFT",BUTTON_15:"D-PAD RIGHT",BUTTON_16:"BTN PS",BUTTON_17:"BTN TOUCHPAD",AXIS_1_NEG:"L-STICK UP",AXIS_1_POS:"L-STICK DOWN",AXIS_0_NEG:"L-STICK LEFT",AXIS_0_POS:"L-STICK RIGHT",AXIS_3_NEG:"R-STICK UP",AXIS_3_POS:"R-STICK DOWN",AXIS_2_NEG:"R-STICK LEFT",AXIS_2_POS:"R-STICK RIGHT"};GetDefaultConfirmButton(){return"ja"===navigator.language.substring(0,2)?"BUTTON_1":"BUTTON_0"}GetDefaultBackButton(){return"ja"===navigator.language.substring(0,2)?"BUTTON_0":"BUTTON_1"}}hi.RegisterGamepad("054c",new ui);class _i extends pi{name="Xbox";icon="controller_microsoft_xboxone";_defaultConfirmButton="BUTTON_0";_defaultBackButton="BUTTON_1";_BUTTON_NAMES={BUTTON_0:"BTN A",BUTTON_1:"BTN B",BUTTON_2:"BTN X",BUTTON_3:"BTN Y",BUTTON_4:"BTN LB",BUTTON_5:"BTN RB",BUTTON_6:"BTN LT",BUTTON_7:"BTN RT",BUTTON_8:"BTN VIEW",BUTTON_9:"BTN MENU",BUTTON_10:"BTN LS",BUTTON_11:"BTN RS",BUTTON_12:"D-PAD UP",BUTTON_13:"D-PAD DOWN",BUTTON_14:"D-PAD LEFT",BUTTON_15:"D-PAD RIGHT",AXIS_1_NEG:"L-STICK UP",AXIS_1_POS:"L-STICK DOWN",AXIS_0_NEG:"L-STICK LEFT",AXIS_0_POS:"L-STICK RIGHT",AXIS_3_NEG:"R-STICK UP",AXIS_3_POS:"R-STICK DOWN",AXIS_2_NEG:"R-STICK LEFT",AXIS_2_POS:"R-STICK RIGHT"}}(()=>{const e=new _i;hi.RegisterGamepad("xinput",e),hi.RegisterGamepad("045e",e)})();const mi=(()=>{let e=!1,t=!1;function n(){const e=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[];for(let t=0;t<e.length;t++)if(e[t])return e[t]}window.addEventListener("gamepadconnected",(()=>{e=!0,function(){const e=hi.GetGamepadType(n());pt.menuConfirm=[e.GetDefaultConfirmButton()],pt.menuBack=[e.GetDefaultBackButton()]}(),Zs(),"custom"!==ot.controls.style&&bt();const t=hi.GetGamepadType(n());Qt({msg:`${t.name.toUpperCase()} controller connected`,color:"#6AFF3C",icon:t.icon}),o.Ticker.shared.add(r)})),window.addEventListener("gamepaddisconnected",(()=>{e=!1,Qt({msg:"controller disconnected",color:"#FF783C",icon:"disconnect"}),o.Ticker.shared.remove(r)})),window.addEventListener("keydown",(()=>{t=!1}),!0);const s={};let i=10,a=2;function r(o){if(!e)return;const r=n();if(r){for(let e=0;e<r.axes.length;e++){const n=`Axis_${e}_Pos`,l=r.axes[e]>(ot.controls.sensitivity||.5),c=`Axis_${e}_Neg`,p=r.axes[e]<-1*(ot.controls.sensitivity||.5);void 0!==s[n]&&s[n]!==l?(s[n]=l,i=10,a=2,t=!0,document.dispatchEvent(new CustomEvent("gp"+(l?"down":"up"),{detail:n}))):void 0===s[n]?s[n]=l:l&&(i>0?i-=o:a>0?a-=o:(a=2,t=!0,document.dispatchEvent(new CustomEvent("gprepeat",{detail:n,repeat:!0})))),void 0!==s[c]&&s[c]!==p?(s[c]=p,i=10,a=2,t=!0,document.dispatchEvent(new CustomEvent("gp"+(p?"down":"up"),{detail:c}))):void 0===s[c]?s[c]=p:p&&(i>0?i-=o:a>0?a-=o:(a=2,t=!0,document.dispatchEvent(new CustomEvent("gprepeat",{detail:c,repeat:!0}))))}for(let e=0;e<r.buttons.length;e++){const n=`Button_${e}`,l=r.buttons[e].value>(ot.controls.sensitivity||.5);void 0!==s[n]&&s[n]!==l?(s[n]=l,i=10,a=2,t=!0,document.dispatchEvent(new CustomEvent("gp"+(l?"down":"up"),{detail:n}))):void 0===s[n]?s[n]=l:l&&(i>0?i-=o:a>0?a-=o:(a=2,t=!0,document.dispatchEvent(new CustomEvent("gprepeat",{detail:n,repeat:!0}))))}}}return{getButtonNameForCurrentController:function(e){return hi.GetGamepadType(n()).GetButtonName(e)},pulse:function(n,s,i){if(!e||!t)return;if(0==ot.controls.vibration)return;const o=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[];let a;for(let e=0;e<o.length;e++)o[e]&&(a=o[e]);a.vibrationActuator&&a.vibrationActuator.playEffect&&a.vibrationActuator.playEffect("dual-rumble",{startDelay:0,duration:n,weakMagnitude:Math.min(1,(ot.controls.vibration||1)*s),strongMagnitude:Math.min(1,(ot.controls.vibration||1)*i)})},WEAK_GLIDE:[25,0,.15],WEAK_TAP:[50,0,.15],HARDDROP:[25,0,.2],CLEARLINE:[200,.3,.3],CLEARSPIN:[200,1,.3],CLEARQUAD:[300,.3,.6],CLEARB2B:[300,.6,.6],SPIN:[50,1,0],DAMAGE_SMALL:[150,.7,0],DAMAGE_MEDIUM:[250,.7,.7],DAMAGE_LARGE:[350,1,1],GARBAGERISE:[150,.5,0],CLEAR:[300,.5,1],TOPOUT:[500,.5,1],GARBAGESMASH:[500,1,1]}})(),gi=(()=>{let e={},t=!1,n=null,s=null,i=null,a=null;const r=[];function l(){const o=a!==i;if(a=i,o)for(const e of vt("[rg-hover]"))e.removeAttribute("rg-hover"),e.__rgBlur&&e.__rgBlur();if(!t||!e)return;if(!s||!i||null===i.offsetParent)return void n.classList.add("hidden");n.classList.remove("hidden");const r=i.getBoundingClientRect();n.style.left=`${r.left}px`,n.style.top=`${r.top}px`,n.style.width=`${r.width}px`,n.style.height=`${r.height}px`,n.classList.toggle("input",["input","textarea"].includes(document.activeElement.tagName.toLowerCase())),n.classList.toggle("noclick",i.classList.contains("noclick")),o&&(i.setAttribute("rg-hover",""),i.__rgFocus&&i.__rgFocus())}function c(e,t=null){const n=p(e);let s=Array.from(vt(n.selector));if(s=s.filter((e=>(null!==e.offsetParent||e.classList.contains("rb_bypass"))&&null===e.closest(".hidden"))),n.tags.includes("f")&&s.splice(1),n.tags.includes("l")&&s.splice(0,s.length-1),t&&n.tags.includes("n")){const e=s.indexOf(t);-1!==e&&s.length?s=[s[(e+1)%s.length]]:s.splice(1)}if(t&&n.tags.includes("p")){const e=s.indexOf(t);-1!==e&&s.length?s=[s[(e-1+s.length)%s.length]]:s.splice(0,s.length-1)}return s[0]||null}function p(e){const t=e.split("!");return 2===t.length?{tags:t[0].split(""),selector:t[1]}:{tags:[],selector:t[0]}}function h(t){if(!t)return;let n,o=t;if(Array.isArray(t)){for(const e of t)if(n=c(e,i),n){o=e;break}if(!n)return void(s=t[0])}else if(n=c(t,i),!n)return void(s=t);i=n,s=function(t,n){const s=p(t);let i=Array.from(vt(s.selector));i=i.filter((e=>(null!==e.offsetParent||e.classList.contains("rb_bypass"))&&null===e.closest(".hidden")));const o=i.indexOf(n);let a=s.selector;return 0===o?a=`f!${s.selector}`:o===i.length-1&&(a=`l!${s.selector}`),e.items[a]?a:s.selector}(o,i),p(o).tags.includes("s")||function(e){const t=document.createElement("div");return t.classList.add("elgh"),t.style.left=`${e.offsetLeft}px`,t.style.top=`${e.offsetTop}px`,t.style.width=`${Math.max(0,Math.min(e.offsetParent.offsetWidth-e.offsetLeft-30,e.offsetWidth))}px`,t.style.height=`${e.offsetHeight}px`,e.offsetParent.appendChild(t),setTimeout((()=>{t.remove()}),1e3),t}(i).scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),i.getAttribute("data-hover")&&xa.SePlay(`menu${i.getAttribute("data-hover")}`)}function d(t){e=t,e.starter?h(e.starter):(s=null,i=null)}Tn.ready((function(e){n=document.createElement("div"),n.id="ribbonglide",document.body.appendChild(n),o.Ticker.shared.add(l)}));let u=null;function _(e){if("none"===window.getComputedStyle(e,null).getPropertyValue("pointer-events"))return xa.SePlay("no"),n.classList.add("no"),null!==u&&clearTimeout(u),void setTimeout((()=>{n.classList.remove("no"),u=null}),100);mi.pulse(...mi.WEAK_TAP),xa.SePlay("ribbon_tap",.5),e.focus(),e.__rgClick?e.__rgClick():e.click()}return{push:()=>{r.push({guide:e,targeted:s,targetedElement:i})},pop:()=>{!function(){const t=r.pop();t&&(e=t.guide,s=t.targeted,i=t.targetedElement)}()},tryClick:e=>{_(e)},isEngaged:()=>t,engage:()=>{t=!0,document.body.classList.add("ribbonglide_engaged"),i&&(null===i.offsetParent&&!i.classList.contains("rb_bypass")||null!==i.closest(".hidden"))&&(h(s),i&&(null!==i.offsetParent||i.classList.contains("rb_bypass"))&&null===i.closest(".hidden")||h(e.starter))},disengage:()=>{t=!1,document.body.classList.remove("ribbonglide_engaged"),a=null;for(const e of vt("[rg-hover]"))e.removeAttribute("rg-hover"),e.__rgBlur&&e.__rgBlur()},bindGuide:e=>{d(e)},rebind:()=>{d(e)},action:n=>{!function(n){if(t&&!i&&h(s),t&&s&&e&&e.items&&void 0!==e.items[s])if(void 0===e.items[s][n]&&"confirm"===n&&i)_(i);else if(void 0===e.items[s][n]&&"back"===n&&e.back)_(At(e.back));else if(void 0!==e.items[s][n])if("string"==typeof e.items[s][n]||Array.isArray(e.items[s][n]))xa.SePlay("ribbon",.5),mi.pulse(...mi.WEAK_GLIDE),h(e.items[s][n]);else{const t=e.items[s][n](i);t&&(xa.SePlay("ribbon"),mi.pulse(...mi.WEAK_GLIDE),h(t))}}(n)}}})(),fi={home:{starter:"f!.scroller_item",back:"#exit_electron",items:{".scroller_item":{up:"p!.scroller_item",down:"n!.scroller_item"}}},play1p:{starter:"f!.scroller_item",back:"#back",items:{".scroller_item":{up:"p!.scroller_item",down:"n!.scroller_item"}}},"40l":{starter:"#start_40l",back:"#back",items:{"#start_40l":{left:"#music_picker_40l",right:"#music_picker_40l",up:"l!.checkbox",down:"f!.checkbox"},"#music_picker_40l":{left:"#start_40l",right:"#start_40l",up:"l!.checkbox",down:"f!.checkbox"},"f!.checkbox":{up:"#start_40l",down:"n!.checkbox"},"l!.checkbox":{up:"p!.checkbox",down:"#start_40l"},".checkbox":{up:"p!.checkbox",down:"n!.checkbox"}}},blitz:{starter:"#start_blitz",back:"#back",items:{"#start_blitz":{up:"l!.checkbox",down:"f!.checkbox"},"f!.checkbox":{up:"#start_blitz",down:"n!.checkbox"},"l!.checkbox":{up:"p!.checkbox",down:"#start_blitz"},".checkbox":{up:"p!.checkbox",down:"n!.checkbox"}}},zen:{starter:"#start_zen",back:"#back",items:{"#start_zen":{}}},custom:{starter:"#start_custom",back:"#back",items:{"#custom_export":{up:"l!.room_config_row",down:"#start_custom"},"#start_custom":{left:"#music_picker_custom",right:"#music_picker_custom",up:"#custom_export",down:"f!.room_tab"},"#music_picker_custom":{left:"#start_custom",right:"#start_custom",up:"#custom_export",down:"f!.room_tab"},".room_tab":{left:"p!.room_tab",right:"n!.room_tab",up:"#start_custom",down:"n!.room_config_row"},"f!.room_config_row":{up:"f!.room_tab",down:"n!.room_config_row",confirm:e=>{gi.tryClick(e.querySelector(".room_config_item"))}},"l!.room_config_row":{up:"p!.room_config_row",down:"#custom_export",confirm:e=>{gi.tryClick(e.querySelector(".room_config_item"))}},".room_config_row":{up:"p!.room_config_row",down:"n!.room_config_row",confirm:e=>{gi.tryClick(e.querySelector(".room_config_item"))}}}},about:{starter:"#about_line_logo",back:"#back",items:{"#about_line_logo":{up:"l!.scroller_item",down:"f!.credit_st"},".credit_st":{left:"p!.credit_st",right:"n!.credit_st",up:"#about_line_logo",down:"f!.scroller_item"},"f!.scroller_item":{up:"l!.credit_st",down:"n!.scroller_item"},"l!.scroller_item":{up:"p!.scroller_item",down:"#about_line_logo"},".scroller_item":{up:"p!.scroller_item",down:"n!.scroller_item"}}},playmulti:{starter:"f!.scroller_item",back:"#back",items:{"#multi_join":{up:"l!.scroller_item",down:"f!.scroller_item",confirm:e=>{gi.tryClick(e)}},"f!.scroller_item":{up:"#multi_join",down:"n!.scroller_item"},"l!.scroller_item":{up:"p!.scroller_item",down:"#multi_join"},".scroller_item":{up:"p!.scroller_item",down:"n!.scroller_item"}}},multilisting:{starter:"f!.room_listing_item",back:"#back",items:{".room_listing_item":{up:"p!.room_listing_item",down:"n!.room_listing_item"}}},lobby:{starter:"#roomid_container",back:"#leaveroom",items:{"#roomid_container":{up:"#room_opts_save",down:"f!.room_tab"},".room_tab":{left:"p!.room_tab",right:"n!.room_tab",up:"#roomid_container",down:"f!.room_config_row"},"f!.room_config_row":{up:"f!.room_tab",down:"n!.room_config_row",confirm:e=>{xt("roomview").classList.contains("hosting")&&gi.tryClick(e.querySelector(".room_config_item"))}},"l!.room_config_row":{up:"p!.room_config_row",down:"#room_opts_save",confirm:e=>{xt("roomview").classList.contains("hosting")&&gi.tryClick(e.querySelector(".room_config_item"))}},".room_config_row":{up:"p!.room_config_row",down:"n!.room_config_row",confirm:e=>{xt("roomview").classList.contains("hosting")&&gi.tryClick(e.querySelector(".room_config_item"))}},"#room_opts_save":{up:"l!.room_config_row",down:"#roomid_container",confirm:e=>{xt("roomview").classList.contains("hosting")&&gi.tryClick(e)}}}},victory:{starter:"f!.playerresult",back:"#backtoroom",items:{".playerresult":{up:"p!.playerresult",down:"n!.playerresult"}}},multilog:{starter:"f!.leagueplayer",back:"#back",items:{".leagueplayer":{up:"l!.multilog_result",down:"f!.multilog_result",left:"p!.leagueplayer",right:"n!.leagueplayer"},"f!.multilog_result":{up:"f!.leagueplayer",down:"n!.multilog_result"},"l!.multilog_result":{up:"p!.multilog_result",down:"f!.leagueplayer"},".multilog_result":{up:"p!.multilog_result",down:"n!.multilog_result"}}},league:{starter:"s!#enter_matchmaking",back:"#back",items:{"#enter_matchmaking":{up:"#league_tetra",down:"#league_tetra"},"#league_tetra":{up:"#enter_matchmaking",down:"#enter_matchmaking"}}},endleague:{starter:"f!.leagueplayer",back:"#backtoleague",items:{".leagueplayer":{up:"p!.leagueplayer",down:"n!.leagueplayer",left:"p!.leagueplayer",right:"n!.leagueplayer"}}},tetra:{starter:"#tetra_standalone",back:"#back",items:{"#tetra_find":{up:"l!#tetra_news_content a",down:"#tetra_standalone"},"#tetra_standalone":{up:"#tetra_find",down:"#tetra_leaderboards"},"#tetra_leaderboards":{up:"#tetra_standalone",down:"#tetra_me",left:"#tetra_me",right:"#tetra_players"},"#tetra_me":{up:"#tetra_leaderboards",down:"#tetra_achievements",left:"#tetra_players",right:"#tetra_players"},"#tetra_players":{up:"#tetra_leaderboards",down:"#tetra_achievements",left:"#tetra_me",right:"#tetra_me"},"#tetra_achievements":{up:"#tetra_me",down:"f!#tetra_news_content a",left:"#tetra_me",right:"#tetra_players"},"f!#tetra_news_content a":{up:"#tetra_me",left:"#tetra_achievements",down:"n!#tetra_news_content a",right:"n!#tetra_news_content a"},"l!#tetra_news_content a":{up:"p!#tetra_news_content a",left:"p!#tetra_news_content a",down:"#tetra_find",right:"#tetra_find"},"#tetra_news_content a":{up:"p!#tetra_news_content a",left:"p!#tetra_news_content a",down:"n!#tetra_news_content a",right:"n!#tetra_news_content a"}}},tetra_records:{starter:"f!.control_button",back:"#back",items:{".control_button":{up:"l!.record_item",down:"f!.record_item",left:"p!.control_button",right:"n!.control_button"},"f!.record_item":{up:"f!.control_button",down:"n!.record_item"},"l!.record_item":{up:"p!.record_item",down:"f!.control_button"},".record_item":{up:"p!.record_item",down:"n!.record_item"}}},tetra_me:{starter:"f!.control_button",back:"#back",items:{".control_button":{up:"l!.record_item",down:"f!.record_item",left:"p!.control_button",right:"n!.control_button"},"f!.record_item":{up:"f!.control_button",down:"n!.record_item"},"l!.record_item":{up:"p!.record_item",down:"f!.control_button"},".record_item":{up:"p!.record_item",down:"n!.record_item"}}},tetra_players:{starter:"f!.control_button",back:"#back",items:{".control_button":{up:"l!.record_item",down:"f!.record_item",left:"p!.control_button",right:"n!.control_button"},"f!.record_item":{up:"f!.control_button",down:"n!.record_item"},"l!.record_item":{up:"p!.record_item",down:"f!.control_button"},".record_item":{up:"p!.record_item",down:"n!.record_item"}}},tetra_achievements:{starter:"f!.achievement",back:"#back",items:{".achievement":{up:"p!.achievement",down:"n!.achievement",left:"p!.achievement",right:"n!.achievement"}}},results:{starter:"f!.rg_target_pri",back:"#back",items:{".rg_target_pri":{up:"p!.rg_target_pri",left:"p!.rg_target_pri",down:"n!.rg_target_pri",right:"n!.rg_target_pri"}}},zenith:{starter:"f!.rg_target_start_zenith",items:{".menuslide_rollup":{up:"l!.rg_target_pri",down:["f!.rg_target_top",".rg_target_start_zenith"]},".rg_target_top":{up:"l!.menuslide_rollup",left:"p!.rg_target_top",right:"n!.rg_target_top",down:"f!.rg_target_start_zenith"},".rg_target_start_zenith":{up:["l!.rg_target_top",".menuslide_rollup"],down:"ls!.rg_zenith_card"},".rg_zenith_card":{up:"f!.rg_target_start_zenith",left:"ns!.rg_zenith_card",down:"f!.rg_target_pri",right:"ps!.rg_zenith_card"},"f!.rg_target_pri":{up:"ls!.rg_zenith_card",left:"p!.rg_target_pri",down:"n!.rg_target_pri",right:"n!.rg_target_pri"},"l!.rg_target_pri":{up:"p!.rg_target_pri",left:"p!.rg_target_pri",down:"f!.menuslide_rollup",right:"n!.rg_target_pri"},".rg_target_pri":{up:"p!.rg_target_pri",left:"p!.rg_target_pri",down:"n!.rg_target_pri",right:"n!.rg_target_pri"}}},config:{starter:"f!.rg_target_pri",back:"#back",items:{".rg_target_pri":{up:"p!.rg_target_pri",down:"n!.rg_target_pri",left:e=>{if("range"!==e.getAttribute("type"))return"p!.rg_target_pri";{let t=parseFloat(e.getAttribute("step"))||1;e.classList.contains("range_reversed")||(t*=-1),e.value=Math.min(parseFloat(e.getAttribute("max")),Math.max(parseFloat(e.getAttribute("min")),parseFloat(e.value)+t)),e.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))}},right:e=>{if("range"!==e.getAttribute("type"))return"n!.rg_target_pri";{let t=parseFloat(e.getAttribute("step"))||1;e.classList.contains("range_reversed")&&(t*=-1),e.value=Math.min(parseFloat(e.getAttribute("max")),Math.max(parseFloat(e.getAttribute("min")),parseFloat(e.value)+t)),e.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))}}}}},config_account:{starter:"f!.rg_target_pri",back:"#back",items:{".rg_target_pri":{up:"p!.rg_target_pri",down:"n!.rg_target_pri",left:"p!.rg_target_pri",right:"n!.rg_target_pri"}}},config_bgmtweak:{starter:"f!.rg_target_pri",back:"#back",items:{".rg_target_pri":{up:"p!.rg_target_pri",down:"n!.rg_target_pri",left:"p!.rg_target_pri",right:"n!.rg_target_pri"}}},config_electron:{starter:"f!.rg_target_pri",back:"#back",items:{".rg_target_pri":{up:"p!.rg_target_pri",down:"n!.rg_target_pri",left:"p!.rg_target_pri",right:"n!.rg_target_pri"}}},list_request:{starter:"f!#list_request .scroller_item",back:"#list_request_back",items:{"#list_request .scroller_item":{up:"p!#list_request .scroller_item",down:"n!#list_request .scroller_item"}}},tetra_dialog:{starter:".tetra_modal_close",back:".tetra_modal_close",items:{".tetra_modal_close":{up:"l!.tetra_button",down:"f!.tetra_button"},".tetra_button":{up:".tetra_modal_close",down:".tetra_modal_close",left:"p!.tetra_button",right:"n!.tetra_button"}}},dialog:{starter:"f!.oob_button",items:{".oob_button":{left:"p!.oob_button",right:"n!.oob_button"}}},social:{starter:"f!.oob_button",items:{".oob_button":{left:"p!.oob_button",right:"n!.oob_button"}}}};function bi(){_n({title:"DELETE YOUR ACCOUNT?",msg:`delete your account <span class="inline_self">${xt("config_account_username_field").value}</span> and all attached data?</p><p class="modal_also">this cannot be undone.`,classes:["crash_modal"],buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"DELETE!",classes:["pri"],callback:e=>{e(),Ci()}}]})}function Ci(){_n({title:"DELETE YOUR ACCOUNT?",msg:`no seriously, are you sure you want to delete <span class="inline_self">${xt("config_account_username_field").value}</span> and EVERYTHING INVOLVED, like your replays, badges, XP, rating, etc?</p><p class="modal_also">you can never get it back!!!`,classes:["crash_modal","shudder"],buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"DELETE!!!",classes:["pri"],callback:e=>{e(),yi()}}]})}function yi(){_n({title:`DELETING ${xt("config_account_username_field").value}`,msg:'please type your username<br><input class="usernamelike" data-escape="account_delete_cancel" data-enter="account_delete_submit" id="account_delete" placeholder="YOUR USERNAME" value="">',buttons:[{label:"CANCEL",classes:[],id:"account_delete_cancel",callback:e=>{e()}},{label:"SUBMIT",classes:["pri"],id:"account_delete_submit",callback:e=>{e(),xt("account_delete").value.toUpperCase()===xt("config_account_username_field").value?xi():en("wrong username - deletion aborted")}}]}),xt("account_delete").focus()}function xi(){bn.requestPassword(((e,t)=>{qi("requesting deletion"),Cn.post("/api/users/requestDeletion",{password:e,totp:t}).then((e=>{nn("an email has been sent with further instructions!"),Ki()}),(e=>{Ki(),sn(e)}))}))}let Ai,vi=0,ki="z",wi=-1;const Bi={none:{back:null,header:"HOME",footer:"pick a game mode"},home:{back:null,header:"HOME",footer:'welcome to <span class="cheeky">TETRIO</span>!',onenter:()=>{if(xa.BgmPlaySmoothly(document.body.classList.contains("inpair")||document.body.classList.contains("matchmaking")?"touhoudaiensei":"kuchu-toshi"),document.body.classList.contains("inpair")||document.body.classList.contains("matchmaking")||ll("online","menus"),Vs.mount("home-lb"),Vs.mount("menus-persistent-mpu",!0),Rt("Homebanner"),Vs.setPage("/menus"),"Yes3"!==localStorage.getItem("x_insiders_upsell_hidden")){const e={d:null,"d+":null,"c-":null,c:null,"c+":null,"b-":null,b:null,"b+":null,"a-":null,a:null,"a+":null,"s-":null,s:null,"s+":null,ss:1811921,u:1811921,x:1811921,z:null}[document.body.getAttribute("data-near-rank")??"z"];e&&parseFloat(document.body.getAttribute("data-xp"))>e&&parseFloat(document.body.getAttribute("data-account-ts"))<=1754006399e3&&xt("insiders_upsell").classList.remove("hidden")}},onreenter:()=>{Vs.mount("home-lb"),Vs.mount("menus-persistent-mpu",!0),Rt("Homebanner"),Vs.setPage("/menus")},onexit:()=>{Vs.unmount("home-lb"),Vs.unmount("menus-persistent-mpu",!0)}},about:{back:"home",header:"ABOUT",footer:'thank you for playing <span class="cheeky">TETRIO</span>!',onenter:()=>{xa.BgmPlaySmoothly(document.body.classList.contains("inpair")||document.body.classList.contains("matchmaking")?"touhoudaiensei":"kuchu-toshi"),va.loadSpecialThanks(),document.addEventListener("keydown",Aa.UnlockerKeyDown),document.addEventListener("keyup",Aa.UnlockerKeyUp),Vs.setPage("/menus")},onexit:()=>{document.removeEventListener("keydown",Aa.UnlockerKeyDown),document.removeEventListener("keyup",Aa.UnlockerKeyUp)}},play1p:{back:"home",header:"SOLO",footer:"pick a game mode",onenter:()=>{xt("zen_count").innerHTML=Ys.getZen().level,Vs.mount("solo-lb"),Vs.mount("menus-persistent-mpu",!0),Rt("Solo Home Menu"),Vs.setPage("/menus")},onreenter:()=>{Vs.mount("solo-lb"),Vs.mount("menus-persistent-mpu",!0),Rt("Solo Home Menu"),Vs.setPage("/menus")},onexit:()=>{Vs.unmount("solo-lb"),Vs.unmount("menus-persistent-mpu",!0)}},playmulti:{back:"home",header:"MULTIPLAYER",footer:"pick a game mode",onback:()=>{document.body.classList.contains("inpair")||document.body.classList.contains("matchmaking")||Ja.unrequire()},onenter:()=>{xa.BgmPlaySmoothly(document.body.classList.contains("inpair")||document.body.classList.contains("matchmaking")?"touhoudaiensei":"kuchu-toshi"),Cn.get("/api/rooms/menu").then((e=>{xt("quickplay_players").innerHTML=`${e.quickplay.playing}${e.quickplay.total-e.quickplay.playing?`<span class="room_listing_spectators">+${e.quickplay.total-e.quickplay.playing}</span>`:""}`,xt("quickplay_players").classList.toggle("empty",!e.quickplay.playing),xt("royale_players").innerHTML=`${e.royale.playing}${e.royale.total-e.royale.playing?`<span class="room_listing_spectators">+${e.royale.total-e.royale.playing}</span>`:""}`,xt("royale_players").classList.toggle("empty",!e.royale.playing),xt("room_count").innerHTML=`${e.roomcount}`,xt("room_count").classList.toggle("empty",!e.roomcount),xt("room_count").classList.toggle("singular",1===e.roomcount)}),(e=>{xt("quickplay_players").innerHTML="0",xt("quickplay_players").classList.add("empty"),xt("royale_players").innerHTML="0",xt("royale_players").classList.add("empty")})),document.body.classList.contains("inpair")||document.body.classList.contains("matchmaking")||ll("online","menus"),Vs.mount("multiplayer-lb"),Vs.mount("menus-persistent-mpu",!0),Rt("Multiplayer Home Menu"),Vs.setPage("/menus")},onreenter:()=>{Vs.mount("multiplayer-lb"),Vs.mount("menus-persistent-mpu",!0),Rt("Multiplayer Home Menu"),Vs.setPage("/menus")},onexit:()=>{Vs.unmount("multiplayer-lb"),Vs.unmount("menus-persistent-mpu",!0)}},multilisting:{back:"playmulti",header:"MULTIPLAYER / ROOM LISTING",footer:"pick a room to join!",onenter:()=>{lr.loadListing(),xt("roomlisting_scroller").scrollTop=0,Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onreenter:()=>{Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onexit:()=>{Vs.unmount("menus-persistent-mpu",!0)}},lobby:{back:null,header:"",footer:"",onenter:()=>{xt("room_chat").scrollTop=xt("room_chat").scrollHeight+100,Vs.mount(ar&&"X-QP"===ar?"sysroom-mpu":"lobby-lb"),Rt(ar&&"X-QP"===ar?"Quick Play Lobby":"Custom Room Lobby")},onreenter:()=>{Vs.mount(ar&&"X-QP"===ar?"sysroom-mpu":"lobby-lb")},onexit:()=>{Vs.unmount("sysroom-mpu"),Vs.unmount("lobby-lb")}},victory:{back:null,header:"RESULTS",footer:"the results are in!",onenter:()=>{xa.BgmPlaySmoothly("aijin-sanka"),xt("victoryview").scrollTop=-200,xt("vvsc").scrollTop=-200,Vs.mount("roomresults-lb"),Rt("Multiplayer Results")},onreenter:()=>{Vs.mount("roomresults-lb"),Rt("Multiplayer Results")},onexit:()=>{Vs.unmount("roomresults-lb")}},multilog:{back:"home",header:"RESULTS",footer:"the results are in!"},league:{back:"playmulti",header:"TETRA LEAGUE",footer:"face off against others and rise up through the ranks!",onenter:()=>{xa.BgmPlaySmoothly("touhoudaiensei"),xt("leagueview").scrollTop=0,Fi(),Vs.mount("league-lb"),Vs.mount("menus-persistent-mpu",!0),Rt("League Home"),Ja?.emit("channel.subscribe","league.counts"),Vs.setPage("/menus")},onreenter:()=>{Vs.mount("league-lb"),Vs.mount("menus-persistent-mpu",!0),Rt("League Home"),Ja?.emit("channel.subscribe","league.counts"),Vs.setPage("/menus")},onexit:()=>{Vs.unmount("league-lb"),Vs.unmount("menus-persistent-mpu",!0),Ja?.emit("channel.unsubscribe","league.counts")}},endleague:{back:null,header:"TETRA LEAGUE / RESULTS",footer:"the results are in!",onenter:()=>{xt("league_chat").scrollTop=xt("league_chat").scrollHeight+100,Rt("League Results")}},tetra:{back:"home",header:"TETRA CHANNEL",footer:"welcome to TETRA CHANNEL!",onenter:()=>{xa.BgmPlaySmoothly(document.body.classList.contains("inpair")||document.body.classList.contains("matchmaking")?"touhoudaiensei":"shikiichi-made-mousukoshi"),va.loadNews(),va.loadTwitch(),Rt("Tetra Home"),Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onreenter:()=>{Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onexit:()=>{Vs.unmount("menus-persistent-mpu",!0)}},tetra_records:{back:"tetra",header:"TETRA CHANNEL / LEADERBOARDS",footer:"top the global leaderboards!",onenter:()=>{"null"!==document.body.dataset.country&&"no"===document.body.dataset.countryHidden?(At('.tetra_records_scale[data-value="country"]').classList.remove("hidden"),At('.tetra_records_scale[data-value="country"]').textContent=Un[document.body.dataset.country].length>=22?Un[document.body.dataset.country].toLowerCase():Un[document.body.dataset.country].toUpperCase()):At('.tetra_records_scale[data-value="country"]').classList.add("hidden"),Vs.mount("menus-persistent-mpu",!0),(xt("tetra_records")._lastAutoUpdate||0)>=Date.now()-6e5||(xt("tetra_records")._lastAutoUpdate=Date.now(),va.loadRecords("40l","global","tetra_records"),vt(".tetra_records_gamemode").forEach((e=>{e.classList.remove("pressed"),e.classList.remove("active")})),vt(".tetra_records_scale").forEach((e=>{e.classList.remove("pressed"),e.classList.remove("active")})),At('.tetra_records_gamemode[data-value="40l"]').classList.add("pressed"),At('.tetra_records_gamemode[data-value="40l"]').classList.add("active"),At('.tetra_records_scale[data-value="global"]').classList.add("pressed"),At('.tetra_records_scale[data-value="global"]').classList.add("active"),xt("tetra_records_view").dataset.gamemode="40l",Vs.setPage("/menus"))},onreenter:()=>{Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onexit:()=>{Vs.unmount("menus-persistent-mpu",!0)}},tetra_me:{back:"tetra",header:"TETRA CHANNEL / ME",footer:"track your progression!",onenter:()=>{Vs.mount("menus-persistent-mpu",!0),(xt("tetra_myrecords")._lastAutoUpdate||0)>=Date.now()-6e5||(xt("tetra_myrecords")._lastAutoUpdate=Date.now(),va.loadRecords("any","me","tetra_myrecords"),vt(".tetra_myrecords_gamemode").forEach((e=>{e.classList.remove("pressed"),e.classList.remove("active")})),At('.tetra_myrecords_gamemode[data-value="any"]').classList.add("pressed"),At('.tetra_myrecords_gamemode[data-value="any"]').classList.add("active"),Vs.setPage("/menus"))},onreenter:()=>{Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onexit:()=>{Vs.unmount("menus-persistent-mpu",!0)}},tetra_players:{back:"tetra",header:"TETRA CHANNEL / PLAYERS",footer:"view other players and their achievements!",onenter:()=>{"null"!==document.body.dataset.country&&"no"===document.body.dataset.countryHidden?(At('.tetra_players_scale[data-value="country"]').classList.remove("hidden"),At('.tetra_players_scale[data-value="country"]').textContent=Un[document.body.dataset.country].length>=22?Un[document.body.dataset.country].toLowerCase():Un[document.body.dataset.country].toUpperCase()):At('.tetra_players_scale[data-value="country"]').classList.add("hidden"),Vs.mount("menus-persistent-mpu",!0),(xt("tetra_players")._lastAutoUpdate||0)>=Date.now()-6e5||(xt("tetra_players")._lastAutoUpdate=Date.now(),va.loadUserList("league","global","tetra_players_content"),vt(".tetra_players_lb").forEach((e=>{e.classList.remove("pressed"),e.classList.remove("active")})),vt(".tetra_players_scale").forEach((e=>{e.classList.remove("pressed"),e.classList.remove("active")})),At('.tetra_players_lb[data-value="league"]').classList.add("pressed"),At('.tetra_players_lb[data-value="league"]').classList.add("active"),At('.tetra_players_scale[data-value="global"]').classList.add("pressed"),At('.tetra_players_scale[data-value="global"]').classList.add("active"),xt("tetra_players_view").dataset.lb="league",Vs.setPage("/menus"))},onreenter:()=>{Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onexit:()=>{Vs.unmount("menus-persistent-mpu",!0)}},tetra_achievements:{back:"tetra",header:"TETRA CHANNEL / ACHIEVEMENTS",footer:"view your achievement progress!",onenter:()=>{va.loadAchievements()},onexit:()=>{xt("tetra_achievements_page").classList.remove("editing"),xt("tetra_achievements_page").dataset.editing=""}},"40l":{back:"play1p",header:"40 LINES",footer:"press START to begin playing",onenter:()=>{Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onreenter:()=>{Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onexit:()=>{Vs.unmount("menus-persistent-mpu",!0)}},blitz:{back:"play1p",header:"BLITZ",footer:"press START to begin playing",onenter:()=>{Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onreenter:()=>{Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onexit:()=>{Vs.unmount("menus-persistent-mpu",!0)}},zen:{back:"play1p",header:"ZEN",footer:"press START to begin playing",onenter:()=>{Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onreenter:()=>{Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onexit:()=>{Vs.unmount("menus-persistent-mpu",!0)}},custom:{back:"play1p",header:"CUSTOM",footer:"press START to begin playing",onenter:()=>{Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onreenter:()=>{Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus")},onexit:()=>{Vs.unmount("menus-persistent-mpu",!0)}},results:{back:"home",header:"RESULTS",footer:"GAME TYPE: the results are in!",onenter:()=>{xt("results_stats_set_overview").classList.add("pressed"),xt("results_stats_set_full").classList.remove("pressed"),xt("results_stats_overview").classList.remove("hidden"),xt("results_stats_full").classList.add("hidden"),Vs.mount("soloresults-lb"),Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus"),Rt("Solo Results")},onreenter:()=>{Vs.mount("soloresults-lb"),Vs.mount("menus-persistent-mpu",!0),Vs.setPage("/menus"),Rt("Solo Results")},onexit:()=>{Vs.unmount("soloresults-lb"),Vs.unmount("menus-persistent-mpu",!0)}},config:{back:"home",header:"CONFIG",footer:'tweak your settings for a better <span class="cheeky">TETRIO</span> experience'},config_account:{back:"config",header:"CONFIG / ACCOUNT",footer:'change settings in your <span class="cheeky">TETRIO</span> account'},config_account_orders:{back:"config_account",header:"CONFIG / ACCOUNT / ORDERS",footer:"view past orders for your account"},config_bgmtweak:{back:"config",header:"CONFIG / BGM TWEAKER",footer:"change how often some songs play"},config_electron:{back:"config",header:'CONFIG / <span class="cheeky">TETRIO</span> DESKTOP',footer:'change <span class="cheeky">TETRIO</span> DESKTOP settings',onenter:()=>{document.addEventListener("keydown",qs),ot.electron.devtools&&xt("config_electron_devtools").classList.remove("hidden")},onexit:()=>{document.removeEventListener("keydown",qs)}},zenith:{back:null,header:"QUICK PLAY",footer:"scale the tower!",onenter:()=>{Rt("Quick Play"),Za(),Vs.setPage("/ingame/zenith")}}};let Li="none";function Si(e,t,n,s,i,o,a){_n({title:e,msg:`${t}<br><input data-escape="request_number_cancel" data-enter="request_number_submit" id="request_number" type="number" placeholder="NUMBER" autocomplete="off" value="${o}" step="${i}" min="${n}" max="${s}">`,buttons:[{label:"CANCEL",classes:[],id:"request_number_cancel",callback:e=>{e()}},{label:"SUBMIT",classes:["pri"],id:"request_number_submit",callback:e=>{a(xt("request_number").value),e()}}]}),xt("request_number").focus()}function zi(e,t,n,s){_n({title:e,msg:`${t}<br><span style="font-family: 'PFW'; font-size: 1.35em;">#</span><input data-escape="request_roomid_cancel" data-enter="request_roomid_submit" id="request_roomid" placeholder="ROOM ID" autocomplete="off" value="${n}" minlength="1" maxlength="16" class="mono_input usernamelike" style="width: calc(100% - 1.5em); margin-left: 0.2em;">`,buttons:[{label:"CANCEL",classes:[],id:"request_roomid_cancel",callback:e=>{e()}},{label:"SUBMIT",classes:["pri"],id:"request_roomid_submit",callback:e=>{s(xt("request_roomid").value),e()}}]}),xt("request_roomid").focus()}function Fi(){"league"!==Li||xt("menus").classList.contains("hidden")||Ji<1||Cn.get("/api/rooms/league").then((e=>{if(xt("mm_queuecount_count").innerHTML=e.info.queue,xt("mm_playercount_count").innerHTML=e.info.players,e.info.avgTimes){const t=Math.round(e.info.avgTimes/1e3);xt("mm_avgtime_time").innerHTML=t<=60?`${t} <span>SECOND${1===t?"":"S"}</span>`:t<120?`1 <span>MINUTE</span> ${t-60} <span>SECOND${t-60==1?"":"S"}</span>`:t<600?`${Math.round(t/60)} <span>MINUTES</span>`:"10+ <span>MINUTES</span>",xt("mm_avgtime").classList.remove("hidden")}else xt("mm_avgtime").classList.add("hidden")}),(e=>{xt("mm_queuecount_count").innerHTML="0",xt("mm_playercount_count").innerHTML="0",xt("mm_avgtime").classList.add("hidden")}))}function Ti(){return!document.body.classList.contains("supporter")&&(!document.body.classList.contains("staff")&&(Ii("THIS ACTION REQUIRES SUPPORTER"),!0))}function Ii(e="SUPPORT TETR.IO",t=void 0){if(_.novault)return void en("purchases are disabled on this installation");if(!xt("preload").classList.contains("hidden"))return void en("appreciate the enthusiasm, but let's log into the game first!");_n({title:e,msg:`</p><div class="dialog_long">\n\t\t\t\t<p class="supporter_bumper">\n\t\t\t\t\tEver since starting TETR.IO back in February of 2019, I've always tried running it in a way I feel is fair. While it may be an .io-game, I don't want to go down the path of other such games. I want to pride myself on my game, not on my bottom line. TETR.IO will always be <b>free-to-win</b>, with monetization being optional for all players. Please help me sustain this goal, by supporting me, and get some cool benefits! While they won't improve your skill, they might make you stand out among friends, and rep your support! \n\t\t\t\t\t<span class="supporter_bumper_footer">&mdash; osk, founder and developer of TETR.IO</span>\n\t\t\t\t</p>\n\t\t\t\t<div class="supporter-perk"><img src="/res/supporter-perk-duo.png" />play <span>DUO QUICK PLAY</span>, a co-op quick play climb (only one player needs supporter)</div>\n\t\t\t\t<div class="supporter-perk"><img src="/res/supporter-perk-badge.png" />show off with a very special <span>profile badge</span></div>\n\t\t\t\t<div class="supporter-perk"><img src="/res/supporter-perk-customize.png" />customize your profile with a <span>profile banner</span> and <span>about me</span> section</div>\n\t\t\t\t<div class="supporter-perk"><img src="/res/supporter-perk-amend.png" />easily <span>change your username</span> once a month and <span>change your country</span> on demand</div>\n\t\t\t\t<div class="supporter-perk"><img src="/res/supporter-perk-emotes.png" />get access to <span>exclusive supporter emotes</span></div>\n\t\t\t\t<div class="supporter-perk"><img src="/res/supporter-perk-vanityroom.png" />set a <span>custom room ID</span> on your public and private rooms</div>\n\t\t\t\t<div class="supporter-perk"><img src="/res/supporter-perk-friends.png" />have up to <span>500 friends</span>, up from 50</div>\n\t\t\t\t<div class="supporter-perk"><img src="/res/supporter-perk-discordrole.png" />get an exclusive <span>supporter role</span> in the discord</div>\n\t\t\t\t<div class="supporter-perk"><img src="/res/supporter-perk-ads.png" />hide all <span>ads</span> from the game and tetra channel</div>\n\t\t\t\t<div class="supporter-perk"><img src="/res/supporter-perk-love.png" />and get that warm feeling of <span>supporting a project you love</span></div>\n\t\t\t\t<div class="supporter_payment_block">\n\t\t\t\t\t<p>TETR.IO Supporter is a <b>non-recurring payment</b>. If you buy it while still being a supporter, it will extend the duration of your existing supporter status.</p>\n\t\t\t\t\t<div class="checkbox minor_checkbox ${t?"checked":""}" id="supporter_payment_block_gift">Gift to other player(s)</div>\n\t\t\t\t\t<input placeholder="the recipients' usernames, separated by spaces" id="supporter_payment_block_recipient" autocomplete="off" class="minor_input usernamelike" value="${t?zt(t).toLowerCase():""}">\n\t\t\t\t\t<input type="range" min="1" max="24" value="${t?"1":"3"}" class="minor_range" id="supporter_payment_block_duration">\n\t\t\t\t\t<div class="supporter_payment_price" id="supporter_payment_price">\n\t\t\t\t\t\t<div>3 months</div>\n\t\t\t\t\t\t15\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="supporter_payment_custom" id="supporter_payment_custom">...or pick a custom length (up to 1200 months)</div>\n\t\t\t\t\t<p class="supporter_payment_also">will be converted to your local currency on payment</p>\n\t\t\t\t</div>\n\t\t\t</div><p>`,classes:["supporter_modal"],buttons:[{label:"BACK",classes:[],callback:e=>{e()}},{label:"SUPPORT!",classes:["pri"],callback:e=>{const t=xt("supporter_payment_block_recipient").value.toLowerCase().replace(/,/g,"").replace(/\s+/g," ").trim().split(" "),n=xt("supporter_payment_block_gift").classList.contains("checked"),s=n&&t.length>1?1:Math.max(1,Math.min(1200,parseInt(xt("supporter_payment_block_duration").value)));_o("supporter",{months:s,price:(n?t.length:1)*(Math.min(_.catalog.supporter.bulk_after,s)*(n?_.catalog.supporter.price_gift:_.catalog.supporter.price))+Math.max(0,s-_.catalog.supporter.bulk_after)*(n?_.catalog.supporter.price_gift_bulk:_.catalog.supporter.price_bulk),isgift:n,recipients:n?t:void 0},(()=>{e()}))}}]});const n=()=>{const e=xt("supporter_payment_block_gift").classList.contains("checked"),t=e?xt("supporter_payment_block_recipient").value.toLowerCase().replace(/,/g,"").replace(/\s+/g," ").trim().split(" ").length:1,n=t>1?1:Math.max(1,Math.min(1200,parseInt(xt("supporter_payment_block_duration").value))),s=t*(Math.min(_.catalog.supporter.bulk_after,n)*(e?_.catalog.supporter.price_gift:_.catalog.supporter.price))+Math.max(0,n-_.catalog.supporter.bulk_after)*(e?_.catalog.supporter.price_gift_bulk:_.catalog.supporter.price_bulk),i=t*(Math.min(_.catalog.supporter.normal_bulk_after,n)*(e?_.catalog.supporter.normal_price_gift:_.catalog.supporter.normal_price))+Math.max(0,n-_.catalog.supporter.normal_bulk_after)*(e?_.catalog.supporter.normal_price_gift_bulk:_.catalog.supporter.normal_price_bulk),o=t*n*_.catalog.supporter.price,a=t*n*_.catalog.supporter.normal_price,r=parseInt(xt("supporter_payment_block_duration").getAttribute("max"));xt("supporter_payment_block_duration").style.background=`linear-gradient(to right, #FFF 0%, #FFF ${(n-1)/(r-1)*100}%, #000A ${(n-1)/(r-1)*100}%, #000A 100%)`,xt("supporter_payment_block_duration").style.display=t>1?"none":"inline-block",xt("supporter_payment_custom").style.display=t>1?"none":"inline-block",xt("supporter_payment_price").innerHTML=t>1?`<div>${t} recipients</div>${s!==i?`<span class="slashed_price">${i%1==0?i:i.toFixed(2)}</span> `:""}${s%1==0?s:s.toFixed(2)}${s!==i?` <span class="offer special">${Math.round(100*(1-s/i))}% OFF!</span>`:""}${s!==o?` <span class="offer">save ${Math.round(100*(1-s/a))}% ${s!==i?"in total ":""}by ${e?"gifting":"buying in bulk"}</span>`:""}`:`<div>${n} month${1===n?"":"s"}${n>=12?` <span>(${Math.floor(n/12)} year${1===Math.floor(n/12)?"":"s"}${n%12==0?"":`, ${n%12} month${n%12==1?"":"s"}`})</span>`:""}</div>${s!==i?`<span class="slashed_price">${i%1==0?i:i.toFixed(2)}</span> `:""}${s%1==0?s:s.toFixed(2)}${s!==i?` <span class="offer special">${Math.round(100*(1-s/i))}% OFF!</span>`:""}${s!==o?` <span class="offer">save ${Math.round(100*(1-s/a))}% ${s!==i?"in total ":""}by ${e?"gifting":"buying in bulk"}</span>`:""}`,1===n&&xt("supporter_payment_block_duration").setAttribute("max",24)};n(),xt("supporter_payment_block_gift").addEventListener("click",(()=>{xt("supporter_payment_block_gift").classList.toggle("checked"),n()})),xt("supporter_payment_block_duration").addEventListener("input",(()=>{n()})),xt("supporter_payment_block_recipient").addEventListener("keyup",(()=>{n()})),xt("supporter_payment_custom").addEventListener("click",(()=>{Si("CUSTOM LENGTH","enter an amount of months (max: 1200)",1,1200,1,xt("supporter_payment_block_duration").value,(e=>{e=Math.max(1,Math.min(1200,parseInt(e))),xt("supporter_payment_block_duration").setAttribute("max",Math.max(24,e)),xt("supporter_payment_block_duration").value=e,n()}))}))}function Ei(e,t){if("supporter"===e)_n({title:t.isgift?"THANK YOU FOR GIFTING!":"THANK YOU FOR SUPPORTING!",msg:`</p>\n\t\t\t\t\t\t<center>\n\t\t\t\t\t\t\t<img src="/res/supporter-tag-shiny.png" />\n\t\t\t\t\t\t\t<p>${t.isgift?`YOUR GIFT HAS BEEN SENT TO <b>${t.recipients.length>1?`ALL ${t.recipients.length} LUCKY PLAYERS`:zt(t.recipients[0].toUpperCase())}</b>!`:document.body.classList.contains("supporter_at_launch")?"YOUR SUPPORTER STATUS HAS BEEN EXTENDED!":"YOU ARE NOW A TETR.IO SUPPORTER!"}</p>\n\t\t\t\t\t\t</center>\n\t\t\t\t\t\t<p class="supporter_bumper">Thank you very, <b>very</b> much for ${t.isgift?"gifting Supporter":"supporting"} &mdash; ${t.isgift?"their benefits should be applied instantly":document.body.classList.contains("supporter_at_launch")?"your tag has been extended":"your benefits should be applied instantly"}. With your support, I can keep developing TETR.IO as we both love it. ${t.isgift?"You're awesome!":document.body.classList.contains("supporter_at_launch")?"Stay awesome!":"You're awesome!"}<span class="supporter_bumper_footer">&mdash; osk</span></p>\n\t\t\t\t\t<p>`,classes:["supporter_modal"],buttons:[{label:"CLOSE",classes:[],callback:e=>{e()}}]}),xa.SePlay("supporter"),t.isgift||(document.body.classList.add("supporter"),document.body.classList.add("ceriad_exempt"),document.body.classList.add("ceriad_disabled"),Vs.disable(),localStorage.setItem("wasLastSupporter","Yes, that's it!"),document.cookie=`ceriad_exempt=1;max-age=31536000;domain=${_.domain}`,oo.expires=oo.hasSupporter?oo.expires+1e3*t.months*3600*24*30.5:Date.now()+1e3*t.months*3600*24*30.5,oo.hasSupporter=!0),oo.total=oo.total?oo.total+t.price:t.price,co()}function Mi(e,t){const n=document.createElement("input");document.body.appendChild(n),n.value=e,n.select(),document.execCommand("copy"),document.body.removeChild(n),Qt(`${t||`"${e}"`} copied!`)}function Di(e,t){const n=document.createElement("div");n.className=`shout ${e}`,n.innerText=t,xt("majorshouts").appendChild(n),setTimeout((()=>{n.remove()}),5e3),"ultra"===ot.video.graphics&&$l&&w.majorShoutStyles[e]&&w.majorShoutStyles[e]()}function Oi(e){if(!ot.volume.music)return;const t=xt("now_playing"),n=xt("now_playing_jp");t.innerHTML=`${_a[e].artist.toUpperCase()} - ${_a[e].name.toUpperCase()}`,n.innerHTML=`${_a[e].untranslatedArtist} - ${_a[e].untranslatedName}`,t.classList.remove("hidden"),null!=_a[e].untranslatedArtist&&null!=_a[e].untranslatedName&&n.classList.remove("hidden"),setTimeout((()=>{t.classList.add("hidden"),n.classList.add("hidden")}),5e3)}function Pi(e){xt("menus").setAttribute("data-menu-type",e)}function Hi(e,t){(Bi[Li].onexit||(()=>{}))(),Li=e,xt("menus").querySelectorAll("[data-menuview]").forEach((t=>{t.getAttribute("data-menuview")!==e&&(t.classList.contains("hidden")||(t.classList.add("hidden"),setTimeout((()=>{t.classList.contains("hidden")&&t.classList.add("thidden")}),666)))})),Bi[e].back||xt("back").classList.add("hidden"),xt("exit_electron").classList.toggle("hidden","home"!==e);const n=()=>{xt("menus").setAttribute("data-menu-type",e),xt("menus").querySelectorAll("[data-menuview]").forEach((t=>{t.getAttribute("data-menuview")===e&&(t.classList.remove("thidden"),t.getBoundingClientRect(),t.classList.remove("hidden"))})),Bi[e].back&&xt("back").classList.remove("hidden"),xt("header_text").innerHTML=Bi[e].header,xt("footer_text").innerHTML=Bi[e].footer,(Bi[e].onenter||(()=>{}))()};t?Qi(n):n(),gi.bindGuide(fi[e]||{})}Tn.ready((function(e){let t;Wi(!0),Hi("home"),xt("insiders_upsell_hide").addEventListener("click",(()=>{xt("insiders_upsell").classList.add("hiding"),localStorage.setItem("x_insiders_upsell_hidden","Yes3"),setTimeout((()=>{xt("insiders_upsell").classList.add("hidden")}),800)})),xt("roomlisting_refresh").addEventListener("click",(()=>{lr.loadListing(),xt("roomlisting_scroller").scrollTop=0})),xt("back").addEventListener("click",(function(e){Bi[Li].back&&((Bi[Li].onback||(()=>{}))(),Hi(Bi[Li].back))})),xt("exit_electron").addEventListener("click",(function(e){window.IS_ELECTRON&&_n({title:"EXIT TETR.IO?",msg:"",buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"EXIT",classes:["pri"],callback:e=>{Yi(),qi("see you next time!"),Os()}}]})})),xt("volume_tweak").addEventListener("click",(function(e){Hi("config_bgmtweak")})),xt("config_electron").addEventListener("click",(function(e){window.IS_ELECTRON&&(xt("electron_ver").innerHTML=CLIENT_VERSION,window.EMERGENCY_MODE&&xt("config_electron_emergency").classList.remove("hidden"),xt("electron_frameratelimit_1x").innerHTML=1*(fn.si().refreshRate||60)+" fps",xt("electron_frameratelimit_2x").innerHTML=2*(fn.si().refreshRate||60)+" fps",xt("electron_frameratelimit_4x").innerHTML=4*(fn.si().refreshRate||60)+" fps",xt("config_electron_vsync").classList.toggle("checked",!!window.VSYNC_ON),xt("config_electron_vsync").classList.toggle("hidden",!!window.VSYNC_LOCKED_ON),xt("config_electron_vsync_warning").classList.toggle("hidden",!!window.VSYNC_ON),xt("config_electron_frameratelimit").classList.toggle("hidden",!!window.VSYNC_ON||!!window.VSYNC_LOCKED_ON),xt("config_electron_autoupdate").classList.toggle("hidden",window.CLIENT_VERSION<=8||!navigator.platform.startsWith("Win")),Hi("config_electron"))})),xt("config_export").addEventListener("click",(function(e){const t=new Blob([JSON.stringify(ot)],{type:"application/json"}),n=document.createElement("a");n.download="config.ttc",n.href=(window.webkitURL||window.URL).createObjectURL(t),n.dataset.downloadurl=["application/json",n.download,n.href].join(":"),document.body.appendChild(n),n.click(),document.body.removeChild(n)})),xt("play_solo").addEventListener("click",(function(e){Hi("play1p")})),xt("sig_about").addEventListener("click",(function(e){Hi("about")})),xt("about_blog").addEventListener("click",(function(e){Gs("https://blog.osk.sh/")})),xt("about_issues").addEventListener("click",(function(e){Gs("https://github.com/tetrio/issues")})),xt("about_discord").addEventListener("click",(function(e){Gs("https://l.tetr.io/discord")})),xt("about_harddrop").addEventListener("click",(function(e){Gs("https://discord.gg/harddrop")})),xt("about_legal").addEventListener("click",(function(e){Gs("/about/")})),xt("about_support").addEventListener("click",(function(e){Gs("/about/support/")})),xt("about_patchnotes").addEventListener("click",(function(e){Gs("/about/patchnotes/")})),xt("about_music").addEventListener("click",(function(e){Ui((e=>{xa.BgmPlaySmoothlyWithRandom(e)}))})),xt("sound_test").addEventListener("click",(function(e){Wi(!1),Hi("none"),xa.BgmFadeOut(.5),Aa.Start()})),xt("about_supporter").addEventListener("click",(function(e){Ii()})),xt("about_merch").addEventListener("click",(function(e){Gs("https://merch.tetr.io/")})),xt("about_desktop").addEventListener("click",(function(e){Gs("/about/desktop/")})),xt("footer_github").addEventListener("click",(function(e){Gs("https://github.com/tetrio/issues")})),xt("footer_discord").addEventListener("click",(function(e){Gs("https://l.tetr.io/discord")})),xt("footer_supporter").addEventListener("click",(function(e){Ii()})),xt("footer_twitter").addEventListener("click",(function(e){Gs("https://x.com/tetriogame")})),xt("footer_desktop").addEventListener("click",(function(e){Gs("/about/desktop/")})),xt("game_40l").addEventListener("click",(function(e){Hi("40l")})),xt("game_blitz").addEventListener("click",(function(e){Hi("blitz")})),xt("game_zen").addEventListener("click",(function(e){Hi("zen")})),xt("game_custom").addEventListener("click",(function(e){Hi("custom")})),xt("start_40l").addEventListener("click",(()=>{Ys.play40L({song:xt("music_picker_40l").getAttribute("data-song")}),ei(),xt("music_picker_results").setAttribute("data-song",xt("music_picker_40l").getAttribute("data-song")),xt("music_picker_results").innerHTML=xt("music_picker_40l").innerHTML})),xt("start_blitz").addEventListener("click",(()=>{Ys.playBlitz({song:"hyper-velocity"}),ei()})),xt("start_zen").addEventListener("click",(()=>{Ys.playZen({}),ei()})),xt("zen_destroy").addEventListener("click",(()=>{_n({title:"DESTROY ZEN PROGRESS?",msg:'you\'ll be reset to LEVEL 1 and 0 SCORE, with an empty board to start anew.</p><p class="modal_also">this cannot be undone.',classes:["crash_modal"],buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"RESET ZEN",classes:["pri"],callback:e=>{e(),_n({title:"REALLY DESTROY ZEN PROGRESS?",msg:"ARE YOU SURE YOU WON'T REGRET DESTROYING YOUR ZEN PROGRESS???",classes:["crash_modal","shudder"],buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"I'M CERTAIN",classes:["pri"],callback:e=>{Ys.resetZen(),Ys.saveZen(Ys.getZen()),nn("it's gone!"),e()}}]})}}]})})),xt("start_custom").addEventListener("click",(()=>{Ys.playCustom({song:xt("music_picker_custom").getAttribute("data-song")}),ei(),xt("music_picker_results").setAttribute("data-song",xt("music_picker_custom").getAttribute("data-song")),xt("music_picker_results").innerHTML=xt("music_picker_custom").innerHTML})),xt("start_results").addEventListener("click",(()=>{Ys.playAgain({song:xt("music_picker_results").getAttribute("data-song")}),ei()})),xt("sig_config").addEventListener("click",(function(e){Hi("config")})),document.addEventListener("click",(function(e){e.target.closest("[data-hit]")&&xa.SePlay(`menu${e.target.closest("[data-hit]").getAttribute("data-hit")}`)})),document.addEventListener("mouseover",(function(e){e.target.closest("[data-hover]")&&e.target.closest("[data-hover]").getAttribute("data-hover")&&(!t||!t.closest("[data-hover]")||t&&t.closest("[data-hover]").outerHTML!==e.target.closest("[data-hover]").outerHTML)&&xa.SePlay(`menu${e.target.closest("[data-hover]").getAttribute("data-hover")}`),t=e.target.closest("[data-hover]")})),document.addEventListener("click",(function(e){e.target.classList.contains("collapse_target")&&e.target.closest(".collapsible")&&e.target.closest(".collapsible").classList.toggle("collapsed")})),document.addEventListener("click",(function(e){e.target.classList.contains("music_picker")&&Ui((t=>{if(e.target.setAttribute("data-song",t),_a[t])e.target.innerHTML=`${_a[t].artist.toLowerCase()} - ${_a[t].name.toLowerCase()}`;else switch(t){case"RANDOM":e.target.innerHTML="RANDOM";break;case"RANDOMcalm":e.target.innerHTML="RANDOM: CALM";break;case"RANDOMbattle":e.target.innerHTML="RANDOM: BATTLE";break;default:e.target.innerHTML=t}e.target.dispatchEvent(new Event("input"))}))})),document.addEventListener("click",(function(e){e.target.classList.contains("replayid")&&Mi(`https://${_.domain}/#${e.target.textContent}`,"replay link")})),document.addEventListener("click",(function(e){e.target.classList.contains("copyable")&&(Mi(e.target.dataset.text,e.target.dataset.displayname),e.preventDefault())})),document.addEventListener("click",(function(e){e.target.classList.contains("tab")&&(vt(`.tab[data-scope="${e.target.getAttribute("data-scope")}"]`).forEach((e=>{e.classList.remove("pressed"),e.classList.remove("active")})),e.target.classList.add("pressed"),e.target.classList.add("active"),vt(`.tab_content[data-scope="${e.target.getAttribute("data-scope")}"]`).forEach((e=>{e.classList.add("hidden")})),e.target.getAttribute("data-target")&&xt(e.target.getAttribute("data-target")).classList.remove("hidden"))})),xt("list_request_back").addEventListener("click",(function(e){gi.pop(),xt("list_request").classList.add("hidden")})),document.addEventListener("click",(function(e){if(e.target.classList.contains("panel_option")){e.target.closest(".panel_optionset").querySelectorAll(".panel_option").forEach((e=>{e.classList.remove("selected")})),e.target.classList.add("selected");Ai.fetchZenConfig()[e.target.getAttribute("data-key")]=e.target.getAttribute("data-value"),Ai&&Ai.pullZenConfig()}})),document.addEventListener("input",(function(e){if(e.target.classList.contains("panel_input")){Ai.fetchZenConfig()[e.target.getAttribute("data-key")]="number"===e.target.getAttribute("type")?parseFloat(e.target.value):e.target.value,Ai&&Ai.pullZenConfig()}})),setInterval((()=>{if(0===Ji)return;const e=new Date(Date.now());e.setUTCHours(0,0,0,0),e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+6)%7);const t=new Date(Date.now());t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()+7-(t.getUTCDay()+6)%7);const n=Date.now()-e.getTime()<=144e5,s=t.getTime()-Date.now()<=864e5,i=n?`LEADERBOARD CYCLED <b>${Bt(e.getTime()).toUpperCase()}</b> AGO`:`LEADERBOARD CYCLES IN <b>${Bt(t.getTime()).toUpperCase()}</b>`;xt("tetra_zenithtimer").innerHTML=i,xt("zenith_zenithtimer").innerHTML=i,xt("zenithresults_zenithtimer").innerHTML=i,xt("zenith_zenithtimer").classList.toggle("hidden",!n&&!s),xt("zenithresults_zenithtimer").classList.toggle("hidden",!n&&!s)}),500),_.league_season.next_at?setInterval((()=>{if(0===Ji)return;const e=_.league_season.ranked?`SEASON ${_.league_season.current} END`:`SEASON ${_.league_season.next} START`,t=Date.now()>_.league_season.next_at;xt("tetra_tltimer").innerHTML=t?`${e}ED <b>${Bt(_.league_season.next_at).toUpperCase()} AGO</b>`:`${e}S <b>${Bt(_.league_season.next_at).toUpperCase()} FROM NOW</b>`,xt("league_tltimer").innerHTML=t?`${e}ED <b>${Bt(_.league_season.next_at).toUpperCase()} AGO</b>`:`${e}S <b>${Bt(_.league_season.next_at).toUpperCase()} FROM NOW</b>`}),500):(xt("tetra_tltimer").classList.add("hidden"),xt("league_tltimer").classList.add("hidden")),document.body.classList.toggle("zenith_duoisfree",_.zenith_duoisfree),xt("league_tltimer").addEventListener("click",(function(e){_n({msg:'\n\t\t\t\t<img src="/res/crystalpntop.png" style="position: absolute; top: 0; left: 0; width: 100%; z-index: -1;" />\n\t\t\t\t<h2 style="font-size: 1.5rem; text-align: center; margin-top: -1.7rem;">GET READY FOR</h2>\n\t\t\t\t<h1 style="font-weight: 900;text-align: center;font-size: 3rem;padding-top: 0.2rem;margin-bottom: 1rem;background:linear-gradient(to right, #FFB42B, #FF6993);background-clip:text;text-fill-color:transparent;-webkit-background-clip:text;-webkit-text-fill-color:transparent;">SEASON 2</h2>\n\t\t\t\t<p style="font-family: C; font-size: 1.1rem; margin: 1rem 9rem;">Thank you for playing TETR.IO! After over four years, Season 1 of Tetra League is coming to a close. We\'ve got something exciting coming, so please stay tuned for it!</p>\n\t\t\t\t<p style="font-family: C; font-size: 1.1rem; margin: 1rem 9rem;">You can continue to play Tetra League until the end of the Season, at which point your final standing (if you are ranked) will be memorialized on your profile!</p>\n\n\t\t\t\t<div style="text-align: center;">\n\t\t\t\t\t<span style="font-family: CC; font-size: 1.1rem; color: #505c8c; vertical-align: 200%; display: inline-block;">Earn a badge that reflects your final placement!</span>\n\t\t\t\t\t<img src="/res/badges/tls1/c+.png" style="height: 5rem; margin: 0.75rem 0.4rem;" />\n\t\t\t\t\t<img src="/res/badges/tls1/s.png" style="height: 5.3rem; margin: 0.6rem 0.4rem;" />\n\t\t\t\t\t<img src="/res/badges/tls1/x.png" style="height: 5.8rem; margin: 0.35rem 0.4rem;" />\n\t\t\t\t\t<img src="/res/badges/tls1/4.png" style="height: 6.5rem; margin: 0 0.4rem;" />\n\t\t\t\t</div>\n\n\t\t\t\t<div style="margin: 1rem -1rem; padding: 1rem 10rem; background-color: #0006; font-family: C;">\n\t\t\t\t\t<div style="color: #505c8c; font-weight: 900; font-size: 1.2rem; margin-bottom: 0.5rem;">TIMELINE</div>\n\t\t\t\t\t<p style="font-size: 1.1rem;"><span style="display: inline-block; text-align: center; background: #d55275; color: #FFF; font-weight: 900; font-size: 1.2rem; padding: 0.3rem 0; clip-path: polygon(0 0, 100% 8%, 100% 92%, 0 100%); width: 1.2rem; margin-right: 0.3rem;">1</span><b>July 26th</b>: Season 1 ends</p>\n\t\t\t\t\t<p style="font-size: 1.1rem;"><span style="display: inline-block; background: #0000; color: #FFF; font-weight: 900; font-size: 1.2rem; padding: 0.3rem 0; border-radius: 1rem; width: 1.2rem; margin-right: 0.3rem;"></span>July 26th through August 2nd: Season 1 Post-Season (unranked, Season 1 rules)</p>\n\t\t\t\t\t<p style="font-size: 1.1rem;"><span style="display: inline-block; text-align: center; background: #ff3f31; color: #FFF; font-weight: 900; font-size: 1.2rem; padding: 0.3rem 0; clip-path: polygon(0 0, 100% 8%, 100% 92%, 0 100%); width: 1.2rem; margin-right: 0.3rem;">2</span><b>August 2nd</b>: Season 2 rules are published</p>\n\t\t\t\t\t<p style="font-size: 1.1rem;"><span style="display: inline-block; background: #0000; color: #FFF; font-weight: 900; font-size: 1.2rem; padding: 0.3rem 0; border-radius: 1rem; width: 1.2rem; margin-right: 0.3rem;"></span>August 2nd through August 16th: Season 2 Pre-Season (unranked, Season 2 rules)</p>\n\t\t\t\t\t<p style="font-size: 1.1rem;"><span style="display: inline-block; text-align: center; background: #ff5a31; color: #FFF; font-weight: 900; font-size: 1.2rem; padding: 0.3rem 0; clip-path: polygon(0 0, 100% 8%, 100% 92%, 0 100%); width: 1.2rem; margin-right: 0.3rem;">3</span><b>August 16th</b>: Season 2 begins</p>\n\t\t\t\t</div>\n\t\t\t',classes:["patchnotes","wide_modal"],buttons:[{label:"GOT IT!",classes:[],callback:e=>{e()}}]})})),At("#enter_matchmaking p").innerHTML=_.league_season.ranked?"LEAVING EARLY IS PUNISHED":"UNRANKED"})),window.SHOW_SUPPORTER_DIALOG=(e="SUPPORT TETR.IO")=>{Ii(e)};let Ri=!1;function Wi(e){e?(Ri||((Bi[Li].onreenter||(()=>{}))(),no(),Ri=e),xt("menus").classList.remove("hidden")):(Ri&&((Bi[Li].onexit||(()=>{}))(),so(),Ri=e,Vs.unmountGroup("main")),xt("menus").classList.add("hidden"))}function Ni(){xt("list_request").classList.contains("hidden")||(gi.pop(),xt("list_request").classList.add("hidden"))}let $i=()=>{};function Gi(e,t,n){$i=t;const s=xt("list_request_scroller");for(;s.firstChild;)s.removeChild(s.firstChild);e.forEach((e=>{const t=document.createElement("div");if(t.classList.add("scroller_item"),t.classList.add("ns"),t.setAttribute("data-id",e.id),t.setAttribute("data-hover","tap"),t.setAttribute("data-hit","click"),t.setAttribute("data-keybind",e.key||"X-NOKEY"),s.appendChild(t),e.image){const n=document.createElement("img");n.src=e.image,t.appendChild(n),t.classList.add("has_image")}e.classes&&t.classList.add(...e.classes),e.attributes&&Object.keys(e.attributes).forEach((n=>{t.setAttribute(n,e.attributes[n])}));const n=document.createElement("h1");if(n.innerHTML=e.name,t.appendChild(n),e.description){const n=document.createElement("p");n.innerHTML=e.description,t.appendChild(n),t.classList.add("has_description")}t.addEventListener("click",(function(e){gi.pop(),xt("list_request").classList.add("hidden"),$i(t.getAttribute("data-id"))}))})),xt("list_request_back").classList.toggle("hidden",!n),xt("list_request").classList.remove("hidden"),gi.push(),gi.bindGuide(fi.list_request)}function Ui(e){const t=[{id:"RANDOM",name:"RANDOM",description:"pick a completely random BGM for me"},{id:"RANDOMcalm",name:"RANDOM: CALM",description:"pick a random calmer BGM for me"},{id:"RANDOMbattle",name:"RANDOM: BATTLE",description:"pick a random intenser battle BGM for me"}];Object.keys(_a).forEach((e=>{_a[e].hidden||t.push({id:e,name:_a[e].name,description:`${_a[e].artist} - ${_a[e].genre}`})})),Gi(t,(t=>{e(t)}),!0)}function Xi(e){Gi([{id:"retry",name:"RETRY",key:"retry"},{id:"back",name:"BACK TO TITLE",key:"exit"}],(t=>{e(t)}))}function ji(){Wi(!1),Hi("none"),xa.BgmKill(),Ai&&(Ai.end(),Ai.destroy(),Ai=void 0)}function qi(e){xt("afterloader_text").innerHTML=e,xt("afterloader").classList.remove("hidden"),document.activeElement.blur()}function Ki(){xt("afterloader").classList.add("hidden")}let Vi=0;function Yi(){Vi=(new Date).getTime(),xt("kuro").classList.remove("hidden"),document.activeElement.blur()}function Qi(e){const t=500-((new Date).getTime()-Vi);t<1?e():setTimeout((()=>{e()}),t)}function Zi(){Qi((()=>{xt("kuro").classList.add("hidden")}))}let Ji=0,eo=null,to=!1;function no(){0===Ji&&(document.body.classList.remove("ingame"),document.body.getBoundingClientRect(),eo&&clearTimeout(eo),to&&gi.engage()),Ji++}function so(){Ji=Math.max(0,Ji-1),0===Ji&&xt("preload").classList.contains("hidden")&&(eo&&clearTimeout(eo),eo=setTimeout((()=>{0===Ji&&(document.body.classList.add("ingame"),io())}),1e3),to=gi.isEngaged(),gi.disengage(),setTimeout((()=>{0===Ji&&xt("replaytools").classList.contains("hidden")&&!document.body.classList.contains("inzenith")&&Vs.mountGroup("ingame")}),1))}function io(){Math.random()<.5?(xt("enter_matchmaking").insertAdjacentElement("beforebegin",Vs.getElement("league-lb")),Vs.getElement("league-lb").classList.remove("ceriad_bg_r"),Vs.getElement("league-lb").classList.add("ceriad_bg_rt"),Vs.getElement("league-lb").classList.remove("ceriad_mt")):(xt("enter_matchmaking").insertAdjacentElement("afterend",Vs.getElement("league-lb")),Vs.getElement("league-lb").classList.remove("ceriad_bg_rt"),Vs.getElement("league-lb").classList.add("ceriad_bg_r"),Vs.getElement("league-lb").classList.add("ceriad_mt")),Math.random()<.33?xt("results_starter_anchor").insertAdjacentElement("beforebegin",Vs.getElement("soloresults-lb")):Math.random()<.67?xt("results_starter_anchor").insertAdjacentElement("afterend",Vs.getElement("soloresults-lb")):xt("results_replayinfo_anchor").insertAdjacentElement("afterend",Vs.getElement("soloresults-lb")),xt("roomview").classList.toggle("ceriad_right_aligned_experiment",Math.random()>=.5)}Tn.ready((function(e){document.addEventListener("keydown",n,!1),document.addEventListener("keyup",s,!1),document.addEventListener("gpdown",n,!1),document.addEventListener("gprepeat",n,!1),document.addEventListener("gpup",s,!1);const t=new Set;function n(e){0!==Ji&&xt("social").classList.contains("hiding")&&xt("afterloader").classList.contains("hidden")&&e.target!==xt("ingame_chat_input")&&(Object.keys(rt).forEach((n=>{if(rt[n].includes(yt(e))&&n.startsWith("menu")){if(("menuConfirm"===n||"menuBack"===n)&&(e.repeat||"gprepeat"===e.type||t.has(n)))return;if(["input","textarea"].includes(document.activeElement.tagName.toLowerCase()))return void(gi.isEngaged()&&"menuConfirm"===n&&document.activeElement.blur());gi.action(n.substring(4).toLowerCase()),e.stopPropagation(),e.preventDefault(),gi.isEngaged()||(xa.SePlay("ribbon_on"),gi.engage())}})),Object.keys(rt).forEach((n=>{rt[n].includes(yt(e))&&t.add(n)})))}function s(e){Object.keys(rt).forEach((n=>{rt[n].includes(yt(e))&&t.delete(n)}))}document.addEventListener("mousemove",(function(e){0!==Ji&&gi.isEngaged()&&(xa.SePlay("ribbon_off"),gi.disengage())}),{passive:!0}),document.addEventListener("wheel",(function(e){0!==Ji&&gi.isEngaged()&&(xa.SePlay("ribbon_off"),gi.disengage())}),{passive:!0});let i=!0,o=0;window.addEventListener("beforeunload",(function(e){if(window.IS_ELECTRON)if(Fn)Ja&&Ja.isConnected()&&Ja.abort();else{if(i)return i=!1,o=0,_n({title:"EXIT TETR.IO?",msg:"",onskip:()=>{o=0,i=!0},buttons:[{label:"CANCEL",classes:[],callback:e=>{o=0,i=!0,e()}},{label:"EXIT",classes:["pri"],callback:e=>{i=!0,o=0,Ja&&Ja.isConnected()&&Ja.abort(),Yi(),qi("see you next time!"),Os()}}]}),e.preventDefault(),e.returnValue="Exit TETR.IO?","Exit TETR.IO?";if(!(++o>=5))return e.preventDefault(),e.returnValue="Exit TETR.IO?","Exit TETR.IO?";Ja&&Ja.isConnected()&&Ja.abort(),Os(),Yi(),qi("see you next time!")}else{if(!Fn&&document.body.classList.contains("ingame_phys")&&xt("menus").classList.contains("hidden")&&0===Ji)return e.preventDefault(),e.returnValue="You are still ingame. Closing this tab will disconnect you. You will lose the game and may receive a penalty!","You are still ingame. Closing this tab will disconnect you. You will lose the game and may receive a penalty!";Ja&&Ja.isConnected()&&Ja.abort()}}));let a,r=window.location.hash;window.addEventListener("hashchange",(function(e){window.location.hash.length<=1||"#google_vignette"===window.location.hash||"#google_vignette"===r?r=window.location.hash:(window.location.href=`/${window.location.hash}`,Fn=!0,window.location.reload())})),window.addEventListener("focus",(function(e){document.body.classList.remove("nofocus"),pl(),a&&(clearTimeout(a),a=null)})),window.addEventListener("blur",(function(e){if(document.body.classList.contains("idlemouse")&&document.activeElement&&"IFRAME"===document.activeElement.tagName){const e=[".ceriad"];let t=null;for(const n of e)if(t=document.activeElement?.closest?.(n),t)break;if(t){const e=document.activeElement;return console.warn(`[Ceriad] Captured abusive ceriad in ID ${t.id}. Ceriad source: ${e.getAttribute("src")}. It shall be obliterated.`),Cn.get("https://kagari.network/ceriad-abusereport",{src:e.src,id:t.id},{parse:!1,accept:"text/plain"}).then((()=>{}),(()=>{})),void setTimeout((()=>{e.remove(),window.focus()}),0)}}document.body.classList.add("nofocus"),a&&(clearTimeout(a),a=null),a=setTimeout((()=>{cl(),a=null}),6e5)})),window.addEventListener("visibilitychange",(function(e){!1!==ot.volume.oof&&("visible"===document.visibilityState?xa.BgmSetVolume(ot.volume.music):xa.BgmSetVolume(0)),"visible"===document.visibilityState?Jl():Jl(10)})),xt("ingame_chat_input").addEventListener("focusin",(e=>document.body.classList.add("chatfocus"))),xt("ingame_chat_input").addEventListener("focusout",(function(e){if(xt("ingame_chat").contains(e.relatedTarget))return e.stopPropagation(),e.preventDefault(),this.focus();document.body.classList.remove("chatfocus")})),xt("menus").addEventListener("dragover",(e=>{e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}),!1);let l,c="";function p(e){"results"!==Li||xt("menus").classList.contains("hidden")||xt("results").classList.contains("isreplay")||1!==Ji||Object.keys(rt).forEach((t=>{rt[t].includes(yt(e))&&"retry"===t&&xt("start_results").click()}))}function h(e){xt("list_request").classList.contains("hidden")||Object.keys(rt).forEach((t=>{rt[t].includes(yt(e))&&xt("list_request").querySelectorAll(".scroller_item").forEach((e=>{e.getAttribute("data-keybind")===t&&e.click()}))}))}window.DEVHOOK_LOAD_REPLAY_RAW=e=>{Ys.loadReplay(e,{back:"home",isClientSide:!0}),xt("results").classList.add("fakereplay"),c=data._id},xt("menus").addEventListener("drop",(e=>{e.stopPropagation(),e.preventDefault();const t=e.dataTransfer.files[0];if(!t)return;if(!/\.tt(?:[rpc]|rm)(?:\.json)?$/.test(t.name))return void en("TETR.IO cannot open this file");if(Ja&&!Ja.isBackground())return void en("you cannot drop a file onto TETR.IO while connected to live servers");if(document.body.classList.contains("ingame"))return void en("you cannot drop a file onto TETR.IO while ingame");const n=new FileReader;n.onload=()=>{Ki();try{const e=JSON.parse(n.result);/\.ttr(?:\.json)?$/.test(t.name)?(Ys.loadReplay(e,{back:"home"}),c=e.id,c&&Cn.get(`/api/games/${encodeURIComponent(e.id)}/exists`).then((e=>{e.exists||xt("results").classList.add("fakereplay")}),(e=>{}))):/\.ttrm$/.test(t.name)?(Ys.loadReplay(e,{back:"home"}),c=e.id,c&&Cn.get(`/api/games/${encodeURIComponent(e.id)}/exists`).then((e=>{e.exists||xt("multilogview").classList.add("noreplay")}),(e=>{}))):/\.ttp$/.test(t.name)?(Ys.setGameOpts(e),nn("custom game loaded!")):/\.ttc$/.test(t.name)&&_n({title:"IMPORT CONFIG?",msg:'are you sure you wish to import this CONFIG file? it will override your current CONFIG.</p><p class="modal_warning">DO NOT IMPORT A CONFIG YOU DO NOT TRUST!</p><p class="modal_also">your current CONFIG will be lost.',buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"IMPORT",classes:["sec"],callback:t=>{t(),Object.assign(ot,e),Ct(),mt(),nn("config loaded. you must hit F5 for all the changes to properly take effect!"),Ja&&Ja.isConnected()&&Ja.updateHandling()}}]})}catch(e){en("file load failed!"),console.log(e)}},qi("loading file"),n.readAsText(t)}),!1),document.addEventListener("keydown",(e=>{9===e.keyCode&&e.preventDefault()}),!1),document.addEventListener("keydown",p,!1),document.addEventListener("gpdown",p,!1),document.addEventListener("keydown",h,!1),document.addEventListener("gpdown",h,!1);const d=function(e){l?clearTimeout(l):document.body.classList.remove("idlemouse"),l=setTimeout((()=>{document.body.classList.add("idlemouse"),l=null}),5e3),xt("ceriad-menus-persistent-mpu")&&xt("ceriad-menus-persistent-mpu").classList.toggle("shaded",e.clientX>=316),e.clientX>=316?xt("ceriad-menus-persistent-mpu").classList.remove("btmlock"):xt("back").classList.contains("hidden")&&!document.body.classList.contains("electron")||xt("ceriad-menus-persistent-mpu").classList.add("btmlock")};document.addEventListener("mousemove",d),document.addEventListener("click",d),At("style.darkreader")&&Qt({msg:"you seem to be using the extension DARK READER. this extension WILL mess with the TETR.IO interface, and may cause performance issues. please consider disabling it!",color:"#FFD800",icon:"warning",timeout:15e3})}));const oo={hasSupporter:!1,expires:0,total:0};Tn.ready((function(e){xt("config_account").addEventListener("click",(function(e){qi("requesting account data");const t=`SESS-${Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}`;Cn.get("/api/server/environment",void 0,{headers:{"X-Session-ID":t}}).then((async e=>{Cn.get("/api/users/me",void 0,{headers:{"X-Session-ID":t,"X-Connection-ID":await bn.esc(Uint8Array.from(atob(e.vx),(e=>e.charCodeAt(0))),fn.get())}}).then((e=>{xt("config_account_username").value=e.user.username,xt("config_account_username_field").value=e.user.username.toUpperCase(),xt("config_account_avatar").innerHTML=e.user.avatar_revision?`<img class="avatar" src="/user-content/avatars/${e.user._id}.jpg?rv=${e.user.avatar_revision}" /> ${e.user.username.toUpperCase()}`:`<img class="avatar" src="${Ot(e.user._id)}" /> No avatar set`,xt("config_account_banner_link").setAttribute("href",`https://${_.ch_domain}/u/${e.user.username}`),xt("config_account_bio_link").setAttribute("href",`https://${_.ch_domain}/u/${e.user.username}`),xt("config_account_banner").innerHTML=e.user.banner_revision?`<img class="banner" src="/user-content/banners/${e.user._id}.jpg?rv=${e.user.banner_revision}" /> ${e.user.username.toUpperCase()}`:'<img class="banner" src="/res/banner.png" /> No banner set',xt("config_account_bio").value=e.user.bio||"",e.user.email?(xt("config_account_email_warning").classList.add("hidden"),xt("config_account_email").value=e.user.email):(xt("config_account_email_warning").classList.remove("hidden"),xt("config_account_email").value=""),xt("config_account_privacy_showwon").classList.toggle("checked",!1!==e.user.privacy_showwon),xt("config_account_privacy_showplayed").classList.toggle("checked",!1!==e.user.privacy_showplayed),xt("config_account_privacy_showgametime").classList.toggle("checked",!1!==e.user.privacy_showgametime),xt("config_account_privacy_showcountry").classList.toggle("checked",!1!==e.user.privacy_showcountry),xt("config_account_privacy_mmchat").classList.toggle("checked",!1!==e.user.privacy_mmchat),xt("config_account_country").innerHTML=`<img class="flag" src="/res/flags/${(e.user.country||"xx").toLowerCase()}.svg" /> ${Un[e.user.country||"XX"]}`,oo.hasSupporter=e.user.supporter,oo.expires=e.user.supporter_expires,oo.total=e.user.total_supported,co();for(const[t,n]of Object.entries(e.user.connections))At(`#account_connection_${t}>p`).innerText=n.username,xt(`account_connection_${t}`).classList.add("linked"),xt(`account_connection_${t}_link`).classList.add("hidden"),xt(`account_connection_${t}_remove`).classList.remove("hidden"),xt(`account_connection_${t}_show`).classList.toggle("checked",n.public);xt("config_account_totp_label").innerHTML=e.user.totp.enabled?"ENABLED":"NOT ENABLED",xt("config_account_totp_tokens").innerHTML=e.user.totp.enabled?`you have <b>${e.user.totp.codes_remaining}</b>/8 recovery codes remaining.`:"",xt("config_account_totp_enable").classList.toggle("hidden",!!e.user.totp.enabled),xt("config_account_totp_resetrecovery").classList.toggle("hidden",!e.user.totp.enabled),xt("config_account_totp_disable").classList.toggle("hidden",!e.user.totp.enabled),document.body.classList.toggle("uses2fa",!!e.user.totp&&!!e.user.totp.enabled),vt(".config_account_privacy_privatemode").forEach((t=>{t.classList.toggle("pressed",t.id===`config_account_privacy_privatemode_${e.user.privacy_privatemode||"public"}`)})),vt(".config_account_privacy_status_shallow").forEach((t=>{t.classList.toggle("pressed",t.id===`config_account_privacy_status_shallow_${e.user.privacy_status_shallow||"everyone"}`)})),xt("config_account_privacy_status_deep_friends").classList.toggle("disabled","nobody"===e.user.privacy_status_shallow),xt("config_account_privacy_status_deep_everyone").classList.toggle("disabled",["nobody","friends"].includes(e.user.privacy_status_shallow)),vt(".config_account_privacy_status_deep").forEach((t=>{t.classList.toggle("pressed",t.id===`config_account_privacy_status_deep_${e.user.privacy_status_deep||"everyone"}`)})),xt("config_account_privacy_status_exact_friends").classList.toggle("disabled","nobody"===e.user.privacy_status_deep),xt("config_account_privacy_status_exact_everyone").classList.toggle("disabled",["nobody","friends"].includes(e.user.privacy_status_deep)),vt(".config_account_privacy_status_exact").forEach((t=>{t.classList.toggle("pressed",t.id===`config_account_privacy_status_exact_${e.user.privacy_status_exact||"friends"}`)})),vt(".config_account_privacy_dm").forEach((t=>{t.classList.toggle("pressed",t.id===`config_account_privacy_dm_${e.user.privacy_dm||"everyone"}`)})),vt(".config_account_privacy_invite").forEach((t=>{t.classList.toggle("pressed",t.id===`config_account_privacy_invite_${e.user.privacy_invite||"friends"}`)})),Ki(),Hi("config_account")}),(e=>{Ki(),sn(e)}))}),(e=>{Ki(),sn(e)}))})),xt("config_account_supporter_support").addEventListener("click",(function(e){Ii()})),xt("config_account_logout").addEventListener("click",(function(e){document.body.classList.contains("trapped")||"Attempting to bypass a ban will escalate it to a permanent ban."===localStorage.getItem("trapped")?_n({title:"AS A STERN REMINDER",msg:'IF YOU HAVE BEEN SILENCED, RESTRICTED OR OTHERWISE BANNED, YOU MAY NEVER SWITCH TO ANOTHER ACCOUNT TO EVADE THE BAN. THIS INCLUDES SWITCHING TO AN ANONYMOUS ACCOUNT. EVADING A BAN MAKES IT PERMANENT.</p><p class="modal_warning">exceptions apply if the ban was not meant for you, or when logging out of an alternate account. for more info, read the <a href="/about/rules/" target="_blank">community rules</a>.',classes:["crash_modal","noclickout"],buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"I'M NOT EVADING!",classes:["pri"],callback:e=>{Yi(),qi("see you next time!"),bn.logout(),Tn.update(!0)}}]}):_n({title:"LOG OUT?",msg:`log out from <span class="inline_self">${xt("config_account_username_field").value}</span>?`,buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"LOG OUT",classes:["pri"],callback:e=>{Yi(),qi("see you next time!"),bn.logout(),Tn.update(!0)}}]})})),xt("config_account_logoutall").addEventListener("click",(function(e){document.body.classList.contains("trapped")||"Attempting to bypass a ban will escalate it to a permanent ban."===localStorage.getItem("trapped")?_n({title:"AS A STERN REMINDER",msg:'IF YOU HAVE BEEN SILENCED, RESTRICTED OR OTHERWISE BANNED, YOU MAY NEVER SWITCH TO ANOTHER ACCOUNT TO EVADE THE BAN. THIS INCLUDES SWITCHING TO AN ANONYMOUS ACCOUNT. EVADING A BAN MAKES IT PERMANENT.</p><p class="modal_warning">exceptions apply if the ban was not meant for you, or when logging out of an alternate account. for more info, read the <a href="/about/rules/" target="_blank">community rules</a>.',classes:["crash_modal","noclickout"],buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"I'M NOT EVADING!",classes:["pri"],callback:e=>{Yi(),qi("logging out all"),Cn.post("/api/users/cycle").then((e=>{qi("see you next time!"),bn.logout(),Tn.update(!0)}),(e=>{Ki(),sn(e)}))}}]}):_n({title:"LOG OUT ALL?",msg:`log out all devices logged into <span class="inline_self">${xt("config_account_username_field").value}</span>, including this one? this will disconnect you everywhere - use it if you forgot to log out somewhere.`,buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"LOG OUT ALL",classes:["sec"],callback:e=>{Yi(),qi("logging out all"),Cn.post("/api/users/cycle").then((e=>{qi("see you next time!"),bn.logout(),Tn.update(!0)}),(e=>{Ki(),sn(e)}))}}]})})),xt("config_account_password_save").addEventListener("click",(function(e){const t=xt("config_account_password").value,n=xt("config_account_password_again").value;t?t===n?bn.requestPassword(((e,n)=>{qi("saving new account data"),Cn.post("/api/users/setPassword",{old:e,new:t,totp:n}).then((e=>{xt("config_account_password").value="",xt("config_account_password_again").value="",nn("password changed!"),qi("see you next time!"),bn.logout(),Tn.update(!0)}),(e=>{Ki(),sn(e)}))})):en("those passwords don't match"):en("you must enter a new password")})),xt("config_account_privacy_showwon").addEventListener("click",(function(e){xt("config_account_privacy_showwon").classList.toggle("checked")})),xt("config_account_privacy_showplayed").addEventListener("click",(function(e){xt("config_account_privacy_showplayed").classList.toggle("checked")})),xt("config_account_privacy_showgametime").addEventListener("click",(function(e){xt("config_account_privacy_showgametime").classList.toggle("checked")})),xt("config_account_privacy_showcountry").addEventListener("click",(function(e){xt("config_account_privacy_showcountry").classList.toggle("checked")})),xt("config_account_privacy_mmchat").addEventListener("click",(function(e){xt("config_account_privacy_mmchat").classList.toggle("checked")})),xt("config_account_privacy_privatemode_private").addEventListener("click",(function(e){vt(".config_account_privacy_privatemode").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)}))})),xt("config_account_privacy_privatemode_public").addEventListener("click",(function(e){vt(".config_account_privacy_privatemode").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)}))})),xt("config_account_privacy_status_shallow_nobody").addEventListener("click",(function(e){vt(".config_account_privacy_status_shallow").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)})),xt("config_account_privacy_status_deep_friends").classList.add("disabled"),xt("config_account_privacy_status_deep_everyone").classList.add("disabled"),xt("config_account_privacy_status_deep_friends").classList.contains("pressed")&&xt("config_account_privacy_status_deep_nobody").click(),xt("config_account_privacy_status_deep_everyone").classList.contains("pressed")&&xt("config_account_privacy_status_deep_nobody").click()})),xt("config_account_privacy_status_shallow_friends").addEventListener("click",(function(e){vt(".config_account_privacy_status_shallow").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)})),xt("config_account_privacy_status_deep_friends").classList.remove("disabled"),xt("config_account_privacy_status_deep_everyone").classList.add("disabled"),xt("config_account_privacy_status_deep_everyone").classList.contains("pressed")&&xt("config_account_privacy_status_deep_friends").click()})),xt("config_account_privacy_status_shallow_everyone").addEventListener("click",(function(e){vt(".config_account_privacy_status_shallow").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)})),xt("config_account_privacy_status_deep_friends").classList.remove("disabled"),xt("config_account_privacy_status_deep_everyone").classList.remove("disabled")})),xt("config_account_privacy_status_deep_nobody").addEventListener("click",(function(e){vt(".config_account_privacy_status_deep").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)})),xt("config_account_privacy_status_exact_friends").classList.add("disabled"),xt("config_account_privacy_status_exact_everyone").classList.add("disabled"),xt("config_account_privacy_status_exact_friends").classList.contains("pressed")&&xt("config_account_privacy_status_exact_nobody").click(),xt("config_account_privacy_status_exact_everyone").classList.contains("pressed")&&xt("config_account_privacy_status_exact_nobody").click()})),xt("config_account_privacy_status_deep_friends").addEventListener("click",(function(e){vt(".config_account_privacy_status_deep").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)})),xt("config_account_privacy_status_exact_friends").classList.remove("disabled"),xt("config_account_privacy_status_exact_everyone").classList.add("disabled"),xt("config_account_privacy_status_exact_everyone").classList.contains("pressed")&&xt("config_account_privacy_status_exact_friends").click()})),xt("config_account_privacy_status_deep_everyone").addEventListener("click",(function(e){vt(".config_account_privacy_status_deep").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)})),xt("config_account_privacy_status_exact_friends").classList.remove("disabled"),xt("config_account_privacy_status_exact_everyone").classList.remove("disabled")})),xt("config_account_privacy_status_exact_nobody").addEventListener("click",(function(e){vt(".config_account_privacy_status_exact").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)}))})),xt("config_account_privacy_status_exact_friends").addEventListener("click",(function(e){vt(".config_account_privacy_status_exact").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)}))})),xt("config_account_privacy_status_exact_everyone").addEventListener("click",(function(e){vt(".config_account_privacy_status_exact").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)}))})),xt("config_account_privacy_dm_nobody").addEventListener("click",(function(e){vt(".config_account_privacy_dm").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)}))})),xt("config_account_privacy_dm_friends").addEventListener("click",(function(e){vt(".config_account_privacy_dm").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)}))})),xt("config_account_privacy_dm_everyone").addEventListener("click",(function(e){vt(".config_account_privacy_dm").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)}))})),xt("config_account_privacy_invite_nobody").addEventListener("click",(function(e){vt(".config_account_privacy_invite").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)}))})),xt("config_account_privacy_invite_friends").addEventListener("click",(function(e){vt(".config_account_privacy_invite").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)}))})),xt("config_account_privacy_invite_everyone").addEventListener("click",(function(e){vt(".config_account_privacy_invite").forEach((t=>{t.classList.toggle("pressed",t.id===e.target.id)}))})),xt("config_account_email_save").addEventListener("click",(function(e){const t=xt("config_account_email").value;if(!t)return void en("you must enter a new email");const n=(e,n)=>{qi("saving new account data"),Cn.post("/api/users/setEmail",{password:e,email:t,totp:n}).then((e=>{nn("email changed!"),xt("config_account_email_warning").classList.add("hidden"),Ki()}),(e=>{Ki(),sn(e)}))};xt("config_account_email_warning").classList.contains("hidden")?bn.requestPassword(n):n()})),xt("config_account_privacy_save").addEventListener("click",(function(e){qi("saving new account data"),Cn.post("/api/users/setPreferences",{privacy_showwon:xt("config_account_privacy_showwon").classList.contains("checked"),privacy_showplayed:xt("config_account_privacy_showplayed").classList.contains("checked"),privacy_showgametime:xt("config_account_privacy_showgametime").classList.contains("checked"),privacy_showcountry:xt("config_account_privacy_showcountry").classList.contains("checked"),privacy_mmchat:xt("config_account_privacy_mmchat").classList.contains("checked"),privacy_privatemode:xt("config_account_privacy_privatemode_private").classList.contains("pressed")?"private":"public",privacy_status_shallow:xt("config_account_privacy_status_shallow_nobody").classList.contains("pressed")?"nobody":xt("config_account_privacy_status_shallow_friends").classList.contains("pressed")?"friends":"everyone",privacy_status_deep:xt("config_account_privacy_status_deep_nobody").classList.contains("pressed")?"nobody":xt("config_account_privacy_status_deep_friends").classList.contains("pressed")?"friends":"everyone",privacy_status_exact:xt("config_account_privacy_status_exact_nobody").classList.contains("pressed")?"nobody":xt("config_account_privacy_status_exact_friends").classList.contains("pressed")?"friends":"everyone",privacy_dm:xt("config_account_privacy_dm_nobody").classList.contains("pressed")?"nobody":xt("config_account_privacy_dm_friends").classList.contains("pressed")?"friends":"everyone",privacy_invite:xt("config_account_privacy_invite_nobody").classList.contains("pressed")?"nobody":xt("config_account_privacy_invite_friends").classList.contains("pressed")?"friends":"everyone"}).then((e=>{nn("privacy preferences changed!"),Ki(),document.body.setAttribute("data-country-hidden",xt("config_account_privacy_showcountry").classList.contains("checked")?"no":"yes")}),(e=>{Ki(),sn(e)}))})),xt("config_account_country_change").addEventListener("click",(function(e){if(Ti())return;const t=[];Object.keys(Un).forEach((e=>{["XX","XM"].includes(e)||t.push({id:e,name:`<img class="flag" style="height: 0.88em; vertical-align: middle;" src="/res/flags/${e.toLowerCase()}.svg" /> <span class="i18n_mono">${Un[e]}</span>`,description:e})})),Gi(t,(e=>{qi("saving new account data"),Cn.post("/api/users/setCountry",{country:e}).then((t=>{xt("config_account_country").innerHTML=`<img class="flag" src="/res/flags/${e.toLowerCase()}.svg" /> ${Un[e]}`,document.body.setAttribute("data-country",e),nn("country changed!"),Ki()}),(e=>{Ki(),sn(e)}))}),!0)})),xt("config_account_username_save").addEventListener("click",(function(e){if(Ti())return;const t=xt("config_account_username").value;t&&t!==bn.username()?_n({title:"CHANGE USERNAME?",msg:`change your username from <span class="inline_self">${xt("config_account_username_field").value}</span> to <span class="inline_self">${zt(t.toUpperCase())}</span>? your previous username will be locked and redirect to your new username for 45 days, after which it will be freed. this process will try to rename everywhere it can, but some links may be broken.</p><p class="modal_also">you can do this only once a month.`,buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"CHANGE IT!",classes:["sec"],callback:e=>{e(),bn.requestPassword(((e,n)=>{qi("changing username"),Cn.post("/api/users/setUsername",{password:e,username:t.toLowerCase(),totp:n}).then((e=>{_n({title:"USERNAME CHANGED",msg:"your username was changed successfully. from now on, you must log in using your new username.",classes:["noclickout"],buttons:[{label:"GOT IT!",classes:["pri"],callback:e=>{Yi(),qi("see you next time!"),bn.changeUsername(t),Tn.update(!0)}}]}),Ki()}),(e=>{Ki(),sn(e)}))}))}}]}):en("you must enter a new username")}));let t=!1;async function n(e,s,i){const o=new FormData;o.append("file",s);try{return await Cn.post(`/api/upload/${e}?force=${i||t?"true":"false"}`,o)}catch(t){if("NSFW"!==t.error.msg)throw t;if(2===t.error.level)throw _n({title:"IMAGE REJECTED",msg:'this image was detected as potentially explicit. you must use a different image.</p><p class="modal_also">using an explicit image will get your account restricted.',classes:["noclickout","crash_modal"],buttons:[{label:"GOT IT",classes:["pri"],callback:e=>{e()}}]}),"NSFW";{let t=null,i=null;const o=new Promise(((e,n)=>{t=e,i=n}));return _n({title:"WARNING",msg:"are you sure you wish to upload this image? by uploading an image, you understand that if it is deemed explicit, your account will be restricted.",classes:["noclickout"],buttons:[{label:"CANCEL",classes:[],callback:e=>{e(),i("NSFW")}},{label:"CONTINUE",classes:["pri"],callback:async o=>{o();try{t(await n(e,s,!0))}catch(e){i(e)}}}]}),await o}}}window.DEVHOOK_BYPASS_NSFW_CHECK=()=>{console.log("%cYou have just DISABLED the NSFW check temporarily. The purpose of this console command is ONLY to allow you to upload false positives.","color: #FFFFFF;\n\t\t\tdisplay: block;\n\t\t\tfont-size: 1.2em;\n\t\t\tfont-weight: 900;\n\t\t\ttext-shadow: 0px 0px 2px #FFFFFF;\n\t\t\tbackground-color: #FF0000;\n\t\t\tpadding: 0 1em;\n\t\t\tborder-radius: 3px;"),console.log("%cUPLOADING EXPLICIT IMAGES WILL GET YOUR ACCOUNT RESTRICTED. UNDERSTOOD?","color: #FF0000;\n\t\t\tdisplay: block;\n\t\t\tfont-size: 1.2em;\n\t\t\tfont-weight: 900;\n\t\t\ttext-shadow: 0px 0px 2px #FF0000;\n\t\t\tbackground-color: #FFFF00;\n\t\t\tpadding: 0 1em;\n\t\t\tborder-radius: 3px;"),t=!0},xt("config_account_avatar_change").addEventListener("click",(function(e){const t=document.createElement("input");t.type="file",t.setAttribute("accept",".png,.jpg,.jpeg,.gif,image/gif,image/png,image/jpg,image/jpeg"),t.onchange=async e=>{const t=e.target.files[0];if(t.size>=2097152)en("sorry, that file's too large! 2MB max, please.");else{try{qi("updating avatar");const e=await n("avatar",t,!1);xt("config_account_avatar").innerHTML=`<img class="avatar" src="/user-content/avatars/${bn.id()}.jpg?rv=${e.avatar_revision}" /> ${bn.username().toUpperCase()}`,xt("me_avatar").setAttribute("src",`/user-content/avatars/${bn.id()}.jpg?rv=${e.avatar_revision}`),xt("zenith_party_self_avatar").setAttribute("src",xt("me_avatar").getAttribute("src")),nn("avatar updated!")}catch(e){"NSFW"!==e&&sn(e)}Ki()}},t.click()})),xt("config_account_avatar_remove").addEventListener("click",(function(e){_n({title:"REMOVE AVATAR",msg:"remove your avatar? it'll be replaced by a generic identicon.",classes:[],buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"REMOVE",classes:["sec"],callback:e=>{e(),qi("removing avatar"),Cn.post("/api/users/removeAvatar").then((e=>{xt("config_account_avatar").innerHTML=`<img class="avatar" src="${Ot(bn.id())}" /> No avatar set`,xt("me_avatar").setAttribute("src",Ot(bn.id())),xt("zenith_party_self_avatar").setAttribute("src",xt("me_avatar").getAttribute("src")),nn("avatar removed!"),Ki()}),(e=>{Ki(),sn(e)}))}}]})})),xt("config_account_banner_change").addEventListener("click",(function(e){if(Ti())return;const t=document.createElement("input");t.type="file",t.setAttribute("accept",".png,.jpg,.jpeg,.gif,image/gif,image/png,image/jpg,image/jpeg"),t.onchange=async e=>{const t=e.target.files[0];if(t.size>=2097152)en("sorry, that file's too large! 2MB max, please.");else{try{qi("updating banner");const e=await n("banner",t,!1);xt("config_account_banner").innerHTML=`<img class="banner" src="/user-content/banners/${bn.id()}.jpg?rv=${e.banner_revision}" /> ${bn.username().toUpperCase()}`,nn("banner updated!")}catch(e){"NSFW"!==e&&sn(e)}Ki()}},t.click()})),xt("config_account_banner_remove").addEventListener("click",(function(e){Ti()||_n({title:"REMOVE BANNER",msg:"remove your banner?",classes:[],buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"REMOVE",classes:["sec"],callback:e=>{e(),qi("removing banner"),Cn.post("/api/users/removeBanner").then((e=>{xt("config_account_banner").innerHTML='<img class="banner" src="/res/banner.png" /> No banner set',nn("banner removed!"),Ki()}),(e=>{Ki(),sn(e)}))}}]})})),xt("config_account_bio_save").addEventListener("click",(function(e){if(Ti())return;const t=(xt("config_account_bio").value||"").trim();qi("saving new bio"),Cn.post("/api/users/setBio",{bio:t}).then((e=>{nn("bio changed!"),Ki()}),(e=>{Ki(),sn(e)}))})),xt("config_account_delete").addEventListener("click",(function(e){xt("config_account_email_warning").classList.contains("hidden")?bi():en("you must set an email before deleting your account.")})),xt("config_account_totp_enable").addEventListener("click",(function(e){qi("generating tokens"),Cn.post("/api/users/initialize2fa").then((e=>{new QRCode(document.createElement("div"),{text:`otpauth://totp/TETR.IO:${bn.username().toUpperCase()}?secret=${e.secret}&issuer=TETR.IO`,colorLight:"#EEEEEE",colorDark:"#222222",PI:"#1E48FF",AI:"#1E48FF",logo:"/res/qrsnip.png",logoWidth:47.5,logoHeight:47.5,onRenderingEnd:(e,t)=>{Ki(),_n({title:"ENABLE TWO-FACTOR AUTHENTICATION",msg:`scan the following QR code with your favourite authenticator app (like AUTHY or GOOGLE AUTHENTICATOR), then enter the six-digit code into the box below to enable two-factor authentication<br><br><center><img src="${t}" style="width: 260px; height: 260px; object-fit: none; object-position: center; image-rendering: pixelated;" /></center><br><br><input data-escape="totp_enable_cancel" data-enter="totp_enable_submit" id="totp_enable" placeholder="six digits" class="mono_input centered_input" autocomplete="off">`,classes:["wide_modal"],buttons:[{label:"CANCEL",classes:[],id:"totp_enable_cancel",callback:e=>{e()}},{label:"SUBMIT",classes:["pri"],id:"totp_enable_submit",callback:e=>{e();const t=xt("totp_enable").value;bn.requestPassword((e=>{qi("saving"),Cn.post("/api/users/enable2fa",{password:e,totp:t}).then((e=>{Ki(),nn("two-factor authentication enabled!"),xt("config_account_totp_label").innerHTML="ENABLED",xt("config_account_totp_tokens").innerHTML="you have <b>8</b>/8 recovery codes remaining.",xt("config_account_totp_enable").classList.add("hidden"),xt("config_account_totp_resetrecovery").classList.remove("hidden"),xt("config_account_totp_disable").classList.remove("hidden"),document.body.classList.add("uses2fa"),_n({title:"TWO-FACTOR AUTHENTICATION ENABLED",msg:`you've successfully enabled two-factor authentication. now every time you log in, you'll be asked to enter one of those six-digit codes. if you don't have access to your device, you can use one of these codes in place of the 6-digit code:<br><center style="font-family: 'PFW'; font-size: 1.5em;">${e.recoveryTokens.join(" ")}</center><br>write these down! if you don't have them, and lose access to your device, you won't be able to log in. each of these tokens can only be used once, but you can create new ones at any time. keep them safe!!!`,classes:["wide_modal"],buttons:[{label:"I'VE WRITTEN THEM DOWN!",classes:[],callback:e=>{e()}}]})}),(e=>{Ki(),sn(e)}))}))}}]}),xt("totp_enable").focus()}})}),(e=>{Ki(),sn(e)}))})),xt("config_account_totp_resetrecovery").addEventListener("click",(function(e){bn.requestPassword(((e,t)=>{qi("resetting recovery codes"),Cn.post("/api/users/reset2fa",{password:e,totp:t}).then((e=>{Ki(),xt("config_account_totp_tokens").innerHTML="you have <b>8</b>/8 recovery codes remaining.",_n({title:"RECOVERY CODES RESET",msg:`here are your new recovery codes, which you may use in place of the 6-digit code:<br><center style="font-family: 'PFW'; font-size: 1.5em;">${e.recoveryTokens.join(" ")}</center><br>write these down! if you don't have them, and lose access to your device, you won't be able to log in. each of these tokens can only be used once, but you can create new ones at any time. keep them safe!!!`,classes:["wide_modal"],buttons:[{label:"I'VE WRITTEN THEM DOWN!",classes:[],callback:e=>{e()}}]})}),(e=>{Ki(),sn(e)}))}))})),xt("config_account_totp_disable").addEventListener("click",(function(e){bn.requestPassword(((e,t)=>{qi("disabling two-factor authentication"),Cn.post("/api/users/disable2fa",{password:e,totp:t}).then((e=>{Ki(),nn("two-factor authentication disabled!"),xt("config_account_totp_label").innerHTML="NOT ENABLED",xt("config_account_totp_tokens").innerHTML="",xt("config_account_totp_enable").classList.remove("hidden"),xt("config_account_totp_resetrecovery").classList.add("hidden"),xt("config_account_totp_disable").classList.add("hidden"),document.body.classList.remove("uses2fa")}),(e=>{Ki(),sn(e)}))}))})),xt("config_account_orders").addEventListener("click",(function(e){qi("requesting orders"),Cn.get("/api/orders/get").then((e=>{let t='<div class="centered_block np"><p id="extra_line"><b>Need help?</b> <a href="https://help.xsolla.com/" target="_blank">This page will guide you through the most common problems</a>.</p><p id="extra_line"><b>See something out of the ordinary?</b> <a href="https://refunds.xsolla.com/" target="_blank">Request a refund</a> or <a href="https://xsolla.com/refund-policy/flexible-policy" target="_blank">view our refund policy</a>.</p></div>';e.orders.forEach((e=>{t+=`<div class="scroller_block order_listing_item ns">\n\t\t\t\t\t<table class="keypairs ns" style="font-family: 'C';">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Status</td>\n\t\t\t\t\t\t\t<td><img style="height: 1em; vertical-align: -10%;" src="/res/orders/orders_${ao[e.status]}.png" /> <b>${ro[e.status]}</b></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Description</td>\n\t\t\t\t\t\t\t<td><i>${zt(e.description)}</i></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Price (excluding taxes and fees)</td>\n\t\t\t\t\t\t\t<td>${zt(e.currency)} <b>${e.price.toLocaleString("en-US",{style:"currency",currency:"EUR"})}</b></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Payment total (including taxes and fees)</td>\n\t\t\t\t\t\t\t<td>${e.payment&&e.payment.amount?`${zt(e.payment.currency)} <b>${e.payment.amount.toLocaleString("en-US",{style:"currency",currency:e.payment.currency})}</b>`:"(unknown)"}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Transaction number</td>\n\t\t\t\t\t\t\t<td>${e.providerid?`<b>${zt(e.providerid)}</b>`:"(not paid yet)"}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Merchant</td>\n\t\t\t\t\t\t\t<td>${e.provider?lo[e.provider]:"(not paid yet)"}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Created</td>\n\t\t\t\t\t\t\t<td>${new Date(e.ts).toLocaleString()}, ${Bt(new Date(e.ts).getTime())} ago</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Last updated</td>\n\t\t\t\t\t\t\t<td>${new Date(e.updated).toLocaleString()}, ${Bt(new Date(e.updated).getTime())} ago</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</div>`})),e.orders.length||(t='<div class="scroller_block ns nothing">NO ORDERS</div>'),xt("config_order_list").innerHTML=t,Ki(),Hi("config_account_orders")}),(e=>{Ki(),sn(e)}))}));const s=["discord","twitch","youtube","twitter","steam","reddit"];for(const e of s)xt(`account_connection_${e}_link`).addEventListener("click",(async()=>{qi("starting linking process");try{Gs((await Cn.get(`/api/connect/${e}`,void 0,{headers:{"X-Session-ID":`connection-${bn.id()}`}})).link)}catch(e){sn(e)}finally{Ki()}})),xt(`account_connection_${e}_remove`).addEventListener("click",(async()=>{qi("unlinking");try{await Cn.post(`/api/connect/${e}/remove`),nn("unlinked!"),At(`#account_connection_${e}>p`).innerHTML="",xt(`account_connection_${e}_remove`).classList.add("hidden"),xt(`account_connection_${e}_link`).classList.remove("hidden"),xt(`account_connection_${e}`).classList.remove("linked")}catch(e){sn(e)}finally{Ki()}})),xt(`account_connection_${e}_show`).addEventListener("click",(async function(){const t=!this.classList.contains("checked");try{await Cn.post(`/api/connect/${e}/public`,{toggle:t}),this.classList.toggle("checked",t),nn(`connection made ${t?"public":"private"}!`)}catch(e){sn(e)}}))}));const ao={new:"new",pending:"pending",processing:"processing",complete:"complete",retrying:"retrying",refunding:"processing",refunded:"refunded",retrying_refund:"retrying"},ro={new:"NEW",pending:"PENDING",processing:"PROCESSING",complete:"COMPLETE",retrying:"RETRYING",refunding:"REFUNDING",refunded:"REFUNDED",retrying_refund:"RETRYING REFUND"},lo={xsolla:"Xsolla"};function co(){const e=oo.hasSupporter?(oo.expires-Date.now())/2592e6:0;xt("config_account_supporter_star").setAttribute("src",oo.hasSupporter?"/res/supporter-tag-shiny.png":"/res/supporter-tag-dead.png"),xt("config_account_supporter_bar").setAttribute("style",`--progress: ${e/3*100}%;`),xt("config_account_supporter_bar").setAttribute("title",oo.expires?`Expires ${new Date(oo.expires).toLocaleString()}`:""),xt("config_account_supporter_bar").classList.toggle("noglow",!oo.hasSupporter),xt("config_account_supporter_bar").innerHTML=oo.hasSupporter?`Your supporter status expires in <b>${Bt(oo.expires)}</b>.`:oo.expires?`Your supporter status expired <b>${Bt(oo.expires)}</b> ago.`:"You are currently not a supporter.",xt("config_account_supporter_details").innerHTML=oo.total?`You have contributed <b>${oo.total.toLocaleString("en-US")}</b> to TETR.IO development so far &mdash; thank you so much!`:"Become a supporter or gift supporter status today and directly support TETR.IO development!",xt("config_account_supporter_support").innerHTML=oo.hasSupporter?"ADD MONTHS OR GIFT":"SUPPORT OR GIFT"}function po(){localStorage.getItem("emailNagHiddenUntil")&&Date.now()<parseInt(localStorage.getItem("emailNagHiddenUntil"))||_n({title:"hey, you haven't set an email yet!",msg:'adding an email keeps your account safe and ensures you can get back into it if you lose the password. just type your email in the box below, and it\'ll be attached to your account.<br><input type="email" class="mono_input" data-escape="emailnag_cancel" data-enter="emailnag_submit" id="emailnag" placeholder="email" value=""></p><p class="modal_also">we\'ll never send you spam or sell your email address.</p><p class="modal_warning">without an email on your account, if you forget your password, you will have no way to recover your account!',buttons:[{label:"NAH, NOT NOW",classes:[],id:"emailnag_cancel",callback:e=>{localStorage.setItem("emailNagHiddenUntil",Date.now()+1296e6),Qt("you can set your email under CONFIG > ACCOUNT. don't say we didn't warn you!"),e()}},{label:"SUBMIT",classes:["pri"],id:"emailnag_submit",callback:e=>{const t=xt("emailnag").value;t?(e(),qi("setting your email"),Cn.post("/api/users/setEmail",{email:t}).then((e=>{nn("email attached! thank you for keeping your account safe."),xt("config_account_email_warning").classList.add("hidden"),Ki()}),(e=>{Ki(),sn(e)}))):en("you must enter a new email")}}]})}Tn.ready((function(e){function t(){Cn.post("/api/users/setAchievements",{achievements:[parseInt(xt("tetra_achievement_case_0").dataset.k),parseInt(xt("tetra_achievement_case_1").dataset.k),parseInt(xt("tetra_achievement_case_2").dataset.k)]}).then((e=>{}),(e=>{sn(e)}))}xt("sig_channel").addEventListener("click",(function(e){Hi("tetra")})),xt("tetra_standalone").addEventListener("click",(function(e){Gs(`https://${_.ch_domain}/`)})),xt("tetra_leaderboards").addEventListener("click",(function(e){Hi("tetra_records")})),xt("tetra_me").addEventListener("click",(function(e){Hi("tetra_me")})),xt("tetra_players").addEventListener("click",(function(e){Hi("tetra_players"),Bi.tetra_players.back="tetra"})),xt("tetra_achievements").addEventListener("click",(function(e){Hi("tetra_achievements")})),xt("tetra_jump_leaderboards").addEventListener("click",(function(e){Gs(`https://${_.ch_domain}/lb/${xt("tetra_records_view").dataset.gamemode}`)})),xt("tetra_jump_mypage").addEventListener("click",(function(e){Gs(`https://${_.ch_domain}/u/${bn.username()}`)})),xt("tetra_jump_players").addEventListener("click",(function(e){Gs(`https://${_.ch_domain}/lb/${xt("tetra_players_view").dataset.lb}`)})),xt("tetra_jump_40l").addEventListener("click",(function(e){Gs(`https://${_.ch_domain}/lb/40l`)})),xt("tetra_jump_blitz").addEventListener("click",(function(e){Gs(`https://${_.ch_domain}/lb/blitz`)})),xt("tetra_jump_tl").addEventListener("click",(function(e){Gs(`https://${_.ch_domain}/lb/league`)})),xt("tetra_find").addEventListener("keydown",(function(e){if(e.repeat)return;if("Enter"!==e.code&&"NumpadEnter"!==e.code)return;xa.SePlay("menuclick"),e.target.blur();const t=xt("tetra_find").value.replace(`https://${_.domain}/#`,"").replace("tetrio://","");va.navigateToID(t),e.preventDefault(),e.stopPropagation()})),xt("me").addEventListener("click",(function(e){ka({userID:bn.id()})})),document.addEventListener("click",(function(e){let t;if(e.target.closest(".tetra_pop"))t=e.target.closest(".tetra_pop"),ka({username:t.getAttribute("data-username")}),e.stopPropagation(),e.preventDefault();else if(e.target.closest(".dialog_pop"))t=e.target.closest(".dialog_pop"),_n({title:t.getAttribute("data-title"),msg:atob(t.getAttribute("data-content")),classes:["patchnotes","wide_modal"],buttons:[{label:"OK",classes:[],callback:e=>{e()}}]}),e.stopPropagation(),e.preventDefault();else if(e.target.closest(".supporter_pop"))t=e.target.closest(".supporter_pop"),Ii(t.getAttribute("data-title")||"SUPPORT TETR.IO"),e.stopPropagation(),e.preventDefault();else if(e.target.closest(".replay_pop"))t=e.target.closest(".replay_pop"),va.navigateToID(t.getAttribute("data-replay")),e.stopPropagation(),e.preventDefault();else if(e.target.closest(".scroller_player")||e.target.closest(".playerresult")||e.target.closest(".chat_tag")){t=e.target.closest(".scroller_player")||e.target.closest(".playerresult")||e.target.closest(".chat_tag");const n=t.getAttribute("data-id"),s=[];n!=bn.id()&&xt("roomview").classList.contains("hosting")&&(s.push({label:"kick",classes:[],callback:e=>{lr.kickUser(n),e()}}),s.push({label:"ban",classes:[],callback:e=>{lr.kickUser(n,2592e3),e()}}),xt("room_players").querySelector(`.scroller_player[data-id="${n}"]`)&&(xt("room_players").querySelector(`.scroller_player[data-id="${n}"]`).classList.contains("spectator")?s.push({label:"move to players",classes:[],callback:e=>{lr.switchBracketHost(n,"player"),e()}}):s.push({label:"move to spectators",classes:[],callback:e=>{lr.switchBracketHost(n,"spectator"),e()}})),s.push({label:"transfer ownership",classes:[],callback:e=>{lr.transferOwnership(n),e()}})),ka({userID:n,buttons:s}),e.stopPropagation(),e.preventDefault()}})),vt(".tetra_records_gamemode").forEach((e=>e.addEventListener("click",(()=>{va.loadRecords(e.dataset.value,At(".tetra_records_scale.pressed").dataset.value,"tetra_records"),xt("tetra_records_view").dataset.gamemode=e.dataset.value})))),vt(".tetra_records_scale").forEach((e=>e.addEventListener("click",(()=>{va.loadRecords(At(".tetra_records_gamemode.pressed").dataset.value,e.dataset.value,"tetra_records")})))),vt(".tetra_myrecords_gamemode").forEach((e=>e.addEventListener("click",(()=>{va.loadRecords(e.dataset.value,"me","tetra_myrecords")})))),vt(".tetra_players_lb").forEach((e=>e.addEventListener("click",(()=>{va.loadUserList(e.dataset.value,At(".tetra_players_scale.pressed").dataset.value,"tetra_players_content"),xt("tetra_players_view").dataset.lb=e.dataset.value})))),vt(".tetra_players_scale").forEach((e=>e.addEventListener("click",(()=>{va.loadUserList(At(".tetra_players_lb.pressed").dataset.value,e.dataset.value,"tetra_players_content")})))),vt(".achievement_case_icon").forEach((e=>e.addEventListener("click",(n=>{xt("tetra_achievements_page").classList.contains("editing")&&xt("tetra_achievements_page").dataset.editing===e.dataset.id?(xt("tetra_achievements_page").classList.remove("editing"),xt("tetra_achievements_page").dataset.editing=""):(xt("tetra_achievements_page").classList.add("editing"),xt("tetra_achievements_page").dataset.editing=e.dataset.id,e.dataset.k=0,e.dataset.rank="stub",e.innerHTML="<span>EMPTY</span>",t())})))),xt("tetra_achievement_data").addEventListener("click",(e=>{if(!xt("tetra_achievements_page").classList.contains("editing"))return;if(!e.target.closest(".achievement"))return;const n=e.target.closest(".achievement").dataset.k,s=e.target.closest(".achievement").dataset.rank,i=At(`.achievement_case_icon[data-id="${xt("tetra_achievements_page").dataset.editing}"]`);i.dataset.k=n,i.dataset.rank=s,i.innerHTML=e.target.closest(".achievement").querySelector(".achievement_icon").innerHTML,t(),xt("tetra_achievements_page").classList.remove("editing"),xt("tetra_achievements_page").dataset.editing=""}))})),Tn.ready((function(){function e(){lr.enterMatchmaking();const e=xt("enter_matchmaking").getBoundingClientRect();xl.play("button_ultra",{x:e.left,y:e.top,w:e.width,h:e.height,color:[16711680,16746632]})}function t(e){if(e.repeat||e.isComposing)return;if("Enter"!==e.code&&"NumpadEnter"!==e.code)return;const t=e.target.value;t.length&&lr.sendChatMessage(t),xt("chat_input").value="",xt("league_chat_input").value="",xt("ingame_chat_input").value="","ingame_chat_input"===e.target.id&&e.target.blur()}xt("play_multi").addEventListener("click",(function(){qi("connecting to live servers"),Ja.require().then((e=>{Ki(),Hi("playmulti"),e.maintenance&&document.body.classList.add("maintenance")})).catch((e=>{console.log(e),Ki(),en("could not connect to live servers")}))})),xt("outdated_warning").addEventListener("click",(function(){Tn.update()})),xt("play_returntoroom").addEventListener("click",(function(){qi("connecting to live servers"),Ja.require().then((e=>{Ki(),lr.joinRoom(xt("play_returntoroom").dataset.room),xt("play_returntoroom").classList.add("hidden"),No.remove("returntoroom"),document.body.classList.add("inpair"),setTimeout((()=>lr.replaceMidgame()),100)})).catch((e=>{console.log(e),Ki(),en("could not connect to live servers")}))})),xt("multi_listing").addEventListener("click",(function(){Hi("multilisting")})),xt("multi_join").addEventListener("keydown",(function(e){if(e.repeat)return;if("Enter"!==e.code&&"NumpadEnter"!==e.code)return;xa.SePlay("menuclick");const t=xt("multi_join").value.replace("#","").replace(`https://${_.domain}/`,"").replace("tetrio://","");t.length&&lr.joinRoom(t.toUpperCase()),xt("multi_join").value=""})),xt("multi_quickplay").addEventListener("click",(function(){lr.joinRoom("X-QP")})),xt("multi_royale").addEventListener("click",(function(){lr.joinRoom("X-ROYALE")})),xt("multi_league").addEventListener("click",(function(){qi("fetching TETRA LEAGUE data");const e=`SESS-${Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}`;Cn.get("/api/server/environment",void 0,{headers:{"X-Session-ID":e}}).then((async t=>{Cn.get("/api/users/me",void 0,{headers:{"X-Session-ID":e,"X-Connection-ID":await bn.esc(Uint8Array.from(atob(t.vx),(e=>e.charCodeAt(0))),fn.get())}}).then((e=>{_.league_season.ranked?-1===e.user.league.tr?(xt("league_rating").innerHTML=`${e.user.league.gamesplayed}<span>/10 rating games played</span>`,xt("league_rating").title="",xt("leaguestanding_rating").innerHTML=`${e.user.league.gamesplayed}<span>/10 rating games played</span>`,xt("league_ticker").innerHTML="play rating games to receive a rating",xt("league_rank").classList.add("hidden"),xt("league_warning").classList.add("hidden"),xt("me_leaguerank").classList.add("hidden")):(vi=Math.round(e.user.league.tr),ki=e.user.league.rank,xt("league_rating").innerHTML=`${Math.round(e.user.league.tr)}<span>TR</span>`,xt("league_rating").title=e.user.league.tr,xt("leaguestanding_rating").innerHTML=`${Math.round(e.user.league.tr)}<span>TR</span>`,xt("league_ticker").innerHTML=`glicko: <span title="Your raw rating in the Glicko-2 system. Higher is better.">${e.user.league.glicko}</span><span title="How uncertain the Glicko-2 system is of your rating. Lower is better.">${e.user.league.rd}</span> - games won: <span>${e.user.league.gameswon}</span> / ${e.user.league.gamesplayed} (<span>${Math.floor(e.user.league.gameswon/e.user.league.gamesplayed*1e4)/100}</span>%)`,xt("league_rank").src=`/res/league-ranks/${e.user.league.rank}.png`,xt("leaguestanding_rank").src=`/res/league-ranks/${e.user.league.rank}.png`,xt("league_rank").classList.remove("hidden"),xt("league_warning").classList.toggle("hidden","z"!==e.user.league.rank),xt("me_leaguerank").classList.toggle("hidden","z"===e.user.league.rank),xt("me_leaguerank").src=`/res/league-ranks/${e.user.league.rank}.png`):(xt("league_rating").innerHTML="OFF-SEASON",xt("league_rating").title="",xt("leaguestanding_rating").innerHTML=`${e.user.league.gameswon}<span> game${1===e.user.league.gameswon?"":"s"} won</span>`,xt("league_ticker").innerHTML=`${e.user.league.gameswon} GAME${1===e.user.league.gameswon?"":"S"} WON`,xt("league_rank").classList.add("hidden"),xt("league_warning").classList.add("hidden"),xt("me_leaguerank").classList.add("hidden")),-1===e.user.league.standing?xt("league_placement").classList.add("hidden"):(wi=e.user.league.standing,xt("league_placement").classList.remove("hidden"),xt("league_placement").innerHTML=`#<span>${e.user.league.standing}</span>`,xt("league_placement").classList.toggle("t100",e.user.league.standing<=100&&e.user.league.standing>10),xt("league_placement").classList.toggle("t10",e.user.league.standing<=10&&e.user.league.standing>1),xt("league_placement").classList.toggle("t1",1===e.user.league.standing)),Hi("league"),Ki(),0===e.user.league.gamesplayed&&_.league_season.ranked&&_n({title:"WELCOME TO TETRA LEAGUE",msg:"TETRA LEAGUE is a competitive 1v1 mode. win duels against players of similar skill to rank up and conquer the leaderboards!</p><p>if you're new to stackers or are feeling rusty, it's a good idea to practice in other modes first.</p><p class=\"modal_warning\">make sure you have the time and connection to play! if you leave or disconnect early, you must rejoin immediately or you will be penalized.",buttons:[{label:"GOT IT!",classes:[],callback:e=>{e()}}]})}),(e=>{Ki(),sn(e)}))}),(e=>{Ki(),sn(e)}))})),xt("enter_matchmaking").addEventListener("click",(function(){document.body.classList.contains("matchmaking")?lr.leaveMatchmaking():zn.isLow?_n({title:"ENTER MATCHMAKING?",msg:zn.isCritical?`your battery is critically low (${Math.round(100*zn.level)}%), and your device may shut down soon.<p class="modal_also">if your device shuts down, you may not be able to rejoin the match in time!`:`your battery is running low (${Math.round(100*zn.level)}%), so consider plugging it in first.<p class="modal_also">if your device shuts down, you may not be able to rejoin the match in time!`,buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:zn.isCritical?"I'LL WIN THIS QUICK":"CONTINUE",classes:[zn.isCritical?"sec":"pri"],callback:t=>{t(),e()}}]}):e()})),xt("multi_createroom").addEventListener("click",(function(){Gi([{id:"public",name:"PUBLIC ROOM",description:"create a public room anyone can join",classes:["block_anon","block_silenced"],attributes:{"data-block-reason":"ANONYMOUS USERS MAY NOT CREATE PUBLIC ROOMS"}},{id:"private",name:"PRIVATE ROOM",description:"create a private room for you and friends"}],(e=>{lr.createRoom(e)}),!0)})),xt("leaveroom").addEventListener("click",(function(){lr.leaveRoom()})),xt("leavezenith").addEventListener("click",(function(){Yi(),setTimeout((()=>{lr.stopSpectating(!0),lr.leaveRoom(),xt("killfeed").innerHTML="",Qi((()=>{gi.rebind()}))}),200)})),xt("backtoroom").addEventListener("click",(function(){Hi("lobby"),lr.returnToRoom()})),xt("victory_downloadreplay").addEventListener("click",(function(){const e=new Blob([JSON.stringify(sr)],{type:"application/json"}),t=document.createElement("a");t.download="replay.ttrm",t.href=(window.webkitURL||window.URL).createObjectURL(e),t.dataset.downloadurl=["application/json",t.download,t.href].join(":"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})),xt("viewreplay_endleague").addEventListener("click",(function(){setTimeout((()=>{xt("leaguestanding_rating").classList.remove("pingraise"),xt("leaguestanding_rating").classList.remove("pinglower"),xt("leaguestanding_rating").classList.remove("pingfinal"),xt("leaguestanding_rating").classList.remove("pingrating")}),500),qi("fetching replay");const e=xt("replayid_endleague").innerHTML.replace("R:","");Cn.get(`/api/games/${encodeURIComponent(e)}`).then((e=>{Ki();const t=new L(e.game.replay);Ys.loadReplay(t,{back:"endleague",record:e.game,menuStyle:"endleague"})}),(e=>{Ki(),sn(e)}))})),xt("backtoleague").addEventListener("click",(function(){lr.leaveRoom(!0),Hi("league"),setTimeout((()=>{xt("leaguestanding_rating").classList.remove("pingraise"),xt("leaguestanding_rating").classList.remove("pinglower"),xt("leaguestanding_rating").classList.remove("pingfinal"),xt("leaguestanding_rating").classList.remove("pingrating")}),5e3),ll("online","menus")})),xt("chat_input").addEventListener("keydown",t),xt("league_chat_input").addEventListener("keydown",t),xt("ingame_chat_input").addEventListener("keydown",t),xt("chat_input").addEventListener("keydown",i),xt("league_chat_input").addEventListener("keydown",i),xt("ingame_chat_input").addEventListener("keydown",i);let n="",s=-1;function i(e){if(e.repeat||e.isComposing)return;if("Tab"!==e.code)return n="",void(s=-1);let t=n||e.target.value;const i=t.match(/[a-z0-9-_]+/gi)||[""],o=i[i.length-1];if(!o||o.length<2)return;const a=lr.getRoomUsernames(o);if(!a.length)return;const r=a[++s%a.length];n=t,t=t.substring(0,t.length-o.length)+r,e.target.value=t}function o(){lr.clearRoomConfig(),xt("startroom").classList.add("hidden"),lr.startRoom(),setTimeout((()=>{xt("startroom").classList.remove("hidden")}),2e3)}function a(e){document.body.classList.contains("chatfocus")||Object.keys(rt).forEach((t=>{if(rt[t].includes(yt(e))&&"chat"===t)if((document.body.classList.contains("inmulti")||document.body.classList.contains("inmultizen"))&&0===Ji&&xt("social").classList.contains("hidden"))xt("ingame_chat_input").focus(),e.stopPropagation(),e.preventDefault();else if("lobby"===Li&&1===Ji&&!xt("menus").classList.contains("hidden")&&xt("social").classList.contains("hidden")){if(["input","textarea"].includes(document.activeElement.tagName.toLowerCase()))return;xt("chat_input").focus(),e.stopPropagation(),e.preventDefault()}else if("endleague"===Li&&1===Ji&&!xt("menus").classList.contains("hidden")&&xt("social").classList.contains("hidden")){if(["input","textarea"].includes(document.activeElement.tagName.toLowerCase()))return;xt("league_chat_input").focus(),e.stopPropagation(),e.preventDefault()}}))}xt("ingame_chat_input").addEventListener("keyup",(e=>{e.repeat||("Escape"===e.code&&(e.target.value="",e.target.blur()),xt("chat_input").value=e.target.value,xt("league_chat_input").value=e.target.value)})),xt("chat_input").addEventListener("keyup",(e=>{xt("ingame_chat_input").value=e.target.value})),xt("roomid_container").addEventListener("click",(function(){Mi(`https://${_.domain}/${xt("roomid").innerHTML}`,"link")})),xt("roomid_change").addEventListener("click",(function(e){e.stopPropagation(),Ti()||zi("EDIT ROOM ID","pick a new room ID. alphanumeric characters only, please!",xt("roomid").innerHTML.replace("#",""),(e=>{lr.setRoomID(e.toUpperCase().trim())}))})),xt("startroom").addEventListener("click",(function(){vt("#room_content_container .unsaved .room_config_item[data-index]").length?_n({title:"START GAME?",msg:"some settings have not yet been saved, if you start the game now, those changes will be lost!",buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"DISCARD and START GAME",classes:["sec"],callback:e=>{o(),e()}}]}):o()})),setInterval((()=>{Fi()}),12e4),xt("room_switchbracket").addEventListener("click",(function(){lr.switchBracket(xt("roomview").classList.contains("spectating")?"player":"spectator")})),xt("igw_zen").addEventListener("click",(()=>{Ys.playZen({inroom:!0,roomname:xt("room_content_name").innerText}),ei()})),xt("igw_spectate").addEventListener("click",(()=>{lr.startMidgameSpectate()})),document.addEventListener("keydown",a,!0),document.addEventListener("gpdown",a,!0),vt("#room_content_container .room_config_item[data-index]").forEach((e=>{e.addEventListener("input",(t=>{e.closest(".room_config_row").classList.add("unsaved"),xt("room_opts_save").classList.add("unsaved"),t.target!==xt("game-presets")&&(xt("game-presets").parentNode.classList.add("unsaved"),xt("game-presets").innerHTML="custom")}))})),xt("room_opts_save").addEventListener("click",(()=>{lr.saveRoomConfig()})),vt(".room_config_spinner").forEach((e=>{e.addEventListener("click",(()=>{const t=[];e.getAttribute("data-items")?.split(";").forEach((e=>{let n=(e=e.replace(/\\,/g,"")).split(",");n=n.map((e=>e.replace(//g,","))),t.push({id:n[0],name:n[1],description:n[2]})})),Gi(t,(t=>{e.innerHTML=t,e.dispatchEvent(new Event("input"))}),!0)}))})),xt("waitstate_forfeit_shade").addEventListener("click",(()=>{xt("waitstate_forfeit_shade").classList.add("hidden"),xt("waitstate_forfeit_true").classList.remove("hidden")})),xt("waitstate_forfeit_true").addEventListener("mouseleave",(()=>{xt("waitstate_forfeit_shade").classList.remove("hidden"),xt("waitstate_forfeit_true").classList.add("hidden")})),xt("waitstate_forfeit").addEventListener("click",(()=>{lr.forfeitMidgame()})),xt("rank_limit").addEventListener("input",(e=>{xt("rank_field").style.setProperty("--pos",e.target.value);const t=xt("rank_limit").value,n=parseFloat(xt("rank_limit").getAttribute("max"));xt("rank_limit").style.background=`linear-gradient(to right, #FFF 0%, #FFF ${t/n*100}%, #000A ${t/n*100}%, #000A 100%)`})),xt("rank_limit").addEventListener("change",(e=>{xt("rank_field").style.setProperty("--pos",e.target.value);const t=xt("rank_limit").value,n=parseFloat(xt("rank_limit").getAttribute("max"));xt("rank_limit").style.background=`linear-gradient(to right, #FFF 0%, #FFF ${t/n*100}%, #000A ${t/n*100}%, #000A 100%)`})),xt("game-presets").addEventListener("input",(e=>{lr.clearRoomConfig(),lr.pushRoomConfigString(jn[e.target.innerHTML])}))}));let ho=0,uo="Unknown";function _o(e,t,n){if(_.novault)return;let s="",i="???";switch(e){case"supporter":{let e="";e=t.isgift?1===t.recipients.length?`Supporter for ${t.recipients[0].toUpperCase()} - ${t.months} month${1===t.months?"":"s"} (gift)`:`Supporter for ${t.recipients.length} recipients (mega gift)`:`Supporter for ${bn.username().toUpperCase()} - ${t.months} month${1===t.months?"":"s"}`,s+=`<tr>\n\t\t\t\t<td>${e}</td>\n\t\t\t\t<td>1 unit</td>\n\t\t\t\t<td>${t.price.toFixed(2)}</td>\n\t\t\t</tr>`,i=`${t.price.toFixed(2)}`,ho=t.price,uo=t.isgift?"Supporter Gift":"Supporter";break}}qi("checking payment data"),Cn.post("/api/orders/create",{type:e,dryrun:!0,data:t}).then((o=>{Ki(),n&&n(),Nt(["trackEvent","Vault","Purchase Initialize",uo,ho]),_n({title:"Checkout",msg:`</p><div class="dialog_long">\n\t\t\t\t\t<table>${s}</table>\n\t\t\t\t\t<div class="vault_total"><span>TOTAL</span>${i}</div>\n\t\t\t\t\t<p class="vault_about">Your transaction will be completed using Xsolla.<br><b>Some of Xsolla's payment partners:</b><br><img src="/res/xsolla_methods.png" /><br>and many more.</p>\n\t\t\t\t</div><div class="xsolla_mark">Xsolla is an authorized global distributor of TETR.IO</div><p>`,classes:["vault_modal"],buttons:[{label:"Cancel",classes:[],callback:e=>{e()}},{label:"Pay with Xsolla",classes:["pri","xsolla_pay_button","oob_button_arrow_right"],callback:(n,s)=>{xa.SePlay("purchase_start"),s.classList.add("oob_button_arrow_right_fly"),mo(e,t,n,(()=>{s.classList.remove("oob_button_arrow_right_fly")}))}}]})}),(e=>{Ki(),sn(e)}))}function mo(e,t,n,s){_.novault||(window.XPayStationWidget?(qi("placing order"),Cn.post("/api/orders/create",{type:e,dryrun:!1,data:t}).then((s=>{qi(""),Ws(!1),n&&n();let i=!1;const o=setTimeout((()=>{Ki()}),3e3);XPayStationWidget.off(),XPayStationWidget.on("open",(()=>{clearTimeout(o),Ki(),Nt(["trackEvent","Vault","Purchase Start",uo,ho])})),XPayStationWidget.on("status-done",(()=>{i=!0,Nt(["trackEvent","Vault","Purchase Complete",uo,ho])})),XPayStationWidget.on("status-troubled",(()=>{Nt(["trackEvent","Vault","Purchase Troubled",uo,ho])})),XPayStationWidget.on("close",(()=>{Ws(!0),i?Ei(e,t):Nt(["trackEvent","Vault","Purchase Cancel",uo,ho])})),XPayStationWidget.init({access_token:s.tokenid,sandbox:s.sandbox,lightbox:{zIndex:9999999999}}),XPayStationWidget.open()}),(e=>{Ki(),s&&s(),sn(e)}))):en("a script is missing. please refresh the page or disable content blocking extensions."))}let go="",fo=!0;function bo(e=!1,t=()=>{}){!e&&("home"!==Li||xt("menus").classList.contains("hidden")||Ji<1)||Cn.get("/about/homebanner.html",void 0,{parse:!1}).then((e=>{if(e==go)return;go=e,xt("homebanner").innerHTML=e;const n=e.startsWith("\x3c!--Yes serve a ceriad at the top yes yes yes please cool cool--\x3e");n!==fo&&(fo=n,n?(xt("homebanner").insertAdjacentElement("afterend",Vs.getElement("home-lb")),Vs.getElement("home-lb").classList.add("ceriad_bg_rb"),Vs.getElement("home-lb").classList.remove("ceriad_bg_rt"),Vs.getElement("home-lb").classList.add("ceriad_mb"),Vs.getElement("home-lb").classList.remove("ceriad_mt"),Vs.mountIfMounted("home-lb")):(xt("home_menu").insertAdjacentElement("beforeend",Vs.getElement("home-lb")),Vs.getElement("home-lb").classList.add("ceriad_bg_rt"),Vs.getElement("home-lb").classList.remove("ceriad_bg_rb"),Vs.getElement("home-lb").classList.add("ceriad_mt"),Vs.getElement("home-lb").classList.remove("ceriad_mb"),Vs.mountIfMounted("home-lb"))),t()}),(e=>{t()}))}Gt((()=>{bo(!0,(()=>{Tn.finishLoad("homebanner")}))})),Tn.ready((e=>{setInterval((()=>{bo()}),6e5)})),Tn.ready((function(e){Qs.newacc()||Cn.get("/about/patchnotes/notes.json",void 0,{ignoreSuccess:!0}).then((e=>{const t=localStorage.getItem("lastPatch");for(const n of Object.keys(e)){if(n===t)break;const s=e[n];if(s.only_if&&!s.only_if.includes(t))continue;localStorage.setItem("lastPatch",n);let i="";i+=`<h1>${n}</h1><h6>${s.ts}</h6>`,s.contents.forEach((e=>{e.header&&(i+=`<h2 style="color: ${e.color};" data-content="${e.header}">${e.header}</h2>`),i+=`<p>${e.items.join("</p><p>")}</p>`})),_n({title:"WHAT'S NEW",msg:`<div class="dialog_long">${i}<p class="dlf">Like this update? Please consider <a href="javascript:void();" class="lna" onclick="SHOW_SUPPORTER_DIALOG();">supporting TETR.IO development</a>!</p></div>`,classes:["patchnotes","wide_modal"],buttons:[{label:"ALL PATCH NOTES",classes:[],callback:e=>{Gs("/about/patchnotes/"),e()}},{label:"COOL!",classes:["pri"],callback:e=>{e()}}]});break}}),(()=>{}))}));const Co={NONE:0,BRONZE:1,SILVER:2,GOLD:3,PLATINUM:4,DIAMOND:5,ISSUED:100},yo={0:"none",1:"bronze",2:"silver",3:"gold",4:"platinum",5:"diamond",100:"issued"},xo={PERCENTILE:1,ISSUE:2,ZENITH:3,PERCENTILELAX:4,PERCENTILEVLAX:5,PERCENTILEMLAX:6},Ao={NONE:0,NUMBER:1,TIME:2,TIME_INV:3,FLOOR:4,ISSUE:5,NUMBER_INV:6},vo={UNRANKED:0,RANKED:1,COMPETITIVE:2},ko={[Co.DIAMOND]:[0,.05,0,4],[Co.PLATINUM]:[.05,.1,5,9],[Co.GOLD]:[.1,.3,10,29],[Co.SILVER]:[.3,.5,30,49],[Co.BRONZE]:[.5,.7,50,69],[Co.NONE]:[.7,1,0,1]},wo={[Co.DIAMOND]:[0,.05,0,4],[Co.PLATINUM]:[.05,.2,5,19],[Co.GOLD]:[.2,.6,20,59],[Co.SILVER]:[.6,1,60,99],[Co.BRONZE]:[1,1,100,1/0],[Co.NONE]:[1,1,100,1/0]},Bo={[Co.DIAMOND]:[0,.1,0,9],[Co.PLATINUM]:[.1,.2,10,19],[Co.GOLD]:[.2,.5,20,49],[Co.SILVER]:[.5,1,60,99],[Co.BRONZE]:[1,1,100,1/0],[Co.NONE]:[1,1,100,1/0]},Lo={[Co.DIAMOND]:[0,.2,0,1],[Co.PLATINUM]:[.2,.5,2,4],[Co.GOLD]:[.5,1,5,9],[Co.SILVER]:[1,1,10,1/0],[Co.BRONZE]:[1,1,10,1/0],[Co.NONE]:[1,1,10,1/0]},So={[Co.DIAMOND]:[0,1],[Co.PLATINUM]:[1350,1650],[Co.GOLD]:[850,1350],[Co.SILVER]:[450,850],[Co.BRONZE]:[150,450],[Co.NONE]:[0,150]},zo={[Co.NONE]:0,[Co.BRONZE]:1,[Co.SILVER]:2,[Co.GOLD]:3,[Co.PLATINUM]:5,[Co.DIAMOND]:8,[Co.ISSUED]:1},Fo=[[3,6],[5,5],[10,4],[25,3],[50,2],[100,1]];function To(e,{clickable:t=!0,isSelf:n=!0}){const s=document.createElement("div");s.classList.add("achievement"),s.dataset.hover="tap",s.dataset.hit="click";const i=e.stub?"stub":yo[e.rank];s.dataset.rank=i,s.dataset.k=e.k;let o=0,a="",r="";switch(e.vt){case Ao.NUMBER:a=`${Math.floor(e.stub?0:e.v).toLocaleString("en-US")}${e.deci?`<span>.${Math.floor((e.stub?0:e.v)%1*10**e.deci)}</span>`:""}`;break;case Ao.NUMBER_INV:a=e.stub?"---":`${Math.floor(-e.v).toLocaleString("en-US")}${e.deci?`<span>.${Math.floor(-e.v%1*10**e.deci)}</span>`:""}`;break;case Ao.TIME:{const t=wt(e.stub?0:e.v);a=e.stub?"---":`${t.m}:${t.s}<span>.${t.ms}</span>`;break}case Ao.TIME_INV:{const t=wt(e.stub?0:-e.v);a=e.stub?"---":`${t.m}:${t.s}<span>.${t.ms}</span>`;break}case Ao.FLOOR:a=e.stub?"---":`<span>FLOOR</span> ${e.a}`;break;case Ao.ISSUE:a=e.stub||-1===e.pos?"---":`<span>ISSUE #</span>${e.pos+1}`}if(e.stub)r=e.rt!==xo.ZENITH&&e.min>Number.MIN_SAFE_INTEGER?`<div class="achievement_info_rank">of ${(e.vt===Ao.NUMBER_INV?-e.min:e.min).toLocaleString("en-US")}</div>`:"";else if(e.v<e.min)r=`<div class="achievement_info_rank">of ${(e.vt===Ao.NUMBER_INV?-e.min:e.min).toLocaleString("en-US")}</div>`;else if(e.pos>-1)switch(e.rt){case xo.PERCENTILE:{const t=e.pos/Math.max(1,e.total-1),s=ko[e.rank];o=Math.max(1-(t-s[0])/(s[1]-s[0]),1-(e.pos-s[2])/(s[3]-s[2])),r=e.pos?`<div class="achievement_info_rank">top ${(100*t).toFixed(t<.01?3:2)}% (#${(e.pos+1).toLocaleString("en-US")}) <span title="${new Date(e.t).toLocaleString()}">${new Date(e.t).toLocaleDateString()}</span></div>`:`<div class="achievement_info_rank">${n?"you're ":""}the very best! (#1) <span title="${new Date(e.t).toLocaleString()}">${new Date(e.t).toLocaleDateString()}</span></div>`;break}case xo.ISSUE:r=`<div class="achievement_info_rank">of ${Math.max(e.pos+1,e.total).toLocaleString("en-US")} <span title="${new Date(e.t).toLocaleString()}">${new Date(e.t).toLocaleDateString()}</span></div>`;break;case xo.ZENITH:{const t=e.pos/Math.max(1,e.total-1),n=So[e.rank];o=(e.v-n[0])/(n[1]-n[0]),r=`<div class="achievement_info_rank">${Math.floor(e.v).toLocaleString("en-US")}.${Math.floor(e.v%1*10)}m, ${e.pos?`top ${(100*t).toFixed(t<.01?3:2)}%`:"the best!"} (#${(e.pos+1).toLocaleString("en-US")}) <span title="${new Date(e.t).toLocaleString()}">${new Date(e.t).toLocaleDateString()}</span></div>`;break}case xo.PERCENTILELAX:{const t=e.pos/Math.max(1,e.total-1),s=wo[e.rank];o=Math.max(1-(t-s[0])/(s[1]-s[0]),1-(e.pos-s[2])/(s[3]-s[2])),r=e.pos?`<div class="achievement_info_rank">top ${(100*t).toFixed(t<.01?3:2)}% (#${(e.pos+1).toLocaleString("en-US")}) <span title="${new Date(e.t).toLocaleString()}">${new Date(e.t).toLocaleDateString()}</span></div>`:`<div class="achievement_info_rank">${n?"you're ":""}the very best! (#1) <span title="${new Date(e.t).toLocaleString()}">${new Date(e.t).toLocaleDateString()}</span></div>`;break}case xo.PERCENTILEMLAX:{const t=e.pos/Math.max(1,e.total-1),s=Bo[e.rank];o=Math.max(1-(t-s[0])/(s[1]-s[0]),1-(e.pos-s[2])/(s[3]-s[2])),r=e.pos?`<div class="achievement_info_rank">top ${(100*t).toFixed(t<.01?3:2)}% (#${(e.pos+1).toLocaleString("en-US")}) <span title="${new Date(e.t).toLocaleString()}">${new Date(e.t).toLocaleDateString()}</span></div>`:`<div class="achievement_info_rank">${n?"you're ":""}the very best! (#1) <span title="${new Date(e.t).toLocaleString()}">${new Date(e.t).toLocaleDateString()}</span></div>`;break}case xo.PERCENTILEVLAX:{const t=e.pos/Math.max(1,e.total-1),s=Lo[e.rank];o=Math.max(1-(t-s[0])/(s[1]-s[0]),1-(e.pos-s[2])/(s[3]-s[2])),r=e.pos?`<div class="achievement_info_rank">top ${(100*t).toFixed(t<.01?3:2)}% (#${(e.pos+1).toLocaleString("en-US")}) <span title="${new Date(e.t).toLocaleString()}">${new Date(e.t).toLocaleDateString()}</span></div>`:`<div class="achievement_info_rank">${n?"you're ":""}the very best! (#1) <span title="${new Date(e.t).toLocaleString()}">${new Date(e.t).toLocaleDateString()}</span></div>`;break}}e.stub||-1===e.progress||(o=e.progress);let l=null;!e.stub&&e.pos>-1&&e.art===vo.COMPETITIVE&&(e.pos<3?l="t3":e.pos<5?l="t5":e.pos<10?l="t10":e.pos<25?l="t25":e.pos<50?l="t50":e.pos<100&&(l="t100"));let c="";e.x?.ally&&(c=`together with <span class="achievement_info_extra_ally ach_userable" data-username="${e.x.ally.username}" data-hover="tap" data-hit="click"><img class="avatar" src="${e.x.ally.avatar_revision?`/user-content/avatars/${e.x.ally._id}.jpg?rv=${e.x.ally.avatar_revision}`:Ot(e.x.ally._id)}" />${e.x.ally.username.toUpperCase()}</span>`);const p=`\n\t\t<img class="achievement_icon_frame" src="/res/achievements/frames/${"stub"===i?"none":i}.png" />\n\t\t<img class="achievement_icon_frame_glint achievement_icon_frame_glint_a" src="/res/achievements/glint-a.png" />\n\t\t<img class="achievement_icon_frame_glint achievement_icon_frame_glint_b" src="/res/achievements/glint-b.png" />\n\t\t<img class="achievement_icon_frame_glint achievement_icon_frame_glint_c" src="/res/achievements/glint-c.png" />\n\t\t${o?`<div class="achievement_icon_ring">\n\t\t\t<img src="/res/achievements/frames/ring-piece.png" style="clip-path: ${Eo(o)};" />\n\t\t\t<img src="/res/achievements/frames/ring-piece.png" style="clip-path: ${Eo(o)};" />\n\t\t</div>`:""}\n\t\t${l?`<img class="achievement_icon_wreath" src="/res/achievements/wreaths/${l}.png" />`:""}\n\t\t<div class="achievement_icon_inner" style="background-image: url('/res/achievements/icons/${Math.floor((e.k-1)/64)}.png'); background-position: ${(e.k-1)%8*-100}% ${-100*Math.floor((e.k-1)/8)}%;"></div>\n\t`,h=`\n\t\t<div class="achievement_info_name">${e.name.toUpperCase()}</div>\n\t\t<div class="achievement_info_value">${a}${r}</div>\n\t\t${c?`<div class="achievement_info_extra">${c}</div>`:""}\n\t\t<div class="achievement_info_object">${e.object}</div>\n\t\t<div class="achievement_info_desc">${e.desc}</div>\n\t\t<div class="achievement_info_icons">${e.art===vo.UNRANKED?'<img src="/res/achievements/unranked.png" title="This achievement does not contribute to your Achievement Rating." />':""}${e.art===vo.COMPETITIVE?'<img src="/res/achievements/competitive.png" title="This achievement grants extra Achievement Rating to those who place in its Top 100 leaderboard." />':""}${e.hidden&&!e.event_past?'<img src="/res/achievements/hidden.png" title="This achievement is only visible to the worthy." />':""}${e.event&&!e.event_past?`<img src="/res/achievements/event.png" title="This achievement is part of the ${zt(e.event)} event." />`:""}${e.event&&e.event_past?`<img src="/res/achievements/event.png" title="This achievement was part of the ${zt(e.event)} event. It is no longer available." />`:""}${e.disabled&&!e.event_past?'<img src="/res/achievements/disabled.png" title="This achievement is no longer available." />':""}</div>\n\t`;return s.innerHTML=`\n\t\t<div class="achievement_icon">${p}</div>\n\t\t<div class="achievement_info">${h}</div>\n\t`,t&&s.addEventListener("click",(()=>{xt("tetra_achievements_page").classList.contains("editing")||Do(e,{progress:o,rank:i,text:a,rankText:r,competitivePlace:l,extra:c})})),{...e,progress:o,holder:s,icon:p,info:h,extra:c,showlb:()=>Do(e,{progress:o,rank:i,text:a,rankText:r,competitivePlace:l,extra:c})}}function Io(e){switch(e.vt){case Ao.NUMBER:return`${Math.floor(e.stub?0:e.v).toLocaleString("en-US")}${e.deci?`.${Math.floor((e.stub?0:e.v)%1*10**e.deci)}`:""}`;case Ao.NUMBER_INV:return e.stub?"---":`${Math.floor(-e.v).toLocaleString("en-US")}${e.deci?`.${Math.floor(-e.v%1*10**e.deci)}`:""}`;case Ao.TIME:{const t=wt(e.stub?0:e.v);return e.stub?"---":`${t.m}:${t.s}.${t.ms}`}case Ao.TIME_INV:{const t=wt(e.stub?0:-e.v);return e.stub?"---":`${t.m}:${t.s}.${t.ms}`}case Ao.FLOOR:return e.stub?"---":`${Math.floor(e.v).toLocaleString("en-US")}.${Math.floor(e.v%1*10)}m (Floor ${e.a})`;case Ao.ISSUE:return e.stub||-1===e.pos?"---":`Issue #${e.pos+1}`}}function Eo(e){const t=21.0907499842,n=100-2*t,s=107.756034934;if(e<=1/3){return`polygon(${t}% 0, ${t+3*e*n}% 0, 50% 50%)`}if(e<=2/3){const i=3*e-1;return`polygon(${t}% 0, ${t+n}% 0, ${t+n+i*(s-(t+n))}% ${50*i}%, 50% 50%)`}if(e<=1){const i=3*e-2;return`polygon(${t}% 0, ${t+n}% 0, ${s}% 50%, ${t+n+(1-i)*(s-(t+n))}% ${50+50*i}%, 50% 50%)`}return"none"}async function Mo(e){let t;qi("fetching achievement data");try{t=await Cn.get(`/api/achievements/me/${e}`),Ki(),To(t.achievement,{}).showlb()}catch(e){Ki(),sn(e)}}async function Do(e,{progress:t,rank:n,text:s,rankText:i,competitivePlace:o,extra:a}){let r;qi("fetching leaderboard");try{r=(await Cn.get(`/api/achievements/${e.k}`)).entries,Ki()}catch(e){throw Ki(),sn(e),e}let l="",c=0,p=[1/0,0];const h=new Set;let d=0;for(const t of r){if(e.pair&&(h.has(t.u._id)||h.has(t.x?.ally?._id)))continue;let n="";switch(e.vt){case Ao.NUMBER:n=`${Math.floor(t.v).toLocaleString("en-US")}${e.deci?`<span>.${Math.floor(t.v%1*10**e.deci)}</span>`:""}`;break;case Ao.NUMBER_INV:n=`${Math.floor(-t.v).toLocaleString("en-US")}${e.deci?`<span>.${Math.floor(-t.v%1*10**e.deci)}</span>`:""}`;break;case Ao.TIME:{const e=wt(t.v);n=`${e.m}:${e.s}<span>.${e.ms}</span>`;break}case Ao.TIME_INV:{const e=wt(-t.v);n=`${e.m}:${e.s}<span>.${e.ms}</span>`;break}case Ao.FLOOR:n=`${Math.floor(t.v).toLocaleString("en-US")}<span>.${Math.floor(t.v%1*10)}</span>`}c++,p[0]>t.v&&(p=[t.v,c]);let s="";t.x?.ally&&!e.pair&&(s=`together with <b class="ach_userable" data-username="${t.x.ally.username}" data-hover="tap" data-hit="click">${t.x.ally.username.toUpperCase()}</b> - `);let i=!0;t.x?.ally&&e.pair&&(i=t.u.username.length+t.x.ally.username.length<=22);const o=i?"toUpperCase":"toLowerCase";let a=`${t.u.username[o]()}${t.u.supporter?'<img src="/res/supporter-tag.png" title="This person is supporting TETR.IO " />':""}${t.u.country?`<img class="flag" src="/res/flags/${t.u.country.toLowerCase()}.svg" title="${Un[t.u.country]}" />`:""}`,r=!1;if(t.x?.ally&&e.pair&&(r=!0,a=`<b class="ach_userable" data-username="${t.u.username}" data-hover="tap" data-hit="click">${a}</b><span> & </span><b class="ach_userable" data-username="${t.x.ally.username}" data-hover="tap" data-hit="click">${t.x.ally.username[o]()}${t.x.ally.supporter?'<img src="/res/supporter-tag.png" title="This person is supporting TETR.IO " />':""}${t.x.ally.country?`<img class="flag" src="/res/flags/${t.x.ally.country.toLowerCase()}.svg" title="${Un[t.x.ally.country]}" />`:""}</b>`),l+=`\n\t\t\t<div class="achlb_entry${r?"":' ach_userable" data-hover="tap" data-hit="click'}" data-username="${t.u.username}">\n\t\t\t\t<div class="achlb_place">${p[1]}</div>\n\t\t\t\t<div class="achlb_owner">${a}</div>\n\t\t\t\t<div class="achlb_time">${s}${new Date(t.t).toLocaleString()}</div>\n\t\t\t\t<div class="achlb_value">${n}</div>\n\t\t\t</div>\n\t\t`,d++,h.add(t.u._id),t.x?.ally&&h.add(t.x.ally._id),d>=10)break}e.nolb?l='<div class="achlb_empty">this achievement does not have a leaderboard</div>':0===c&&(l='<div class="achlb_empty">nobody has gotten this achievementyet!</div>');const u=_n({msg:`<div class="achtop ns" data-rank="${n}">\n\t\t\t<div class="achievement_icon">\n\t\t\t\t<img class="achievement_icon_frame" src="/res/achievements/frames/${"stub"===n?"none":n}.png" />\n\t\t\t\t<img class="achievement_icon_frame_glint achievement_icon_frame_glint_a" src="/res/achievements/glint-a.png" />\n\t\t\t\t<img class="achievement_icon_frame_glint achievement_icon_frame_glint_b" src="/res/achievements/glint-b.png" />\n\t\t\t\t<img class="achievement_icon_frame_glint achievement_icon_frame_glint_c" src="/res/achievements/glint-c.png" />\n\t\t\t\t${t?`<div class="achievement_icon_ring">\n\t\t\t\t\t<img src="/res/achievements/frames/ring-piece.png" style="clip-path: ${Eo(t)};" />\n\t\t\t\t\t<img src="/res/achievements/frames/ring-piece.png" style="clip-path: ${Eo(t)};" />\n\t\t\t\t</div>`:""}\n\t\t\t\t${o?`<img class="achievement_icon_wreath" src="/res/achievements/wreaths/${o}.png" />`:""}\n\t\t\t\t<div class="achievement_icon_inner" style="background-image: url('/res/achievements/icons/${Math.floor((e.k-1)/64)}.png'); background-position: ${(e.k-1)%8*-100}% ${-100*Math.floor((e.k-1)/8)}%;"></div>\n\t\t\t</div>\n\t\t\t<div class="achievement_info">\n\t\t\t\t<div class="achievement_info_name">${e.name.toUpperCase()}</div>\n\t\t\t\t<div class="achievement_info_value">${s}${i}</div>\n\t\t\t\t${a?`<div class="achievement_info_extra">${a}</div>`:""}\n\t\t\t\t<div class="achievement_info_object">${e.object}</div>\n\t\t\t\t<div class="achievement_info_desc">${e.desc}</div>\n\t\t\t</div>\n\t\t</div><div class="achlb dialog_long ns">${l}</div><div class="tetra_modal_jump ns" data-hover="tap" data-hit="click"> VIEW FULL LEADERBOARD</div>`,classes:["achievements_modal"],buttons:[]});u.querySelectorAll(".ach_userable").forEach((e=>e.addEventListener("click",(t=>{u.classList.add("busy");ka({username:e.dataset.username}).__onclose=()=>{u.classList.remove("busy")},t.stopPropagation()})))),u.querySelector(".tetra_modal_jump").addEventListener("click",(()=>{mn(u),Gs(`https://${_.ch_domain}/achievements/${e.k}`)})),u.querySelector(".tetra_modal_jump").addEventListener("auxclick",(t=>{1===t.button&&Gs(`https://${_.ch_domain}/achievements/${e.k}`)}))}Tn.ready((()=>{document.body.addEventListener("mousemove",(e=>{const t=e.target.closest(".achievement_icon");if(!t)return;const n=t.clientWidth,s=t.clientHeight;t.__grng||(t.__grng=new Array(24).fill(0).map(((e,t)=>Math.random()*(e.i%8>3?3.14:6))));const i=t.__grng;t.style.setProperty("--rx",(e.offsetX-n/2)/n*20+"deg"),t.style.setProperty("--ry",(e.offsetY-s/2)/s*-20+"deg"),t.style.setProperty("--ga",""+(.25*(Math.max(0,Math.sin((e.offsetX/n+i[0])*i[1]))+Math.max(0,Math.sin((e.offsetY/s+i[2])*i[3])))+.5*Math.max(0,Math.sin((e.offsetX/n+i[4])*i[5]))*Math.max(0,Math.sin((e.offsetY/s+i[6])*i[7])))),t.style.setProperty("--gb",""+(.25*(Math.max(0,Math.sin((e.offsetX/n+i[8])*i[9]))+Math.max(0,Math.sin((e.offsetY/s+i[10])*i[11])))+.5*Math.max(0,Math.sin((e.offsetX/n+i[12])*i[13]))*Math.max(0,Math.sin((e.offsetY/s+i[14])*i[15])))),t.style.setProperty("--gc",""+(.25*(Math.max(0,Math.sin((e.offsetX/n+i[16])*i[17]))+Math.max(0,Math.sin((e.offsetY/s+i[18])*i[19])))+.5*Math.max(0,Math.sin((e.offsetX/n+i[20])*i[21]))*Math.max(0,Math.sin((e.offsetY/s+i[22])*i[23]))))}),{passive:!0})}));let Oo=[];function Po(e=!1){"undefined"!=typeof Notification?"granted"===Notification.permission||"denied"===Notification.permission&&!e||Notification.requestPermission():console.warn("Notifications are not available on this device.")}function Ho(e,t,n=!1,s="/res/tetriox256.png",i=void 0,o=null){if("undefined"==typeof Notification)return;if(!1===ot.video.desktopnotifications)return;if(!document.body.classList.contains("nofocus")&&!n)return;const a=new Notification(e,{body:t,icon:s,badge:"/res/tetriox256.png",tag:i});a.onclick=o||(()=>{window.focus(),a.close()}),Oo.push(a),window.IS_ELECTRON&&Rs()}Tn.ready((function(e){Po(!1),window.addEventListener("focus",(function(e){for(const e of Oo)e.close();Oo=[]}))}));const Ro=(()=>{let e=0,t=-1,n=!1,s=0,i=null,o="",a=!1;function r(){n||s<=0||!a&&!document.body.classList.contains("nofocus")?(s--,n=!1,s<=0&&null!==i&&(clearInterval(i),i=null,o="",a=!1),document.title=`${e?`(${e.toLocaleString()}) `:""}${t>-1?`${Math.floor(t/60)}:${(t%60).toString().padStart(2,"0")}  `:""}TETR.IO`,xt("favicon").setAttribute("href",e?"/res/favicon-dot.ico":"/res/favicon.ico")):(n=!0,document.title=o,xt("favicon").setAttribute("href","/res/favicon-alert.ico"))}return{update:r,alert:function(e,t=5,n=250,l=!1){o=e,s=t,a=l,null!==i&&clearInterval(i),i=setInterval(r,n),r()},setNotificationCount:t=>{e=t,r()},setMMTime:e=>{t=e,r()}}})(),Wo=(()=>{"production"===_.mode?Gt((()=>{xt("performancemeter_header").innerHTML="PRODUCTION BUILD - F8 for stats",xt("sb").remove(),xt("sbt").remove()})):Gt((()=>{xt("performancemeter").classList.remove("production"),xt("performancemeter_header").innerHTML="DEVELOPMENT BUILD - F8 for stats"}));let e=!1,t=[],n=[];const s=[],i=[],a=[];let r=0,l=0,c=0,p=0,h=0,d=0,u=0,m=0,g=0,f=0,b=[],C=[],y=[],x=[],A=[],v=[],k=[],w=[];const B=1e3/60;let L=null;function S(){const e=window.performance.now();t.push(e),function(){const e=window.performance.now();A=A.filter((t=>!(e-t>1e3))),v=v.filter((t=>!(e-t>6e4))),k=k.filter((t=>!(e-t>1e3))),w=w.filter((t=>!(e-t>6e4))),t=t.filter((t=>!(e-t>1e3))),b=b.filter((t=>!(e-t.ts>1e3))),C=C.filter((t=>!(e-t.ts>6e4))),y=y.filter((t=>!(e-t.ts>1e3))),x=x.filter((t=>!(e-t.ts>1e3)))}(),u=A.length,m=v.length,g=k.length,f=w.length,r=t.length,n.push({ts:e,fps:r}),n=n.filter((t=>!(e-t.ts>5e3))),c=Math.max(1e-6,b.reduce(((e,t)=>Math.max(e,t.fill)),0)),p=Math.max(1e-6,C.reduce(((e,t)=>Math.max(e,t.fill)),0)),h=x.reduce(((e,t)=>Math.max(e,t.fill)),0),d=y.reduce(((e,t)=>Math.max(e,t.fill)),0),l=n.reduce(((e,t)=>Math.min(e||t.fps,t.fps)),0),z("fps",r),F("fps",l),T("fps",r<40),z("f",Math.round(c/B*1e4)/100),F("f",Math.round(p/B*1e4)/100),T("f",c/B>.8),z("gamef",Math.round(h/c*1e4)/100),F("gamef",Math.round(h/B*1e4)/100),z("drawf",Math.round(d/c*1e4)/100),F("drawf",Math.round(d/B*1e4)/100),z("gamem",u),F("gamem",m),z("drawm",g),F("drawm",f),T("gamem",u>9),T("drawm",g>9),z("ping",s.length?s[s.length-1]:"-"),F("ping",s.length?s.reduce(((e,t)=>Math.max(e,t))):"-"),T("ping",!!s.length&&s[s.length-1]>500),z("ping_spool",i.length?i[i.length-1]:"-"),F("ping_spool",i.length?i.reduce(((e,t)=>Math.max(e,t))):"-"),T("ping_spool",!!i.length&&i[i.length-1]>300),z("ping_backhaul",a.length?a[a.length-1]:"-"),F("ping_backhaul",a.length?a.reduce(((e,t)=>Math.max(e,t))):"-"),T("ping_backhaul",!!a.length&&a[a.length-1]>200)}function z(e,t){L.querySelector(`#perf_${e} h1 span`).innerHTML=t}function F(e,t){L.querySelector(`#perf_${e} h2 span`).innerHTML=t}function T(e,t){t?L.querySelector(`#perf_${e}`).classList.add("warning"):L.querySelector(`#perf_${e}`).classList.remove("warning")}return Gt((()=>{L=xt("performancemeter"),document.addEventListener("keydown",(t=>{119===t.which&&(e||!L.classList.contains("collapsed")&&!L.classList.contains("production")?e||L.classList.contains("production")?(e=!1,o.Ticker.shared.remove(S,this),L.classList.add("off"),L.classList.remove("collapsed")):(L.classList.remove("off"),L.classList.add("collapsed")):(e=!0,o.Ticker.shared.add(S,this),L.classList.remove("off"),L.classList.remove("collapsed")))}),!1),xt("devbuildid").innerHTML=`v${_.version}-${_.mode} | commit ${_.client.commit.id}@${_.client.branch} (${new Date(_.client.commit.time).toLocaleString()}) | server cycle ${_.serverCycle} | build ${_.client.build.id} (${new Date(_.client.build.time).toLocaleString()})<br>\n\t\t\t\t\t\t\t\t\t${window.IS_ELECTRON?"desktop":"browser"} | ${navigator.userAgent}<br>\n\t\t\t\t\t\t\t\t\t${ot.video.graphics||"high"} | ${ot.electron.anglecompat?"COMPAT ON":"compat off"} | <span id="rendererinfo">(no renderer)</span><br>\n\t\t\t\t\t\t\t\t\tgfx <span id="dirtyflag_gfx">OK</span> | net <span id="dirtyflag_net">OK</span> | state <span id="dirtyflag_state">OK</span> | client <span id="dirtyflag_client">OK</span> | gl <span id="dirtyflag_gl">OK</span><br>\n\t\t\t\t\t\t\t\t\tserver: <span id="serverdebuginfo">(not connected)</span>`,xt("version_line").innerHTML=`version ${_.version}-${_.mode.toUpperCase()} (press F8 for more info)`})),Tn.ready((()=>{e||xt("performancemeter").classList.contains("production")||xt("performancemeter").classList.add("collapsed")})),{addGameM:t=>{if(e)for(;t-- >0;)A.push(window.performance.now()),v.push(window.performance.now())},addPing:e=>{s.push(Math.floor(e/2)),s.splice(0,Math.max(0,s.length-12))},addSpoolPing:e=>{i.push(Math.floor(e/2)),i.splice(0,Math.max(0,i.length-12))},addSpoolLatency:e=>{a.push(Math.floor(e/2)),a.splice(0,Math.max(0,a.length-12))}}})(),No=new class{_states=new Map;_despawning=new Map;_elHeader=Symbol("elHeader");_elSub=Symbol("elSub");_elExtra=Symbol("elExtra");_elButtons=Symbol("elButtons");set(e,t){if(this._despawning.get(e)?.remove(),this._states.has(e))this._update(e,this._states.get(e)[1],t,this._states.get(e)[0]),this._states.get(e)[0]=t;else{const n=this._createElement(e);this._update(e,n,t,{}),this._states.set(e,[t,n])}}remove(e){if(!this._states.has(e))return;const t=this._states.get(e)[1];t&&(t.classList.add("hiding"),this._despawning.set(e,t),setTimeout((()=>{t.remove()}),500)),this._states.delete(e)}clear(){for(const[e]of this._states)this.remove(e)}_createElement(e){const t=document.createElement("div");return t.className="ongoing spawning",t.dataset.id=e,xt("ongoing").appendChild(t),t[this._elHeader]=document.createElement("div"),t[this._elHeader].className="ongoing_header",t.appendChild(t[this._elHeader]),t[this._elSub]=document.createElement("div"),t[this._elSub].className="ongoing_sub",t.appendChild(t[this._elSub]),t[this._elExtra]=document.createElement("div"),t[this._elExtra].className="ongoing_extra",t.appendChild(t[this._elExtra]),t[this._elButtons]=document.createElement("div"),t[this._elButtons].className="ongoing_buttons",t.appendChild(t[this._elButtons]),setTimeout((()=>{t.classList.remove("spawning")}),1e3),t}_update(e,t,n,s={}){n.state!==s.state&&(t.dataset.state=n.state??""),n.header!==s.header&&(t[this._elHeader].textContent=n.header??""),n.sub!==s.sub&&(t[this._elSub].textContent=n.sub??""),n.extra!==s.extra&&(t[this._elExtra].textContent=n.extra??""),n.buttons?s.buttons&&n.buttons.join()===s.buttons.join()||(this._createButtons(t,n.buttons),t.dataset.hasbuttons="yes"):s.buttons&&(t[this._elButtons].innerHTML="",t.dataset.hasbuttons="")}_buttons={leaveMatchmaking:["CANCEL MATCHMAKING",()=>{lr.leaveMatchmaking()}],exitRoomZen:["BACK TO ROOM",()=>{Ys.stopNow(),document.body.classList.remove("inmultizen"),Wi(!0),Hi("lobby")}],returnToMatch:["RETURN TO MATCH",()=>{Ys.stopNow(),document.body.classList.remove("inmultizen"),xt("play_returntoroom").click()}]};_createButtons(e,t){e[this._elButtons].innerHTML="";for(const n of t){const t=this._buttons[n];if(!t)continue;const s=document.createElement("div");s.className="ongoing_button"+(t[1]?"":" disabled"),s.dataset.hover="tap",s.dataset.hit="click",s.textContent=t[0],t[1]&&s.addEventListener("click",t[1]),e[this._elButtons].appendChild(s)}}};let $o=[],Go=null,Uo=0,Xo=!1,jo=!1,qo=!1,Ko="normal",Vo=null,Yo=null,Qo=[],Zo=null,Jo=null,ea=0;function ta(e,t){ea+=16384,Wi(!1),xa.BgmFadeOut(1);const n=zt(e.users[0].username),s=e.gamemode??"unknown",i=new B(e.replay);xt("data_replay").innerHTML=`watching <span>${n.toUpperCase()}</span> play <span>${zt(w.Strings.longTypeNames[s]??"UNKNOWN GAMEMODE")}</span>`,xt("replay").classList.remove("hidden"),xt("replaytools").classList.remove("hidden"),xt("replaytools").classList.remove("multi"),xt("replaytools").classList.add("disabled"),xt("replaytools_button_playpause").innerHTML="",xt("replaytools_timestamp").innerHTML="0:00.000<span>frame 0</span>",xt("replaytools_seekbar").setAttribute("style","--progress: 0%;"),xt("replaytools_seekbar_tip").setAttribute("style",""),xt("replaytools_button_playpause").classList.remove("disabled"),xt("replaytools_button_nextround").classList.contains("active")&&xt("replaytools_button_end").click(),Ai=new v("replay",{replay:i}),$o=[],Go=null,Uo=0,jo=!1,Ai.on("start",(function(){xt("replaytools").classList.remove("disabled"),xa.BgmPlaySmoothly("shiroi-hyoutan");const e=""===xt("replaytools_button_playpause").innerHTML?0:{replaytools_button_10x:10,replaytools_button_5x:5,replaytools_button_2x:2,replaytools_button_1x:1,replaytools_button_50x:.5,replaytools_button_25x:.25}[At('.tab[data-scope="replaytools_secondary_right"].active')?.id]??1;Ai.playbackSpeed(e)})),Ai.on("end",(function(){xt("replaytools").classList.add("disabled"),Ys.setUnsafeTimeout((()=>{Wi(!0),xa.BgmPlaySmoothly(document.body.classList.contains("inpair")||document.body.classList.contains("matchmaking")?"touhoudaiensei":t||"shikiichi-made-mousukoshi"),xt("replay").classList.add("hidden"),xt("replaytools").classList.add("hidden")}),500)})),Ai.on("frame",(function(e,t){if(!t){const t=wt(1e3*(e+1)/60);xt("replaytools_timestamp").innerHTML=`${t.m}:${t.s}.${t.ms}<span>frame ${e}</span>`,xt("replaytools_seekbar").setAttribute("style",`--progress: ${e/ia.frames*100}%;`)}if(e===ia.frames){if(xt("replaytools_button_stop").classList.contains("active"))return Ai.playbackSpeed()&&(xt("replaytools_button_playpause").innerHTML="",Ai.playbackSpeed(0)),H.BREAK;if(xt("replaytools_button_loop").classList.contains("active")){if(Ai.playbackSpeed()){const e=Ai.playbackSpeed();Ai.playbackSpeed(0),setTimeout((()=>{if(!Ai.playbackSpeed()){const t=qt(ia.states[0]);Ai.injectState(t),Ai.playbackSpeed(e)}}),500)}return H.BREAK}}})),ia=i.Preprocess(s,n);let o=[],a=15;if("40l"===s||"custom"===s?(o=ia.localPPS,a=15):"blitz"===s?(o=ia.localSPP,a=40):"zenith"!==s&&"zenithex"!==s||(o=ia.climbSpeed,a=15),o.length<=4096){let e=0,t=999;o.forEach((n=>{e=Math.max(e,n[1]),t=Math.min(t,n[1])}));let n="clip-path: polygon(100% 100%, 0% 100%";o.forEach((s=>{n+=t/e<.1?`, ${s[0]/ia.frames*100}% ${100-s[1]/e*100}%`:`, ${s[0]/ia.frames*100}% ${90-(s[1]-t)/(e-t)*90}%`})),n+="); ",o.length>a&&(n+=`background: linear-gradient(to right, #FFF0 0%, #FF780022 ${o[a][0]/ia.frames*100}%, #FF780022 100%);`),xt("replaytools_graph").setAttribute("style",n)}else xt("replaytools_graph").setAttribute("style","");let r="";"40l"===s&&(ia.finesseFault.length<=30&&ia.finesseFault.forEach((e=>{r+=`<div class="replaytools_marker_finesse" style="left: ${e/ia.frames*100}%;"></div>`})),ia.choke.length<=5&&ia.choke.forEach((e=>{r+=`<div class="replaytools_marker_choke" style="left: ${e[0]/ia.frames*100}%; width: ${e[1]/ia.frames*100}%;"></div>`}))),"zenith"!==s&&"zenithex"!==s||ia.chapter.forEach((e=>{r+=`<div class="replaytools_marker_chapter" style="left: ${e[0]/ia.frames*100}%;">${e[1]}</div>`})),xt("replaytools_markers").innerHTML=r,Ai.setGame(ia.options),Ai.createGameHolder(),Ai.location(0,-.1,1),Ai.startGame()}function na(e,t,n,s,i,o,a){jo=!0,qo=!1,Ko="normal",Xo=!1,Zo=i,Jo=s,ea+=16384,Wi(!1),n&&"shiroi-hyoutan"!==n&&(xa.BgmFadeOut(),Yo=n),Vo=n,xt("data_replay").innerHTML=`watching <span>${zt(t[0].username.toUpperCase())}</span> VS <span>${zt(t[1].username.toUpperCase())}</span>${i||s?`, round <span>${o}</span>${lc(`/${a}`)}`:""}`,xt("replay").classList.remove("hidden"),xt("replaytools").classList.remove("hidden"),xt("replaytools").classList.add("disabled"),xt("replaytools").classList.add("multi"),xt("replaytools").classList.toggle("multiround",s||i),xt("replaytools_graph").setAttribute("style",""),xt("replaytools_button_playpause").innerHTML="",xt("replaytools_timestamp").innerHTML="0:00.000<span>frame 0</span>",xt("replaytools_seekbar").setAttribute("style","--progress: 0%;"),xt("replaytools_seekbar_tip").setAttribute("style",""),xt("replaytools_button_backward_round").classList.toggle("disabled",void 0===s),xt("replaytools_button_forward_round").classList.toggle("disabled",void 0===i),xt("replaytools_button_playpause").classList.remove("disabled"),!xt("replaytools_button_nextround").classList.contains("active")||s||i||xt("replaytools_button_end").click();const r=new v("replay",{replay:e[0]}),l=new v("replay",{replay:e[1]});oa.push(r),oa.push(l),Qo=[r,l],r.on("start",(function(){xt("replaytools").classList.remove("disabled"),xa.BgmPlaySmoothly("shiroi-hyoutan");const e=""===xt("replaytools_button_playpause").innerHTML?0:{replaytools_button_10x:10,replaytools_button_5x:5,replaytools_button_2x:2,replaytools_button_1x:1,replaytools_button_50x:.5,replaytools_button_25x:.25}[At('.tab[data-scope="replaytools_secondary_right"].active')?.id]??1;r.playbackSpeed(e),l.playbackSpeed(e)})),r.on("end",sa),l.on("start",(function(){this.options.nosound=!1})),l.on("end",sa);let c=0;r.on("frame",(function(e,t){if(!Xo){if(!t){const t=wt(1e3*(e+1)/60);xt("replaytools_timestamp").innerHTML=`${t.m}:${t.s}.${t.ms}<span>frame ${e}</span>`,xt("replaytools_seekbar").setAttribute("style",`--progress: ${e/Uo*100}%;`)}if(e===Uo){if(2===c)return H.BREAK;if(xt("replaytools_button_stop").classList.contains("active"))return r.playbackSpeed()&&(xt("replaytools_button_playpause").innerHTML="",r.playbackSpeed(0),l.playbackSpeed(0)),H.BREAK;if(xt("replaytools_button_loop").classList.contains("active")){if(r.playbackSpeed()){const e=r.playbackSpeed();r.playbackSpeed(0),l.playbackSpeed(0),setTimeout((()=>{r.playbackSpeed()||(r.injectState(qt($o[0].states[0])),l.injectState(qt($o[1].states[0])),r.playbackSpeed(e),l.playbackSpeed(e))}),500)}return H.BREAK}}else c=0}})),l.on("frame",(function(e,t){if(!Xo)if(e===$o[1].frames){if(1===c)return H.BREAK;if(xt("replaytools_button_stop").classList.contains("active"))return r.playbackSpeed()&&(xt("replaytools_button_playpause").innerHTML="",r.playbackSpeed(0),l.playbackSpeed(0)),H.BREAK;if(xt("replaytools_button_loop").classList.contains("active")){if(r.playbackSpeed()){const e=r.playbackSpeed();r.playbackSpeed(0),l.playbackSpeed(0),setTimeout((()=>{r.playbackSpeed()||(r.injectState(qt($o[0].states[0])),l.injectState(qt($o[1].states[0])),r.playbackSpeed(e),l.playbackSpeed(e))}),500)}return H.BREAK}}else c=0})),r.on("garbage",(()=>l.getPos())),l.on("garbage",(()=>r.getPos()));const p=()=>{const[e,t]=[Math.max(0,r.state.stats.btb-r.state.setoptions.b2bcharge_at+r.state.setoptions.b2bcharge_base),Math.max(0,l.state.stats.btb-l.state.setoptions.b2bcharge_at+l.state.setoptions.b2bcharge_base)];r.setB2BDistance(e-t),l.setB2BDistance(t-e)};r.on("b2bstate",p),l.on("b2bstate",p),$o[0]=e[0].Preprocess("multi"),$o[1]=e[1].Preprocess("multi"),Uo=Math.min($o[0].frames,$o[1].frames),Go=[...$o[0].piece,...$o[1].piece],Go.push(Uo),Go=Go.filter((function(e,t){return Go.indexOf(e)==t&&e<=Uo})),Go.sort(((e,t)=>e-t));const h=$o[0].vs,d=$o[1].vs;d.splice(h.length),h.splice(d.length);const u=[];if(h.forEach(((e,t)=>{u.push([e[0],h[t][1]-d[t][1]])})),u.length<=1e3){let e=1,t=-1;u.forEach((n=>{e=Math.max(e,n[1]),t=Math.min(t,n[1])})),e=Math.max(e,-.5*t),t=Math.min(t,-.5*e);let n="clip-path: polygon(100% 50%, 0% 50%";u.forEach((s=>{n+=s[1]>=0?`, ${s[0]/Uo*100}% ${50-s[1]/e*50}%`:`, ${s[0]/Uo*100}% ${50+s[1]/t*50}%`})),n+=");",xt("replaytools_graph").setAttribute("style",n)}xt("replaytools_markers").innerHTML="",r.setGame($o[0].options),r.createGameHolder(),r.location(-.35,-.1,1,!0),r.startGame(),$o[1].options.nosound=!0,l.setGame($o[1].options),l.createGameHolder(),l.location(.45,-.1,1,!0),l.startGame()}function sa(e){if(Xo)return;Xo=!0;const t=Qo.filter((e=>e!==this))[0];return xt("replaytools").classList.add("disabled"),xt("replaytools_button_backward_round").classList.add("disabled"),xt("replaytools_button_forward_round").classList.add("disabled"),xt("replaytools_button_playpause").classList.add("disabled"),qo?qo=!1:"winner"===e?t.queueEnd("topout",!0):t.endWin(),("next"===Ko||"normal"===Ko&&xt("replaytools_button_nextround").classList.contains("active"))&&Zo?(Ys.setUnsafeTimeout((()=>{$o=[],Go=null,jo=!1,oa.length=0}),"next"===Ko?50:500),void Ys.setUnsafeTimeout((()=>{t.endNow(),Zo()}),"next"===Ko?100:1e3)):"prev"===Ko&&Jo?(Ys.setUnsafeTimeout((()=>{$o=[],Go=null,jo=!1,oa.length=0}),"prev"===Ko?50:500),void Ys.setUnsafeTimeout((()=>{t.endNow(),Jo()}),"prev"===Ko?100:1e3)):(xa.BgmFadeOut(.2),Ys.setUnsafeTimeout((()=>{Wi(!0),xa.BgmPlaySmoothly(document.body.classList.contains("inpair")||document.body.classList.contains("matchmaking")?"touhoudaiensei":Yo||Vo||"shikiichi-made-mousukoshi"),xt("replay").classList.add("hidden"),xt("replaytools").classList.add("hidden"),$o=[],Go=null,jo=!1,oa.length=0}),500),void Ys.setUnsafeTimeout((()=>{t.endNow()}),1e3))}let ia=null,oa=[];Tn.ready((()=>{document.addEventListener("keydown",(e=>{xt("replay").classList.contains("hidden")||document.body.classList.contains("chatfocus")||Ji>=1||(["ARROWLEFT","LEFT"].includes(yt(e))?e.shiftKey?xt("replaytools_button_backward_frame").click():e.ctrlKey?xt("replaytools_button_backward_large").click():xt("replaytools_button_backward_piece").click():["ARROWRIGHT","RIGHT"].includes(yt(e))?e.shiftKey?xt("replaytools_button_forward_frame").click():e.ctrlKey?xt("replaytools_button_forward_large").click():xt("replaytools_button_forward_piece").click():[",","COMMA"].includes(yt(e))?xt("replaytools_button_backward_frame").click():[".","PERIOD"].includes(yt(e))?xt("replaytools_button_forward_frame").click():["J","KEYJ"].includes(yt(e))?xt("replaytools_button_backward_large").click():["L","KEYL"].includes(yt(e))?xt("replaytools_button_forward_large").click():["K","KEYK","SPACE"," "].includes(yt(e))?xt("replaytools_button_playpause").click():["ARROWUP","UP"].includes(yt(e))?xt("replaytools_button_5x").classList.contains("active")?xt("replaytools_button_10x").click():xt("replaytools_button_2x").classList.contains("active")?xt("replaytools_button_5x").click():xt("replaytools_button_1x").classList.contains("active")?xt("replaytools_button_2x").click():xt("replaytools_button_50x").classList.contains("active")?xt("replaytools_button_1x").click():xt("replaytools_button_25x").classList.contains("active")&&xt("replaytools_button_50x").click():["ARROWDOWN","DOWN"].includes(yt(e))&&(xt("replaytools_button_10x").classList.contains("active")?xt("replaytools_button_5x").click():xt("replaytools_button_5x").classList.contains("active")?xt("replaytools_button_2x").click():xt("replaytools_button_2x").classList.contains("active")?xt("replaytools_button_1x").click():xt("replaytools_button_1x").classList.contains("active")?xt("replaytools_button_50x").click():xt("replaytools_button_50x").classList.contains("active")&&xt("replaytools_button_25x").click()),e.repeat||Object.keys(rt).forEach((t=>{if(rt[t].includes(yt(e))&&"exit"===t)xt("exit_replay").click()})))}),!1),xt("exit_replay").addEventListener("click",(function(){jo||Ai.end()})),xt("replaytools_button_25x").addEventListener("click",(function(){jo||Ai.playbackSpeed()&&Ai.playbackSpeed(.25)})),xt("replaytools_button_50x").addEventListener("click",(function(){jo||Ai.playbackSpeed()&&Ai.playbackSpeed(.5)})),xt("replaytools_button_1x").addEventListener("click",(function(){jo||Ai.playbackSpeed()&&Ai.playbackSpeed(1)})),xt("replaytools_button_2x").addEventListener("click",(function(){jo||Ai.playbackSpeed()&&Ai.playbackSpeed(2)})),xt("replaytools_button_5x").addEventListener("click",(function(){jo||Ai.playbackSpeed()&&Ai.playbackSpeed(5)})),xt("replaytools_button_10x").addEventListener("click",(function(){jo||Ai.playbackSpeed()&&Ai.playbackSpeed(10)})),xt("replaytools_button_playpause").addEventListener("click",(function(){if(!jo){if(Ai.playbackSpeed())return xt("replaytools_button_playpause").innerHTML="",void Ai.playbackSpeed(0);Ai.playbackSpeed({replaytools_button_10x:10,replaytools_button_5x:5,replaytools_button_2x:2,replaytools_button_1x:1,replaytools_button_50x:.5,replaytools_button_25x:.25}[At('.tab[data-scope="replaytools_secondary_right"].active')?.id]??1),xt("replaytools_button_playpause").innerHTML=""}})),xt("replaytools_button_forward_frame").addEventListener("click",(function(){if(jo)return;if(xt("replaytools").classList.contains("disabled"))return;Ai.getFrame()>=ia.frames||Ai.advanceFrames(1)})),xt("replaytools_button_forward_piece").addEventListener("click",(function(){if(jo)return;if(xt("replaytools").classList.contains("disabled"))return;const e=Ai.getFrame();for(let t=0;t<ia.piece.length;t++)if(ia.piece[t]>e)return void Ai.advanceFrames(ia.piece[t]-e)})),xt("replaytools_button_forward_large").addEventListener("click",(function(){if(jo)return;if(xt("replaytools").classList.contains("disabled"))return;const e=Ai.getFrame();e>=ia.frames||Ai.advanceFrames(Math.min(ia.frames-e,300),!0)})),xt("replaytools_button_backward_frame").addEventListener("click",(function(){jo||xt("replaytools").classList.contains("disabled")||s(Ai,ia,1)})),xt("replaytools_button_backward_piece").addEventListener("click",(function(){if(jo)return;if(xt("replaytools").classList.contains("disabled"))return;const e=Ai.getFrame();for(let t=ia.piece.length-1;t>=0;t--)if(ia.piece[t]<e)return void s(Ai,ia,e-ia.piece[t])})),xt("replaytools_button_backward_large").addEventListener("click",(function(){jo||xt("replaytools").classList.contains("disabled")||s(Ai,ia,300)}));let e=!1,t=!1;function n(e,t,n){const s=Math.max(0,n-1),i=Math.floor(s/300),o=s-300*i,a=qt(t.states[i]);e.injectState(a),e.advanceFrames(o,!0),e.emit("frame",s,!1),e.__unmuteTimer&&clearTimeout(e.__unmuteTimer),e.__unmuteTimer=setTimeout((()=>{e.soundVolumeAdjust(1),e.__unmuteTimer=null}),50)}function s(e,t,s){const i=e.getFrame();n(e,t,i-s)}xt("replaytools_seekbar").addEventListener("mouseover",(()=>{t=!0})),xt("replaytools_seekbar").addEventListener("mouseout",(()=>{t=!1})),xt("replaytools_seekbar").addEventListener("mousedown",(function(t){if(jo)return;if(xt("replaytools").classList.contains("disabled"))return;e=!0;const s=Ai.getFrame(),i=Math.floor(Math.min(1,Math.max(0,(t.clientX-16)/(window.innerWidth-32)))*ia.frames);s!==i&&n(Ai,ia,i)})),document.addEventListener("mouseup",(()=>{jo||(e=!1)})),document.addEventListener("mousemove",(()=>{if(!jo){if(xt("replaytools").classList.contains("disabled"))return e=!1,void(t=!1);if(e){const e=Ai.getFrame(),t=Math.floor(Math.min(1,Math.max(0,(event.clientX-16)/(window.innerWidth-32)))*ia.frames);e!==t&&n(Ai,ia,t)}if(t){const e=Math.floor(Math.min(1,Math.max(0,(event.clientX-16)/(window.innerWidth-32)))*ia.frames),t=e/ia.frames*100;xt("replaytools_seekbar_tip").setAttribute("style",`--progress: ${t}%;`),xt("replaytools_seekbar").setAttribute("data-border-snapped",t<=10?"left":t>=90?"right":"none");const n=wt(1e3*e/60);let s="",i="",o="",a="";if("40l"===ia.gamemode||"custom"===ia.gamemode){for(let t=ia.localPPS.length-1;t>=0;t--)if(ia.localPPS[t][0]<=e){s=`<div class="seekbar_tip_stat"><span>${ia.localPPS[t][1].toFixed(2)}</span> ${lc("L")}PPS</div>`;break}}else if("blitz"===ia.gamemode){for(let t=ia.localSPP.length-1;t>=0;t--)if(ia.localSPP[t][0]<=e){s=`<div class="seekbar_tip_stat"><span>${ia.localSPP[t][1].toFixed(2)}</span> ${lc("L")}SPP</div>`;break}}else if("zenith"===ia.gamemode||"zenithex"===ia.gamemode)for(let t=ia.climbSpeed.length-1;t>=0;t--)if(ia.climbSpeed[t][0]<=e){s=`<div class="seekbar_tip_stat"><span>${ia.climbSpeed[t][1].toFixed(2)}</span> CSP</div>`;break}if("40l"===ia.gamemode){let t=0;for(let n=e-30;n<e+30;n++)ia.finesseFault.includes(n)&&t++;t&&(o=`<div class="seekbar_tip_issue"><b>${t}</b> finesse piece${1===t?"":"s"}</div>`);for(let t=0;t<ia.choke.length;t++)if(ia.choke[t][0]-30<=e&&ia.choke[t][0]+ia.choke[t][1]+30>=e){a=`<div class="seekbar_tip_issue_severe"><b>${Math.round(1e3*ia.choke[t][1]/60)}</b>${lc("MS")} choke</div>`;break}}for(let t=0;t<ia.chapter.length;t++)if(ia.chapter[t][0]-30<=e&&ia.chapter[t][0]+30>=e){i+=`<div class="seekbar_tip_chapter">${ia.chapter[t][2]}</div>`;break}xt("replaytools_seekbar_tip").innerHTML=`\n\t\t\t\t${i}\n\t\t\t\t<div class="seekbar_tip_time">${n.m}:${n.s}.${n.ms}</div>\n\t\t\t\t${s}\n\t\t\t\t${o}\n\t\t\t\t${a}\n\t\t\t`}}})),xt("exit_replay").addEventListener("click",(function(){jo&&(qo=!0,Ko="exit",oa.forEach((e=>e.end())))})),xt("replaytools_button_backward_round").addEventListener("click",(function(){jo&&(qo=!0,Ko="prev",oa.forEach((e=>e.end())))})),xt("replaytools_button_forward_round").addEventListener("click",(function(){jo&&(qo=!0,Ko="next",oa.forEach((e=>e.end())))})),xt("replaytools_button_25x").addEventListener("click",(function(){jo&&oa[0].playbackSpeed()&&oa.forEach((e=>e.playbackSpeed(.25)))})),xt("replaytools_button_50x").addEventListener("click",(function(){jo&&oa[0].playbackSpeed()&&oa.forEach((e=>e.playbackSpeed(.5)))})),xt("replaytools_button_1x").addEventListener("click",(function(){jo&&oa[0].playbackSpeed()&&oa.forEach((e=>e.playbackSpeed(1)))})),xt("replaytools_button_2x").addEventListener("click",(function(){jo&&oa[0].playbackSpeed()&&oa.forEach((e=>e.playbackSpeed(2)))})),xt("replaytools_button_5x").addEventListener("click",(function(){jo&&oa[0].playbackSpeed()&&oa.forEach((e=>e.playbackSpeed(5)))})),xt("replaytools_button_10x").addEventListener("click",(function(){jo&&oa[0].playbackSpeed()&&oa.forEach((e=>e.playbackSpeed(10)))})),xt("replaytools_button_playpause").addEventListener("click",(function(){if(jo){if(oa[0].playbackSpeed())return xt("replaytools_button_playpause").innerHTML="",void oa.forEach((e=>e.playbackSpeed(0)));oa.forEach((e=>e.playbackSpeed({replaytools_button_10x:10,replaytools_button_5x:5,replaytools_button_2x:2,replaytools_button_1x:1,replaytools_button_50x:.5,replaytools_button_25x:.25}[At('.tab[data-scope="replaytools_secondary_right"].active')?.id]??1))),xt("replaytools_button_playpause").innerHTML=""}})),xt("replaytools_button_forward_frame").addEventListener("click",(function(){if(!jo)return;if(xt("replaytools").classList.contains("disabled"))return;oa[0].getFrame()>=Uo||oa.forEach((e=>e.advanceFrames(1)))})),xt("replaytools_button_forward_piece").addEventListener("click",(function(){if(!jo)return;if(xt("replaytools").classList.contains("disabled"))return;const e=oa[0].getFrame();for(let t=0;t<Go.length;t++)if(Go[t]>e)return void oa.forEach((n=>n.advanceFrames(Go[t]-e)))})),xt("replaytools_button_forward_large").addEventListener("click",(function(){if(!jo)return;if(xt("replaytools").classList.contains("disabled"))return;const e=oa[0].getFrame();e>=Uo||oa.forEach((t=>t.advanceFrames(Math.min(Uo-e,300),!0)))})),xt("replaytools_button_backward_frame").addEventListener("click",(function(){jo&&(xt("replaytools").classList.contains("disabled")||oa.forEach(((e,t)=>{s(e,$o[t],1)})))})),xt("replaytools_button_backward_piece").addEventListener("click",(function(){if(!jo)return;if(xt("replaytools").classList.contains("disabled"))return;const e=oa[0].getFrame();for(let t=Go.length-1;t>=0;t--)if(Go[t]<e)return void oa.forEach(((n,i)=>{s(n,$o[i],e-Go[t])}))})),xt("replaytools_button_backward_large").addEventListener("click",(function(){jo&&(xt("replaytools").classList.contains("disabled")||oa.forEach(((e,t)=>{s(e,$o[t],300)})))})),xt("replaytools_seekbar").addEventListener("mousedown",(function(t){if(!jo)return;if(xt("replaytools").classList.contains("disabled"))return;e=!0;const s=oa[0].getFrame(),i=Math.floor(Math.min(1,Math.max(0,(t.clientX-16)/(window.innerWidth-32)))*Uo);s!==i&&(oa.forEach((e=>e.soundVolumeAdjust(0))),oa.forEach(((e,t)=>{n(e,$o[t],i)})))})),document.addEventListener("mouseup",(()=>{jo&&(e=!1)})),document.addEventListener("mousemove",(()=>{if(jo){if(xt("replaytools").classList.contains("disabled"))return e=!1,void(t=!1);if(e){const e=oa[0].getFrame(),t=Math.floor(Math.min(1,Math.max(0,(event.clientX-16)/(window.innerWidth-32)))*Uo);e!==t&&(oa.forEach((e=>e.soundVolumeAdjust(0))),oa.forEach(((e,s)=>{n(e,$o[s],t)})))}if(t){const e=Math.floor(Math.min(1,Math.max(0,(event.clientX-16)/(window.innerWidth-32)))*Uo),t=e/Uo*100;xt("replaytools_seekbar_tip").setAttribute("style",`--progress: ${t}%;`),xt("replaytools_seekbar").setAttribute("data-border-snapped",t<=10?"left":t>=90?"right":"none");const n=wt(1e3*e/60);let s=0,i=0;for(let t=$o[0].vs.length-1;t>=0;t--)if($o[0].vs[t][0]<=e){s=$o[0].vs[t][1];break}for(let t=$o[1].vs.length-1;t>=0;t--)if($o[1].vs[t][0]<=e){i=$o[1].vs[t][1];break}xt("replaytools_seekbar_tip").innerHTML=`\n\t\t\t\t<div class="seekbar_tip_time">${n.m}:${n.s}.${n.ms}</div>\n\t\t\t\t<div class="seekbar_tip_stat"><span class="sl">${s.toFixed(2)}</span> VS --- <span class="sr">${i.toFixed(2)}</span> VS</div>\n\t\t\t`}}}))}));const aa="INTERFACE",ra="SPECIAL",la="BATTLE",ca="CALM",pa="HURT RECORD",ha="TETR.IO",da=Object.freeze({STATIC:0,DYNAMIC:1,LEGACY:2});function ua(e){this.name=e.name??"unknown",this.untranslatedName=e.untranslatedName??null,this.artist=e.artist??"UNKOWN",this.untranslatedArtist=e.untranslatedArtist??null,this.genre=e.genre??ra,this.source=e.source??"UNKNOWN",this.loop=e.loop??!1,this.loopStart=e.loopStart??0,this.loopEnd=e.loopEnd??null,this.hidden=e.hidden??!0,this.type=e.type??da.LEGACY}const _a={"kuchu-toshi":{name:"aerial city",untranslatedName:"",artist:"CHIKA",untranslatedArtist:"",genre:aa,source:pa,loop:!0,loopStart:11.831,loopEnd:92.579,normalizeDb:-8.29,type:da.LEGACY},"shikiichi-made-mousukoshi":{name:"to the limit",untranslatedName:"",artist:"KAMIYA",untranslatedArtist:"",genre:aa,source:pa,loop:!0,loopStart:3.719,loopEnd:93.031,normalizeDb:-10.47,type:da.LEGACY},touhoudaiensei:{name:"the great eastern expedition",untranslatedName:"",artist:"TAKAYUKI",untranslatedArtist:"",genre:aa,source:pa,loop:!0,loopStart:10.694,loopEnd:216.68,normalizeDb:-8.51,type:da.LEGACY},"asayake-no-taiyou":{name:"morning sun",untranslatedName:"",artist:"KAMOKING",untranslatedArtist:"",genre:aa,source:pa,loop:!0,loopStart:3.009,loopEnd:67.008,normalizeDb:-13.75,type:da.LEGACY},"in-sorrow-and-pains":{name:"in sorrow and pains",untranslatedName:"in sorrow and pains",artist:"MIRERA",untranslatedArtist:"",genre:aa,source:pa,loop:!0,loopStart:4.503,loopEnd:98.533,normalizeDb:-12.44,type:da.LEGACY},"honemi-ni-shimiiru-karasukaze":{name:"piercing wind",untranslatedName:"",artist:"KVK",untranslatedArtist:"KVK",genre:ca,source:pa,loop:!0,loopStart:7.432,loopEnd:150.39,normalizeDb:-12.32,type:da.LEGACY},inorimichite:{name:"inorimichite",untranslatedName:"",artist:"CHIKA",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:15.67,loopEnd:197.355,normalizeDb:-7.95,type:da.LEGACY},"kaze-no-sanpomichi":{name:"wind trail",untranslatedName:"",artist:"CHIKA",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:12.865,loopEnd:227.149,normalizeDb:-6.42,type:da.LEGACY},"muscat-to-shiroi-osara":{name:"muscat and white dishes",untranslatedName:"",artist:"TAKAHASHI TAKASHI",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:8.853,loopEnd:192.853,normalizeDb:-6.21,type:da.LEGACY},"natsuzora-to-syukudai":{name:"summer sky and homework",untranslatedName:"",artist:"TAKAHASHI TAKASHI",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:20.885,loopEnd:132.882,normalizeDb:-5.98,type:da.LEGACY},"success-story":{name:"success story",untranslatedName:"success story",artist:"AKIKO SHIOYAMA",untranslatedArtist:"AKIKO SHIOYAMA",genre:aa,source:pa,loop:!0,loopStart:25.342,loopEnd:103.749,normalizeDb:-3.85,type:da.LEGACY},"kaiser-hige-na-neko":{name:"classy cat",untranslatedName:"",artist:"KAMOKING",untranslatedArtist:"",genre:aa,source:pa,loop:!0,loopStart:0,loopEnd:104.002,normalizeDb:-7.43,type:da.LEGACY},akindo:{name:"akindo",untranslatedName:"AKINDO",artist:"CHIKA",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:7.864,loopEnd:120.03,normalizeDb:-6.72,type:da.LEGACY},"hyper-velocity":{name:"hyper velocity",untranslatedName:"",artist:"KAMOKING",untranslatedArtist:"",genre:ra,source:pa,loop:!1,loopStart:121.011,loopEnd:0,hidden:!0,normalizeDb:-9.56,type:da.LEGACY},philosophy:{name:"philosophy",untranslatedName:"philosophy",artist:"L-side",untranslatedArtist:"L-side",genre:aa,source:pa,loop:!0,loopStart:9.324,loopEnd:122.774,normalizeDb:-7.27,type:da.LEGACY},"yoru-no-niji":{name:"rainbow of the night",untranslatedName:"",artist:"AIBA MAKOTO",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:3.651,loopEnd:144.036,normalizeDb:-7.72,type:da.LEGACY},"shiroi-hyoutan":{name:"white calabash",untranslatedName:"",artist:"CHIKA",untranslatedArtist:"",genre:ra,source:pa,loop:!0,loopStart:17.43,loopEnd:139.694,normalizeDb:-9.78,type:da.LEGACY},smoke:{name:"smoke",untranslatedName:"smoke",artist:"FUJINAWA KAZUHIKO",untranslatedArtist:"",genre:aa,source:pa,loop:!0,loopStart:5.099,loopEnd:139.499,normalizeDb:-10.85,type:da.LEGACY},"aijin-sanka":{name:"lover's song",untranslatedName:"",artist:"OMEGANE",untranslatedArtist:"",genre:aa,source:pa,loop:!0,loopStart:3.835,loopEnd:48.492,normalizeDb:-4.76,type:da.LEGACY},"akai-tsuchi-wo-funde":{name:"step on the scarlet soil",untranslatedName:"",artist:"KAMOKING",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:2.783,loopEnd:126.216,normalizeDb:-11.05,type:da.LEGACY},"burari-tokyo":{name:"hanging out in tokyo",untranslatedName:"TOKYO",artist:"MEESAN",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:9.68,loopEnd:144.039,normalizeDb:-10.36,type:da.LEGACY},"back-water":{name:"backwater",untranslatedName:"",artist:"KAMOKING",untranslatedArtist:"",genre:la,source:pa,loop:!0,loopStart:1.497,loopEnd:113.503,normalizeDb:-12.81,type:da.LEGACY},"burning-heart":{name:"burning heart",untranslatedName:"burning heart",artist:"KAMOKING",untranslatedArtist:"",genre:la,source:pa,loop:!0,loopStart:0,loopEnd:76.803,normalizeDb:-14.81,type:da.LEGACY},"hayate-no-sei":{name:"storm spirit",untranslatedName:"",artist:"KAMOKING",untranslatedArtist:"",genre:la,source:pa,loop:!0,loopStart:24.815,loopEnd:120.752,normalizeDb:-14.8,type:da.LEGACY},"ice-eyes":{name:"ice eyes",untranslatedName:"",artist:"KAMOKING",untranslatedArtist:"",genre:la,source:pa,loop:!0,loopStart:6.867,loopEnd:96.013,normalizeDb:-13.36,type:da.LEGACY},"ima-koso":{name:"the time is now",untranslatedName:"",artist:"TOMOKI",untranslatedArtist:"TOMOKI",genre:la,source:pa,loop:!0,loopStart:5.489,loopEnd:112.124,normalizeDb:-10.8,type:da.LEGACY},prism:{name:"prism",untranslatedName:"",artist:"AIBA MAKOTO",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:0,loopEnd:92.13,normalizeDb:-12.73,type:da.LEGACY},"risky-area":{name:"risky area",untranslatedName:"risky area",artist:"MIKIYA KOMABA",untranslatedArtist:"MIKIYA KOMABA",genre:la,source:pa,loop:!0,loopStart:31.48,loopEnd:322.624,normalizeDb:-13.73,type:da.LEGACY},"fuyu-no-jinkoueisei":{name:"winter satellite",untranslatedName:"",artist:"SUDO MIKADUKI",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:25.956,loopEnd:175.128,normalizeDb:-12.45,type:da.LEGACY},hatsuyuki:{name:"first snow",untranslatedName:"",artist:"YOSHI",untranslatedArtist:"YOSHI",genre:ca,source:pa,loop:!0,loopStart:21.974,loopEnd:144.824,normalizeDb:-9.61,type:da.LEGACY},"kansen-gairo":{name:"main street",untranslatedName:"",artist:"CHIKA",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:17.757,loopEnd:200.975,normalizeDb:-10.24,type:da.LEGACY},"chiheisen-wo-koete":{name:"over the horizon",untranslatedName:"",artist:"KAMOKING",untranslatedArtist:"",genre:la,source:pa,loop:!0,loopStart:2.423,loopEnd:66.402,normalizeDb:-13.81,type:da.LEGACY},"moyase-toushi-yobisamase-tamashii":{name:"burning spirit, awakening soul",untranslatedName:"",artist:"KAMOKING",untranslatedArtist:"",genre:la,source:pa,loop:!0,loopStart:15.38,loopEnd:70.238,normalizeDb:-16.2,type:da.LEGACY},"naraku-heno-abyssmaze":{name:"maze of the abyss",untranslatedName:"",artist:"KAMOKING",untranslatedArtist:"",genre:la,source:pa,loop:!0,loopStart:5.133,loopEnd:123.094,normalizeDb:-14.21,type:da.LEGACY},"samurai-sword":{name:"samurai sword",untranslatedName:"SAMURAI SWORD",artist:"KAMOKING",untranslatedArtist:"",genre:la,source:pa,loop:!0,loopStart:6.587,loopEnd:112.184,normalizeDb:-15.75,type:da.LEGACY},"super-machine-soul":{name:"super machine soul",untranslatedName:"",artist:"KAMOKING",untranslatedArtist:"",genre:la,source:pa,loop:!0,loopStart:22.335,loopEnd:118.335,normalizeDb:-16.48,type:da.LEGACY},"uchuu-5239":{name:"universe 5239",untranslatedName:"5239",artist:"KAMOKING",untranslatedArtist:"",genre:la,source:pa,loop:!0,loopStart:15.555,loopEnd:98.672,normalizeDb:-15.45,type:da.LEGACY},"ultra-super-heros":{name:"ultra super heroes",untranslatedName:"",artist:"KAMOKING",untranslatedArtist:"",genre:la,source:pa,loop:!0,loopStart:1.315,loopEnd:106.273,normalizeDb:-13.55,type:da.LEGACY},"21seiki-no-hitobito":{name:"twenty-first century people",untranslatedName:"21",artist:"OMEGANE",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:0,loopEnd:131.311,normalizeDb:-10.97,type:da.LEGACY},"haru-wo-machinagara":{name:"waiting for spring to come",untranslatedName:"",artist:"OMEGANE",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:5.78,loopEnd:165.795,normalizeDb:-12.37,type:da.LEGACY},"go-go-go-summer":{name:"go go go summer",untranslatedName:"go go go summer",artist:"NOBUHAMU",untranslatedArtist:"NOBUHAMU",genre:ca,source:pa,loop:!0,loopStart:.838,loopEnd:75.499,normalizeDb:-15.57,type:da.LEGACY},"sasurai-no-hitoritabi":{name:"lonely journey",untranslatedName:"",artist:"NAOKI HIRAI",untranslatedArtist:"NAOKI HIRAI",genre:ca,source:pa,loop:!0,loopStart:4.044,loopEnd:149.198,normalizeDb:-13.55,type:da.LEGACY},wakana:{name:"young leaves",untranslatedName:"",artist:"CHIKA",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:14.819,loopEnd:193.702,normalizeDb:-7.74,type:da.LEGACY},"zange-no-ma":{name:"confession",untranslatedName:"",artist:"OMEGANE",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:0,loopEnd:80.533,normalizeDb:-5.35,type:da.LEGACY},"subarashii-nichijou":{name:"amazing everyday",untranslatedName:"",artist:"TSUTOMU",untranslatedArtist:"TSUTOMU",genre:ca,source:pa,loop:!0,loopStart:12.399,loopEnd:140.399,normalizeDb:-14.1,type:da.LEGACY},asphalt:{name:"asphalt",untranslatedName:"asphalt",artist:"CHIKA",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:5.624,loopEnd:75.335,normalizeDb:-7.51,type:da.LEGACY},"madobe-no-hidamari":{name:"by the sunlit window",untranslatedName:"",artist:"CHIKA",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:26.203,loopEnd:91.775,normalizeDb:-6.41,type:da.LEGACY},minamoto:{name:"origin",untranslatedName:"",artist:"CHIKA",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:135.024,loopEnd:322.95,normalizeDb:-6.73,type:da.LEGACY},"sora-no-sakura":{name:"cherry blossom season",untranslatedName:"",artist:"CHIKA",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:0,loopEnd:336.018,normalizeDb:-10.23,type:da.LEGACY},suiu:{name:"raindrops",untranslatedName:"",artist:"CHIKA",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:15.058,loopEnd:121.636,normalizeDb:-5.79,type:da.LEGACY},"freshherb-wreath-wo-genkan-ni":{name:"entrance wreath",untranslatedName:"",artist:"CHIKA",untranslatedArtist:"",genre:ca,source:pa,loop:!0,loopStart:5.169,loopEnd:89.504,normalizeDb:-7.8,type:da.LEGACY},zenith:{name:"zenith tower",untranslatedName:null,artist:"DR OCELOT",untranslatedArtist:null,hidden:!0,genre:ra,source:ha,loop:!1,loopStart:0,loopEnd:0,type:da.DYNAMIC}},ma={calm:["kaze-no-sanpomichi","honemi-ni-shimiiru-karasukaze","inorimichite","muscat-to-shiroi-osara","natsuzora-to-syukudai","akindo","yoru-no-niji","akai-tsuchi-wo-funde","burari-tokyo","prism","fuyu-no-jinkoueisei","hatsuyuki","kansen-gairo","21seiki-no-hitobito","haru-wo-machinagara","go-go-go-summer","sasurai-no-hitoritabi","wakana","zange-no-ma","subarashii-nichijou","asphalt","madobe-no-hidamari","minamoto","sora-no-sakura","suiu","freshherb-wreath-wo-genkan-ni"],battle:["back-water","burning-heart","hayate-no-sei","ice-eyes","ima-koso","risky-area","chiheisen-wo-koete","moyase-toushi-yobisamase-tamashii","naraku-heno-abyssmaze","samurai-sword","super-machine-soul","uchuu-5239","ultra-super-heros"]};ma.random=[...ma.calm,...ma.battle],Object.freeze(ma);const ga=Object.freeze({MENUS:0,SPECTATOR:1,PLAYING:2}),fa=Object.freeze({STATE:"state",HEIGHT:"height",IS_EXPERT:"isExpert",IS_REVERSE:"isReverse",IS_SPEEDRUN:"isSpeedrun"}),ba=Object.freeze({FALSE:0,TRUE:1});function Ca(e){return e?ba.TRUE:ba.FALSE}class ya extends Error{constructor(e){super(e),this.name="RadianceDecodeError"}}const xa=(()=>{const e=new AudioContext,t=window.HARD_VER?`?hv=${window.HARD_VER}`:"",n=new Map;let s=null,i=null,o=null,a=0;const r=e.createGain();r.connect(e.destination);const l=e.createBiquadFilter();async function c(r,c,d){if(i===r)return;d=null==d?0:d+e.currentTime,null!=i&&h();if(_a[r].type===da.DYNAMIC)return void async function(n,s){if(!0===ot.volume.disable)return;const o=await(await fetch(`res/bgm/${n}.rcd${t}`)).arrayBuffer(),r=function(t,n){const s=function(e){const t=new DataView(e),n=U(t),s="tRCD";for(let e=0;e<s.length;e++){if(s.charCodeAt(e)!=X(n))throw new ya("The RCD file is not valid. (Header Bytes)")}const i=q(n),o=q(n);if(1!==i||0!==o)throw new ya(`The RCD file version (${i}.${o}) is not a recognized version.`);const a=j(n),r=[],l=X(n);for(let e=0;e<l;e++){const t=K(n),s=X(n);r[e]={bpm:t,beatsPerBar:s}}const c=new Map,p=X(n);for(let e=0;e<p;e++){const t=Y(n,X(n));c.set(t,e)}const h=[],d=X(n);for(let e=0;e<d;e++){const e=Y(n,X(n));h.push(e)}const u=[],_=X(n);for(let e=0;e<_;e++){const t=G(n),s=new Map,i=X(n);for(let e=0;e<i;e++){const e=X(n),t=X(n);s.set(e,t)}u[e]={conditions:t,swaps:s}}const m=[],g=X(n);for(let e=0;e<g;e++){const t=[],s=X(n);for(let e=0;e<s;e++){const s=X(n);t[e]=s}const i=X(n),o=X(n),a=K(n),r=K(n);m[e]={buffers:t,enabledMin:i,enabledMax:o,changeMin:a,changeMax:r}}const f=new Map,b=X(n);for(let e=0;e<b;e++){const e=X(n),t=K(n),s=G(n),i=[],o=X(n);for(let e=0;e<o;e++){const t=K(n),s=G(n);i[e]={fadeTime:t,conditions:s}}f.set(e,{fadeTime:t,condFades:i,conditions:s})}const C=[],y=X(n);for(let e=0;e<y;e++){const t=K(n),s=G(n);C[e]={fadeTime:t,condFades:[],conditions:s}}const x=[],A=j(n);for(let e=0;e<A;e++){const t=V(n),s=V(n),i=j(n),o=X(n),a=r[X(n)],l=X(n),c=[],p=X(n);for(let e=0;e<p;e++){const t=X(n);c[e]=t}const h=[],d=X(n);for(let e=0;e<d;e++){const t=j(n),s=X(n),i=X(n),o=G(n);h[e]={next:t,point:s,priority:i,conditions:o}}const u=[],_=X(n);for(let e=0;e<_;e++){const t=X(n),s=V(n),i=V(n);u[e]={index:t,start:s,loopEnd:i}}const m=[],g=X(n);for(let e=0;e<g;e++){const t=X(n);m[e]=t}x[e]={start:t,len:s,next:i,buffer:o,timing:a,evo:l,dynLayers:c,nextConds:h,sameLayers:u,preloads:m}}return{entry:a,buffers:h,swapList:u,paramsLen:p,paramsMapping:c,randoms:m,dynLayers:f,sameLayers:C,parts:x}}(t),i=e.createGain(),o=[];for(let e=0;e<s.paramsLen;e++)o[e]=0;const a=[];for(let e=0;e<s.sameLayers.length;e++){const t=H(!1);t.node.connect(i),a[e]=t}const r=new Map,l=[],c=Array.from(s.dynLayers.keys());for(let e=0;e<c.length;e++){const t=H(!1);t.node.connect(i),r.set(c[e],t),l[e]=c[e]}const p=[];for(let e=0;e<s.randoms.length;e++){const t=s.randoms[e],n=new Set;for(let e=0;e<t.buffers.length;e++)n.add(t.buffers[e]);const i={nextChangeTime:Number.MIN_SAFE_INTEGER,off:n,on:new Set};p[e]=i}return{deleteTime:null,comp:s,params:o,name:n,audioFiles:new Map,currentlyLoading:new Set,audioBuffers:new Map,currentlyDecoding:new Set,queue:[],primaryGain:i,sameLayerGains:a,dynLayerGains:r,dynLayersList:l,randomStates:p,nextGcTime:0,requiredBuffers:new Set}}(o,n),c=r.comp.parts[r.comp.entry];if(await W(r,c.buffer),await N(r,c.buffer),a!==s)return;r.primaryGain.connect(l),i=n,B=r,L.push(r)}(r,c);await p(r);const u=await e.decodeAudioData(n.get(r).slice(0));if(a!==c)return;s=e.createBufferSource(),s.buffer=u,s.loop=_a[r].loop,s.loopStart=_a[r].loopStart,s.loopEnd=_a[r].loopEnd,o=e.createGain(),o.connect(l);const _=e.createGain();let m=-2;const g=_a[r].normalizeDb;g&&(m+=g),_.gain.setValueAtTime(Math.pow(10,m/20),e.currentTime),_.connect(o),s.connect(_),s.start(d),i=r}async function p(e){if(!0===ot.volume.disable)return;if(n.has(e))return;if(!_a[e])throw new Error(`BGM List does not contain ${e}.`);const t=await(await fetch(`res/bgm/${e}.mp3`)).arrayBuffer();n.set(e,t)}function h(){u(0)}l.type="lowpass",l.frequency.setValueAtTime(24e3,e.currentTime),l.connect(r);const d=1;function u(t=d){if(!0===ot.volume.disable)return;if(null==i)return;const n=_a[i].type;if(i=null,n===da.DYNAMIC)return void function(t){if(null==B)return;const n=e.currentTime,s=n+t;B.primaryGain.gain.setValueAtTime(1,e.currentTime),B.primaryGain.gain.exponentialRampToValueAtTime(.01,s),B.deleteTime=e.currentTime+t,B=null}(t);if(null==s)return;const a=e.currentTime+t;o.gain.setValueAtTime(1,e.currentTime),o.gain.exponentialRampToValueAtTime(.01,a),s.stop(a),s=null}function _(e,t=d){if(null==e||""===e)return;if(!0===ot.volume.disable)return;if(i===e)return;a++;const n=null==i?0:t;return u(n),c(e,a,n)}function m(e){let t=0;switch((ot.volume.bgmtweak||{})[e]||"base"){case"ban":t=0;break;case"minmin":t=1;break;case"min":t=2;break;case"base":t=4;break;case"plus":t=8;break;case"plusplus":t=16}return t}const g=new Map;let f;const b=new WeakMap,C=new Set(["mission","mission_free","mission_versus","mission_league","cutin_superlobby","victory","failure","matchintro"]),y=new Set(["social_dm","social_invite","social_notify_major","social_notify_minor","social_offline","social_online"]);async function x(){const n=`/sfx/tetrio.${""===(new Audio).canPlayType("audio/ogg")?"aac":"opus"}.rsd${t}`,s=await(await fetch(n)).arrayBuffer(),i=U(new DataView(s)),o="tRSD";for(let e=0;e<4;e++){if(o.charCodeAt(e)!=X(i))throw new ya("The RSD file is not valid. (Header Bytes)")}const a=q(i),r=q(i);if(1!==a||0!==r)throw new ya(`The RSD file version (${a}.${r}) is not a recognized version.`);g.clear();let l=null,c="";for(;;){const e=K(i),t=q(i),n=Y(i,t);if(null!=l&&(l.len=e-l.offset,g.set(c,l)),l={offset:e,len:0},c=n,0===t)break}const p=q(i);f=await e.decodeAudioData(s.slice(i.offset,i.offset+p))}const A=Object.freeze({RANDOM:0,EQUAL:1,NOT_EQUAL:2,GREATER_THAN:3,GREATER_THAN_EQUAL:4,LESS_THAN:5,LESS_THAN_EQUAL:6}),v=Object.freeze({BAR:0,PART:1});function k(e,t){return Math.round(e*t.beatsPerBar*60/t.bpm*1e3)/1e3}const w=(new Audio).canPlayType("audio/ogg")?"ogg":"m4a";let B=null;const L=[];const S=[];function z(e){return e[Math.floor(Math.random()*e.length)]}function F(e,t){for(let n=0;n<t.length;n++){const s=t[n],i=e.params[s.index],o=s.val;switch(s.op){case A.RANDOM:if(!T(e,s.index))return!1;break;case A.EQUAL:if(i!==o)return!1;break;case A.NOT_EQUAL:if(i===o)return!1;break;case A.GREATER_THAN:if(i<=o)return!1;break;case A.GREATER_THAN_EQUAL:if(i<o)return!1;break;case A.LESS_THAN:if(i>=o)return!1;break;case A.LESS_THAN_EQUAL:if(i>o)return!1}}return!0}function T(e,t){for(let n=0;n<e.randomStates.length;n++)if(e.randomStates[n].on.has(t))return!0;return!1}function I(t,n,s){s<e.currentTime&&(s=e.currentTime);const i=t.comp.parts[n],o=P(t,i.buffer);if(!$(t,o))return null;const a=s+i.len,r=e.createBufferSource(),l=t.audioBuffers.get(o);r.buffer=l,r.connect(t.primaryGain),r.start(s,i.start,i.len);const c=[];for(let n=0;n<i.sameLayers.length;n++){const o=i.sameLayers[n],a=e.createBufferSource();a.buffer=l,a.connect(t.sameLayerGains[o.index].node),o.loopEnd>0&&(a.loop=!0,a.loopStart=o.start,a.loopEnd=o.loopEnd),a.start(s,o.start,i.len),c[n]=a}return{index:n,src:r,startTime:s,endTime:a,cancelled:-1,part:i,sameLayers:c,dynLayers:new Map,buffer:o}}function E(t,n){if(n.endTime-e.currentTime<0)return;const s=n.part.dynLayers;for(let i=0;i<s.length;i++){const o=s[i],a=t.dynLayerGains.get(o),r=e.currentTime>=a.disableAtTime,l=n.dynLayers.has(o);if(r&&l){n.dynLayers.get(o).stop(),n.dynLayers.delete(o)}else if(!r&&!l){const s=e.createBufferSource(),i=P(t,o);if(!$(t,i))continue;if(s.buffer=t.audioBuffers.get(i),s.connect(a.node),n.startTime<e.currentTime){s.start(e.currentTime,n.part.start+(e.currentTime-n.startTime),n.endTime-e.currentTime)}else s.start(n.startTime,n.part.start,n.part.len);n.dynLayers.set(o,s)}}}function M(e,t,n,s=!1){const i=I(e,t,n);if(null==i)return!1;if(s){for(let t=1;t<e.queue.length;t++)D(e.queue[t]);e.queue.length=1}return e.queue.push(i),!0}function D(e,t=0){e.src.stop(t);for(let n=0;n<e.sameLayers.length;n++)e.sameLayers[n].stop(t);for(let n=0;n<e.part.dynLayers.length;n++){const s=e.dynLayers.get(e.part.dynLayers[n]);null!=s&&s.stop(t)}}function O(t,n){if(n.priority<=t.queue[0].cancelled)return;const s=t.queue[0],i=n.point===v.PART?s.endTime:function(t,n){let s=0,i=0;for(;s<e.currentTime;)s=t+k(i,n),i++;return s}(s.startTime,s.part.timing);M(t,n.next,i,!0)&&(D(s,i),s.cancelled=n.priority,s.endTime=i)}function P(e,t){let n=t;const s=e.comp.swapList;for(let i=0;i<s.length;i++){const o=s[i];if(!F(e,o.conditions))continue;const a=o.swaps.get(t);null!=a&&(n=a)}return n}function H(t=!1){const n=e.createGain();n.gain.value=t?1:0;return{node:n,state:t,disableAtTime:t?Number.MAX_SAFE_INTEGER:0}}function R(t,n,s){if(t.state===n)return;const i=e.currentTime,o=t.node.gain.value,a=n?1:0,r=s*Math.abs(a-o);t.node.gain.cancelScheduledValues(i),t.node.gain.setValueAtTime(o,i),t.node.gain.linearRampToValueAtTime(a,i+r),t.state=n;t.disableAtTime=n?Number.MAX_SAFE_INTEGER:i+r}async function W(e,t){if(e.audioFiles.has(t))return;if(e.currentlyLoading.has(t))return;e.currentlyLoading.add(t);const n=e.comp.buffers[t],s=await(await fetch(`res/bgm/${e.name}/${n}.${w}`)).arrayBuffer();e.audioFiles.set(t,s),e.currentlyLoading.delete(t)}async function N(t,n){t.audioFiles.has(n)&&(t.currentlyDecoding.has(n)||t.audioBuffers.has(n)||(t.currentlyDecoding.add(n),t.audioBuffers.set(n,await e.decodeAudioData(t.audioFiles.get(n).slice(0))),t.currentlyDecoding.delete(n)))}function $(e,t){return e.audioFiles.has(t)?!!e.audioBuffers.has(t)||(N(e,t),!1):(W(e,t),!1)}function G(e){const t=[],n=X(e);for(let s=0;s<n;s++){const n=X(e),i=X(e),o=K(e);t[s]={op:n,index:i,val:o}}return t}function U(e){return{view:e,offset:0}}function X(e){return e.view.getUint8(e.offset++)}function j(e){const t=e.view.getUint16(e.offset,!0);return e.offset+=2,t}function q(e){const t=e.view.getUint32(e.offset,!0);return e.offset+=4,t}function K(e){const t=e.view.getFloat32(e.offset,!0);return e.offset+=4,t}function V(e){const t=e.view.getFloat64(e.offset,!0);return e.offset+=8,t}function Y(e,t){let n="";for(let s=0;s<t;s++){const t=X(e);if(t<32||t>126)throw new ya("Malformed string or length.");n+=String.fromCharCode(t)}return n}return{BgmLoadFile:p,BgmSetVolume:function(e){!0!==ot.volume.disable&&(r.gain.value=e)},BgmSetLowPass:function(t){!0!==ot.volume.disable&&(l.frequency.setValueAtTime(l.frequency.value,e.currentTime),l.frequency.exponentialRampToValueAtTime(t?450:24e3,e.currentTime+.3))},BgmPlaySmoothly:_,BgmPlaySmoothlyWithRandom:async function(e,t=d){if(null!=e&&""!==e&&!0!==ot.volume.disable){if("RANDOM"===e.substring(0,6)){const n=6===e.length?"random":e.substring(6);if(null==ma[n])throw new Error(`There is no random OST pool with the id of ${n}`);const s=function(e){const t=[];for(let n=0;n<e.length;n++){const s=m(e[n]);t[n]=(t[n-1]||0)+s}const n=t[t.length-1],s=Math.random()*n;let i=null;for(let n=0;n<e.length;n++)if(0!==t[n]&&s<=t[n]){i=e[n];break}if(null===i)return e[Math.floor(Math.random()*e.length)];return i}(ma[n]);return await _(s,t),void Oi(s)}await _(e,t),Oi(e)}},BgmKill:h,BgmFadeOut:u,BgmGetCurrent:function(){return i},SeInit:async function(){try{await x()}catch(e){Qt({msg:`the sound effects could not be loaded due to an error: ${e.message.toLowerCase()}`,color:"#b51616",icon:"error"}),console.error(e)}Tn.finishLoad("sfx")},SePlay:function(t,n=1,s=0,i=1){if(null==f)return null;const o=g.get(t);if(null==o)return null;if(!0===ot.volume.disable)return null;const a=function(e,t){return C.has(e)?Math.min(t*ot.volume.music,ot.volume.music):ot.notifications.forcesound&&y.has(e)?1:Math.min(t*ot.volume.sfx,ot.volume.sfx)}(t,n);if(a<=0)return null;const r=e.createBufferSource();r.buffer=f;const l=e.createGain();l.connect(e.destination);const c=e.createStereoPanner();c.connect(l),r.connect(c),l.gain.value=a,"minimal"!==ot.video.graphics&&(c.pan.value=s),"minimal"!==ot.video.graphics&&(r.playbackRate.value=i),r.start(e.currentTime,o.offset,o.len);const p={};return b.set(p,r),p},SeStop:function(e){if(!0===ot.volume.disable)return;const t=b.get(e);null!=t&&t.stop()},SeHotSwap:async function(){try{await x()}catch(e){Qt({msg:`the sound effects could not be hotswapped due to an error: ${e.message.toLowerCase()}`,color:"#b51616",icon:"error"}),console.error(e)}},BgmDynUpdate:function(){if(!0!==ot.volume.disable){S.length=0;for(let t=0;t<L.length;t++){const n=L[t];if(null!=n.deleteTime&&e.currentTime>=n.deleteTime){for(let e=0;e<n.queue.length;e++)D(n.queue[e]);S.push(t);continue}if(n.requiredBuffers.clear(),0===n.queue.length){const t=I(n,n.comp.entry,e.currentTime);if(null==t)continue;n.queue.push(t)}for(;null!=n.queue[1]&&n.queue[0].endTime<e.currentTime;){D(n.queue.shift())}const s=n.queue[n.queue.length-1],i=n.queue[0];s.endTime-e.currentTime<5&&i.cancelled<0&&M(n,s.part.next,s.endTime);const o=i.part.preloads;for(let e=0;e<o.length;e++){const t=P(n,o[e]);n.requiredBuffers.add(t),$(n,t)}for(let t=0;t<n.comp.randoms.length;t++){const s=n.comp.randoms[t],i=n.randomStates[t];if(e.currentTime>=i.nextChangeTime){const t=Math.random()*(s.changeMax-s.changeMin)+s.changeMin;i.nextChangeTime=e.currentTime+t;const n=[],o=i.on.size<s.enabledMax,a=i.on.size>s.enabledMin;if(i.on.size<=s.enabledMax&&i.on.size>=s.enabledMin&&n.push(0),o&&n.push(1),a&&n.push(2),0===n.length)continue;switch(z(n)){case 0:{const e=z(Array.from(i.off)),t=z(Array.from(i.on));i.on.add(e),i.on.delete(t),i.off.add(t),i.off.delete(e);break}case 1:{const e=z(Array.from(i.off));i.on.add(e),i.off.delete(e);break}case 2:{const e=z(Array.from(i.on));i.on.delete(e),i.off.add(e);break}}}}for(let e=0;e<n.comp.sameLayers.length;e++){const t=n.comp.sameLayers[e];R(n.sameLayerGains[e],F(n,t.conditions),t.fadeTime)}for(let e=0;e<n.queue.length;e++){const t=n.queue[e];for(let e=0;e<t.part.dynLayers.length;e++){const s=t.part.dynLayers[e],i=n.comp.dynLayers.get(s),o=n.dynLayerGains.get(s),a=F(n,i.conditions);if(a&&!$(n,s))continue;let r=i.fadeTime;for(let e=0;e<i.condFades.length;e++){const t=i.condFades[e];F(n,t.conditions)&&(r=t.fadeTime)}R(o,a,r)}E(n,t)}let a=null,r=-1;for(let e=0;e<i.part.nextConds.length;e++){const t=i.part.nextConds[e];F(n,t.conditions)&&r<=t.priority&&(a=t,r=t.priority)}if(null!=a&&O(n,a),e.currentTime>=n.nextGcTime){n.nextGcTime=e.currentTime+.2;for(let e=0;e<n.queue.length;e++){const t=n.queue[e];n.requiredBuffers.add(t.buffer);const s=Array.from(t.dynLayers.keys());for(let e=0;e<s.length;e++)n.requiredBuffers.add(s[e])}const t=Array.from(n.audioBuffers.keys());for(let e=0;e<t.length;e++){const s=t[e];n.requiredBuffers.has(s)||n.audioBuffers.delete(s)}}}for(let e=0;e<S.length;e++)L.splice(S[e],1)}},BgmDynSetParam:function(e,t){if(null==B)return;const n=B.comp.paramsMapping.get(e);null!=n&&(B.params[n]=t)},BgmDynGetTiming:function(){if(null==B||!0===ot.volume.disable||null==B.queue[0])return{progressToNextBar:0,progressToNextBeat:0,currentBeatInBar:0,beatsPerBar:0,evo:0};const t=B.queue[0].part.timing,n=(e.currentTime-B.queue[0].startTime)/(60/t.bpm),s=Math.floor(n%t.beatsPerBar);return{progressToNextBar:n/t.beatsPerBar%1,progressToNextBeat:n%1,currentBeatInBar:s,beatsPerBar:t.beatsPerBar,evo:B.queue[0].part.evo}},BgmDynDebugGetCtx:function(){return B},StartChromeThrottleHack:async function(){if(""===(new Audio).canPlayType("audio/ogg")||window.IS_ELECTRON)return;const t=await(await fetch("/res/silence.ogg")).arrayBuffer(),n=await e.decodeAudioData(t),s=e.createBufferSource();s.buffer=n,s.loop=!0,s.connect(e.destination),s.start()},SOUNDTEST_GetAllNames:function(){const e=Array.from(g.keys());return e.sort(),e},HOOK_LoadBgmFromUrl:async function(e,t=_a[e]){if(!0===ot.volume.disable)return!1;if(n.has(e))return!0;_a[e]=t;let s=null;try{const t=await fetch(e);return!!t.ok&&(s=await t.arrayBuffer(),!0)}catch{return!1}finally{n.set(e,s)}}}})();Tn.ready((()=>{xa.StartChromeThrottleHack(),o.Ticker.shared.add((()=>xa.BgmDynUpdate()))})),Gt((()=>{xa.SeInit(),xa.BgmLoadFile("kuchu-toshi"),setInterval((()=>xa.BgmDynUpdate()),500)}));const Aa=(()=>{function e(e){return e.list[e.current]}function t(e){e.current=(e.current+1)%e.list.length}function n(e){e.current=(e.current+e.list.length-1)%e.list.length}const s={list:null,current:0},i={list:null,current:0},o=["soundtest_sound","soundtest_music","soundtest_dyn"],a=[s,i];let r=0,l=1,c=0,p=new Set,h=null,d=0,u=null,_=null,m=!1,g="";const f=[];let b=0;function C(){if(b=0,f.length=0,0===g.length)return;const e=a[r].list;for(const t of e){let e=0,n=0;const s=[];let i=!0;for(const o of g){const a=t.indexOf(o,n);if(-1===a){i=!1;break}e=Math.max(e,a-n),n=a+1,s.push(a)}i&&f.push([t,e,s])}f.sort(((e,t)=>e[1]-t[1]))}let y=0,x=!1,A=0,v="";function k(){d++,d>180&&(!function(){const e=performance.now(),t=new Set;for(const n of p)e-n[1]<=1e4&&t.add(n);p=t}(),d=0);const e=xa.BgmGetCurrent();e!==u&&(xt("soundtest_currentsongplaying").innerText=xa.BgmGetCurrent(),u=e);const t=ot.volume.sfx,n=ot.volume.music;t===h&&n===_||(T(),h=t,_=n),function(){const e=xa.BgmDynGetTiming();xt("soundtest_dynbars").innerText=`${e.currentBeatInBar+1} / ${e.beatsPerBar}`,xt("soundtest_dynprogress").style.width=`${Math.round(100*e.progressToNextBeat)}%`,xt("soundtest_dynprogressbar").style.width=`${Math.round(100*e.progressToNextBar)}%`;const t=xa.BgmDynDebugGetCtx();if(null==t)return;const n=t.queue.map((e=>e.index)).join(" ");xt("soundtest_dynqueue").textContent=n,xt("soundtest_dynloading").textContent=Array.from(t.currentlyLoading.values()).sort(((e,t)=>e-t)).join(" "),xt("soundtest_dynloaded").textContent=Array.from(t.audioFiles.keys()).sort(((e,t)=>e-t)).join(" "),xt("soundtest_dyndecoding").textContent=Array.from(t.currentlyDecoding.values()).sort(((e,t)=>e-t)).join(" "),xt("soundtest_dyndecoded").textContent=Array.from(t.audioBuffers.keys()).sort(((e,t)=>e-t)).join(" ");const s=Array.from(t.audioFiles.entries()).reduce(((e,t)=>e+t[1].byteLength/1048576),0),i=Array.from(t.audioBuffers.entries()).reduce(((e,t)=>{const n=t[1];return e+n.numberOfChannels*n.length*4/1048576}),0);xt("soundtest_dynmemuse").textContent=`${(i+s).toFixed(2)}MB`,xt("soundtest_dyndynlayers").textContent=Array.from(t.dynLayerGains.values()).map((e=>e.node.gain.value.toFixed(2))).join(" "),xt("soundtest_dynsamelayers").textContent=t.sameLayerGains.map((e=>e.node.gain.value.toFixed(2))).join(" ");const o=xt("soundtest_dynparams");for(;o.lastChild;)o.lastChild.remove();for(const[e,n]of t.comp.paramsMapping.entries()){const s=document.createElement("div"),i=document.createElement("b");i.textContent=`${n===A?"> ":"  "}${e}: `;let a=t.params[n].toString();n===A&&""!=v&&(s.classList.add("flash"),a=v);const r=document.createElement("span");r.textContent=`${a}`,s.appendChild(i),s.appendChild(r),o.appendChild(s)}}();const s=xa.BgmDynGetTiming().currentBeatInBar;s!=y&&x&&xa.SePlay(0===s?"metronome_down":"metronome"),y=s;const i=xa.BgmDynDebugGetCtx();null!=i&&(A>=i.comp.paramsLen||A<0||Number.isNaN(A))&&(A=0)}function w(o){if(m){if("Escape"===o.code)return o.preventDefault(),m=!1,void E();if("Enter"===o.code||"Space"===o.code)return o.preventDefault(),0!==f.length&&(!function(e,t){const n=e.list.indexOf(t);-1!==n&&(e.current=n)}(a[r],f[b][0]),S(),F()),m=!1,void E();if("<"===o.key||">"===o.key)return;switch(o.code){case"ArrowUp":o.preventDefault(),b=(b+f.length-1)%f.length,I();break;case"ArrowDown":o.preventDefault(),b=(b+1)%f.length,I()}return"Backspace"===o.code?(o.preventDefault(),g=o.ctrlKey?"":g.substring(0,g.length-1),C(),void I()):void(1===o.key.length&&(o.preventDefault(),g+=o.key,C(),I()))}if("Escape"===o.code&&""===v||"KeyQ"===o.code)return o.preventDefault(),Wi(!0),Hi("home"),document.removeEventListener("keydown",w),Nl.ticker.remove(k),void B.remove();switch(o.code){case"KeyF":case"Slash":return o.preventDefault(),m=!0,I(),void E();case"KeyM":return o.preventDefault(),r=(r+1)%3,E(),g="",void C();case"PageUp":case"PageDown":{o.preventDefault();const e="PageDown"===o.code?-1:1;return void(o.shiftKey&&!o.ctrlKey?ci(e,"se"):o.ctrlKey&&!o.shiftKey?ci(e,"bgm"):ci(e))}}if(0===r){const i=o.shiftKey?.2:.1,a=o.shiftKey?.1:.05;switch(o.code){case"Space":{o.preventDefault();const t=xa.SePlay(e(s),l,c);p.add([t,performance.now()]);break}case"KeyR":o.preventDefault(),l=1,c=0,z();break;case"ArrowUp":o.preventDefault(),l=Math.min(l+a,1),z();break;case"ArrowDown":o.preventDefault(),l=Math.max(l-a,0),z();break;case"ArrowLeft":o.preventDefault(),o.ctrlKey?(c=Math.max(c-i,-1),z()):(n(s),S());break;case"ArrowRight":o.preventDefault(),o.ctrlKey?(c=Math.min(c+i,1),z()):(t(s),S());break;case"KeyX":o.preventDefault();for(const e of p)xa.SeStop(e[0]);p.clear()}}else if(1===r)switch(o.code){case"Space":o.preventDefault(),xa.BgmPlaySmoothly(e(i));break;case"ArrowLeft":o.preventDefault(),n(i),F();break;case"ArrowRight":o.preventDefault(),t(i),F();break;case"KeyX":o.preventDefault(),o.shiftKey?xa.BgmFadeOut():xa.BgmKill()}else if(2===r){const e=xa.BgmDynDebugGetCtx(),t=null==e?0:e.comp.paramsLen;switch(o.code){case"KeyT":o.preventDefault(),x=!x;break;case"ArrowUp":o.preventDefault(),A=(A+t-1)%t;break;case"ArrowDown":o.preventDefault(),A=(A+1)%t;break;case"Backspace":o.preventDefault(),v=o.ctrlKey?"":v.substring(0,v.length-1);break;case"Esc":o.preventDefault(),""===v&&(v="");break;case"Enter":case"NumpadEnter":if(o.preventDefault(),""!=v){let t=Number.parseFloat(v);Number.isNaN(t)&&(t=0),null!=e&&(e.params[A]=t),v=""}}if(1===o.key.length){const e=Number.parseInt(o.key);Number.isNaN(e)&&"."!==o.key||(o.preventDefault(),v+=o.key)}}}let B=null;const L=new Intl.NumberFormat("en-US",{maximumFractionDigits:2,minimumFractionDigits:2});function S(){xt("soundtest_currentsound").innerText=e(s)}function z(){xt("soundtest_sound_vol").innerText=L.format(l),xt("soundtest_sound_pan").innerText=L.format(c)}function F(){const t=e(i);xt("soundtest_currentsong").innerText=t,xt("soundtest_currentsong_name").innerText=_a[t].name?.toUpperCase()||"",xt("soundtest_currentsong_nameu").innerText=_a[t].untranslatedName?.toUpperCase()||"",xt("soundtest_currentsong_artist").innerText=_a[t].artist?.toUpperCase()||"",xt("soundtest_currentsong_artistu").innerText=_a[t].untranslatedArtist?.toUpperCase()||"",xt("soundtest_currentsong_genre").innerText=_a[t].genre,xt("soundtest_currentsong_source").innerText=_a[t].source}function T(){xt("soundtest_sevol").innerText=L.format(ot.volume.sfx),xt("soundtest_bgmvol").innerText=L.format(Math.round(100*ot.volume.music)/100)}function I(){xt("soundtest_searchquery").innerText=g;const e=xt("soundtest_searchitems");for(;e.firstChild;)e.firstChild.remove();for(let t=0;t<f.length&&t<15;t++){const[n,,s]=f[t],i=document.createElement("div");let o="";t===b?(i.classList.add("flash"),o+="> "):o+="&nbsp;&nbsp;";for(let e=0;e<n.length;e++)o+=-1===s.indexOf(e)?`<span class="darkened">${n[e]}</span>`:`${n[e]}`;i.innerHTML=o,e.appendChild(i)}}function E(){for(const e of xt("soundtest_maincontainer").children)e.classList.add("hidden");m?xt("soundtest_search").classList.remove("hidden"):xt(o[r]).classList.remove("hidden")}let M=0,D=!1;const O="KeyT";return{Start:function(){document.addEventListener("keydown",w),Nl.ticker.add(k),null==s.list&&(s.list=xa.SOUNDTEST_GetAllNames()),null==i.list&&(i.list=Array.from(Object.keys(_a))),B=function(){const e=document.createElement("div");return e.classList.add("radianceinfo_root"),e.classList.add("soundtest_root"),e.innerHTML='\n\t\t<h1 id="soundtest_title">Radiance Test</h1>\n\t\t<div>\n\t\t\t<b>SE Vol: </b><span id="soundtest_sevol"></span>\n\t\t\t<br>\n\t\t\t<b>BGM Vol: </b><span id="soundtest_bgmvol"></span>\n\t\t</div>\n\t\t<br>\n\t\t<div id="soundtest_maincontainer">\n\t\t\t<div id="soundtest_sound" class="hidden">\n\t\t\t\t<h2>SE</h2>\n\t\t\t\t<div>\n\t\t\t\t\t<b>ID: </b><span id="soundtest_currentsound"></span>\n\t\t\t\t\t<br><br>\n\t\t\t\t\t<b>Vol: </b><span id="soundtest_sound_vol"></span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b>Pan: </b><span id="soundtest_sound_pan"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id="soundtest_music" class="hidden">\n\t\t\t\t<h2>BGM</h2>\n\t\t\t\t<div>\n\t\t\t\t\t<b>ID: </b><span id="soundtest_currentsong"></span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b>Name: </b><span id="soundtest_currentsong_name"></span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b>Name (Original): </b><span id="soundtest_currentsong_nameu"></span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b>Artist: </b><span id="soundtest_currentsong_artist"></span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b>Artist (Original): </b><span id="soundtest_currentsong_artistu"></span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b>Genre: </b><span id="soundtest_currentsong_genre"></span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b>Source: </b><span id="soundtest_currentsong_source"></span>\n\t\t\t\t\t<br><br>\n\t\t\t\t\t<b>Now Playing: </b><span id="soundtest_currentsongplaying"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id="soundtest_dyn" class="hidden">\n\t\t\t\t<h2>BGM Dynamics</h2>\n\t\t\t\t<div>\n\t\t\t\t\t<b>Bar: </b><span id="soundtest_dynbars"></span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<div class="progress-container">\n\t\t\t\t\t\t<div id="soundtest_dynprogress" class="progress-bar"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="progress-container">\n\t\t\t\t\t\t<div id="soundtest_dynprogressbar" class="progress-bar"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b>Queue......: </b><span id="soundtest_dynqueue"></span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b>Downloading: </b><span id="soundtest_dynloading"></span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b>Cached.....: </b><span id="soundtest_dynloaded"></span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b>Decoding...: </b><span id="soundtest_dyndecoding"></span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b>In Memory..: </b><span id="soundtest_dyndecoded"></span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b>Memory Use.: </b><span id="soundtest_dynmemuse"></span>\n\t\t\t\t\t<br><br>\n\t\t\t\t\t<b>Dyn Layers.: </b><span id="soundtest_dyndynlayers"></span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b>Same Layers: </b><span id="soundtest_dynsamelayers"></span>\n\t\t\t\t\t<br><br>\n\t\t\t</div>\n\t\t\t\t<div id="soundtest_dynparams">\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id="soundtest_search" class="hidden">\n\t\t\t\t<h2>Search</h2>\n\t\t\t\t<div>\n\t\t\t\t\t<span id="soundtest_searchquery"></span><span class="text-entry">_</span>\n\t\t\t\t</div>\n\t\t\t\t<br>\n\t\t\t\t<div id="soundtest_searchitems">\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t',e}(),document.body.appendChild(B),S(),F(),E(),z(),T()},UnlockerKeyDown:function(e){D||e.code===O&&e.shiftKey&&(D=!0,M=performance.now())},UnlockerKeyUp:function(e){D=!1;const t=xt("sound_test");t.classList.contains("hidden")&&e.code===O&&performance.now()-M>200&&(xa.SePlay("piece_change"),t.classList.remove("hidden"))}}})(),va=(()=>{let e=[],t=0,n=[];return{loadSpecialThanks:function(){Cn.get("/api/tetra/specialthanks").then((e=>{let t="";e.supporters.forEach((e=>{t+=`<div class="flex-item"><a class="credit_st ${e.username?`tetra_pop" data-hover="tap" data-hit="click" data-username="${e.username}"`:'noclick"'}>${e.flip?e.username.toUpperCase():e.name}</a><span class="jp_kana">${e.username&&e.username.toUpperCase()!==e.name?e.flip?e.name:e.username.toUpperCase():""}</span></div>`})),xt("specialthanks").innerHTML=t}),(()=>{xt("specialthanks").innerHTML='<div class="flex-item">error fetching special thanks</div>'}))},loadNews:function(){Cn.get("/api/tetra/news").then((e=>{let t="";e.news.forEach((e=>{if(t+='<div class="tetra_news_item">',"leaderboard"===e.type){const n=e.data.rank<=3?`leaderboard${e.data.rank}`:"improvement";let s="";switch(e.data.gametype){case"40l":case"5mblast":{const t=wt(e.data.result);s=`a time of <a class="replay_pop" data-hover="tap" data-hit="click" data-replay="R:${e.data.replayid}">${t.m}:${t.s}.${t.ms}</a>`;break}case"blitz":s=`a score of <a class="replay_pop" data-hover="tap" data-hit="click" data-replay="R:${e.data.replayid}">${e.data.result.toLocaleString("en-US")}</a>`;break;case"zenith":case"zenithex":s=`an altitude of <a class="replay_pop" data-hover="tap" data-hit="click" data-replay="R:${e.data.replayid}">${Math.floor(e.data.result).toLocaleString("en-US")}.${Math.floor(e.data.result%1*10)}</a>${lc("M")}`}t+=`<img class="ns" src="/res/badges/${n}.png" /><a class="tetra_pop" data-hover="tap" data-hit="click" data-username="${e.data.username}">${e.data.username.toUpperCase()}</a> reached #${e.data.rank} in ${w.Strings.longTypeNames[e.data.gametype]} with ${s}`}else"badge"===e.type&&(t+=`<img class="ns" src="/res/badges/${e.data.type}.png" /><a class="tetra_pop" data-hover="tap" data-hit="click" data-username="${e.data.username}">${e.data.username.toUpperCase()}</a> received the <span>"${zt(e.data.label.toLowerCase())}"</span> badge`);t+=`<div class="tetra_news_ts" title="${new Date(e.ts).toLocaleString()}">${Bt(Date.parse(e.ts))} ago</div></div>`})),""===t&&(t='<div class="tetra_news_empty">NO NEWS</div>'),xt("tetra_news_content").innerHTML=t}),(()=>{xt("tetra_news_content").innerHTML='<div class="tetra_news_empty">ERROR FETCHING NEWS</div>'}))},loadTwitch:function(){Cn.get("/api/tetra/twitch").then((e=>{let t="";e.live.forEach((e=>{t+=`<a class="tetra_live_item" data-hover="tap" data-hit="click" href="https://www.twitch.tv/${zt(e.login)}" target="_blank" data-title="${zt(e.title)}">${zt(e.username)}<span>${zt(e.viewers)}</span><img src="${zt(e.thumbnail)}" /></a>`})),xt("tetra_live").classList.toggle("hidden",""===t),xt("tetra_live_content").innerHTML=t}),(()=>{}))},loadRecords:async function(n,s,i){qi("fetching records");let o=[];try{switch(s){case"me":{let s=[];switch(Date.now()<t?s=e:(s=(await Cn.get("/api/records/me")).records,e=s,t=Date.now()+6e4),n){case"40l":o=s.filter((e=>"40l"===e.gamemode));break;case"blitz":o=s.filter((e=>"blitz"===e.gamemode));break;case"zenith":o=s.filter((e=>"zenith"===e.gamemode));break;case"zenithex":o=s.filter((e=>"zenithex"===e.gamemode));break;case"league":o=s.filter((e=>"league"===e.gamemode));break;default:o=[...s].sort(((e,t)=>new Date(t.ts)-new Date(e.ts)))}break}case"friends":o=(await Cn.get(`/api/records/friends/${n}`)).records;break;case"country":s=`country_${document.body.dataset.country}`;default:o=(await Cn.get(`/api/records/leaderboard/${n}_${s}`)).records}Ki(),function(e,t,n,s){const i=xt(t);if(!i)throw"there is no holder?";i.innerHTML="";let o=1;if(e.forEach((e=>{const t=!!e.otherusers.length;t&&e.results.leaderboard[1].id===bn.id()&&e.results.leaderboard.reverse();const a=document.createElement("div");a.classList.add("scroller_block"),a.classList.add("record_item"),a.classList.toggle("record_disputed",!!e.disputed),a.classList.add("ns"),a.setAttribute("data-hover","hover"),a.setAttribute("data-hit","hit3"),1===o&&a.classList.add("record_first"),i.appendChild(a);const r=document.createElement("div");r.classList.add("record_grade"),r.classList.add("ns"),r.innerHTML=o,a.appendChild(r);const l=document.createElement("div");l.classList.add("record_owner"),"any"===n?t?l.innerHTML+=`${w.Strings.longTypeNames[e.gamemode].toLowerCase()} ${lc("VS")} ${e.results.leaderboard[1].username.toUpperCase()}`:l.innerHTML=w.Strings.longTypeNames[e.gamemode]:l.innerHTML=t?`${lc("VS")} ${e.results.leaderboard[1].username.toUpperCase()}`:`${e.user.username.toUpperCase()}${1&e.user.flags?'<img src="/res/supporter-tag.png" title="This person is supporting TETR.IO " />':""}${e.user.country?`<img class="flag" src="/res/flags/${e.user.country.toLowerCase()}.svg" title="${Un[e.user.country]}" />`:""}`,a.appendChild(l);const c=document.createElement("div");c.classList.add("record_ts"),c.innerHTML=new Date(e.ts).toLocaleString(),a.appendChild(c);const p=document.createElement("div");p.classList.add("record_result"),a.appendChild(p);const h=document.createElement("div");switch(h.classList.add("record_extra"),a.appendChild(h),e.gamemode){case"40l":case"5mblast":{const t=wt(e.results.stats.finaltime);p.innerHTML=`${t.m}:${t.s}<span class="ms">.${t.ms}</span>`,h.innerHTML=`<span>${e.results.stats.piecesplaced}</span> pieces - <span>${e.results.stats.finesse?.faults??"?"}</span>F - <span>${(e.results.stats.inputs/(e.results.stats.finaltime/1e3)).toFixed(2)}</span> KPS - <span>${(e.results.stats.inputs/e.results.stats.piecesplaced).toFixed(2)}</span> KPP - <span>${e.results.aggregatestats.pps.toFixed(2)}</span> PPS`;break}case"blitz":p.innerHTML=`${e.results.stats.score.toLocaleString("en-US")}`,h.innerHTML=`LV<span>${e.results.stats.level}</span> - <span>${e.results.stats.piecesplaced}</span> pieces - <span>${e.results.stats.finesse?.faults??"?"}</span>F - <span>${(e.results.stats.score/e.results.stats.piecesplaced).toFixed(2)}</span> SPP - <span>${e.results.aggregatestats.pps.toFixed(2)}</span> PPS`;break;case"zenith":case"zenithex":{const t=wt(e.results.stats.finaltime);p.innerHTML=`${e.extras.zenith.mods.map((e=>"expert"===e?"":`<img class="mod" title="${w.Strings.zenithMods[e]??"Unknown Mod"}" src="/res/zenith-mods/pbicons-tetra/${zt(e)}.png" />`)).join("")} ${Math.floor(e.results.stats.zenith.altitude).toLocaleString("en-US")}<span class="ms">.${Math.floor(e.results.stats.zenith.altitude%1*10)}</span><span class="unit">M</span>`,h.innerHTML=`<span>${t.m}:${t.s}</span>.${t.ms} ${e.extras.zenith.finalPos>=1?`- #<span>${e.extras.zenith.finalPos}</span>/${e.extras.zenith.finalCount} `:""}- <span>${e.results.stats.kills}</span> KO${1===e.results.stats.kills?"":"'s"} - avg. speed <span>${(e.results.stats.zenith.avgrankpts/(e.results.stats.finaltime/1e3*60)).toFixed(2)}</span>, peak <span>${Math.floor(e.results.stats.zenith.peakrank)}</span> - <span>${e.results.aggregatestats.apm.toFixed(2)}</span> APM - <span>${e.results.aggregatestats.pps.toFixed(2)}</span> PPS`;break}case"league":switch(e.extras.result){case"victory":p.innerHTML=`${lc("VICTORY")} ${e.results.leaderboard[0].wins}-${e.results.leaderboard[1].wins}`;break;case"defeat":p.innerHTML=`${lc("DEFEAT")} ${e.results.leaderboard[0].wins}-${e.results.leaderboard[1].wins}`;break;case"tie":p.innerHTML=`${lc("TIE")} ${e.results.leaderboard[0].wins}-${e.results.leaderboard[1].wins}`;break;case"dqvictory":p.innerHTML="opponent forfeited";break;case"dqdefeat":p.innerHTML="you forfeited";break;case"nocontest":p.innerHTML="no contest";break;case"nullified":p.innerHTML="match nullified"}h.innerHTML=Number.isNaN(e.results.leaderboard[0].stats.apm)?"NO STATS AVAILABLE":`<span>${e.results.leaderboard[0].stats.apm.toFixed(2)}</span> APM - <span>${e.results.leaderboard[0].stats.pps.toFixed(2)}</span> PPS - <span>${e.results.leaderboard[0].stats.vsscore.toFixed(2)}</span> VS`}a.addEventListener("click",(()=>{qi("fetching replay"),Cn.get(`/api/games/${encodeURIComponent(e.replayid)}`).then((t=>{Ki();const n=new L(t.game.replay);Ys.loadReplay(n,{back:"me"===s?"tetra_me":"tetra_records",record:e})}),(e=>{Ki(),sn(e)}))})),o++})),!e.length){const e=document.createElement("div");e.classList.add("scroller_block"),e.classList.add("ns"),e.classList.add("nothing"),e.innerHTML="NO RECORDS",i.appendChild(e)}i.classList.toggle("noindex","me"===s&&["any","league"].includes(n)),i.classList.toggle("nofirst","me"===s&&["any","league"].includes(n)),i.classList.toggle("noname","me"===s&&["40l","blitz","zenith","zenithex"].includes(n))}(o,i,n,s)}catch(e){throw Ki(),sn(e),e}},loadUserList:function(e,t,n){const s=`/api/users/by/${e}/${"country"===t?document.body.dataset.country:t}`;return new Promise(((t,i)=>{qi("fetching players"),Cn.get(s).then((s=>{Ki(),function(e,t,n){const s=xt(e);if(!s)throw"there is no holder?";s.innerHTML="";let i=1;if(t.forEach((e=>{if("xp"===n&&(!e.xp||"anon"===e.role||"bot"===e.role))return;const t=document.createElement("div");t.classList.add("scroller_block"),t.classList.add("ns"),t.classList.add("record_item"),t.setAttribute("data-hover","hover"),t.setAttribute("data-hit","hit3"),1===i&&t.classList.add("record_first"),s.appendChild(t);const o=document.createElement("div");o.classList.add("record_grade"),o.classList.add("ns"),o.innerHTML=i,t.appendChild(o);const a=document.createElement("div");if(a.classList.add("record_owner"),a.innerHTML=`${e.username.toUpperCase()}${e.supporter?'<img src="/res/supporter-tag.png" title="This person is supporting TETR.IO " />':""}${e.country?`<img class="flag" src="/res/flags/${e.country.toLowerCase()}.svg" title="${Un[e.country]}" />`:""}`,t.appendChild(a),"xp"===n){const n=document.createElement("div");n.classList.add("record_ts"),n.innerHTML=`${xn(e.xp)}% TOWARDS NEXT LEVEL`,t.appendChild(n);const s=document.createElement("div");s.classList.add("record_result"),t.appendChild(s),s.innerHTML=An(yn(e.xp));const i=document.createElement("div");i.classList.add("record_extra"),i.innerHTML=`<span>${Math.floor(e.xp)}</span> XP`,t.appendChild(i)}else if("ar"===n){const n=document.createElement("div");n.classList.add("record_ts");const s=Object.values(e.ar_counts).reduce(((e,t)=>e+t),0);n.innerHTML=`<span>${s}</span> achievement${1===s?"":"s"}`,t.appendChild(n);const i=document.createElement("div");i.classList.add("record_result"),t.appendChild(i),i.innerHTML=`${e.ar.toLocaleString("en-US")}<span>AR</span>`;const o=document.createElement("div");o.classList.add("record_extra");let a="";e.ar_counts[100]&&(a+=`${a?" - ":""}<img src="/res/achievements/frames/issued.png" title="Issued-Once (+1AR)" /> ${e.ar_counts[100]}`),e.ar_counts[1]&&(a+=`${a?" - ":""}<img src="/res/achievements/frames/bronze.png" title="Bronze (+1AR)" /> ${e.ar_counts[1]}`),e.ar_counts[2]&&(a+=`${a?" - ":""}<img src="/res/achievements/frames/silver.png" title="Silver (+2AR)" /> ${e.ar_counts[2]}`),e.ar_counts[3]&&(a+=`${a?" - ":""}<img src="/res/achievements/frames/gold.png" title="Gold (+3AR)" /> ${e.ar_counts[3]}`),e.ar_counts[4]&&(a+=`${a?" - ":""}<img src="/res/achievements/frames/platinum.png" title="Platinum (+5AR)" /> ${e.ar_counts[4]}`),e.ar_counts[5]&&(a+=`${a?" - ":""}<img src="/res/achievements/frames/diamond.png" title="Diamond (+8AR)" /> ${e.ar_counts[5]}`),e.ar_counts.t100&&(a+=`${a?" - ":""}<img src="/res/achievements/frames/t100.png" title="Top 100 in Competitive Achievements (+1AR)" /> ${e.ar_counts.t100}`),e.ar_counts.t50&&(a+=`${a?" - ":""}<img src="/res/achievements/frames/t50.png" title="Top 50 in Competitive Achievements (+2AR)" /> ${e.ar_counts.t50}`),e.ar_counts.t25&&(a+=`${a?" - ":""}<img src="/res/achievements/frames/t25.png" title="Top 25 in Competitive Achievements (+3AR)" /> ${e.ar_counts.t25}`),e.ar_counts.t10&&(a+=`${a?" - ":""}<img src="/res/achievements/frames/t10.png" title="Top 10 in Competitive Achievements (+4AR)" /> ${e.ar_counts.t10}`),e.ar_counts.t5&&(a+=`${a?" - ":""}<img src="/res/achievements/frames/t5.png" title="Top 5 in Competitive Achievements (+5AR)" /> ${e.ar_counts.t5}`),e.ar_counts.t3&&(a+=`${a?" - ":""}<img src="/res/achievements/frames/t3.png" title="Top 3 in Competitive Achievements (+6AR)" /> ${e.ar_counts.t3}`),o.innerHTML=a,t.appendChild(o)}else if("league"===n){const n=document.createElement("div");n.classList.add("record_ts"),n.innerHTML=`<span>${e.league.gameswon}</span> / ${e.league.gamesplayed} games won (<span>${Math.floor(e.league.gameswon/e.league.gamesplayed*1e4)/100}</span>%)`,t.appendChild(n);const s=document.createElement("div");s.classList.add("record_result"),t.appendChild(s),s.innerHTML=`${Math.round(e.league.tr)}<span>TR</span> <img src="/res/league-ranks/${e.league.rank}.png" />`,s.title=e.league.tr;const i=document.createElement("div");i.classList.add("record_extra"),i.innerHTML=`glicko: <span>${e.league.glicko}</span><span>${e.league.rd}</span>`,t.appendChild(i)}t.addEventListener("click",(()=>{ka({userID:e._id})})),i++})),!t.length){const e=document.createElement("div");e.classList.add("scroller_block"),e.classList.add("ns"),e.classList.add("nothing"),e.innerHTML="NO PLAYERS",s.appendChild(e)}}(n,s.users,e),t(s)}),(e=>{Ki(),sn(e),i()}))}))},loadAchievements:async function(){qi("fetching achievements");try{const e={event:"EVENT",general:"GENERAL",solo:"SOLO",league:"TETRA LEAGUE",zenith:"QUICK PLAY",legacy:"LEGACY"},t=["event","general","solo","league","zenith","legacy"],s=await Cn.get("/api/achievements/me"),i=s.achievements.map((e=>To(e,{})));i.sort(((e,n)=>t.indexOf(e.category)-t.indexOf(n.category)||(n.rank??-1)-(e.rank??-1)||(n.progress??-1)-(e.progress??-1)||new Date(n.t??0)-new Date(e.t??0)||e.o-n.o||e.k-n.k));const o={};for(const e of i)o[e.category]||(o[e.category]=[]),o[e.category].push(e);n=i,xt("tetra_achievement_case_avatar").src=xt("me_avatar").src,xt("tetra_achievement_case_ar").innerHTML=`${s.ar.toLocaleString("en-US")}<span>AR</span>`,xt("tetra_achievement_data").innerHTML="";for(const t of Object.keys(o)){const n=document.createElement("div");n.classList.add("scroller_block","ns"),xt("tetra_achievement_data").appendChild(n);const s=document.createElement("h1");s.textContent=e[t]??`${t}`.toUpperCase(),n.appendChild(s);const i=document.createElement("div");i.classList.add("achievements"),n.appendChild(i);for(const e of o[t])i.appendChild(e.holder)}for(let e=0;e<3;e++){const t=i.find((t=>t.k===s.featured[e]));t?(xt(`tetra_achievement_case_${e}`).dataset.k=t.k,xt(`tetra_achievement_case_${e}`).dataset.rank=t.stub?"stub":yo[t.rank],xt(`tetra_achievement_case_${e}`).innerHTML=t.icon):(xt(`tetra_achievement_case_${e}`).dataset.k=0,xt(`tetra_achievement_case_${e}`).dataset.rank="stub",xt(`tetra_achievement_case_${e}`).innerHTML="<span>EMPTY</span>")}Ki(),gi.bindGuide(fi.tetra_achievements)}catch(e){throw Ki(),sn(e),e}},navigateToID:e=>function(e){if(/^R:.+$/.test(e)){const t=e.replace("R:","").split("@")[0];qi("fetching replay"),Cn.get(`/api/games/${encodeURIComponent(t)}`).then((t=>{Ki(),xa.BgmPlaySmoothly(document.body.classList.contains("inpair")||document.body.classList.contains("matchmaking")?"touhoudaiensei":"shikiichi-made-mousukoshi");const n=new L(t.game.replay);Ys.loadReplay(n,{back:"tetra",record:t.game,matchHighlight:e.replace("R:","").split("@")[1]})}),(e=>{Ki(),sn(e)}))}else ka({username:e.toLowerCase()})}(e)}})();function ka(e){const t=document.createElement("div");t.classList.add("oob_modal"),t.classList.add("tetra_modal"),t.classList.add("hidden"),t.classList.add("busy"),xt("dialogs").appendChild(t),setTimeout((()=>{t.classList.remove("hidden"),gi.push(),gi.bindGuide(fi.tetra_dialog)}),1);const n=()=>{Cn.get(`/api/users/${encodeURIComponent(e.userID)}`).then((n=>{const s=Qr(n.user._id);let i=!1;if(s&&("friend"===s.type?(t.classList.add("tm_friend"),i=!0):"block"===s.type&&t.classList.add("tm_blocked")),(n.user.supporter||Xn.includes(n.user.role))&&n.user.banner_revision){const e=document.createElement("img");e.classList.add("tetra_modal_banner"),e.classList.add("ns"),e.src=`/user-content/banners/${n.user._id}.jpg?rv=${n.user.banner_revision}`,t.classList.add("has_banner"),t.appendChild(e);const s=document.createElement("div");s.classList.add("tetra_modal_banner_sep"),s.classList.add("ns"),t.appendChild(s)}const o=document.createElement("img");o.classList.add("avatar"),o.src=n.user.avatar_revision?`/user-content/avatars/${n.user._id}.jpg?rv=${n.user.avatar_revision}`:"banned"===n.user.role?"/res/avatar-banned.png":"anon"===n.user.role?"/res/avatar.png":Ot(n.user._id),t.appendChild(o);const a=document.createElement("h2");if(a.innerHTML=`${n.user.username.toUpperCase()}${n.user.country?`<img class="flag" src="/res/flags/${n.user.country.toLowerCase()}.svg" title="${Un[n.user.country]}" />`:""}`,t.appendChild(a),!["anon","bot","banned","hidden"].includes(n.user.role)){const e=n.user.oldusernames.length&&n.user.oldusernames[n.user.oldusernames.length-1].ts>=Date.now()-12096e5?n.user.oldusernames[n.user.oldusernames.length-1].username:null,s=document.createElement("h3");s.innerHTML=`${e?`FORMERLY <b>${e.toUpperCase()}</b> - `:""}${n.user.ts?`JOINED ${Bt(Date.parse(n.user.ts)).toUpperCase()} AGO`:"HERE SINCE THE BEGINNING"}${n.user.friendCount?` - <span title="Amount of players who have friended this person"><img src="/res/icon/friends${(n.user.supporter||Xn.includes(n.user.role))&&n.user.banner_revision?"":"-green"}.svg" />${n.user.friendCount}</span>`:""}${n.user.friendedYou?i?" - MUTUAL FRIENDS":" - FRIENDED YOU":""}`,t.appendChild(s)}const r=document.createElement("div");if(r.classList.add("tetra_modal_close"),r.classList.add("ns"),r.innerHTML="CLOSE",r.setAttribute("data-hover","tap"),r.setAttribute("data-hit","click"),t.appendChild(r),r.addEventListener("click",(()=>{mn(t)})),n.user._id==bn.id()&&Ln!==n.user.xp&&(vn(yn(n.user.xp),xt("me_level")),vn(yn(n.user.xp),xt("zenith_party_self_level")),Sn(n.user.xp-Ln,!0)),e.topbuttons=e.topbuttons||[],e.topbuttons.push(...wa(n.user)),e.topbuttons.length){const n=document.createElement("div");n.classList.add("tetra_topbutton_holder"),n.classList.add("ns"),t.appendChild(n),e.topbuttons.forEach((e=>{const s=document.createElement("div");s.classList.add("tetra_topbutton"),s.innerHTML=`${e.icon?`<img src="/res/icon/${e.icon}.svg" />`:""}${e.label}`,s.title=e.title||"",e.classes.forEach((e=>{s.classList.add(e)})),s.addEventListener("click",(()=>{e.callback((()=>{mn(t)}),s,t)})),s.addEventListener("mouseout",(()=>{s.classList.remove("tb_unfriending")})),n.appendChild(s)}))}let l,c;l=n.user.gameswon>-1&&n.user.gamesplayed>-1?`<div class="tetra_tag_record" title="Online games won / online games played"><span>${n.user.gameswon}</span> / ${n.user.gamesplayed}</div>`:n.user.gameswon>-1?`<div class="tetra_tag_record" title="Online games won"><span>${n.user.gameswon}</span></div>`:n.user.gamesplayed>-1?`<div class="tetra_tag_record" title="Online games played">${n.user.gamesplayed}</div>`:"",c=n.user.gametime>-1?`<div class="tetra_tag_gametime" title="Total time played">${Lt(n.user.gametime)}</div>`:"";let p="";n.user.connections.twitch&&(p+=`<a data-hover="tap" data-hit="click" href="https://www.twitch.tv/${zt(n.user.connections.twitch.username)}" title="Twitch: ${zt(n.user.connections.twitch.display_username)} (${zt(n.user.connections.twitch.username)})" target="_blank" class="tetra_tag_social"></a>`),n.user.connections.youtube&&(p+=`<a data-hover="tap" data-hit="click" href="https://youtube.com/channel/${zt(n.user.connections.youtube.id)}" title="YouTube: ${zt(n.user.connections.youtube.username)}" target="_blank" class="tetra_tag_social"></a>`),n.user.connections.twitter&&(p+=`<a data-hover="tap" data-hit="click" href="https://x.com/${zt(n.user.connections.twitter.username)}" title="X: ${zt(n.user.connections.twitter.display_username)} (@${zt(n.user.connections.twitter.username)})" target="_blank" class="tetra_tag_social"></a>`),n.user.connections.reddit&&(p+=`<a data-hover="tap" data-hit="click" href="https://reddit.com/u/${zt(n.user.connections.reddit.username)}" title="reddit: /u/${zt(n.user.connections.reddit.username)}" target="_blank" class="tetra_tag_social"></a>`),n.user.connections.steam&&(p+=`<a data-hover="tap" data-hit="click" href="https://steamcommunity.com/profiles/${zt(n.user.connections.steam.id)}" title="Steam: ${zt(n.user.connections.steam.username)}" target="_blank" class="tetra_tag_social"></a>`),n.user.connections.discord&&(p+=`<a data-hover="tap" data-hit="click" href="javascript:void();" title="Discord: @${zt(n.user.connections.discord.username)}" target="_blank" class="tetra_tag_social copyable" data-text="${zt(n.user.connections.discord.username)}" data-displayname="username"></a>`);let h="";for(const e of n.user.achievements){const t=To(e,{clickable:!1,isSelf:!1});h+=`\n\t\t\t\t\t<div class="achievement tetra_featured_achievement" data-rank="${yo[t.rank]}">\n\t\t\t\t\t\t<div class="achievement_icon">${t.icon}</div>\n\t\t\t\t\t\t<div class="achievement_info">${t.info}</div>\n\t\t\t\t\t</div>\n\t\t\t\t`}if(!["anon","bot","banned","hidden"].includes(n.user.role)){const e=document.createElement("div");e.classList.add("tetra_tag_holder"),e.classList.add("ns"),e.innerHTML=`\n\t\t\t\t${"sysop"===n.user.role?'<img class="mod_badge" src="/res/verified-sysop.png" title="This person has unlimited permissions on TETR.IO." alt="Sysop" />':""}\n\t\t\t\t${"admin"===n.user.role?'<img class="mod_badge" src="/res/verified-admin.png" title="This person has administration permissions on TETR.IO." alt="Administrator" />':""}\n\t\t\t\t${"mod"===n.user.role?'<img class="mod_badge" src="/res/verified-mod.png" title="This person has global moderation permissions on TETR.IO." alt="Global Moderator" />':""}\n\t\t\t\t${"halfmod"===n.user.role?'<img class="mod_badge" src="/res/verified-halfmod.png" title="This person has community moderation permissions on TETR.IO." alt="Community Moderator" />':""}\n\t\t\t\t${An(yn(n.user.xp))}${c}${l}${p}\n\t\t\t\t${h}\n\t\t\t\t${n.user.supporter?`<img class="supporter_badge" src="/res/supporter${n.user.supporter_tier}.png" title="This person is supporting TETR.IO " alt="Supporter" />`:""}`,t.appendChild(e)}if(n.user.badstanding){const e=document.createElement("div");e.classList.add("tetra_badstanding"),e.classList.add("ns"),e.innerHTML="<h1>BAD STANDING</h1><p>one or more recent bans on record</p>",t.appendChild(e)}if(!n.user.distinguishment){let e=0,t="";n.user.records&&n.user.records["40l"]&&1===n.user.records["40l"].rank&&(n.user.distinguishment={type:"champion",detail:"40l",text:"40 LINES CHAMPION"},e++,t+=(""===t?"":" & ")+"40L"),n.user.records&&n.user.records.blitz&&1===n.user.records.blitz.rank&&(n.user.distinguishment={type:"champion",detail:"blitz",text:"BLITZ CHAMPION"},e++,t+=(""===t?"":" & ")+"BLITZ"),n.user.league&&1===n.user.league.standing&&(n.user.distinguishment={type:"champion",detail:"league",text:"TETRA LEAGUE CHAMPION"},e++,t+=(""===t?"":" & ")+"TL"),e>=2&&(n.user.distinguishment={type:"champion",detail:"x-multiple",text:`${t} CHAMPION`})}if(n.user.distinguishment){const e=document.createElement("div");switch(e.classList.add("tetra_distinguishment"),e.classList.add("ns"),e.classList.add(`tetra_distinguishment_${n.user.distinguishment.type}`),n.user.distinguishment.type){case"staff":e.setAttribute("data-detail",n.user.distinguishment.detail),e.innerHTML="alumni"===n.user.distinguishment.detail?`<h1>${zt(n.user.distinguishment.header).replace(/%tetrio%/g,'<img src="/res/tetrio-logo.svg" style="filter: invert(1);" />').replace(/%osk%/g,'<img src="/res/osk.svg" />')}: <span>${zt(n.user.distinguishment.footer)}</span></h1>`:`<h1>${zt(n.user.distinguishment.header).replace(/%tetrio%/g,'<img src="/res/tetrio-logo.svg" style="filter: invert(1);" />').replace(/%osk%/g,'<img src="/res/osk.svg" />')}</h1><p>${zt(n.user.distinguishment.footer)}</p>`;break;case"champion":e.setAttribute("data-detail",n.user.distinguishment.detail),e.innerHTML=`<h1>${zt(n.user.distinguishment.text)}</h1>`;break;case"twc":e.setAttribute("data-detail",n.user.distinguishment.detail),e.innerHTML=`<h1>TETR.IO WORLD CHAMPION</h1><p>${zt(n.user.distinguishment.detail)} TETR.IO WORLD CHAMPIONSHIP</p>`}t.appendChild(e)}const d=za(n.user.badges);if(Object.keys(d).length>0){const e=document.createElement("div");e.classList.add("tetra_badge_holder"),e.classList.add("ns"),t.appendChild(e);for(const t of Object.values(d)){if(t.length<=1){Fa(t[0],e);continue}const n=document.createElement("div");n.classList.add("tetra_badge_group"),n.style=`--c: ${t.length};`,e.appendChild(n),t.forEach(((e,t)=>Fa(e,n,t)))}}if(!["anon","hidden","banned"].includes(n.user.role)&&(n.user.supporter||Xn.includes(n.user.role))&&n.user.bio&&n.user.bio.trim()){const e=document.createElement("div");e.classList.add("tetra_modal_bio"),e.innerHTML=`<h1>ABOUT ME</h1><p>${Tt(n.user.bio.trim())}</p>`,t.appendChild(e)}if("anon"===n.user.role){const e=document.createElement("div");e.classList.add("tetra_modal_warning"),e.innerHTML="this user is playing anonymously",t.appendChild(e)}else if("hidden"===n.user.role){const e=document.createElement("div");e.classList.add("tetra_modal_warning"),e.innerHTML="information about this user is currently unavailable",t.appendChild(e)}else if("banned"===n.user.role){const e=document.createElement("div");e.classList.add("tetra_modal_warning"),e.innerHTML="<h1>BANNED</h1>this user is currently banned. bans are placed when TETR.IO rules or terms of service are broken.",t.appendChild(e),t.classList.add("banned")}else if("bot"===n.user.role){const e=document.createElement("div");e.classList.add("tetra_modal_warning"),e.innerHTML="<h1>BOT</h1><br><br>this is a known bot. all bots must have this tag, or it and its owners will be permanently banned."+(n.user.botmaster?`<br><br>this bot is operated by <b>${n.user.botmaster}</b>`:""),t.appendChild(e)}else{const e=document.createElement("div");e.classList.add("tetra_modal_records"),e.classList.add("flex-row"),t.appendChild(e);const s=n.user.country?`<img class="flag" src="/res/flags/${n.user.country.toLowerCase()}.svg" title="${Un[n.user.country]}" />`:"";if(0!==n.user.league.gamesplayed){const t=document.createElement("div");t.classList.add("tetra_modal_record"),t.classList.add("flex-item"),t.classList.add("tetra_modal_record_league"),n.user.league.gamesplayed>=10?(t.innerHTML=`\n\t\t\t\t\t\t\t<div class="tetra_modal_record_header">\n\t\t\t\t\t\t\t\t<h6>TETRA LEAGUE</h6>\n\t\t\t\t\t\t\t\t<div class="standingset">\n\t\t\t\t\t\t\t\t\t${-1!==n.user.league.standing_local?`\n\t\t\t\t\t\t\t\t\t\t<div class="standingset_local">${s} #<span>${n.user.league.standing_local.toLocaleString("en-US")}</span></div>\n\t\t\t\t\t\t\t\t\t`:""}\n\t\t\t\t\t\t\t\t\t${-1!==n.user.league.standing?`\n\t\t\t\t\t\t\t\t\t\t<div class="standingset_global ${1===n.user.league.standing?"t1":""}" data-digits="${(n.user.league.standing-1).toString().length}">#<span>${n.user.league.standing.toLocaleString("en-US")}</span></div>\n\t\t\t\t\t\t\t\t\t`:""}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<h5 title="${n.user.league.tr}"><img src="/res/league-ranks/${n.user.league.rank}.png" />${Math.round(n.user.league.tr)}<span class="ms">TR</span></h5>\n\t\t\t\t\t\t\t<h3><span>${n.user.league.apm||"---"}</span> apm <span>${n.user.league.pps||"---"}</span> pps <span>${n.user.league.vs||"---"}</span> vs</h3>`,t.classList.add("tetra_modal_record_league_active")):t.innerHTML=`\n\t\t\t\t\t\t\t<div class="tetra_modal_record_header"><h6>TETRA LEAGUE</h6></div>\n\t\t\t\t\t\t\t<h5>${n.user.league.gamesplayed}<span class="ms">/10 rating games</span></h5>\n\t\t\t\t\t\t\t<h3><span>${n.user.league.gameswon}</span> game${1===n.user.league.gameswon?"":"s"} won</h3>\n\t\t\t\t\t\t`,e.appendChild(t)}if(n.user.records["40l"].record){const t=n.user.records["40l"],i=t.record,o=wt(i.results.stats.finaltime),a=document.createElement("div");a.classList.add("tetra_modal_record"),a.classList.add("flex-item"),a.innerHTML=`\n\t\t\t\t\t\t<div class="tetra_modal_record_header">\n\t\t\t\t\t\t\t<h6>${w.Strings.longTypeNames["40l"]}</h6>\n\t\t\t\t\t\t\t<div class="standingset">\n\t\t\t\t\t\t\t\t${t.rank_local?`\n\t\t\t\t\t\t\t\t\t<div class="standingset_local">${s} #<span>${t.rank_local.toLocaleString("en-US")}</span></div>\n\t\t\t\t\t\t\t\t`:""}\n\t\t\t\t\t\t\t\t${t.rank?`\n\t\t\t\t\t\t\t\t\t<div class="standingset_global ${1===t.rank?"t1":""}" data-digits="${(t.rank-1).toString().length}">#<span>${t.rank.toLocaleString("en-US")}</span></div>\n\t\t\t\t\t\t\t\t`:""}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h5>${o.m}:${o.s}<span class="ms">.${o.ms}</span></h5>\n\t\t\t\t\t\t<h3><span>${Bt(Date.parse(i.ts)).toUpperCase()}</span> ago</h3>`,e.appendChild(a)}if(n.user.records.blitz.record){const t=n.user.records.blitz,i=t.record,o=document.createElement("div");o.classList.add("tetra_modal_record"),o.classList.add("flex-item"),o.innerHTML=`\n\t\t\t\t\t\t<div class="tetra_modal_record_header">\n\t\t\t\t\t\t\t<h6>${w.Strings.longTypeNames.blitz}</h6>\n\t\t\t\t\t\t\t<div class="standingset">\n\t\t\t\t\t\t\t\t${t.rank_local?`\n\t\t\t\t\t\t\t\t\t<div class="standingset_local">${s} #<span>${t.rank_local.toLocaleString("en-US")}</span></div>\n\t\t\t\t\t\t\t\t`:""}\n\t\t\t\t\t\t\t\t${t.rank?`\n\t\t\t\t\t\t\t\t\t<div class="standingset_global ${1===t.rank?"t1":""}" data-digits="${(t.rank-1).toString().length}">#<span>${t.rank.toLocaleString("en-US")}</span></div>\n\t\t\t\t\t\t\t\t`:""}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h5>${i.results.stats.score.toLocaleString("en-US")}</h5>\n\t\t\t\t\t\t<h3><span>${Bt(Date.parse(i.ts)).toUpperCase()}</span> ago</h3>`,e.appendChild(o)}if(n.user.records.zenith.record||n.user.records.zenith.best.record){const t=n.user.records.zenith,i=t.record,o=t.best.record,a=document.createElement("div");a.classList.add("tetra_modal_record"),a.classList.add("flex-item"),a.innerHTML=`\n\t\t\t\t\t\t<div class="tetra_modal_record_header">\n\t\t\t\t\t\t\t<h6>${w.Strings.longTypeNames.zenith}</h6>\n\t\t\t\t\t\t\t<div class="standingset">\n\t\t\t\t\t\t\t\t${t.rank_local?`\n\t\t\t\t\t\t\t\t\t<div class="standingset_local">${s} #<span>${t.rank_local.toLocaleString("en-US")}</span></div>\n\t\t\t\t\t\t\t\t`:""}\n\t\t\t\t\t\t\t\t${t.rank?`\n\t\t\t\t\t\t\t\t\t<div class="standingset_global ${1===t.rank?"t1":""}" data-digits="${(t.rank-1).toString().length}">#<span>${t.rank.toLocaleString("en-US")}</span></div>\n\t\t\t\t\t\t\t\t`:""}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${i?`\n\t\t\t\t\t\t\t<h5 title="This week">${Math.floor(i.results.stats.zenith.altitude).toLocaleString("en-US")}<span class="ms">.${Math.floor(i.results.stats.zenith.altitude%1*10)}</span><span class="unit">M</span></h5>\n\t\t\t\t\t\t`:`\n\t\t\t\t\t\t\t<h5 title="Not this week - player has not played this week" class="revolvedscore">${Math.floor(o.results.stats.zenith.altitude).toLocaleString("en-US")}<span class="ms">.${Math.floor(o.results.stats.zenith.altitude%1*10)}</span><span class="unit">M</span></h5>\n\t\t\t\t\t\t`}\n\t\t\t\t\t\t${i&&o?`\n\t\t\t\t\t\t\t<h3 title="Updates every week">career best <span>${Math.floor(o.results.stats.zenith.altitude).toLocaleString("en-US")}.${Math.floor(o.results.stats.zenith.altitude%1*10)}</span>${lc("M")} (#${t.best.rank.toLocaleString("en-US")})</h3>\n\t\t\t\t\t\t`:`\n\t\t\t\t\t\t\t<h3><span>${Bt(Date.parse((i??o).ts)).toUpperCase()}</span> ago</h3>\n\t\t\t\t\t\t`}`,e.appendChild(a)}if(n.user.records.zenithex.record||n.user.records.zenithex.best.record){const t=n.user.records.zenithex,i=t.record,o=t.best.record,a=document.createElement("div");a.classList.add("tetra_modal_record"),a.classList.add("flex-item"),a.innerHTML=`\n\t\t\t\t\t\t<div class="tetra_modal_record_header">\n\t\t\t\t\t\t\t<h6>${w.Strings.longTypeNames.zenithex}</h6>\n\t\t\t\t\t\t\t<div class="standingset">\n\t\t\t\t\t\t\t\t${t.rank_local?`\n\t\t\t\t\t\t\t\t\t<div class="standingset_local">${s} #<span>${t.rank_local.toLocaleString("en-US")}</span></div>\n\t\t\t\t\t\t\t\t`:""}\n\t\t\t\t\t\t\t\t${t.rank?`\n\t\t\t\t\t\t\t\t\t<div class="standingset_global ${1===t.rank?"t1":""}" data-digits="${(t.rank-1).toString().length}">#<span>${t.rank.toLocaleString("en-US")}</span></div>\n\t\t\t\t\t\t\t\t`:""}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${i?`\n\t\t\t\t\t\t\t<h5 title="This week">${Math.floor(i.results.stats.zenith.altitude).toLocaleString("en-US")}<span class="ms">.${Math.floor(i.results.stats.zenith.altitude%1*10)}</span><span class="unit">M</span></h5>\n\t\t\t\t\t\t`:`\n\t\t\t\t\t\t\t<h5 title="Not this week - player has not played this week" class="revolvedscore">${Math.floor(o.results.stats.zenith.altitude).toLocaleString("en-US")}<span class="ms">.${Math.floor(o.results.stats.zenith.altitude%1*10)}</span><span class="unit">M</span></h5>\n\t\t\t\t\t\t`}\n\t\t\t\t\t\t${i&&o?`\n\t\t\t\t\t\t\t<h3 title="Updates every week">career best <span>${Math.floor(o.results.stats.zenith.altitude).toLocaleString("en-US")}.${Math.floor(o.results.stats.zenith.altitude%1*10)}</span>${lc("M")} (#${t.best.rank.toLocaleString("en-US")})</h3>\n\t\t\t\t\t\t`:`\n\t\t\t\t\t\t\t<h3><span>${Bt(Date.parse((i??o).ts)).toUpperCase()}</span> ago</h3>\n\t\t\t\t\t\t`}`,e.appendChild(a)}}if(!["anon","bot","banned","hidden"].includes(n.user.role)){const e=document.createElement("div");e.classList.add("tetra_modal_jump"),e.classList.add("ns"),e.setAttribute("data-hover","tap"),e.setAttribute("data-hit","click"),e.innerHTML=" VIEW FULL PROFILE",e.addEventListener("click",(()=>{mn(t),Gs(`https://${_.ch_domain}/u/${n.user.username}`)})),e.addEventListener("auxclick",(e=>{1===e.button&&Gs(`https://${_.ch_domain}/u/${n.user.username}`)})),t.appendChild(e)}if(e.buttons=e.buttons||[],e.buttons.length){const n=document.createElement("div");n.classList.add("tetra_button_holder"),n.classList.add("flex-row"),n.classList.add("ns"),t.appendChild(n),e.buttons.forEach((e=>{const s=document.createElement("div");s.classList.add("tetra_button"),s.classList.add("flex-item"),s.innerHTML=e.label,e.classes.forEach((e=>{s.classList.add(e)})),s.addEventListener("click",(()=>{e.callback((()=>{mn(t)}))})),n.appendChild(s)}))}t.classList.remove("busy"),gi.rebind()}),(e=>{sn(e),mn(t)}))};return e.userID?n():Cn.get(`/api/users/${encodeURIComponent(e.username)}/resolve`).then((t=>{e.userID=t._id,n()}),(e=>{sn(e),mn(t)})),xt("dialogs").classList.remove("hidden"),no(),t}function wa(e){const t=[];if(e._id!=bn.id()&&!bn.anon()){if("banned"===e.role)return t.push({label:"",icon:"block",title:"Block user",classes:["notext","tb_danger","tb_notblockedonly"],callback:(t,n,s)=>{n.classList.add("busy"),Cn.post("/api/relationships/block",{user:e._id}).then((e=>{n.classList.remove("busy"),s.classList.add("tm_blocked")}),(e=>{n.classList.remove("busy"),sn(e)}))}}),t.push({label:"UNBLOCK",icon:"block",title:"Unblock user",classes:["tb_blockedonly"],callback:(t,n,s)=>{n.classList.add("busy"),Cn.post("/api/relationships/remove",{user:e._id}).then((e=>{n.classList.remove("busy"),s.classList.remove("tm_blocked")}),(e=>{n.classList.remove("busy"),sn(e)}))}}),t.push({label:"",icon:"friends",title:"Unfriend? (click twice)",classes:["notext","tb_friendonly","tb_unfriendbutton","tb_notblockedonly"],callback:(t,n,s)=>{n.classList.contains("tb_unfriending")?(n.classList.add("busy"),Cn.post("/api/relationships/remove",{user:e._id}).then((e=>{n.classList.remove("busy"),s.classList.remove("tm_friend")}),(e=>{n.classList.remove("busy"),sn(e)}))):n.classList.add("tb_unfriending")}}),t;if(["anon"].includes(e.role))return t.push({label:"",icon:"report",title:"Report user",classes:["notext","tb_danger"],callback:(t,n,s)=>{t(),La(e,(()=>{n.classList.add("busy"),Cn.post("/api/relationships/block",{user:e._id}).then((e=>{n.classList.remove("busy"),s.classList.add("tm_blocked")}),(e=>{n.classList.remove("busy"),sn(e)}))}))}}),t.push({label:"",icon:"block",title:"Block user",classes:["notext","tb_danger","tb_notblockedonly"],callback:(t,n,s)=>{n.classList.add("busy"),Cn.post("/api/relationships/block",{user:e._id}).then((e=>{n.classList.remove("busy"),s.classList.add("tm_blocked")}),(e=>{n.classList.remove("busy"),sn(e)}))}}),t.push({label:"UNBLOCK",icon:"block",title:"Unblock user",classes:["tb_blockedonly"],callback:(t,n,s)=>{n.classList.add("busy"),Cn.post("/api/relationships/remove",{user:e._id}).then((e=>{n.classList.remove("busy"),s.classList.remove("tm_blocked")}),(e=>{n.classList.remove("busy"),sn(e)}))}}),t;t.push({label:"",icon:"report",title:"Report user",classes:["notext","hidden","tb_overflow","tb_danger","tb_notfriendonly","tb_notblockedonly"],callback:(t,n,s)=>{t(),La(e,(()=>{n.classList.add("busy"),Cn.post("/api/relationships/block",{user:e._id}).then((e=>{n.classList.remove("busy"),s.classList.add("tm_blocked")}),(e=>{n.classList.remove("busy"),sn(e)}))}))}}),t.push({label:"",icon:"block",title:"Block user",classes:["notext","hidden","tb_overflow","tb_danger","tb_notfriendonly","tb_notblockedonly"],callback:(t,n,s)=>{n.classList.add("busy"),Cn.post("/api/relationships/block",{user:e._id}).then((e=>{n.classList.remove("busy"),s.classList.add("tm_blocked")}),(e=>{n.classList.remove("busy"),sn(e)}))}}),t.push({label:"",icon:"more",title:"More options...",classes:["notext","tb_more","tb_notfriendonly","tb_notblockedonly"],callback:(e,t,n)=>{t.parentNode.querySelectorAll(".tb_overflow").forEach((e=>{e.classList.remove("hidden")})),t.classList.add("hidden")}}),t.push({label:"",icon:"gift",title:"Gift TETR.IO Supporter",classes:["notext","tb_notblockedonly"],callback:(t,n,s)=>{t(),Ii(void 0,e.username)}}),t.push({label:"MESSAGE",icon:"message",title:"Send a direct message",classes:["tb_friendonly","tb_notblockedonly"],callback:(t,n,s)=>{t(),Tr(e._id)}}),t.push({label:"FRIEND",icon:"friend",title:"Add as friend",classes:["tb_notfriendonly","tb_friendbutton","tb_notblockedonly"],callback:(t,n,s)=>{n.classList.add("busy"),Cn.post("/api/relationships/friend",{user:e._id}).then((e=>{n.classList.remove("busy"),s.classList.add("tm_friend")}),(e=>{n.classList.remove("busy"),sn(e)}))}}),t.push({label:"",icon:"friends",title:"Unfriend? (click twice)",classes:["notext","tb_friendonly","tb_unfriendbutton","tb_notblockedonly"],callback:(t,n,s)=>{n.classList.contains("tb_unfriending")?(n.classList.add("busy"),Cn.post("/api/relationships/remove",{user:e._id}).then((e=>{n.classList.remove("busy"),s.classList.remove("tm_friend")}),(e=>{n.classList.remove("busy"),sn(e)}))):n.classList.add("tb_unfriending")}}),t.push({label:"",icon:"report",title:"Report user",classes:["notext","tb_danger","tb_blockedonly"],callback:(t,n,s)=>{t(),La(e,(()=>{}))}}),t.push({label:"UNBLOCK",icon:"block",title:"Unblock user",classes:["tb_blockedonly"],callback:(t,n,s)=>{n.classList.add("busy"),Cn.post("/api/relationships/remove",{user:e._id}).then((e=>{n.classList.remove("busy"),s.classList.remove("tm_blocked")}),(e=>{n.classList.remove("busy"),sn(e)}))}})}return t}const Ba=new Set;function La(e,t){_n({title:`REPORT ${e.username.toUpperCase()}`,msg:`please choose a category to report ${e.username.toUpperCase()} to the TETR.IO moderators for. repeatedly placing false reports may result in a ban.${Ba.has(e.username)?`</p><p class="modal_warning_stern">you have already reported ${e.username.toUpperCase()} very recently. multiple reports from the same user are handled as one, so unless you are adding important additional context, please refrain from sending repeated reports. abuse of the reporting system may result in a ban.`:""}`,classes:["ban_modal"],buttons:[{label:"TOXICITY<span>including, but not limited to toxicity, harassment, unsolicited direct messages, offensive content or bad language.</span>",classes:["pri","layercake_button"],callback:n=>{n(),Sa(e,"toxic","TOXICITY",t)}},{label:"CHEATING<span>including, but not limited to cheating, botting, hacking or otherwise breaking the game or getting an unfair advantage.</span>",classes:["pri","layercake_button"],callback:n=>{n(),Sa(e,"cheating","CHEATING",t)}},{label:"MULTIACCOUNTING<span>including, but not limited to smurfing, multiaccounting, boosting accounts, throwing games.</span>",classes:["pri","layercake_button"],callback:n=>{n(),Sa(e,"alting","MULTIACCOUNTING",t)}},{label:"NSFW/18+ CONTENT<span>including, but not limited to NSFW (not safe for work) avatars, banners, messages, etc.</span>",classes:["pri","layercake_button"],callback:n=>{n(),Sa(e,"nsfw","NSFW CONTENT",t)}},{label:"SPAM<span>including, but not limited to advertising, message flood, etc.</span>",classes:["pri","layercake_button"],callback:n=>{n(),Sa(e,"spam","SPAM",t)}},{label:"OTHER<span>otherwise not listed abuse against the TETR.IO terms of service, such as users under the age of 13, or rules, such as impersonation.</span>",classes:["pri","layercake_button"],callback:n=>{n(),Sa(e,"other","OTHER",t)}},{label:"CANCEL",classes:[],callback:e=>{e()}}]})}function Sa(e,t,n,s){_n({title:`REPORT ${e.username.toUpperCase()} for ${n}`,msg:`please explain briefly why you are reporting ${e.username.toUpperCase()} for ${n} to the TETR.IO moderators below. repeatedly placing false reports may result in a ban.<br><textarea data-escape="request_report_cancel" data-enter="request_report_submit" id="request_report" placeholder="REASON"></textarea>`,classes:["ban_modal"],buttons:[{label:"CANCEL",classes:[],id:"request_report_cancel",callback:e=>{e()}},{label:"SUBMIT",classes:["pri"],id:"request_report_submit",callback:n=>{n(),Cn.post("/api/reports/submit",{target:e.username,type:t,reason:xt("request_report").value}).then((t=>{Ba.add(e.username),nn("report sent! thank you for your help in keeping TETR.IO safe."),s()}),(e=>{sn(e)}))}}]}),xt("request_report").focus()}function za(e){if(!e||!Array.isArray(e))return[];const t={},n={};for(let n=e.length-1;n>=0;n--){const s=e[n].group??e[n].id;(t[s]??(t[s]=[])).push(e[n])}return Object.keys(t).reverse().forEach((e=>n[e]=t[e].reverse())),n}function Fa(e,t,n=0){const s=document.createElement("img");s.classList.add("tetra_badge"),s.src=`/res/badges/${e.id}.png`,s.style=`--i: ${n};`,s.title=`${e.label}${e.desc?`\n${e.desc}`:""}${e.ts?`\n\nAchieved on ${new Date(e.ts).toLocaleString()}`:""}`,t.appendChild(s)}const Ta=function(){let e,t;const n=[];let s=!1,i=!0,o=!1,a=!1,r=!1,l=Date.now(),c=null,p=!1,h=null,d=null,u=!1,m=0,g="disconnected",f=null,b=null,C="/ribbon",y=null,x=null,A=null,v=0,k=!1,w=!1,B=null,L=null,S=!1;function z(){let D=0;t=void 0,e=new it(`${"https:"===location.protocol?"wss:":"ws:"}//${location.host}/ribbon/`),p=!1,a=!0,m=Date.now(),d&&(clearTimeout(d),d=null),n.forEach((t=>{e.on(t[0],t[1])})),e.on("game.replay",(()=>{l=Math.max(l,Date.now())})),e.on("game.start",(()=>{r=!0,l=Math.max(l,Date.now()+8e3),c&&clearInterval(c),c=setInterval((()=>{r&&Date.now()-l>6e3&&Ia("silence")}),200)})),e.on("game.end",(()=>{r=!1,l=Math.max(l,Date.now()),c&&clearInterval(c)})),e.on("ping",(({ms:e})=>{e>500&&Ia("delay"),Wo.addPing(e),l=Math.max(l,Date.now()),b&&A&&Date.now()-D>3e4&&(D=Date.now(),A.getSpoolData(b.host).then((e=>{v=e.rtt+2*e.latency,Wo.addSpoolPing(Math.round(e.rtt)),Wo.addSpoolLatency(2*e.latency)})).catch((()=>{})))})),e.listen("open",(()=>{o=!0,document.body.classList.remove("socket_offline"),t=e.id,p||e.send("server.authorize",{token:bn.token(),handling:ot.handling,signature:_,i:Tn.i()})})),e.listen("reconnect",(()=>{"resuming"===g&&(Ma(),xt("serverdebuginfo").textContent=`reconnecting ${f?`to ${f.name} [${f.flag}]`:""}${b?` through spool ${b.name} [${b.flag}]`:""}`)})),e.listen("resume",(t=>{xt("dirtyflag_net").innerHTML="RIBBON'D",Ea(),m=Date.now();const n="resuming"===g;if(g="resuming",xt("serverdebuginfo").textContent=`ribboned ${f?`from ${f.name} [${f.flag}]`:""}${b?` through spool ${b.name} [${b.flag}]`:""}`,b&&C&&!n){y&&clearTimeout(y),x&&clearTimeout(x);const t=t=>{"resuming"===g&&o&&(b=t.spool,k=!!t.spool&&t.spool.hasFailures,e.SetSpoolID(t.token),e.Switch(t.uri),xt("serverdebuginfo").textContent=`connected ${f?`to ${f.name} [${f.flag}]`:""}${b?`, switching to spool ${b.name} [${b.flag}]`:""}`)},n=()=>{E("ResumeRespool",C).then(t,(e=>{console.error(e),"resuming"===g&&o&&(console.warn("Failed to respool. Will keep trying..."),y=setTimeout(n,2e3))}))},s=()=>{S&&E("FallbackRespool",C,!0).then(t,(e=>{console.error(e),"resuming"===g&&o&&console.error("Failed to fall back!")}))};y=setTimeout(n,2e3),x=setTimeout(s,7e3)}n||(B=setTimeout((()=>{B&&clearTimeout(B),L&&clearInterval(L),"resuming"===g&&o&&(L=setInterval((()=>{if("resuming"!==g||!o)return;let e=!1;setTimeout((()=>{e||(w=!0)}),1e3),Cn.get("https://kagari.network/distress",void 0,{parse:!1,accept:"text/plain"}).then((()=>{})).catch((()=>{e=!0,w=!0}))}),1500))}),2500))})),e.listen("save",(e=>{"resuming"===g&&(Nt(["trackEvent","Ribbon","Save Success",e,Date.now()-m]),Oa(),xt("serverdebuginfo").textContent=`connected ${f?`to ${f.name} [${f.flag}]`:""}${b?` through spool ${b.name} [${b.flag}]`:""}`),g="connected",A&&A.abort(),y&&clearTimeout(y),x&&clearTimeout(x),B&&clearTimeout(B),L&&clearInterval(L),w=!1,Pa()})),e.listen("close",(e=>{document.body.classList.add("socket_offline");const t=o;if(o=!1,a=!1,r=!1,l=Math.max(l,Date.now()),c&&clearInterval(c),i&&!u)return xt("serverdebuginfo").textContent="(reconnecting in background)",t&&(Ia("background",1e3),"devel"!==_.mode&&xt("performancemeter").classList.contains("off")||Qt({msg:"disconnected from server. reconnecting in a moment",color:"#FF783C",icon:"disconnect"})),d&&clearTimeout(d),void(d=setTimeout((()=>{z()}),3e4+12e4*Math.random()));i||Ys.stopNow(),xt("serverdebuginfo").textContent=s?"(not connected)":"(connection lost)","devel"!==_.mode&&xt("performancemeter").classList.contains("off")||Qt({msg:"disconnected from server",color:"#FF783C",icon:"disconnect"}),setTimeout((()=>{if(!s)if(xt("dirtyflag_net").innerHTML="LOST",Yi(),Hi("home",!0),M(),_n({title:"CONNECTION ERROR",classes:["noclickout"],msg:`a connection error has occured and the connection was closed unexpectedly.</p><p>check your internet connection and configuration.</p><p>REASON: ${e}${I()}`,buttons:[{label:"OK",classes:[],callback:e=>{e(),Fn=!0,location.reload()}}]}),"connected"===g)F("Disconnect",e);else{let t="Initial Connect";"migrating"===g?t="Migration":"resuming"===g&&(Da(),t="Save"),F(`${t} Failure`,e)}}),50)})),e.on("kick",(e=>{switch(o=!1,a=!1,xt("dirtyflag_net").innerHTML="LOST",document.body.classList.add("socket_offline"),u=!0,M(),e){case"outdated":if(i)return void document.body.classList.add("socket_outdated");_n({title:"UPDATE REQUIRED",classes:["noclickout"],msg:`an update is required to connect to multiplayer servers. click below to update!${I()}`,buttons:[{label:"UPDATE NOW",classes:[],callback:e=>{e(),Tn.update()}}]});break;case"kick":document.body.classList.add("trapped"),localStorage.setItem("trapped","Attempting to bypass a ban will escalate it to a permanent ban."),_n({title:"KICKED BY MODERATOR",msg:`a TETR.IO moderator or administrator has kicked you from the server. please reload to see the status of your account.${I()}`,classes:["ban_modal","noclickout"],buttons:[{label:"RELOAD",classes:[],callback:e=>{e(),Tn.update(!0)}}]});break;case"restrict":case"block":document.body.classList.add("trapped"),localStorage.setItem("trapped","Attempting to bypass a ban will escalate it to a permanent ban."),_n({title:"BANNED BY MODERATOR",msg:`a TETR.IO moderator or administrator has banned you from the server. please reload to see the status of your account.${I()}`,classes:["crash_modal","noclickout"],buttons:[{label:"RELOAD",classes:[],callback:e=>{e(),Tn.update(!0)}}]});break;case"anticheat":document.body.classList.add("trapped"),localStorage.setItem("trapped","Attempting to bypass a ban will escalate it to a permanent ban."),_n({title:"BANNED BY ANTI-CHEAT",msg:`our anti-cheat has flagged your actions as suspicious. please reload to see the status of your account.${I()}`,classes:["crash_modal","noclickout"],buttons:[{label:"RELOAD",classes:[],callback:e=>{e(),Tn.update(!0)}}]});break;case"manual":document.body.classList.remove("trapped"),localStorage.removeItem("trapped"),bn.logout(),_n({title:"YOU WERE LOGGED OUT",classes:["noclickout"],msg:`you were logged out manually. please log back in again.${I()}`,buttons:[{label:"OK",classes:[],callback:e=>{e(),Tn.update(!0)}}]});break;case"rename":break;default:{_n({title:"CONNECTION ERROR",classes:["noclickout"],msg:`the server has disconnected you.</p><p>REASON: ${e}</p><p>please check your internet connection and configuration.${I()}`,buttons:[{label:"OK",classes:[],callback:e=>{e(),Fn=!0,location.reload()}}]});const t=`Kick: ${e.replace(/[0-9]+/g,"#")}`;if("connected"===g)F("Disconnect",t);else{let e="Initial Connect";"migrating"===g?e="Migration":"resuming"===g&&(Da(),e="Save"),F(`${e} Failure`,t)}}}Yi(),Hi("home",!0)})),e.on("server.announcement",(e=>{switch(e.type){case"announcement":xa.SePlay("notify"),Qt({msg:e.msg,color:"#FFCC00",icon:"announcement",timeout:1e4}),lr.showAnnouncement(e.msg);break;case"maintenance":xa.SePlay("maintenance"),document.body.classList.add("maintenance"),Qt({msg:`${e.msg}<hr>${e.reason}`,color:"#FF5200",icon:"maintenance",timeout:15e3});break;case"maintenance_cancel":xa.SePlay("notify"),document.body.classList.remove("maintenance"),Qt({msg:"the previously announced maintenance has been canceled",color:"#0091ff",icon:"maintenance_cancel",timeout:15e3})}})),e.on("server.maintenance",(e=>{i||(o=!1,a=!1,xt("dirtyflag_net").innerHTML="LOST",document.body.classList.add("socket_offline"),u=!0,M(),_n({title:"MAINTENANCE STARTED",classes:["noclickout"],msg:`the server has been shut down for maintenance.</p><p>${e.reason}${I()}`,buttons:[{label:"RELOAD",classes:[],callback:e=>{e(),Tn.update(!0)}}]}),Yi(),Hi("home",!0))})),e.on("reload",(()=>{Tn.update()})),e.on("rejected",(()=>{xt("dirtyflag_net").innerHTML="BAD",Ia("rejected",5e3)})),e.on("pni",(e=>{Ia(e.type,e.timeout)})),e.on("server.authorize",(e=>{h=e,f=e.worker,xt("serverdebuginfo").textContent=`connected ${f?`to ${f.name} [${f.flag}]`:""}${b?` through spool ${b.name} [${b.flag}]`:""}`,"devel"!==_.mode&&xt("performancemeter").classList.contains("off")||Qt({msg:`connected to server<br>${T()}`,color:"#61FF3C",icon:"connect",timeout:2500}),p=!0,a=!1,g="connected",Nt(["trackEvent","Ribbon","Initial Connect Success",`${f?f.name:"---"} ${b?b.name:"---"}`,Date.now()-m])}));let O=null;e.on("server.migrate",(t=>{g="migrating",C=t.endpoint;let n=`${"https:"===location.protocol?"wss:":"ws:"}//${location.host}${t.endpoint}`;b&&(n=`wss://${b.host}${t.endpoint}`),e.Switch(n),xt("serverdebuginfo").textContent=`migrating to ${t.name} [${t.flag}]${b?` through spool ${b.name} [${b.flag}]`:""}`,"devel"!==_.mode&&xt("performancemeter").classList.contains("off")||(O=Qt({msg:`switching server<br>${T()}`,color:"#FFF83C",icon:"disconnect-change",timeout:6e4})),m=Date.now()})),e.on("server.migrated",(e=>{g="connected",f=e.worker,xt("serverdebuginfo").textContent=`connected ${f?`to ${f.name} [${f.flag}]`:""}${b?` through spool ${b.name} [${b.flag}]`:""}`,O&&rn(O,{msg:`server switched<br>${T()}`,color:"#61FF3C",icon:"connect",timeout:2500}),Nt(["trackEvent","Ribbon","Migration Success",`${f?f.name:"---"} ${b?b.name:"---"}`,Date.now()-m])})),E("InitialConnect").then((t=>{b=t.spool,C=t.endpoint,k=!!t.spool&&t.spool.hasFailures,e.SetEndpoint(t.uri),e.SetSpoolID(t.token),e.connect()}),(t=>{e.close(t)}))}function F(e,t){let n=!1;return w?(setTimeout((()=>{Nt(["trackEvent","Ribbon",`${e} (their fault)`,t])}),500),void(xt("networkerror_fault_indicator")&&(xt("networkerror_fault_indicator").innerHTML="<br>this disconnect was detected to be caused by your network connection."))):"visible"!==document.visibilityState?(setTimeout((()=>{Nt(["trackEvent","Ribbon",`${e} (their fault, tabbed out)`,t])}),500),void(xt("networkerror_fault_indicator")&&(xt("networkerror_fault_indicator").innerHTML="<br>due to browser limitations, tabbing out of TETR.IO midgame may cause disconnects."))):(setTimeout((()=>{n||(n=!0,Nt(["trackEvent","Ribbon",`${e} (their fault)`,t]),xt("networkerror_fault_indicator")&&(xt("networkerror_fault_indicator").innerHTML="<br>this disconnect was detected to be caused by your network connection."))}),1e3),void Cn.get("https://kagari.network/distress",void 0,{parse:!1,accept:"text/plain"}).then((()=>{n||(n=!0,Nt(["trackEvent","Ribbon",`${e} (our fault)`,t]),xt("networkerror_fault_indicator")&&(xt("networkerror_fault_indicator").innerHTML="<br>if you are certain this error is not on your side, please report it."))})).catch((()=>{})))}function T(){return b?`<img class="flag" src="/res/flags/${b.flag.toLowerCase()}.svg" title="${Un[b.flag]}" /> ${b.name.toUpperCase()}<br><img src="/res/sharp-hook-right.png" style="margin-left: 0.2em; height: 0.88em; vertical-align: -5%;" /> <img class="flag" src="/res/flags/${f.flag.toLowerCase()}.svg" title="${Un[f.flag]}" /> ${f.name.toUpperCase()}`:`<img class="flag" src="/res/flags/${f.flag.toLowerCase()}.svg" title="${Un[f.flag]}" /> ${f.name.toUpperCase()}`}function I(){let e=`<span id="networkerror_fault_indicator"></span></p><p class="modal_also">SOCKET ID: ${t||"---"}<br>WORKER: ${f?f.name.toUpperCase():"---"}<br>SPOOL: ${b?b.name.toUpperCase():"---"}`;return document.body.classList.contains("sigliatrip_idiot")&&(e+='<br><span style="color: #F00; font-weight: 900;">THIRD-PARTY MODIFICATIONS DETECTED. DO NOT REPORT ANY ERRORS WHILE USING THIRD-PARTY MODIFICATIONS.</span><br><span style="color: #F00; font-weight: 500; font-size: 0.7em;">THIRD-PARTY MODIFICATIONS ARE NOT SUPPORTED AND MAY BE INCOMPATIBLE. THIRD-PARTY MODIFICATIONS THAT IMPACT GAMEPLAY MAY BE AGAINST TERMS OF SERVICES.</span>'),e}async function E(e=null,t=void 0,n=!1){let s,i,o=[];if(n)return console.log(`${e?`${e} > `:""}Forcing fallback to endpoint ${t}.`),{uri:`${"https:"===location.protocol?"wss:":"ws:"}//${location.host}${t}`,endpoint:t,token:void 0,spool:void 0};try{console.log((e?`${e} > `:"")+"Obtaining Ribbon endpoint...");const n=await Cn.get("/api/server/ribbon");if(!n.endpoint)throw console.warn((e?`${e} > `:"")+"No endpoints available."),"no endpoints available";if(s=n.endpoint,!(n.spools&&n.spools.spools&&n.spools.spools.length))return console.log(`${e?`${e} > `:""}Obtained Ribbon endpoint ${n.endpoint}. Spooling is disabled on this instance.`),{uri:`${"https:"===location.protocol?"wss:":"ws:"}//${location.host}${t||s}`,endpoint:s,token:void 0,spool:void 0};console.log(`${e?`${e} > `:""}Obtained Ribbon endpoint ${n.endpoint} and ${n.spools.spools.length} spools${n.fallback_available?", fallback available":""}.`),i=n.spools.token,o=n.spools.spools,S=n.fallback_available}catch(t){throw console.error((e?`${e} > `:"")+"Could not retrieve Ribbon endpoint."),"could not retrieve ribbon endpoint"}console.log((e?`${e} > `:"")+"Getting a spool...");try{A=new Ha(o,e);const n=await A.getSpool();return console.log(`${e?`${e} > `:""}Obtained spool ${n.name} (${n.host}) [${n.flag}].`),{uri:`wss://${n.host}${t||s}`,endpoint:s,token:i,spool:n}}catch(n){if(S)return console.warn((e?`${e} > `:"")+"Could not spool a Ribbon connection, falling back.",n),{uri:`${"https:"===location.protocol?"wss:":"ws:"}//${location.host}${t||s}`,endpoint:s,token:void 0,spool:void 0};throw console.error((e?`${e} > `:"")+"Could not spool a Ribbon connection.",n),"could not spool ribbon connection"}}function M(){s=!0}return setInterval((async()=>{if(e&&"connected"===g&&o&&b)try{console.log("AmbientRespool > Starting ambient respool.");const t=await E("AmbientRespool",C);if(!(e&&"connected"===g&&o&&b&&t.spool))return;if(e.SetSpoolID(t.token),t.spool.hasFailures||(k=!1),t.spool.name===b.name)return void console.log("AmbientRespool > Obtained new token, already on best available spool.");v>10&&v/(t.spool.rtt+2*t.spool.latency)>=(k?1.25:2)?(console.log(`AmbientRespool > Will reconnect for ping advantage ${Math.round(v)}ms  ${Math.round(t.spool.rtt)}ms.`),b=t.spool,e.Switch(t.uri),xt("serverdebuginfo").textContent=`connected ${f?`to ${f.name} [${f.flag}]`:""}${b?`, switching to spool ${b.name} [${b.flag}]`:""}`):console.log(`AmbientRespool > Obtained new token, no significant ping advantage ${Math.round(v)}ms  ${Math.round(t.spool.rtt)}ms.`)}catch(e){console.warn("AmbientRespool > Ambient respool failed, could not retrieve Ribbon spool token!")}}),25e4+1e5*Math.random()),{on:(t,s)=>{n.push([t,s]),e&&e.on(t,s)},off:(t,n)=>{e&&e.off(t,n)},socket:function(){return e},emit:function(t,n){e.send(t,n)},connect:z,disconnect:function(){e.close("client closed ribbon")},abort:function(){s=!0,e.close(null,!0)},expectDisconnect:M,isConnected:()=>o,isBackground:()=>i,cut:t=>{e&&e.cut(t)},cork:()=>{e?.cork()},uncork:t=>{e?.uncork(t)},require:()=>new Promise(((t,n)=>{i=!1,!o||a?(a||z(),e?.listen("authorized",t),e?.listen("connect_error",n)):t(h)})),unrequire:()=>{i=!0},updateHandling:function(){e.send("config.handling",ot.handling)},getConnectionDialogString:I}};function Ia(e,t=100){Ja&&Ja.isBackground()||!["background","split","load"].includes(e)||(xt(`network_${e}`).classList.add("ping"),setTimeout((()=>{xt(`network_${e}`).classList.remove("ping")}),t))}function Ea(){Ja&&Ja.isBackground()||(xt("network_disconnect").setAttribute("src","/res/icon/network_disconnect.svg"),xt("network_disconnect").classList.remove("anim"),xt("network_disconnect").classList.add("ping"))}function Ma(){Ja&&Ja.isBackground()||(xt("network_disconnect").setAttribute("src","/res/icon/network_reconnecting.png"),xt("network_disconnect").classList.add("anim"),xt("network_disconnect").classList.add("ping"))}function Da(){Ja&&Ja.isBackground()||(xt("network_disconnect").setAttribute("src","/res/icon/network_disconnect.svg"),xt("network_disconnect").classList.remove("anim"),xt("network_disconnect").classList.add("ping"),setTimeout((()=>{xt("network_disconnect").classList.remove("ping")}),5e3))}function Oa(){Ja&&Ja.isBackground()||(xt("network_disconnect").setAttribute("src","/res/icon/network_reconnected.svg"),xt("network_disconnect").classList.remove("anim"),xt("network_disconnect").classList.add("ping"),Pa())}function Pa(){setTimeout((()=>{xt("network_disconnect").setAttribute("src","/res/icon/network_reconnected.svg"),xt("network_disconnect").classList.remove("anim"),xt("network_disconnect").classList.remove("ping")}),1e3)}const Ha=function(e,t=null){let n=[],s=!1,i=0,o=0;const a=new Set;let r,l,c=!1,p=null,h=null,d=null,u=!1;function _(e){const t=e[0],n={online:128&e[1],avoidDueToHighLoad:64&e[1],recentlyRestarted:32&e[1],backhaulDisrupted:16&e[1]},s=[0,0,0];s[0]=e[2]/256*4,s[1]=e[3]/256*4,s[2]=e[4]/256*4;return{version:t,flags:n,load:s,latency:e[5],str:`v${t} /${n.avoidDueToHighLoad?"Av":""}${n.recentlyRestarted?"Rr":""}${n.backhaulDisrupted?"Bd":""}/ ${s[0]}, ${s[1]}, ${s[2]}`}}function m(){if(c)return;c=!0,p&&clearTimeout(p),h&&clearTimeout(h),d&&clearTimeout(d);for(const e of a)e.abort();a.clear();const e=[],o=n.reduce(((e,t)=>Math.min(e,t.rtt)),Number.MAX_VALUE);for(const t of n){const n=Math.ceil((t.resp.flags.avoidDueToHighLoad?5:50)*Math.pow(o/t.rtt,3)/Math.max(1,8*t.resp.load[0]-3.8));for(let s=0;s<n;s++)e.push(t)}if(0===e.length){if(s)return;return console.warn((t?`${t} > `:"")+"Spool > Spooling failed: no available spools"),void l()}const u=e[Math.floor(Math.random()*e.length)];u.hasFailures=i>0,console.log(`${t?`${t} > `:""}Spool > Spooled ${u.name}!`),r(u)}return{getSpool:function(){return new Promise(((s,g)=>{r=s,l=g,function(){console.log((t?`${t} > `:"")+"Spool > Spooling started"),new C(Math.floor(1e9*Math.random())).shuffleArray(e),performance.clearResourceTimings(),performance.setResourceTimingBufferSize(500),d=setTimeout(m,1e4);let s=0;for(const r of e){const l=new XMLHttpRequest,d=performance.now(),g=`${Date.now()}-${s++}-${Math.floor(1e6*Math.random())}`,f=`https://${r.host}/spool?${g}`;l.open("GET",f,!0),l.responseType="arraybuffer",a.add(l),l.onload=()=>{if(!c&&4===l.readyState){const s=performance.getEntriesByName(f)[0];let c;s&&0!==s.requestStart?c=s.responseStart-s.requestStart:(u||(u=!0,console.warn("Performance Resource Timing API is not available.")),c=performance.now()-d),a.delete(l);const g=_(new Uint8Array(l.response));if(!g.flags.online)return i++,console.log(`${t?`${t} > `:""}Spool > ${Math.round(c/2).toString().padStart(5," ")}+${g.latency}ms ${r.name} [${r.flag}] Denies request (${g.str})`),void(n.length+i>=e.length&&m());console.log(`${t?`${t} > `:""}Spool > ${Math.round(c/2).toString().padStart(5," ")}+${g.latency}ms ${r.name} [${r.flag}] ${g.str}`),r.rtt=c+2*g.latency,r.resp=g,n.push(r),g.flags.avoidDueToHighLoad||o++,1===n.length&&(h=setTimeout(m,1e4)),p&&clearTimeout(p),p=setTimeout(m,1500),n.length+i>=e.length&&m(),o>=3&&m()}},l.onerror=()=>{c||(a.delete(l),i++,console.log(`${t?`${t} > `:""}Spool > -----ms ${r.name} [${r.flag}] No response`),n.length+i>=e.length&&m())},l.send()}}()}))},getSpoolData:function(e){return new Promise(((t,n)=>{const s=new XMLHttpRequest,i=performance.now(),o=`ping-${Date.now()}-${Math.floor(1e6*Math.random())}`,a=`https://${e}/spool?${o}`;s.open("GET",a,!0),s.responseType="arraybuffer",s.onload=()=>{if(4===s.readyState){const e=performance.getEntriesByName(a)[0];let n;n=e&&0!==e.requestStart?e.responseStart-e.requestStart:performance.now()-i;const o=_(new Uint8Array(s.response));t({...o,rtt:n})}},s.onerror=()=>{n()},s.send()}))},abort:function(){n=[],s=!0,m()}}},Ra=new class e{static strategies=["even","elims","random","payback"];game=null;enabled=!1;preselect=null;setGame(t){this.game=t,this.enabled=!1,this.preselect=null;for(const[t,n]of e.strategies.entries())At(`#diyusi_strategy_${t+1}>p`).textContent=n,xt(`diyusi_strategy_${t+1}`).classList.toggle("active",!1);xt(`diyusi_strategy_${t.getStrategy()+1}`).classList.add("active"),xt("diyusi_enemies").classList.add("hidden"),this.game.on("start",this._OnStart.bind(this)),this.game.on("enemy",this.setTargeting.bind(this)),this.game.on("strategy",this._OnStrategyChange.bind(this)),this.game.on("allow_target",this.setEnabled.bind(this)),this.game.on("stop",this._OnEnd.bind(this))}setStrategy(e,t){if(this.game&&this.enabled)return this.game.isStarted()?5===e?this.game.setManualTarget(t):void(this.game.getStrategy()!==e&&this.game.setStrategy(e)):(this.preselect={strategy:e,gameid:t},this._OnStrategyChange(e))}setEnabled(e){this.enabled===e||e&&!this.game||(this.enabled=e,e?(xt("diyusi").classList.remove("hidden"),xt("diyusi").classList.remove("hiding"),this._ping()):(xt("diyusi").classList.add("hiding"),setTimeout((()=>{xt("diyusi").classList.add("hidden")}),500)))}async setTargeting(){const e=xt("diyusi_enemies"),t=this.game?.getEnemies().length;await Ht(100);const n=this.game?.getEnemies().length;t===n&&(t<1?e.classList.add("hidden"):(e.querySelector("h1").textContent=`${t} TARGETING YOU`,e.classList.toggle("caution",t>=4&&t<=8),e.classList.toggle("danger",t>=9),e.classList.remove("hidden")))}_OnStart(){if(this.preselect)return 5===this.preselect.strategy?this.game.setManualTarget(this.preselect.gameid):void this.game.setStrategy(this.preselect.strategy)}_OnEnd(){this.game&&(this.game=null,this.setEnabled(!1))}_OnStrategyChange(e){for(let e=1;e<=4;e++)xt(`diyusi_strategy_${e}`).classList.toggle("active",!1);e>=4||(xt(`diyusi_strategy_${e+1}`).classList.add("active"),this._ping())}_ping(){xt("diyusi").classList.add("ping"),setTimeout((()=>{xt("diyusi").classList.remove("ping")}),150)}};Tn.ready((()=>{function e(e){if(!e.repeat&&!(document.body.classList.contains("chatfocus")||Ji>=1))for(const[t,n]of Object.entries(rt))if(n.includes(yt(e)))switch(t){case"target1":Ra.setStrategy(0);break;case"target2":Ra.setStrategy(1);break;case"target3":Ra.setStrategy(2);break;case"target4":Ra.setStrategy(3)}}document.addEventListener("keydown",e,!1),document.addEventListener("gpdown",e,!1)}));const Wa={Arena_A1:{hx:[["Arena_A1-A1",0,0],["Arena_A1-A2",0,4096]],"1x":[["Arena_A1-A1",0,0],["Arena_A1-B1",2048,0],["Arena_A1-A2",0,2048],["Arena_A1-B2",2048,2048],["Arena_A1-A3",0,4096],["Arena_A1-B3",2048,4096]],"2x":[["Arena_A1-A1",0,0],["Arena_A1-B1",1024,0],["Arena_A1-C1",2048,0],["Arena_A1-D1",3072,0],["Arena_A1-A2",0,1024],["Arena_A1-B2",1024,1024],["Arena_A1-C2",2048,1024],["Arena_A1-D2",3072,1024],["Arena_A1-A3",0,2048],["Arena_A1-B3",1024,2048],["Arena_A1-C3",2048,2048],["Arena_A1-D3",3072,2048],["Arena_A1-A4",0,3072],["Arena_A1-B4",1024,3072],["Arena_A1-C4",2048,3072],["Arena_A1-D4",3072,3072],["Arena_A1-A5",0,4096],["Arena_A1-B5",1024,4096],["Arena_A1-C5",2048,4096],["Arena_A1-D5",3072,4096]],"4x":[["Arena_A1-A1",0,0],["Arena_A1-B1",1024,0],["Arena_A1-C1",2048,0],["Arena_A1-D1",3072,0],["Arena_A1-A2",0,1024],["Arena_A1-B2",1024,1024],["Arena_A1-C2",2048,1024],["Arena_A1-D2",3072,1024],["Arena_A1-A3",0,2048],["Arena_A1-B3",1024,2048],["Arena_A1-C3",2048,2048],["Arena_A1-D3",3072,2048],["Arena_A1-A4",0,3072],["Arena_A1-B4",1024,3072],["Arena_A1-C4",2048,3072],["Arena_A1-D4",3072,3072],["Arena_A1-A5",0,4096],["Arena_A1-B5",1024,4096],["Arena_A1-C5",2048,4096],["Arena_A1-D5",3072,4096]]},Arena_B1:{hx:[["Arena_B1-A1",0,0],["Arena_B1-A2",0,4096]],"1x":[["Arena_B1-A1",0,0],["Arena_B1-B1",2048,0],["Arena_B1-A2",0,2048],["Arena_B1-B2",2048,2048],["Arena_B1-A3",0,4096],["Arena_B1-B3",2048,4096]],"2x":[["Arena_B1-A1",0,0],["Arena_B1-B1",1024,0],["Arena_B1-C1",2048,0],["Arena_B1-D1",3072,0],["Arena_B1-A2",0,1024],["Arena_B1-B2",1024,1024],["Arena_B1-C2",2048,1024],["Arena_B1-D2",3072,1024],["Arena_B1-A3",0,2048],["Arena_B1-B3",1024,2048],["Arena_B1-C3",2048,2048],["Arena_B1-D3",3072,2048],["Arena_B1-A4",0,3072],["Arena_B1-B4",1024,3072],["Arena_B1-C4",2048,3072],["Arena_B1-D4",3072,3072],["Arena_B1-A5",0,4096],["Arena_B1-B5",1024,4096],["Arena_B1-C5",2048,4096],["Arena_B1-D5",3072,4096]],"4x":[["Arena_B1-A1",0,0],["Arena_B1-B1",1024,0],["Arena_B1-C1",2048,0],["Arena_B1-D1",3072,0],["Arena_B1-A2",0,1024],["Arena_B1-B2",1024,1024],["Arena_B1-C2",2048,1024],["Arena_B1-D2",3072,1024],["Arena_B1-A3",0,2048],["Arena_B1-B3",1024,2048],["Arena_B1-C3",2048,2048],["Arena_B1-D3",3072,2048],["Arena_B1-A4",0,3072],["Arena_B1-B4",1024,3072],["Arena_B1-C4",2048,3072],["Arena_B1-D4",3072,3072],["Arena_B1-A5",0,4096],["Arena_B1-B5",1024,4096],["Arena_B1-C5",2048,4096],["Arena_B1-D5",3072,4096]]},Arena_B2:{hx:[["Arena_B2-A1",0,0]],"1x":[["Arena_B2-A1",0,0],["Arena_B2-B1",2048,0],["Arena_B2-A2",0,2048],["Arena_B2-B2",2048,2048]],"2x":[["Arena_B2-A1",0,0],["Arena_B2-B1",1024,0],["Arena_B2-C1",2048,0],["Arena_B2-D1",3072,0],["Arena_B2-A2",0,1024],["Arena_B2-B2",1024,1024],["Arena_B2-C2",2048,1024],["Arena_B2-D2",3072,1024],["Arena_B2-A3",0,2048],["Arena_B2-B3",1024,2048],["Arena_B2-C3",2048,2048],["Arena_B2-D3",3072,2048]],"4x":[["Arena_B2-A1",0,0],["Arena_B2-B1",1024,0],["Arena_B2-C1",2048,0],["Arena_B2-D1",3072,0],["Arena_B2-A2",0,1024],["Arena_B2-B2",1024,1024],["Arena_B2-C2",2048,1024],["Arena_B2-D2",3072,1024],["Arena_B2-A3",0,2048],["Arena_B2-B3",1024,2048],["Arena_B2-C3",2048,2048],["Arena_B2-D3",3072,2048]]},Arena_B3:{hx:[["Arena_B3-A1",0,0],["Arena_B3-A2",0,4096]],"1x":[["Arena_B3-A1",0,0],["Arena_B3-B1",2048,0],["Arena_B3-A2",0,2048],["Arena_B3-B2",2048,2048],["Arena_B3-A3",0,4096],["Arena_B3-B3",2048,4096]],"2x":[["Arena_B3-A1",0,0],["Arena_B3-B1",1024,0],["Arena_B3-C1",2048,0],["Arena_B3-D1",3072,0],["Arena_B3-A2",0,1024],["Arena_B3-B2",1024,1024],["Arena_B3-C2",2048,1024],["Arena_B3-D2",3072,1024],["Arena_B3-A3",0,2048],["Arena_B3-C3",2048,2048],["Arena_B3-D3",3072,2048],["Arena_B3-A4",0,3072],["Arena_B3-D4",3072,3072],["Arena_B3-A5",0,4096],["Arena_B3-D5",3072,4096]],"4x":[["Arena_B3-A1",0,0],["Arena_B3-B1",1024,0],["Arena_B3-C1",2048,0],["Arena_B3-D1",3072,0],["Arena_B3-A2",0,1024],["Arena_B3-B2",1024,1024],["Arena_B3-C2",2048,1024],["Arena_B3-D2",3072,1024],["Arena_B3-A3",0,2048],["Arena_B3-C3",2048,2048],["Arena_B3-D3",3072,2048],["Arena_B3-A4",0,3072],["Arena_B3-D4",3072,3072],["Arena_B3-A5",0,4096],["Arena_B3-D5",3072,4096]]},Arena_C1:{hx:[["Arena_C1-A1",0,0]],"1x":[["Arena_C1-A1",0,0],["Arena_C1-B1",2048,0]],"2x":[["Arena_C1-B1",1024,0],["Arena_C1-C1",2048,0],["Arena_C1-B2",1024,1024],["Arena_C1-C2",2048,1024]],"4x":[["Arena_C1-B1",1024,0],["Arena_C1-C1",2048,0],["Arena_C1-B2",1024,1024],["Arena_C1-C2",2048,1024]]},Arena_Front:{hx:[["Arena_Front-A1",0,0],["Arena_Front-A2",0,4096],["Arena_Front-A3",0,8192]],"1x":[["Arena_Front-A1",0,0],["Arena_Front-B1",2048,0],["Arena_Front-A2",0,2048],["Arena_Front-B2",2048,2048],["Arena_Front-A3",0,4096],["Arena_Front-B3",2048,4096],["Arena_Front-A4",0,6144],["Arena_Front-B4",2048,6144],["Arena_Front-A5",0,8192],["Arena_Front-B5",2048,8192],["Arena_Front-A6",0,10240],["Arena_Front-B6",2048,10240]],"2x":[["Arena_Front-A1",0,0],["Arena_Front-B1",1024,0],["Arena_Front-C1",2048,0],["Arena_Front-D1",3072,0],["Arena_Front-A2",0,1024],["Arena_Front-B2",1024,1024],["Arena_Front-C2",2048,1024],["Arena_Front-D2",3072,1024],["Arena_Front-A3",0,2048],["Arena_Front-B3",1024,2048],["Arena_Front-C3",2048,2048],["Arena_Front-D3",3072,2048],["Arena_Front-A4",0,3072],["Arena_Front-B4",1024,3072],["Arena_Front-C4",2048,3072],["Arena_Front-D4",3072,3072],["Arena_Front-A5",0,4096],["Arena_Front-B5",1024,4096],["Arena_Front-C5",2048,4096],["Arena_Front-D5",3072,4096],["Arena_Front-A6",0,5120],["Arena_Front-B6",1024,5120],["Arena_Front-C6",2048,5120],["Arena_Front-D6",3072,5120],["Arena_Front-A7",0,6144],["Arena_Front-B7",1024,6144],["Arena_Front-C7",2048,6144],["Arena_Front-D7",3072,6144],["Arena_Front-A8",0,7168],["Arena_Front-D8",3072,7168],["Arena_Front-A9",0,8192],["Arena_Front-B9",1024,8192],["Arena_Front-C9",2048,8192],["Arena_Front-D9",3072,8192],["Arena_Front-A10",0,9216],["Arena_Front-B10",1024,9216],["Arena_Front-C10",2048,9216],["Arena_Front-D10",3072,9216],["Arena_Front-A11",0,10240],["Arena_Front-B11",1024,10240],["Arena_Front-C11",2048,10240],["Arena_Front-D11",3072,10240],["Arena_Front-A12",0,11264],["Arena_Front-B12",1024,11264],["Arena_Front-C12",2048,11264],["Arena_Front-D12",3072,11264]],"4x":[["Arena_Front-A1",0,0],["Arena_Front-B1",1024,0],["Arena_Front-C1",2048,0],["Arena_Front-D1",3072,0],["Arena_Front-A2",0,1024],["Arena_Front-B2",1024,1024],["Arena_Front-C2",2048,1024],["Arena_Front-D2",3072,1024],["Arena_Front-A3",0,2048],["Arena_Front-B3",1024,2048],["Arena_Front-C3",2048,2048],["Arena_Front-D3",3072,2048],["Arena_Front-A4",0,3072],["Arena_Front-B4",1024,3072],["Arena_Front-C4",2048,3072],["Arena_Front-D4",3072,3072],["Arena_Front-A5",0,4096],["Arena_Front-B5",1024,4096],["Arena_Front-C5",2048,4096],["Arena_Front-D5",3072,4096],["Arena_Front-A6",0,5120],["Arena_Front-B6",1024,5120],["Arena_Front-C6",2048,5120],["Arena_Front-D6",3072,5120],["Arena_Front-A7",0,6144],["Arena_Front-B7",1024,6144],["Arena_Front-C7",2048,6144],["Arena_Front-D7",3072,6144],["Arena_Front-A8",0,7168],["Arena_Front-D8",3072,7168],["Arena_Front-A9",0,8192],["Arena_Front-B9",1024,8192],["Arena_Front-C9",2048,8192],["Arena_Front-D9",3072,8192],["Arena_Front-A10",0,9216],["Arena_Front-B10",1024,9216],["Arena_Front-C10",2048,9216],["Arena_Front-D10",3072,9216],["Arena_Front-A11",0,10240],["Arena_Front-B11",1024,10240],["Arena_Front-C11",2048,10240],["Arena_Front-D11",3072,10240],["Arena_Front-A12",0,11264],["Arena_Front-B12",1024,11264],["Arena_Front-C12",2048,11264],["Arena_Front-D12",3072,11264]]},Casino_A1:{hx:[["Casino_A1-A1",0,0],["Casino_A1-A2",0,4096]],"1x":[["Casino_A1-A1",0,0],["Casino_A1-B1",2048,0],["Casino_A1-A2",0,2048],["Casino_A1-B2",2048,2048],["Casino_A1-A3",0,4096],["Casino_A1-B3",2048,4096],["Casino_A1-A4",0,6144],["Casino_A1-B4",2048,6144]],"2x":[["Casino_A1-A1",0,0],["Casino_A1-B1",1024,0],["Casino_A1-C1",2048,0],["Casino_A1-A2",0,1024],["Casino_A1-B2",1024,1024],["Casino_A1-C2",2048,1024],["Casino_A1-A3",0,2048],["Casino_A1-B3",1024,2048],["Casino_A1-C3",2048,2048],["Casino_A1-A4",0,3072],["Casino_A1-B4",1024,3072],["Casino_A1-C4",2048,3072],["Casino_A1-A5",0,4096],["Casino_A1-B5",1024,4096],["Casino_A1-C5",2048,4096],["Casino_A1-A6",0,5120],["Casino_A1-B6",1024,5120],["Casino_A1-C6",2048,5120],["Casino_A1-A7",0,6144],["Casino_A1-B7",1024,6144],["Casino_A1-C7",2048,6144]],"4x":[["Casino_A1-A1",0,0],["Casino_A1-B1",1024,0],["Casino_A1-C1",2048,0],["Casino_A1-A2",0,1024],["Casino_A1-B2",1024,1024],["Casino_A1-C2",2048,1024],["Casino_A1-A3",0,2048],["Casino_A1-B3",1024,2048],["Casino_A1-C3",2048,2048],["Casino_A1-A4",0,3072],["Casino_A1-B4",1024,3072],["Casino_A1-C4",2048,3072],["Casino_A1-A5",0,4096],["Casino_A1-B5",1024,4096],["Casino_A1-C5",2048,4096],["Casino_A1-A6",0,5120],["Casino_A1-B6",1024,5120],["Casino_A1-C6",2048,5120],["Casino_A1-A7",0,6144],["Casino_A1-B7",1024,6144],["Casino_A1-C7",2048,6144]]},Casino_A1b:{hx:[["Casino_A1b-A1",0,0],["Casino_A1b-A2",0,4096]],"1x":[["Casino_A1b-A1",0,0],["Casino_A1b-B1",2048,0],["Casino_A1b-A2",0,2048],["Casino_A1b-B2",2048,2048],["Casino_A1b-A3",0,4096],["Casino_A1b-B3",2048,4096]],"2x":[["Casino_A1b-A1",0,0],["Casino_A1b-D1",3072,0],["Casino_A1b-A2",0,1024],["Casino_A1b-D2",3072,1024],["Casino_A1b-A3",0,2048],["Casino_A1b-D3",3072,2048],["Casino_A1b-A4",0,3072],["Casino_A1b-D4",3072,3072],["Casino_A1b-A5",0,4096],["Casino_A1b-D5",3072,4096],["Casino_A1b-A6",0,5120],["Casino_A1b-D6",3072,5120]],"4x":[["Casino_A1b-A1",0,0],["Casino_A1b-D1",3072,0],["Casino_A1b-A2",0,1024],["Casino_A1b-D2",3072,1024],["Casino_A1b-A3",0,2048],["Casino_A1b-D3",3072,2048],["Casino_A1b-A4",0,3072],["Casino_A1b-D4",3072,3072],["Casino_A1b-A5",0,4096],["Casino_A1b-D5",3072,4096],["Casino_A1b-A6",0,5120],["Casino_A1b-D6",3072,5120]]},Casino_B1:{hx:[["Casino_B1-A1",0,0]],"1x":[["Casino_B1-A1",0,0],["Casino_B1-B1",2048,0],["Casino_B1-A2",0,2048],["Casino_B1-B2",2048,2048]],"2x":[["Casino_B1-A1",0,0],["Casino_B1-B1",1024,0],["Casino_B1-C1",2048,0],["Casino_B1-D1",3072,0],["Casino_B1-A2",0,1024],["Casino_B1-B2",1024,1024],["Casino_B1-C2",2048,1024],["Casino_B1-D2",3072,1024],["Casino_B1-A3",0,2048],["Casino_B1-B3",1024,2048],["Casino_B1-C3",2048,2048],["Casino_B1-D3",3072,2048],["Casino_B1-A4",0,3072],["Casino_B1-B4",1024,3072],["Casino_B1-C4",2048,3072],["Casino_B1-D4",3072,3072]],"4x":[["Casino_B1-A1",0,0],["Casino_B1-B1",1024,0],["Casino_B1-C1",2048,0],["Casino_B1-D1",3072,0],["Casino_B1-A2",0,1024],["Casino_B1-B2",1024,1024],["Casino_B1-C2",2048,1024],["Casino_B1-D2",3072,1024],["Casino_B1-A3",0,2048],["Casino_B1-B3",1024,2048],["Casino_B1-C3",2048,2048],["Casino_B1-D3",3072,2048],["Casino_B1-A4",0,3072],["Casino_B1-B4",1024,3072],["Casino_B1-C4",2048,3072],["Casino_B1-D4",3072,3072]]},Casino_B2:{hx:[["Casino_B2-A1",0,0]],"1x":[["Casino_B2-A1",0,0],["Casino_B2-B1",2048,0],["Casino_B2-A2",0,2048],["Casino_B2-B2",2048,2048]],"2x":[["Casino_B2-A1",0,0],["Casino_B2-B1",1024,0],["Casino_B2-C1",2048,0],["Casino_B2-D1",3072,0],["Casino_B2-A2",0,1024],["Casino_B2-B2",1024,1024],["Casino_B2-C2",2048,1024],["Casino_B2-D2",3072,1024],["Casino_B2-A3",0,2048],["Casino_B2-B3",1024,2048],["Casino_B2-C3",2048,2048],["Casino_B2-D3",3072,2048]],"4x":[["Casino_B2-A1",0,0],["Casino_B2-B1",1024,0],["Casino_B2-C1",2048,0],["Casino_B2-D1",3072,0],["Casino_B2-A2",0,1024],["Casino_B2-B2",1024,1024],["Casino_B2-C2",2048,1024],["Casino_B2-D2",3072,1024],["Casino_B2-A3",0,2048],["Casino_B2-B3",1024,2048],["Casino_B2-C3",2048,2048],["Casino_B2-D3",3072,2048]]},Casino_Front:{hx:[["Casino_Front-A1",0,0],["Casino_Front-A2",0,4096],["Casino_Front-A3",0,8192]],"1x":[["Casino_Front-A1",0,0],["Casino_Front-B1",2048,0],["Casino_Front-A2",0,2048],["Casino_Front-B2",2048,2048],["Casino_Front-A3",0,4096],["Casino_Front-B3",2048,4096],["Casino_Front-A4",0,6144],["Casino_Front-B4",2048,6144],["Casino_Front-A5",0,8192],["Casino_Front-B5",2048,8192],["Casino_Front-A6",0,10240],["Casino_Front-B6",2048,10240]],"2x":[["Casino_Front-A1",0,0],["Casino_Front-B1",1024,0],["Casino_Front-C1",2048,0],["Casino_Front-D1",3072,0],["Casino_Front-A2",0,1024],["Casino_Front-B2",1024,1024],["Casino_Front-C2",2048,1024],["Casino_Front-D2",3072,1024],["Casino_Front-A3",0,2048],["Casino_Front-B3",1024,2048],["Casino_Front-C3",2048,2048],["Casino_Front-D3",3072,2048],["Casino_Front-A4",0,3072],["Casino_Front-B4",1024,3072],["Casino_Front-C4",2048,3072],["Casino_Front-D4",3072,3072],["Casino_Front-A5",0,4096],["Casino_Front-B5",1024,4096],["Casino_Front-C5",2048,4096],["Casino_Front-D5",3072,4096],["Casino_Front-A6",0,5120],["Casino_Front-B6",1024,5120],["Casino_Front-C6",2048,5120],["Casino_Front-D6",3072,5120],["Casino_Front-A7",0,6144],["Casino_Front-B7",1024,6144],["Casino_Front-C7",2048,6144],["Casino_Front-D7",3072,6144],["Casino_Front-A8",0,7168],["Casino_Front-B8",1024,7168],["Casino_Front-C8",2048,7168],["Casino_Front-D8",3072,7168],["Casino_Front-A9",0,8192],["Casino_Front-B9",1024,8192],["Casino_Front-C9",2048,8192],["Casino_Front-D9",3072,8192],["Casino_Front-A10",0,9216],["Casino_Front-B10",1024,9216],["Casino_Front-C10",2048,9216],["Casino_Front-D10",3072,9216],["Casino_Front-A11",0,10240],["Casino_Front-B11",1024,10240],["Casino_Front-C11",2048,10240],["Casino_Front-D11",3072,10240],["Casino_Front-A12",0,11264],["Casino_Front-B12",1024,11264],["Casino_Front-C12",2048,11264],["Casino_Front-D12",3072,11264]],"4x":[["Casino_Front-A1",0,0],["Casino_Front-B1",1024,0],["Casino_Front-C1",2048,0],["Casino_Front-D1",3072,0],["Casino_Front-A2",0,1024],["Casino_Front-B2",1024,1024],["Casino_Front-C2",2048,1024],["Casino_Front-D2",3072,1024],["Casino_Front-A3",0,2048],["Casino_Front-B3",1024,2048],["Casino_Front-C3",2048,2048],["Casino_Front-D3",3072,2048],["Casino_Front-A4",0,3072],["Casino_Front-B4",1024,3072],["Casino_Front-C4",2048,3072],["Casino_Front-D4",3072,3072],["Casino_Front-A5",0,4096],["Casino_Front-B5",1024,4096],["Casino_Front-C5",2048,4096],["Casino_Front-D5",3072,4096],["Casino_Front-A6",0,5120],["Casino_Front-B6",1024,5120],["Casino_Front-C6",2048,5120],["Casino_Front-D6",3072,5120],["Casino_Front-A7",0,6144],["Casino_Front-B7",1024,6144],["Casino_Front-C7",2048,6144],["Casino_Front-D7",3072,6144],["Casino_Front-A8",0,7168],["Casino_Front-B8",1024,7168],["Casino_Front-C8",2048,7168],["Casino_Front-D8",3072,7168],["Casino_Front-A9",0,8192],["Casino_Front-B9",1024,8192],["Casino_Front-C9",2048,8192],["Casino_Front-D9",3072,8192],["Casino_Front-A10",0,9216],["Casino_Front-B10",1024,9216],["Casino_Front-C10",2048,9216],["Casino_Front-D10",3072,9216],["Casino_Front-A11",0,10240],["Casino_Front-B11",1024,10240],["Casino_Front-C11",2048,10240],["Casino_Front-D11",3072,10240],["Casino_Front-A12",0,11264],["Casino_Front-B12",1024,11264],["Casino_Front-C12",2048,11264],["Casino_Front-D12",3072,11264]]},Core_A1:{hx:[["Core_A1-A1",0,0],["Core_A1-A2",0,4096]],"1x":[["Core_A1-A1",0,0],["Core_A1-B1",2048,0],["Core_A1-A2",0,2048],["Core_A1-B2",2048,2048],["Core_A1-A3",0,4096],["Core_A1-B3",2048,4096],["Core_A1-A4",0,6144],["Core_A1-B4",2048,6144]],"2x":[["Core_A1-A1",0,0],["Core_A1-B1",1024,0],["Core_A1-C1",2048,0],["Core_A1-D1",3072,0],["Core_A1-A2",0,1024],["Core_A1-B2",1024,1024],["Core_A1-C2",2048,1024],["Core_A1-D2",3072,1024],["Core_A1-A3",0,2048],["Core_A1-B3",1024,2048],["Core_A1-C3",2048,2048],["Core_A1-D3",3072,2048],["Core_A1-A4",0,3072],["Core_A1-B4",1024,3072],["Core_A1-C4",2048,3072],["Core_A1-D4",3072,3072],["Core_A1-A5",0,4096],["Core_A1-B5",1024,4096],["Core_A1-C5",2048,4096],["Core_A1-D5",3072,4096],["Core_A1-A6",0,5120],["Core_A1-B6",1024,5120],["Core_A1-C6",2048,5120],["Core_A1-D6",3072,5120],["Core_A1-A7",0,6144],["Core_A1-B7",1024,6144],["Core_A1-C7",2048,6144],["Core_A1-D7",3072,6144],["Core_A1-A8",0,7168],["Core_A1-B8",1024,7168],["Core_A1-C8",2048,7168],["Core_A1-D8",3072,7168]],"4x":[["Core_A1-A1",0,0],["Core_A1-B1",1024,0],["Core_A1-C1",2048,0],["Core_A1-D1",3072,0],["Core_A1-A2",0,1024],["Core_A1-B2",1024,1024],["Core_A1-C2",2048,1024],["Core_A1-D2",3072,1024],["Core_A1-A3",0,2048],["Core_A1-B3",1024,2048],["Core_A1-C3",2048,2048],["Core_A1-D3",3072,2048],["Core_A1-A4",0,3072],["Core_A1-B4",1024,3072],["Core_A1-C4",2048,3072],["Core_A1-D4",3072,3072],["Core_A1-A5",0,4096],["Core_A1-B5",1024,4096],["Core_A1-C5",2048,4096],["Core_A1-D5",3072,4096],["Core_A1-A6",0,5120],["Core_A1-B6",1024,5120],["Core_A1-C6",2048,5120],["Core_A1-D6",3072,5120],["Core_A1-A7",0,6144],["Core_A1-B7",1024,6144],["Core_A1-C7",2048,6144],["Core_A1-D7",3072,6144],["Core_A1-A8",0,7168],["Core_A1-B8",1024,7168],["Core_A1-C8",2048,7168],["Core_A1-D8",3072,7168]]},Core_B1:{hx:[["Core_B1-A1",0,0],["Core_B1-A2",0,4096]],"1x":[["Core_B1-A1",0,0],["Core_B1-B1",2048,0],["Core_B1-A2",0,2048],["Core_B1-B2",2048,2048],["Core_B1-A3",0,4096],["Core_B1-B3",2048,4096]],"2x":[["Core_B1-A1",0,0],["Core_B1-B1",1024,0],["Core_B1-C1",2048,0],["Core_B1-D1",3072,0],["Core_B1-A2",0,1024],["Core_B1-B2",1024,1024],["Core_B1-C2",2048,1024],["Core_B1-D2",3072,1024],["Core_B1-A3",0,2048],["Core_B1-B3",1024,2048],["Core_B1-C3",2048,2048],["Core_B1-D3",3072,2048],["Core_B1-A4",0,3072],["Core_B1-B4",1024,3072],["Core_B1-C4",2048,3072],["Core_B1-D4",3072,3072],["Core_B1-A5",0,4096],["Core_B1-B5",1024,4096],["Core_B1-C5",2048,4096],["Core_B1-D5",3072,4096],["Core_B1-A6",0,5120],["Core_B1-B6",1024,5120],["Core_B1-C6",2048,5120],["Core_B1-D6",3072,5120]],"4x":[["Core_B1-A1",0,0],["Core_B1-B1",1024,0],["Core_B1-C1",2048,0],["Core_B1-D1",3072,0],["Core_B1-A2",0,1024],["Core_B1-B2",1024,1024],["Core_B1-C2",2048,1024],["Core_B1-D2",3072,1024],["Core_B1-A3",0,2048],["Core_B1-B3",1024,2048],["Core_B1-C3",2048,2048],["Core_B1-D3",3072,2048],["Core_B1-A4",0,3072],["Core_B1-B4",1024,3072],["Core_B1-C4",2048,3072],["Core_B1-D4",3072,3072],["Core_B1-A5",0,4096],["Core_B1-B5",1024,4096],["Core_B1-C5",2048,4096],["Core_B1-D5",3072,4096],["Core_B1-A6",0,5120],["Core_B1-B6",1024,5120],["Core_B1-C6",2048,5120],["Core_B1-D6",3072,5120]]},Core_B2:{hx:[["Core_B2-A1",0,0]],"1x":[["Core_B2-A1",0,0],["Core_B2-B1",2048,0],["Core_B2-A2",0,2048],["Core_B2-B2",2048,2048]],"2x":[["Core_B2-A1",0,0],["Core_B2-B1",1024,0],["Core_B2-C1",2048,0],["Core_B2-D1",3072,0],["Core_B2-A2",0,1024],["Core_B2-B2",1024,1024],["Core_B2-C2",2048,1024],["Core_B2-D2",3072,1024],["Core_B2-A3",0,2048],["Core_B2-B3",1024,2048],["Core_B2-C3",2048,2048],["Core_B2-D3",3072,2048],["Core_B2-A4",0,3072],["Core_B2-B4",1024,3072],["Core_B2-C4",2048,3072],["Core_B2-D4",3072,3072]],"4x":[["Core_B2-A1",0,0],["Core_B2-B1",1024,0],["Core_B2-C1",2048,0],["Core_B2-D1",3072,0],["Core_B2-A2",0,1024],["Core_B2-B2",1024,1024],["Core_B2-C2",2048,1024],["Core_B2-D2",3072,1024],["Core_B2-A3",0,2048],["Core_B2-B3",1024,2048],["Core_B2-C3",2048,2048],["Core_B2-D3",3072,2048],["Core_B2-A4",0,3072],["Core_B2-B4",1024,3072],["Core_B2-C4",2048,3072],["Core_B2-D4",3072,3072]]},Core_C1:{hx:[["Core_C1-A1",0,0]],"1x":[["Core_C1-A1",0,0],["Core_C1-B1",2048,0]],"2x":[["Core_C1-B1",1024,0],["Core_C1-C1",2048,0],["Core_C1-B2",1024,1024],["Core_C1-C2",2048,1024]],"4x":[["Core_C1-B1",1024,0],["Core_C1-C1",2048,0],["Core_C1-B2",1024,1024],["Core_C1-C2",2048,1024]]},Core_Front:{hx:[["Core_Front-A1",0,0],["Core_Front-A2",0,4096],["Core_Front-A3",0,8192],["Core_Front-A4",0,12288],["Core_Front-A5",0,16384]],"1x":[["Core_Front-A1",0,0],["Core_Front-B1",2048,0],["Core_Front-A2",0,2048],["Core_Front-B2",2048,2048],["Core_Front-A3",0,4096],["Core_Front-B3",2048,4096],["Core_Front-A4",0,6144],["Core_Front-B4",2048,6144],["Core_Front-A5",0,8192],["Core_Front-B5",2048,8192],["Core_Front-A6",0,10240],["Core_Front-B6",2048,10240],["Core_Front-A7",0,12288],["Core_Front-B7",2048,12288],["Core_Front-A8",0,14336],["Core_Front-B8",2048,14336],["Core_Front-A9",0,16384],["Core_Front-B9",2048,16384],["Core_Front-A10",0,18432],["Core_Front-B10",2048,18432]],"2x":[["Core_Front-A1",0,0],["Core_Front-B1",1024,0],["Core_Front-C1",2048,0],["Core_Front-D1",3072,0],["Core_Front-A2",0,1024],["Core_Front-B2",1024,1024],["Core_Front-C2",2048,1024],["Core_Front-D2",3072,1024],["Core_Front-A3",0,2048],["Core_Front-B3",1024,2048],["Core_Front-C3",2048,2048],["Core_Front-D3",3072,2048],["Core_Front-A4",0,3072],["Core_Front-B4",1024,3072],["Core_Front-C4",2048,3072],["Core_Front-D4",3072,3072],["Core_Front-A5",0,4096],["Core_Front-B5",1024,4096],["Core_Front-C5",2048,4096],["Core_Front-D5",3072,4096],["Core_Front-A6",0,5120],["Core_Front-B6",1024,5120],["Core_Front-C6",2048,5120],["Core_Front-D6",3072,5120],["Core_Front-A7",0,6144],["Core_Front-B7",1024,6144],["Core_Front-C7",2048,6144],["Core_Front-D7",3072,6144],["Core_Front-A8",0,7168],["Core_Front-C8",2048,7168],["Core_Front-D8",3072,7168],["Core_Front-A9",0,8192],["Core_Front-B9",1024,8192],["Core_Front-C9",2048,8192],["Core_Front-D9",3072,8192],["Core_Front-A10",0,9216],["Core_Front-B10",1024,9216],["Core_Front-C10",2048,9216],["Core_Front-D10",3072,9216],["Core_Front-A11",0,10240],["Core_Front-B11",1024,10240],["Core_Front-C11",2048,10240],["Core_Front-D11",3072,10240],["Core_Front-A12",0,11264],["Core_Front-B12",1024,11264],["Core_Front-C12",2048,11264],["Core_Front-D12",3072,11264],["Core_Front-A13",0,12288],["Core_Front-D13",3072,12288],["Core_Front-A14",0,13312],["Core_Front-B14",1024,13312],["Core_Front-C14",2048,13312],["Core_Front-D14",3072,13312],["Core_Front-A15",0,14336],["Core_Front-B15",1024,14336],["Core_Front-C15",2048,14336],["Core_Front-D15",3072,14336],["Core_Front-A16",0,15360],["Core_Front-B16",1024,15360],["Core_Front-C16",2048,15360],["Core_Front-D16",3072,15360],["Core_Front-A17",0,16384],["Core_Front-B17",1024,16384],["Core_Front-C17",2048,16384],["Core_Front-D17",3072,16384],["Core_Front-A18",0,17408],["Core_Front-B18",1024,17408],["Core_Front-C18",2048,17408],["Core_Front-D18",3072,17408],["Core_Front-A19",0,18432],["Core_Front-B19",1024,18432],["Core_Front-C19",2048,18432],["Core_Front-D19",3072,18432],["Core_Front-A20",0,19456],["Core_Front-B20",1024,19456],["Core_Front-C20",2048,19456],["Core_Front-D20",3072,19456]],"4x":[["Core_Front-A1",0,0],["Core_Front-B1",1024,0],["Core_Front-C1",2048,0],["Core_Front-D1",3072,0],["Core_Front-A2",0,1024],["Core_Front-B2",1024,1024],["Core_Front-C2",2048,1024],["Core_Front-D2",3072,1024],["Core_Front-A3",0,2048],["Core_Front-B3",1024,2048],["Core_Front-C3",2048,2048],["Core_Front-D3",3072,2048],["Core_Front-A4",0,3072],["Core_Front-B4",1024,3072],["Core_Front-C4",2048,3072],["Core_Front-D4",3072,3072],["Core_Front-A5",0,4096],["Core_Front-B5",1024,4096],["Core_Front-C5",2048,4096],["Core_Front-D5",3072,4096],["Core_Front-A6",0,5120],["Core_Front-B6",1024,5120],["Core_Front-C6",2048,5120],["Core_Front-D6",3072,5120],["Core_Front-A7",0,6144],["Core_Front-B7",1024,6144],["Core_Front-C7",2048,6144],["Core_Front-D7",3072,6144],["Core_Front-A8",0,7168],["Core_Front-C8",2048,7168],["Core_Front-D8",3072,7168],["Core_Front-A9",0,8192],["Core_Front-B9",1024,8192],["Core_Front-C9",2048,8192],["Core_Front-D9",3072,8192],["Core_Front-A10",0,9216],["Core_Front-B10",1024,9216],["Core_Front-C10",2048,9216],["Core_Front-D10",3072,9216],["Core_Front-A11",0,10240],["Core_Front-B11",1024,10240],["Core_Front-C11",2048,10240],["Core_Front-D11",3072,10240],["Core_Front-A12",0,11264],["Core_Front-B12",1024,11264],["Core_Front-C12",2048,11264],["Core_Front-D12",3072,11264],["Core_Front-A13",0,12288],["Core_Front-D13",3072,12288],["Core_Front-A14",0,13312],["Core_Front-B14",1024,13312],["Core_Front-C14",2048,13312],["Core_Front-D14",3072,13312],["Core_Front-A15",0,14336],["Core_Front-B15",1024,14336],["Core_Front-C15",2048,14336],["Core_Front-D15",3072,14336],["Core_Front-A16",0,15360],["Core_Front-B16",1024,15360],["Core_Front-C16",2048,15360],["Core_Front-D16",3072,15360],["Core_Front-A17",0,16384],["Core_Front-B17",1024,16384],["Core_Front-C17",2048,16384],["Core_Front-D17",3072,16384],["Core_Front-A18",0,17408],["Core_Front-B18",1024,17408],["Core_Front-C18",2048,17408],["Core_Front-D18",3072,17408],["Core_Front-A19",0,18432],["Core_Front-B19",1024,18432],["Core_Front-C19",2048,18432],["Core_Front-D19",3072,18432],["Core_Front-A20",0,19456],["Core_Front-B20",1024,19456],["Core_Front-C20",2048,19456],["Core_Front-D20",3072,19456]]},Corruption_A1:{hx:[["Corruption_A1-A1",0,0],["Corruption_A1-A2",0,4096]],"1x":[["Corruption_A1-A1",0,0],["Corruption_A1-B1",2048,0],["Corruption_A1-A2",0,2048],["Corruption_A1-B2",2048,2048],["Corruption_A1-A3",0,4096],["Corruption_A1-B3",2048,4096]],"2x":[["Corruption_A1-A1",0,0],["Corruption_A1-B1",1024,0],["Corruption_A1-C1",2048,0],["Corruption_A1-D1",3072,0],["Corruption_A1-A2",0,1024],["Corruption_A1-B2",1024,1024],["Corruption_A1-C2",2048,1024],["Corruption_A1-D2",3072,1024],["Corruption_A1-A3",0,2048],["Corruption_A1-B3",1024,2048],["Corruption_A1-C3",2048,2048],["Corruption_A1-D3",3072,2048],["Corruption_A1-A4",0,3072],["Corruption_A1-B4",1024,3072],["Corruption_A1-C4",2048,3072],["Corruption_A1-D4",3072,3072],["Corruption_A1-A5",0,4096],["Corruption_A1-B5",1024,4096],["Corruption_A1-C5",2048,4096],["Corruption_A1-D5",3072,4096],["Corruption_A1-A6",0,5120],["Corruption_A1-B6",1024,5120],["Corruption_A1-C6",2048,5120],["Corruption_A1-D6",3072,5120]],"4x":[["Corruption_A1-A1",0,0],["Corruption_A1-B1",1024,0],["Corruption_A1-C1",2048,0],["Corruption_A1-D1",3072,0],["Corruption_A1-A2",0,1024],["Corruption_A1-B2",1024,1024],["Corruption_A1-C2",2048,1024],["Corruption_A1-D2",3072,1024],["Corruption_A1-A3",0,2048],["Corruption_A1-B3",1024,2048],["Corruption_A1-C3",2048,2048],["Corruption_A1-D3",3072,2048],["Corruption_A1-A4",0,3072],["Corruption_A1-B4",1024,3072],["Corruption_A1-C4",2048,3072],["Corruption_A1-D4",3072,3072],["Corruption_A1-A5",0,4096],["Corruption_A1-B5",1024,4096],["Corruption_A1-C5",2048,4096],["Corruption_A1-D5",3072,4096],["Corruption_A1-A6",0,5120],["Corruption_A1-B6",1024,5120],["Corruption_A1-C6",2048,5120],["Corruption_A1-D6",3072,5120]]},Corruption_B1:{hx:[["Corruption_B1-A1",0,0],["Corruption_B1-A2",0,4096]],"1x":[["Corruption_B1-A1",0,0],["Corruption_B1-B1",2048,0],["Corruption_B1-A2",0,2048],["Corruption_B1-B2",2048,2048],["Corruption_B1-A3",0,4096],["Corruption_B1-B3",2048,4096]],"2x":[["Corruption_B1-A1",0,0],["Corruption_B1-B1",1024,0],["Corruption_B1-C1",2048,0],["Corruption_B1-D1",3072,0],["Corruption_B1-A2",0,1024],["Corruption_B1-B2",1024,1024],["Corruption_B1-C2",2048,1024],["Corruption_B1-D2",3072,1024],["Corruption_B1-A3",0,2048],["Corruption_B1-B3",1024,2048],["Corruption_B1-C3",2048,2048],["Corruption_B1-D3",3072,2048],["Corruption_B1-A4",0,3072],["Corruption_B1-B4",1024,3072],["Corruption_B1-C4",2048,3072],["Corruption_B1-D4",3072,3072],["Corruption_B1-A5",0,4096],["Corruption_B1-B5",1024,4096],["Corruption_B1-C5",2048,4096],["Corruption_B1-D5",3072,4096]],"4x":[["Corruption_B1-A1",0,0],["Corruption_B1-B1",1024,0],["Corruption_B1-C1",2048,0],["Corruption_B1-D1",3072,0],["Corruption_B1-A2",0,1024],["Corruption_B1-B2",1024,1024],["Corruption_B1-C2",2048,1024],["Corruption_B1-D2",3072,1024],["Corruption_B1-A3",0,2048],["Corruption_B1-B3",1024,2048],["Corruption_B1-C3",2048,2048],["Corruption_B1-D3",3072,2048],["Corruption_B1-A4",0,3072],["Corruption_B1-B4",1024,3072],["Corruption_B1-C4",2048,3072],["Corruption_B1-D4",3072,3072],["Corruption_B1-A5",0,4096],["Corruption_B1-B5",1024,4096],["Corruption_B1-C5",2048,4096],["Corruption_B1-D5",3072,4096]]},Corruption_B2:{hx:[["Corruption_B2-A1",0,0],["Corruption_B2-A2",0,4096]],"1x":[["Corruption_B2-A1",0,0],["Corruption_B2-B1",2048,0],["Corruption_B2-A2",0,2048],["Corruption_B2-B2",2048,2048],["Corruption_B2-A3",0,4096],["Corruption_B2-B3",2048,4096]],"2x":[["Corruption_B2-A1",0,0],["Corruption_B2-B1",1024,0],["Corruption_B2-C1",2048,0],["Corruption_B2-D1",3072,0],["Corruption_B2-A2",0,1024],["Corruption_B2-B2",1024,1024],["Corruption_B2-C2",2048,1024],["Corruption_B2-D2",3072,1024],["Corruption_B2-A3",0,2048],["Corruption_B2-B3",1024,2048],["Corruption_B2-C3",2048,2048],["Corruption_B2-D3",3072,2048],["Corruption_B2-A4",0,3072],["Corruption_B2-B4",1024,3072],["Corruption_B2-C4",2048,3072],["Corruption_B2-D4",3072,3072],["Corruption_B2-A5",0,4096],["Corruption_B2-B5",1024,4096],["Corruption_B2-C5",2048,4096],["Corruption_B2-D5",3072,4096]],"4x":[["Corruption_B2-A1",0,0],["Corruption_B2-B1",1024,0],["Corruption_B2-C1",2048,0],["Corruption_B2-D1",3072,0],["Corruption_B2-A2",0,1024],["Corruption_B2-B2",1024,1024],["Corruption_B2-C2",2048,1024],["Corruption_B2-D2",3072,1024],["Corruption_B2-A3",0,2048],["Corruption_B2-B3",1024,2048],["Corruption_B2-C3",2048,2048],["Corruption_B2-D3",3072,2048],["Corruption_B2-A4",0,3072],["Corruption_B2-B4",1024,3072],["Corruption_B2-C4",2048,3072],["Corruption_B2-D4",3072,3072],["Corruption_B2-A5",0,4096],["Corruption_B2-B5",1024,4096],["Corruption_B2-C5",2048,4096],["Corruption_B2-D5",3072,4096]]},Corruption_C1:{hx:[["Corruption_C1-A1",0,0],["Corruption_C1-A2",0,4096]],"1x":[["Corruption_C1-A1",0,0],["Corruption_C1-B1",2048,0],["Corruption_C1-A2",0,2048],["Corruption_C1-B2",2048,2048],["Corruption_C1-A3",0,4096],["Corruption_C1-B3",2048,4096]],"2x":[["Corruption_C1-A1",0,0],["Corruption_C1-B1",1024,0],["Corruption_C1-C1",2048,0],["Corruption_C1-D1",3072,0],["Corruption_C1-A2",0,1024],["Corruption_C1-B2",1024,1024],["Corruption_C1-C2",2048,1024],["Corruption_C1-D2",3072,1024],["Corruption_C1-A3",0,2048],["Corruption_C1-B3",1024,2048],["Corruption_C1-C3",2048,2048],["Corruption_C1-D3",3072,2048],["Corruption_C1-A4",0,3072],["Corruption_C1-B4",1024,3072],["Corruption_C1-C4",2048,3072],["Corruption_C1-D4",3072,3072],["Corruption_C1-A5",0,4096],["Corruption_C1-B5",1024,4096],["Corruption_C1-C5",2048,4096],["Corruption_C1-D5",3072,4096],["Corruption_C1-A6",0,5120],["Corruption_C1-B6",1024,5120],["Corruption_C1-C6",2048,5120],["Corruption_C1-D6",3072,5120]],"4x":[["Corruption_C1-A1",0,0],["Corruption_C1-B1",1024,0],["Corruption_C1-C1",2048,0],["Corruption_C1-D1",3072,0],["Corruption_C1-A2",0,1024],["Corruption_C1-B2",1024,1024],["Corruption_C1-C2",2048,1024],["Corruption_C1-D2",3072,1024],["Corruption_C1-A3",0,2048],["Corruption_C1-B3",1024,2048],["Corruption_C1-C3",2048,2048],["Corruption_C1-D3",3072,2048],["Corruption_C1-A4",0,3072],["Corruption_C1-B4",1024,3072],["Corruption_C1-C4",2048,3072],["Corruption_C1-D4",3072,3072],["Corruption_C1-A5",0,4096],["Corruption_C1-B5",1024,4096],["Corruption_C1-C5",2048,4096],["Corruption_C1-D5",3072,4096],["Corruption_C1-A6",0,5120],["Corruption_C1-B6",1024,5120],["Corruption_C1-C6",2048,5120],["Corruption_C1-D6",3072,5120]]},Corruption_C2:{hx:[["Corruption_C2-A1",0,0],["Corruption_C2-A2",0,4096]],"1x":[["Corruption_C2-A1",0,0],["Corruption_C2-B1",2048,0],["Corruption_C2-A2",0,2048],["Corruption_C2-B2",2048,2048],["Corruption_C2-A3",0,4096]],"2x":[["Corruption_C2-A1",0,0],["Corruption_C2-B1",1024,0],["Corruption_C2-C1",2048,0],["Corruption_C2-D1",3072,0],["Corruption_C2-A2",0,1024],["Corruption_C2-B2",1024,1024],["Corruption_C2-C2",2048,1024],["Corruption_C2-D2",3072,1024],["Corruption_C2-A3",0,2048],["Corruption_C2-D3",3072,2048],["Corruption_C2-A4",0,3072],["Corruption_C2-A5",0,4096]],"4x":[["Corruption_C2-A1",0,0],["Corruption_C2-B1",1024,0],["Corruption_C2-C1",2048,0],["Corruption_C2-D1",3072,0],["Corruption_C2-A2",0,1024],["Corruption_C2-B2",1024,1024],["Corruption_C2-C2",2048,1024],["Corruption_C2-D2",3072,1024],["Corruption_C2-A3",0,2048],["Corruption_C2-D3",3072,2048],["Corruption_C2-A4",0,3072],["Corruption_C2-A5",0,4096]]},Corruption_D1:{hx:[["Corruption_D1-A1",0,0],["Corruption_D1-A2",0,4096]],"1x":[["Corruption_D1-A1",0,0],["Corruption_D1-B1",2048,0],["Corruption_D1-A2",0,2048],["Corruption_D1-B2",2048,2048],["Corruption_D1-A3",0,4096],["Corruption_D1-B3",2048,4096]],"2x":[["Corruption_D1-A1",0,0],["Corruption_D1-B1",1024,0],["Corruption_D1-C1",2048,0],["Corruption_D1-D1",3072,0],["Corruption_D1-A2",0,1024],["Corruption_D1-B2",1024,1024],["Corruption_D1-C2",2048,1024],["Corruption_D1-D2",3072,1024],["Corruption_D1-A3",0,2048],["Corruption_D1-B3",1024,2048],["Corruption_D1-C3",2048,2048],["Corruption_D1-D3",3072,2048],["Corruption_D1-A4",0,3072],["Corruption_D1-B4",1024,3072],["Corruption_D1-C4",2048,3072],["Corruption_D1-D4",3072,3072],["Corruption_D1-A5",0,4096],["Corruption_D1-B5",1024,4096],["Corruption_D1-C5",2048,4096],["Corruption_D1-D5",3072,4096],["Corruption_D1-A6",0,5120],["Corruption_D1-B6",1024,5120],["Corruption_D1-C6",2048,5120],["Corruption_D1-D6",3072,5120]],"4x":[["Corruption_D1-A1",0,0],["Corruption_D1-B1",1024,0],["Corruption_D1-C1",2048,0],["Corruption_D1-D1",3072,0],["Corruption_D1-A2",0,1024],["Corruption_D1-B2",1024,1024],["Corruption_D1-C2",2048,1024],["Corruption_D1-D2",3072,1024],["Corruption_D1-A3",0,2048],["Corruption_D1-B3",1024,2048],["Corruption_D1-C3",2048,2048],["Corruption_D1-D3",3072,2048],["Corruption_D1-A4",0,3072],["Corruption_D1-B4",1024,3072],["Corruption_D1-C4",2048,3072],["Corruption_D1-D4",3072,3072],["Corruption_D1-A5",0,4096],["Corruption_D1-B5",1024,4096],["Corruption_D1-C5",2048,4096],["Corruption_D1-D5",3072,4096],["Corruption_D1-A6",0,5120],["Corruption_D1-B6",1024,5120],["Corruption_D1-C6",2048,5120],["Corruption_D1-D6",3072,5120]]},Corruption_D2:{hx:[["Corruption_D2-A1",0,0],["Corruption_D2-A2",0,4096]],"1x":[["Corruption_D2-A1",0,0],["Corruption_D2-B1",2048,0],["Corruption_D2-A2",0,2048],["Corruption_D2-B2",2048,2048],["Corruption_D2-A3",0,4096],["Corruption_D2-B3",2048,4096]],"2x":[["Corruption_D2-A1",0,0],["Corruption_D2-B1",1024,0],["Corruption_D2-C1",2048,0],["Corruption_D2-D1",3072,0],["Corruption_D2-A2",0,1024],["Corruption_D2-B2",1024,1024],["Corruption_D2-C2",2048,1024],["Corruption_D2-D2",3072,1024],["Corruption_D2-A3",0,2048],["Corruption_D2-B3",1024,2048],["Corruption_D2-C3",2048,2048],["Corruption_D2-D3",3072,2048],["Corruption_D2-A4",0,3072],["Corruption_D2-B4",1024,3072],["Corruption_D2-C4",2048,3072],["Corruption_D2-D4",3072,3072],["Corruption_D2-A5",0,4096],["Corruption_D2-B5",1024,4096],["Corruption_D2-C5",2048,4096],["Corruption_D2-D5",3072,4096]],"4x":[["Corruption_D2-A1",0,0],["Corruption_D2-B1",1024,0],["Corruption_D2-C1",2048,0],["Corruption_D2-D1",3072,0],["Corruption_D2-A2",0,1024],["Corruption_D2-B2",1024,1024],["Corruption_D2-C2",2048,1024],["Corruption_D2-D2",3072,1024],["Corruption_D2-A3",0,2048],["Corruption_D2-B3",1024,2048],["Corruption_D2-C3",2048,2048],["Corruption_D2-D3",3072,2048],["Corruption_D2-A4",0,3072],["Corruption_D2-B4",1024,3072],["Corruption_D2-C4",2048,3072],["Corruption_D2-D4",3072,3072],["Corruption_D2-A5",0,4096],["Corruption_D2-B5",1024,4096],["Corruption_D2-C5",2048,4096],["Corruption_D2-D5",3072,4096]]},Corruption_Front:{hx:[["Corruption_Front-A1",0,0],["Corruption_Front-A2",0,4096],["Corruption_Front-A3",0,8192],["Corruption_Front-A4",0,12288],["Corruption_Front-A5",0,16384],["Corruption_Front-A6",0,20480]],"1x":[["Corruption_Front-A1",0,0],["Corruption_Front-B1",2048,0],["Corruption_Front-A2",0,2048],["Corruption_Front-B2",2048,2048],["Corruption_Front-A3",0,4096],["Corruption_Front-B3",2048,4096],["Corruption_Front-A4",0,6144],["Corruption_Front-B4",2048,6144],["Corruption_Front-A5",0,8192],["Corruption_Front-B5",2048,8192],["Corruption_Front-A6",0,10240],["Corruption_Front-B6",2048,10240],["Corruption_Front-A7",0,12288],["Corruption_Front-B7",2048,12288],["Corruption_Front-A8",0,14336],["Corruption_Front-B8",2048,14336],["Corruption_Front-A9",0,16384],["Corruption_Front-B9",2048,16384],["Corruption_Front-A10",0,18432],["Corruption_Front-B10",2048,18432],["Corruption_Front-A11",0,20480],["Corruption_Front-B11",2048,20480]],"2x":[["Corruption_Front-A1",0,0],["Corruption_Front-B1",1024,0],["Corruption_Front-C1",2048,0],["Corruption_Front-D1",3072,0],["Corruption_Front-A2",0,1024],["Corruption_Front-B2",1024,1024],["Corruption_Front-C2",2048,1024],["Corruption_Front-D2",3072,1024],["Corruption_Front-A3",0,2048],["Corruption_Front-B3",1024,2048],["Corruption_Front-C3",2048,2048],["Corruption_Front-D3",3072,2048],["Corruption_Front-A4",0,3072],["Corruption_Front-B4",1024,3072],["Corruption_Front-C4",2048,3072],["Corruption_Front-D4",3072,3072],["Corruption_Front-A5",0,4096],["Corruption_Front-B5",1024,4096],["Corruption_Front-C5",2048,4096],["Corruption_Front-D5",3072,4096],["Corruption_Front-A6",0,5120],["Corruption_Front-B6",1024,5120],["Corruption_Front-C6",2048,5120],["Corruption_Front-D6",3072,5120],["Corruption_Front-A7",0,6144],["Corruption_Front-B7",1024,6144],["Corruption_Front-C7",2048,6144],["Corruption_Front-D7",3072,6144],["Corruption_Front-A8",0,7168],["Corruption_Front-B8",1024,7168],["Corruption_Front-C8",2048,7168],["Corruption_Front-D8",3072,7168],["Corruption_Front-A9",0,8192],["Corruption_Front-B9",1024,8192],["Corruption_Front-C9",2048,8192],["Corruption_Front-D9",3072,8192],["Corruption_Front-A10",0,9216],["Corruption_Front-B10",1024,9216],["Corruption_Front-C10",2048,9216],["Corruption_Front-D10",3072,9216],["Corruption_Front-A11",0,10240],["Corruption_Front-B11",1024,10240],["Corruption_Front-C11",2048,10240],["Corruption_Front-D11",3072,10240],["Corruption_Front-A12",0,11264],["Corruption_Front-B12",1024,11264],["Corruption_Front-C12",2048,11264],["Corruption_Front-D12",3072,11264],["Corruption_Front-A13",0,12288],["Corruption_Front-B13",1024,12288],["Corruption_Front-C13",2048,12288],["Corruption_Front-D13",3072,12288],["Corruption_Front-A14",0,13312],["Corruption_Front-C14",2048,13312],["Corruption_Front-D14",3072,13312],["Corruption_Front-A15",0,14336],["Corruption_Front-B15",1024,14336],["Corruption_Front-C15",2048,14336],["Corruption_Front-D15",3072,14336],["Corruption_Front-A16",0,15360],["Corruption_Front-B16",1024,15360],["Corruption_Front-C16",2048,15360],["Corruption_Front-D16",3072,15360],["Corruption_Front-A17",0,16384],["Corruption_Front-B17",1024,16384],["Corruption_Front-C17",2048,16384],["Corruption_Front-D17",3072,16384],["Corruption_Front-A18",0,17408],["Corruption_Front-B18",1024,17408],["Corruption_Front-C18",2048,17408],["Corruption_Front-D18",3072,17408],["Corruption_Front-A19",0,18432],["Corruption_Front-B19",1024,18432],["Corruption_Front-C19",2048,18432],["Corruption_Front-D19",3072,18432],["Corruption_Front-A20",0,19456],["Corruption_Front-B20",1024,19456],["Corruption_Front-C20",2048,19456],["Corruption_Front-D20",3072,19456],["Corruption_Front-A21",0,20480],["Corruption_Front-D21",3072,20480],["Corruption_Front-D22",3072,21504]],"4x":[["Corruption_Front-A1",0,0],["Corruption_Front-B1",1024,0],["Corruption_Front-C1",2048,0],["Corruption_Front-D1",3072,0],["Corruption_Front-A2",0,1024],["Corruption_Front-B2",1024,1024],["Corruption_Front-C2",2048,1024],["Corruption_Front-D2",3072,1024],["Corruption_Front-A3",0,2048],["Corruption_Front-B3",1024,2048],["Corruption_Front-C3",2048,2048],["Corruption_Front-D3",3072,2048],["Corruption_Front-A4",0,3072],["Corruption_Front-B4",1024,3072],["Corruption_Front-C4",2048,3072],["Corruption_Front-D4",3072,3072],["Corruption_Front-A5",0,4096],["Corruption_Front-B5",1024,4096],["Corruption_Front-C5",2048,4096],["Corruption_Front-D5",3072,4096],["Corruption_Front-A6",0,5120],["Corruption_Front-B6",1024,5120],["Corruption_Front-C6",2048,5120],["Corruption_Front-D6",3072,5120],["Corruption_Front-A7",0,6144],["Corruption_Front-B7",1024,6144],["Corruption_Front-C7",2048,6144],["Corruption_Front-D7",3072,6144],["Corruption_Front-A8",0,7168],["Corruption_Front-B8",1024,7168],["Corruption_Front-C8",2048,7168],["Corruption_Front-D8",3072,7168],["Corruption_Front-A9",0,8192],["Corruption_Front-B9",1024,8192],["Corruption_Front-C9",2048,8192],["Corruption_Front-D9",3072,8192],["Corruption_Front-A10",0,9216],["Corruption_Front-B10",1024,9216],["Corruption_Front-C10",2048,9216],["Corruption_Front-D10",3072,9216],["Corruption_Front-A11",0,10240],["Corruption_Front-B11",1024,10240],["Corruption_Front-C11",2048,10240],["Corruption_Front-D11",3072,10240],["Corruption_Front-A12",0,11264],["Corruption_Front-B12",1024,11264],["Corruption_Front-C12",2048,11264],["Corruption_Front-D12",3072,11264],["Corruption_Front-A13",0,12288],["Corruption_Front-B13",1024,12288],["Corruption_Front-C13",2048,12288],["Corruption_Front-D13",3072,12288],["Corruption_Front-A14",0,13312],["Corruption_Front-C14",2048,13312],["Corruption_Front-D14",3072,13312],["Corruption_Front-A15",0,14336],["Corruption_Front-B15",1024,14336],["Corruption_Front-C15",2048,14336],["Corruption_Front-D15",3072,14336],["Corruption_Front-A16",0,15360],["Corruption_Front-B16",1024,15360],["Corruption_Front-C16",2048,15360],["Corruption_Front-D16",3072,15360],["Corruption_Front-A17",0,16384],["Corruption_Front-B17",1024,16384],["Corruption_Front-C17",2048,16384],["Corruption_Front-D17",3072,16384],["Corruption_Front-A18",0,17408],["Corruption_Front-B18",1024,17408],["Corruption_Front-C18",2048,17408],["Corruption_Front-D18",3072,17408],["Corruption_Front-A19",0,18432],["Corruption_Front-B19",1024,18432],["Corruption_Front-C19",2048,18432],["Corruption_Front-D19",3072,18432],["Corruption_Front-A20",0,19456],["Corruption_Front-B20",1024,19456],["Corruption_Front-C20",2048,19456],["Corruption_Front-D20",3072,19456],["Corruption_Front-A21",0,20480],["Corruption_Front-D21",3072,20480],["Corruption_Front-D22",3072,21504]]},Hall_1A:{hx:[["Hall_1A-A1",0,0]],"1x":[["Hall_1A-A1",0,0],["Hall_1A-B1",2048,0],["Hall_1A-A2",0,2048],["Hall_1A-B2",2048,2048]],"2x":[["Hall_1A-A1",0,0],["Hall_1A-B1",1024,0],["Hall_1A-C1",2048,0],["Hall_1A-D1",3072,0],["Hall_1A-A2",0,1024],["Hall_1A-B2",1024,1024],["Hall_1A-C2",2048,1024],["Hall_1A-D2",3072,1024],["Hall_1A-A3",0,2048],["Hall_1A-B3",1024,2048],["Hall_1A-C3",2048,2048],["Hall_1A-D3",3072,2048],["Hall_1A-A4",0,3072],["Hall_1A-B4",1024,3072],["Hall_1A-C4",2048,3072],["Hall_1A-D4",3072,3072]],"4x":[["Hall_1A-A1",0,0],["Hall_1A-B1",1024,0],["Hall_1A-C1",2048,0],["Hall_1A-D1",3072,0],["Hall_1A-A2",0,1024],["Hall_1A-B2",1024,1024],["Hall_1A-C2",2048,1024],["Hall_1A-D2",3072,1024],["Hall_1A-A3",0,2048],["Hall_1A-B3",1024,2048],["Hall_1A-C3",2048,2048],["Hall_1A-D3",3072,2048],["Hall_1A-A4",0,3072],["Hall_1A-B4",1024,3072],["Hall_1A-C4",2048,3072],["Hall_1A-D4",3072,3072]]},Hall_Front:{hx:[["Hall_Front-A1",0,0]],"1x":[["Hall_Front-A1",0,0],["Hall_Front-B1",2048,0],["Hall_Front-A2",0,2048],["Hall_Front-B2",2048,2048]],"2x":[["Hall_Front-A1",0,0],["Hall_Front-B1",1024,0],["Hall_Front-C1",2048,0],["Hall_Front-D1",3072,0],["Hall_Front-A2",0,1024],["Hall_Front-B2",1024,1024],["Hall_Front-C2",2048,1024],["Hall_Front-D2",3072,1024],["Hall_Front-A3",0,2048],["Hall_Front-B3",1024,2048],["Hall_Front-C3",2048,2048],["Hall_Front-D3",3072,2048],["Hall_Front-A4",0,3072],["Hall_Front-B4",1024,3072],["Hall_Front-C4",2048,3072],["Hall_Front-D4",3072,3072]],"4x":[["Hall_Front-A1",0,0],["Hall_Front-B1",1024,0],["Hall_Front-C1",2048,0],["Hall_Front-D1",3072,0],["Hall_Front-A2",0,1024],["Hall_Front-B2",1024,1024],["Hall_Front-C2",2048,1024],["Hall_Front-D2",3072,1024],["Hall_Front-A3",0,2048],["Hall_Front-B3",1024,2048],["Hall_Front-C3",2048,2048],["Hall_Front-D3",3072,2048],["Hall_Front-A4",0,3072],["Hall_Front-B4",1024,3072],["Hall_Front-C4",2048,3072],["Hall_Front-D4",3072,3072]]},Hotel_A1:{hx:[["Hotel_A1-A1",0,0],["Hotel_A1-A2",0,4096]],"1x":[["Hotel_A1-A1",0,0],["Hotel_A1-B1",2048,0],["Hotel_A1-A2",0,2048],["Hotel_A1-B2",2048,2048],["Hotel_A1-A3",0,4096],["Hotel_A1-B3",2048,4096]],"2x":[["Hotel_A1-A1",0,0],["Hotel_A1-B1",1024,0],["Hotel_A1-C1",2048,0],["Hotel_A1-D1",3072,0],["Hotel_A1-A2",0,1024],["Hotel_A1-B2",1024,1024],["Hotel_A1-C2",2048,1024],["Hotel_A1-D2",3072,1024],["Hotel_A1-A3",0,2048],["Hotel_A1-B3",1024,2048],["Hotel_A1-C3",2048,2048],["Hotel_A1-D3",3072,2048],["Hotel_A1-A4",0,3072],["Hotel_A1-B4",1024,3072],["Hotel_A1-C4",2048,3072],["Hotel_A1-D4",3072,3072],["Hotel_A1-A5",0,4096],["Hotel_A1-B5",1024,4096],["Hotel_A1-C5",2048,4096],["Hotel_A1-D5",3072,4096]],"4x":[["Hotel_A1-A1",0,0],["Hotel_A1-B1",1024,0],["Hotel_A1-C1",2048,0],["Hotel_A1-D1",3072,0],["Hotel_A1-A2",0,1024],["Hotel_A1-B2",1024,1024],["Hotel_A1-C2",2048,1024],["Hotel_A1-D2",3072,1024],["Hotel_A1-A3",0,2048],["Hotel_A1-B3",1024,2048],["Hotel_A1-C3",2048,2048],["Hotel_A1-D3",3072,2048],["Hotel_A1-A4",0,3072],["Hotel_A1-B4",1024,3072],["Hotel_A1-C4",2048,3072],["Hotel_A1-D4",3072,3072],["Hotel_A1-A5",0,4096],["Hotel_A1-B5",1024,4096],["Hotel_A1-C5",2048,4096],["Hotel_A1-D5",3072,4096]]},Hotel_B1:{hx:[["Hotel_B1-A1",0,0]],"1x":[["Hotel_B1-A1",0,0],["Hotel_B1-B1",2048,0],["Hotel_B1-A2",0,2048],["Hotel_B1-B2",2048,2048]],"2x":[["Hotel_B1-A1",0,0],["Hotel_B1-B1",1024,0],["Hotel_B1-C1",2048,0],["Hotel_B1-D1",3072,0],["Hotel_B1-A2",0,1024],["Hotel_B1-B2",1024,1024],["Hotel_B1-C2",2048,1024],["Hotel_B1-D2",3072,1024],["Hotel_B1-A3",0,2048],["Hotel_B1-B3",1024,2048],["Hotel_B1-C3",2048,2048],["Hotel_B1-D3",3072,2048],["Hotel_B1-A4",0,3072],["Hotel_B1-B4",1024,3072],["Hotel_B1-C4",2048,3072],["Hotel_B1-D4",3072,3072]],"4x":[["Hotel_B1-A1",0,0],["Hotel_B1-B1",1024,0],["Hotel_B1-C1",2048,0],["Hotel_B1-D1",3072,0],["Hotel_B1-A2",0,1024],["Hotel_B1-B2",1024,1024],["Hotel_B1-C2",2048,1024],["Hotel_B1-D2",3072,1024],["Hotel_B1-A3",0,2048],["Hotel_B1-B3",1024,2048],["Hotel_B1-C3",2048,2048],["Hotel_B1-D3",3072,2048],["Hotel_B1-A4",0,3072],["Hotel_B1-B4",1024,3072],["Hotel_B1-C4",2048,3072],["Hotel_B1-D4",3072,3072]]},Hotel_Back1:{hx:[["Hotel_Back1-A1",0,0]],"1x":[["Hotel_Back1-A1",0,0],["Hotel_Back1-B1",2048,0],["Hotel_Back1-A2",0,2048],["Hotel_Back1-B2",2048,2048]],"2x":[["Hotel_Back1-A1",0,0],["Hotel_Back1-B1",1024,0],["Hotel_Back1-C1",2048,0],["Hotel_Back1-D1",3072,0],["Hotel_Back1-A2",0,1024],["Hotel_Back1-B2",1024,1024],["Hotel_Back1-C2",2048,1024],["Hotel_Back1-D2",3072,1024],["Hotel_Back1-A3",0,2048],["Hotel_Back1-B3",1024,2048],["Hotel_Back1-C3",2048,2048],["Hotel_Back1-D3",3072,2048],["Hotel_Back1-A4",0,3072],["Hotel_Back1-B4",1024,3072],["Hotel_Back1-C4",2048,3072],["Hotel_Back1-D4",3072,3072]],"4x":[["Hotel_Back1-A1",0,0],["Hotel_Back1-B1",1024,0],["Hotel_Back1-C1",2048,0],["Hotel_Back1-D1",3072,0],["Hotel_Back1-A2",0,1024],["Hotel_Back1-B2",1024,1024],["Hotel_Back1-C2",2048,1024],["Hotel_Back1-D2",3072,1024],["Hotel_Back1-A3",0,2048],["Hotel_Back1-B3",1024,2048],["Hotel_Back1-C3",2048,2048],["Hotel_Back1-D3",3072,2048],["Hotel_Back1-A4",0,3072],["Hotel_Back1-B4",1024,3072],["Hotel_Back1-C4",2048,3072],["Hotel_Back1-D4",3072,3072]]},Hotel_Back2:{hx:[["Hotel_Back2-A1",0,0]],"1x":[["Hotel_Back2-A1",0,0],["Hotel_Back2-B1",2048,0],["Hotel_Back2-A2",0,2048],["Hotel_Back2-B2",2048,2048]],"2x":[["Hotel_Back2-A1",0,0],["Hotel_Back2-B1",1024,0],["Hotel_Back2-C1",2048,0],["Hotel_Back2-D1",3072,0],["Hotel_Back2-A2",0,1024],["Hotel_Back2-B2",1024,1024],["Hotel_Back2-C2",2048,1024],["Hotel_Back2-D2",3072,1024],["Hotel_Back2-A3",0,2048],["Hotel_Back2-B3",1024,2048],["Hotel_Back2-C3",2048,2048],["Hotel_Back2-D3",3072,2048]],"4x":[["Hotel_Back2-A1",0,0],["Hotel_Back2-B1",1024,0],["Hotel_Back2-C1",2048,0],["Hotel_Back2-D1",3072,0],["Hotel_Back2-A2",0,1024],["Hotel_Back2-B2",1024,1024],["Hotel_Back2-C2",2048,1024],["Hotel_Back2-D2",3072,1024],["Hotel_Back2-A3",0,2048],["Hotel_Back2-B3",1024,2048],["Hotel_Back2-C3",2048,2048],["Hotel_Back2-D3",3072,2048]]},Hotel_Front:{hx:[["Hotel_Front-A1",0,0],["Hotel_Front-A2",0,4096]],"1x":[["Hotel_Front-A1",0,0],["Hotel_Front-B1",2048,0],["Hotel_Front-A2",0,2048],["Hotel_Front-B2",2048,2048],["Hotel_Front-A3",0,4096],["Hotel_Front-B3",2048,4096],["Hotel_Front-A4",0,6144],["Hotel_Front-B4",2048,6144]],"2x":[["Hotel_Front-A1",0,0],["Hotel_Front-B1",1024,0],["Hotel_Front-C1",2048,0],["Hotel_Front-D1",3072,0],["Hotel_Front-A2",0,1024],["Hotel_Front-B2",1024,1024],["Hotel_Front-C2",2048,1024],["Hotel_Front-D2",3072,1024],["Hotel_Front-A3",0,2048],["Hotel_Front-B3",1024,2048],["Hotel_Front-C3",2048,2048],["Hotel_Front-D3",3072,2048],["Hotel_Front-A4",0,3072],["Hotel_Front-B4",1024,3072],["Hotel_Front-C4",2048,3072],["Hotel_Front-D4",3072,3072],["Hotel_Front-A5",0,4096],["Hotel_Front-B5",1024,4096],["Hotel_Front-C5",2048,4096],["Hotel_Front-D5",3072,4096],["Hotel_Front-A6",0,5120],["Hotel_Front-B6",1024,5120],["Hotel_Front-C6",2048,5120],["Hotel_Front-D6",3072,5120],["Hotel_Front-A7",0,6144],["Hotel_Front-B7",1024,6144],["Hotel_Front-C7",2048,6144],["Hotel_Front-D7",3072,6144],["Hotel_Front-A8",0,7168],["Hotel_Front-B8",1024,7168],["Hotel_Front-C8",2048,7168],["Hotel_Front-D8",3072,7168]],"4x":[["Hotel_Front-A1",0,0],["Hotel_Front-B1",1024,0],["Hotel_Front-C1",2048,0],["Hotel_Front-D1",3072,0],["Hotel_Front-A2",0,1024],["Hotel_Front-B2",1024,1024],["Hotel_Front-C2",2048,1024],["Hotel_Front-D2",3072,1024],["Hotel_Front-A3",0,2048],["Hotel_Front-B3",1024,2048],["Hotel_Front-C3",2048,2048],["Hotel_Front-D3",3072,2048],["Hotel_Front-A4",0,3072],["Hotel_Front-B4",1024,3072],["Hotel_Front-C4",2048,3072],["Hotel_Front-D4",3072,3072],["Hotel_Front-A5",0,4096],["Hotel_Front-B5",1024,4096],["Hotel_Front-C5",2048,4096],["Hotel_Front-D5",3072,4096],["Hotel_Front-A6",0,5120],["Hotel_Front-B6",1024,5120],["Hotel_Front-C6",2048,5120],["Hotel_Front-D6",3072,5120],["Hotel_Front-A7",0,6144],["Hotel_Front-B7",1024,6144],["Hotel_Front-C7",2048,6144],["Hotel_Front-D7",3072,6144],["Hotel_Front-A8",0,7168],["Hotel_Front-B8",1024,7168],["Hotel_Front-C8",2048,7168],["Hotel_Front-D8",3072,7168]]},Lab_A1:{hx:[["Lab_A1-A1",0,0],["Lab_A1-A2",0,4096]],"1x":[["Lab_A1-A1",0,0],["Lab_A1-B1",2048,0],["Lab_A1-A2",0,2048],["Lab_A1-B2",2048,2048],["Lab_A1-A3",0,4096],["Lab_A1-B3",2048,4096],["Lab_A1-A4",0,6144],["Lab_A1-B4",2048,6144]],"2x":[["Lab_A1-A1",0,0],["Lab_A1-B1",1024,0],["Lab_A1-C1",2048,0],["Lab_A1-D1",3072,0],["Lab_A1-A2",0,1024],["Lab_A1-B2",1024,1024],["Lab_A1-C2",2048,1024],["Lab_A1-D2",3072,1024],["Lab_A1-A3",0,2048],["Lab_A1-B3",1024,2048],["Lab_A1-C3",2048,2048],["Lab_A1-D3",3072,2048],["Lab_A1-A4",0,3072],["Lab_A1-B4",1024,3072],["Lab_A1-C4",2048,3072],["Lab_A1-D4",3072,3072],["Lab_A1-A5",0,4096],["Lab_A1-B5",1024,4096],["Lab_A1-C5",2048,4096],["Lab_A1-D5",3072,4096],["Lab_A1-A6",0,5120],["Lab_A1-B6",1024,5120],["Lab_A1-C6",2048,5120],["Lab_A1-D6",3072,5120],["Lab_A1-A7",0,6144],["Lab_A1-B7",1024,6144],["Lab_A1-C7",2048,6144],["Lab_A1-D7",3072,6144]],"4x":[["Lab_A1-A1",0,0],["Lab_A1-B1",1024,0],["Lab_A1-C1",2048,0],["Lab_A1-D1",3072,0],["Lab_A1-A2",0,1024],["Lab_A1-B2",1024,1024],["Lab_A1-C2",2048,1024],["Lab_A1-D2",3072,1024],["Lab_A1-A3",0,2048],["Lab_A1-B3",1024,2048],["Lab_A1-C3",2048,2048],["Lab_A1-D3",3072,2048],["Lab_A1-A4",0,3072],["Lab_A1-B4",1024,3072],["Lab_A1-C4",2048,3072],["Lab_A1-D4",3072,3072],["Lab_A1-A5",0,4096],["Lab_A1-B5",1024,4096],["Lab_A1-C5",2048,4096],["Lab_A1-D5",3072,4096],["Lab_A1-A6",0,5120],["Lab_A1-B6",1024,5120],["Lab_A1-C6",2048,5120],["Lab_A1-D6",3072,5120],["Lab_A1-A7",0,6144],["Lab_A1-B7",1024,6144],["Lab_A1-C7",2048,6144],["Lab_A1-D7",3072,6144]]},Lab_A2:{hx:[["Lab_A2-A1",0,0],["Lab_A2-A2",0,4096]],"1x":[["Lab_A2-A1",0,0],["Lab_A2-B1",2048,0],["Lab_A2-A2",0,2048],["Lab_A2-B2",2048,2048],["Lab_A2-A3",0,4096],["Lab_A2-B3",2048,4096],["Lab_A2-A4",0,6144],["Lab_A2-B4",2048,6144]],"2x":[["Lab_A2-A1",0,0],["Lab_A2-B1",1024,0],["Lab_A2-C1",2048,0],["Lab_A2-D1",3072,0],["Lab_A2-A2",0,1024],["Lab_A2-B2",1024,1024],["Lab_A2-C2",2048,1024],["Lab_A2-D2",3072,1024],["Lab_A2-A3",0,2048],["Lab_A2-B3",1024,2048],["Lab_A2-C3",2048,2048],["Lab_A2-D3",3072,2048],["Lab_A2-A4",0,3072],["Lab_A2-B4",1024,3072],["Lab_A2-C4",2048,3072],["Lab_A2-D4",3072,3072],["Lab_A2-A5",0,4096],["Lab_A2-B5",1024,4096],["Lab_A2-C5",2048,4096],["Lab_A2-D5",3072,4096],["Lab_A2-A6",0,5120],["Lab_A2-B6",1024,5120],["Lab_A2-C6",2048,5120],["Lab_A2-D6",3072,5120],["Lab_A2-A7",0,6144],["Lab_A2-B7",1024,6144],["Lab_A2-C7",2048,6144],["Lab_A2-D7",3072,6144],["Lab_A2-A8",0,7168],["Lab_A2-B8",1024,7168],["Lab_A2-C8",2048,7168],["Lab_A2-D8",3072,7168]],"4x":[["Lab_A2-A1",0,0],["Lab_A2-B1",1024,0],["Lab_A2-C1",2048,0],["Lab_A2-D1",3072,0],["Lab_A2-A2",0,1024],["Lab_A2-B2",1024,1024],["Lab_A2-C2",2048,1024],["Lab_A2-D2",3072,1024],["Lab_A2-A3",0,2048],["Lab_A2-B3",1024,2048],["Lab_A2-C3",2048,2048],["Lab_A2-D3",3072,2048],["Lab_A2-A4",0,3072],["Lab_A2-B4",1024,3072],["Lab_A2-C4",2048,3072],["Lab_A2-D4",3072,3072],["Lab_A2-A5",0,4096],["Lab_A2-B5",1024,4096],["Lab_A2-C5",2048,4096],["Lab_A2-D5",3072,4096],["Lab_A2-A6",0,5120],["Lab_A2-B6",1024,5120],["Lab_A2-C6",2048,5120],["Lab_A2-D6",3072,5120],["Lab_A2-A7",0,6144],["Lab_A2-B7",1024,6144],["Lab_A2-C7",2048,6144],["Lab_A2-D7",3072,6144],["Lab_A2-A8",0,7168],["Lab_A2-B8",1024,7168],["Lab_A2-C8",2048,7168],["Lab_A2-D8",3072,7168]]},Lab_B1:{hx:[["Lab_B1-A1",0,0],["Lab_B1-A2",0,4096]],"1x":[["Lab_B1-A1",0,0],["Lab_B1-B1",2048,0],["Lab_B1-A2",0,2048],["Lab_B1-B2",2048,2048],["Lab_B1-A3",0,4096],["Lab_B1-B3",2048,4096]],"2x":[["Lab_B1-A1",0,0],["Lab_B1-B1",1024,0],["Lab_B1-C1",2048,0],["Lab_B1-D1",3072,0],["Lab_B1-A2",0,1024],["Lab_B1-B2",1024,1024],["Lab_B1-C2",2048,1024],["Lab_B1-D2",3072,1024],["Lab_B1-A3",0,2048],["Lab_B1-B3",1024,2048],["Lab_B1-C3",2048,2048],["Lab_B1-D3",3072,2048],["Lab_B1-A4",0,3072],["Lab_B1-B4",1024,3072],["Lab_B1-C4",2048,3072],["Lab_B1-D4",3072,3072],["Lab_B1-A5",0,4096],["Lab_B1-B5",1024,4096],["Lab_B1-C5",2048,4096],["Lab_B1-D5",3072,4096],["Lab_B1-A6",0,5120],["Lab_B1-B6",1024,5120],["Lab_B1-C6",2048,5120],["Lab_B1-D6",3072,5120]],"4x":[["Lab_B1-A1",0,0],["Lab_B1-B1",1024,0],["Lab_B1-C1",2048,0],["Lab_B1-D1",3072,0],["Lab_B1-A2",0,1024],["Lab_B1-B2",1024,1024],["Lab_B1-C2",2048,1024],["Lab_B1-D2",3072,1024],["Lab_B1-A3",0,2048],["Lab_B1-B3",1024,2048],["Lab_B1-C3",2048,2048],["Lab_B1-D3",3072,2048],["Lab_B1-A4",0,3072],["Lab_B1-B4",1024,3072],["Lab_B1-C4",2048,3072],["Lab_B1-D4",3072,3072],["Lab_B1-A5",0,4096],["Lab_B1-B5",1024,4096],["Lab_B1-C5",2048,4096],["Lab_B1-D5",3072,4096],["Lab_B1-A6",0,5120],["Lab_B1-B6",1024,5120],["Lab_B1-C6",2048,5120],["Lab_B1-D6",3072,5120]]},Lab_C1:{hx:[["Lab_C1-A1",0,0],["Lab_C1-A2",0,4096]],"1x":[["Lab_C1-A1",0,0],["Lab_C1-B1",2048,0],["Lab_C1-A2",0,2048],["Lab_C1-B2",2048,2048],["Lab_C1-A3",0,4096],["Lab_C1-B3",2048,4096]],"2x":[["Lab_C1-A1",0,0],["Lab_C1-B1",1024,0],["Lab_C1-C1",2048,0],["Lab_C1-D1",3072,0],["Lab_C1-A2",0,1024],["Lab_C1-B2",1024,1024],["Lab_C1-C2",2048,1024],["Lab_C1-D2",3072,1024],["Lab_C1-A3",0,2048],["Lab_C1-B3",1024,2048],["Lab_C1-C3",2048,2048],["Lab_C1-D3",3072,2048],["Lab_C1-A4",0,3072],["Lab_C1-B4",1024,3072],["Lab_C1-C4",2048,3072],["Lab_C1-D4",3072,3072],["Lab_C1-A5",0,4096],["Lab_C1-B5",1024,4096],["Lab_C1-C5",2048,4096],["Lab_C1-D5",3072,4096],["Lab_C1-A6",0,5120],["Lab_C1-B6",1024,5120],["Lab_C1-C6",2048,5120],["Lab_C1-D6",3072,5120]],"4x":[["Lab_C1-A1",0,0],["Lab_C1-B1",1024,0],["Lab_C1-C1",2048,0],["Lab_C1-D1",3072,0],["Lab_C1-A2",0,1024],["Lab_C1-B2",1024,1024],["Lab_C1-C2",2048,1024],["Lab_C1-D2",3072,1024],["Lab_C1-A3",0,2048],["Lab_C1-B3",1024,2048],["Lab_C1-C3",2048,2048],["Lab_C1-D3",3072,2048],["Lab_C1-A4",0,3072],["Lab_C1-B4",1024,3072],["Lab_C1-C4",2048,3072],["Lab_C1-D4",3072,3072],["Lab_C1-A5",0,4096],["Lab_C1-B5",1024,4096],["Lab_C1-C5",2048,4096],["Lab_C1-D5",3072,4096],["Lab_C1-A6",0,5120],["Lab_C1-B6",1024,5120],["Lab_C1-C6",2048,5120],["Lab_C1-D6",3072,5120]]},Lab_Front:{hx:[["Lab_Front-A1",0,0],["Lab_Front-A2",0,4096],["Lab_Front-A3",0,8192],["Lab_Front-A4",0,12288],["Lab_Front-A5",0,16384]],"1x":[["Lab_Front-A1",0,0],["Lab_Front-B1",2048,0],["Lab_Front-A2",0,2048],["Lab_Front-B2",2048,2048],["Lab_Front-A3",0,4096],["Lab_Front-B3",2048,4096],["Lab_Front-A4",0,6144],["Lab_Front-B4",2048,6144],["Lab_Front-A5",0,8192],["Lab_Front-B5",2048,8192],["Lab_Front-A6",0,10240],["Lab_Front-B6",2048,10240],["Lab_Front-A7",0,12288],["Lab_Front-B7",2048,12288],["Lab_Front-A8",0,14336],["Lab_Front-B8",2048,14336],["Lab_Front-A9",0,16384],["Lab_Front-B9",2048,16384],["Lab_Front-A10",0,18432],["Lab_Front-B10",2048,18432]],"2x":[["Lab_Front-A1",0,0],["Lab_Front-B1",1024,0],["Lab_Front-C1",2048,0],["Lab_Front-D1",3072,0],["Lab_Front-A2",0,1024],["Lab_Front-B2",1024,1024],["Lab_Front-C2",2048,1024],["Lab_Front-D2",3072,1024],["Lab_Front-A3",0,2048],["Lab_Front-B3",1024,2048],["Lab_Front-C3",2048,2048],["Lab_Front-D3",3072,2048],["Lab_Front-A4",0,3072],["Lab_Front-B4",1024,3072],["Lab_Front-C4",2048,3072],["Lab_Front-D4",3072,3072],["Lab_Front-A5",0,4096],["Lab_Front-B5",1024,4096],["Lab_Front-C5",2048,4096],["Lab_Front-D5",3072,4096],["Lab_Front-A6",0,5120],["Lab_Front-B6",1024,5120],["Lab_Front-C6",2048,5120],["Lab_Front-D6",3072,5120],["Lab_Front-A7",0,6144],["Lab_Front-D7",3072,6144],["Lab_Front-A8",0,7168],["Lab_Front-B8",1024,7168],["Lab_Front-C8",2048,7168],["Lab_Front-D8",3072,7168],["Lab_Front-A9",0,8192],["Lab_Front-B9",1024,8192],["Lab_Front-C9",2048,8192],["Lab_Front-D9",3072,8192],["Lab_Front-A10",0,9216],["Lab_Front-B10",1024,9216],["Lab_Front-D10",3072,9216],["Lab_Front-A11",0,10240],["Lab_Front-B11",1024,10240],["Lab_Front-C11",2048,10240],["Lab_Front-D11",3072,10240],["Lab_Front-A12",0,11264],["Lab_Front-B12",1024,11264],["Lab_Front-C12",2048,11264],["Lab_Front-D12",3072,11264],["Lab_Front-A13",0,12288],["Lab_Front-B13",1024,12288],["Lab_Front-C13",2048,12288],["Lab_Front-D13",3072,12288],["Lab_Front-A14",0,13312],["Lab_Front-B14",1024,13312],["Lab_Front-C14",2048,13312],["Lab_Front-D14",3072,13312],["Lab_Front-A15",0,14336],["Lab_Front-B15",1024,14336],["Lab_Front-C15",2048,14336],["Lab_Front-D15",3072,14336],["Lab_Front-A16",0,15360],["Lab_Front-B16",1024,15360],["Lab_Front-C16",2048,15360],["Lab_Front-D16",3072,15360],["Lab_Front-A17",0,16384],["Lab_Front-B17",1024,16384],["Lab_Front-C17",2048,16384],["Lab_Front-D17",3072,16384],["Lab_Front-A18",0,17408],["Lab_Front-B18",1024,17408],["Lab_Front-C18",2048,17408],["Lab_Front-D18",3072,17408],["Lab_Front-A19",0,18432],["Lab_Front-B19",1024,18432],["Lab_Front-C19",2048,18432],["Lab_Front-D19",3072,18432],["Lab_Front-A20",0,19456],["Lab_Front-B20",1024,19456],["Lab_Front-C20",2048,19456],["Lab_Front-D20",3072,19456]],"4x":[["Lab_Front-A1",0,0],["Lab_Front-B1",1024,0],["Lab_Front-C1",2048,0],["Lab_Front-D1",3072,0],["Lab_Front-A2",0,1024],["Lab_Front-B2",1024,1024],["Lab_Front-C2",2048,1024],["Lab_Front-D2",3072,1024],["Lab_Front-A3",0,2048],["Lab_Front-B3",1024,2048],["Lab_Front-C3",2048,2048],["Lab_Front-D3",3072,2048],["Lab_Front-A4",0,3072],["Lab_Front-B4",1024,3072],["Lab_Front-C4",2048,3072],["Lab_Front-D4",3072,3072],["Lab_Front-A5",0,4096],["Lab_Front-B5",1024,4096],["Lab_Front-C5",2048,4096],["Lab_Front-D5",3072,4096],["Lab_Front-A6",0,5120],["Lab_Front-B6",1024,5120],["Lab_Front-C6",2048,5120],["Lab_Front-D6",3072,5120],["Lab_Front-A7",0,6144],["Lab_Front-D7",3072,6144],["Lab_Front-A8",0,7168],["Lab_Front-B8",1024,7168],["Lab_Front-C8",2048,7168],["Lab_Front-D8",3072,7168],["Lab_Front-A9",0,8192],["Lab_Front-B9",1024,8192],["Lab_Front-C9",2048,8192],["Lab_Front-D9",3072,8192],["Lab_Front-A10",0,9216],["Lab_Front-B10",1024,9216],["Lab_Front-D10",3072,9216],["Lab_Front-A11",0,10240],["Lab_Front-B11",1024,10240],["Lab_Front-C11",2048,10240],["Lab_Front-D11",3072,10240],["Lab_Front-A12",0,11264],["Lab_Front-B12",1024,11264],["Lab_Front-C12",2048,11264],["Lab_Front-D12",3072,11264],["Lab_Front-A13",0,12288],["Lab_Front-B13",1024,12288],["Lab_Front-C13",2048,12288],["Lab_Front-D13",3072,12288],["Lab_Front-A14",0,13312],["Lab_Front-B14",1024,13312],["Lab_Front-C14",2048,13312],["Lab_Front-D14",3072,13312],["Lab_Front-A15",0,14336],["Lab_Front-B15",1024,14336],["Lab_Front-C15",2048,14336],["Lab_Front-D15",3072,14336],["Lab_Front-A16",0,15360],["Lab_Front-B16",1024,15360],["Lab_Front-C16",2048,15360],["Lab_Front-D16",3072,15360],["Lab_Front-A17",0,16384],["Lab_Front-B17",1024,16384],["Lab_Front-C17",2048,16384],["Lab_Front-D17",3072,16384],["Lab_Front-A18",0,17408],["Lab_Front-B18",1024,17408],["Lab_Front-C18",2048,17408],["Lab_Front-D18",3072,17408],["Lab_Front-A19",0,18432],["Lab_Front-B19",1024,18432],["Lab_Front-C19",2048,18432],["Lab_Front-D19",3072,18432],["Lab_Front-A20",0,19456],["Lab_Front-B20",1024,19456],["Lab_Front-C20",2048,19456],["Lab_Front-D20",3072,19456]]},Museum_A1:{hx:[["Museum_A1-A1",0,0],["Museum_A1-A2",0,4096]],"1x":[["Museum_A1-A1",0,0],["Museum_A1-B1",2048,0],["Museum_A1-A2",0,2048],["Museum_A1-B2",2048,2048],["Museum_A1-A3",0,4096],["Museum_A1-B3",2048,4096]],"2x":[["Museum_A1-A1",0,0],["Museum_A1-B1",1024,0],["Museum_A1-C1",2048,0],["Museum_A1-D1",3072,0],["Museum_A1-A2",0,1024],["Museum_A1-B2",1024,1024],["Museum_A1-C2",2048,1024],["Museum_A1-D2",3072,1024],["Museum_A1-A3",0,2048],["Museum_A1-B3",1024,2048],["Museum_A1-C3",2048,2048],["Museum_A1-D3",3072,2048],["Museum_A1-A4",0,3072],["Museum_A1-B4",1024,3072],["Museum_A1-C4",2048,3072],["Museum_A1-D4",3072,3072],["Museum_A1-A5",0,4096],["Museum_A1-B5",1024,4096],["Museum_A1-C5",2048,4096],["Museum_A1-D5",3072,4096]],"4x":[["Museum_A1-A1",0,0],["Museum_A1-B1",1024,0],["Museum_A1-C1",2048,0],["Museum_A1-D1",3072,0],["Museum_A1-A2",0,1024],["Museum_A1-B2",1024,1024],["Museum_A1-C2",2048,1024],["Museum_A1-D2",3072,1024],["Museum_A1-A3",0,2048],["Museum_A1-B3",1024,2048],["Museum_A1-C3",2048,2048],["Museum_A1-D3",3072,2048],["Museum_A1-A4",0,3072],["Museum_A1-B4",1024,3072],["Museum_A1-C4",2048,3072],["Museum_A1-D4",3072,3072],["Museum_A1-A5",0,4096],["Museum_A1-B5",1024,4096],["Museum_A1-C5",2048,4096],["Museum_A1-D5",3072,4096]]},Museum_B1:{hx:[["Museum_B1-A1",0,0],["Museum_B1-A2",0,4096]],"1x":[["Museum_B1-A1",0,0],["Museum_B1-B1",2048,0],["Museum_B1-A2",0,2048],["Museum_B1-B2",2048,2048],["Museum_B1-A3",0,4096],["Museum_B1-B3",2048,4096]],"2x":[["Museum_B1-A1",0,0],["Museum_B1-B1",1024,0],["Museum_B1-C1",2048,0],["Museum_B1-D1",3072,0],["Museum_B1-A2",0,1024],["Museum_B1-B2",1024,1024],["Museum_B1-C2",2048,1024],["Museum_B1-D2",3072,1024],["Museum_B1-A3",0,2048],["Museum_B1-B3",1024,2048],["Museum_B1-C3",2048,2048],["Museum_B1-D3",3072,2048],["Museum_B1-A4",0,3072],["Museum_B1-B4",1024,3072],["Museum_B1-C4",2048,3072],["Museum_B1-D4",3072,3072],["Museum_B1-A5",0,4096],["Museum_B1-B5",1024,4096],["Museum_B1-C5",2048,4096],["Museum_B1-D5",3072,4096]],"4x":[["Museum_B1-A1",0,0],["Museum_B1-B1",1024,0],["Museum_B1-C1",2048,0],["Museum_B1-D1",3072,0],["Museum_B1-A2",0,1024],["Museum_B1-B2",1024,1024],["Museum_B1-C2",2048,1024],["Museum_B1-D2",3072,1024],["Museum_B1-A3",0,2048],["Museum_B1-B3",1024,2048],["Museum_B1-C3",2048,2048],["Museum_B1-D3",3072,2048],["Museum_B1-A4",0,3072],["Museum_B1-B4",1024,3072],["Museum_B1-C4",2048,3072],["Museum_B1-D4",3072,3072],["Museum_B1-A5",0,4096],["Museum_B1-B5",1024,4096],["Museum_B1-C5",2048,4096],["Museum_B1-D5",3072,4096]]},Museum_C1:{hx:[["Museum_C1-A1",0,0],["Museum_C1-A2",0,4096]],"1x":[["Museum_C1-A1",0,0],["Museum_C1-B1",2048,0],["Museum_C1-A2",0,2048],["Museum_C1-B2",2048,2048],["Museum_C1-A3",0,4096],["Museum_C1-B3",2048,4096]],"2x":[["Museum_C1-A1",0,0],["Museum_C1-B1",1024,0],["Museum_C1-C1",2048,0],["Museum_C1-D1",3072,0],["Museum_C1-A2",0,1024],["Museum_C1-B2",1024,1024],["Museum_C1-C2",2048,1024],["Museum_C1-D2",3072,1024],["Museum_C1-A3",0,2048],["Museum_C1-B3",1024,2048],["Museum_C1-C3",2048,2048],["Museum_C1-D3",3072,2048],["Museum_C1-A4",0,3072],["Museum_C1-B4",1024,3072],["Museum_C1-C4",2048,3072],["Museum_C1-D4",3072,3072],["Museum_C1-A5",0,4096],["Museum_C1-B5",1024,4096],["Museum_C1-C5",2048,4096],["Museum_C1-D5",3072,4096],["Museum_C1-A6",0,5120],["Museum_C1-B6",1024,5120],["Museum_C1-C6",2048,5120],["Museum_C1-D6",3072,5120]],"4x":[["Museum_C1-A1",0,0],["Museum_C1-B1",1024,0],["Museum_C1-C1",2048,0],["Museum_C1-D1",3072,0],["Museum_C1-A2",0,1024],["Museum_C1-B2",1024,1024],["Museum_C1-C2",2048,1024],["Museum_C1-D2",3072,1024],["Museum_C1-A3",0,2048],["Museum_C1-B3",1024,2048],["Museum_C1-C3",2048,2048],["Museum_C1-D3",3072,2048],["Museum_C1-A4",0,3072],["Museum_C1-B4",1024,3072],["Museum_C1-C4",2048,3072],["Museum_C1-D4",3072,3072],["Museum_C1-A5",0,4096],["Museum_C1-B5",1024,4096],["Museum_C1-C5",2048,4096],["Museum_C1-D5",3072,4096],["Museum_C1-A6",0,5120],["Museum_C1-B6",1024,5120],["Museum_C1-C6",2048,5120],["Museum_C1-D6",3072,5120]]},Museum_C2:{hx:[["Museum_C2-A1",0,0],["Museum_C2-A2",0,4096]],"1x":[["Museum_C2-A1",0,0],["Museum_C2-B1",2048,0],["Museum_C2-A2",0,2048],["Museum_C2-B2",2048,2048],["Museum_C2-A3",0,4096],["Museum_C2-B3",2048,4096]],"2x":[["Museum_C2-A1",0,0],["Museum_C2-B1",1024,0],["Museum_C2-C1",2048,0],["Museum_C2-D1",3072,0],["Museum_C2-A2",0,1024],["Museum_C2-B2",1024,1024],["Museum_C2-C2",2048,1024],["Museum_C2-D2",3072,1024],["Museum_C2-A3",0,2048],["Museum_C2-B3",1024,2048],["Museum_C2-C3",2048,2048],["Museum_C2-D3",3072,2048],["Museum_C2-A4",0,3072],["Museum_C2-B4",1024,3072],["Museum_C2-C4",2048,3072],["Museum_C2-D4",3072,3072],["Museum_C2-A5",0,4096],["Museum_C2-B5",1024,4096],["Museum_C2-C5",2048,4096],["Museum_C2-D5",3072,4096],["Museum_C2-A6",0,5120],["Museum_C2-B6",1024,5120],["Museum_C2-C6",2048,5120],["Museum_C2-D6",3072,5120]],"4x":[["Museum_C2-A1",0,0],["Museum_C2-B1",1024,0],["Museum_C2-C1",2048,0],["Museum_C2-D1",3072,0],["Museum_C2-A2",0,1024],["Museum_C2-B2",1024,1024],["Museum_C2-C2",2048,1024],["Museum_C2-D2",3072,1024],["Museum_C2-A3",0,2048],["Museum_C2-B3",1024,2048],["Museum_C2-C3",2048,2048],["Museum_C2-D3",3072,2048],["Museum_C2-A4",0,3072],["Museum_C2-B4",1024,3072],["Museum_C2-C4",2048,3072],["Museum_C2-D4",3072,3072],["Museum_C2-A5",0,4096],["Museum_C2-B5",1024,4096],["Museum_C2-C5",2048,4096],["Museum_C2-D5",3072,4096],["Museum_C2-A6",0,5120],["Museum_C2-B6",1024,5120],["Museum_C2-C6",2048,5120],["Museum_C2-D6",3072,5120]]},Museum_Front:{hx:[["Museum_Front-A1",0,0],["Museum_Front-A2",0,4096],["Museum_Front-A3",0,8192],["Museum_Front-A4",0,12288]],"1x":[["Museum_Front-A1",0,0],["Museum_Front-B1",2048,0],["Museum_Front-A2",0,2048],["Museum_Front-B2",2048,2048],["Museum_Front-A3",0,4096],["Museum_Front-B3",2048,4096],["Museum_Front-A4",0,6144],["Museum_Front-B4",2048,6144],["Museum_Front-A5",0,8192],["Museum_Front-B5",2048,8192],["Museum_Front-A6",0,10240],["Museum_Front-B6",2048,10240],["Museum_Front-A7",0,12288],["Museum_Front-B7",2048,12288],["Museum_Front-A8",0,14336],["Museum_Front-B8",2048,14336]],"2x":[["Museum_Front-A1",0,0],["Museum_Front-B1",1024,0],["Museum_Front-C1",2048,0],["Museum_Front-D1",3072,0],["Museum_Front-A2",0,1024],["Museum_Front-B2",1024,1024],["Museum_Front-C2",2048,1024],["Museum_Front-D2",3072,1024],["Museum_Front-A3",0,2048],["Museum_Front-B3",1024,2048],["Museum_Front-C3",2048,2048],["Museum_Front-D3",3072,2048],["Museum_Front-A4",0,3072],["Museum_Front-B4",1024,3072],["Museum_Front-C4",2048,3072],["Museum_Front-D4",3072,3072],["Museum_Front-A5",0,4096],["Museum_Front-B5",1024,4096],["Museum_Front-C5",2048,4096],["Museum_Front-D5",3072,4096],["Museum_Front-A6",0,5120],["Museum_Front-B6",1024,5120],["Museum_Front-C6",2048,5120],["Museum_Front-D6",3072,5120],["Museum_Front-A7",0,6144],["Museum_Front-B7",1024,6144],["Museum_Front-C7",2048,6144],["Museum_Front-D7",3072,6144],["Museum_Front-A8",0,7168],["Museum_Front-B8",1024,7168],["Museum_Front-C8",2048,7168],["Museum_Front-D8",3072,7168],["Museum_Front-A9",0,8192],["Museum_Front-B9",1024,8192],["Museum_Front-C9",2048,8192],["Museum_Front-D9",3072,8192],["Museum_Front-A10",0,9216],["Museum_Front-B10",1024,9216],["Museum_Front-C10",2048,9216],["Museum_Front-D10",3072,9216],["Museum_Front-A11",0,10240],["Museum_Front-B11",1024,10240],["Museum_Front-C11",2048,10240],["Museum_Front-D11",3072,10240],["Museum_Front-A12",0,11264],["Museum_Front-B12",1024,11264],["Museum_Front-C12",2048,11264],["Museum_Front-D12",3072,11264],["Museum_Front-A13",0,12288],["Museum_Front-B13",1024,12288],["Museum_Front-C13",2048,12288],["Museum_Front-D13",3072,12288],["Museum_Front-A14",0,13312],["Museum_Front-B14",1024,13312],["Museum_Front-D14",3072,13312],["Museum_Front-A15",0,14336],["Museum_Front-B15",1024,14336],["Museum_Front-C15",2048,14336],["Museum_Front-D15",3072,14336],["Museum_Front-A16",0,15360],["Museum_Front-B16",1024,15360],["Museum_Front-C16",2048,15360],["Museum_Front-D16",3072,15360]],"4x":[["Museum_Front-A1",0,0],["Museum_Front-B1",1024,0],["Museum_Front-C1",2048,0],["Museum_Front-D1",3072,0],["Museum_Front-A2",0,1024],["Museum_Front-B2",1024,1024],["Museum_Front-C2",2048,1024],["Museum_Front-D2",3072,1024],["Museum_Front-A3",0,2048],["Museum_Front-B3",1024,2048],["Museum_Front-C3",2048,2048],["Museum_Front-D3",3072,2048],["Museum_Front-A4",0,3072],["Museum_Front-B4",1024,3072],["Museum_Front-C4",2048,3072],["Museum_Front-D4",3072,3072],["Museum_Front-A5",0,4096],["Museum_Front-B5",1024,4096],["Museum_Front-C5",2048,4096],["Museum_Front-D5",3072,4096],["Museum_Front-A6",0,5120],["Museum_Front-B6",1024,5120],["Museum_Front-C6",2048,5120],["Museum_Front-D6",3072,5120],["Museum_Front-A7",0,6144],["Museum_Front-B7",1024,6144],["Museum_Front-C7",2048,6144],["Museum_Front-D7",3072,6144],["Museum_Front-A8",0,7168],["Museum_Front-B8",1024,7168],["Museum_Front-C8",2048,7168],["Museum_Front-D8",3072,7168],["Museum_Front-A9",0,8192],["Museum_Front-B9",1024,8192],["Museum_Front-C9",2048,8192],["Museum_Front-D9",3072,8192],["Museum_Front-A10",0,9216],["Museum_Front-B10",1024,9216],["Museum_Front-C10",2048,9216],["Museum_Front-D10",3072,9216],["Museum_Front-A11",0,10240],["Museum_Front-B11",1024,10240],["Museum_Front-C11",2048,10240],["Museum_Front-D11",3072,10240],["Museum_Front-A12",0,11264],["Museum_Front-B12",1024,11264],["Museum_Front-C12",2048,11264],["Museum_Front-D12",3072,11264],["Museum_Front-A13",0,12288],["Museum_Front-B13",1024,12288],["Museum_Front-C13",2048,12288],["Museum_Front-D13",3072,12288],["Museum_Front-A14",0,13312],["Museum_Front-B14",1024,13312],["Museum_Front-D14",3072,13312],["Museum_Front-A15",0,14336],["Museum_Front-B15",1024,14336],["Museum_Front-C15",2048,14336],["Museum_Front-D15",3072,14336],["Museum_Front-A16",0,15360],["Museum_Front-B16",1024,15360],["Museum_Front-C16",2048,15360],["Museum_Front-D16",3072,15360]]},Office_A1:{hx:[["Office_A1-A1",0,0],["Office_A1-A2",0,4096]],"1x":[["Office_A1-A1",0,0],["Office_A1-B1",2048,0],["Office_A1-A2",0,2048],["Office_A1-B2",2048,2048],["Office_A1-A3",0,4096],["Office_A1-B3",2048,4096],["Office_A1-A4",0,6144],["Office_A1-B4",2048,6144]],"2x":[["Office_A1-A1",0,0],["Office_A1-B1",1024,0],["Office_A1-C1",2048,0],["Office_A1-D1",3072,0],["Office_A1-A2",0,1024],["Office_A1-B2",1024,1024],["Office_A1-C2",2048,1024],["Office_A1-D2",3072,1024],["Office_A1-A3",0,2048],["Office_A1-B3",1024,2048],["Office_A1-C3",2048,2048],["Office_A1-D3",3072,2048],["Office_A1-A4",0,3072],["Office_A1-B4",1024,3072],["Office_A1-C4",2048,3072],["Office_A1-D4",3072,3072],["Office_A1-A5",0,4096],["Office_A1-B5",1024,4096],["Office_A1-C5",2048,4096],["Office_A1-D5",3072,4096],["Office_A1-A6",0,5120],["Office_A1-B6",1024,5120],["Office_A1-C6",2048,5120],["Office_A1-D6",3072,5120],["Office_A1-A7",0,6144],["Office_A1-B7",1024,6144],["Office_A1-C7",2048,6144],["Office_A1-D7",3072,6144]],"4x":[["Office_A1-A1",0,0],["Office_A1-B1",1024,0],["Office_A1-C1",2048,0],["Office_A1-D1",3072,0],["Office_A1-A2",0,1024],["Office_A1-B2",1024,1024],["Office_A1-C2",2048,1024],["Office_A1-D2",3072,1024],["Office_A1-A3",0,2048],["Office_A1-B3",1024,2048],["Office_A1-C3",2048,2048],["Office_A1-D3",3072,2048],["Office_A1-A4",0,3072],["Office_A1-B4",1024,3072],["Office_A1-C4",2048,3072],["Office_A1-D4",3072,3072],["Office_A1-A5",0,4096],["Office_A1-B5",1024,4096],["Office_A1-C5",2048,4096],["Office_A1-D5",3072,4096],["Office_A1-A6",0,5120],["Office_A1-B6",1024,5120],["Office_A1-C6",2048,5120],["Office_A1-D6",3072,5120],["Office_A1-A7",0,6144],["Office_A1-B7",1024,6144],["Office_A1-C7",2048,6144],["Office_A1-D7",3072,6144]]},Office_B1:{hx:[["Office_B1-A1",0,0]],"1x":[["Office_B1-A1",0,0],["Office_B1-B1",2048,0],["Office_B1-A2",0,2048],["Office_B1-B2",2048,2048]],"2x":[["Office_B1-A1",0,0],["Office_B1-B1",1024,0],["Office_B1-C1",2048,0],["Office_B1-D1",3072,0],["Office_B1-A2",0,1024],["Office_B1-B2",1024,1024],["Office_B1-C2",2048,1024],["Office_B1-D2",3072,1024],["Office_B1-A3",0,2048],["Office_B1-B3",1024,2048],["Office_B1-C3",2048,2048],["Office_B1-D3",3072,2048],["Office_B1-A4",0,3072],["Office_B1-B4",1024,3072],["Office_B1-C4",2048,3072],["Office_B1-D4",3072,3072]],"4x":[["Office_B1-A1",0,0],["Office_B1-B1",1024,0],["Office_B1-C1",2048,0],["Office_B1-D1",3072,0],["Office_B1-A2",0,1024],["Office_B1-B2",1024,1024],["Office_B1-C2",2048,1024],["Office_B1-D2",3072,1024],["Office_B1-A3",0,2048],["Office_B1-B3",1024,2048],["Office_B1-C3",2048,2048],["Office_B1-D3",3072,2048],["Office_B1-A4",0,3072],["Office_B1-B4",1024,3072],["Office_B1-C4",2048,3072],["Office_B1-D4",3072,3072]]},Office_B2:{hx:[["Office_B2-A1",0,0]],"1x":[["Office_B2-A1",0,0],["Office_B2-B1",2048,0],["Office_B2-A2",0,2048],["Office_B2-B2",2048,2048]],"2x":[["Office_B2-A1",0,0],["Office_B2-B1",1024,0],["Office_B2-C1",2048,0],["Office_B2-D1",3072,0],["Office_B2-A2",0,1024],["Office_B2-B2",1024,1024],["Office_B2-C2",2048,1024],["Office_B2-D2",3072,1024],["Office_B2-A3",0,2048],["Office_B2-B3",1024,2048],["Office_B2-C3",2048,2048],["Office_B2-D3",3072,2048],["Office_B2-A4",0,3072],["Office_B2-B4",1024,3072],["Office_B2-C4",2048,3072],["Office_B2-D4",3072,3072]],"4x":[["Office_B2-A1",0,0],["Office_B2-B1",1024,0],["Office_B2-C1",2048,0],["Office_B2-D1",3072,0],["Office_B2-A2",0,1024],["Office_B2-B2",1024,1024],["Office_B2-C2",2048,1024],["Office_B2-D2",3072,1024],["Office_B2-A3",0,2048],["Office_B2-B3",1024,2048],["Office_B2-C3",2048,2048],["Office_B2-D3",3072,2048],["Office_B2-A4",0,3072],["Office_B2-B4",1024,3072],["Office_B2-C4",2048,3072],["Office_B2-D4",3072,3072]]},Office_Front:{hx:[["Office_Front-A1",0,0],["Office_Front-A2",0,4096],["Office_Front-A3",0,8192],["Office_Front-A4",0,12288]],"1x":[["Office_Front-A1",0,0],["Office_Front-B1",2048,0],["Office_Front-A2",0,2048],["Office_Front-B2",2048,2048],["Office_Front-A3",0,4096],["Office_Front-B3",2048,4096],["Office_Front-A4",0,6144],["Office_Front-B4",2048,6144],["Office_Front-A5",0,8192],["Office_Front-B5",2048,8192],["Office_Front-A6",0,10240],["Office_Front-B6",2048,10240],["Office_Front-A7",0,12288],["Office_Front-B7",2048,12288],["Office_Front-A8",0,14336],["Office_Front-B8",2048,14336]],"2x":[["Office_Front-A1",0,0],["Office_Front-B1",1024,0],["Office_Front-C1",2048,0],["Office_Front-D1",3072,0],["Office_Front-A2",0,1024],["Office_Front-B2",1024,1024],["Office_Front-C2",2048,1024],["Office_Front-D2",3072,1024],["Office_Front-A3",0,2048],["Office_Front-B3",1024,2048],["Office_Front-C3",2048,2048],["Office_Front-D3",3072,2048],["Office_Front-A4",0,3072],["Office_Front-B4",1024,3072],["Office_Front-C4",2048,3072],["Office_Front-D4",3072,3072],["Office_Front-A5",0,4096],["Office_Front-B5",1024,4096],["Office_Front-C5",2048,4096],["Office_Front-D5",3072,4096],["Office_Front-A6",0,5120],["Office_Front-B6",1024,5120],["Office_Front-C6",2048,5120],["Office_Front-D6",3072,5120],["Office_Front-A7",0,6144],["Office_Front-B7",1024,6144],["Office_Front-C7",2048,6144],["Office_Front-D7",3072,6144],["Office_Front-A8",0,7168],["Office_Front-B8",1024,7168],["Office_Front-C8",2048,7168],["Office_Front-D8",3072,7168],["Office_Front-A9",0,8192],["Office_Front-B9",1024,8192],["Office_Front-C9",2048,8192],["Office_Front-D9",3072,8192],["Office_Front-A11",0,10240],["Office_Front-B11",1024,10240],["Office_Front-C11",2048,10240],["Office_Front-D11",3072,10240],["Office_Front-A12",0,11264],["Office_Front-B12",1024,11264],["Office_Front-C12",2048,11264],["Office_Front-D12",3072,11264],["Office_Front-A13",0,12288],["Office_Front-B13",1024,12288],["Office_Front-C13",2048,12288],["Office_Front-D13",3072,12288],["Office_Front-A14",0,13312],["Office_Front-C14",2048,13312],["Office_Front-D14",3072,13312],["Office_Front-A15",0,14336],["Office_Front-B15",1024,14336],["Office_Front-C15",2048,14336],["Office_Front-D15",3072,14336],["Office_Front-A16",0,15360],["Office_Front-B16",1024,15360],["Office_Front-C16",2048,15360],["Office_Front-D16",3072,15360]],"4x":[["Office_Front-A1",0,0],["Office_Front-B1",1024,0],["Office_Front-C1",2048,0],["Office_Front-D1",3072,0],["Office_Front-A2",0,1024],["Office_Front-B2",1024,1024],["Office_Front-C2",2048,1024],["Office_Front-D2",3072,1024],["Office_Front-A3",0,2048],["Office_Front-B3",1024,2048],["Office_Front-C3",2048,2048],["Office_Front-D3",3072,2048],["Office_Front-A4",0,3072],["Office_Front-B4",1024,3072],["Office_Front-C4",2048,3072],["Office_Front-D4",3072,3072],["Office_Front-A5",0,4096],["Office_Front-B5",1024,4096],["Office_Front-C5",2048,4096],["Office_Front-D5",3072,4096],["Office_Front-A6",0,5120],["Office_Front-B6",1024,5120],["Office_Front-C6",2048,5120],["Office_Front-D6",3072,5120],["Office_Front-A7",0,6144],["Office_Front-B7",1024,6144],["Office_Front-C7",2048,6144],["Office_Front-D7",3072,6144],["Office_Front-A8",0,7168],["Office_Front-B8",1024,7168],["Office_Front-C8",2048,7168],["Office_Front-D8",3072,7168],["Office_Front-A9",0,8192],["Office_Front-B9",1024,8192],["Office_Front-C9",2048,8192],["Office_Front-D9",3072,8192],["Office_Front-A11",0,10240],["Office_Front-B11",1024,10240],["Office_Front-C11",2048,10240],["Office_Front-D11",3072,10240],["Office_Front-A12",0,11264],["Office_Front-B12",1024,11264],["Office_Front-C12",2048,11264],["Office_Front-D12",3072,11264],["Office_Front-A13",0,12288],["Office_Front-B13",1024,12288],["Office_Front-C13",2048,12288],["Office_Front-D13",3072,12288],["Office_Front-A14",0,13312],["Office_Front-C14",2048,13312],["Office_Front-D14",3072,13312],["Office_Front-A15",0,14336],["Office_Front-B15",1024,14336],["Office_Front-C15",2048,14336],["Office_Front-D15",3072,14336],["Office_Front-A16",0,15360],["Office_Front-B16",1024,15360],["Office_Front-C16",2048,15360],["Office_Front-D16",3072,15360]]},Platform_Back:{hx:[["Platform_Back-A1",0,0]],"1x":[["Platform_Back-A1",0,0],["Platform_Back-B1",2048,0],["Platform_Back-A2",0,2048],["Platform_Back-B2",2048,2048]],"2x":[["Platform_Back-A1",0,0],["Platform_Back-B1",1024,0],["Platform_Back-C1",2048,0],["Platform_Back-D1",3072,0],["Platform_Back-A2",0,1024],["Platform_Back-B2",1024,1024],["Platform_Back-C2",2048,1024],["Platform_Back-D2",3072,1024],["Platform_Back-A3",0,2048],["Platform_Back-B3",1024,2048],["Platform_Back-C3",2048,2048],["Platform_Back-D3",3072,2048],["Platform_Back-A4",0,3072],["Platform_Back-B4",1024,3072],["Platform_Back-C4",2048,3072],["Platform_Back-D4",3072,3072]],"4x":[["Platform_Back-A1",0,0],["Platform_Back-B1",1024,0],["Platform_Back-C1",2048,0],["Platform_Back-D1",3072,0],["Platform_Back-A2",0,1024],["Platform_Back-B2",1024,1024],["Platform_Back-C2",2048,1024],["Platform_Back-D2",3072,1024],["Platform_Back-A3",0,2048],["Platform_Back-B3",1024,2048],["Platform_Back-C3",2048,2048],["Platform_Back-D3",3072,2048],["Platform_Back-A4",0,3072],["Platform_Back-B4",1024,3072],["Platform_Back-C4",2048,3072],["Platform_Back-D4",3072,3072]]},Platform_Front:{hx:[["Platform_Front-A1",0,0]],"1x":[["Platform_Front-A1",0,0],["Platform_Front-B1",2048,0],["Platform_Front-A2",0,2048],["Platform_Front-B2",2048,2048]],"2x":[["Platform_Front-A1",0,0],["Platform_Front-B1",1024,0],["Platform_Front-C1",2048,0],["Platform_Front-D1",3072,0],["Platform_Front-A2",0,1024],["Platform_Front-B2",1024,1024],["Platform_Front-C2",2048,1024],["Platform_Front-D2",3072,1024],["Platform_Front-A3",0,2048],["Platform_Front-B3",1024,2048],["Platform_Front-C3",2048,2048],["Platform_Front-D3",3072,2048],["Platform_Front-A4",0,3072],["Platform_Front-B4",1024,3072],["Platform_Front-C4",2048,3072],["Platform_Front-D4",3072,3072]],"4x":[["Platform_Front-A1",0,0],["Platform_Front-B1",1024,0],["Platform_Front-C1",2048,0],["Platform_Front-D1",3072,0],["Platform_Front-A2",0,1024],["Platform_Front-B2",1024,1024],["Platform_Front-C2",2048,1024],["Platform_Front-D2",3072,1024],["Platform_Front-A3",0,2048],["Platform_Front-B3",1024,2048],["Platform_Front-C3",2048,2048],["Platform_Front-D3",3072,2048],["Platform_Front-A4",0,3072],["Platform_Front-B4",1024,3072],["Platform_Front-C4",2048,3072],["Platform_Front-D4",3072,3072]]}},Na={hx:{"Arena_A1-A1":["/res/panelsoil/zenith/hx/Arena_A1-A1.png",4096,-1313.2069373975248],"Arena_A1-A2":["/res/panelsoil/zenith/hx/Arena_A1-A2.png",4096,-1244.3383617359025],"Arena_B1-A1":["/res/panelsoil/zenith/hx/Arena_B1-A1.png",4096,-1259.5355848354804],"Arena_B1-A2":["/res/panelsoil/zenith/hx/Arena_B1-A2.png",4096,-1176.5029670485667],"Arena_B2-A1":["/res/panelsoil/zenith/hx/Arena_B2-A1.png",4096,-1232.9006192971976],"Arena_B3-A1":["/res/panelsoil/zenith/hx/Arena_B3-A1.png",4096,-1230.5611731353556],"Arena_B3-A2":["/res/panelsoil/zenith/hx/Arena_B3-A2.png",4096,-1184.7267649808334],"Arena_C1-A1":["/res/panelsoil/zenith/hx/Arena_C1-A1.png",4096,-1165.40760936735],"Arena_Front-A1":["/res/panelsoil/zenith/hx/Arena_Front-A1.png",4096,-1283.4202581228044],"Arena_Front-A2":["/res/panelsoil/zenith/hx/Arena_Front-A2.png",4096,-1234.7845628889545],"Arena_Front-A3":["/res/panelsoil/zenith/hx/Arena_Front-A3.png",4096,-1191.9330675088322],"Casino_A1-A1":["/res/panelsoil/zenith/hx/Casino_A1-A1.png",4096,-1440.6540826544092],"Casino_A1-A2":["/res/panelsoil/zenith/hx/Casino_A1-A2.png",4096,-1413.4644146679684],"Casino_A1b-A1":["/res/panelsoil/zenith/hx/Casino_A1b-A1.png",4096,-1434.5355070229455],"Casino_A1b-A2":["/res/panelsoil/zenith/hx/Casino_A1b-A2.png",4096,-1407.9401553179398],"Casino_B1-A1":["/res/panelsoil/zenith/hx/Casino_B1-A1.png",4096,-1334.4206932467646],"Casino_B2-A1":["/res/panelsoil/zenith/hx/Casino_B2-A1.png",4096,-1353.1892172890186],"Casino_Front-A1":["/res/panelsoil/zenith/hx/Casino_Front-A1.png",4096,-1450.8397967736573],"Casino_Front-A2":["/res/panelsoil/zenith/hx/Casino_Front-A2.png",4096,-1382.0365512250391],"Casino_Front-A3":["/res/panelsoil/zenith/hx/Casino_Front-A3.png",4096,-1335.976794931923],"Core_A1-A1":["/res/panelsoil/zenith/hx/Core_A1-A1.png",4096,-482.2640656849193],"Core_A1-A2":["/res/panelsoil/zenith/hx/Core_A1-A2.png",4096,-414.63702977103384],"Core_B1-A1":["/res/panelsoil/zenith/hx/Core_B1-A1.png",4096,-416.1352322509627],"Core_B1-A2":["/res/panelsoil/zenith/hx/Core_B1-A2.png",4096,-349.4632344358376],"Core_B2-A1":["/res/panelsoil/zenith/hx/Core_B2-A1.png",4096,-357.74971140081743],"Core_C1-A1":["/res/panelsoil/zenith/hx/Core_C1-A1.png",4096,-287.7619953133781],"Core_Front-A1":["/res/panelsoil/zenith/hx/Core_Front-A1.png",4096,-513.4310951395493],"Core_Front-A2":["/res/panelsoil/zenith/hx/Core_Front-A2.png",4096,-441.2131861959439],"Core_Front-A3":["/res/panelsoil/zenith/hx/Core_Front-A3.png",4096,-397.5319313026727],"Core_Front-A4":["/res/panelsoil/zenith/hx/Core_Front-A4.png",4096,-347.06525473781795],"Core_Front-A5":["/res/panelsoil/zenith/hx/Core_Front-A5.png",4096,-298.7198142995433],"Corruption_A1-A1":["/res/panelsoil/zenith/hx/Corruption_A1-A1.png",4096,-224.18717718169268],"Corruption_A1-A2":["/res/panelsoil/zenith/hx/Corruption_A1-A2.png",4096,-216.1440952869437],"Corruption_B1-A1":["/res/panelsoil/zenith/hx/Corruption_B1-A1.png",4096,-153.10893458988852],"Corruption_B1-A2":["/res/panelsoil/zenith/hx/Corruption_B1-A2.png",4096,-142.68093507357577],"Corruption_B2-A1":["/res/panelsoil/zenith/hx/Corruption_B2-A1.png",4096,-194.35091327618395],"Corruption_B2-A2":["/res/panelsoil/zenith/hx/Corruption_B2-A2.png",4096,-119.81427278852179],"Corruption_C1-A1":["/res/panelsoil/zenith/hx/Corruption_C1-A1.png",4096,-150.7042989320603],"Corruption_C1-A2":["/res/panelsoil/zenith/hx/Corruption_C1-A2.png",4096,-102.12256683685283],"Corruption_C2-A1":["/res/panelsoil/zenith/hx/Corruption_C2-A1.png",4096,-143.20897285092997],"Corruption_C2-A2":["/res/panelsoil/zenith/hx/Corruption_C2-A2.png",4096,-83.00544404768544],"Corruption_D1-A1":["/res/panelsoil/zenith/hx/Corruption_D1-A1.png",4096,-38.783407689959674],"Corruption_D1-A2":["/res/panelsoil/zenith/hx/Corruption_D1-A2.png",4096,57.79238028227604],"Corruption_D2-A1":["/res/panelsoil/zenith/hx/Corruption_D2-A1.png",4096,-7.717834565079748],"Corruption_D2-A2":["/res/panelsoil/zenith/hx/Corruption_D2-A2.png",4096,45.70040700146964],"Corruption_Front-A1":["/res/panelsoil/zenith/hx/Corruption_Front-A1.png",4096,-254.2538193527385],"Corruption_Front-A2":["/res/panelsoil/zenith/hx/Corruption_Front-A2.png",4096,-211.1275406681591],"Corruption_Front-A3":["/res/panelsoil/zenith/hx/Corruption_Front-A3.png",4096,-142.06215428177043],"Corruption_Front-A4":["/res/panelsoil/zenith/hx/Corruption_Front-A4.png",4096,-99.089363705274],"Corruption_Front-A5":["/res/panelsoil/zenith/hx/Corruption_Front-A5.png",4096,-38.7499834043109],"Corruption_Front-A6":["/res/panelsoil/zenith/hx/Corruption_Front-A6.png",4096,-22.472666535694273],"Hall_1A-A1":["/res/panelsoil/zenith/hx/Hall_1A-A1.png",4096,-1586.307187789534],"Hall_Front-A1":["/res/panelsoil/zenith/hx/Hall_Front-A1.png",4096,-1584.7919322108678],"Hotel_A1-A1":["/res/panelsoil/zenith/hx/Hotel_A1-A1.png",4096,-1556.6425106501847],"Hotel_A1-A2":["/res/panelsoil/zenith/hx/Hotel_A1-A2.png",4096,-1509.3306573296895],"Hotel_B1-A1":["/res/panelsoil/zenith/hx/Hotel_B1-A1.png",4096,-1475.0401608364173],"Hotel_Back1-A1":["/res/panelsoil/zenith/hx/Hotel_Back1-A1.png",4096,-1526.0440479048557],"Hotel_Back2-A1":["/res/panelsoil/zenith/hx/Hotel_Back2-A1.png",4096,-1535.209850789422],"Hotel_Front-A1":["/res/panelsoil/zenith/hx/Hotel_Front-A1.png",4096,-1560.5869354320312],"Hotel_Front-A2":["/res/panelsoil/zenith/hx/Hotel_Front-A2.png",4096,-1524.4931012455866],"Lab_A1-A1":["/res/panelsoil/zenith/hx/Lab_A1-A1.png",4096,-697.8487401916611],"Lab_A1-A2":["/res/panelsoil/zenith/hx/Lab_A1-A2.png",4096,-667.3119375590528],"Lab_A2-A1":["/res/panelsoil/zenith/hx/Lab_A2-A1.png",4096,-725.8850907404973],"Lab_A2-A2":["/res/panelsoil/zenith/hx/Lab_A2-A2.png",4096,-687.000650507088],"Lab_B1-A1":["/res/panelsoil/zenith/hx/Lab_B1-A1.png",4096,-602.4805355025595],"Lab_B1-A2":["/res/panelsoil/zenith/hx/Lab_B1-A2.png",4096,-564.4200541567028],"Lab_C1-A1":["/res/panelsoil/zenith/hx/Lab_C1-A1.png",4096,-584.518839151506],"Lab_C1-A2":["/res/panelsoil/zenith/hx/Lab_C1-A2.png",4096,-507.7570375734328],"Lab_Front-A1":["/res/panelsoil/zenith/hx/Lab_Front-A1.png",4096,-747.7252958491555],"Lab_Front-A2":["/res/panelsoil/zenith/hx/Lab_Front-A2.png",4096,-705.5814417563902],"Lab_Front-A3":["/res/panelsoil/zenith/hx/Lab_Front-A3.png",4096,-635.8698539303913],"Lab_Front-A4":["/res/panelsoil/zenith/hx/Lab_Front-A4.png",4096,-590.329151723613],"Lab_Front-A5":["/res/panelsoil/zenith/hx/Lab_Front-A5.png",4096,-573.6235529454055],"Museum_A1-A1":["/res/panelsoil/zenith/hx/Museum_A1-A1.png",4096,-1159.6091666696325],"Museum_A1-A2":["/res/panelsoil/zenith/hx/Museum_A1-A2.png",4096,-1114.5843093476046],"Museum_B1-A1":["/res/panelsoil/zenith/hx/Museum_B1-A1.png",4096,-1056.3351579986852],"Museum_B1-A2":["/res/panelsoil/zenith/hx/Museum_B1-A2.png",4096,-1014.0989322359652],"Museum_C1-A1":["/res/panelsoil/zenith/hx/Museum_C1-A1.png",4096,-1018.9800493334471],"Museum_C1-A2":["/res/panelsoil/zenith/hx/Museum_C1-A2.png",4096,-936.3741378403527],"Museum_C2-A1":["/res/panelsoil/zenith/hx/Museum_C2-A1.png",4096,-1025.8266833691343],"Museum_C2-A2":["/res/panelsoil/zenith/hx/Museum_C2-A2.png",4096,-964.8386483063886],"Museum_Front-A1":["/res/panelsoil/zenith/hx/Museum_Front-A1.png",4096,-1143.6222608778216],"Museum_Front-A2":["/res/panelsoil/zenith/hx/Museum_Front-A2.png",4096,-1119.3936772661668],"Museum_Front-A3":["/res/panelsoil/zenith/hx/Museum_Front-A3.png",4096,-1047.8111492666721],"Museum_Front-A4":["/res/panelsoil/zenith/hx/Museum_Front-A4.png",4096,-1015.4222092000796],"Office_A1-A1":["/res/panelsoil/zenith/hx/Office_A1-A1.png",4096,-955.646165034067],"Office_A1-A2":["/res/panelsoil/zenith/hx/Office_A1-A2.png",4096,-910.2005693182849],"Office_B1-A1":["/res/panelsoil/zenith/hx/Office_B1-A1.png",4096,-855.4918803409197],"Office_B2-A1":["/res/panelsoil/zenith/hx/Office_B2-A1.png",4096,-831.7889220509281],"Office_Front-A1":["/res/panelsoil/zenith/hx/Office_Front-A1.png",4096,-925.9446466999855],"Office_Front-A2":["/res/panelsoil/zenith/hx/Office_Front-A2.png",4096,-901.4727999234656],"Office_Front-A3":["/res/panelsoil/zenith/hx/Office_Front-A3.png",4096,-865.2068275616224],"Office_Front-A4":["/res/panelsoil/zenith/hx/Office_Front-A4.png",4096,-792.5362233909909],"Platform_Back-A1":["/res/panelsoil/zenith/hx/Platform_Back-A1.png",4096,55.04235744796891],"Platform_Front-A1":["/res/panelsoil/zenith/hx/Platform_Front-A1.png",4096,57.725269210480675]},"1x":{"Arena_A1-A1":["/res/panelsoil/zenith/1x/Arena_A1-A1.png",2048,-510.3646661001158],"Arena_A1-B1":["/res/panelsoil/zenith/1x/Arena_A1-B1.png",2048,-489.33401916623666],"Arena_A1-A2":["/res/panelsoil/zenith/1x/Arena_A1-A2.png",2048,-486.66019010724386],"Arena_A1-B2":["/res/panelsoil/zenith/1x/Arena_A1-B2.png",2048,-465.7903247054906],"Arena_A1-A3":["/res/panelsoil/zenith/1x/Arena_A1-A3.png",2048,-454.79978294976644],"Arena_A1-B3":["/res/panelsoil/zenith/1x/Arena_A1-B3.png",2048,-427.4164111372226],"Arena_B1-A1":["/res/panelsoil/zenith/1x/Arena_B1-A1.png",2048,-443.8586169503417],"Arena_B1-B1":["/res/panelsoil/zenith/1x/Arena_B1-B1.png",2048,-428.0596699381492],"Arena_B1-A2":["/res/panelsoil/zenith/1x/Arena_B1-A2.png",2048,-417.5219138006576],"Arena_B1-B2":["/res/panelsoil/zenith/1x/Arena_B1-B2.png",2048,-407.3341211389336],"Arena_B1-A3":["/res/panelsoil/zenith/1x/Arena_B1-A3.png",2048,-395.36525907269106],"Arena_B1-B3":["/res/panelsoil/zenith/1x/Arena_B1-B3.png",2048,-376.16705644453197],"Arena_B2-A1":["/res/panelsoil/zenith/1x/Arena_B2-A1.png",2048,-446.0935964821873],"Arena_B2-B1":["/res/panelsoil/zenith/1x/Arena_B2-B1.png",2048,-440.67844162659463],"Arena_B2-A2":["/res/panelsoil/zenith/1x/Arena_B2-A2.png",2048,-408.03499748427686],"Arena_B2-B2":["/res/panelsoil/zenith/1x/Arena_B2-B2.png",2048,-407.9626790349768],"Arena_B3-A1":["/res/panelsoil/zenith/1x/Arena_B3-A1.png",2048,-433.0455755582128],"Arena_B3-B1":["/res/panelsoil/zenith/1x/Arena_B3-B1.png",2048,-415.5125792712577],"Arena_B3-A2":["/res/panelsoil/zenith/1x/Arena_B3-A2.png",2048,-416.34927291024457],"Arena_B3-B2":["/res/panelsoil/zenith/1x/Arena_B3-B2.png",2048,-407.3056636471583],"Arena_B3-A3":["/res/panelsoil/zenith/1x/Arena_B3-A3.png",2048,-373.63803867606737],"Arena_B3-B3":["/res/panelsoil/zenith/1x/Arena_B3-B3.png",2048,-381.0837828087411],"Arena_C1-A1":["/res/panelsoil/zenith/1x/Arena_C1-A1.png",2048,-375.47104223803075],"Arena_C1-B1":["/res/panelsoil/zenith/1x/Arena_C1-B1.png",2048,-352.8200340314202],"Arena_Front-A1":["/res/panelsoil/zenith/1x/Arena_Front-A1.png",2048,-495.23570290552124],"Arena_Front-B1":["/res/panelsoil/zenith/1x/Arena_Front-B1.png",2048,-477.12233664222003],"Arena_Front-A2":["/res/panelsoil/zenith/1x/Arena_Front-A2.png",2048,-469.7827221839445],"Arena_Front-B2":["/res/panelsoil/zenith/1x/Arena_Front-B2.png",2048,-461.3191252196394],"Arena_Front-A3":["/res/panelsoil/zenith/1x/Arena_Front-A3.png",2048,-444.6532202915904],"Arena_Front-B3":["/res/panelsoil/zenith/1x/Arena_Front-B3.png",2048,-425.20212299159886],"Arena_Front-A4":["/res/panelsoil/zenith/1x/Arena_Front-A4.png",2048,-428.1008089535516],"Arena_Front-B4":["/res/panelsoil/zenith/1x/Arena_Front-B4.png",2048,-419.5138405311521],"Arena_Front-A5":["/res/panelsoil/zenith/1x/Arena_Front-A5.png",2048,-407.4648427356021],"Arena_Front-B5":["/res/panelsoil/zenith/1x/Arena_Front-B5.png",2048,-397.39070812816516],"Arena_Front-A6":["/res/panelsoil/zenith/1x/Arena_Front-A6.png",2048,-377.21230610696904],"Arena_Front-B6":["/res/panelsoil/zenith/1x/Arena_Front-B6.png",2048,-358.7064479801425],"Casino_A1-A1":["/res/panelsoil/zenith/1x/Casino_A1-A1.png",2048,-654.0510535898237],"Casino_A1-B1":["/res/panelsoil/zenith/1x/Casino_A1-B1.png",2048,-645.3797479416316],"Casino_A1-A2":["/res/panelsoil/zenith/1x/Casino_A1-A2.png",2048,-626.6049561282057],"Casino_A1-B2":["/res/panelsoil/zenith/1x/Casino_A1-B2.png",2048,-605.4346247515085],"Casino_A1-A3":["/res/panelsoil/zenith/1x/Casino_A1-A3.png",2048,-592.1646938665457],"Casino_A1-B3":["/res/panelsoil/zenith/1x/Casino_A1-B3.png",2048,-576.5706122907413],"Casino_A1-A4":["/res/panelsoil/zenith/1x/Casino_A1-A4.png",2048,-572.6656447140067],"Casino_A1-B4":["/res/panelsoil/zenith/1x/Casino_A1-B4.png",2048,-561.9385987788311],"Casino_A1b-A1":["/res/panelsoil/zenith/1x/Casino_A1b-A1.png",2048,-652.3055640668458],"Casino_A1b-B1":["/res/panelsoil/zenith/1x/Casino_A1b-B1.png",2048,-637.4843510885761],"Casino_A1b-A2":["/res/panelsoil/zenith/1x/Casino_A1b-A2.png",2048,-618.8600857908566],"Casino_A1b-B2":["/res/panelsoil/zenith/1x/Casino_A1b-B2.png",2048,-624.6827565391039],"Casino_A1b-A3":["/res/panelsoil/zenith/1x/Casino_A1b-A3.png",2048,-592.8389654878318],"Casino_A1b-B3":["/res/panelsoil/zenith/1x/Casino_A1b-B3.png",2048,-590.0746801892924],"Casino_B1-A1":["/res/panelsoil/zenith/1x/Casino_B1-A1.png",2048,-525.8043405902855],"Casino_B1-B1":["/res/panelsoil/zenith/1x/Casino_B1-B1.png",2048,-508.2720883411637],"Casino_B1-A2":["/res/panelsoil/zenith/1x/Casino_B1-A2.png",2048,-515.8128841309697],"Casino_B1-B2":["/res/panelsoil/zenith/1x/Casino_B1-B2.png",2048,-497.1678639205621],"Casino_B2-A1":["/res/panelsoil/zenith/1x/Casino_B2-A1.png",2048,-539.0826136799096],"Casino_B2-B1":["/res/panelsoil/zenith/1x/Casino_B2-B1.png",2048,-529.0388896750173],"Casino_B2-A2":["/res/panelsoil/zenith/1x/Casino_B2-A2.png",2048,-518.4030892688678],"Casino_B2-B2":["/res/panelsoil/zenith/1x/Casino_B2-B2.png",2048,-498.06079928730514],"Casino_Front-A1":["/res/panelsoil/zenith/1x/Casino_Front-A1.png",2048,-649.545897503458],"Casino_Front-B1":["/res/panelsoil/zenith/1x/Casino_Front-B1.png",2048,-631.6571156837867],"Casino_Front-A2":["/res/panelsoil/zenith/1x/Casino_Front-A2.png",2048,-631.080214693081],"Casino_Front-B2":["/res/panelsoil/zenith/1x/Casino_Front-B2.png",2048,-606.8864754974967],"Casino_Front-A3":["/res/panelsoil/zenith/1x/Casino_Front-A3.png",2048,-590.5860659593152],"Casino_Front-B3":["/res/panelsoil/zenith/1x/Casino_Front-B3.png",2048,-589.8709558108254],"Casino_Front-A4":["/res/panelsoil/zenith/1x/Casino_Front-A4.png",2048,-566.8214132499398],"Casino_Front-B4":["/res/panelsoil/zenith/1x/Casino_Front-B4.png",2048,-552.9458721421729],"Casino_Front-A5":["/res/panelsoil/zenith/1x/Casino_Front-A5.png",2048,-538.8238705682095],"Casino_Front-B5":["/res/panelsoil/zenith/1x/Casino_Front-B5.png",2048,-539.6294728668352],"Casino_Front-A6":["/res/panelsoil/zenith/1x/Casino_Front-A6.png",2048,-531.756363406706],"Casino_Front-B6":["/res/panelsoil/zenith/1x/Casino_Front-B6.png",2048,-519.3038331960822],"Core_A1-A1":["/res/panelsoil/zenith/1x/Core_A1-A1.png",2048,316.29380655160577],"Core_A1-B1":["/res/panelsoil/zenith/1x/Core_A1-B1.png",2048,329.52935306943624],"Core_A1-A2":["/res/panelsoil/zenith/1x/Core_A1-A2.png",2048,353.96200851072706],"Core_A1-B2":["/res/panelsoil/zenith/1x/Core_A1-B2.png",2048,349.12404310189635],"Core_A1-A3":["/res/panelsoil/zenith/1x/Core_A1-A3.png",2048,374.99133297234215],"Core_A1-B3":["/res/panelsoil/zenith/1x/Core_A1-B3.png",2048,388.10891715856314],"Core_A1-A4":["/res/panelsoil/zenith/1x/Core_A1-A4.png",2048,397.64392712222985],"Core_A1-B4":["/res/panelsoil/zenith/1x/Core_A1-B4.png",2048,402.95307192027076],"Core_B1-A1":["/res/panelsoil/zenith/1x/Core_B1-A1.png",2048,401.95387528099275],"Core_B1-B1":["/res/panelsoil/zenith/1x/Core_B1-B1.png",2048,431.9887906991298],"Core_B1-A2":["/res/panelsoil/zenith/1x/Core_B1-A2.png",2048,429.34664512094554],"Core_B1-B2":["/res/panelsoil/zenith/1x/Core_B1-B2.png",2048,448.46680892047027],"Core_B1-A3":["/res/panelsoil/zenith/1x/Core_B1-A3.png",2048,455.50181859084705],"Core_B1-B3":["/res/panelsoil/zenith/1x/Core_B1-B3.png",2048,466.94379443460366],"Core_B2-A1":["/res/panelsoil/zenith/1x/Core_B2-A1.png",2048,443.9030736928463],"Core_B2-B1":["/res/panelsoil/zenith/1x/Core_B2-B1.png",2048,456.20479244601853],"Core_B2-A2":["/res/panelsoil/zenith/1x/Core_B2-A2.png",2048,473.8255967046075],"Core_B2-B2":["/res/panelsoil/zenith/1x/Core_B2-B2.png",2048,479.7201952646365],"Core_C1-A1":["/res/panelsoil/zenith/1x/Core_C1-A1.png",2048,526.0703136564354],"Core_C1-B1":["/res/panelsoil/zenith/1x/Core_C1-B1.png",2048,551.569937146829],"Core_Front-A1":["/res/panelsoil/zenith/1x/Core_Front-A1.png",2048,304.9388956435004],"Core_Front-B1":["/res/panelsoil/zenith/1x/Core_Front-B1.png",2048,316.7350495098792],"Core_Front-A2":["/res/panelsoil/zenith/1x/Core_Front-A2.png",2048,324.9984186865389],"Core_Front-B2":["/res/panelsoil/zenith/1x/Core_Front-B2.png",2048,343.2677222376643],"Core_Front-A3":["/res/panelsoil/zenith/1x/Core_Front-A3.png",2048,352.7069996960664],"Core_Front-B3":["/res/panelsoil/zenith/1x/Core_Front-B3.png",2048,372.3678731095606],"Core_Front-A4":["/res/panelsoil/zenith/1x/Core_Front-A4.png",2048,379.5928949688442],"Core_Front-B4":["/res/panelsoil/zenith/1x/Core_Front-B4.png",2048,394.25020384462965],"Core_Front-A5":["/res/panelsoil/zenith/1x/Core_Front-A5.png",2048,394.2047661017881],"Core_Front-B5":["/res/panelsoil/zenith/1x/Core_Front-B5.png",2048,421.4911441976531],"Core_Front-A6":["/res/panelsoil/zenith/1x/Core_Front-A6.png",2048,436.94332655238105],"Core_Front-B6":["/res/panelsoil/zenith/1x/Core_Front-B6.png",2048,439.7677144198365],"Core_Front-A7":["/res/panelsoil/zenith/1x/Core_Front-A7.png",2048,440.05532403673686],"Core_Front-B7":["/res/panelsoil/zenith/1x/Core_Front-B7.png",2048,464.46757941992854],"Core_Front-A8":["/res/panelsoil/zenith/1x/Core_Front-A8.png",2048,476.03984182546276],"Core_Front-B8":["/res/panelsoil/zenith/1x/Core_Front-B8.png",2048,494.08394952676616],"Core_Front-A9":["/res/panelsoil/zenith/1x/Core_Front-A9.png",2048,488.65923064369986],"Core_Front-B9":["/res/panelsoil/zenith/1x/Core_Front-B9.png",2048,517.1571803165235],"Core_Front-A10":["/res/panelsoil/zenith/1x/Core_Front-A10.png",2048,518.7017190728233],"Core_Front-B10":["/res/panelsoil/zenith/1x/Core_Front-B10.png",2048,529.3914816899648],"Corruption_A1-A1":["/res/panelsoil/zenith/1x/Corruption_A1-A1.png",2048,552.6035744772335],"Corruption_A1-B1":["/res/panelsoil/zenith/1x/Corruption_A1-B1.png",2048,577.1086872876225],"Corruption_A1-A2":["/res/panelsoil/zenith/1x/Corruption_A1-A2.png",2048,570.868673344454],"Corruption_A1-B2":["/res/panelsoil/zenith/1x/Corruption_A1-B2.png",2048,587.4915517081993],"Corruption_A1-A3":["/res/panelsoil/zenith/1x/Corruption_A1-A3.png",2048,613.88202660826],"Corruption_A1-B3":["/res/panelsoil/zenith/1x/Corruption_A1-B3.png",2048,627.0846380078374],"Corruption_B1-A1":["/res/panelsoil/zenith/1x/Corruption_B1-A1.png",2048,632.7557501001916],"Corruption_B1-B1":["/res/panelsoil/zenith/1x/Corruption_B1-B1.png",2048,634.5587055648784],"Corruption_B1-A2":["/res/panelsoil/zenith/1x/Corruption_B1-A2.png",2048,659.4878943276431],"Corruption_B1-B2":["/res/panelsoil/zenith/1x/Corruption_B1-B2.png",2048,654.0007602701533],"Corruption_B1-A3":["/res/panelsoil/zenith/1x/Corruption_B1-A3.png",2048,665.6420487946251],"Corruption_B1-B3":["/res/panelsoil/zenith/1x/Corruption_B1-B3.png",2048,689.8479205692521],"Corruption_B2-A1":["/res/panelsoil/zenith/1x/Corruption_B2-A1.png",2048,627.1593833635864],"Corruption_B2-B1":["/res/panelsoil/zenith/1x/Corruption_B2-B1.png",2048,638.0592351235996],"Corruption_B2-A2":["/res/panelsoil/zenith/1x/Corruption_B2-A2.png",2048,639.4672688084136],"Corruption_B2-B2":["/res/panelsoil/zenith/1x/Corruption_B2-B2.png",2048,666.0811779737485],"Corruption_B2-A3":["/res/panelsoil/zenith/1x/Corruption_B2-A3.png",2048,684.4668925940929],"Corruption_B2-B3":["/res/panelsoil/zenith/1x/Corruption_B2-B3.png",2048,684.6812541449234],"Corruption_C1-A1":["/res/panelsoil/zenith/1x/Corruption_C1-A1.png",2048,672.8613548098398],"Corruption_C1-B1":["/res/panelsoil/zenith/1x/Corruption_C1-B1.png",2048,681.4848546420221],"Corruption_C1-A2":["/res/panelsoil/zenith/1x/Corruption_C1-A2.png",2048,684.3034338326243],"Corruption_C1-B2":["/res/panelsoil/zenith/1x/Corruption_C1-B2.png",2048,703.8906712469515],"Corruption_C1-A3":["/res/panelsoil/zenith/1x/Corruption_C1-A3.png",2048,712.1789777299764],"Corruption_C1-B3":["/res/panelsoil/zenith/1x/Corruption_C1-B3.png",2048,725.2824683831379],"Corruption_C2-A1":["/res/panelsoil/zenith/1x/Corruption_C2-A1.png",2048,674.1180463255023],"Corruption_C2-B1":["/res/panelsoil/zenith/1x/Corruption_C2-B1.png",2048,684.7899807610211],"Corruption_C2-A2":["/res/panelsoil/zenith/1x/Corruption_C2-A2.png",2048,698.7923145521503],"Corruption_C2-B2":["/res/panelsoil/zenith/1x/Corruption_C2-B2.png",2048,702.6643601044423],"Corruption_C2-A3":["/res/panelsoil/zenith/1x/Corruption_C2-A3.png",2048,717.4423424967339],"Corruption_D1-A1":["/res/panelsoil/zenith/1x/Corruption_D1-A1.png",2048,780.8712793137977],"Corruption_D1-B1":["/res/panelsoil/zenith/1x/Corruption_D1-B1.png",2048,798.6290041284157],"Corruption_D1-A2":["/res/panelsoil/zenith/1x/Corruption_D1-A2.png",2048,818.3808179046426],"Corruption_D1-B2":["/res/panelsoil/zenith/1x/Corruption_D1-B2.png",2048,832.3377236316311],"Corruption_D1-A3":["/res/panelsoil/zenith/1x/Corruption_D1-A3.png",2048,835.0789409975287],"Corruption_D1-B3":["/res/panelsoil/zenith/1x/Corruption_D1-B3.png",2048,858.4721490823579],"Corruption_D2-A1":["/res/panelsoil/zenith/1x/Corruption_D2-A1.png",2048,790.7060549854688],"Corruption_D2-B1":["/res/panelsoil/zenith/1x/Corruption_D2-B1.png",2048,787.9576241960699],"Corruption_D2-A2":["/res/panelsoil/zenith/1x/Corruption_D2-A2.png",2048,797.6726614109335],"Corruption_D2-B2":["/res/panelsoil/zenith/1x/Corruption_D2-B2.png",2048,811.0158862709748],"Corruption_D2-A3":["/res/panelsoil/zenith/1x/Corruption_D2-A3.png",2048,846.2089621336063],"Corruption_D2-B3":["/res/panelsoil/zenith/1x/Corruption_D2-B3.png",2048,849.5968441405913],"Corruption_Front-A1":["/res/panelsoil/zenith/1x/Corruption_Front-A1.png",2048,549.9336461597222],"Corruption_Front-B1":["/res/panelsoil/zenith/1x/Corruption_Front-B1.png",2048,554.395759013717],"Corruption_Front-A2":["/res/panelsoil/zenith/1x/Corruption_Front-A2.png",2048,564.7086327671394],"Corruption_Front-B2":["/res/panelsoil/zenith/1x/Corruption_Front-B2.png",2048,577.5065159668583],"Corruption_Front-A3":["/res/panelsoil/zenith/1x/Corruption_Front-A3.png",2048,598.0274867845895],"Corruption_Front-B3":["/res/panelsoil/zenith/1x/Corruption_Front-B3.png",2048,602.7450097548516],"Corruption_Front-A4":["/res/panelsoil/zenith/1x/Corruption_Front-A4.png",2048,629.9384706336725],"Corruption_Front-B4":["/res/panelsoil/zenith/1x/Corruption_Front-B4.png",2048,640.9639002516187],"Corruption_Front-A5":["/res/panelsoil/zenith/1x/Corruption_Front-A5.png",2048,655.0664682178176],"Corruption_Front-B5":["/res/panelsoil/zenith/1x/Corruption_Front-B5.png",2048,662.2120840193105],"Corruption_Front-A6":["/res/panelsoil/zenith/1x/Corruption_Front-A6.png",2048,672.2033193065961],"Corruption_Front-B6":["/res/panelsoil/zenith/1x/Corruption_Front-B6.png",2048,696.628593690347],"Corruption_Front-A7":["/res/panelsoil/zenith/1x/Corruption_Front-A7.png",2048,708.3887380984565],"Corruption_Front-B7":["/res/panelsoil/zenith/1x/Corruption_Front-B7.png",2048,721.9254461128296],"Corruption_Front-A8":["/res/panelsoil/zenith/1x/Corruption_Front-A8.png",2048,715.2762835037453],"Corruption_Front-B8":["/res/panelsoil/zenith/1x/Corruption_Front-B8.png",2048,735.6768923082788],"Corruption_Front-A9":["/res/panelsoil/zenith/1x/Corruption_Front-A9.png",2048,751.001724548076],"Corruption_Front-B9":["/res/panelsoil/zenith/1x/Corruption_Front-B9.png",2048,771.2479539041593],"Corruption_Front-A10":["/res/panelsoil/zenith/1x/Corruption_Front-A10.png",2048,783.1102743843746],"Corruption_Front-B10":["/res/panelsoil/zenith/1x/Corruption_Front-B10.png",2048,780.4448671330541],"Corruption_Front-A11":["/res/panelsoil/zenith/1x/Corruption_Front-A11.png",2048,805.6192796360431],"Corruption_Front-B11":["/res/panelsoil/zenith/1x/Corruption_Front-B11.png",2048,808.8174963836168],"Hall_1A-A1":["/res/panelsoil/zenith/1x/Hall_1A-A1.png",2048,-792.7426474611042],"Hall_1A-B1":["/res/panelsoil/zenith/1x/Hall_1A-B1.png",2048,-778.1223335891968],"Hall_1A-A2":["/res/panelsoil/zenith/1x/Hall_1A-A2.png",2048,-777.1814427804593],"Hall_1A-B2":["/res/panelsoil/zenith/1x/Hall_1A-B2.png",2048,-774.8147412169419],"Hall_Front-A1":["/res/panelsoil/zenith/1x/Hall_Front-A1.png",2048,-809.0107876267627],"Hall_Front-B1":["/res/panelsoil/zenith/1x/Hall_Front-B1.png",2048,-781.186717925707],"Hall_Front-A2":["/res/panelsoil/zenith/1x/Hall_Front-A2.png",2048,-772.841332980647],"Hall_Front-B2":["/res/panelsoil/zenith/1x/Hall_Front-B2.png",2048,-769.3227487078938],"Hotel_A1-A1":["/res/panelsoil/zenith/1x/Hotel_A1-A1.png",2048,-743.3661161595885],"Hotel_A1-B1":["/res/panelsoil/zenith/1x/Hotel_A1-B1.png",2048,-749.621964728818],"Hotel_A1-A2":["/res/panelsoil/zenith/1x/Hotel_A1-A2.png",2048,-721.1970049101365],"Hotel_A1-B2":["/res/panelsoil/zenith/1x/Hotel_A1-B2.png",2048,-717.9983589493704],"Hotel_A1-A3":["/res/panelsoil/zenith/1x/Hotel_A1-A3.png",2048,-699.5137590248353],"Hotel_A1-B3":["/res/panelsoil/zenith/1x/Hotel_A1-B3.png",2048,-687.9914589954271],"Hotel_B1-A1":["/res/panelsoil/zenith/1x/Hotel_B1-A1.png",2048,-678.3162066533166],"Hotel_B1-B1":["/res/panelsoil/zenith/1x/Hotel_B1-B1.png",2048,-668.2821291370177],"Hotel_B1-A2":["/res/panelsoil/zenith/1x/Hotel_B1-A2.png",2048,-656.1835304385772],"Hotel_B1-B2":["/res/panelsoil/zenith/1x/Hotel_B1-B2.png",2048,-631.9378938673364],"Hotel_Back1-A1":["/res/panelsoil/zenith/1x/Hotel_Back1-A1.png",2048,-751.7974310479055],"Hotel_Back1-B1":["/res/panelsoil/zenith/1x/Hotel_Back1-B1.png",2048,-741.7942321779208],"Hotel_Back1-A2":["/res/panelsoil/zenith/1x/Hotel_Back1-A2.png",2048,-727.3339947507666],"Hotel_Back1-B2":["/res/panelsoil/zenith/1x/Hotel_Back1-B2.png",2048,-718.621630997955],"Hotel_Back2-A1":["/res/panelsoil/zenith/1x/Hotel_Back2-A1.png",2048,-748.1653157824396],"Hotel_Back2-B1":["/res/panelsoil/zenith/1x/Hotel_Back2-B1.png",2048,-728.258451748148],"Hotel_Back2-A2":["/res/panelsoil/zenith/1x/Hotel_Back2-A2.png",2048,-724.381173282849],"Hotel_Back2-B2":["/res/panelsoil/zenith/1x/Hotel_Back2-B2.png",2048,-723.9805360963019],"Hotel_Front-A1":["/res/panelsoil/zenith/1x/Hotel_Front-A1.png",2048,-744.9306078924976],"Hotel_Front-B1":["/res/panelsoil/zenith/1x/Hotel_Front-B1.png",2048,-728.4809831796285],"Hotel_Front-A2":["/res/panelsoil/zenith/1x/Hotel_Front-A2.png",2048,-718.9693575439796],"Hotel_Front-B2":["/res/panelsoil/zenith/1x/Hotel_Front-B2.png",2048,-721.4756480703314],"Hotel_Front-A3":["/res/panelsoil/zenith/1x/Hotel_Front-A3.png",2048,-694.8720807520282],"Hotel_Front-B3":["/res/panelsoil/zenith/1x/Hotel_Front-B3.png",2048,-684.1636181713352],"Hotel_Front-A4":["/res/panelsoil/zenith/1x/Hotel_Front-A4.png",2048,-674.5443378185385],"Hotel_Front-B4":["/res/panelsoil/zenith/1x/Hotel_Front-B4.png",2048,-669.8322443010271],"Lab_A1-A1":["/res/panelsoil/zenith/1x/Lab_A1-A1.png",2048,67.35341215641212],"Lab_A1-B1":["/res/panelsoil/zenith/1x/Lab_A1-B1.png",2048,91.86742124622855],"Lab_A1-A2":["/res/panelsoil/zenith/1x/Lab_A1-A2.png",2048,99.42957681253691],"Lab_A1-B2":["/res/panelsoil/zenith/1x/Lab_A1-B2.png",2048,108.35231150685266],"Lab_A1-A3":["/res/panelsoil/zenith/1x/Lab_A1-A3.png",2048,130.40726544953318],"Lab_A1-B3":["/res/panelsoil/zenith/1x/Lab_A1-B3.png",2048,129.76453511783367],"Lab_A1-A4":["/res/panelsoil/zenith/1x/Lab_A1-A4.png",2048,159.53693462115626],"Lab_A1-B4":["/res/panelsoil/zenith/1x/Lab_A1-B4.png",2048,159.1526445657848],"Lab_A2-A1":["/res/panelsoil/zenith/1x/Lab_A2-A1.png",2048,80.1489193317615],"Lab_A2-B1":["/res/panelsoil/zenith/1x/Lab_A2-B1.png",2048,90.28316359967047],"Lab_A2-A2":["/res/panelsoil/zenith/1x/Lab_A2-A2.png",2048,102.3701475007704],"Lab_A2-B2":["/res/panelsoil/zenith/1x/Lab_A2-B2.png",2048,107.86671390966595],"Lab_A2-A3":["/res/panelsoil/zenith/1x/Lab_A2-A3.png",2048,132.02014816007087],"Lab_A2-B3":["/res/panelsoil/zenith/1x/Lab_A2-B3.png",2048,151.640288167214],"Lab_A2-A4":["/res/panelsoil/zenith/1x/Lab_A2-A4.png",2048,157.19775529030903],"Lab_A2-B4":["/res/panelsoil/zenith/1x/Lab_A2-B4.png",2048,157.06542850318408],"Lab_B1-A1":["/res/panelsoil/zenith/1x/Lab_B1-A1.png",2048,178.11340303671696],"Lab_B1-B1":["/res/panelsoil/zenith/1x/Lab_B1-B1.png",2048,201.6184610278707],"Lab_B1-A2":["/res/panelsoil/zenith/1x/Lab_B1-A2.png",2048,209.3031714446414],"Lab_B1-B2":["/res/panelsoil/zenith/1x/Lab_B1-B2.png",2048,226.6604107446418],"Lab_B1-A3":["/res/panelsoil/zenith/1x/Lab_B1-A3.png",2048,237.86623312197275],"Lab_B1-B3":["/res/panelsoil/zenith/1x/Lab_B1-B3.png",2048,249.6666895744786],"Lab_C1-A1":["/res/panelsoil/zenith/1x/Lab_C1-A1.png",2048,236.29223217291485],"Lab_C1-B1":["/res/panelsoil/zenith/1x/Lab_C1-B1.png",2048,239.3326214951054],"Lab_C1-A2":["/res/panelsoil/zenith/1x/Lab_C1-A2.png",2048,259.31938387452936],"Lab_C1-B2":["/res/panelsoil/zenith/1x/Lab_C1-B2.png",2048,274.65754538202566],"Lab_C1-A3":["/res/panelsoil/zenith/1x/Lab_C1-A3.png",2048,280.65443394522805],"Lab_C1-B3":["/res/panelsoil/zenith/1x/Lab_C1-B3.png",2048,294.53266890367274],"Lab_Front-A1":["/res/panelsoil/zenith/1x/Lab_Front-A1.png",2048,47.448217408459186],"Lab_Front-B1":["/res/panelsoil/zenith/1x/Lab_Front-B1.png",2048,50.807773594202146],"Lab_Front-A2":["/res/panelsoil/zenith/1x/Lab_Front-A2.png",2048,86.33299946776879],"Lab_Front-B2":["/res/panelsoil/zenith/1x/Lab_Front-B2.png",2048,97.12786710442151],"Lab_Front-A3":["/res/panelsoil/zenith/1x/Lab_Front-A3.png",2048,109.47699835020572],"Lab_Front-B3":["/res/panelsoil/zenith/1x/Lab_Front-B3.png",2048,102.58787602517538],"Lab_Front-A4":["/res/panelsoil/zenith/1x/Lab_Front-A4.png",2048,122.67635934114716],"Lab_Front-B4":["/res/panelsoil/zenith/1x/Lab_Front-B4.png",2048,147.20442165948793],"Lab_Front-A5":["/res/panelsoil/zenith/1x/Lab_Front-A5.png",2048,153.37515522136192],"Lab_Front-B5":["/res/panelsoil/zenith/1x/Lab_Front-B5.png",2048,165.2267243041752],"Lab_Front-A6":["/res/panelsoil/zenith/1x/Lab_Front-A6.png",2048,165.435564976872],"Lab_Front-B6":["/res/panelsoil/zenith/1x/Lab_Front-B6.png",2048,198.73683293064735],"Lab_Front-A7":["/res/panelsoil/zenith/1x/Lab_Front-A7.png",2048,196.87865540718778],"Lab_Front-B7":["/res/panelsoil/zenith/1x/Lab_Front-B7.png",2048,222.7227344610232],"Lab_Front-A8":["/res/panelsoil/zenith/1x/Lab_Front-A8.png",2048,227.94263091084156],"Lab_Front-B8":["/res/panelsoil/zenith/1x/Lab_Front-B8.png",2048,239.3641528393968],"Lab_Front-A9":["/res/panelsoil/zenith/1x/Lab_Front-A9.png",2048,246.54743170332978],"Lab_Front-B9":["/res/panelsoil/zenith/1x/Lab_Front-B9.png",2048,257.24041617466924],"Lab_Front-A10":["/res/panelsoil/zenith/1x/Lab_Front-A10.png",2048,264.24369224532336],"Lab_Front-B10":["/res/panelsoil/zenith/1x/Lab_Front-B10.png",2048,290.34545951134083],"Museum_A1-A1":["/res/panelsoil/zenith/1x/Museum_A1-A1.png",2048,-358.26795373805174],"Museum_A1-B1":["/res/panelsoil/zenith/1x/Museum_A1-B1.png",2048,-346.7820508324],"Museum_A1-A2":["/res/panelsoil/zenith/1x/Museum_A1-A2.png",2048,-336.143577025795],"Museum_A1-B2":["/res/panelsoil/zenith/1x/Museum_A1-B2.png",2048,-320.1775309112393],"Museum_A1-A3":["/res/panelsoil/zenith/1x/Museum_A1-A3.png",2048,-299.57001292035966],"Museum_A1-B3":["/res/panelsoil/zenith/1x/Museum_A1-B3.png",2048,-285.86837605455145],"Museum_B1-A1":["/res/panelsoil/zenith/1x/Museum_B1-A1.png",2048,-274.4513992679914],"Museum_B1-B1":["/res/panelsoil/zenith/1x/Museum_B1-B1.png",2048,-255.98591038751027],"Museum_B1-A2":["/res/panelsoil/zenith/1x/Museum_B1-A2.png",2048,-247.47808605213274],"Museum_B1-B2":["/res/panelsoil/zenith/1x/Museum_B1-B2.png",2048,-241.63666341206192],"Museum_B1-A3":["/res/panelsoil/zenith/1x/Museum_B1-A3.png",2048,-241.92742213544162],"Museum_B1-B3":["/res/panelsoil/zenith/1x/Museum_B1-B3.png",2048,-221.75474688645465],"Museum_C1-A1":["/res/panelsoil/zenith/1x/Museum_C1-A1.png",2048,-213.19610532589635],"Museum_C1-B1":["/res/panelsoil/zenith/1x/Museum_C1-B1.png",2048,-195.70599508992893],"Museum_C1-A2":["/res/panelsoil/zenith/1x/Museum_C1-A2.png",2048,-189.25278869176708],"Museum_C1-B2":["/res/panelsoil/zenith/1x/Museum_C1-B2.png",2048,-179.0275720913047],"Museum_C1-A3":["/res/panelsoil/zenith/1x/Museum_C1-A3.png",2048,-155.20006421802233],"Museum_C1-B3":["/res/panelsoil/zenith/1x/Museum_C1-B3.png",2048,-146.98249979678096],"Museum_C2-A1":["/res/panelsoil/zenith/1x/Museum_C2-A1.png",2048,-198.0231410445494],"Museum_C2-B1":["/res/panelsoil/zenith/1x/Museum_C2-B1.png",2048,-208.8092094802223],"Museum_C2-A2":["/res/panelsoil/zenith/1x/Museum_C2-A2.png",2048,-180.7445215120516],"Museum_C2-B2":["/res/panelsoil/zenith/1x/Museum_C2-B2.png",2048,-166.71115997723234],"Museum_C2-A3":["/res/panelsoil/zenith/1x/Museum_C2-A3.png",2048,-152.4668515046003],"Museum_C2-B3":["/res/panelsoil/zenith/1x/Museum_C2-B3.png",2048,-156.70904821569817],"Museum_Front-A1":["/res/panelsoil/zenith/1x/Museum_Front-A1.png",2048,-344.5529336524014],"Museum_Front-B1":["/res/panelsoil/zenith/1x/Museum_Front-B1.png",2048,-326.56631466846113],"Museum_Front-A2":["/res/panelsoil/zenith/1x/Museum_Front-A2.png",2048,-315.94706321471915],"Museum_Front-B2":["/res/panelsoil/zenith/1x/Museum_Front-B2.png",2048,-323.9538573432688],"Museum_Front-A3":["/res/panelsoil/zenith/1x/Museum_Front-A3.png",2048,-310.9159953165584],"Museum_Front-B3":["/res/panelsoil/zenith/1x/Museum_Front-B3.png",2048,-284.0274848858467],"Museum_Front-A4":["/res/panelsoil/zenith/1x/Museum_Front-A4.png",2048,-280.9719921854486],"Museum_Front-B4":["/res/panelsoil/zenith/1x/Museum_Front-B4.png",2048,-263.68487306701115],"Museum_Front-A5":["/res/panelsoil/zenith/1x/Museum_Front-A5.png",2048,-261.36703124942926],"Museum_Front-B5":["/res/panelsoil/zenith/1x/Museum_Front-B5.png",2048,-241.9782275987339],"Museum_Front-A6":["/res/panelsoil/zenith/1x/Museum_Front-A6.png",2048,-227.3380690988996],"Museum_Front-B6":["/res/panelsoil/zenith/1x/Museum_Front-B6.png",2048,-221.42280006614587],"Museum_Front-A7":["/res/panelsoil/zenith/1x/Museum_Front-A7.png",2048,-207.03044397897852],"Museum_Front-B7":["/res/panelsoil/zenith/1x/Museum_Front-B7.png",2048,-196.89296777998518],"Museum_Front-A8":["/res/panelsoil/zenith/1x/Museum_Front-A8.png",2048,-166.90793050155597],"Museum_Front-B8":["/res/panelsoil/zenith/1x/Museum_Front-B8.png",2048,-165.23495410864868],"Office_A1-A1":["/res/panelsoil/zenith/1x/Office_A1-A1.png",2048,-142.30325061521162],"Office_A1-B1":["/res/panelsoil/zenith/1x/Office_A1-B1.png",2048,-143.97837377415306],"Office_A1-A2":["/res/panelsoil/zenith/1x/Office_A1-A2.png",2048,-110.85900015026219],"Office_A1-B2":["/res/panelsoil/zenith/1x/Office_A1-B2.png",2048,-108.58262882908922],"Office_A1-A3":["/res/panelsoil/zenith/1x/Office_A1-A3.png",2048,-104.99915291781129],"Office_A1-B3":["/res/panelsoil/zenith/1x/Office_A1-B3.png",2048,-93.46985132268932],"Office_A1-A4":["/res/panelsoil/zenith/1x/Office_A1-A4.png",2048,-58.11047608482373],"Office_A1-B4":["/res/panelsoil/zenith/1x/Office_A1-B4.png",2048,-66.72297146561866],"Office_B1-A1":["/res/panelsoil/zenith/1x/Office_B1-A1.png",2048,-52.25124058072517],"Office_B1-B1":["/res/panelsoil/zenith/1x/Office_B1-B1.png",2048,-27.072046352905986],"Office_B1-A2":["/res/panelsoil/zenith/1x/Office_B1-A2.png",2048,-30.21799867211812],"Office_B1-B2":["/res/panelsoil/zenith/1x/Office_B1-B2.png",2048,.2672583895991849],"Office_B2-A1":["/res/panelsoil/zenith/1x/Office_B2-A1.png",2048,-45.209009397891094],"Office_B2-B1":["/res/panelsoil/zenith/1x/Office_B2-B1.png",2048,-25.934043645508215],"Office_B2-A2":["/res/panelsoil/zenith/1x/Office_B2-A2.png",2048,-23.137004736322158],"Office_B2-B2":["/res/panelsoil/zenith/1x/Office_B2-B2.png",2048,-6.6117683498954065],"Office_Front-A1":["/res/panelsoil/zenith/1x/Office_Front-A1.png",2048,-146.69173454029317],"Office_Front-B1":["/res/panelsoil/zenith/1x/Office_Front-B1.png",2048,-133.94869189097977],"Office_Front-A2":["/res/panelsoil/zenith/1x/Office_Front-A2.png",2048,-134.06623557000128],"Office_Front-B2":["/res/panelsoil/zenith/1x/Office_Front-B2.png",2048,-115.66211924755109],"Office_Front-A3":["/res/panelsoil/zenith/1x/Office_Front-A3.png",2048,-100.80718087211238],"Office_Front-B3":["/res/panelsoil/zenith/1x/Office_Front-B3.png",2048,-93.29272382255535],"Office_Front-A4":["/res/panelsoil/zenith/1x/Office_Front-A4.png",2048,-73.28677286160568],"Office_Front-B4":["/res/panelsoil/zenith/1x/Office_Front-B4.png",2048,-67.00934314909367],"Office_Front-A5":["/res/panelsoil/zenith/1x/Office_Front-A5.png",2048,-62.42162063039986],"Office_Front-B5":["/res/panelsoil/zenith/1x/Office_Front-B5.png",2048,-44.28503090042945],"Office_Front-A6":["/res/panelsoil/zenith/1x/Office_Front-A6.png",2048,-33.01408859371898],"Office_Front-B6":["/res/panelsoil/zenith/1x/Office_Front-B6.png",2048,-.763732389572418],"Office_Front-A7":["/res/panelsoil/zenith/1x/Office_Front-A7.png",2048,-5.923579370313092],"Office_Front-B7":["/res/panelsoil/zenith/1x/Office_Front-B7.png",2048,13.034445769290514],"Office_Front-A8":["/res/panelsoil/zenith/1x/Office_Front-A8.png",2048,31.41262540032244],"Office_Front-B8":["/res/panelsoil/zenith/1x/Office_Front-B8.png",2048,42.156964301672055],"Platform_Back-A1":["/res/panelsoil/zenith/1x/Platform_Back-A1.png",2048,855.2845695231923],"Platform_Back-B1":["/res/panelsoil/zenith/1x/Platform_Back-B1.png",2048,871.3965790013674],"Platform_Back-A2":["/res/panelsoil/zenith/1x/Platform_Back-A2.png",2048,881.8768104007128],"Platform_Back-B2":["/res/panelsoil/zenith/1x/Platform_Back-B2.png",2048,885.6369449014405],"Platform_Front-A1":["/res/panelsoil/zenith/1x/Platform_Front-A1.png",2048,845.1938926295378],"Platform_Front-B1":["/res/panelsoil/zenith/1x/Platform_Front-B1.png",2048,871.3078548488031],"Platform_Front-A2":["/res/panelsoil/zenith/1x/Platform_Front-A2.png",2048,872.7820515364266],"Platform_Front-B2":["/res/panelsoil/zenith/1x/Platform_Front-B2.png",2048,895.7862985278023]},"2x":{"Arena_A1-A1":["/res/panelsoil/zenith/2x/Arena_A1-A1.png",1024,-94.17506624023524],"Arena_A1-B1":["/res/panelsoil/zenith/2x/Arena_A1-B1.png",1024,-102.45151210286059],"Arena_A1-C1":["/res/panelsoil/zenith/2x/Arena_A1-C1.png",1024,-89.60573050208072],"Arena_A1-D1":["/res/panelsoil/zenith/2x/Arena_A1-D1.png",1024,-91.6709114593479],"Arena_A1-A2":["/res/panelsoil/zenith/2x/Arena_A1-A2.png",1024,-91.85876310256508],"Arena_A1-B2":["/res/panelsoil/zenith/2x/Arena_A1-B2.png",1024,-87.24120104809408],"Arena_A1-C2":["/res/panelsoil/zenith/2x/Arena_A1-C2.png",1024,-85.44944630681051],"Arena_A1-D2":["/res/panelsoil/zenith/2x/Arena_A1-D2.png",1024,-79.90579721978605],"Arena_A1-A3":["/res/panelsoil/zenith/2x/Arena_A1-A3.png",1024,-81.04688158306554],"Arena_A1-B3":["/res/panelsoil/zenith/2x/Arena_A1-B3.png",1024,-72.10082092315834],"Arena_A1-C3":["/res/panelsoil/zenith/2x/Arena_A1-C3.png",1024,-64.5541568598089],"Arena_A1-D3":["/res/panelsoil/zenith/2x/Arena_A1-D3.png",1024,-69.36232504677508],"Arena_A1-A4":["/res/panelsoil/zenith/2x/Arena_A1-A4.png",1024,-62.87550535733181],"Arena_A1-B4":["/res/panelsoil/zenith/2x/Arena_A1-B4.png",1024,-54.881689562190715],"Arena_A1-C4":["/res/panelsoil/zenith/2x/Arena_A1-C4.png",1024,-50.036012596461475],"Arena_A1-D4":["/res/panelsoil/zenith/2x/Arena_A1-D4.png",1024,-50.01225082103183],"Arena_A1-A5":["/res/panelsoil/zenith/2x/Arena_A1-A5.png",1024,-44.26076902621391],"Arena_A1-B5":["/res/panelsoil/zenith/2x/Arena_A1-B5.png",1024,-50.67192544209242],"Arena_A1-C5":["/res/panelsoil/zenith/2x/Arena_A1-C5.png",1024,-49.34745312833827],"Arena_A1-D5":["/res/panelsoil/zenith/2x/Arena_A1-D5.png",1024,-44.4422467687523],"Arena_B1-A1":["/res/panelsoil/zenith/2x/Arena_B1-A1.png",1024,-50.92464078029808],"Arena_B1-B1":["/res/panelsoil/zenith/2x/Arena_B1-B1.png",1024,-41.12853390020983],"Arena_B1-C1":["/res/panelsoil/zenith/2x/Arena_B1-C1.png",1024,-44.15944099869237],"Arena_B1-D1":["/res/panelsoil/zenith/2x/Arena_B1-D1.png",1024,-34.917881693593316],"Arena_B1-A2":["/res/panelsoil/zenith/2x/Arena_B1-A2.png",1024,-36.66685832960262],"Arena_B1-B2":["/res/panelsoil/zenith/2x/Arena_B1-B2.png",1024,-27.80337300972257],"Arena_B1-C2":["/res/panelsoil/zenith/2x/Arena_B1-C2.png",1024,-27.532551982204634],"Arena_B1-D2":["/res/panelsoil/zenith/2x/Arena_B1-D2.png",1024,-27.978809106588198],"Arena_B1-A3":["/res/panelsoil/zenith/2x/Arena_B1-A3.png",1024,-24.70071524266034],"Arena_B1-B3":["/res/panelsoil/zenith/2x/Arena_B1-B3.png",1024,-18.02081075226583],"Arena_B1-C3":["/res/panelsoil/zenith/2x/Arena_B1-C3.png",1024,-7.8713659049294105],"Arena_B1-D3":["/res/panelsoil/zenith/2x/Arena_B1-D3.png",1024,-9.060994697957707],"Arena_B1-A4":["/res/panelsoil/zenith/2x/Arena_B1-A4.png",1024,-4.250124387164831],"Arena_B1-B4":["/res/panelsoil/zenith/2x/Arena_B1-B4.png",1024,1.6650554516072678],"Arena_B1-C4":["/res/panelsoil/zenith/2x/Arena_B1-C4.png",1024,1.0482695499292252],"Arena_B1-D4":["/res/panelsoil/zenith/2x/Arena_B1-D4.png",1024,.8533305656924819],"Arena_B1-A5":["/res/panelsoil/zenith/2x/Arena_B1-A5.png",1024,6.102363053766801],"Arena_B1-B5":["/res/panelsoil/zenith/2x/Arena_B1-B5.png",1024,2.2982435788127216],"Arena_B1-C5":["/res/panelsoil/zenith/2x/Arena_B1-C5.png",1024,13.785179524134005],"Arena_B1-D5":["/res/panelsoil/zenith/2x/Arena_B1-D5.png",1024,15.996119831990473],"Arena_B2-A1":["/res/panelsoil/zenith/2x/Arena_B2-A1.png",1024,-44.91993612994293],"Arena_B2-B1":["/res/panelsoil/zenith/2x/Arena_B2-B1.png",1024,-45.067407694341625],"Arena_B2-C1":["/res/panelsoil/zenith/2x/Arena_B2-C1.png",1024,-34.13936260323553],"Arena_B2-D1":["/res/panelsoil/zenith/2x/Arena_B2-D1.png",1024,-32.040735539170896],"Arena_B2-A2":["/res/panelsoil/zenith/2x/Arena_B2-A2.png",1024,-32.28808078818133],"Arena_B2-B2":["/res/panelsoil/zenith/2x/Arena_B2-B2.png",1024,-32.56031624536317],"Arena_B2-C2":["/res/panelsoil/zenith/2x/Arena_B2-C2.png",1024,-23.6086111530277],"Arena_B2-D2":["/res/panelsoil/zenith/2x/Arena_B2-D2.png",1024,-27.927366221014726],"Arena_B2-A3":["/res/panelsoil/zenith/2x/Arena_B2-A3.png",1024,-22.753993984406193],"Arena_B2-B3":["/res/panelsoil/zenith/2x/Arena_B2-B3.png",1024,-17.812576272174784],"Arena_B2-C3":["/res/panelsoil/zenith/2x/Arena_B2-C3.png",1024,-12.548466172270649],"Arena_B2-D3":["/res/panelsoil/zenith/2x/Arena_B2-D3.png",1024,-16.62231215343865],"Arena_B3-A1":["/res/panelsoil/zenith/2x/Arena_B3-A1.png",1024,-34.13998419703324],"Arena_B3-B1":["/res/panelsoil/zenith/2x/Arena_B3-B1.png",1024,-27.91161079333922],"Arena_B3-C1":["/res/panelsoil/zenith/2x/Arena_B3-C1.png",1024,-32.83135496789431],"Arena_B3-D1":["/res/panelsoil/zenith/2x/Arena_B3-D1.png",1024,-23.892364353758392],"Arena_B3-A2":["/res/panelsoil/zenith/2x/Arena_B3-A2.png",1024,-26.604014097597936],"Arena_B3-B2":["/res/panelsoil/zenith/2x/Arena_B3-B2.png",1024,-22.396561115701655],"Arena_B3-C2":["/res/panelsoil/zenith/2x/Arena_B3-C2.png",1024,-10.128857655332595],"Arena_B3-D2":["/res/panelsoil/zenith/2x/Arena_B3-D2.png",1024,-12.978511347052283],"Arena_B3-A3":["/res/panelsoil/zenith/2x/Arena_B3-A3.png",1024,-14.21752357822287],"Arena_B3-C3":["/res/panelsoil/zenith/2x/Arena_B3-C3.png",1024,3.491502367260331],"Arena_B3-D3":["/res/panelsoil/zenith/2x/Arena_B3-D3.png",1024,5.782692244959257],"Arena_B3-A4":["/res/panelsoil/zenith/2x/Arena_B3-A4.png",1024,-.3300531923567753],"Arena_B3-D4":["/res/panelsoil/zenith/2x/Arena_B3-D4.png",1024,11.5018746436292],"Arena_B3-A5":["/res/panelsoil/zenith/2x/Arena_B3-A5.png",1024,15.444265420089039],"Arena_B3-D5":["/res/panelsoil/zenith/2x/Arena_B3-D5.png",1024,26.324643491377884],"Arena_C1-B1":["/res/panelsoil/zenith/2x/Arena_C1-B1.png",1024,29.85429953942932],"Arena_C1-C1":["/res/panelsoil/zenith/2x/Arena_C1-C1.png",1024,40.99231590442686],"Arena_C1-B2":["/res/panelsoil/zenith/2x/Arena_C1-B2.png",1024,48.11799816547735],"Arena_C1-C2":["/res/panelsoil/zenith/2x/Arena_C1-C2.png",1024,50.56108102938489],"Arena_Front-A1":["/res/panelsoil/zenith/2x/Arena_Front-A1.png",1024,-104.07036391041017],"Arena_Front-B1":["/res/panelsoil/zenith/2x/Arena_Front-B1.png",1024,-91.18349266895902],"Arena_Front-C1":["/res/panelsoil/zenith/2x/Arena_Front-C1.png",1024,-94.5723120645956],"Arena_Front-D1":["/res/panelsoil/zenith/2x/Arena_Front-D1.png",1024,-85.3695550000634],"Arena_Front-A2":["/res/panelsoil/zenith/2x/Arena_Front-A2.png",1024,-89.08389828269347],"Arena_Front-B2":["/res/panelsoil/zenith/2x/Arena_Front-B2.png",1024,-80.38803279903138],"Arena_Front-C2":["/res/panelsoil/zenith/2x/Arena_Front-C2.png",1024,-76.34142128118397],"Arena_Front-D2":["/res/panelsoil/zenith/2x/Arena_Front-D2.png",1024,-79.32838004501423],"Arena_Front-A3":["/res/panelsoil/zenith/2x/Arena_Front-A3.png",1024,-69.48657117773719],"Arena_Front-B3":["/res/panelsoil/zenith/2x/Arena_Front-B3.png",1024,-68.09194333157551],"Arena_Front-C3":["/res/panelsoil/zenith/2x/Arena_Front-C3.png",1024,-68.15989808224201],"Arena_Front-D3":["/res/panelsoil/zenith/2x/Arena_Front-D3.png",1024,-64.45673579285148],"Arena_Front-A4":["/res/panelsoil/zenith/2x/Arena_Front-A4.png",1024,-57.290601815999146],"Arena_Front-B4":["/res/panelsoil/zenith/2x/Arena_Front-B4.png",1024,-58.32086815035504],"Arena_Front-C4":["/res/panelsoil/zenith/2x/Arena_Front-C4.png",1024,-61.24700099135249],"Arena_Front-D4":["/res/panelsoil/zenith/2x/Arena_Front-D4.png",1024,-51.337133111470365],"Arena_Front-A5":["/res/panelsoil/zenith/2x/Arena_Front-A5.png",1024,-51.175984956377576],"Arena_Front-B5":["/res/panelsoil/zenith/2x/Arena_Front-B5.png",1024,-48.22662226419867],"Arena_Front-C5":["/res/panelsoil/zenith/2x/Arena_Front-C5.png",1024,-43.556664137252255],"Arena_Front-D5":["/res/panelsoil/zenith/2x/Arena_Front-D5.png",1024,-45.93920565352982],"Arena_Front-A6":["/res/panelsoil/zenith/2x/Arena_Front-A6.png",1024,-35.466192328188754],"Arena_Front-B6":["/res/panelsoil/zenith/2x/Arena_Front-B6.png",1024,-36.43090585591729],"Arena_Front-C6":["/res/panelsoil/zenith/2x/Arena_Front-C6.png",1024,-27.362912591483205],"Arena_Front-D6":["/res/panelsoil/zenith/2x/Arena_Front-D6.png",1024,-27.191816215725716],"Arena_Front-A7":["/res/panelsoil/zenith/2x/Arena_Front-A7.png",1024,-23.557995626118572],"Arena_Front-B7":["/res/panelsoil/zenith/2x/Arena_Front-B7.png",1024,-24.532579962250228],"Arena_Front-C7":["/res/panelsoil/zenith/2x/Arena_Front-C7.png",1024,-15.481071040811292],"Arena_Front-D7":["/res/panelsoil/zenith/2x/Arena_Front-D7.png",1024,-16.140030335651648],"Arena_Front-A8":["/res/panelsoil/zenith/2x/Arena_Front-A8.png",1024,-8.01118251148793],"Arena_Front-D8":["/res/panelsoil/zenith/2x/Arena_Front-D8.png",1024,-5.234773489986141],"Arena_Front-A9":["/res/panelsoil/zenith/2x/Arena_Front-A9.png",1024,-1.8773602865253203],"Arena_Front-B9":["/res/panelsoil/zenith/2x/Arena_Front-B9.png",1024,-.10872007982345178],"Arena_Front-C9":["/res/panelsoil/zenith/2x/Arena_Front-C9.png",1024,4.685038675868963],"Arena_Front-D9":["/res/panelsoil/zenith/2x/Arena_Front-D9.png",1024,12.20835126114791],"Arena_Front-A10":["/res/panelsoil/zenith/2x/Arena_Front-A10.png",1024,7.854659512862181],"Arena_Front-B10":["/res/panelsoil/zenith/2x/Arena_Front-B10.png",1024,13.203273461761263],"Arena_Front-C10":["/res/panelsoil/zenith/2x/Arena_Front-C10.png",1024,20.70265169530562],"Arena_Front-D10":["/res/panelsoil/zenith/2x/Arena_Front-D10.png",1024,17.863337786162194],"Arena_Front-A11":["/res/panelsoil/zenith/2x/Arena_Front-A11.png",1024,23.472109312567504],"Arena_Front-B11":["/res/panelsoil/zenith/2x/Arena_Front-B11.png",1024,23.451106885598502],"Arena_Front-C11":["/res/panelsoil/zenith/2x/Arena_Front-C11.png",1024,33.92787122952013],"Arena_Front-D11":["/res/panelsoil/zenith/2x/Arena_Front-D11.png",1024,31.998325661782964],"Arena_Front-A12":["/res/panelsoil/zenith/2x/Arena_Front-A12.png",1024,41.52568157276083],"Arena_Front-B12":["/res/panelsoil/zenith/2x/Arena_Front-B12.png",1024,34.86654399421511],"Arena_Front-C12":["/res/panelsoil/zenith/2x/Arena_Front-C12.png",1024,46.92211463453417],"Arena_Front-D12":["/res/panelsoil/zenith/2x/Arena_Front-D12.png",1024,48.636110772876904],"Casino_A1-A1":["/res/panelsoil/zenith/2x/Casino_A1-A1.png",1024,-252.5120127807477],"Casino_A1-B1":["/res/panelsoil/zenith/2x/Casino_A1-B1.png",1024,-248.5198762445763],"Casino_A1-C1":["/res/panelsoil/zenith/2x/Casino_A1-C1.png",1024,-247.6255605530584],"Casino_A1-A2":["/res/panelsoil/zenith/2x/Casino_A1-A2.png",1024,-240.00194220683935],"Casino_A1-B2":["/res/panelsoil/zenith/2x/Casino_A1-B2.png",1024,-236.23229157964784],"Casino_A1-C2":["/res/panelsoil/zenith/2x/Casino_A1-C2.png",1024,-231.97400772350446],"Casino_A1-A3":["/res/panelsoil/zenith/2x/Casino_A1-A3.png",1024,-229.84479796780008],"Casino_A1-B3":["/res/panelsoil/zenith/2x/Casino_A1-B3.png",1024,-221.5039956226853],"Casino_A1-C3":["/res/panelsoil/zenith/2x/Casino_A1-C3.png",1024,-217.9990002912889],"Casino_A1-A4":["/res/panelsoil/zenith/2x/Casino_A1-A4.png",1024,-209.27291984621],"Casino_A1-B4":["/res/panelsoil/zenith/2x/Casino_A1-B4.png",1024,-205.24718647211012],"Casino_A1-C4":["/res/panelsoil/zenith/2x/Casino_A1-C4.png",1024,-203.5633038333474],"Casino_A1-A5":["/res/panelsoil/zenith/2x/Casino_A1-A5.png",1024,-205.3252233097865],"Casino_A1-B5":["/res/panelsoil/zenith/2x/Casino_A1-B5.png",1024,-196.1235947015661],"Casino_A1-C5":["/res/panelsoil/zenith/2x/Casino_A1-C5.png",1024,-192.87694186718505],"Casino_A1-A6":["/res/panelsoil/zenith/2x/Casino_A1-A6.png",1024,-187.87114710215627],"Casino_A1-B6":["/res/panelsoil/zenith/2x/Casino_A1-B6.png",1024,-188.31947938676487],"Casino_A1-C6":["/res/panelsoil/zenith/2x/Casino_A1-C6.png",1024,-176.90796532489506],"Casino_A1-A7":["/res/panelsoil/zenith/2x/Casino_A1-A7.png",1024,-171.91378528294112],"Casino_A1-B7":["/res/panelsoil/zenith/2x/Casino_A1-B7.png",1024,-170.79144425613896],"Casino_A1-C7":["/res/panelsoil/zenith/2x/Casino_A1-C7.png",1024,-170.766840262564],"Casino_A1b-A1":["/res/panelsoil/zenith/2x/Casino_A1b-A1.png",1024,-247.1740259801876],"Casino_A1b-D1":["/res/panelsoil/zenith/2x/Casino_A1b-D1.png",1024,-242.3608297385482],"Casino_A1b-A2":["/res/panelsoil/zenith/2x/Casino_A1b-A2.png",1024,-239.42825237133047],"Casino_A1b-D2":["/res/panelsoil/zenith/2x/Casino_A1b-D2.png",1024,-228.24761498750365],"Casino_A1b-A3":["/res/panelsoil/zenith/2x/Casino_A1b-A3.png",1024,-221.3954881987472],"Casino_A1b-D3":["/res/panelsoil/zenith/2x/Casino_A1b-D3.png",1024,-217.68946814647109],"Casino_A1b-A4":["/res/panelsoil/zenith/2x/Casino_A1b-A4.png",1024,-218.3640143161516],"Casino_A1b-D4":["/res/panelsoil/zenith/2x/Casino_A1b-D4.png",1024,-199.29534850994355],"Casino_A1b-A5":["/res/panelsoil/zenith/2x/Casino_A1b-A5.png",1024,-203.5315320003698],"Casino_A1b-D5":["/res/panelsoil/zenith/2x/Casino_A1b-D5.png",1024,-189.75878744095232],"Casino_A1b-A6":["/res/panelsoil/zenith/2x/Casino_A1b-A6.png",1024,-187.99933071805611],"Casino_A1b-D6":["/res/panelsoil/zenith/2x/Casino_A1b-D6.png",1024,-183.64021790059027],"Casino_B1-A1":["/res/panelsoil/zenith/2x/Casino_B1-A1.png",1024,-131.52969412280652],"Casino_B1-B1":["/res/panelsoil/zenith/2x/Casino_B1-B1.png",1024,-130.04449612435116],"Casino_B1-C1":["/res/panelsoil/zenith/2x/Casino_B1-C1.png",1024,-126.47424149022346],"Casino_B1-D1":["/res/panelsoil/zenith/2x/Casino_B1-D1.png",1024,-121.75252069191683],"Casino_B1-A2":["/res/panelsoil/zenith/2x/Casino_B1-A2.png",1024,-115.72060526982997],"Casino_B1-B2":["/res/panelsoil/zenith/2x/Casino_B1-B2.png",1024,-114.19360875208763],"Casino_B1-C2":["/res/panelsoil/zenith/2x/Casino_B1-C2.png",1024,-114.08813816454843],"Casino_B1-D2":["/res/panelsoil/zenith/2x/Casino_B1-D2.png",1024,-106.81255834974316],"Casino_B1-A3":["/res/panelsoil/zenith/2x/Casino_B1-A3.png",1024,-109.04941547899337],"Casino_B1-B3":["/res/panelsoil/zenith/2x/Casino_B1-B3.png",1024,-106.11736966735992],"Casino_B1-C3":["/res/panelsoil/zenith/2x/Casino_B1-C3.png",1024,-107.37317519883868],"Casino_B1-D3":["/res/panelsoil/zenith/2x/Casino_B1-D3.png",1024,-103.19863533757959],"Casino_B1-A4":["/res/panelsoil/zenith/2x/Casino_B1-A4.png",1024,-95.19404241549759],"Casino_B1-B4":["/res/panelsoil/zenith/2x/Casino_B1-B4.png",1024,-92.30574812528796],"Casino_B1-C4":["/res/panelsoil/zenith/2x/Casino_B1-C4.png",1024,-94.4988266276208],"Casino_B1-D4":["/res/panelsoil/zenith/2x/Casino_B1-D4.png",1024,-86.42136335083534],"Casino_B2-A1":["/res/panelsoil/zenith/2x/Casino_B2-A1.png",1024,-137.38925799290888],"Casino_B2-B1":["/res/panelsoil/zenith/2x/Casino_B2-B1.png",1024,-125.98298448586631],"Casino_B2-C1":["/res/panelsoil/zenith/2x/Casino_B2-C1.png",1024,-128.09821451615693],"Casino_B2-D1":["/res/panelsoil/zenith/2x/Casino_B2-D1.png",1024,-117.5898921583474],"Casino_B2-A2":["/res/panelsoil/zenith/2x/Casino_B2-A2.png",1024,-123.88696890192044],"Casino_B2-B2":["/res/panelsoil/zenith/2x/Casino_B2-B2.png",1024,-111.39394624301573],"Casino_B2-C2":["/res/panelsoil/zenith/2x/Casino_B2-C2.png",1024,-109.02933322659158],"Casino_B2-D2":["/res/panelsoil/zenith/2x/Casino_B2-D2.png",1024,-117.07547758713584],"Casino_B2-A3":["/res/panelsoil/zenith/2x/Casino_B2-A3.png",1024,-113.99150521733806],"Casino_B2-B3":["/res/panelsoil/zenith/2x/Casino_B2-B3.png",1024,-103.84857584894812],"Casino_B2-C3":["/res/panelsoil/zenith/2x/Casino_B2-C3.png",1024,-98.72595212126421],"Casino_B2-D3":["/res/panelsoil/zenith/2x/Casino_B2-D3.png",1024,-98.85970621175207],"Casino_Front-A1":["/res/panelsoil/zenith/2x/Casino_Front-A1.png",1024,-250.3829357299422],"Casino_Front-B1":["/res/panelsoil/zenith/2x/Casino_Front-B1.png",1024,-252.36555071967095],"Casino_Front-C1":["/res/panelsoil/zenith/2x/Casino_Front-C1.png",1024,-239.76293407607892],"Casino_Front-D1":["/res/panelsoil/zenith/2x/Casino_Front-D1.png",1024,-238.37469750877807],"Casino_Front-A2":["/res/panelsoil/zenith/2x/Casino_Front-A2.png",1024,-236.02888899874287],"Casino_Front-B2":["/res/panelsoil/zenith/2x/Casino_Front-B2.png",1024,-231.79422092552178],"Casino_Front-C2":["/res/panelsoil/zenith/2x/Casino_Front-C2.png",1024,-236.9079259756669],"Casino_Front-D2":["/res/panelsoil/zenith/2x/Casino_Front-D2.png",1024,-231.1860576638087],"Casino_Front-A3":["/res/panelsoil/zenith/2x/Casino_Front-A3.png",1024,-222.50252218048428],"Casino_Front-B3":["/res/panelsoil/zenith/2x/Casino_Front-B3.png",1024,-225.10605780568525],"Casino_Front-C3":["/res/panelsoil/zenith/2x/Casino_Front-C3.png",1024,-212.68425666021963],"Casino_Front-D3":["/res/panelsoil/zenith/2x/Casino_Front-D3.png",1024,-211.69848282879332],"Casino_Front-A4":["/res/panelsoil/zenith/2x/Casino_Front-A4.png",1024,-215.93384729932527],"Casino_Front-B4":["/res/panelsoil/zenith/2x/Casino_Front-B4.png",1024,-208.304820232021],"Casino_Front-C4":["/res/panelsoil/zenith/2x/Casino_Front-C4.png",1024,-210.9144351663721],"Casino_Front-D4":["/res/panelsoil/zenith/2x/Casino_Front-D4.png",1024,-206.36029462221256],"Casino_Front-A5":["/res/panelsoil/zenith/2x/Casino_Front-A5.png",1024,-193.944429037174],"Casino_Front-B5":["/res/panelsoil/zenith/2x/Casino_Front-B5.png",1024,-199.88927615345355],"Casino_Front-C5":["/res/panelsoil/zenith/2x/Casino_Front-C5.png",1024,-188.75359245530657],"Casino_Front-D5":["/res/panelsoil/zenith/2x/Casino_Front-D5.png",1024,-185.48183396191567],"Casino_Front-A6":["/res/panelsoil/zenith/2x/Casino_Front-A6.png",1024,-186.47375166176724],"Casino_Front-B6":["/res/panelsoil/zenith/2x/Casino_Front-B6.png",1024,-178.96260086832157],"Casino_Front-C6":["/res/panelsoil/zenith/2x/Casino_Front-C6.png",1024,-176.37433172189327],"Casino_Front-D6":["/res/panelsoil/zenith/2x/Casino_Front-D6.png",1024,-180.65363130761634],"Casino_Front-A7":["/res/panelsoil/zenith/2x/Casino_Front-A7.png",1024,-180.73466174897214],"Casino_Front-B7":["/res/panelsoil/zenith/2x/Casino_Front-B7.png",1024,-167.68010619957505],"Casino_Front-C7":["/res/panelsoil/zenith/2x/Casino_Front-C7.png",1024,-173.28245939988312],"Casino_Front-D7":["/res/panelsoil/zenith/2x/Casino_Front-D7.png",1024,-162.3595935051112],"Casino_Front-A8":["/res/panelsoil/zenith/2x/Casino_Front-A8.png",1024,-165.26251934335576],"Casino_Front-B8":["/res/panelsoil/zenith/2x/Casino_Front-B8.png",1024,-155.04917299195185],"Casino_Front-C8":["/res/panelsoil/zenith/2x/Casino_Front-C8.png",1024,-160.98682805298762],"Casino_Front-D8":["/res/panelsoil/zenith/2x/Casino_Front-D8.png",1024,-147.4518713409167],"Casino_Front-A9":["/res/panelsoil/zenith/2x/Casino_Front-A9.png",1024,-146.58986004641503],"Casino_Front-B9":["/res/panelsoil/zenith/2x/Casino_Front-B9.png",1024,-141.75901306626002],"Casino_Front-C9":["/res/panelsoil/zenith/2x/Casino_Front-C9.png",1024,-138.63128092453033],"Casino_Front-D9":["/res/panelsoil/zenith/2x/Casino_Front-D9.png",1024,-138.63309672540018],"Casino_Front-A10":["/res/panelsoil/zenith/2x/Casino_Front-A10.png",1024,-136.58339854532406],"Casino_Front-B10":["/res/panelsoil/zenith/2x/Casino_Front-B10.png",1024,-136.06277495051123],"Casino_Front-C10":["/res/panelsoil/zenith/2x/Casino_Front-C10.png",1024,-134.35861831532992],"Casino_Front-D10":["/res/panelsoil/zenith/2x/Casino_Front-D10.png",1024,-129.79214004658976],"Casino_Front-A11":["/res/panelsoil/zenith/2x/Casino_Front-A11.png",1024,-126.24361890463354],"Casino_Front-B11":["/res/panelsoil/zenith/2x/Casino_Front-B11.png",1024,-124.86700493668906],"Casino_Front-C11":["/res/panelsoil/zenith/2x/Casino_Front-C11.png",1024,-121.19620827815282],"Casino_Front-D11":["/res/panelsoil/zenith/2x/Casino_Front-D11.png",1024,-115.60872709936211],"Casino_Front-A12":["/res/panelsoil/zenith/2x/Casino_Front-A12.png",1024,-107.64110359483597],"Casino_Front-B12":["/res/panelsoil/zenith/2x/Casino_Front-B12.png",1024,-112.9437560841655],"Casino_Front-C12":["/res/panelsoil/zenith/2x/Casino_Front-C12.png",1024,-104.79902135637566],"Casino_Front-D12":["/res/panelsoil/zenith/2x/Casino_Front-D12.png",1024,-101.83140457883708],"Core_A1-A1":["/res/panelsoil/zenith/2x/Core_A1-A1.png",1024,722.4621304340187],"Core_A1-B1":["/res/panelsoil/zenith/2x/Core_A1-B1.png",1024,721.4627332894179],"Core_A1-C1":["/res/panelsoil/zenith/2x/Core_A1-C1.png",1024,721.6300279309334],"Core_A1-D1":["/res/panelsoil/zenith/2x/Core_A1-D1.png",1024,720.5476946024314],"Core_A1-A2":["/res/panelsoil/zenith/2x/Core_A1-A2.png",1024,733.7420230841071],"Core_A1-B2":["/res/panelsoil/zenith/2x/Core_A1-B2.png",1024,735.1591472453446],"Core_A1-C2":["/res/panelsoil/zenith/2x/Core_A1-C2.png",1024,736.9770286455371],"Core_A1-D2":["/res/panelsoil/zenith/2x/Core_A1-D2.png",1024,744.6240689649665],"Core_A1-A3":["/res/panelsoil/zenith/2x/Core_A1-A3.png",1024,744.6799527607659],"Core_A1-B3":["/res/panelsoil/zenith/2x/Core_A1-B3.png",1024,739.8969832398666],"Core_A1-C3":["/res/panelsoil/zenith/2x/Core_A1-C3.png",1024,752.0924066078192],"Core_A1-D3":["/res/panelsoil/zenith/2x/Core_A1-D3.png",1024,754.0886570645874],"Core_A1-A4":["/res/panelsoil/zenith/2x/Core_A1-A4.png",1024,752.2963316020681],"Core_A1-B4":["/res/panelsoil/zenith/2x/Core_A1-B4.png",1024,757.5327105622148],"Core_A1-C4":["/res/panelsoil/zenith/2x/Core_A1-C4.png",1024,762.2558423513588],"Core_A1-D4":["/res/panelsoil/zenith/2x/Core_A1-D4.png",1024,762.8490469156385],"Core_A1-A5":["/res/panelsoil/zenith/2x/Core_A1-A5.png",1024,763.9944949631549],"Core_A1-B5":["/res/panelsoil/zenith/2x/Core_A1-B5.png",1024,766.8103530412395],"Core_A1-C5":["/res/panelsoil/zenith/2x/Core_A1-C5.png",1024,768.832429109544],"Core_A1-D5":["/res/panelsoil/zenith/2x/Core_A1-D5.png",1024,773.4332833184923],"Core_A1-A6":["/res/panelsoil/zenith/2x/Core_A1-A6.png",1024,773.8081579005981],"Core_A1-B6":["/res/panelsoil/zenith/2x/Core_A1-B6.png",1024,777.3573357493776],"Core_A1-C6":["/res/panelsoil/zenith/2x/Core_A1-C6.png",1024,789.2834182389612],"Core_A1-D6":["/res/panelsoil/zenith/2x/Core_A1-D6.png",1024,784.8909837394518],"Core_A1-A7":["/res/panelsoil/zenith/2x/Core_A1-A7.png",1024,786.9575185692],"Core_A1-B7":["/res/panelsoil/zenith/2x/Core_A1-B7.png",1024,796.1835809329427],"Core_A1-C7":["/res/panelsoil/zenith/2x/Core_A1-C7.png",1024,796.7101481665358],"Core_A1-D7":["/res/panelsoil/zenith/2x/Core_A1-D7.png",1024,806.6184312105655],"Core_A1-A8":["/res/panelsoil/zenith/2x/Core_A1-A8.png",1024,803.259576570883],"Core_A1-B8":["/res/panelsoil/zenith/2x/Core_A1-B8.png",1024,801.5630221891885],"Core_A1-C8":["/res/panelsoil/zenith/2x/Core_A1-C8.png",1024,805.1613662978019],"Core_A1-D8":["/res/panelsoil/zenith/2x/Core_A1-D8.png",1024,816.7068982087054],"Core_B1-A1":["/res/panelsoil/zenith/2x/Core_B1-A1.png",1024,811.2611810975676],"Core_B1-B1":["/res/panelsoil/zenith/2x/Core_B1-B1.png",1024,804.608170758401],"Core_B1-C1":["/res/panelsoil/zenith/2x/Core_B1-C1.png",1024,809.6167540683686],"Core_B1-D1":["/res/panelsoil/zenith/2x/Core_B1-D1.png",1024,816.1247815665271],"Core_B1-A2":["/res/panelsoil/zenith/2x/Core_B1-A2.png",1024,814.5441618797062],"Core_B1-B2":["/res/panelsoil/zenith/2x/Core_B1-B2.png",1024,820.5805416284732],"Core_B1-C2":["/res/panelsoil/zenith/2x/Core_B1-C2.png",1024,821.4376313957514],"Core_B1-D2":["/res/panelsoil/zenith/2x/Core_B1-D2.png",1024,829.2359060712724],"Core_B1-A3":["/res/panelsoil/zenith/2x/Core_B1-A3.png",1024,837.4047961630667],"Core_B1-B3":["/res/panelsoil/zenith/2x/Core_B1-B3.png",1024,837.7826844959268],"Core_B1-C3":["/res/panelsoil/zenith/2x/Core_B1-C3.png",1024,841.062930762745],"Core_B1-D3":["/res/panelsoil/zenith/2x/Core_B1-D3.png",1024,837.1271515372546],"Core_B1-A4":["/res/panelsoil/zenith/2x/Core_B1-A4.png",1024,844.4086095877431],"Core_B1-B4":["/res/panelsoil/zenith/2x/Core_B1-B4.png",1024,850.7931725275946],"Core_B1-C4":["/res/panelsoil/zenith/2x/Core_B1-C4.png",1024,845.8551930257509],"Core_B1-D4":["/res/panelsoil/zenith/2x/Core_B1-D4.png",1024,851.0725484730191],"Core_B1-A5":["/res/panelsoil/zenith/2x/Core_B1-A5.png",1024,860.1426021656088],"Core_B1-B5":["/res/panelsoil/zenith/2x/Core_B1-B5.png",1024,860.111852667554],"Core_B1-C5":["/res/panelsoil/zenith/2x/Core_B1-C5.png",1024,857.5065064278947],"Core_B1-D5":["/res/panelsoil/zenith/2x/Core_B1-D5.png",1024,869.9739355081355],"Core_B1-A6":["/res/panelsoil/zenith/2x/Core_B1-A6.png",1024,870.5114049036368],"Core_B1-B6":["/res/panelsoil/zenith/2x/Core_B1-B6.png",1024,870.7283116820455],"Core_B1-C6":["/res/panelsoil/zenith/2x/Core_B1-C6.png",1024,878.3236175078241],"Core_B1-D6":["/res/panelsoil/zenith/2x/Core_B1-D6.png",1024,878.6709980173797],"Core_B2-A1":["/res/panelsoil/zenith/2x/Core_B2-A1.png",1024,845.5710195411706],"Core_B2-B1":["/res/panelsoil/zenith/2x/Core_B2-B1.png",1024,844.9084388536077],"Core_B2-C1":["/res/panelsoil/zenith/2x/Core_B2-C1.png",1024,841.1070434015501],"Core_B2-D1":["/res/panelsoil/zenith/2x/Core_B2-D1.png",1024,846.6487267264254],"Core_B2-A2":["/res/panelsoil/zenith/2x/Core_B2-A2.png",1024,850.4700416845704],"Core_B2-B2":["/res/panelsoil/zenith/2x/Core_B2-B2.png",1024,854.6740517739332],"Core_B2-C2":["/res/panelsoil/zenith/2x/Core_B2-C2.png",1024,852.585239457749],"Core_B2-D2":["/res/panelsoil/zenith/2x/Core_B2-D2.png",1024,855.7050198677797],"Core_B2-A3":["/res/panelsoil/zenith/2x/Core_B2-A3.png",1024,863.8445228447879],"Core_B2-B3":["/res/panelsoil/zenith/2x/Core_B2-B3.png",1024,872.0922892116472],"Core_B2-C3":["/res/panelsoil/zenith/2x/Core_B2-C3.png",1024,870.9597861202705],"Core_B2-D3":["/res/panelsoil/zenith/2x/Core_B2-D3.png",1024,871.8880899248893],"Core_B2-A4":["/res/panelsoil/zenith/2x/Core_B2-A4.png",1024,880.8562689300087],"Core_B2-B4":["/res/panelsoil/zenith/2x/Core_B2-B4.png",1024,874.7712047496525],"Core_B2-C4":["/res/panelsoil/zenith/2x/Core_B2-C4.png",1024,885.6361881108174],"Core_B2-D4":["/res/panelsoil/zenith/2x/Core_B2-D4.png",1024,891.4534122512493],"Core_C1-B1":["/res/panelsoil/zenith/2x/Core_C1-B1.png",1024,931.8558530101769],"Core_C1-C1":["/res/panelsoil/zenith/2x/Core_C1-C1.png",1024,937.7291856388641],"Core_C1-B2":["/res/panelsoil/zenith/2x/Core_C1-B2.png",1024,941.424267022477],"Core_C1-C2":["/res/panelsoil/zenith/2x/Core_C1-C2.png",1024,947.9352758038273],"Core_Front-A1":["/res/panelsoil/zenith/2x/Core_Front-A1.png",1024,704.8251037867351],"Core_Front-B1":["/res/panelsoil/zenith/2x/Core_Front-B1.png",1024,698.8242162445929],"Core_Front-C1":["/res/panelsoil/zenith/2x/Core_Front-C1.png",1024,700.8444396106335],"Core_Front-D1":["/res/panelsoil/zenith/2x/Core_Front-D1.png",1024,714.9723764742374],"Core_Front-A2":["/res/panelsoil/zenith/2x/Core_Front-A2.png",1024,712.6108190142169],"Core_Front-B2":["/res/panelsoil/zenith/2x/Core_Front-B2.png",1024,710.180171396361],"Core_Front-C2":["/res/panelsoil/zenith/2x/Core_Front-C2.png",1024,719.0454737528173],"Core_Front-D2":["/res/panelsoil/zenith/2x/Core_Front-D2.png",1024,717.3180277742251],"Core_Front-A3":["/res/panelsoil/zenith/2x/Core_Front-A3.png",1024,727.6489229094035],"Core_Front-B3":["/res/panelsoil/zenith/2x/Core_Front-B3.png",1024,722.6155007009248],"Core_Front-C3":["/res/panelsoil/zenith/2x/Core_Front-C3.png",1024,727.7958802898763],"Core_Front-D3":["/res/panelsoil/zenith/2x/Core_Front-D3.png",1024,730.4886430851293],"Core_Front-A4":["/res/panelsoil/zenith/2x/Core_Front-A4.png",1024,737.2729099498282],"Core_Front-B4":["/res/panelsoil/zenith/2x/Core_Front-B4.png",1024,738.8970093317162],"Core_Front-C4":["/res/panelsoil/zenith/2x/Core_Front-C4.png",1024,747.0619483156278],"Core_Front-D4":["/res/panelsoil/zenith/2x/Core_Front-D4.png",1024,744.6931776363449],"Core_Front-A5":["/res/panelsoil/zenith/2x/Core_Front-A5.png",1024,752.6281433490923],"Core_Front-B5":["/res/panelsoil/zenith/2x/Core_Front-B5.png",1024,747.4291502373228],"Core_Front-C5":["/res/panelsoil/zenith/2x/Core_Front-C5.png",1024,761.1931955192309],"Core_Front-D5":["/res/panelsoil/zenith/2x/Core_Front-D5.png",1024,765.4832245053743],"Core_Front-A6":["/res/panelsoil/zenith/2x/Core_Front-A6.png",1024,766.236927853161],"Core_Front-B6":["/res/panelsoil/zenith/2x/Core_Front-B6.png",1024,765.9065853125122],"Core_Front-C6":["/res/panelsoil/zenith/2x/Core_Front-C6.png",1024,764.6044230224343],"Core_Front-D6":["/res/panelsoil/zenith/2x/Core_Front-D6.png",1024,768.8728569794226],"Core_Front-A7":["/res/panelsoil/zenith/2x/Core_Front-A7.png",1024,780.9672438752526],"Core_Front-B7":["/res/panelsoil/zenith/2x/Core_Front-B7.png",1024,778.7869739651668],"Core_Front-C7":["/res/panelsoil/zenith/2x/Core_Front-C7.png",1024,777.8973315663573],"Core_Front-D7":["/res/panelsoil/zenith/2x/Core_Front-D7.png",1024,790.5769188530779],"Core_Front-A8":["/res/panelsoil/zenith/2x/Core_Front-A8.png",1024,782.7312824899305],"Core_Front-C8":["/res/panelsoil/zenith/2x/Core_Front-C8.png",1024,797.8646057952993],"Core_Front-D8":["/res/panelsoil/zenith/2x/Core_Front-D8.png",1024,802.9435995404775],"Core_Front-A9":["/res/panelsoil/zenith/2x/Core_Front-A9.png",1024,799.9464695744762],"Core_Front-B9":["/res/panelsoil/zenith/2x/Core_Front-B9.png",1024,808.1674388022989],"Core_Front-C9":["/res/panelsoil/zenith/2x/Core_Front-C9.png",1024,807.7768534823674],"Core_Front-D9":["/res/panelsoil/zenith/2x/Core_Front-D9.png",1024,803.8074470472617],"Core_Front-A10":["/res/panelsoil/zenith/2x/Core_Front-A10.png",1024,816.7567219316489],"Core_Front-B10":["/res/panelsoil/zenith/2x/Core_Front-B10.png",1024,810.5650308077187],"Core_Front-C10":["/res/panelsoil/zenith/2x/Core_Front-C10.png",1024,821.8094430040401],"Core_Front-D10":["/res/panelsoil/zenith/2x/Core_Front-D10.png",1024,818.8007487449163],"Core_Front-A11":["/res/panelsoil/zenith/2x/Core_Front-A11.png",1024,820.2689198819293],"Core_Front-B11":["/res/panelsoil/zenith/2x/Core_Front-B11.png",1024,825.923265592273],"Core_Front-C11":["/res/panelsoil/zenith/2x/Core_Front-C11.png",1024,829.3301821998646],"Core_Front-D11":["/res/panelsoil/zenith/2x/Core_Front-D11.png",1024,831.6051681351423],"Core_Front-A12":["/res/panelsoil/zenith/2x/Core_Front-A12.png",1024,843.5262395331489],"Core_Front-B12":["/res/panelsoil/zenith/2x/Core_Front-B12.png",1024,839.8077679066721],"Core_Front-C12":["/res/panelsoil/zenith/2x/Core_Front-C12.png",1024,837.6633295291323],"Core_Front-D12":["/res/panelsoil/zenith/2x/Core_Front-D12.png",1024,845.0842935084598],"Core_Front-A13":["/res/panelsoil/zenith/2x/Core_Front-A13.png",1024,855.376146303423],"Core_Front-D13":["/res/panelsoil/zenith/2x/Core_Front-D13.png",1024,859.1526952469357],"Core_Front-A14":["/res/panelsoil/zenith/2x/Core_Front-A14.png",1024,859.9267078455517],"Core_Front-B14":["/res/panelsoil/zenith/2x/Core_Front-B14.png",1024,871.7554357700417],"Core_Front-C14":["/res/panelsoil/zenith/2x/Core_Front-C14.png",1024,863.1646688757703],"Core_Front-D14":["/res/panelsoil/zenith/2x/Core_Front-D14.png",1024,876.8889920247232],"Core_Front-A15":["/res/panelsoil/zenith/2x/Core_Front-A15.png",1024,877.1557558740183],"Core_Front-B15":["/res/panelsoil/zenith/2x/Core_Front-B15.png",1024,878.6688696690085],"Core_Front-C15":["/res/panelsoil/zenith/2x/Core_Front-C15.png",1024,885.234188978885],"Core_Front-D15":["/res/panelsoil/zenith/2x/Core_Front-D15.png",1024,882.681413040961],"Core_Front-A16":["/res/panelsoil/zenith/2x/Core_Front-A16.png",1024,893.0628858340676],"Core_Front-B16":["/res/panelsoil/zenith/2x/Core_Front-B16.png",1024,891.5978211869747],"Core_Front-C16":["/res/panelsoil/zenith/2x/Core_Front-C16.png",1024,891.1767604370889],"Core_Front-D16":["/res/panelsoil/zenith/2x/Core_Front-D16.png",1024,899.5853087814123],"Core_Front-A17":["/res/panelsoil/zenith/2x/Core_Front-A17.png",1024,904.8570530472161],"Core_Front-B17":["/res/panelsoil/zenith/2x/Core_Front-B17.png",1024,905.4654121113222],"Core_Front-C17":["/res/panelsoil/zenith/2x/Core_Front-C17.png",1024,907.0157926717086],"Core_Front-D17":["/res/panelsoil/zenith/2x/Core_Front-D17.png",1024,909.4059849209523],"Core_Front-A18":["/res/panelsoil/zenith/2x/Core_Front-A18.png",1024,909.3027356170212],"Core_Front-B18":["/res/panelsoil/zenith/2x/Core_Front-B18.png",1024,914.1204236019039],"Core_Front-C18":["/res/panelsoil/zenith/2x/Core_Front-C18.png",1024,924.1418506122147],"Core_Front-D18":["/res/panelsoil/zenith/2x/Core_Front-D18.png",1024,922.6765396024656],"Core_Front-A19":["/res/panelsoil/zenith/2x/Core_Front-A19.png",1024,919.8154858070832],"Core_Front-B19":["/res/panelsoil/zenith/2x/Core_Front-B19.png",1024,922.3808282048576],"Core_Front-C19":["/res/panelsoil/zenith/2x/Core_Front-C19.png",1024,936.4822238024813],"Core_Front-D19":["/res/panelsoil/zenith/2x/Core_Front-D19.png",1024,931.9737459514478],"Core_Front-A20":["/res/panelsoil/zenith/2x/Core_Front-A20.png",1024,934.3587809846167],"Core_Front-B20":["/res/panelsoil/zenith/2x/Core_Front-B20.png",1024,937.9213917642348],"Core_Front-C20":["/res/panelsoil/zenith/2x/Core_Front-C20.png",1024,937.7357132025354],"Core_Front-D20":["/res/panelsoil/zenith/2x/Core_Front-D20.png",1024,951.1277625070308],"Corruption_A1-A1":["/res/panelsoil/zenith/2x/Corruption_A1-A1.png",1024,955.0350718156369],"Corruption_A1-B1":["/res/panelsoil/zenith/2x/Corruption_A1-B1.png",1024,957.1031119521],"Corruption_A1-C1":["/res/panelsoil/zenith/2x/Corruption_A1-C1.png",1024,965.0738957070247],"Corruption_A1-D1":["/res/panelsoil/zenith/2x/Corruption_A1-D1.png",1024,966.170138257001],"Corruption_A1-A2":["/res/panelsoil/zenith/2x/Corruption_A1-A2.png",1024,965.3638205534377],"Corruption_A1-B2":["/res/panelsoil/zenith/2x/Corruption_A1-B2.png",1024,974.1997963496141],"Corruption_A1-C2":["/res/panelsoil/zenith/2x/Corruption_A1-C2.png",1024,969.8653668591398],"Corruption_A1-D2":["/res/panelsoil/zenith/2x/Corruption_A1-D2.png",1024,977.8881002673133],"Corruption_A1-A3":["/res/panelsoil/zenith/2x/Corruption_A1-A3.png",1024,984.2373166016126],"Corruption_A1-B3":["/res/panelsoil/zenith/2x/Corruption_A1-B3.png",1024,987.5621720381532],"Corruption_A1-C3":["/res/panelsoil/zenith/2x/Corruption_A1-C3.png",1024,989.7122904464577],"Corruption_A1-D3":["/res/panelsoil/zenith/2x/Corruption_A1-D3.png",1024,985.7577809820249],"Corruption_A1-A4":["/res/panelsoil/zenith/2x/Corruption_A1-A4.png",1024,991.5117015053795],"Corruption_A1-B4":["/res/panelsoil/zenith/2x/Corruption_A1-B4.png",1024,1002.3072556403082],"Corruption_A1-C4":["/res/panelsoil/zenith/2x/Corruption_A1-C4.png",1024,1003.4715602492257],"Corruption_A1-D4":["/res/panelsoil/zenith/2x/Corruption_A1-D4.png",1024,1008.701309593401],"Corruption_A1-A5":["/res/panelsoil/zenith/2x/Corruption_A1-A5.png",1024,1002.757340619253],"Corruption_A1-B5":["/res/panelsoil/zenith/2x/Corruption_A1-B5.png",1024,1013.3417897220154],"Corruption_A1-C5":["/res/panelsoil/zenith/2x/Corruption_A1-C5.png",1024,1013.555195797351],"Corruption_A1-D5":["/res/panelsoil/zenith/2x/Corruption_A1-D5.png",1024,1013.5184608268855],"Corruption_A1-A6":["/res/panelsoil/zenith/2x/Corruption_A1-A6.png",1024,1015.081954570555],"Corruption_A1-B6":["/res/panelsoil/zenith/2x/Corruption_A1-B6.png",1024,1023.6254936980852],"Corruption_A1-C6":["/res/panelsoil/zenith/2x/Corruption_A1-C6.png",1024,1024.3610610098974],"Corruption_A1-D6":["/res/panelsoil/zenith/2x/Corruption_A1-D6.png",1024,1026.6418190706775],"Corruption_B1-A1":["/res/panelsoil/zenith/2x/Corruption_B1-A1.png",1024,1027.2643603102863],"Corruption_B1-B1":["/res/panelsoil/zenith/2x/Corruption_B1-B1.png",1024,1028.3020595314977],"Corruption_B1-C1":["/res/panelsoil/zenith/2x/Corruption_B1-C1.png",1024,1034.9578113692771],"Corruption_B1-D1":["/res/panelsoil/zenith/2x/Corruption_B1-D1.png",1024,1038.8473509144324],"Corruption_B1-A2":["/res/panelsoil/zenith/2x/Corruption_B1-A2.png",1024,1039.4297406579833],"Corruption_B1-B2":["/res/panelsoil/zenith/2x/Corruption_B1-B2.png",1024,1035.5125289642563],"Corruption_B1-C2":["/res/panelsoil/zenith/2x/Corruption_B1-C2.png",1024,1040.557044936425],"Corruption_B1-D2":["/res/panelsoil/zenith/2x/Corruption_B1-D2.png",1024,1046.3357944851052],"Corruption_B1-A3":["/res/panelsoil/zenith/2x/Corruption_B1-A3.png",1024,1046.302750607098],"Corruption_B1-B3":["/res/panelsoil/zenith/2x/Corruption_B1-B3.png",1024,1052.3042494325612],"Corruption_B1-C3":["/res/panelsoil/zenith/2x/Corruption_B1-C3.png",1024,1056.069135245903],"Corruption_B1-D3":["/res/panelsoil/zenith/2x/Corruption_B1-D3.png",1024,1063.8913113608667],"Corruption_B1-A4":["/res/panelsoil/zenith/2x/Corruption_B1-A4.png",1024,1060.833219337312],"Corruption_B1-B4":["/res/panelsoil/zenith/2x/Corruption_B1-B4.png",1024,1067.855336684134],"Corruption_B1-C4":["/res/panelsoil/zenith/2x/Corruption_B1-C4.png",1024,1069.8630652819627],"Corruption_B1-D4":["/res/panelsoil/zenith/2x/Corruption_B1-D4.png",1024,1073.9771905533312],"Corruption_B1-A5":["/res/panelsoil/zenith/2x/Corruption_B1-A5.png",1024,1074.739184929571],"Corruption_B1-B5":["/res/panelsoil/zenith/2x/Corruption_B1-B5.png",1024,1073.1988407403505],"Corruption_B1-C5":["/res/panelsoil/zenith/2x/Corruption_B1-C5.png",1024,1086.082456563221],"Corruption_B1-D5":["/res/panelsoil/zenith/2x/Corruption_B1-D5.png",1024,1078.3211456423269],"Corruption_B2-A1":["/res/panelsoil/zenith/2x/Corruption_B2-A1.png",1024,1024.7139432126348],"Corruption_B2-B1":["/res/panelsoil/zenith/2x/Corruption_B2-B1.png",1024,1025.740003942321],"Corruption_B2-C1":["/res/panelsoil/zenith/2x/Corruption_B2-C1.png",1024,1028.6339971689063],"Corruption_B2-D1":["/res/panelsoil/zenith/2x/Corruption_B2-D1.png",1024,1032.851851942312],"Corruption_B2-A2":["/res/panelsoil/zenith/2x/Corruption_B2-A2.png",1024,1036.0683749935622],"Corruption_B2-B2":["/res/panelsoil/zenith/2x/Corruption_B2-B2.png",1024,1042.0486629935956],"Corruption_B2-C2":["/res/panelsoil/zenith/2x/Corruption_B2-C2.png",1024,1048.4909662002246],"Corruption_B2-D2":["/res/panelsoil/zenith/2x/Corruption_B2-D2.png",1024,1041.870453615917],"Corruption_B2-A3":["/res/panelsoil/zenith/2x/Corruption_B2-A3.png",1024,1047.8110806780549],"Corruption_B2-B3":["/res/panelsoil/zenith/2x/Corruption_B2-B3.png",1024,1048.1821801586957],"Corruption_B2-C3":["/res/panelsoil/zenith/2x/Corruption_B2-C3.png",1024,1056.1290550456529],"Corruption_B2-D3":["/res/panelsoil/zenith/2x/Corruption_B2-D3.png",1024,1055.8530752387464],"Corruption_B2-A4":["/res/panelsoil/zenith/2x/Corruption_B2-A4.png",1024,1065.3432241471328],"Corruption_B2-B4":["/res/panelsoil/zenith/2x/Corruption_B2-B4.png",1024,1066.3759447481634],"Corruption_B2-C4":["/res/panelsoil/zenith/2x/Corruption_B2-C4.png",1024,1070.6905710365459],"Corruption_B2-D4":["/res/panelsoil/zenith/2x/Corruption_B2-D4.png",1024,1075.6549005989546],"Corruption_B2-A5":["/res/panelsoil/zenith/2x/Corruption_B2-A5.png",1024,1071.1813948569254],"Corruption_B2-B5":["/res/panelsoil/zenith/2x/Corruption_B2-B5.png",1024,1073.1616152777672],"Corruption_B2-C5":["/res/panelsoil/zenith/2x/Corruption_B2-C5.png",1024,1084.4871194712493],"Corruption_B2-D5":["/res/panelsoil/zenith/2x/Corruption_B2-D5.png",1024,1081.17422614687],"Corruption_C1-A1":["/res/panelsoil/zenith/2x/Corruption_C1-A1.png",1024,1072.9183764848447],"Corruption_C1-B1":["/res/panelsoil/zenith/2x/Corruption_C1-B1.png",1024,1068.4912576004801],"Corruption_C1-C1":["/res/panelsoil/zenith/2x/Corruption_C1-C1.png",1024,1073.3208189466563],"Corruption_C1-D1":["/res/panelsoil/zenith/2x/Corruption_C1-D1.png",1024,1080.5258955767863],"Corruption_C1-A2":["/res/panelsoil/zenith/2x/Corruption_C1-A2.png",1024,1088.132578027374],"Corruption_C1-B2":["/res/panelsoil/zenith/2x/Corruption_C1-B2.png",1024,1085.4399530553987],"Corruption_C1-C2":["/res/panelsoil/zenith/2x/Corruption_C1-C2.png",1024,1085.989704104672],"Corruption_C1-D2":["/res/panelsoil/zenith/2x/Corruption_C1-D2.png",1024,1094.5909669251585],"Corruption_C1-A3":["/res/panelsoil/zenith/2x/Corruption_C1-A3.png",1024,1089.778978673044],"Corruption_C1-B3":["/res/panelsoil/zenith/2x/Corruption_C1-B3.png",1024,1099.6923443825226],"Corruption_C1-C3":["/res/panelsoil/zenith/2x/Corruption_C1-C3.png",1024,1098.467334725636],"Corruption_C1-D3":["/res/panelsoil/zenith/2x/Corruption_C1-D3.png",1024,1109.7003934372067],"Corruption_C1-A4":["/res/panelsoil/zenith/2x/Corruption_C1-A4.png",1024,1108.8344514257992],"Corruption_C1-B4":["/res/panelsoil/zenith/2x/Corruption_C1-B4.png",1024,1111.6389156484486],"Corruption_C1-C4":["/res/panelsoil/zenith/2x/Corruption_C1-C4.png",1024,1113.5580345185738],"Corruption_C1-D4":["/res/panelsoil/zenith/2x/Corruption_C1-D4.png",1024,1117.385986723501],"Corruption_C1-A5":["/res/panelsoil/zenith/2x/Corruption_C1-A5.png",1024,1123.083995411361],"Corruption_C1-B5":["/res/panelsoil/zenith/2x/Corruption_C1-B5.png",1024,1120.4857756003908],"Corruption_C1-C5":["/res/panelsoil/zenith/2x/Corruption_C1-C5.png",1024,1128.5579966754992],"Corruption_C1-D5":["/res/panelsoil/zenith/2x/Corruption_C1-D5.png",1024,1124.7219958506269],"Corruption_C1-A6":["/res/panelsoil/zenith/2x/Corruption_C1-A6.png",1024,1129.1604586016558],"Corruption_C1-B6":["/res/panelsoil/zenith/2x/Corruption_C1-B6.png",1024,1134.1990698518382],"Corruption_C1-C6":["/res/panelsoil/zenith/2x/Corruption_C1-C6.png",1024,1139.664489919831],"Corruption_C1-D6":["/res/panelsoil/zenith/2x/Corruption_C1-D6.png",1024,1139.7956154420576],"Corruption_C2-A1":["/res/panelsoil/zenith/2x/Corruption_C2-A1.png",1024,1071.7829271668663],"Corruption_C2-B1":["/res/panelsoil/zenith/2x/Corruption_C2-B1.png",1024,1068.6082567323951],"Corruption_C2-C1":["/res/panelsoil/zenith/2x/Corruption_C2-C1.png",1024,1073.945289314652],"Corruption_C2-D1":["/res/panelsoil/zenith/2x/Corruption_C2-D1.png",1024,1078.6167782765963],"Corruption_C2-A2":["/res/panelsoil/zenith/2x/Corruption_C2-A2.png",1024,1087.1239435557884],"Corruption_C2-B2":["/res/panelsoil/zenith/2x/Corruption_C2-B2.png",1024,1085.5013454364419],"Corruption_C2-C2":["/res/panelsoil/zenith/2x/Corruption_C2-C2.png",1024,1084.9964117497182],"Corruption_C2-D2":["/res/panelsoil/zenith/2x/Corruption_C2-D2.png",1024,1089.943577180089],"Corruption_C2-A3":["/res/panelsoil/zenith/2x/Corruption_C2-A3.png",1024,1093.430289633954],"Corruption_C2-D3":["/res/panelsoil/zenith/2x/Corruption_C2-D3.png",1024,1106.1071223673823],"Corruption_C2-A4":["/res/panelsoil/zenith/2x/Corruption_C2-A4.png",1024,1108.436441772834],"Corruption_C2-A5":["/res/panelsoil/zenith/2x/Corruption_C2-A5.png",1024,1116.3292956615535],"Corruption_D1-A1":["/res/panelsoil/zenith/2x/Corruption_D1-A1.png",1024,1182.1276546648644],"Corruption_D1-B1":["/res/panelsoil/zenith/2x/Corruption_D1-B1.png",1024,1188.5371647453585],"Corruption_D1-C1":["/res/panelsoil/zenith/2x/Corruption_D1-C1.png",1024,1188.9048030821582],"Corruption_D1-D1":["/res/panelsoil/zenith/2x/Corruption_D1-D1.png",1024,1190.9011013361287],"Corruption_D1-A2":["/res/panelsoil/zenith/2x/Corruption_D1-A2.png",1024,1197.9578546687887],"Corruption_D1-B2":["/res/panelsoil/zenith/2x/Corruption_D1-B2.png",1024,1199.0908181764364],"Corruption_D1-C2":["/res/panelsoil/zenith/2x/Corruption_D1-C2.png",1024,1203.632749973978],"Corruption_D1-D2":["/res/panelsoil/zenith/2x/Corruption_D1-D2.png",1024,1208.5687623519216],"Corruption_D1-A3":["/res/panelsoil/zenith/2x/Corruption_D1-A3.png",1024,1209.0092888545528],"Corruption_D1-B3":["/res/panelsoil/zenith/2x/Corruption_D1-B3.png",1024,1210.1988571821075],"Corruption_D1-C3":["/res/panelsoil/zenith/2x/Corruption_D1-C3.png",1024,1214.938560708512],"Corruption_D1-D3":["/res/panelsoil/zenith/2x/Corruption_D1-D3.png",1024,1217.9220797158116],"Corruption_D1-A4":["/res/panelsoil/zenith/2x/Corruption_D1-A4.png",1024,1222.7892880783027],"Corruption_D1-B4":["/res/panelsoil/zenith/2x/Corruption_D1-B4.png",1024,1226.956294511537],"Corruption_D1-C4":["/res/panelsoil/zenith/2x/Corruption_D1-C4.png",1024,1231.6379125977223],"Corruption_D1-D4":["/res/panelsoil/zenith/2x/Corruption_D1-D4.png",1024,1233.880532720567],"Corruption_D1-A5":["/res/panelsoil/zenith/2x/Corruption_D1-A5.png",1024,1235.0255245903627],"Corruption_D1-B5":["/res/panelsoil/zenith/2x/Corruption_D1-B5.png",1024,1242.5144233361714],"Corruption_D1-C5":["/res/panelsoil/zenith/2x/Corruption_D1-C5.png",1024,1241.6308323486755],"Corruption_D1-D5":["/res/panelsoil/zenith/2x/Corruption_D1-D5.png",1024,1242.6797714460013],"Corruption_D1-A6":["/res/panelsoil/zenith/2x/Corruption_D1-A6.png",1024,1242.4117751670663],"Corruption_D1-B6":["/res/panelsoil/zenith/2x/Corruption_D1-B6.png",1024,1247.604609732865],"Corruption_D1-C6":["/res/panelsoil/zenith/2x/Corruption_D1-C6.png",1024,1248.0944605372417],"Corruption_D1-D6":["/res/panelsoil/zenith/2x/Corruption_D1-D6.png",1024,1261.5476224841466],"Corruption_D2-A1":["/res/panelsoil/zenith/2x/Corruption_D2-A1.png",1024,1179.2854993219573],"Corruption_D2-B1":["/res/panelsoil/zenith/2x/Corruption_D2-B1.png",1024,1190.9206102771486],"Corruption_D2-C1":["/res/panelsoil/zenith/2x/Corruption_D2-C1.png",1024,1194.6095256765884],"Corruption_D2-D1":["/res/panelsoil/zenith/2x/Corruption_D2-D1.png",1024,1197.0707847657968],"Corruption_D2-A2":["/res/panelsoil/zenith/2x/Corruption_D2-A2.png",1024,1190.3978345249761],"Corruption_D2-B2":["/res/panelsoil/zenith/2x/Corruption_D2-B2.png",1024,1201.863837474898],"Corruption_D2-C2":["/res/panelsoil/zenith/2x/Corruption_D2-C2.png",1024,1200.5416747104405],"Corruption_D2-D2":["/res/panelsoil/zenith/2x/Corruption_D2-D2.png",1024,1211.7715415220275],"Corruption_D2-A3":["/res/panelsoil/zenith/2x/Corruption_D2-A3.png",1024,1203.2040944663015],"Corruption_D2-B3":["/res/panelsoil/zenith/2x/Corruption_D2-B3.png",1024,1207.4004511422347],"Corruption_D2-C3":["/res/panelsoil/zenith/2x/Corruption_D2-C3.png",1024,1216.8291829102113],"Corruption_D2-D3":["/res/panelsoil/zenith/2x/Corruption_D2-D3.png",1024,1219.6557043578616],"Corruption_D2-A4":["/res/panelsoil/zenith/2x/Corruption_D2-A4.png",1024,1219.996129150558],"Corruption_D2-B4":["/res/panelsoil/zenith/2x/Corruption_D2-B4.png",1024,1224.7150499221093],"Corruption_D2-C4":["/res/panelsoil/zenith/2x/Corruption_D2-C4.png",1024,1225.5798689436385],"Corruption_D2-D4":["/res/panelsoil/zenith/2x/Corruption_D2-D4.png",1024,1228.6756936646916],"Corruption_D2-A5":["/res/panelsoil/zenith/2x/Corruption_D2-A5.png",1024,1228.434811265033],"Corruption_D2-B5":["/res/panelsoil/zenith/2x/Corruption_D2-B5.png",1024,1240.576348249564],"Corruption_D2-C5":["/res/panelsoil/zenith/2x/Corruption_D2-C5.png",1024,1244.2365197209535],"Corruption_D2-D5":["/res/panelsoil/zenith/2x/Corruption_D2-D5.png",1024,1246.4015773351894],"Corruption_Front-A1":["/res/panelsoil/zenith/2x/Corruption_Front-A1.png",1024,953.0869039925991],"Corruption_Front-B1":["/res/panelsoil/zenith/2x/Corruption_Front-B1.png",1024,949.0653684619019],"Corruption_Front-C1":["/res/panelsoil/zenith/2x/Corruption_Front-C1.png",1024,951.4418431464195],"Corruption_Front-D1":["/res/panelsoil/zenith/2x/Corruption_Front-D1.png",1024,956.4401335241314],"Corruption_Front-A2":["/res/panelsoil/zenith/2x/Corruption_Front-A2.png",1024,959.6199499175698],"Corruption_Front-B2":["/res/panelsoil/zenith/2x/Corruption_Front-B2.png",1024,969.8372495398122],"Corruption_Front-C2":["/res/panelsoil/zenith/2x/Corruption_Front-C2.png",1024,971.3905277040765],"Corruption_Front-D2":["/res/panelsoil/zenith/2x/Corruption_Front-D2.png",1024,972.4255501005684],"Corruption_Front-A3":["/res/panelsoil/zenith/2x/Corruption_Front-A3.png",1024,973.4505971722964],"Corruption_Front-B3":["/res/panelsoil/zenith/2x/Corruption_Front-B3.png",1024,976.1719863105609],"Corruption_Front-C3":["/res/panelsoil/zenith/2x/Corruption_Front-C3.png",1024,981.359062684349],"Corruption_Front-D3":["/res/panelsoil/zenith/2x/Corruption_Front-D3.png",1024,989.0989456006566],"Corruption_Front-A4":["/res/panelsoil/zenith/2x/Corruption_Front-A4.png",1024,988.2128446136835],"Corruption_Front-B4":["/res/panelsoil/zenith/2x/Corruption_Front-B4.png",1024,988.5220814192705],"Corruption_Front-C4":["/res/panelsoil/zenith/2x/Corruption_Front-C4.png",1024,989.9634434376844],"Corruption_Front-D4":["/res/panelsoil/zenith/2x/Corruption_Front-D4.png",1024,998.6601021261336],"Corruption_Front-A5":["/res/panelsoil/zenith/2x/Corruption_Front-A5.png",1024,998.2237142358816],"Corruption_Front-B5":["/res/panelsoil/zenith/2x/Corruption_Front-B5.png",1024,1004.6730926297697],"Corruption_Front-C5":["/res/panelsoil/zenith/2x/Corruption_Front-C5.png",1024,1010.1504192442547],"Corruption_Front-D5":["/res/panelsoil/zenith/2x/Corruption_Front-D5.png",1024,1006.1978450902584],"Corruption_Front-A6":["/res/panelsoil/zenith/2x/Corruption_Front-A6.png",1024,1008.3465260106736],"Corruption_Front-B6":["/res/panelsoil/zenith/2x/Corruption_Front-B6.png",1024,1014.807387274426],"Corruption_Front-C6":["/res/panelsoil/zenith/2x/Corruption_Front-C6.png",1024,1013.3378003987403],"Corruption_Front-D6":["/res/panelsoil/zenith/2x/Corruption_Front-D6.png",1024,1017.4257015491497],"Corruption_Front-A7":["/res/panelsoil/zenith/2x/Corruption_Front-A7.png",1024,1028.5117699889145],"Corruption_Front-B7":["/res/panelsoil/zenith/2x/Corruption_Front-B7.png",1024,1032.220138893654],"Corruption_Front-C7":["/res/panelsoil/zenith/2x/Corruption_Front-C7.png",1024,1029.1737947689205],"Corruption_Front-D7":["/res/panelsoil/zenith/2x/Corruption_Front-D7.png",1024,1031.9044661461685],"Corruption_Front-A8":["/res/panelsoil/zenith/2x/Corruption_Front-A8.png",1024,1039.0305184251163],"Corruption_Front-B8":["/res/panelsoil/zenith/2x/Corruption_Front-B8.png",1024,1034.6091029638994],"Corruption_Front-C8":["/res/panelsoil/zenith/2x/Corruption_Front-C8.png",1024,1046.0828769273064],"Corruption_Front-D8":["/res/panelsoil/zenith/2x/Corruption_Front-D8.png",1024,1052.7035018215392],"Corruption_Front-A9":["/res/panelsoil/zenith/2x/Corruption_Front-A9.png",1024,1056.175414699101],"Corruption_Front-B9":["/res/panelsoil/zenith/2x/Corruption_Front-B9.png",1024,1051.4377658507524],"Corruption_Front-C9":["/res/panelsoil/zenith/2x/Corruption_Front-C9.png",1024,1061.7668976306677],"Corruption_Front-D9":["/res/panelsoil/zenith/2x/Corruption_Front-D9.png",1024,1054.7578044992101],"Corruption_Front-A10":["/res/panelsoil/zenith/2x/Corruption_Front-A10.png",1024,1061.2769569706675],"Corruption_Front-B10":["/res/panelsoil/zenith/2x/Corruption_Front-B10.png",1024,1062.1411450157568],"Corruption_Front-C10":["/res/panelsoil/zenith/2x/Corruption_Front-C10.png",1024,1064.8271194775086],"Corruption_Front-D10":["/res/panelsoil/zenith/2x/Corruption_Front-D10.png",1024,1073.28051559031],"Corruption_Front-A11":["/res/panelsoil/zenith/2x/Corruption_Front-A11.png",1024,1077.634678819349],"Corruption_Front-B11":["/res/panelsoil/zenith/2x/Corruption_Front-B11.png",1024,1075.4355242582917],"Corruption_Front-C11":["/res/panelsoil/zenith/2x/Corruption_Front-C11.png",1024,1078.5322274389127],"Corruption_Front-D11":["/res/panelsoil/zenith/2x/Corruption_Front-D11.png",1024,1088.2221517063565],"Corruption_Front-A12":["/res/panelsoil/zenith/2x/Corruption_Front-A12.png",1024,1093.2602635782403],"Corruption_Front-B12":["/res/panelsoil/zenith/2x/Corruption_Front-B12.png",1024,1096.73359658429],"Corruption_Front-C12":["/res/panelsoil/zenith/2x/Corruption_Front-C12.png",1024,1089.528049723098],"Corruption_Front-D12":["/res/panelsoil/zenith/2x/Corruption_Front-D12.png",1024,1097.7127660399294],"Corruption_Front-A13":["/res/panelsoil/zenith/2x/Corruption_Front-A13.png",1024,1100.7784548641575],"Corruption_Front-B13":["/res/panelsoil/zenith/2x/Corruption_Front-B13.png",1024,1108.7570353265858],"Corruption_Front-C13":["/res/panelsoil/zenith/2x/Corruption_Front-C13.png",1024,1101.9226213671886],"Corruption_Front-D13":["/res/panelsoil/zenith/2x/Corruption_Front-D13.png",1024,1114.1507360500086],"Corruption_Front-A14":["/res/panelsoil/zenith/2x/Corruption_Front-A14.png",1024,1113.0128879809474],"Corruption_Front-C14":["/res/panelsoil/zenith/2x/Corruption_Front-C14.png",1024,1115.5048911853985],"Corruption_Front-D14":["/res/panelsoil/zenith/2x/Corruption_Front-D14.png",1024,1121.7626538752008],"Corruption_Front-A15":["/res/panelsoil/zenith/2x/Corruption_Front-A15.png",1024,1130.0613010745872],"Corruption_Front-B15":["/res/panelsoil/zenith/2x/Corruption_Front-B15.png",1024,1132.345733491222],"Corruption_Front-C15":["/res/panelsoil/zenith/2x/Corruption_Front-C15.png",1024,1134.520994052092],"Corruption_Front-D15":["/res/panelsoil/zenith/2x/Corruption_Front-D15.png",1024,1135.8902984038007],"Corruption_Front-A16":["/res/panelsoil/zenith/2x/Corruption_Front-A16.png",1024,1141.2745484192844],"Corruption_Front-B16":["/res/panelsoil/zenith/2x/Corruption_Front-B16.png",1024,1142.831754681278],"Corruption_Front-C16":["/res/panelsoil/zenith/2x/Corruption_Front-C16.png",1024,1141.1383378028247],"Corruption_Front-D16":["/res/panelsoil/zenith/2x/Corruption_Front-D16.png",1024,1141.3275017043293],"Corruption_Front-A17":["/res/panelsoil/zenith/2x/Corruption_Front-A17.png",1024,1150.410777030856],"Corruption_Front-B17":["/res/panelsoil/zenith/2x/Corruption_Front-B17.png",1024,1148.4201216702365],"Corruption_Front-C17":["/res/panelsoil/zenith/2x/Corruption_Front-C17.png",1024,1156.078122438153],"Corruption_Front-D17":["/res/panelsoil/zenith/2x/Corruption_Front-D17.png",1024,1163.3076469607754],"Corruption_Front-A18":["/res/panelsoil/zenith/2x/Corruption_Front-A18.png",1024,1159.4435973884013],"Corruption_Front-B18":["/res/panelsoil/zenith/2x/Corruption_Front-B18.png",1024,1161.3642301021346],"Corruption_Front-C18":["/res/panelsoil/zenith/2x/Corruption_Front-C18.png",1024,1164.4397561344522],"Corruption_Front-D18":["/res/panelsoil/zenith/2x/Corruption_Front-D18.png",1024,1177.4675264811851],"Corruption_Front-A19":["/res/panelsoil/zenith/2x/Corruption_Front-A19.png",1024,1180.7442145456046],"Corruption_Front-B19":["/res/panelsoil/zenith/2x/Corruption_Front-B19.png",1024,1178.237979891051],"Corruption_Front-C19":["/res/panelsoil/zenith/2x/Corruption_Front-C19.png",1024,1177.2902359782897],"Corruption_Front-D19":["/res/panelsoil/zenith/2x/Corruption_Front-D19.png",1024,1180.7418578835652],"Corruption_Front-A20":["/res/panelsoil/zenith/2x/Corruption_Front-A20.png",1024,1183.0825824230656],"Corruption_Front-B20":["/res/panelsoil/zenith/2x/Corruption_Front-B20.png",1024,1196.7447831137772],"Corruption_Front-C20":["/res/panelsoil/zenith/2x/Corruption_Front-C20.png",1024,1187.8892077083426],"Corruption_Front-D20":["/res/panelsoil/zenith/2x/Corruption_Front-D20.png",1024,1195.8647378830153],"Corruption_Front-A21":["/res/panelsoil/zenith/2x/Corruption_Front-A21.png",1024,1201.9745182524246],"Corruption_Front-D21":["/res/panelsoil/zenith/2x/Corruption_Front-D21.png",1024,1210.040224056153],"Corruption_Front-D22":["/res/panelsoil/zenith/2x/Corruption_Front-D22.png",1024,1223.9397012608479],"Hall_1A-A1":["/res/panelsoil/zenith/2x/Hall_1A-A1.png",1024,-401.6245609256047],"Hall_1A-B1":["/res/panelsoil/zenith/2x/Hall_1A-B1.png",1024,-399.95873894118324],"Hall_1A-C1":["/res/panelsoil/zenith/2x/Hall_1A-C1.png",1024,-398.0627637717033],"Hall_1A-D1":["/res/panelsoil/zenith/2x/Hall_1A-D1.png",1024,-389.246732023849],"Hall_1A-A2":["/res/panelsoil/zenith/2x/Hall_1A-A2.png",1024,-381.9238032584127],"Hall_1A-B2":["/res/panelsoil/zenith/2x/Hall_1A-B2.png",1024,-390.60199196424423],"Hall_1A-C2":["/res/panelsoil/zenith/2x/Hall_1A-C2.png",1024,-384.7080740414136],"Hall_1A-D2":["/res/panelsoil/zenith/2x/Hall_1A-D2.png",1024,-377.07554597775055],"Hall_1A-A3":["/res/panelsoil/zenith/2x/Hall_1A-A3.png",1024,-378.4559896831654],"Hall_1A-B3":["/res/panelsoil/zenith/2x/Hall_1A-B3.png",1024,-374.47946682260056],"Hall_1A-C3":["/res/panelsoil/zenith/2x/Hall_1A-C3.png",1024,-374.9676176159424],"Hall_1A-D3":["/res/panelsoil/zenith/2x/Hall_1A-D3.png",1024,-366.6622592092336],"Hall_1A-A4":["/res/panelsoil/zenith/2x/Hall_1A-A4.png",1024,-365.9483219320257],"Hall_1A-B4":["/res/panelsoil/zenith/2x/Hall_1A-B4.png",1024,-358.7064759918165],"Hall_1A-C4":["/res/panelsoil/zenith/2x/Hall_1A-C4.png",1024,-359.4351596543465],"Hall_1A-D4":["/res/panelsoil/zenith/2x/Hall_1A-D4.png",1024,-351.92112599133986],"Hall_Front-A1":["/res/panelsoil/zenith/2x/Hall_Front-A1.png",1024,-395.0636377699151],"Hall_Front-B1":["/res/panelsoil/zenith/2x/Hall_Front-B1.png",1024,-401.8593778548498],"Hall_Front-C1":["/res/panelsoil/zenith/2x/Hall_Front-C1.png",1024,-388.0130886475216],"Hall_Front-D1":["/res/panelsoil/zenith/2x/Hall_Front-D1.png",1024,-396.0519865370555],"Hall_Front-A2":["/res/panelsoil/zenith/2x/Hall_Front-A2.png",1024,-384.374455888481],"Hall_Front-B2":["/res/panelsoil/zenith/2x/Hall_Front-B2.png",1024,-382.2265200500511],"Hall_Front-C2":["/res/panelsoil/zenith/2x/Hall_Front-C2.png",1024,-380.59455770165414],"Hall_Front-D2":["/res/panelsoil/zenith/2x/Hall_Front-D2.png",1024,-378.9846147466638],"Hall_Front-A3":["/res/panelsoil/zenith/2x/Hall_Front-A3.png",1024,-374.61633772576766],"Hall_Front-B3":["/res/panelsoil/zenith/2x/Hall_Front-B3.png",1024,-366.8816952966748],"Hall_Front-C3":["/res/panelsoil/zenith/2x/Hall_Front-C3.png",1024,-367.67262374322485],"Hall_Front-D3":["/res/panelsoil/zenith/2x/Hall_Front-D3.png",1024,-365.63978632981355],"Hall_Front-A4":["/res/panelsoil/zenith/2x/Hall_Front-A4.png",1024,-368.0043579608582],"Hall_Front-B4":["/res/panelsoil/zenith/2x/Hall_Front-B4.png",1024,-358.1014619506721],"Hall_Front-C4":["/res/panelsoil/zenith/2x/Hall_Front-C4.png",1024,-358.3594310934923],"Hall_Front-D4":["/res/panelsoil/zenith/2x/Hall_Front-D4.png",1024,-358.406551385711],"Hotel_A1-A1":["/res/panelsoil/zenith/2x/Hotel_A1-A1.png",1024,-352.2684251674654],"Hotel_A1-B1":["/res/panelsoil/zenith/2x/Hotel_A1-B1.png",1024,-347.05063252895144],"Hotel_A1-C1":["/res/panelsoil/zenith/2x/Hotel_A1-C1.png",1024,-342.48075231400173],"Hotel_A1-D1":["/res/panelsoil/zenith/2x/Hotel_A1-D1.png",1024,-344.3087744462966],"Hotel_A1-A2":["/res/panelsoil/zenith/2x/Hotel_A1-A2.png",1024,-336.4525732117908],"Hotel_A1-B2":["/res/panelsoil/zenith/2x/Hotel_A1-B2.png",1024,-334.3149660109829],"Hotel_A1-C2":["/res/panelsoil/zenith/2x/Hotel_A1-C2.png",1024,-337.2225149423784],"Hotel_A1-D2":["/res/panelsoil/zenith/2x/Hotel_A1-D2.png",1024,-331.3903559365726],"Hotel_A1-A3":["/res/panelsoil/zenith/2x/Hotel_A1-A3.png",1024,-320.5510311350695],"Hotel_A1-B3":["/res/panelsoil/zenith/2x/Hotel_A1-B3.png",1024,-322.2961226800057],"Hotel_A1-C3":["/res/panelsoil/zenith/2x/Hotel_A1-C3.png",1024,-318.098047182702],"Hotel_A1-D3":["/res/panelsoil/zenith/2x/Hotel_A1-D3.png",1024,-317.87858505334134],"Hotel_A1-A4":["/res/panelsoil/zenith/2x/Hotel_A1-A4.png",1024,-310.5087824848513],"Hotel_A1-B4":["/res/panelsoil/zenith/2x/Hotel_A1-B4.png",1024,-305.00064175263765],"Hotel_A1-C4":["/res/panelsoil/zenith/2x/Hotel_A1-C4.png",1024,-309.9763314996614],"Hotel_A1-D4":["/res/panelsoil/zenith/2x/Hotel_A1-D4.png",1024,-299.41236354529974],"Hotel_A1-A5":["/res/panelsoil/zenith/2x/Hotel_A1-A5.png",1024,-302.11976070892166],"Hotel_A1-B5":["/res/panelsoil/zenith/2x/Hotel_A1-B5.png",1024,-298.9586758555229],"Hotel_A1-C5":["/res/panelsoil/zenith/2x/Hotel_A1-C5.png",1024,-292.2078376734008],"Hotel_A1-D5":["/res/panelsoil/zenith/2x/Hotel_A1-D5.png",1024,-292.64076112046587],"Hotel_B1-A1":["/res/panelsoil/zenith/2x/Hotel_B1-A1.png",1024,-282.4443917043702],"Hotel_B1-B1":["/res/panelsoil/zenith/2x/Hotel_B1-B1.png",1024,-278.4057295389801],"Hotel_B1-C1":["/res/panelsoil/zenith/2x/Hotel_B1-C1.png",1024,-278.2176817263716],"Hotel_B1-D1":["/res/panelsoil/zenith/2x/Hotel_B1-D1.png",1024,-276.14086778304284],"Hotel_B1-A2":["/res/panelsoil/zenith/2x/Hotel_B1-A2.png",1024,-274.6080573501221],"Hotel_B1-B2":["/res/panelsoil/zenith/2x/Hotel_B1-B2.png",1024,-264.9581956511501],"Hotel_B1-C2":["/res/panelsoil/zenith/2x/Hotel_B1-C2.png",1024,-257.00769940040766],"Hotel_B1-D2":["/res/panelsoil/zenith/2x/Hotel_B1-D2.png",1024,-257.2938100476044],"Hotel_B1-A3":["/res/panelsoil/zenith/2x/Hotel_B1-A3.png",1024,-254.4684052789442],"Hotel_B1-B3":["/res/panelsoil/zenith/2x/Hotel_B1-B3.png",1024,-257.83327775064237],"Hotel_B1-C3":["/res/panelsoil/zenith/2x/Hotel_B1-C3.png",1024,-243.8446869677371],"Hotel_B1-D3":["/res/panelsoil/zenith/2x/Hotel_B1-D3.png",1024,-252.2405846542687],"Hotel_B1-A4":["/res/panelsoil/zenith/2x/Hotel_B1-A4.png",1024,-245.49967974901082],"Hotel_B1-B4":["/res/panelsoil/zenith/2x/Hotel_B1-B4.png",1024,-236.29680917714825],"Hotel_B1-C4":["/res/panelsoil/zenith/2x/Hotel_B1-C4.png",1024,-239.81123422284136],"Hotel_B1-D4":["/res/panelsoil/zenith/2x/Hotel_B1-D4.png",1024,-236.572483188397],"Hotel_Back1-A1":["/res/panelsoil/zenith/2x/Hotel_Back1-A1.png",1024,-349.0872278726483],"Hotel_Back1-B1":["/res/panelsoil/zenith/2x/Hotel_Back1-B1.png",1024,-350.0497001354495],"Hotel_Back1-C1":["/res/panelsoil/zenith/2x/Hotel_Back1-C1.png",1024,-339.9924779267499],"Hotel_Back1-D1":["/res/panelsoil/zenith/2x/Hotel_Back1-D1.png",1024,-340.3904162885101],"Hotel_Back1-A2":["/res/panelsoil/zenith/2x/Hotel_Back1-A2.png",1024,-333.57906252811085],"Hotel_Back1-B2":["/res/panelsoil/zenith/2x/Hotel_Back1-B2.png",1024,-335.8694162808153],"Hotel_Back1-C2":["/res/panelsoil/zenith/2x/Hotel_Back1-C2.png",1024,-330.07526373751995],"Hotel_Back1-D2":["/res/panelsoil/zenith/2x/Hotel_Back1-D2.png",1024,-324.8716678715172],"Hotel_Back1-A3":["/res/panelsoil/zenith/2x/Hotel_Back1-A3.png",1024,-328.0570490530469],"Hotel_Back1-B3":["/res/panelsoil/zenith/2x/Hotel_Back1-B3.png",1024,-316.6193330171606],"Hotel_Back1-C3":["/res/panelsoil/zenith/2x/Hotel_Back1-C3.png",1024,-313.6192690358018],"Hotel_Back1-D3":["/res/panelsoil/zenith/2x/Hotel_Back1-D3.png",1024,-310.53750378486643],"Hotel_Back1-A4":["/res/panelsoil/zenith/2x/Hotel_Back1-A4.png",1024,-316.09902200634275],"Hotel_Back1-B4":["/res/panelsoil/zenith/2x/Hotel_Back1-B4.png",1024,-309.8585357401264],"Hotel_Back1-C4":["/res/panelsoil/zenith/2x/Hotel_Back1-C4.png",1024,-304.48901818448076],"Hotel_Back1-D4":["/res/panelsoil/zenith/2x/Hotel_Back1-D4.png",1024,-297.59853461786054],"Hotel_Back2-A1":["/res/panelsoil/zenith/2x/Hotel_Back2-A1.png",1024,-354.1171805586],"Hotel_Back2-B1":["/res/panelsoil/zenith/2x/Hotel_Back2-B1.png",1024,-347.43595293071047],"Hotel_Back2-C1":["/res/panelsoil/zenith/2x/Hotel_Back2-C1.png",1024,-344.1123021317095],"Hotel_Back2-D1":["/res/panelsoil/zenith/2x/Hotel_Back2-D1.png",1024,-341.4123648557175],"Hotel_Back2-A2":["/res/panelsoil/zenith/2x/Hotel_Back2-A2.png",1024,-342.78951731466316],"Hotel_Back2-B2":["/res/panelsoil/zenith/2x/Hotel_Back2-B2.png",1024,-337.820061639524],"Hotel_Back2-C2":["/res/panelsoil/zenith/2x/Hotel_Back2-C2.png",1024,-335.58537206889747],"Hotel_Back2-D2":["/res/panelsoil/zenith/2x/Hotel_Back2-D2.png",1024,-323.62631893252336],"Hotel_Back2-A3":["/res/panelsoil/zenith/2x/Hotel_Back2-A3.png",1024,-319.19761441091816],"Hotel_Back2-B3":["/res/panelsoil/zenith/2x/Hotel_Back2-B3.png",1024,-327.6508269642107],"Hotel_Back2-C3":["/res/panelsoil/zenith/2x/Hotel_Back2-C3.png",1024,-324.6583566441487],"Hotel_Back2-D3":["/res/panelsoil/zenith/2x/Hotel_Back2-D3.png",1024,-318.2394887946953],"Hotel_Front-A1":["/res/panelsoil/zenith/2x/Hotel_Front-A1.png",1024,-349.6202108687927],"Hotel_Front-B1":["/res/panelsoil/zenith/2x/Hotel_Front-B1.png",1024,-347.84491667724217],"Hotel_Front-C1":["/res/panelsoil/zenith/2x/Hotel_Front-C1.png",1024,-338.924859410595],"Hotel_Front-D1":["/res/panelsoil/zenith/2x/Hotel_Front-D1.png",1024,-339.233450483595],"Hotel_Front-A2":["/res/panelsoil/zenith/2x/Hotel_Front-A2.png",1024,-331.34937805969304],"Hotel_Front-B2":["/res/panelsoil/zenith/2x/Hotel_Front-B2.png",1024,-335.73526438746626],"Hotel_Front-C2":["/res/panelsoil/zenith/2x/Hotel_Front-C2.png",1024,-326.7058025768542],"Hotel_Front-D2":["/res/panelsoil/zenith/2x/Hotel_Front-D2.png",1024,-322.78336833512157],"Hotel_Front-A3":["/res/panelsoil/zenith/2x/Hotel_Front-A3.png",1024,-327.3849673608573],"Hotel_Front-B3":["/res/panelsoil/zenith/2x/Hotel_Front-B3.png",1024,-318.2916247569427],"Hotel_Front-C3":["/res/panelsoil/zenith/2x/Hotel_Front-C3.png",1024,-312.50936169211667],"Hotel_Front-D3":["/res/panelsoil/zenith/2x/Hotel_Front-D3.png",1024,-315.0404486960385],"Hotel_Front-A4":["/res/panelsoil/zenith/2x/Hotel_Front-A4.png",1024,-307.2451433186644],"Hotel_Front-B4":["/res/panelsoil/zenith/2x/Hotel_Front-B4.png",1024,-305.71019698745647],"Hotel_Front-C4":["/res/panelsoil/zenith/2x/Hotel_Front-C4.png",1024,-306.669638538927],"Hotel_Front-D4":["/res/panelsoil/zenith/2x/Hotel_Front-D4.png",1024,-301.0129316293172],"Hotel_Front-A5":["/res/panelsoil/zenith/2x/Hotel_Front-A5.png",1024,-306.078371593934],"Hotel_Front-B5":["/res/panelsoil/zenith/2x/Hotel_Front-B5.png",1024,-302.83991146669723],"Hotel_Front-C5":["/res/panelsoil/zenith/2x/Hotel_Front-C5.png",1024,-298.861993749709],"Hotel_Front-D5":["/res/panelsoil/zenith/2x/Hotel_Front-D5.png",1024,-290.70617940272615],"Hotel_Front-A6":["/res/panelsoil/zenith/2x/Hotel_Front-A6.png",1024,-281.7080339444447],"Hotel_Front-B6":["/res/panelsoil/zenith/2x/Hotel_Front-B6.png",1024,-287.94936427137304],"Hotel_Front-C6":["/res/panelsoil/zenith/2x/Hotel_Front-C6.png",1024,-283.2303142690862],"Hotel_Front-D6":["/res/panelsoil/zenith/2x/Hotel_Front-D6.png",1024,-272.0532482612671],"Hotel_Front-A7":["/res/panelsoil/zenith/2x/Hotel_Front-A7.png",1024,-273.228381484655],"Hotel_Front-B7":["/res/panelsoil/zenith/2x/Hotel_Front-B7.png",1024,-272.9412120637616],"Hotel_Front-C7":["/res/panelsoil/zenith/2x/Hotel_Front-C7.png",1024,-265.99094500487337],"Hotel_Front-D7":["/res/panelsoil/zenith/2x/Hotel_Front-D7.png",1024,-266.1082273075741],"Hotel_Front-A8":["/res/panelsoil/zenith/2x/Hotel_Front-A8.png",1024,-264.8379108023191],"Hotel_Front-B8":["/res/panelsoil/zenith/2x/Hotel_Front-B8.png",1024,-256.27888202770043],"Hotel_Front-C8":["/res/panelsoil/zenith/2x/Hotel_Front-C8.png",1024,-253.32874159417509],"Hotel_Front-D8":["/res/panelsoil/zenith/2x/Hotel_Front-D8.png",1024,-250.68249000035877],"Lab_A1-A1":["/res/panelsoil/zenith/2x/Lab_A1-A1.png",1024,480.66365557258683],"Lab_A1-B1":["/res/panelsoil/zenith/2x/Lab_A1-B1.png",1024,478.9555091631677],"Lab_A1-C1":["/res/panelsoil/zenith/2x/Lab_A1-C1.png",1024,483.2285798710731],"Lab_A1-D1":["/res/panelsoil/zenith/2x/Lab_A1-D1.png",1024,488.2803776626298],"Lab_A1-A2":["/res/panelsoil/zenith/2x/Lab_A1-A2.png",1024,490.2781358829044],"Lab_A1-B2":["/res/panelsoil/zenith/2x/Lab_A1-B2.png",1024,493.98595892196505],"Lab_A1-C2":["/res/panelsoil/zenith/2x/Lab_A1-C2.png",1024,498.700334547328],"Lab_A1-D2":["/res/panelsoil/zenith/2x/Lab_A1-D2.png",1024,498.7059477025713],"Lab_A1-A3":["/res/panelsoil/zenith/2x/Lab_A1-A3.png",1024,501.9149967570598],"Lab_A1-B3":["/res/panelsoil/zenith/2x/Lab_A1-B3.png",1024,508.58508292106853],"Lab_A1-C3":["/res/panelsoil/zenith/2x/Lab_A1-C3.png",1024,508.9735605606046],"Lab_A1-D3":["/res/panelsoil/zenith/2x/Lab_A1-D3.png",1024,507.0914444019526],"Lab_A1-A4":["/res/panelsoil/zenith/2x/Lab_A1-A4.png",1024,510.3696024683527],"Lab_A1-B4":["/res/panelsoil/zenith/2x/Lab_A1-B4.png",1024,520.6758314433587],"Lab_A1-C4":["/res/panelsoil/zenith/2x/Lab_A1-C4.png",1024,525.4926522950152],"Lab_A1-D4":["/res/panelsoil/zenith/2x/Lab_A1-D4.png",1024,524.298146355766],"Lab_A1-A5":["/res/panelsoil/zenith/2x/Lab_A1-A5.png",1024,528.656190828748],"Lab_A1-B5":["/res/panelsoil/zenith/2x/Lab_A1-B5.png",1024,532.2909226307361],"Lab_A1-C5":["/res/panelsoil/zenith/2x/Lab_A1-C5.png",1024,531.5694723223688],"Lab_A1-D5":["/res/panelsoil/zenith/2x/Lab_A1-D5.png",1024,534.5102064730764],"Lab_A1-A6":["/res/panelsoil/zenith/2x/Lab_A1-A6.png",1024,534.5565690982371],"Lab_A1-B6":["/res/panelsoil/zenith/2x/Lab_A1-B6.png",1024,541.3534387825689],"Lab_A1-C6":["/res/panelsoil/zenith/2x/Lab_A1-C6.png",1024,552.4439030277459],"Lab_A1-D6":["/res/panelsoil/zenith/2x/Lab_A1-D6.png",1024,553.6554579859347],"Lab_A1-A7":["/res/panelsoil/zenith/2x/Lab_A1-A7.png",1024,549.5837955706166],"Lab_A1-B7":["/res/panelsoil/zenith/2x/Lab_A1-B7.png",1024,550.3457351254473],"Lab_A1-C7":["/res/panelsoil/zenith/2x/Lab_A1-C7.png",1024,553.5527067521284],"Lab_A1-D7":["/res/panelsoil/zenith/2x/Lab_A1-D7.png",1024,567.9596422018104],"Lab_A2-A1":["/res/panelsoil/zenith/2x/Lab_A2-A1.png",1024,472.50687107355077],"Lab_A2-B1":["/res/panelsoil/zenith/2x/Lab_A2-B1.png",1024,481.28386004055704],"Lab_A2-C1":["/res/panelsoil/zenith/2x/Lab_A2-C1.png",1024,483.16352936099986],"Lab_A2-D1":["/res/panelsoil/zenith/2x/Lab_A2-D1.png",1024,483.0577369368127],"Lab_A2-A2":["/res/panelsoil/zenith/2x/Lab_A2-A2.png",1024,484.8518702084809],"Lab_A2-B2":["/res/panelsoil/zenith/2x/Lab_A2-B2.png",1024,490.86572281232935],"Lab_A2-C2":["/res/panelsoil/zenith/2x/Lab_A2-C2.png",1024,493.33651715856985],"Lab_A2-D2":["/res/panelsoil/zenith/2x/Lab_A2-D2.png",1024,504.5932002907505],"Lab_A2-A3":["/res/panelsoil/zenith/2x/Lab_A2-A3.png",1024,507.54717431910785],"Lab_A2-B3":["/res/panelsoil/zenith/2x/Lab_A2-B3.png",1024,506.9018045319623],"Lab_A2-C3":["/res/panelsoil/zenith/2x/Lab_A2-C3.png",1024,513.4514666178853],"Lab_A2-D3":["/res/panelsoil/zenith/2x/Lab_A2-D3.png",1024,511.75826800906566],"Lab_A2-A4":["/res/panelsoil/zenith/2x/Lab_A2-A4.png",1024,511.4776394580822],"Lab_A2-B4":["/res/panelsoil/zenith/2x/Lab_A2-B4.png",1024,516.4346962783891],"Lab_A2-C4":["/res/panelsoil/zenith/2x/Lab_A2-C4.png",1024,519.5827664380903],"Lab_A2-D4":["/res/panelsoil/zenith/2x/Lab_A2-D4.png",1024,523.521963230289],"Lab_A2-A5":["/res/panelsoil/zenith/2x/Lab_A2-A5.png",1024,531.3986940182713],"Lab_A2-B5":["/res/panelsoil/zenith/2x/Lab_A2-B5.png",1024,536.4523384272424],"Lab_A2-C5":["/res/panelsoil/zenith/2x/Lab_A2-C5.png",1024,529.2166085677327],"Lab_A2-D5":["/res/panelsoil/zenith/2x/Lab_A2-D5.png",1024,538.7488683065509],"Lab_A2-A6":["/res/panelsoil/zenith/2x/Lab_A2-A6.png",1024,538.7011867680005],"Lab_A2-B6":["/res/panelsoil/zenith/2x/Lab_A2-B6.png",1024,538.8177868330635],"Lab_A2-C6":["/res/panelsoil/zenith/2x/Lab_A2-C6.png",1024,549.2067841840947],"Lab_A2-D6":["/res/panelsoil/zenith/2x/Lab_A2-D6.png",1024,551.7856373714221],"Lab_A2-A7":["/res/panelsoil/zenith/2x/Lab_A2-A7.png",1024,559.1449690294693],"Lab_A2-B7":["/res/panelsoil/zenith/2x/Lab_A2-B7.png",1024,556.1257238336713],"Lab_A2-C7":["/res/panelsoil/zenith/2x/Lab_A2-C7.png",1024,561.7181153037368],"Lab_A2-D7":["/res/panelsoil/zenith/2x/Lab_A2-D7.png",1024,563.1153265548116],"Lab_A2-A8":["/res/panelsoil/zenith/2x/Lab_A2-A8.png",1024,562.2788383576293],"Lab_A2-B8":["/res/panelsoil/zenith/2x/Lab_A2-B8.png",1024,571.1127831564902],"Lab_A2-C8":["/res/panelsoil/zenith/2x/Lab_A2-C8.png",1024,566.6607998702254],"Lab_A2-D8":["/res/panelsoil/zenith/2x/Lab_A2-D8.png",1024,570.8125002070906],"Lab_B1-A1":["/res/panelsoil/zenith/2x/Lab_B1-A1.png",1024,584.7298160390189],"Lab_B1-B1":["/res/panelsoil/zenith/2x/Lab_B1-B1.png",1024,582.6055155929248],"Lab_B1-C1":["/res/panelsoil/zenith/2x/Lab_B1-C1.png",1024,584.4084954380079],"Lab_B1-D1":["/res/panelsoil/zenith/2x/Lab_B1-D1.png",1024,594.90031073],"Lab_B1-A2":["/res/panelsoil/zenith/2x/Lab_B1-A2.png",1024,599.843131131791],"Lab_B1-B2":["/res/panelsoil/zenith/2x/Lab_B1-B2.png",1024,594.9061647443295],"Lab_B1-C2":["/res/panelsoil/zenith/2x/Lab_B1-C2.png",1024,602.0040846321667],"Lab_B1-D2":["/res/panelsoil/zenith/2x/Lab_B1-D2.png",1024,602.2692294577834],"Lab_B1-A3":["/res/panelsoil/zenith/2x/Lab_B1-A3.png",1024,614.4210419394591],"Lab_B1-B3":["/res/panelsoil/zenith/2x/Lab_B1-B3.png",1024,611.4396950893295],"Lab_B1-C3":["/res/panelsoil/zenith/2x/Lab_B1-C3.png",1024,613.4009980095198],"Lab_B1-D3":["/res/panelsoil/zenith/2x/Lab_B1-D3.png",1024,612.3505710731406],"Lab_B1-A4":["/res/panelsoil/zenith/2x/Lab_B1-A4.png",1024,623.1482800215917],"Lab_B1-B4":["/res/panelsoil/zenith/2x/Lab_B1-B4.png",1024,624.2362746962972],"Lab_B1-C4":["/res/panelsoil/zenith/2x/Lab_B1-C4.png",1024,632.4426233557996],"Lab_B1-D4":["/res/panelsoil/zenith/2x/Lab_B1-D4.png",1024,632.2711360121502],"Lab_B1-A5":["/res/panelsoil/zenith/2x/Lab_B1-A5.png",1024,639.3133063970595],"Lab_B1-B5":["/res/panelsoil/zenith/2x/Lab_B1-B5.png",1024,640.2747637786555],"Lab_B1-C5":["/res/panelsoil/zenith/2x/Lab_B1-C5.png",1024,644.0373564389972],"Lab_B1-D5":["/res/panelsoil/zenith/2x/Lab_B1-D5.png",1024,645.0641310895202],"Lab_B1-A6":["/res/panelsoil/zenith/2x/Lab_B1-A6.png",1024,652.6391764479948],"Lab_B1-B6":["/res/panelsoil/zenith/2x/Lab_B1-B6.png",1024,644.8729902742419],"Lab_B1-C6":["/res/panelsoil/zenith/2x/Lab_B1-C6.png",1024,653.6277699603631],"Lab_B1-D6":["/res/panelsoil/zenith/2x/Lab_B1-D6.png",1024,655.1777162540195],"Lab_C1-A1":["/res/panelsoil/zenith/2x/Lab_C1-A1.png",1024,633.9278676906608],"Lab_C1-B1":["/res/panelsoil/zenith/2x/Lab_C1-B1.png",1024,634.4977829591684],"Lab_C1-C1":["/res/panelsoil/zenith/2x/Lab_C1-C1.png",1024,645.667667288575],"Lab_C1-D1":["/res/panelsoil/zenith/2x/Lab_C1-D1.png",1024,644.8560843002928],"Lab_C1-A2":["/res/panelsoil/zenith/2x/Lab_C1-A2.png",1024,643.3214257445226],"Lab_C1-B2":["/res/panelsoil/zenith/2x/Lab_C1-B2.png",1024,647.508240242946],"Lab_C1-C2":["/res/panelsoil/zenith/2x/Lab_C1-C2.png",1024,651.9502870921733],"Lab_C1-D2":["/res/panelsoil/zenith/2x/Lab_C1-D2.png",1024,652.5809102271548],"Lab_C1-A3":["/res/panelsoil/zenith/2x/Lab_C1-A3.png",1024,657.5936145688453],"Lab_C1-B3":["/res/panelsoil/zenith/2x/Lab_C1-B3.png",1024,665.5266236475894],"Lab_C1-C3":["/res/panelsoil/zenith/2x/Lab_C1-C3.png",1024,666.6143787948686],"Lab_C1-D3":["/res/panelsoil/zenith/2x/Lab_C1-D3.png",1024,669.0993749881475],"Lab_C1-A4":["/res/panelsoil/zenith/2x/Lab_C1-A4.png",1024,679.5177071727047],"Lab_C1-B4":["/res/panelsoil/zenith/2x/Lab_C1-B4.png",1024,674.8886105425184],"Lab_C1-C4":["/res/panelsoil/zenith/2x/Lab_C1-C4.png",1024,681.187563043121],"Lab_C1-D4":["/res/panelsoil/zenith/2x/Lab_C1-D4.png",1024,688.2970515189601],"Lab_C1-A5":["/res/panelsoil/zenith/2x/Lab_C1-A5.png",1024,689.2480727007775],"Lab_C1-B5":["/res/panelsoil/zenith/2x/Lab_C1-B5.png",1024,685.3577348029892],"Lab_C1-C5":["/res/panelsoil/zenith/2x/Lab_C1-C5.png",1024,696.4098113569523],"Lab_C1-D5":["/res/panelsoil/zenith/2x/Lab_C1-D5.png",1024,697.1679259880846],"Lab_C1-A6":["/res/panelsoil/zenith/2x/Lab_C1-A6.png",1024,702.67935645743],"Lab_C1-B6":["/res/panelsoil/zenith/2x/Lab_C1-B6.png",1024,704.6673444659697],"Lab_C1-C6":["/res/panelsoil/zenith/2x/Lab_C1-C6.png",1024,708.4613408084068],"Lab_C1-D6":["/res/panelsoil/zenith/2x/Lab_C1-D6.png",1024,708.9733912518492],"Lab_Front-A1":["/res/panelsoil/zenith/2x/Lab_Front-A1.png",1024,444.34664279720795],"Lab_Front-B1":["/res/panelsoil/zenith/2x/Lab_Front-B1.png",1024,447.50636115823306],"Lab_Front-C1":["/res/panelsoil/zenith/2x/Lab_Front-C1.png",1024,456.3887335476774],"Lab_Front-D1":["/res/panelsoil/zenith/2x/Lab_Front-D1.png",1024,463.7552311151973],"Lab_Front-A2":["/res/panelsoil/zenith/2x/Lab_Front-A2.png",1024,461.31229138005756],"Lab_Front-B2":["/res/panelsoil/zenith/2x/Lab_Front-B2.png",1024,468.92885787929396],"Lab_Front-C2":["/res/panelsoil/zenith/2x/Lab_Front-C2.png",1024,474.55303270175034],"Lab_Front-D2":["/res/panelsoil/zenith/2x/Lab_Front-D2.png",1024,466.9011699927968],"Lab_Front-A3":["/res/panelsoil/zenith/2x/Lab_Front-A3.png",1024,469.61877493415074],"Lab_Front-B3":["/res/panelsoil/zenith/2x/Lab_Front-B3.png",1024,476.07285137094084],"Lab_Front-C3":["/res/panelsoil/zenith/2x/Lab_Front-C3.png",1024,476.8260737959272],"Lab_Front-D3":["/res/panelsoil/zenith/2x/Lab_Front-D3.png",1024,488.7750084192186],"Lab_Front-A4":["/res/panelsoil/zenith/2x/Lab_Front-A4.png",1024,484.43712553845705],"Lab_Front-B4":["/res/panelsoil/zenith/2x/Lab_Front-B4.png",1024,491.464181305286],"Lab_Front-C4":["/res/panelsoil/zenith/2x/Lab_Front-C4.png",1024,493.7594224719536],"Lab_Front-D4":["/res/panelsoil/zenith/2x/Lab_Front-D4.png",1024,493.60981758363477],"Lab_Front-A5":["/res/panelsoil/zenith/2x/Lab_Front-A5.png",1024,494.98587942434],"Lab_Front-B5":["/res/panelsoil/zenith/2x/Lab_Front-B5.png",1024,498.476706472207],"Lab_Front-C5":["/res/panelsoil/zenith/2x/Lab_Front-C5.png",1024,500.5778226206409],"Lab_Front-D5":["/res/panelsoil/zenith/2x/Lab_Front-D5.png",1024,510.34332025329036],"Lab_Front-A6":["/res/panelsoil/zenith/2x/Lab_Front-A6.png",1024,507.01588778571283],"Lab_Front-B6":["/res/panelsoil/zenith/2x/Lab_Front-B6.png",1024,517.3024941126887],"Lab_Front-C6":["/res/panelsoil/zenith/2x/Lab_Front-C6.png",1024,514.3842049605934],"Lab_Front-D6":["/res/panelsoil/zenith/2x/Lab_Front-D6.png",1024,521.402861099902],"Lab_Front-A7":["/res/panelsoil/zenith/2x/Lab_Front-A7.png",1024,529.5242481656309],"Lab_Front-D7":["/res/panelsoil/zenith/2x/Lab_Front-D7.png",1024,530.3306274572425],"Lab_Front-A8":["/res/panelsoil/zenith/2x/Lab_Front-A8.png",1024,540.8339905888182],"Lab_Front-B8":["/res/panelsoil/zenith/2x/Lab_Front-B8.png",1024,535.9064354921703],"Lab_Front-C8":["/res/panelsoil/zenith/2x/Lab_Front-C8.png",1024,540.2294932689214],"Lab_Front-D8":["/res/panelsoil/zenith/2x/Lab_Front-D8.png",1024,543.1299553949085],"Lab_Front-A9":["/res/panelsoil/zenith/2x/Lab_Front-A9.png",1024,544.6902052960049],"Lab_Front-B9":["/res/panelsoil/zenith/2x/Lab_Front-B9.png",1024,555.5674814737812],"Lab_Front-C9":["/res/panelsoil/zenith/2x/Lab_Front-C9.png",1024,557.9809799919477],"Lab_Front-D9":["/res/panelsoil/zenith/2x/Lab_Front-D9.png",1024,563.1124047445206],"Lab_Front-A10":["/res/panelsoil/zenith/2x/Lab_Front-A10.png",1024,564.2625060623968],"Lab_Front-B10":["/res/panelsoil/zenith/2x/Lab_Front-B10.png",1024,565.6941740422731],"Lab_Front-D10":["/res/panelsoil/zenith/2x/Lab_Front-D10.png",1024,570.5980259963973],"Lab_Front-A11":["/res/panelsoil/zenith/2x/Lab_Front-A11.png",1024,574.8223596772394],"Lab_Front-B11":["/res/panelsoil/zenith/2x/Lab_Front-B11.png",1024,576.0374565418506],"Lab_Front-C11":["/res/panelsoil/zenith/2x/Lab_Front-C11.png",1024,586.6505247073686],"Lab_Front-D11":["/res/panelsoil/zenith/2x/Lab_Front-D11.png",1024,582.3422043466758],"Lab_Front-A12":["/res/panelsoil/zenith/2x/Lab_Front-A12.png",1024,589.8720250017593],"Lab_Front-B12":["/res/panelsoil/zenith/2x/Lab_Front-B12.png",1024,590.789625639925],"Lab_Front-C12":["/res/panelsoil/zenith/2x/Lab_Front-C12.png",1024,594.7840938746277],"Lab_Front-D12":["/res/panelsoil/zenith/2x/Lab_Front-D12.png",1024,591.9973165402625],"Lab_Front-A13":["/res/panelsoil/zenith/2x/Lab_Front-A13.png",1024,605.8280266729672],"Lab_Front-B13":["/res/panelsoil/zenith/2x/Lab_Front-B13.png",1024,602.2055469826767],"Lab_Front-C13":["/res/panelsoil/zenith/2x/Lab_Front-C13.png",1024,606.4269305785077],"Lab_Front-D13":["/res/panelsoil/zenith/2x/Lab_Front-D13.png",1024,605.7407660127546],"Lab_Front-A14":["/res/panelsoil/zenith/2x/Lab_Front-A14.png",1024,617.230465024036],"Lab_Front-B14":["/res/panelsoil/zenith/2x/Lab_Front-B14.png",1024,613.3198239131436],"Lab_Front-C14":["/res/panelsoil/zenith/2x/Lab_Front-C14.png",1024,615.7993417556831],"Lab_Front-D14":["/res/panelsoil/zenith/2x/Lab_Front-D14.png",1024,623.5612820008271],"Lab_Front-A15":["/res/panelsoil/zenith/2x/Lab_Front-A15.png",1024,629.1392687118606],"Lab_Front-B15":["/res/panelsoil/zenith/2x/Lab_Front-B15.png",1024,624.477856251247],"Lab_Front-C15":["/res/panelsoil/zenith/2x/Lab_Front-C15.png",1024,629.7283656974734],"Lab_Front-D15":["/res/panelsoil/zenith/2x/Lab_Front-D15.png",1024,629.6948335467831],"Lab_Front-A16":["/res/panelsoil/zenith/2x/Lab_Front-A16.png",1024,641.6230940522141],"Lab_Front-B16":["/res/panelsoil/zenith/2x/Lab_Front-B16.png",1024,636.7095706728197],"Lab_Front-C16":["/res/panelsoil/zenith/2x/Lab_Front-C16.png",1024,643.9497806111872],"Lab_Front-D16":["/res/panelsoil/zenith/2x/Lab_Front-D16.png",1024,645.8606626889623],"Lab_Front-A17":["/res/panelsoil/zenith/2x/Lab_Front-A17.png",1024,650.9451530667712],"Lab_Front-B17":["/res/panelsoil/zenith/2x/Lab_Front-B17.png",1024,652.5408767886659],"Lab_Front-C17":["/res/panelsoil/zenith/2x/Lab_Front-C17.png",1024,653.8563991527554],"Lab_Front-D17":["/res/panelsoil/zenith/2x/Lab_Front-D17.png",1024,654.0270315980255],"Lab_Front-A18":["/res/panelsoil/zenith/2x/Lab_Front-A18.png",1024,665.7058769672336],"Lab_Front-B18":["/res/panelsoil/zenith/2x/Lab_Front-B18.png",1024,660.1259795756074],"Lab_Front-C18":["/res/panelsoil/zenith/2x/Lab_Front-C18.png",1024,671.2843574419479],"Lab_Front-D18":["/res/panelsoil/zenith/2x/Lab_Front-D18.png",1024,677.5153194497254],"Lab_Front-A19":["/res/panelsoil/zenith/2x/Lab_Front-A19.png",1024,671.2622887634851],"Lab_Front-B19":["/res/panelsoil/zenith/2x/Lab_Front-B19.png",1024,681.8604276308209],"Lab_Front-C19":["/res/panelsoil/zenith/2x/Lab_Front-C19.png",1024,685.0717621955187],"Lab_Front-D19":["/res/panelsoil/zenith/2x/Lab_Front-D19.png",1024,687.7582725577549],"Lab_Front-A20":["/res/panelsoil/zenith/2x/Lab_Front-A20.png",1024,693.0897757030292],"Lab_Front-B20":["/res/panelsoil/zenith/2x/Lab_Front-B20.png",1024,686.3038123625304],"Lab_Front-C20":["/res/panelsoil/zenith/2x/Lab_Front-C20.png",1024,687.8581789478521],"Lab_Front-D20":["/res/panelsoil/zenith/2x/Lab_Front-D20.png",1024,699.7558543119001],"Museum_A1-A1":["/res/panelsoil/zenith/2x/Museum_A1-A1.png",1024,47.19096512616804],"Museum_A1-B1":["/res/panelsoil/zenith/2x/Museum_A1-B1.png",1024,58.26902041953197],"Museum_A1-C1":["/res/panelsoil/zenith/2x/Museum_A1-C1.png",1024,54.28703572210518],"Museum_A1-D1":["/res/panelsoil/zenith/2x/Museum_A1-D1.png",1024,61.61949496824553],"Museum_A1-A2":["/res/panelsoil/zenith/2x/Museum_A1-A2.png",1024,64.77284927804699],"Museum_A1-B2":["/res/panelsoil/zenith/2x/Museum_A1-B2.png",1024,60.31289706185288],"Museum_A1-C2":["/res/panelsoil/zenith/2x/Museum_A1-C2.png",1024,70.18350381920015],"Museum_A1-D2":["/res/panelsoil/zenith/2x/Museum_A1-D2.png",1024,72.48413862014576],"Museum_A1-A3":["/res/panelsoil/zenith/2x/Museum_A1-A3.png",1024,73.80207696891024],"Museum_A1-B3":["/res/panelsoil/zenith/2x/Museum_A1-B3.png",1024,81.690673728209],"Museum_A1-C3":["/res/panelsoil/zenith/2x/Museum_A1-C3.png",1024,84.62411227763619],"Museum_A1-D3":["/res/panelsoil/zenith/2x/Museum_A1-D3.png",1024,87.68774242935812],"Museum_A1-A4":["/res/panelsoil/zenith/2x/Museum_A1-A4.png",1024,90.67371155973088],"Museum_A1-B4":["/res/panelsoil/zenith/2x/Museum_A1-B4.png",1024,93.54470777863078],"Museum_A1-C4":["/res/panelsoil/zenith/2x/Museum_A1-C4.png",1024,94.09259257483532],"Museum_A1-D4":["/res/panelsoil/zenith/2x/Museum_A1-D4.png",1024,92.69050819863612],"Museum_A1-A5":["/res/panelsoil/zenith/2x/Museum_A1-A5.png",1024,96.16985710322992],"Museum_A1-B5":["/res/panelsoil/zenith/2x/Museum_A1-B5.png",1024,101.28035583754794],"Museum_A1-C5":["/res/panelsoil/zenith/2x/Museum_A1-C5.png",1024,108.08358610508346],"Museum_A1-D5":["/res/panelsoil/zenith/2x/Museum_A1-D5.png",1024,110.69767682718849],"Museum_B1-A1":["/res/panelsoil/zenith/2x/Museum_B1-A1.png",1024,124.56664762331744],"Museum_B1-B1":["/res/panelsoil/zenith/2x/Museum_B1-B1.png",1024,121.93333127710204],"Museum_B1-C1":["/res/panelsoil/zenith/2x/Museum_B1-C1.png",1024,129.93407583694471],"Museum_B1-D1":["/res/panelsoil/zenith/2x/Museum_B1-D1.png",1024,135.04323087280278],"Museum_B1-A2":["/res/panelsoil/zenith/2x/Museum_B1-A2.png",1024,132.0896462874611],"Museum_B1-B2":["/res/panelsoil/zenith/2x/Museum_B1-B2.png",1024,130.90474667056014],"Museum_B1-C2":["/res/panelsoil/zenith/2x/Museum_B1-C2.png",1024,132.78308246402923],"Museum_B1-D2":["/res/panelsoil/zenith/2x/Museum_B1-D2.png",1024,146.11528306913826],"Museum_B1-A3":["/res/panelsoil/zenith/2x/Museum_B1-A3.png",1024,140.26254096212418],"Museum_B1-B3":["/res/panelsoil/zenith/2x/Museum_B1-B3.png",1024,154.16026879808362],"Museum_B1-C3":["/res/panelsoil/zenith/2x/Museum_B1-C3.png",1024,149.82449312508894],"Museum_B1-D3":["/res/panelsoil/zenith/2x/Museum_B1-D3.png",1024,151.97745359324693],"Museum_B1-A4":["/res/panelsoil/zenith/2x/Museum_B1-A4.png",1024,155.13189612230082],"Museum_B1-B4":["/res/panelsoil/zenith/2x/Museum_B1-B4.png",1024,162.40796662575713],"Museum_B1-C4":["/res/panelsoil/zenith/2x/Museum_B1-C4.png",1024,158.63644299722182],"Museum_B1-D4":["/res/panelsoil/zenith/2x/Museum_B1-D4.png",1024,167.0460268684561],"Museum_B1-A5":["/res/panelsoil/zenith/2x/Museum_B1-A5.png",1024,172.87531492149813],"Museum_B1-B5":["/res/panelsoil/zenith/2x/Museum_B1-B5.png",1024,176.16368581161538],"Museum_B1-C5":["/res/panelsoil/zenith/2x/Museum_B1-C5.png",1024,180.87997831664188],"Museum_B1-D5":["/res/panelsoil/zenith/2x/Museum_B1-D5.png",1024,174.08435382007417],"Museum_C1-A1":["/res/panelsoil/zenith/2x/Museum_C1-A1.png",1024,188.03218229403544],"Museum_C1-B1":["/res/panelsoil/zenith/2x/Museum_C1-B1.png",1024,190.94767614005892],"Museum_C1-C1":["/res/panelsoil/zenith/2x/Museum_C1-C1.png",1024,202.60958493178845],"Museum_C1-D1":["/res/panelsoil/zenith/2x/Museum_C1-D1.png",1024,194.65652121720066],"Museum_C1-A2":["/res/panelsoil/zenith/2x/Museum_C1-A2.png",1024,201.4890446291766],"Museum_C1-B2":["/res/panelsoil/zenith/2x/Museum_C1-B2.png",1024,211.07785220056542],"Museum_C1-C2":["/res/panelsoil/zenith/2x/Museum_C1-C2.png",1024,205.1334394724854],"Museum_C1-D2":["/res/panelsoil/zenith/2x/Museum_C1-D2.png",1024,210.25559146385646],"Museum_C1-A3":["/res/panelsoil/zenith/2x/Museum_C1-A3.png",1024,218.58991251547513],"Museum_C1-B3":["/res/panelsoil/zenith/2x/Museum_C1-B3.png",1024,223.93260799922717],"Museum_C1-C3":["/res/panelsoil/zenith/2x/Museum_C1-C3.png",1024,224.11336329985366],"Museum_C1-D3":["/res/panelsoil/zenith/2x/Museum_C1-D3.png",1024,221.82878209541892],"Museum_C1-A4":["/res/panelsoil/zenith/2x/Museum_C1-A4.png",1024,232.40446539095325],"Museum_C1-B4":["/res/panelsoil/zenith/2x/Museum_C1-B4.png",1024,228.35473271042656],"Museum_C1-C4":["/res/panelsoil/zenith/2x/Museum_C1-C4.png",1024,237.81693806922266],"Museum_C1-D4":["/res/panelsoil/zenith/2x/Museum_C1-D4.png",1024,234.37858815954527],"Museum_C1-A5":["/res/panelsoil/zenith/2x/Museum_C1-A5.png",1024,237.96239498083204],"Museum_C1-B5":["/res/panelsoil/zenith/2x/Museum_C1-B5.png",1024,247.38159324369892],"Museum_C1-C5":["/res/panelsoil/zenith/2x/Museum_C1-C5.png",1024,245.8976390110998],"Museum_C1-D5":["/res/panelsoil/zenith/2x/Museum_C1-D5.png",1024,255.2781678737888],"Museum_C1-A6":["/res/panelsoil/zenith/2x/Museum_C1-A6.png",1024,248.57224204372525],"Museum_C1-B6":["/res/panelsoil/zenith/2x/Museum_C1-B6.png",1024,261.40174012004184],"Museum_C1-C6":["/res/panelsoil/zenith/2x/Museum_C1-C6.png",1024,265.1866172615188],"Museum_C1-D6":["/res/panelsoil/zenith/2x/Museum_C1-D6.png",1024,257.17579910534147],"Museum_C2-A1":["/res/panelsoil/zenith/2x/Museum_C2-A1.png",1024,187.24858594172744],"Museum_C2-B1":["/res/panelsoil/zenith/2x/Museum_C2-B1.png",1024,189.9764743935605],"Museum_C2-C1":["/res/panelsoil/zenith/2x/Museum_C2-C1.png",1024,196.17416811684447],"Museum_C2-D1":["/res/panelsoil/zenith/2x/Museum_C2-D1.png",1024,199.2950147516308],"Museum_C2-A2":["/res/panelsoil/zenith/2x/Museum_C2-A2.png",1024,206.53244552371655],"Museum_C2-B2":["/res/panelsoil/zenith/2x/Museum_C2-B2.png",1024,210.26796453409884],"Museum_C2-C2":["/res/panelsoil/zenith/2x/Museum_C2-C2.png",1024,215.89483138401098],"Museum_C2-D2":["/res/panelsoil/zenith/2x/Museum_C2-D2.png",1024,208.0694949736222],"Museum_C2-A3":["/res/panelsoil/zenith/2x/Museum_C2-A3.png",1024,220.71038818481566],"Museum_C2-B3":["/res/panelsoil/zenith/2x/Museum_C2-B3.png",1024,214.2142953580689],"Museum_C2-C3":["/res/panelsoil/zenith/2x/Museum_C2-C3.png",1024,226.29906744355387],"Museum_C2-D3":["/res/panelsoil/zenith/2x/Museum_C2-D3.png",1024,230.29414030424346],"Museum_C2-A4":["/res/panelsoil/zenith/2x/Museum_C2-A4.png",1024,227.7604349188731],"Museum_C2-B4":["/res/panelsoil/zenith/2x/Museum_C2-B4.png",1024,229.38237490541866],"Museum_C2-C4":["/res/panelsoil/zenith/2x/Museum_C2-C4.png",1024,237.38897416160444],"Museum_C2-D4":["/res/panelsoil/zenith/2x/Museum_C2-D4.png",1024,232.01456089347028],"Museum_C2-A5":["/res/panelsoil/zenith/2x/Museum_C2-A5.png",1024,245.80931747914155],"Museum_C2-B5":["/res/panelsoil/zenith/2x/Museum_C2-B5.png",1024,242.20271405405913],"Museum_C2-C5":["/res/panelsoil/zenith/2x/Museum_C2-C5.png",1024,249.4661634157849],"Museum_C2-D5":["/res/panelsoil/zenith/2x/Museum_C2-D5.png",1024,252.52874581660132],"Museum_C2-A6":["/res/panelsoil/zenith/2x/Museum_C2-A6.png",1024,258.65554533879265],"Museum_C2-B6":["/res/panelsoil/zenith/2x/Museum_C2-B6.png",1024,255.687437059238],"Museum_C2-C6":["/res/panelsoil/zenith/2x/Museum_C2-C6.png",1024,253.58097964421944],"Museum_C2-D6":["/res/panelsoil/zenith/2x/Museum_C2-D6.png",1024,261.1797622266168],"Museum_Front-A1":["/res/panelsoil/zenith/2x/Museum_Front-A1.png",1024,46.85007655152482],"Museum_Front-B1":["/res/panelsoil/zenith/2x/Museum_Front-B1.png",1024,48.805809311351105],"Museum_Front-C1":["/res/panelsoil/zenith/2x/Museum_Front-C1.png",1024,56.03547005115161],"Museum_Front-D1":["/res/panelsoil/zenith/2x/Museum_Front-D1.png",1024,62.45938522759212],"Museum_Front-A2":["/res/panelsoil/zenith/2x/Museum_Front-A2.png",1024,63.45469257350993],"Museum_Front-B2":["/res/panelsoil/zenith/2x/Museum_Front-B2.png",1024,64.39866466835649],"Museum_Front-C2":["/res/panelsoil/zenith/2x/Museum_Front-C2.png",1024,68.91995439119331],"Museum_Front-D2":["/res/panelsoil/zenith/2x/Museum_Front-D2.png",1024,65.98123146001556],"Museum_Front-A3":["/res/panelsoil/zenith/2x/Museum_Front-A3.png",1024,72.72480254376981],"Museum_Front-B3":["/res/panelsoil/zenith/2x/Museum_Front-B3.png",1024,74.77974359248589],"Museum_Front-C3":["/res/panelsoil/zenith/2x/Museum_Front-C3.png",1024,77.58674825819074],"Museum_Front-D3":["/res/panelsoil/zenith/2x/Museum_Front-D3.png",1024,83.79195255420443],"Museum_Front-A4":["/res/panelsoil/zenith/2x/Museum_Front-A4.png",1024,85.71492896599172],"Museum_Front-B4":["/res/panelsoil/zenith/2x/Museum_Front-B4.png",1024,89.08006445931721],"Museum_Front-C4":["/res/panelsoil/zenith/2x/Museum_Front-C4.png",1024,97.5335999759843],"Museum_Front-D4":["/res/panelsoil/zenith/2x/Museum_Front-D4.png",1024,99.66536026925503],"Museum_Front-A5":["/res/panelsoil/zenith/2x/Museum_Front-A5.png",1024,101.76741155107955],"Museum_Front-B5":["/res/panelsoil/zenith/2x/Museum_Front-B5.png",1024,99.71074037613703],"Museum_Front-C5":["/res/panelsoil/zenith/2x/Museum_Front-C5.png",1024,104.61364947472318],"Museum_Front-D5":["/res/panelsoil/zenith/2x/Museum_Front-D5.png",1024,112.32798523318856],"Museum_Front-A6":["/res/panelsoil/zenith/2x/Museum_Front-A6.png",1024,108.99898089869643],"Museum_Front-B6":["/res/panelsoil/zenith/2x/Museum_Front-B6.png",1024,121.3902956930771],"Museum_Front-C6":["/res/panelsoil/zenith/2x/Museum_Front-C6.png",1024,119.1166405208709],"Museum_Front-D6":["/res/panelsoil/zenith/2x/Museum_Front-D6.png",1024,127.15851607291452],"Museum_Front-A7":["/res/panelsoil/zenith/2x/Museum_Front-A7.png",1024,125.96124555041291],"Museum_Front-B7":["/res/panelsoil/zenith/2x/Museum_Front-B7.png",1024,130.90731766642443],"Museum_Front-C7":["/res/panelsoil/zenith/2x/Museum_Front-C7.png",1024,133.72530579739006],"Museum_Front-D7":["/res/panelsoil/zenith/2x/Museum_Front-D7.png",1024,138.05417530865293],"Museum_Front-A8":["/res/panelsoil/zenith/2x/Museum_Front-A8.png",1024,135.02027125141274],"Museum_Front-B8":["/res/panelsoil/zenith/2x/Museum_Front-B8.png",1024,138.0540919328076],"Museum_Front-C8":["/res/panelsoil/zenith/2x/Museum_Front-C8.png",1024,144.55285606744272],"Museum_Front-D8":["/res/panelsoil/zenith/2x/Museum_Front-D8.png",1024,149.54485062929945],"Museum_Front-A9":["/res/panelsoil/zenith/2x/Museum_Front-A9.png",1024,153.1002917887823],"Museum_Front-B9":["/res/panelsoil/zenith/2x/Museum_Front-B9.png",1024,149.15790729616626],"Museum_Front-C9":["/res/panelsoil/zenith/2x/Museum_Front-C9.png",1024,152.92404244167636],"Museum_Front-D9":["/res/panelsoil/zenith/2x/Museum_Front-D9.png",1024,163.5921221429884],"Museum_Front-A10":["/res/panelsoil/zenith/2x/Museum_Front-A10.png",1024,160.17776987171425],"Museum_Front-B10":["/res/panelsoil/zenith/2x/Museum_Front-B10.png",1024,160.40201570808188],"Museum_Front-C10":["/res/panelsoil/zenith/2x/Museum_Front-C10.png",1024,165.5229173167923],"Museum_Front-D10":["/res/panelsoil/zenith/2x/Museum_Front-D10.png",1024,168.07916030890104],"Museum_Front-A11":["/res/panelsoil/zenith/2x/Museum_Front-A11.png",1024,170.0110347387045],"Museum_Front-B11":["/res/panelsoil/zenith/2x/Museum_Front-B11.png",1024,174.58291517625585],"Museum_Front-C11":["/res/panelsoil/zenith/2x/Museum_Front-C11.png",1024,187.19263201971089],"Museum_Front-D11":["/res/panelsoil/zenith/2x/Museum_Front-D11.png",1024,179.6490904989525],"Museum_Front-A12":["/res/panelsoil/zenith/2x/Museum_Front-A12.png",1024,182.45033620676972],"Museum_Front-B12":["/res/panelsoil/zenith/2x/Museum_Front-B12.png",1024,188.50737411417253],"Museum_Front-C12":["/res/panelsoil/zenith/2x/Museum_Front-C12.png",1024,189.52670454576432],"Museum_Front-D12":["/res/panelsoil/zenith/2x/Museum_Front-D12.png",1024,202.58093705624523],"Museum_Front-A13":["/res/panelsoil/zenith/2x/Museum_Front-A13.png",1024,204.79343421432708],"Museum_Front-B13":["/res/panelsoil/zenith/2x/Museum_Front-B13.png",1024,205.6248167865046],"Museum_Front-C13":["/res/panelsoil/zenith/2x/Museum_Front-C13.png",1024,209.64351680829043],"Museum_Front-D13":["/res/panelsoil/zenith/2x/Museum_Front-D13.png",1024,208.4570007136507],"Museum_Front-A14":["/res/panelsoil/zenith/2x/Museum_Front-A14.png",1024,206.4399759032446],"Museum_Front-B14":["/res/panelsoil/zenith/2x/Museum_Front-B14.png",1024,221.71753431942608],"Museum_Front-D14":["/res/panelsoil/zenith/2x/Museum_Front-D14.png",1024,225.37792805013567],"Museum_Front-A15":["/res/panelsoil/zenith/2x/Museum_Front-A15.png",1024,229.59388031991273],"Museum_Front-B15":["/res/panelsoil/zenith/2x/Museum_Front-B15.png",1024,228.0518463298049],"Museum_Front-C15":["/res/panelsoil/zenith/2x/Museum_Front-C15.png",1024,225.9294267023009],"Museum_Front-D15":["/res/panelsoil/zenith/2x/Museum_Front-D15.png",1024,237.6713181731855],"Museum_Front-A16":["/res/panelsoil/zenith/2x/Museum_Front-A16.png",1024,232.13923984869015],"Museum_Front-B16":["/res/panelsoil/zenith/2x/Museum_Front-B16.png",1024,235.076516679908],"Museum_Front-C16":["/res/panelsoil/zenith/2x/Museum_Front-C16.png",1024,246.97234299418272],"Museum_Front-D16":["/res/panelsoil/zenith/2x/Museum_Front-D16.png",1024,245.03330311401285],"Office_A1-A1":["/res/panelsoil/zenith/2x/Office_A1-A1.png",1024,259.9799802107113],"Office_A1-B1":["/res/panelsoil/zenith/2x/Office_A1-B1.png",1024,259.6101305703191],"Office_A1-C1":["/res/panelsoil/zenith/2x/Office_A1-C1.png",1024,258.9776772751179],"Office_A1-D1":["/res/panelsoil/zenith/2x/Office_A1-D1.png",1024,270.4032721636474],"Office_A1-A2":["/res/panelsoil/zenith/2x/Office_A1-A2.png",1024,263.69420829352833],"Office_A1-B2":["/res/panelsoil/zenith/2x/Office_A1-B2.png",1024,273.6005472610225],"Office_A1-C2":["/res/panelsoil/zenith/2x/Office_A1-C2.png",1024,278.8956362291009],"Office_A1-D2":["/res/panelsoil/zenith/2x/Office_A1-D2.png",1024,281.85269462952493],"Office_A1-A3":["/res/panelsoil/zenith/2x/Office_A1-A3.png",1024,275.5557476316469],"Office_A1-B3":["/res/panelsoil/zenith/2x/Office_A1-B3.png",1024,288.18639801989264],"Office_A1-C3":["/res/panelsoil/zenith/2x/Office_A1-C3.png",1024,283.78634425915334],"Office_A1-D3":["/res/panelsoil/zenith/2x/Office_A1-D3.png",1024,286.2460592315835],"Office_A1-A4":["/res/panelsoil/zenith/2x/Office_A1-A4.png",1024,298.5281106762168],"Office_A1-B4":["/res/panelsoil/zenith/2x/Office_A1-B4.png",1024,300.75133284595455],"Office_A1-C4":["/res/panelsoil/zenith/2x/Office_A1-C4.png",1024,295.6153100577409],"Office_A1-D4":["/res/panelsoil/zenith/2x/Office_A1-D4.png",1024,297.32658430962226],"Office_A1-A5":["/res/panelsoil/zenith/2x/Office_A1-A5.png",1024,308.8481656647392],"Office_A1-B5":["/res/panelsoil/zenith/2x/Office_A1-B5.png",1024,310.96332953727534],"Office_A1-C5":["/res/panelsoil/zenith/2x/Office_A1-C5.png",1024,309.64183684230375],"Office_A1-D5":["/res/panelsoil/zenith/2x/Office_A1-D5.png",1024,318.055375204887],"Office_A1-A6":["/res/panelsoil/zenith/2x/Office_A1-A6.png",1024,321.03123687379735],"Office_A1-B6":["/res/panelsoil/zenith/2x/Office_A1-B6.png",1024,320.96419081971504],"Office_A1-C6":["/res/panelsoil/zenith/2x/Office_A1-C6.png",1024,319.575997713832],"Office_A1-D6":["/res/panelsoil/zenith/2x/Office_A1-D6.png",1024,324.55429615543255],"Office_A1-A7":["/res/panelsoil/zenith/2x/Office_A1-A7.png",1024,324.8201251242191],"Office_A1-B7":["/res/panelsoil/zenith/2x/Office_A1-B7.png",1024,337.11956198568805],"Office_A1-C7":["/res/panelsoil/zenith/2x/Office_A1-C7.png",1024,331.81953059969675],"Office_A1-D7":["/res/panelsoil/zenith/2x/Office_A1-D7.png",1024,335.67542960751535],"Office_B1-A1":["/res/panelsoil/zenith/2x/Office_B1-A1.png",1024,351.9472123322371],"Office_B1-B1":["/res/panelsoil/zenith/2x/Office_B1-B1.png",1024,360.20409428953457],"Office_B1-C1":["/res/panelsoil/zenith/2x/Office_B1-C1.png",1024,364.55290072766206],"Office_B1-D1":["/res/panelsoil/zenith/2x/Office_B1-D1.png",1024,363.563202657005],"Office_B1-A2":["/res/panelsoil/zenith/2x/Office_B1-A2.png",1024,363.49290863308073],"Office_B1-B2":["/res/panelsoil/zenith/2x/Office_B1-B2.png",1024,369.83441915769674],"Office_B1-C2":["/res/panelsoil/zenith/2x/Office_B1-C2.png",1024,377.780581660746],"Office_B1-D2":["/res/panelsoil/zenith/2x/Office_B1-D2.png",1024,382.1002908602671],"Office_B1-A3":["/res/panelsoil/zenith/2x/Office_B1-A3.png",1024,384.1738717639261],"Office_B1-B3":["/res/panelsoil/zenith/2x/Office_B1-B3.png",1024,386.6392719367387],"Office_B1-C3":["/res/panelsoil/zenith/2x/Office_B1-C3.png",1024,380.6980420834272],"Office_B1-D3":["/res/panelsoil/zenith/2x/Office_B1-D3.png",1024,384.6879260433678],"Office_B1-A4":["/res/panelsoil/zenith/2x/Office_B1-A4.png",1024,397.22008557342707],"Office_B1-B4":["/res/panelsoil/zenith/2x/Office_B1-B4.png",1024,392.3575433957187],"Office_B1-C4":["/res/panelsoil/zenith/2x/Office_B1-C4.png",1024,403.31171036246684],"Office_B1-D4":["/res/panelsoil/zenith/2x/Office_B1-D4.png",1024,401.96392175782984],"Office_B2-A1":["/res/panelsoil/zenith/2x/Office_B2-A1.png",1024,351.24084173802964],"Office_B2-B1":["/res/panelsoil/zenith/2x/Office_B2-B1.png",1024,360.1363425700878],"Office_B2-C1":["/res/panelsoil/zenith/2x/Office_B2-C1.png",1024,360.1288112254928],"Office_B2-D1":["/res/panelsoil/zenith/2x/Office_B2-D1.png",1024,366.12423448311984],"Office_B2-A2":["/res/panelsoil/zenith/2x/Office_B2-A2.png",1024,366.8489529497421],"Office_B2-B2":["/res/panelsoil/zenith/2x/Office_B2-B2.png",1024,373.6245447728551],"Office_B2-C2":["/res/panelsoil/zenith/2x/Office_B2-C2.png",1024,369.4353194651133],"Office_B2-D2":["/res/panelsoil/zenith/2x/Office_B2-D2.png",1024,372.3188756713985],"Office_B2-A3":["/res/panelsoil/zenith/2x/Office_B2-A3.png",1024,384.9989698655411],"Office_B2-B3":["/res/panelsoil/zenith/2x/Office_B2-B3.png",1024,386.58769757853497],"Office_B2-C3":["/res/panelsoil/zenith/2x/Office_B2-C3.png",1024,387.5236495271379],"Office_B2-D3":["/res/panelsoil/zenith/2x/Office_B2-D3.png",1024,391.21448274541495],"Office_B2-A4":["/res/panelsoil/zenith/2x/Office_B2-A4.png",1024,388.6557985224537],"Office_B2-B4":["/res/panelsoil/zenith/2x/Office_B2-B4.png",1024,395.1797486587537],"Office_B2-C4":["/res/panelsoil/zenith/2x/Office_B2-C4.png",1024,399.25707430215033],"Office_B2-D4":["/res/panelsoil/zenith/2x/Office_B2-D4.png",1024,406.69997083912375],"Office_Front-A1":["/res/panelsoil/zenith/2x/Office_Front-A1.png",1024,249.6020512086174],"Office_Front-B1":["/res/panelsoil/zenith/2x/Office_Front-B1.png",1024,252.23225290202845],"Office_Front-C1":["/res/panelsoil/zenith/2x/Office_Front-C1.png",1024,250.53452113999322],"Office_Front-D1":["/res/panelsoil/zenith/2x/Office_Front-D1.png",1024,254.14937503955156],"Office_Front-A2":["/res/panelsoil/zenith/2x/Office_Front-A2.png",1024,268.14692158766144],"Office_Front-B2":["/res/panelsoil/zenith/2x/Office_Front-B2.png",1024,263.58812107401076],"Office_Front-C2":["/res/panelsoil/zenith/2x/Office_Front-C2.png",1024,264.23548091198614],"Office_Front-D2":["/res/panelsoil/zenith/2x/Office_Front-D2.png",1024,267.58273298533146],"Office_Front-A3":["/res/panelsoil/zenith/2x/Office_Front-A3.png",1024,275.6346218720404],"Office_Front-B3":["/res/panelsoil/zenith/2x/Office_Front-B3.png",1024,281.0353221342039],"Office_Front-C3":["/res/panelsoil/zenith/2x/Office_Front-C3.png",1024,278.09815113483586],"Office_Front-D3":["/res/panelsoil/zenith/2x/Office_Front-D3.png",1024,283.47819583312196],"Office_Front-A4":["/res/panelsoil/zenith/2x/Office_Front-A4.png",1024,282.98236942891094],"Office_Front-B4":["/res/panelsoil/zenith/2x/Office_Front-B4.png",1024,291.13595153135776],"Office_Front-C4":["/res/panelsoil/zenith/2x/Office_Front-C4.png",1024,298.5501919597199],"Office_Front-D4":["/res/panelsoil/zenith/2x/Office_Front-D4.png",1024,297.85564092556695],"Office_Front-A5":["/res/panelsoil/zenith/2x/Office_Front-A5.png",1024,297.89760132941706],"Office_Front-B5":["/res/panelsoil/zenith/2x/Office_Front-B5.png",1024,298.1402990935222],"Office_Front-C5":["/res/panelsoil/zenith/2x/Office_Front-C5.png",1024,306.40271873108196],"Office_Front-D5":["/res/panelsoil/zenith/2x/Office_Front-D5.png",1024,313.48446206466815],"Office_Front-A6":["/res/panelsoil/zenith/2x/Office_Front-A6.png",1024,308.0172649772152],"Office_Front-B6":["/res/panelsoil/zenith/2x/Office_Front-B6.png",1024,311.7005987076547],"Office_Front-C6":["/res/panelsoil/zenith/2x/Office_Front-C6.png",1024,320.2391230846407],"Office_Front-D6":["/res/panelsoil/zenith/2x/Office_Front-D6.png",1024,322.6101670345459],"Office_Front-A7":["/res/panelsoil/zenith/2x/Office_Front-A7.png",1024,329.5735713842881],"Office_Front-B7":["/res/panelsoil/zenith/2x/Office_Front-B7.png",1024,333.62927233172],"Office_Front-C7":["/res/panelsoil/zenith/2x/Office_Front-C7.png",1024,327.8182612071598],"Office_Front-D7":["/res/panelsoil/zenith/2x/Office_Front-D7.png",1024,335.99162311343963],"Office_Front-A8":["/res/panelsoil/zenith/2x/Office_Front-A8.png",1024,339.65259076052297],"Office_Front-B8":["/res/panelsoil/zenith/2x/Office_Front-B8.png",1024,336.30531753020546],"Office_Front-C8":["/res/panelsoil/zenith/2x/Office_Front-C8.png",1024,344.1983610548814],"Office_Front-D8":["/res/panelsoil/zenith/2x/Office_Front-D8.png",1024,347.5412162195976],"Office_Front-A9":["/res/panelsoil/zenith/2x/Office_Front-A9.png",1024,352.85748800995736],"Office_Front-B9":["/res/panelsoil/zenith/2x/Office_Front-B9.png",1024,354.004008539073],"Office_Front-C9":["/res/panelsoil/zenith/2x/Office_Front-C9.png",1024,360.6746285344373],"Office_Front-D9":["/res/panelsoil/zenith/2x/Office_Front-D9.png",1024,359.3922073057151],"Office_Front-A11":["/res/panelsoil/zenith/2x/Office_Front-A11.png",1024,380.3261703201629],"Office_Front-B11":["/res/panelsoil/zenith/2x/Office_Front-B11.png",1024,378.0317262941142],"Office_Front-C11":["/res/panelsoil/zenith/2x/Office_Front-C11.png",1024,384.2255431224346],"Office_Front-D11":["/res/panelsoil/zenith/2x/Office_Front-D11.png",1024,382.5034314493086],"Office_Front-A12":["/res/panelsoil/zenith/2x/Office_Front-A12.png",1024,390.35974647728733],"Office_Front-B12":["/res/panelsoil/zenith/2x/Office_Front-B12.png",1024,396.3491262286027],"Office_Front-C12":["/res/panelsoil/zenith/2x/Office_Front-C12.png",1024,396.0134057441169],"Office_Front-D12":["/res/panelsoil/zenith/2x/Office_Front-D12.png",1024,397.0991147680031],"Office_Front-A13":["/res/panelsoil/zenith/2x/Office_Front-A13.png",1024,399.08308726711357],"Office_Front-B13":["/res/panelsoil/zenith/2x/Office_Front-B13.png",1024,402.59390862593744],"Office_Front-C13":["/res/panelsoil/zenith/2x/Office_Front-C13.png",1024,408.0581288617609],"Office_Front-D13":["/res/panelsoil/zenith/2x/Office_Front-D13.png",1024,415.3315516764753],"Office_Front-A14":["/res/panelsoil/zenith/2x/Office_Front-A14.png",1024,406.26102590911887],"Office_Front-C14":["/res/panelsoil/zenith/2x/Office_Front-C14.png",1024,423.51688160790656],"Office_Front-D14":["/res/panelsoil/zenith/2x/Office_Front-D14.png",1024,422.92489477026635],"Office_Front-A15":["/res/panelsoil/zenith/2x/Office_Front-A15.png",1024,424.145947551784],"Office_Front-B15":["/res/panelsoil/zenith/2x/Office_Front-B15.png",1024,426.7275997925895],"Office_Front-C15":["/res/panelsoil/zenith/2x/Office_Front-C15.png",1024,433.26238936764184],"Office_Front-D15":["/res/panelsoil/zenith/2x/Office_Front-D15.png",1024,434.14120032324456],"Office_Front-A16":["/res/panelsoil/zenith/2x/Office_Front-A16.png",1024,441.9584692066523],"Office_Front-B16":["/res/panelsoil/zenith/2x/Office_Front-B16.png",1024,437.8359882545017],"Office_Front-C16":["/res/panelsoil/zenith/2x/Office_Front-C16.png",1024,441.0633203883878],"Office_Front-D16":["/res/panelsoil/zenith/2x/Office_Front-D16.png",1024,444.0437753226371],"Platform_Back-A1":["/res/panelsoil/zenith/2x/Platform_Back-A1.png",1024,1254.7875812075097],"Platform_Back-B1":["/res/panelsoil/zenith/2x/Platform_Back-B1.png",1024,1251.299224395777],"Platform_Back-C1":["/res/panelsoil/zenith/2x/Platform_Back-C1.png",1024,1253.087342575187],"Platform_Back-D1":["/res/panelsoil/zenith/2x/Platform_Back-D1.png",1024,1263.1617079033347],"Platform_Back-A2":["/res/panelsoil/zenith/2x/Platform_Back-A2.png",1024,1260.214057574501],"Platform_Back-B2":["/res/panelsoil/zenith/2x/Platform_Back-B2.png",1024,1267.974824551569],"Platform_Back-C2":["/res/panelsoil/zenith/2x/Platform_Back-C2.png",1024,1272.6554903131894],"Platform_Back-D2":["/res/panelsoil/zenith/2x/Platform_Back-D2.png",1024,1266.5763712289859],"Platform_Back-A3":["/res/panelsoil/zenith/2x/Platform_Back-A3.png",1024,1278.9212674646758],"Platform_Back-B3":["/res/panelsoil/zenith/2x/Platform_Back-B3.png",1024,1274.1617276209631],"Platform_Back-C3":["/res/panelsoil/zenith/2x/Platform_Back-C3.png",1024,1282.3489254812162],"Platform_Back-D3":["/res/panelsoil/zenith/2x/Platform_Back-D3.png",1024,1281.2942206434636],"Platform_Back-A4":["/res/panelsoil/zenith/2x/Platform_Back-A4.png",1024,1290.1765873697332],"Platform_Back-B4":["/res/panelsoil/zenith/2x/Platform_Back-B4.png",1024,1289.029541107575],"Platform_Back-C4":["/res/panelsoil/zenith/2x/Platform_Back-C4.png",1024,1289.0502675799692],"Platform_Back-D4":["/res/panelsoil/zenith/2x/Platform_Back-D4.png",1024,1301.5686536254304],"Platform_Front-A1":["/res/panelsoil/zenith/2x/Platform_Front-A1.png",1024,1253.0692008675412],"Platform_Front-B1":["/res/panelsoil/zenith/2x/Platform_Front-B1.png",1024,1248.5845533109436],"Platform_Front-C1":["/res/panelsoil/zenith/2x/Platform_Front-C1.png",1024,1257.460673182929],"Platform_Front-D1":["/res/panelsoil/zenith/2x/Platform_Front-D1.png",1024,1262.4696150693464],"Platform_Front-A2":["/res/panelsoil/zenith/2x/Platform_Front-A2.png",1024,1263.4304414773846],"Platform_Front-B2":["/res/panelsoil/zenith/2x/Platform_Front-B2.png",1024,1266.7769517515153],"Platform_Front-C2":["/res/panelsoil/zenith/2x/Platform_Front-C2.png",1024,1264.945495446154],"Platform_Front-D2":["/res/panelsoil/zenith/2x/Platform_Front-D2.png",1024,1273.4833985884063],"Platform_Front-A3":["/res/panelsoil/zenith/2x/Platform_Front-A3.png",1024,1269.4595360920543],"Platform_Front-B3":["/res/panelsoil/zenith/2x/Platform_Front-B3.png",1024,1281.8189388482567],"Platform_Front-C3":["/res/panelsoil/zenith/2x/Platform_Front-C3.png",1024,1285.6912659472875],"Platform_Front-D3":["/res/panelsoil/zenith/2x/Platform_Front-D3.png",1024,1290.2685670757064],"Platform_Front-A4":["/res/panelsoil/zenith/2x/Platform_Front-A4.png",1024,1282.8676536877424],"Platform_Front-B4":["/res/panelsoil/zenith/2x/Platform_Front-B4.png",1024,1295.162908764853],"Platform_Front-C4":["/res/panelsoil/zenith/2x/Platform_Front-C4.png",1024,1294.1524378370343],"Platform_Front-D4":["/res/panelsoil/zenith/2x/Platform_Front-D4.png",1024,1293.6767778028845]},"4x":{"Arena_A1-A1":["/res/panelsoil/zenith/4x/Arena_A1-A1.png",1024,-97.06685448363316],"Arena_A1-B1":["/res/panelsoil/zenith/4x/Arena_A1-B1.png",1024,-98.77313962127208],"Arena_A1-C1":["/res/panelsoil/zenith/4x/Arena_A1-C1.png",1024,-89.35584539549119],"Arena_A1-D1":["/res/panelsoil/zenith/4x/Arena_A1-D1.png",1024,-92.10151302911814],"Arena_A1-A2":["/res/panelsoil/zenith/4x/Arena_A1-A2.png",1024,-82.76462801280866],"Arena_A1-B2":["/res/panelsoil/zenith/4x/Arena_A1-B2.png",1024,-88.22690294972493],"Arena_A1-C2":["/res/panelsoil/zenith/4x/Arena_A1-C2.png",1024,-78.38676509404898],"Arena_A1-D2":["/res/panelsoil/zenith/4x/Arena_A1-D2.png",1024,-78.2869920654431],"Arena_A1-A3":["/res/panelsoil/zenith/4x/Arena_A1-A3.png",1024,-71.66715561004384],"Arena_A1-B3":["/res/panelsoil/zenith/4x/Arena_A1-B3.png",1024,-73.02966592421001],"Arena_A1-C3":["/res/panelsoil/zenith/4x/Arena_A1-C3.png",1024,-65.89704887904965],"Arena_A1-D3":["/res/panelsoil/zenith/4x/Arena_A1-D3.png",1024,-62.83880409773005],"Arena_A1-A4":["/res/panelsoil/zenith/4x/Arena_A1-A4.png",1024,-56.30740226658689],"Arena_A1-B4":["/res/panelsoil/zenith/4x/Arena_A1-B4.png",1024,-60.77597418001759],"Arena_A1-C4":["/res/panelsoil/zenith/4x/Arena_A1-C4.png",1024,-56.75472332976999],"Arena_A1-D4":["/res/panelsoil/zenith/4x/Arena_A1-D4.png",1024,-57.52891421339376],"Arena_A1-A5":["/res/panelsoil/zenith/4x/Arena_A1-A5.png",1024,-44.07828500766345],"Arena_A1-B5":["/res/panelsoil/zenith/4x/Arena_A1-B5.png",1024,-41.87429662046316],"Arena_A1-C5":["/res/panelsoil/zenith/4x/Arena_A1-C5.png",1024,-40.551240936145376],"Arena_A1-D5":["/res/panelsoil/zenith/4x/Arena_A1-D5.png",1024,-35.48836736676866],"Arena_B1-A1":["/res/panelsoil/zenith/4x/Arena_B1-A1.png",1024,-48.67354217246617],"Arena_B1-B1":["/res/panelsoil/zenith/4x/Arena_B1-B1.png",1024,-37.6459647794023],"Arena_B1-C1":["/res/panelsoil/zenith/4x/Arena_B1-C1.png",1024,-32.99841092216446],"Arena_B1-D1":["/res/panelsoil/zenith/4x/Arena_B1-D1.png",1024,-34.15839681068023],"Arena_B1-A2":["/res/panelsoil/zenith/4x/Arena_B1-A2.png",1024,-30.60686290132748],"Arena_B1-B2":["/res/panelsoil/zenith/4x/Arena_B1-B2.png",1024,-25.831700654441427],"Arena_B1-C2":["/res/panelsoil/zenith/4x/Arena_B1-C2.png",1024,-22.07147786988741],"Arena_B1-D2":["/res/panelsoil/zenith/4x/Arena_B1-D2.png",1024,-28.063712670433873],"Arena_B1-A3":["/res/panelsoil/zenith/4x/Arena_B1-A3.png",1024,-23.89796048760872],"Arena_B1-B3":["/res/panelsoil/zenith/4x/Arena_B1-B3.png",1024,-22.886432141093135],"Arena_B1-C3":["/res/panelsoil/zenith/4x/Arena_B1-C3.png",1024,-16.24013233821678],"Arena_B1-D3":["/res/panelsoil/zenith/4x/Arena_B1-D3.png",1024,-8.360585414866089],"Arena_B1-A4":["/res/panelsoil/zenith/4x/Arena_B1-A4.png",1024,-3.124331786577093],"Arena_B1-B4":["/res/panelsoil/zenith/4x/Arena_B1-B4.png",1024,-10.610297817688181],"Arena_B1-C4":["/res/panelsoil/zenith/4x/Arena_B1-C4.png",1024,3.3734205794555248],"Arena_B1-D4":["/res/panelsoil/zenith/4x/Arena_B1-D4.png",1024,5.600822378771285],"Arena_B1-A5":["/res/panelsoil/zenith/4x/Arena_B1-A5.png",1024,8.126846452720569],"Arena_B1-B5":["/res/panelsoil/zenith/4x/Arena_B1-B5.png",1024,5.290867322253941],"Arena_B1-C5":["/res/panelsoil/zenith/4x/Arena_B1-C5.png",1024,11.465365001809179],"Arena_B1-D5":["/res/panelsoil/zenith/4x/Arena_B1-D5.png",1024,12.938032801385312],"Arena_B2-A1":["/res/panelsoil/zenith/4x/Arena_B2-A1.png",1024,-45.97352187640337],"Arena_B2-B1":["/res/panelsoil/zenith/4x/Arena_B2-B1.png",1024,-42.2463730089848],"Arena_B2-C1":["/res/panelsoil/zenith/4x/Arena_B2-C1.png",1024,-38.35226027582508],"Arena_B2-D1":["/res/panelsoil/zenith/4x/Arena_B2-D1.png",1024,-34.941614134313646],"Arena_B2-A2":["/res/panelsoil/zenith/4x/Arena_B2-A2.png",1024,-35.076671081591044],"Arena_B2-B2":["/res/panelsoil/zenith/4x/Arena_B2-B2.png",1024,-31.817311430079513],"Arena_B2-C2":["/res/panelsoil/zenith/4x/Arena_B2-C2.png",1024,-24.554001029589855],"Arena_B2-D2":["/res/panelsoil/zenith/4x/Arena_B2-D2.png",1024,-21.471097309697164],"Arena_B2-A3":["/res/panelsoil/zenith/4x/Arena_B2-A3.png",1024,-16.349530238372886],"Arena_B2-B3":["/res/panelsoil/zenith/4x/Arena_B2-B3.png",1024,-14.968313281026692],"Arena_B2-C3":["/res/panelsoil/zenith/4x/Arena_B2-C3.png",1024,-10.773020956982597],"Arena_B2-D3":["/res/panelsoil/zenith/4x/Arena_B2-D3.png",1024,-7.03770961990924],"Arena_B3-A1":["/res/panelsoil/zenith/4x/Arena_B3-A1.png",1024,-31.40771496424873],"Arena_B3-B1":["/res/panelsoil/zenith/4x/Arena_B3-B1.png",1024,-24.616334074289995],"Arena_B3-C1":["/res/panelsoil/zenith/4x/Arena_B3-C1.png",1024,-21.033950711586336],"Arena_B3-D1":["/res/panelsoil/zenith/4x/Arena_B3-D1.png",1024,-23.519112461670243],"Arena_B3-A2":["/res/panelsoil/zenith/4x/Arena_B3-A2.png",1024,-20.925884528992615],"Arena_B3-B2":["/res/panelsoil/zenith/4x/Arena_B3-B2.png",1024,-17.322714127520822],"Arena_B3-C2":["/res/panelsoil/zenith/4x/Arena_B3-C2.png",1024,-10.78853745727608],"Arena_B3-D2":["/res/panelsoil/zenith/4x/Arena_B3-D2.png",1024,-16.958825006538987],"Arena_B3-A3":["/res/panelsoil/zenith/4x/Arena_B3-A3.png",1024,-9.937656720462854],"Arena_B3-C3":["/res/panelsoil/zenith/4x/Arena_B3-C3.png",1024,-3.0669464316052153],"Arena_B3-D3":["/res/panelsoil/zenith/4x/Arena_B3-D3.png",1024,-.7207821499337896],"Arena_B3-A4":["/res/panelsoil/zenith/4x/Arena_B3-A4.png",1024,8.607637540726596],"Arena_B3-D4":["/res/panelsoil/zenith/4x/Arena_B3-D4.png",1024,18.906799373832456],"Arena_B3-A5":["/res/panelsoil/zenith/4x/Arena_B3-A5.png",1024,11.886826190369874],"Arena_B3-D5":["/res/panelsoil/zenith/4x/Arena_B3-D5.png",1024,31.933061608851318],"Arena_C1-B1":["/res/panelsoil/zenith/4x/Arena_C1-B1.png",1024,34.731192685462936],"Arena_C1-C1":["/res/panelsoil/zenith/4x/Arena_C1-C1.png",1024,34.92054535644745],"Arena_C1-B2":["/res/panelsoil/zenith/4x/Arena_C1-B2.png",1024,47.47099730707944],"Arena_C1-C2":["/res/panelsoil/zenith/4x/Arena_C1-C2.png",1024,46.01193544682598],"Arena_Front-A1":["/res/panelsoil/zenith/4x/Arena_Front-A1.png",1024,-102.96630800122149],"Arena_Front-B1":["/res/panelsoil/zenith/4x/Arena_Front-B1.png",1024,-93.97180617908197],"Arena_Front-C1":["/res/panelsoil/zenith/4x/Arena_Front-C1.png",1024,-90.55044766456086],"Arena_Front-D1":["/res/panelsoil/zenith/4x/Arena_Front-D1.png",1024,-87.82374893968625],"Arena_Front-A2":["/res/panelsoil/zenith/4x/Arena_Front-A2.png",1024,-87.03596749490711],"Arena_Front-B2":["/res/panelsoil/zenith/4x/Arena_Front-B2.png",1024,-78.20929317621597],"Arena_Front-C2":["/res/panelsoil/zenith/4x/Arena_Front-C2.png",1024,-77.95229747244747],"Arena_Front-D2":["/res/panelsoil/zenith/4x/Arena_Front-D2.png",1024,-76.80887333564931],"Arena_Front-A3":["/res/panelsoil/zenith/4x/Arena_Front-A3.png",1024,-72.12361709922371],"Arena_Front-B3":["/res/panelsoil/zenith/4x/Arena_Front-B3.png",1024,-75.62463570407654],"Arena_Front-C3":["/res/panelsoil/zenith/4x/Arena_Front-C3.png",1024,-70.59056039679574],"Arena_Front-D3":["/res/panelsoil/zenith/4x/Arena_Front-D3.png",1024,-68.79745075429526],"Arena_Front-A4":["/res/panelsoil/zenith/4x/Arena_Front-A4.png",1024,-59.41159449264432],"Arena_Front-B4":["/res/panelsoil/zenith/4x/Arena_Front-B4.png",1024,-60.41509819356812],"Arena_Front-C4":["/res/panelsoil/zenith/4x/Arena_Front-C4.png",1024,-56.08865121177436],"Arena_Front-D4":["/res/panelsoil/zenith/4x/Arena_Front-D4.png",1024,-55.04783288702904],"Arena_Front-A5":["/res/panelsoil/zenith/4x/Arena_Front-A5.png",1024,-48.11174200456822],"Arena_Front-B5":["/res/panelsoil/zenith/4x/Arena_Front-B5.png",1024,-49.778125093188855],"Arena_Front-C5":["/res/panelsoil/zenith/4x/Arena_Front-C5.png",1024,-46.326698382590024],"Arena_Front-D5":["/res/panelsoil/zenith/4x/Arena_Front-D5.png",1024,-42.46726520800624],"Arena_Front-A6":["/res/panelsoil/zenith/4x/Arena_Front-A6.png",1024,-40.58859598732733],"Arena_Front-B6":["/res/panelsoil/zenith/4x/Arena_Front-B6.png",1024,-39.77077000587806],"Arena_Front-C6":["/res/panelsoil/zenith/4x/Arena_Front-C6.png",1024,-31.92713537788378],"Arena_Front-D6":["/res/panelsoil/zenith/4x/Arena_Front-D6.png",1024,-28.797282177310656],"Arena_Front-A7":["/res/panelsoil/zenith/4x/Arena_Front-A7.png",1024,-22.91118105135873],"Arena_Front-B7":["/res/panelsoil/zenith/4x/Arena_Front-B7.png",1024,-21.054203388050603],"Arena_Front-C7":["/res/panelsoil/zenith/4x/Arena_Front-C7.png",1024,-14.494356622527496],"Arena_Front-D7":["/res/panelsoil/zenith/4x/Arena_Front-D7.png",1024,-21.19725750503782],"Arena_Front-A8":["/res/panelsoil/zenith/4x/Arena_Front-A8.png",1024,-9.52610016026646],"Arena_Front-D8":["/res/panelsoil/zenith/4x/Arena_Front-D8.png",1024,2.7578522072375105],"Arena_Front-A9":["/res/panelsoil/zenith/4x/Arena_Front-A9.png",1024,1.7457737084464746],"Arena_Front-B9":["/res/panelsoil/zenith/4x/Arena_Front-B9.png",1024,9.15091429385483],"Arena_Front-C9":["/res/panelsoil/zenith/4x/Arena_Front-C9.png",1024,10.74687468757211],"Arena_Front-D9":["/res/panelsoil/zenith/4x/Arena_Front-D9.png",1024,4.114248156546518],"Arena_Front-A10":["/res/panelsoil/zenith/4x/Arena_Front-A10.png",1024,13.229066545048141],"Arena_Front-B10":["/res/panelsoil/zenith/4x/Arena_Front-B10.png",1024,11.930220847536145],"Arena_Front-C10":["/res/panelsoil/zenith/4x/Arena_Front-C10.png",1024,13.386006144713374],"Arena_Front-D10":["/res/panelsoil/zenith/4x/Arena_Front-D10.png",1024,24.378321443259672],"Arena_Front-A11":["/res/panelsoil/zenith/4x/Arena_Front-A11.png",1024,19.248370333413483],"Arena_Front-B11":["/res/panelsoil/zenith/4x/Arena_Front-B11.png",1024,28.967541690178372],"Arena_Front-C11":["/res/panelsoil/zenith/4x/Arena_Front-C11.png",1024,35.04320433627585],"Arena_Front-D11":["/res/panelsoil/zenith/4x/Arena_Front-D11.png",1024,33.54205965367434],"Arena_Front-A12":["/res/panelsoil/zenith/4x/Arena_Front-A12.png",1024,33.92105636839847],"Arena_Front-B12":["/res/panelsoil/zenith/4x/Arena_Front-B12.png",1024,45.04822270725345],"Arena_Front-C12":["/res/panelsoil/zenith/4x/Arena_Front-C12.png",1024,38.793387953025146],"Arena_Front-D12":["/res/panelsoil/zenith/4x/Arena_Front-D12.png",1024,43.07831369127259],"Casino_A1-A1":["/res/panelsoil/zenith/4x/Casino_A1-A1.png",1024,-254.58683032398577],"Casino_A1-B1":["/res/panelsoil/zenith/4x/Casino_A1-B1.png",1024,-241.1817804056192],"Casino_A1-C1":["/res/panelsoil/zenith/4x/Casino_A1-C1.png",1024,-238.6580234966655],"Casino_A1-A2":["/res/panelsoil/zenith/4x/Casino_A1-A2.png",1024,-233.66024840804388],"Casino_A1-B2":["/res/panelsoil/zenith/4x/Casino_A1-B2.png",1024,-236.0079662600959],"Casino_A1-C2":["/res/panelsoil/zenith/4x/Casino_A1-C2.png",1024,-234.43089885987038],"Casino_A1-A3":["/res/panelsoil/zenith/4x/Casino_A1-A3.png",1024,-228.75754471163097],"Casino_A1-B3":["/res/panelsoil/zenith/4x/Casino_A1-B3.png",1024,-220.83566335816377],"Casino_A1-C3":["/res/panelsoil/zenith/4x/Casino_A1-C3.png",1024,-211.79410812601873],"Casino_A1-A4":["/res/panelsoil/zenith/4x/Casino_A1-A4.png",1024,-217.8396186872136],"Casino_A1-B4":["/res/panelsoil/zenith/4x/Casino_A1-B4.png",1024,-213.73364099590052],"Casino_A1-C4":["/res/panelsoil/zenith/4x/Casino_A1-C4.png",1024,-208.67369702447533],"Casino_A1-A5":["/res/panelsoil/zenith/4x/Casino_A1-A5.png",1024,-196.1749628389307],"Casino_A1-B5":["/res/panelsoil/zenith/4x/Casino_A1-B5.png",1024,-199.37592518250298],"Casino_A1-C5":["/res/panelsoil/zenith/4x/Casino_A1-C5.png",1024,-187.59384229991073],"Casino_A1-A6":["/res/panelsoil/zenith/4x/Casino_A1-A6.png",1024,-187.59325206018104],"Casino_A1-B6":["/res/panelsoil/zenith/4x/Casino_A1-B6.png",1024,-189.08276510244013],"Casino_A1-C6":["/res/panelsoil/zenith/4x/Casino_A1-C6.png",1024,-176.69363601435452],"Casino_A1-A7":["/res/panelsoil/zenith/4x/Casino_A1-A7.png",1024,-178.17257563648536],"Casino_A1-B7":["/res/panelsoil/zenith/4x/Casino_A1-B7.png",1024,-175.8691158136216],"Casino_A1-C7":["/res/panelsoil/zenith/4x/Casino_A1-C7.png",1024,-165.5829593117211],"Casino_A1b-A1":["/res/panelsoil/zenith/4x/Casino_A1b-A1.png",1024,-243.8721933771122],"Casino_A1b-D1":["/res/panelsoil/zenith/4x/Casino_A1b-D1.png",1024,-241.5972863649871],"Casino_A1b-A2":["/res/panelsoil/zenith/4x/Casino_A1b-A2.png",1024,-242.8492329833741],"Casino_A1b-D2":["/res/panelsoil/zenith/4x/Casino_A1b-D2.png",1024,-223.71089959046202],"Casino_A1b-A3":["/res/panelsoil/zenith/4x/Casino_A1b-A3.png",1024,-228.53768170115853],"Casino_A1b-D3":["/res/panelsoil/zenith/4x/Casino_A1b-D3.png",1024,-217.73876588923827],"Casino_A1b-A4":["/res/panelsoil/zenith/4x/Casino_A1b-A4.png",1024,-215.5867842727743],"Casino_A1b-D4":["/res/panelsoil/zenith/4x/Casino_A1b-D4.png",1024,-208.27915816305884],"Casino_A1b-A5":["/res/panelsoil/zenith/4x/Casino_A1b-A5.png",1024,-202.55098772776535],"Casino_A1b-D5":["/res/panelsoil/zenith/4x/Casino_A1b-D5.png",1024,-195.68853039535142],"Casino_A1b-A6":["/res/panelsoil/zenith/4x/Casino_A1b-A6.png",1024,-191.30305740070938],"Casino_A1b-D6":["/res/panelsoil/zenith/4x/Casino_A1b-D6.png",1024,-177.91853892604442],"Casino_B1-A1":["/res/panelsoil/zenith/4x/Casino_B1-A1.png",1024,-131.3280238096875],"Casino_B1-B1":["/res/panelsoil/zenith/4x/Casino_B1-B1.png",1024,-131.21861599851383],"Casino_B1-C1":["/res/panelsoil/zenith/4x/Casino_B1-C1.png",1024,-125.33563340564316],"Casino_B1-D1":["/res/panelsoil/zenith/4x/Casino_B1-D1.png",1024,-128.660534685431],"Casino_B1-A2":["/res/panelsoil/zenith/4x/Casino_B1-A2.png",1024,-126.40571237759467],"Casino_B1-B2":["/res/panelsoil/zenith/4x/Casino_B1-B2.png",1024,-116.48269082152784],"Casino_B1-C2":["/res/panelsoil/zenith/4x/Casino_B1-C2.png",1024,-118.2068919936416],"Casino_B1-D2":["/res/panelsoil/zenith/4x/Casino_B1-D2.png",1024,-112.6539144823225],"Casino_B1-A3":["/res/panelsoil/zenith/4x/Casino_B1-A3.png",1024,-109.96981563971816],"Casino_B1-B3":["/res/panelsoil/zenith/4x/Casino_B1-B3.png",1024,-101.90712299027007],"Casino_B1-C3":["/res/panelsoil/zenith/4x/Casino_B1-C3.png",1024,-105.83851835444882],"Casino_B1-D3":["/res/panelsoil/zenith/4x/Casino_B1-D3.png",1024,-101.5423942934817],"Casino_B1-A4":["/res/panelsoil/zenith/4x/Casino_B1-A4.png",1024,-89.71318230143471],"Casino_B1-B4":["/res/panelsoil/zenith/4x/Casino_B1-B4.png",1024,-98.52544878335713],"Casino_B1-C4":["/res/panelsoil/zenith/4x/Casino_B1-C4.png",1024,-83.12939566614473],"Casino_B1-D4":["/res/panelsoil/zenith/4x/Casino_B1-D4.png",1024,-80.60526857364172],"Casino_B2-A1":["/res/panelsoil/zenith/4x/Casino_B2-A1.png",1024,-128.15838480160426],"Casino_B2-B1":["/res/panelsoil/zenith/4x/Casino_B2-B1.png",1024,-127.08300200740189],"Casino_B2-C1":["/res/panelsoil/zenith/4x/Casino_B2-C1.png",1024,-127.08335516249171],"Casino_B2-D1":["/res/panelsoil/zenith/4x/Casino_B2-D1.png",1024,-129.01849493609046],"Casino_B2-A2":["/res/panelsoil/zenith/4x/Casino_B2-A2.png",1024,-119.08002072609825],"Casino_B2-B2":["/res/panelsoil/zenith/4x/Casino_B2-B2.png",1024,-122.45988177286787],"Casino_B2-C2":["/res/panelsoil/zenith/4x/Casino_B2-C2.png",1024,-117.19221671378256],"Casino_B2-D2":["/res/panelsoil/zenith/4x/Casino_B2-D2.png",1024,-107.40331042538077],"Casino_B2-A3":["/res/panelsoil/zenith/4x/Casino_B2-A3.png",1024,-109.95841812304911],"Casino_B2-B3":["/res/panelsoil/zenith/4x/Casino_B2-B3.png",1024,-110.87452545605686],"Casino_B2-C3":["/res/panelsoil/zenith/4x/Casino_B2-C3.png",1024,-102.09560089604432],"Casino_B2-D3":["/res/panelsoil/zenith/4x/Casino_B2-D3.png",1024,-98.02145090159242],"Casino_Front-A1":["/res/panelsoil/zenith/4x/Casino_Front-A1.png",1024,-244.11305558191646],"Casino_Front-B1":["/res/panelsoil/zenith/4x/Casino_Front-B1.png",1024,-246.57413751065044],"Casino_Front-C1":["/res/panelsoil/zenith/4x/Casino_Front-C1.png",1024,-247.68967878823298],"Casino_Front-D1":["/res/panelsoil/zenith/4x/Casino_Front-D1.png",1024,-240.36816481832335],"Casino_Front-A2":["/res/panelsoil/zenith/4x/Casino_Front-A2.png",1024,-236.59950759967398],"Casino_Front-B2":["/res/panelsoil/zenith/4x/Casino_Front-B2.png",1024,-238.08547982949196],"Casino_Front-C2":["/res/panelsoil/zenith/4x/Casino_Front-C2.png",1024,-234.45151955752902],"Casino_Front-D2":["/res/panelsoil/zenith/4x/Casino_Front-D2.png",1024,-231.38628271786263],"Casino_Front-A3":["/res/panelsoil/zenith/4x/Casino_Front-A3.png",1024,-228.89376103933412],"Casino_Front-B3":["/res/panelsoil/zenith/4x/Casino_Front-B3.png",1024,-222.11349537588842],"Casino_Front-C3":["/res/panelsoil/zenith/4x/Casino_Front-C3.png",1024,-219.29665468885105],"Casino_Front-D3":["/res/panelsoil/zenith/4x/Casino_Front-D3.png",1024,-213.3681958430248],"Casino_Front-A4":["/res/panelsoil/zenith/4x/Casino_Front-A4.png",1024,-211.120058184511],"Casino_Front-B4":["/res/panelsoil/zenith/4x/Casino_Front-B4.png",1024,-212.01650875382236],"Casino_Front-C4":["/res/panelsoil/zenith/4x/Casino_Front-C4.png",1024,-205.91964226113504],"Casino_Front-D4":["/res/panelsoil/zenith/4x/Casino_Front-D4.png",1024,-204.13491034151625],"Casino_Front-A5":["/res/panelsoil/zenith/4x/Casino_Front-A5.png",1024,-200.42623787412452],"Casino_Front-B5":["/res/panelsoil/zenith/4x/Casino_Front-B5.png",1024,-198.0323268277825],"Casino_Front-C5":["/res/panelsoil/zenith/4x/Casino_Front-C5.png",1024,-194.49897033917821],"Casino_Front-D5":["/res/panelsoil/zenith/4x/Casino_Front-D5.png",1024,-187.83732558399552],"Casino_Front-A6":["/res/panelsoil/zenith/4x/Casino_Front-A6.png",1024,-181.38723640844702],"Casino_Front-B6":["/res/panelsoil/zenith/4x/Casino_Front-B6.png",1024,-182.69754365033776],"Casino_Front-C6":["/res/panelsoil/zenith/4x/Casino_Front-C6.png",1024,-181.80047248126667],"Casino_Front-D6":["/res/panelsoil/zenith/4x/Casino_Front-D6.png",1024,-184.07160667216976],"Casino_Front-A7":["/res/panelsoil/zenith/4x/Casino_Front-A7.png",1024,-171.36186850227307],"Casino_Front-B7":["/res/panelsoil/zenith/4x/Casino_Front-B7.png",1024,-173.11462809938547],"Casino_Front-C7":["/res/panelsoil/zenith/4x/Casino_Front-C7.png",1024,-168.4233871598113],"Casino_Front-D7":["/res/panelsoil/zenith/4x/Casino_Front-D7.png",1024,-170.1909292354299],"Casino_Front-A8":["/res/panelsoil/zenith/4x/Casino_Front-A8.png",1024,-156.98650281320167],"Casino_Front-B8":["/res/panelsoil/zenith/4x/Casino_Front-B8.png",1024,-154.46674196239252],"Casino_Front-C8":["/res/panelsoil/zenith/4x/Casino_Front-C8.png",1024,-160.09448745071134],"Casino_Front-D8":["/res/panelsoil/zenith/4x/Casino_Front-D8.png",1024,-149.67402804514097],"Casino_Front-A9":["/res/panelsoil/zenith/4x/Casino_Front-A9.png",1024,-145.6219953584883],"Casino_Front-B9":["/res/panelsoil/zenith/4x/Casino_Front-B9.png",1024,-152.2017195010225],"Casino_Front-C9":["/res/panelsoil/zenith/4x/Casino_Front-C9.png",1024,-147.70961419177002],"Casino_Front-D9":["/res/panelsoil/zenith/4x/Casino_Front-D9.png",1024,-143.8850089835649],"Casino_Front-A10":["/res/panelsoil/zenith/4x/Casino_Front-A10.png",1024,-133.5640776709733],"Casino_Front-B10":["/res/panelsoil/zenith/4x/Casino_Front-B10.png",1024,-139.38588506554672],"Casino_Front-C10":["/res/panelsoil/zenith/4x/Casino_Front-C10.png",1024,-125.6269391927508],"Casino_Front-D10":["/res/panelsoil/zenith/4x/Casino_Front-D10.png",1024,-126.88917301696418],"Casino_Front-A11":["/res/panelsoil/zenith/4x/Casino_Front-A11.png",1024,-123.48843372559465],"Casino_Front-B11":["/res/panelsoil/zenith/4x/Casino_Front-B11.png",1024,-121.28554799324274],"Casino_Front-C11":["/res/panelsoil/zenith/4x/Casino_Front-C11.png",1024,-123.96590407126475],"Casino_Front-D11":["/res/panelsoil/zenith/4x/Casino_Front-D11.png",1024,-116.37135310135275],"Casino_Front-A12":["/res/panelsoil/zenith/4x/Casino_Front-A12.png",1024,-107.55439176677228],"Casino_Front-B12":["/res/panelsoil/zenith/4x/Casino_Front-B12.png",1024,-109.09327408165746],"Casino_Front-C12":["/res/panelsoil/zenith/4x/Casino_Front-C12.png",1024,-101.0792917955454],"Casino_Front-D12":["/res/panelsoil/zenith/4x/Casino_Front-D12.png",1024,-100.03574069476689],"Core_A1-A1":["/res/panelsoil/zenith/4x/Core_A1-A1.png",1024,715.6883885756041],"Core_A1-B1":["/res/panelsoil/zenith/4x/Core_A1-B1.png",1024,718.740368835721],"Core_A1-C1":["/res/panelsoil/zenith/4x/Core_A1-C1.png",1024,718.8634157294914],"Core_A1-D1":["/res/panelsoil/zenith/4x/Core_A1-D1.png",1024,728.0453991668849],"Core_A1-A2":["/res/panelsoil/zenith/4x/Core_A1-A2.png",1024,725.2831780295222],"Core_A1-B2":["/res/panelsoil/zenith/4x/Core_A1-B2.png",1024,735.9630021329092],"Core_A1-C2":["/res/panelsoil/zenith/4x/Core_A1-C2.png",1024,733.6882004136204],"Core_A1-D2":["/res/panelsoil/zenith/4x/Core_A1-D2.png",1024,740.1979817763872],"Core_A1-A3":["/res/panelsoil/zenith/4x/Core_A1-A3.png",1024,737.581456898719],"Core_A1-B3":["/res/panelsoil/zenith/4x/Core_A1-B3.png",1024,749.0490009080324],"Core_A1-C3":["/res/panelsoil/zenith/4x/Core_A1-C3.png",1024,752.318270550079],"Core_A1-D3":["/res/panelsoil/zenith/4x/Core_A1-D3.png",1024,751.1583601700289],"Core_A1-A4":["/res/panelsoil/zenith/4x/Core_A1-A4.png",1024,751.8349018119332],"Core_A1-B4":["/res/panelsoil/zenith/4x/Core_A1-B4.png",1024,759.1802545730544],"Core_A1-C4":["/res/panelsoil/zenith/4x/Core_A1-C4.png",1024,765.1693015212048],"Core_A1-D4":["/res/panelsoil/zenith/4x/Core_A1-D4.png",1024,758.9489746812942],"Core_A1-A5":["/res/panelsoil/zenith/4x/Core_A1-A5.png",1024,763.4880406481819],"Core_A1-B5":["/res/panelsoil/zenith/4x/Core_A1-B5.png",1024,771.1794713038628],"Core_A1-C5":["/res/panelsoil/zenith/4x/Core_A1-C5.png",1024,768.8321268729445],"Core_A1-D5":["/res/panelsoil/zenith/4x/Core_A1-D5.png",1024,774.028286158624],"Core_A1-A6":["/res/panelsoil/zenith/4x/Core_A1-A6.png",1024,779.1837944953758],"Core_A1-B6":["/res/panelsoil/zenith/4x/Core_A1-B6.png",1024,777.502205983438],"Core_A1-C6":["/res/panelsoil/zenith/4x/Core_A1-C6.png",1024,786.561691570841],"Core_A1-D6":["/res/panelsoil/zenith/4x/Core_A1-D6.png",1024,794.9628164784218],"Core_A1-A7":["/res/panelsoil/zenith/4x/Core_A1-A7.png",1024,789.1373158124455],"Core_A1-B7":["/res/panelsoil/zenith/4x/Core_A1-B7.png",1024,792.1585349138064],"Core_A1-C7":["/res/panelsoil/zenith/4x/Core_A1-C7.png",1024,792.7173046982838],"Core_A1-D7":["/res/panelsoil/zenith/4x/Core_A1-D7.png",1024,803.071011326301],"Core_A1-A8":["/res/panelsoil/zenith/4x/Core_A1-A8.png",1024,804.952184894171],"Core_A1-B8":["/res/panelsoil/zenith/4x/Core_A1-B8.png",1024,812.6526231780593],"Core_A1-C8":["/res/panelsoil/zenith/4x/Core_A1-C8.png",1024,812.7755815633888],"Core_A1-D8":["/res/panelsoil/zenith/4x/Core_A1-D8.png",1024,819.0324269663258],"Core_B1-A1":["/res/panelsoil/zenith/4x/Core_B1-A1.png",1024,803.4753261421845],"Core_B1-B1":["/res/panelsoil/zenith/4x/Core_B1-B1.png",1024,814.0142837616743],"Core_B1-C1":["/res/panelsoil/zenith/4x/Core_B1-C1.png",1024,808.2966571548938],"Core_B1-D1":["/res/panelsoil/zenith/4x/Core_B1-D1.png",1024,822.6143369786442],"Core_B1-A2":["/res/panelsoil/zenith/4x/Core_B1-A2.png",1024,819.0185115572383],"Core_B1-B2":["/res/panelsoil/zenith/4x/Core_B1-B2.png",1024,819.9115324556178],"Core_B1-C2":["/res/panelsoil/zenith/4x/Core_B1-C2.png",1024,821.7094876683251],"Core_B1-D2":["/res/panelsoil/zenith/4x/Core_B1-D2.png",1024,828.8729259146268],"Core_B1-A3":["/res/panelsoil/zenith/4x/Core_B1-A3.png",1024,831.8369189800969],"Core_B1-B3":["/res/panelsoil/zenith/4x/Core_B1-B3.png",1024,830.466693073097],"Core_B1-C3":["/res/panelsoil/zenith/4x/Core_B1-C3.png",1024,839.4282270161477],"Core_B1-D3":["/res/panelsoil/zenith/4x/Core_B1-D3.png",1024,835.1864832736181],"Core_B1-A4":["/res/panelsoil/zenith/4x/Core_B1-A4.png",1024,848.255824765723],"Core_B1-B4":["/res/panelsoil/zenith/4x/Core_B1-B4.png",1024,851.0565139749748],"Core_B1-C4":["/res/panelsoil/zenith/4x/Core_B1-C4.png",1024,846.6698253628633],"Core_B1-D4":["/res/panelsoil/zenith/4x/Core_B1-D4.png",1024,853.0227228976875],"Core_B1-A5":["/res/panelsoil/zenith/4x/Core_B1-A5.png",1024,853.684526645612],"Core_B1-B5":["/res/panelsoil/zenith/4x/Core_B1-B5.png",1024,865.7730193581829],"Core_B1-C5":["/res/panelsoil/zenith/4x/Core_B1-C5.png",1024,857.363011337274],"Core_B1-D5":["/res/panelsoil/zenith/4x/Core_B1-D5.png",1024,861.6960843081622],"Core_B1-A6":["/res/panelsoil/zenith/4x/Core_B1-A6.png",1024,871.9736264133657],"Core_B1-B6":["/res/panelsoil/zenith/4x/Core_B1-B6.png",1024,877.7212246655048],"Core_B1-C6":["/res/panelsoil/zenith/4x/Core_B1-C6.png",1024,874.5515357260051],"Core_B1-D6":["/res/panelsoil/zenith/4x/Core_B1-D6.png",1024,875.4138934489949],"Core_B2-A1":["/res/panelsoil/zenith/4x/Core_B2-A1.png",1024,838.9074844795265],"Core_B2-B1":["/res/panelsoil/zenith/4x/Core_B2-B1.png",1024,841.4477020765905],"Core_B2-C1":["/res/panelsoil/zenith/4x/Core_B2-C1.png",1024,847.4969078272101],"Core_B2-D1":["/res/panelsoil/zenith/4x/Core_B2-D1.png",1024,849.4845313932043],"Core_B2-A2":["/res/panelsoil/zenith/4x/Core_B2-A2.png",1024,856.2016448592208],"Core_B2-B2":["/res/panelsoil/zenith/4x/Core_B2-B2.png",1024,852.9584729704811],"Core_B2-C2":["/res/panelsoil/zenith/4x/Core_B2-C2.png",1024,864.9863169917486],"Core_B2-D2":["/res/panelsoil/zenith/4x/Core_B2-D2.png",1024,863.0266856105466],"Core_B2-A3":["/res/panelsoil/zenith/4x/Core_B2-A3.png",1024,871.101665767167],"Core_B2-B3":["/res/panelsoil/zenith/4x/Core_B2-B3.png",1024,866.9985586611806],"Core_B2-C3":["/res/panelsoil/zenith/4x/Core_B2-C3.png",1024,877.1834373893876],"Core_B2-D3":["/res/panelsoil/zenith/4x/Core_B2-D3.png",1024,869.5221277394099],"Core_B2-A4":["/res/panelsoil/zenith/4x/Core_B2-A4.png",1024,883.204400046937],"Core_B2-B4":["/res/panelsoil/zenith/4x/Core_B2-B4.png",1024,886.8573839864878],"Core_B2-C4":["/res/panelsoil/zenith/4x/Core_B2-C4.png",1024,887.2602647529861],"Core_B2-D4":["/res/panelsoil/zenith/4x/Core_B2-D4.png",1024,891.2009901975255],"Core_C1-B1":["/res/panelsoil/zenith/4x/Core_C1-B1.png",1024,937.0959088184187],"Core_C1-C1":["/res/panelsoil/zenith/4x/Core_C1-C1.png",1024,934.1867629590597],"Core_C1-B2":["/res/panelsoil/zenith/4x/Core_C1-B2.png",1024,950.9260782720979],"Core_C1-C2":["/res/panelsoil/zenith/4x/Core_C1-C2.png",1024,946.6976897794029],"Core_Front-A1":["/res/panelsoil/zenith/4x/Core_Front-A1.png",1024,704.7639997239426],"Core_Front-B1":["/res/panelsoil/zenith/4x/Core_Front-B1.png",1024,707.0237279594744],"Core_Front-C1":["/res/panelsoil/zenith/4x/Core_Front-C1.png",1024,702.6227058609744],"Core_Front-D1":["/res/panelsoil/zenith/4x/Core_Front-D1.png",1024,710.4003316639554],"Core_Front-A2":["/res/panelsoil/zenith/4x/Core_Front-A2.png",1024,713.4594994768096],"Core_Front-B2":["/res/panelsoil/zenith/4x/Core_Front-B2.png",1024,719.3436291734864],"Core_Front-C2":["/res/panelsoil/zenith/4x/Core_Front-C2.png",1024,723.0818190101163],"Core_Front-D2":["/res/panelsoil/zenith/4x/Core_Front-D2.png",1024,725.0997272703379],"Core_Front-A3":["/res/panelsoil/zenith/4x/Core_Front-A3.png",1024,728.1743524348567],"Core_Front-B3":["/res/panelsoil/zenith/4x/Core_Front-B3.png",1024,727.3750207600549],"Core_Front-C3":["/res/panelsoil/zenith/4x/Core_Front-C3.png",1024,729.3685494505285],"Core_Front-D3":["/res/panelsoil/zenith/4x/Core_Front-D3.png",1024,733.0714572954448],"Core_Front-A4":["/res/panelsoil/zenith/4x/Core_Front-A4.png",1024,736.0499953761913],"Core_Front-B4":["/res/panelsoil/zenith/4x/Core_Front-B4.png",1024,745.9119825349122],"Core_Front-C4":["/res/panelsoil/zenith/4x/Core_Front-C4.png",1024,747.755316435676],"Core_Front-D4":["/res/panelsoil/zenith/4x/Core_Front-D4.png",1024,744.4407976255601],"Core_Front-A5":["/res/panelsoil/zenith/4x/Core_Front-A5.png",1024,750.0733496483575],"Core_Front-B5":["/res/panelsoil/zenith/4x/Core_Front-B5.png",1024,747.4441837755218],"Core_Front-C5":["/res/panelsoil/zenith/4x/Core_Front-C5.png",1024,757.4762732908717],"Core_Front-D5":["/res/panelsoil/zenith/4x/Core_Front-D5.png",1024,765.4012835227661],"Core_Front-A6":["/res/panelsoil/zenith/4x/Core_Front-A6.png",1024,763.6066972560988],"Core_Front-B6":["/res/panelsoil/zenith/4x/Core_Front-B6.png",1024,759.5249689115719],"Core_Front-C6":["/res/panelsoil/zenith/4x/Core_Front-C6.png",1024,771.0113141450965],"Core_Front-D6":["/res/panelsoil/zenith/4x/Core_Front-D6.png",1024,775.2856320265969],"Core_Front-A7":["/res/panelsoil/zenith/4x/Core_Front-A7.png",1024,774.09234349032],"Core_Front-B7":["/res/panelsoil/zenith/4x/Core_Front-B7.png",1024,778.7203224638159],"Core_Front-C7":["/res/panelsoil/zenith/4x/Core_Front-C7.png",1024,781.1419585519969],"Core_Front-D7":["/res/panelsoil/zenith/4x/Core_Front-D7.png",1024,779.673473433984],"Core_Front-A8":["/res/panelsoil/zenith/4x/Core_Front-A8.png",1024,790.2929855236948],"Core_Front-C8":["/res/panelsoil/zenith/4x/Core_Front-C8.png",1024,793.1252864520925],"Core_Front-D8":["/res/panelsoil/zenith/4x/Core_Front-D8.png",1024,794.4134392284875],"Core_Front-A9":["/res/panelsoil/zenith/4x/Core_Front-A9.png",1024,794.0655920237167],"Core_Front-B9":["/res/panelsoil/zenith/4x/Core_Front-B9.png",1024,808.3146954051728],"Core_Front-C9":["/res/panelsoil/zenith/4x/Core_Front-C9.png",1024,807.1565575821041],"Core_Front-D9":["/res/panelsoil/zenith/4x/Core_Front-D9.png",1024,812.9437293031142],"Core_Front-A10":["/res/panelsoil/zenith/4x/Core_Front-A10.png",1024,813.9959018976792],"Core_Front-B10":["/res/panelsoil/zenith/4x/Core_Front-B10.png",1024,818.5363753475806],"Core_Front-C10":["/res/panelsoil/zenith/4x/Core_Front-C10.png",1024,816.4983741291454],"Core_Front-D10":["/res/panelsoil/zenith/4x/Core_Front-D10.png",1024,816.4038209567982],"Core_Front-A11":["/res/panelsoil/zenith/4x/Core_Front-A11.png",1024,827.0189776509329],"Core_Front-B11":["/res/panelsoil/zenith/4x/Core_Front-B11.png",1024,825.0374390186629],"Core_Front-C11":["/res/panelsoil/zenith/4x/Core_Front-C11.png",1024,827.9286873666874],"Core_Front-D11":["/res/panelsoil/zenith/4x/Core_Front-D11.png",1024,831.8528104072985],"Core_Front-A12":["/res/panelsoil/zenith/4x/Core_Front-A12.png",1024,837.1338353442001],"Core_Front-B12":["/res/panelsoil/zenith/4x/Core_Front-B12.png",1024,837.7425945374788],"Core_Front-C12":["/res/panelsoil/zenith/4x/Core_Front-C12.png",1024,849.7449946047891],"Core_Front-D12":["/res/panelsoil/zenith/4x/Core_Front-D12.png",1024,848.654742691776],"Core_Front-A13":["/res/panelsoil/zenith/4x/Core_Front-A13.png",1024,847.3371894550589],"Core_Front-D13":["/res/panelsoil/zenith/4x/Core_Front-D13.png",1024,864.7703446082681],"Core_Front-A14":["/res/panelsoil/zenith/4x/Core_Front-A14.png",1024,860.4514525536102],"Core_Front-B14":["/res/panelsoil/zenith/4x/Core_Front-B14.png",1024,865.0959026846706],"Core_Front-C14":["/res/panelsoil/zenith/4x/Core_Front-C14.png",1024,865.6068982352904],"Core_Front-D14":["/res/panelsoil/zenith/4x/Core_Front-D14.png",1024,867.9998553949225],"Core_Front-A15":["/res/panelsoil/zenith/4x/Core_Front-A15.png",1024,879.8169015769507],"Core_Front-B15":["/res/panelsoil/zenith/4x/Core_Front-B15.png",1024,881.3224003853637],"Core_Front-C15":["/res/panelsoil/zenith/4x/Core_Front-C15.png",1024,880.0605673604447],"Core_Front-D15":["/res/panelsoil/zenith/4x/Core_Front-D15.png",1024,882.1274533351319],"Core_Front-A16":["/res/panelsoil/zenith/4x/Core_Front-A16.png",1024,889.4901031546929],"Core_Front-B16":["/res/panelsoil/zenith/4x/Core_Front-B16.png",1024,886.2946761679584],"Core_Front-C16":["/res/panelsoil/zenith/4x/Core_Front-C16.png",1024,893.577106226546],"Core_Front-D16":["/res/panelsoil/zenith/4x/Core_Front-D16.png",1024,893.8274996046708],"Core_Front-A17":["/res/panelsoil/zenith/4x/Core_Front-A17.png",1024,896.8984879413456],"Core_Front-B17":["/res/panelsoil/zenith/4x/Core_Front-B17.png",1024,900.8569587975579],"Core_Front-C17":["/res/panelsoil/zenith/4x/Core_Front-C17.png",1024,907.020100381903],"Core_Front-D17":["/res/panelsoil/zenith/4x/Core_Front-D17.png",1024,913.7706369411893],"Core_Front-A18":["/res/panelsoil/zenith/4x/Core_Front-A18.png",1024,914.0899925802001],"Core_Front-B18":["/res/panelsoil/zenith/4x/Core_Front-B18.png",1024,913.6289584307445],"Core_Front-C18":["/res/panelsoil/zenith/4x/Core_Front-C18.png",1024,914.765074627511],"Core_Front-D18":["/res/panelsoil/zenith/4x/Core_Front-D18.png",1024,926.1589880028891],"Core_Front-A19":["/res/panelsoil/zenith/4x/Core_Front-A19.png",1024,924.2976867143237],"Core_Front-B19":["/res/panelsoil/zenith/4x/Core_Front-B19.png",1024,923.0418990468946],"Core_Front-C19":["/res/panelsoil/zenith/4x/Core_Front-C19.png",1024,931.6834299743372],"Core_Front-D19":["/res/panelsoil/zenith/4x/Core_Front-D19.png",1024,931.0427928620909],"Core_Front-A20":["/res/panelsoil/zenith/4x/Core_Front-A20.png",1024,933.7372563885298],"Core_Front-B20":["/res/panelsoil/zenith/4x/Core_Front-B20.png",1024,943.3590676566304],"Core_Front-C20":["/res/panelsoil/zenith/4x/Core_Front-C20.png",1024,944.6062431934348],"Core_Front-D20":["/res/panelsoil/zenith/4x/Core_Front-D20.png",1024,942.4723878714527],"Corruption_A1-A1":["/res/panelsoil/zenith/4x/Corruption_A1-A1.png",1024,954.2678128717272],"Corruption_A1-B1":["/res/panelsoil/zenith/4x/Corruption_A1-B1.png",1024,964.1297632327194],"Corruption_A1-C1":["/res/panelsoil/zenith/4x/Corruption_A1-C1.png",1024,967.2653701335684],"Corruption_A1-D1":["/res/panelsoil/zenith/4x/Corruption_A1-D1.png",1024,962.382442742209],"Corruption_A1-A2":["/res/panelsoil/zenith/4x/Corruption_A1-A2.png",1024,975.4683442478832],"Corruption_A1-B2":["/res/panelsoil/zenith/4x/Corruption_A1-B2.png",1024,969.3487679806119],"Corruption_A1-C2":["/res/panelsoil/zenith/4x/Corruption_A1-C2.png",1024,970.1576907567273],"Corruption_A1-D2":["/res/panelsoil/zenith/4x/Corruption_A1-D2.png",1024,978.0732331385625],"Corruption_A1-A3":["/res/panelsoil/zenith/4x/Corruption_A1-A3.png",1024,987.7250434057062],"Corruption_A1-B3":["/res/panelsoil/zenith/4x/Corruption_A1-B3.png",1024,983.4110755542231],"Corruption_A1-C3":["/res/panelsoil/zenith/4x/Corruption_A1-C3.png",1024,982.6436312860275],"Corruption_A1-D3":["/res/panelsoil/zenith/4x/Corruption_A1-D3.png",1024,991.5865738904887],"Corruption_A1-A4":["/res/panelsoil/zenith/4x/Corruption_A1-A4.png",1024,990.5456395898459],"Corruption_A1-B4":["/res/panelsoil/zenith/4x/Corruption_A1-B4.png",1024,998.3073124753196],"Corruption_A1-C4":["/res/panelsoil/zenith/4x/Corruption_A1-C4.png",1024,1005.5378313865309],"Corruption_A1-D4":["/res/panelsoil/zenith/4x/Corruption_A1-D4.png",1024,1005.2011749692789],"Corruption_A1-A5":["/res/panelsoil/zenith/4x/Corruption_A1-A5.png",1024,1009.0934519589322],"Corruption_A1-B5":["/res/panelsoil/zenith/4x/Corruption_A1-B5.png",1024,1011.6915435341906],"Corruption_A1-C5":["/res/panelsoil/zenith/4x/Corruption_A1-C5.png",1024,1007.8520634596101],"Corruption_A1-D5":["/res/panelsoil/zenith/4x/Corruption_A1-D5.png",1024,1016.2372533649694],"Corruption_A1-A6":["/res/panelsoil/zenith/4x/Corruption_A1-A6.png",1024,1016.6992539880997],"Corruption_A1-B6":["/res/panelsoil/zenith/4x/Corruption_A1-B6.png",1024,1024.8845473903348],"Corruption_A1-C6":["/res/panelsoil/zenith/4x/Corruption_A1-C6.png",1024,1019.7064748483576],"Corruption_A1-D6":["/res/panelsoil/zenith/4x/Corruption_A1-D6.png",1024,1026.9045851701385],"Corruption_B1-A1":["/res/panelsoil/zenith/4x/Corruption_B1-A1.png",1024,1026.5933613814714],"Corruption_B1-B1":["/res/panelsoil/zenith/4x/Corruption_B1-B1.png",1024,1022.7224960309122],"Corruption_B1-C1":["/res/panelsoil/zenith/4x/Corruption_B1-C1.png",1024,1030.4684183610539],"Corruption_B1-D1":["/res/panelsoil/zenith/4x/Corruption_B1-D1.png",1024,1033.9240722749983],"Corruption_B1-A2":["/res/panelsoil/zenith/4x/Corruption_B1-A2.png",1024,1041.550991337115],"Corruption_B1-B2":["/res/panelsoil/zenith/4x/Corruption_B1-B2.png",1024,1033.5825276454898],"Corruption_B1-C2":["/res/panelsoil/zenith/4x/Corruption_B1-C2.png",1024,1044.3111499601837],"Corruption_B1-D2":["/res/panelsoil/zenith/4x/Corruption_B1-D2.png",1024,1043.8644277489254],"Corruption_B1-A3":["/res/panelsoil/zenith/4x/Corruption_B1-A3.png",1024,1043.2624654814733],"Corruption_B1-B3":["/res/panelsoil/zenith/4x/Corruption_B1-B3.png",1024,1056.1584769420756],"Corruption_B1-C3":["/res/panelsoil/zenith/4x/Corruption_B1-C3.png",1024,1053.1723900334314],"Corruption_B1-D3":["/res/panelsoil/zenith/4x/Corruption_B1-D3.png",1024,1059.1015717317134],"Corruption_B1-A4":["/res/panelsoil/zenith/4x/Corruption_B1-A4.png",1024,1061.7288436472925],"Corruption_B1-B4":["/res/panelsoil/zenith/4x/Corruption_B1-B4.png",1024,1064.7145299693177],"Corruption_B1-C4":["/res/panelsoil/zenith/4x/Corruption_B1-C4.png",1024,1064.0285843218564],"Corruption_B1-D4":["/res/panelsoil/zenith/4x/Corruption_B1-D4.png",1024,1069.902982156531],"Corruption_B1-A5":["/res/panelsoil/zenith/4x/Corruption_B1-A5.png",1024,1075.179477246324],"Corruption_B1-B5":["/res/panelsoil/zenith/4x/Corruption_B1-B5.png",1024,1080.6224592945375],"Corruption_B1-C5":["/res/panelsoil/zenith/4x/Corruption_B1-C5.png",1024,1083.4058865631916],"Corruption_B1-D5":["/res/panelsoil/zenith/4x/Corruption_B1-D5.png",1024,1078.564523851023],"Corruption_B2-A1":["/res/panelsoil/zenith/4x/Corruption_B2-A1.png",1024,1019.4022288231997],"Corruption_B2-B1":["/res/panelsoil/zenith/4x/Corruption_B2-B1.png",1024,1023.74409221622],"Corruption_B2-C1":["/res/panelsoil/zenith/4x/Corruption_B2-C1.png",1024,1035.5553393476928],"Corruption_B2-D1":["/res/panelsoil/zenith/4x/Corruption_B2-D1.png",1024,1035.3957069757637],"Corruption_B2-A2":["/res/panelsoil/zenith/4x/Corruption_B2-A2.png",1024,1035.9147944367548],"Corruption_B2-B2":["/res/panelsoil/zenith/4x/Corruption_B2-B2.png",1024,1037.1475546405204],"Corruption_B2-C2":["/res/panelsoil/zenith/4x/Corruption_B2-C2.png",1024,1040.861935519179],"Corruption_B2-D2":["/res/panelsoil/zenith/4x/Corruption_B2-D2.png",1024,1051.3571936664757],"Corruption_B2-A3":["/res/panelsoil/zenith/4x/Corruption_B2-A3.png",1024,1054.1630366633187],"Corruption_B2-B3":["/res/panelsoil/zenith/4x/Corruption_B2-B3.png",1024,1051.6358387200214],"Corruption_B2-C3":["/res/panelsoil/zenith/4x/Corruption_B2-C3.png",1024,1053.056375935513],"Corruption_B2-D3":["/res/panelsoil/zenith/4x/Corruption_B2-D3.png",1024,1062.2946282082746],"Corruption_B2-A4":["/res/panelsoil/zenith/4x/Corruption_B2-A4.png",1024,1067.448229847233],"Corruption_B2-B4":["/res/panelsoil/zenith/4x/Corruption_B2-B4.png",1024,1066.3546843869967],"Corruption_B2-C4":["/res/panelsoil/zenith/4x/Corruption_B2-C4.png",1024,1064.773534924476],"Corruption_B2-D4":["/res/panelsoil/zenith/4x/Corruption_B2-D4.png",1024,1075.9060999587796],"Corruption_B2-A5":["/res/panelsoil/zenith/4x/Corruption_B2-A5.png",1024,1074.0518279443977],"Corruption_B2-B5":["/res/panelsoil/zenith/4x/Corruption_B2-B5.png",1024,1073.0336511877888],"Corruption_B2-C5":["/res/panelsoil/zenith/4x/Corruption_B2-C5.png",1024,1081.3358405091894],"Corruption_B2-D5":["/res/panelsoil/zenith/4x/Corruption_B2-D5.png",1024,1079.7298996445768],"Corruption_C1-A1":["/res/panelsoil/zenith/4x/Corruption_C1-A1.png",1024,1072.7115390296058],"Corruption_C1-B1":["/res/panelsoil/zenith/4x/Corruption_C1-B1.png",1024,1069.4742886925524],"Corruption_C1-C1":["/res/panelsoil/zenith/4x/Corruption_C1-C1.png",1024,1077.4843855339275],"Corruption_C1-D1":["/res/panelsoil/zenith/4x/Corruption_C1-D1.png",1024,1081.3796130139656],"Corruption_C1-A2":["/res/panelsoil/zenith/4x/Corruption_C1-A2.png",1024,1087.803245578172],"Corruption_C1-B2":["/res/panelsoil/zenith/4x/Corruption_C1-B2.png",1024,1082.5195533384403],"Corruption_C1-C2":["/res/panelsoil/zenith/4x/Corruption_C1-C2.png",1024,1088.8302400368718],"Corruption_C1-D2":["/res/panelsoil/zenith/4x/Corruption_C1-D2.png",1024,1097.0111205577057],"Corruption_C1-A3":["/res/panelsoil/zenith/4x/Corruption_C1-A3.png",1024,1096.261646959807],"Corruption_C1-B3":["/res/panelsoil/zenith/4x/Corruption_C1-B3.png",1024,1097.8943688354125],"Corruption_C1-C3":["/res/panelsoil/zenith/4x/Corruption_C1-C3.png",1024,1103.028571720862],"Corruption_C1-D3":["/res/panelsoil/zenith/4x/Corruption_C1-D3.png",1024,1099.386795725375],"Corruption_C1-A4":["/res/panelsoil/zenith/4x/Corruption_C1-A4.png",1024,1107.2659024233],"Corruption_C1-B4":["/res/panelsoil/zenith/4x/Corruption_C1-B4.png",1024,1106.3466580078875],"Corruption_C1-C4":["/res/panelsoil/zenith/4x/Corruption_C1-C4.png",1024,1112.6969024890036],"Corruption_C1-D4":["/res/panelsoil/zenith/4x/Corruption_C1-D4.png",1024,1118.7522689887098],"Corruption_C1-A5":["/res/panelsoil/zenith/4x/Corruption_C1-A5.png",1024,1118.8881791310243],"Corruption_C1-B5":["/res/panelsoil/zenith/4x/Corruption_C1-B5.png",1024,1117.2189110253541],"Corruption_C1-C5":["/res/panelsoil/zenith/4x/Corruption_C1-C5.png",1024,1127.3192149157928],"Corruption_C1-D5":["/res/panelsoil/zenith/4x/Corruption_C1-D5.png",1024,1133.6779208373168],"Corruption_C1-A6":["/res/panelsoil/zenith/4x/Corruption_C1-A6.png",1024,1130.4748936107353],"Corruption_C1-B6":["/res/panelsoil/zenith/4x/Corruption_C1-B6.png",1024,1141.0237761961318],"Corruption_C1-C6":["/res/panelsoil/zenith/4x/Corruption_C1-C6.png",1024,1138.0689748964728],"Corruption_C1-D6":["/res/panelsoil/zenith/4x/Corruption_C1-D6.png",1024,1142.2498254570653],"Corruption_C2-A1":["/res/panelsoil/zenith/4x/Corruption_C2-A1.png",1024,1069.7834255967405],"Corruption_C2-B1":["/res/panelsoil/zenith/4x/Corruption_C2-B1.png",1024,1067.9443764360813],"Corruption_C2-C1":["/res/panelsoil/zenith/4x/Corruption_C2-C1.png",1024,1070.7465219197857],"Corruption_C2-D1":["/res/panelsoil/zenith/4x/Corruption_C2-D1.png",1024,1074.426948726326],"Corruption_C2-A2":["/res/panelsoil/zenith/4x/Corruption_C2-A2.png",1024,1084.0756438814826],"Corruption_C2-B2":["/res/panelsoil/zenith/4x/Corruption_C2-B2.png",1024,1086.221070608853],"Corruption_C2-C2":["/res/panelsoil/zenith/4x/Corruption_C2-C2.png",1024,1088.9803416420198],"Corruption_C2-D2":["/res/panelsoil/zenith/4x/Corruption_C2-D2.png",1024,1089.718500013351],"Corruption_C2-A3":["/res/panelsoil/zenith/4x/Corruption_C2-A3.png",1024,1099.0931344305511],"Corruption_C2-D3":["/res/panelsoil/zenith/4x/Corruption_C2-D3.png",1024,1098.9885380402047],"Corruption_C2-A4":["/res/panelsoil/zenith/4x/Corruption_C2-A4.png",1024,1112.9033431040302],"Corruption_C2-A5":["/res/panelsoil/zenith/4x/Corruption_C2-A5.png",1024,1118.4747135998332],"Corruption_D1-A1":["/res/panelsoil/zenith/4x/Corruption_D1-A1.png",1024,1187.2702662879205],"Corruption_D1-B1":["/res/panelsoil/zenith/4x/Corruption_D1-B1.png",1024,1188.2403267970021],"Corruption_D1-C1":["/res/panelsoil/zenith/4x/Corruption_D1-C1.png",1024,1196.1275166773823],"Corruption_D1-D1":["/res/panelsoil/zenith/4x/Corruption_D1-D1.png",1024,1198.600478890046],"Corruption_D1-A2":["/res/panelsoil/zenith/4x/Corruption_D1-A2.png",1024,1192.6203487812086],"Corruption_D1-B2":["/res/panelsoil/zenith/4x/Corruption_D1-B2.png",1024,1196.8711381699363],"Corruption_D1-C2":["/res/panelsoil/zenith/4x/Corruption_D1-C2.png",1024,1204.9895057301749],"Corruption_D1-D2":["/res/panelsoil/zenith/4x/Corruption_D1-D2.png",1024,1206.6776532491588],"Corruption_D1-A3":["/res/panelsoil/zenith/4x/Corruption_D1-A3.png",1024,1214.6120839858102],"Corruption_D1-B3":["/res/panelsoil/zenith/4x/Corruption_D1-B3.png",1024,1209.197565780142],"Corruption_D1-C3":["/res/panelsoil/zenith/4x/Corruption_D1-C3.png",1024,1218.9690295453595],"Corruption_D1-D3":["/res/panelsoil/zenith/4x/Corruption_D1-D3.png",1024,1217.3149699635126],"Corruption_D1-A4":["/res/panelsoil/zenith/4x/Corruption_D1-A4.png",1024,1220.1531388133426],"Corruption_D1-B4":["/res/panelsoil/zenith/4x/Corruption_D1-B4.png",1024,1229.6478385778346],"Corruption_D1-C4":["/res/panelsoil/zenith/4x/Corruption_D1-C4.png",1024,1228.262106055166],"Corruption_D1-D4":["/res/panelsoil/zenith/4x/Corruption_D1-D4.png",1024,1226.5025410037492],"Corruption_D1-A5":["/res/panelsoil/zenith/4x/Corruption_D1-A5.png",1024,1230.0533358339287],"Corruption_D1-B5":["/res/panelsoil/zenith/4x/Corruption_D1-B5.png",1024,1231.2583473574211],"Corruption_D1-C5":["/res/panelsoil/zenith/4x/Corruption_D1-C5.png",1024,1243.6846236767874],"Corruption_D1-D5":["/res/panelsoil/zenith/4x/Corruption_D1-D5.png",1024,1241.9789573495502],"Corruption_D1-A6":["/res/panelsoil/zenith/4x/Corruption_D1-A6.png",1024,1243.7990005135514],"Corruption_D1-B6":["/res/panelsoil/zenith/4x/Corruption_D1-B6.png",1024,1243.7293945757958],"Corruption_D1-C6":["/res/panelsoil/zenith/4x/Corruption_D1-C6.png",1024,1252.5428309497415],"Corruption_D1-D6":["/res/panelsoil/zenith/4x/Corruption_D1-D6.png",1024,1255.2230847109356],"Corruption_D2-A1":["/res/panelsoil/zenith/4x/Corruption_D2-A1.png",1024,1179.4869386804266],"Corruption_D2-B1":["/res/panelsoil/zenith/4x/Corruption_D2-B1.png",1024,1187.807729993258],"Corruption_D2-C1":["/res/panelsoil/zenith/4x/Corruption_D2-C1.png",1024,1189.4904831462482],"Corruption_D2-D1":["/res/panelsoil/zenith/4x/Corruption_D2-D1.png",1024,1194.0979975614878],"Corruption_D2-A2":["/res/panelsoil/zenith/4x/Corruption_D2-A2.png",1024,1191.340422138348],"Corruption_D2-B2":["/res/panelsoil/zenith/4x/Corruption_D2-B2.png",1024,1200.22421902647],"Corruption_D2-C2":["/res/panelsoil/zenith/4x/Corruption_D2-C2.png",1024,1208.9546027102242],"Corruption_D2-D2":["/res/panelsoil/zenith/4x/Corruption_D2-D2.png",1024,1204.811735241592],"Corruption_D2-A3":["/res/panelsoil/zenith/4x/Corruption_D2-A3.png",1024,1204.5378065916557],"Corruption_D2-B3":["/res/panelsoil/zenith/4x/Corruption_D2-B3.png",1024,1207.8017937740092],"Corruption_D2-C3":["/res/panelsoil/zenith/4x/Corruption_D2-C3.png",1024,1212.507802287602],"Corruption_D2-D3":["/res/panelsoil/zenith/4x/Corruption_D2-D3.png",1024,1222.929286214413],"Corruption_D2-A4":["/res/panelsoil/zenith/4x/Corruption_D2-A4.png",1024,1222.6260629492642],"Corruption_D2-B4":["/res/panelsoil/zenith/4x/Corruption_D2-B4.png",1024,1224.645762964567],"Corruption_D2-C4":["/res/panelsoil/zenith/4x/Corruption_D2-C4.png",1024,1231.5411085107983],"Corruption_D2-D4":["/res/panelsoil/zenith/4x/Corruption_D2-D4.png",1024,1237.0176098459458],"Corruption_D2-A5":["/res/panelsoil/zenith/4x/Corruption_D2-A5.png",1024,1238.8155543567166],"Corruption_D2-B5":["/res/panelsoil/zenith/4x/Corruption_D2-B5.png",1024,1239.2728916790902],"Corruption_D2-C5":["/res/panelsoil/zenith/4x/Corruption_D2-C5.png",1024,1235.3289560699795],"Corruption_D2-D5":["/res/panelsoil/zenith/4x/Corruption_D2-D5.png",1024,1238.8127629931123],"Corruption_Front-A1":["/res/panelsoil/zenith/4x/Corruption_Front-A1.png",1024,951.8335010160789],"Corruption_Front-B1":["/res/panelsoil/zenith/4x/Corruption_Front-B1.png",1024,951.2072269270549],"Corruption_Front-C1":["/res/panelsoil/zenith/4x/Corruption_Front-C1.png",1024,957.5893422958862],"Corruption_Front-D1":["/res/panelsoil/zenith/4x/Corruption_Front-D1.png",1024,959.5648992818643],"Corruption_Front-A2":["/res/panelsoil/zenith/4x/Corruption_Front-A2.png",1024,967.8115337405454],"Corruption_Front-B2":["/res/panelsoil/zenith/4x/Corruption_Front-B2.png",1024,971.0386000688866],"Corruption_Front-C2":["/res/panelsoil/zenith/4x/Corruption_Front-C2.png",1024,972.6997253658409],"Corruption_Front-D2":["/res/panelsoil/zenith/4x/Corruption_Front-D2.png",1024,969.2541501742676],"Corruption_Front-A3":["/res/panelsoil/zenith/4x/Corruption_Front-A3.png",1024,978.4932380380767],"Corruption_Front-B3":["/res/panelsoil/zenith/4x/Corruption_Front-B3.png",1024,982.4831565178242],"Corruption_Front-C3":["/res/panelsoil/zenith/4x/Corruption_Front-C3.png",1024,978.3857246605543],"Corruption_Front-D3":["/res/panelsoil/zenith/4x/Corruption_Front-D3.png",1024,987.9465346527204],"Corruption_Front-A4":["/res/panelsoil/zenith/4x/Corruption_Front-A4.png",1024,993.4901155000007],"Corruption_Front-B4":["/res/panelsoil/zenith/4x/Corruption_Front-B4.png",1024,986.1122564419126],"Corruption_Front-C4":["/res/panelsoil/zenith/4x/Corruption_Front-C4.png",1024,998.1883317456897],"Corruption_Front-D4":["/res/panelsoil/zenith/4x/Corruption_Front-D4.png",1024,993.2265859808055],"Corruption_Front-A5":["/res/panelsoil/zenith/4x/Corruption_Front-A5.png",1024,1003.974889584191],"Corruption_Front-B5":["/res/panelsoil/zenith/4x/Corruption_Front-B5.png",1024,1001.0353605325723],"Corruption_Front-C5":["/res/panelsoil/zenith/4x/Corruption_Front-C5.png",1024,1005.3425295815463],"Corruption_Front-D5":["/res/panelsoil/zenith/4x/Corruption_Front-D5.png",1024,1003.5344618386409],"Corruption_Front-A6":["/res/panelsoil/zenith/4x/Corruption_Front-A6.png",1024,1010.8026701503568],"Corruption_Front-B6":["/res/panelsoil/zenith/4x/Corruption_Front-B6.png",1024,1014.196689752145],"Corruption_Front-C6":["/res/panelsoil/zenith/4x/Corruption_Front-C6.png",1024,1018.1414370194927],"Corruption_Front-D6":["/res/panelsoil/zenith/4x/Corruption_Front-D6.png",1024,1026.7829939123408],"Corruption_Front-A7":["/res/panelsoil/zenith/4x/Corruption_Front-A7.png",1024,1022.9456108230859],"Corruption_Front-B7":["/res/panelsoil/zenith/4x/Corruption_Front-B7.png",1024,1022.3040621356813],"Corruption_Front-C7":["/res/panelsoil/zenith/4x/Corruption_Front-C7.png",1024,1032.7359449309852],"Corruption_Front-D7":["/res/panelsoil/zenith/4x/Corruption_Front-D7.png",1024,1032.7717852403543],"Corruption_Front-A8":["/res/panelsoil/zenith/4x/Corruption_Front-A8.png",1024,1043.611151331703],"Corruption_Front-B8":["/res/panelsoil/zenith/4x/Corruption_Front-B8.png",1024,1041.7218226267396],"Corruption_Front-C8":["/res/panelsoil/zenith/4x/Corruption_Front-C8.png",1024,1049.0341388119905],"Corruption_Front-D8":["/res/panelsoil/zenith/4x/Corruption_Front-D8.png",1024,1049.035465475428],"Corruption_Front-A9":["/res/panelsoil/zenith/4x/Corruption_Front-A9.png",1024,1044.2240182874696],"Corruption_Front-B9":["/res/panelsoil/zenith/4x/Corruption_Front-B9.png",1024,1049.044295458026],"Corruption_Front-C9":["/res/panelsoil/zenith/4x/Corruption_Front-C9.png",1024,1058.5672267402629],"Corruption_Front-D9":["/res/panelsoil/zenith/4x/Corruption_Front-D9.png",1024,1055.9331204428254],"Corruption_Front-A10":["/res/panelsoil/zenith/4x/Corruption_Front-A10.png",1024,1066.8209080498877],"Corruption_Front-B10":["/res/panelsoil/zenith/4x/Corruption_Front-B10.png",1024,1070.1352197539188],"Corruption_Front-C10":["/res/panelsoil/zenith/4x/Corruption_Front-C10.png",1024,1067.0595289160701],"Corruption_Front-D10":["/res/panelsoil/zenith/4x/Corruption_Front-D10.png",1024,1075.6421860148514],"Corruption_Front-A11":["/res/panelsoil/zenith/4x/Corruption_Front-A11.png",1024,1077.5940941961203],"Corruption_Front-B11":["/res/panelsoil/zenith/4x/Corruption_Front-B11.png",1024,1078.9798347834128],"Corruption_Front-C11":["/res/panelsoil/zenith/4x/Corruption_Front-C11.png",1024,1077.6860133956502],"Corruption_Front-D11":["/res/panelsoil/zenith/4x/Corruption_Front-D11.png",1024,1082.2716607854002],"Corruption_Front-A12":["/res/panelsoil/zenith/4x/Corruption_Front-A12.png",1024,1082.0998690238853],"Corruption_Front-B12":["/res/panelsoil/zenith/4x/Corruption_Front-B12.png",1024,1088.099898454735],"Corruption_Front-C12":["/res/panelsoil/zenith/4x/Corruption_Front-C12.png",1024,1094.7084841234735],"Corruption_Front-D12":["/res/panelsoil/zenith/4x/Corruption_Front-D12.png",1024,1095.3099854296563],"Corruption_Front-A13":["/res/panelsoil/zenith/4x/Corruption_Front-A13.png",1024,1102.7253396547878],"Corruption_Front-B13":["/res/panelsoil/zenith/4x/Corruption_Front-B13.png",1024,1109.3381346617375],"Corruption_Front-C13":["/res/panelsoil/zenith/4x/Corruption_Front-C13.png",1024,1105.0703185565267],"Corruption_Front-D13":["/res/panelsoil/zenith/4x/Corruption_Front-D13.png",1024,1110.1145864918285],"Corruption_Front-A14":["/res/panelsoil/zenith/4x/Corruption_Front-A14.png",1024,1117.6810905506757],"Corruption_Front-C14":["/res/panelsoil/zenith/4x/Corruption_Front-C14.png",1024,1121.2136236443725],"Corruption_Front-D14":["/res/panelsoil/zenith/4x/Corruption_Front-D14.png",1024,1124.9046905338173],"Corruption_Front-A15":["/res/panelsoil/zenith/4x/Corruption_Front-A15.png",1024,1124.9806693981234],"Corruption_Front-B15":["/res/panelsoil/zenith/4x/Corruption_Front-B15.png",1024,1132.1011976395355],"Corruption_Front-C15":["/res/panelsoil/zenith/4x/Corruption_Front-C15.png",1024,1129.956884376226],"Corruption_Front-D15":["/res/panelsoil/zenith/4x/Corruption_Front-D15.png",1024,1131.5354644390509],"Corruption_Front-A16":["/res/panelsoil/zenith/4x/Corruption_Front-A16.png",1024,1132.4668678962335],"Corruption_Front-B16":["/res/panelsoil/zenith/4x/Corruption_Front-B16.png",1024,1135.0336124207029],"Corruption_Front-C16":["/res/panelsoil/zenith/4x/Corruption_Front-C16.png",1024,1143.907725197915],"Corruption_Front-D16":["/res/panelsoil/zenith/4x/Corruption_Front-D16.png",1024,1149.0275832028162],"Corruption_Front-A17":["/res/panelsoil/zenith/4x/Corruption_Front-A17.png",1024,1154.1902690834454],"Corruption_Front-B17":["/res/panelsoil/zenith/4x/Corruption_Front-B17.png",1024,1156.8559985007082],"Corruption_Front-C17":["/res/panelsoil/zenith/4x/Corruption_Front-C17.png",1024,1154.1761656073293],"Corruption_Front-D17":["/res/panelsoil/zenith/4x/Corruption_Front-D17.png",1024,1158.1075295799692],"Corruption_Front-A18":["/res/panelsoil/zenith/4x/Corruption_Front-A18.png",1024,1164.5735019467545],"Corruption_Front-B18":["/res/panelsoil/zenith/4x/Corruption_Front-B18.png",1024,1171.0373448362122],"Corruption_Front-C18":["/res/panelsoil/zenith/4x/Corruption_Front-C18.png",1024,1167.972122439797],"Corruption_Front-D18":["/res/panelsoil/zenith/4x/Corruption_Front-D18.png",1024,1174.67710994921],"Corruption_Front-A19":["/res/panelsoil/zenith/4x/Corruption_Front-A19.png",1024,1175.0789527370011],"Corruption_Front-B19":["/res/panelsoil/zenith/4x/Corruption_Front-B19.png",1024,1182.70589097628],"Corruption_Front-C19":["/res/panelsoil/zenith/4x/Corruption_Front-C19.png",1024,1186.1103977994994],"Corruption_Front-D19":["/res/panelsoil/zenith/4x/Corruption_Front-D19.png",1024,1190.1459020121208],"Corruption_Front-A20":["/res/panelsoil/zenith/4x/Corruption_Front-A20.png",1024,1190.152114093755],"Corruption_Front-B20":["/res/panelsoil/zenith/4x/Corruption_Front-B20.png",1024,1193.18947487567],"Corruption_Front-C20":["/res/panelsoil/zenith/4x/Corruption_Front-C20.png",1024,1190.72551318012],"Corruption_Front-D20":["/res/panelsoil/zenith/4x/Corruption_Front-D20.png",1024,1200.0884208319844],"Corruption_Front-A21":["/res/panelsoil/zenith/4x/Corruption_Front-A21.png",1024,1196.7009630035736],"Corruption_Front-D21":["/res/panelsoil/zenith/4x/Corruption_Front-D21.png",1024,1209.1550656062857],"Corruption_Front-D22":["/res/panelsoil/zenith/4x/Corruption_Front-D22.png",1024,1227.7109692838173],"Hall_1A-A1":["/res/panelsoil/zenith/4x/Hall_1A-A1.png",1024,-402.1156923742914],"Hall_1A-B1":["/res/panelsoil/zenith/4x/Hall_1A-B1.png",1024,-392.68206573605823],"Hall_1A-C1":["/res/panelsoil/zenith/4x/Hall_1A-C1.png",1024,-389.560043318589],"Hall_1A-D1":["/res/panelsoil/zenith/4x/Hall_1A-D1.png",1024,-395.80239342813127],"Hall_1A-A2":["/res/panelsoil/zenith/4x/Hall_1A-A2.png",1024,-386.5638415149826],"Hall_1A-B2":["/res/panelsoil/zenith/4x/Hall_1A-B2.png",1024,-383.12571775572445],"Hall_1A-C2":["/res/panelsoil/zenith/4x/Hall_1A-C2.png",1024,-384.46517109044225],"Hall_1A-D2":["/res/panelsoil/zenith/4x/Hall_1A-D2.png",1024,-376.9748148494511],"Hall_1A-A3":["/res/panelsoil/zenith/4x/Hall_1A-A3.png",1024,-376.54197098594267],"Hall_1A-B3":["/res/panelsoil/zenith/4x/Hall_1A-B3.png",1024,-371.73060110616206],"Hall_1A-C3":["/res/panelsoil/zenith/4x/Hall_1A-C3.png",1024,-363.8444616988204],"Hall_1A-D3":["/res/panelsoil/zenith/4x/Hall_1A-D3.png",1024,-368.7373382577697],"Hall_1A-A4":["/res/panelsoil/zenith/4x/Hall_1A-A4.png",1024,-367.55422840195996],"Hall_1A-B4":["/res/panelsoil/zenith/4x/Hall_1A-B4.png",1024,-356.61690402622855],"Hall_1A-C4":["/res/panelsoil/zenith/4x/Hall_1A-C4.png",1024,-361.8592386301732],"Hall_1A-D4":["/res/panelsoil/zenith/4x/Hall_1A-D4.png",1024,-349.3379123920854],"Hall_Front-A1":["/res/panelsoil/zenith/4x/Hall_Front-A1.png",1024,-404.3460803048061],"Hall_Front-B1":["/res/panelsoil/zenith/4x/Hall_Front-B1.png",1024,-396.9477667095839],"Hall_Front-C1":["/res/panelsoil/zenith/4x/Hall_Front-C1.png",1024,-398.10995089655125],"Hall_Front-D1":["/res/panelsoil/zenith/4x/Hall_Front-D1.png",1024,-394.6934201486588],"Hall_Front-A2":["/res/panelsoil/zenith/4x/Hall_Front-A2.png",1024,-390.81100789971373],"Hall_Front-B2":["/res/panelsoil/zenith/4x/Hall_Front-B2.png",1024,-381.06303986111885],"Hall_Front-C2":["/res/panelsoil/zenith/4x/Hall_Front-C2.png",1024,-379.4833282253662],"Hall_Front-D2":["/res/panelsoil/zenith/4x/Hall_Front-D2.png",1024,-379.3894678244903],"Hall_Front-A3":["/res/panelsoil/zenith/4x/Hall_Front-A3.png",1024,-380.13278569074026],"Hall_Front-B3":["/res/panelsoil/zenith/4x/Hall_Front-B3.png",1024,-377.70189423859887],"Hall_Front-C3":["/res/panelsoil/zenith/4x/Hall_Front-C3.png",1024,-365.28885834465046],"Hall_Front-D3":["/res/panelsoil/zenith/4x/Hall_Front-D3.png",1024,-365.2482445701199],"Hall_Front-A4":["/res/panelsoil/zenith/4x/Hall_Front-A4.png",1024,-360.7663201003497],"Hall_Front-B4":["/res/panelsoil/zenith/4x/Hall_Front-B4.png",1024,-354.1195618943786],"Hall_Front-C4":["/res/panelsoil/zenith/4x/Hall_Front-C4.png",1024,-360.90719787902947],"Hall_Front-D4":["/res/panelsoil/zenith/4x/Hall_Front-D4.png",1024,-355.07400695254194],"Hotel_A1-A1":["/res/panelsoil/zenith/4x/Hotel_A1-A1.png",1024,-347.483978767005],"Hotel_A1-B1":["/res/panelsoil/zenith/4x/Hotel_A1-B1.png",1024,-346.96799367513944],"Hotel_A1-C1":["/res/panelsoil/zenith/4x/Hotel_A1-C1.png",1024,-340.24556124144317],"Hotel_A1-D1":["/res/panelsoil/zenith/4x/Hotel_A1-D1.png",1024,-339.7927445776504],"Hotel_A1-A2":["/res/panelsoil/zenith/4x/Hotel_A1-A2.png",1024,-333.5422835792132],"Hotel_A1-B2":["/res/panelsoil/zenith/4x/Hotel_A1-B2.png",1024,-330.8100826513296],"Hotel_A1-C2":["/res/panelsoil/zenith/4x/Hotel_A1-C2.png",1024,-327.7883889216474],"Hotel_A1-D2":["/res/panelsoil/zenith/4x/Hotel_A1-D2.png",1024,-333.42796845528153],"Hotel_A1-A3":["/res/panelsoil/zenith/4x/Hotel_A1-A3.png",1024,-321.13975420035604],"Hotel_A1-B3":["/res/panelsoil/zenith/4x/Hotel_A1-B3.png",1024,-322.9855333154298],"Hotel_A1-C3":["/res/panelsoil/zenith/4x/Hotel_A1-C3.png",1024,-319.1243665403309],"Hotel_A1-D3":["/res/panelsoil/zenith/4x/Hotel_A1-D3.png",1024,-310.1099090540093],"Hotel_A1-A4":["/res/panelsoil/zenith/4x/Hotel_A1-A4.png",1024,-306.8623610083937],"Hotel_A1-B4":["/res/panelsoil/zenith/4x/Hotel_A1-B4.png",1024,-305.2343847736838],"Hotel_A1-C4":["/res/panelsoil/zenith/4x/Hotel_A1-C4.png",1024,-308.11860040987574],"Hotel_A1-D4":["/res/panelsoil/zenith/4x/Hotel_A1-D4.png",1024,-304.10503908874256],"Hotel_A1-A5":["/res/panelsoil/zenith/4x/Hotel_A1-A5.png",1024,-302.76820293455853],"Hotel_A1-B5":["/res/panelsoil/zenith/4x/Hotel_A1-B5.png",1024,-299.1964824681466],"Hotel_A1-C5":["/res/panelsoil/zenith/4x/Hotel_A1-C5.png",1024,-289.1299787347601],"Hotel_A1-D5":["/res/panelsoil/zenith/4x/Hotel_A1-D5.png",1024,-294.694914469093],"Hotel_B1-A1":["/res/panelsoil/zenith/4x/Hotel_B1-A1.png",1024,-276.9148170518005],"Hotel_B1-B1":["/res/panelsoil/zenith/4x/Hotel_B1-B1.png",1024,-281.5697180064706],"Hotel_B1-C1":["/res/panelsoil/zenith/4x/Hotel_B1-C1.png",1024,-277.1661299138569],"Hotel_B1-D1":["/res/panelsoil/zenith/4x/Hotel_B1-D1.png",1024,-270.5942972053852],"Hotel_B1-A2":["/res/panelsoil/zenith/4x/Hotel_B1-A2.png",1024,-268.92217124269735],"Hotel_B1-B2":["/res/panelsoil/zenith/4x/Hotel_B1-B2.png",1024,-262.84870731792563],"Hotel_B1-C2":["/res/panelsoil/zenith/4x/Hotel_B1-C2.png",1024,-257.369637023416],"Hotel_B1-D2":["/res/panelsoil/zenith/4x/Hotel_B1-D2.png",1024,-258.28801406096335],"Hotel_B1-A3":["/res/panelsoil/zenith/4x/Hotel_B1-A3.png",1024,-257.4523222076945],"Hotel_B1-B3":["/res/panelsoil/zenith/4x/Hotel_B1-B3.png",1024,-255.2492396615989],"Hotel_B1-C3":["/res/panelsoil/zenith/4x/Hotel_B1-C3.png",1024,-253.21776681336678],"Hotel_B1-D3":["/res/panelsoil/zenith/4x/Hotel_B1-D3.png",1024,-243.38293690841382],"Hotel_B1-A4":["/res/panelsoil/zenith/4x/Hotel_B1-A4.png",1024,-237.32865127998804],"Hotel_B1-B4":["/res/panelsoil/zenith/4x/Hotel_B1-B4.png",1024,-235.3602215434045],"Hotel_B1-C4":["/res/panelsoil/zenith/4x/Hotel_B1-C4.png",1024,-240.71881877546397],"Hotel_B1-D4":["/res/panelsoil/zenith/4x/Hotel_B1-D4.png",1024,-234.50623629947634],"Hotel_Back1-A1":["/res/panelsoil/zenith/4x/Hotel_Back1-A1.png",1024,-352.42603100654503],"Hotel_Back1-B1":["/res/panelsoil/zenith/4x/Hotel_Back1-B1.png",1024,-351.2552723835686],"Hotel_Back1-C1":["/res/panelsoil/zenith/4x/Hotel_Back1-C1.png",1024,-339.8350511199181],"Hotel_Back1-D1":["/res/panelsoil/zenith/4x/Hotel_Back1-D1.png",1024,-343.48499968740526],"Hotel_Back1-A2":["/res/panelsoil/zenith/4x/Hotel_Back1-A2.png",1024,-332.39993976195484],"Hotel_Back1-B2":["/res/panelsoil/zenith/4x/Hotel_Back1-B2.png",1024,-336.92878350455305],"Hotel_Back1-C2":["/res/panelsoil/zenith/4x/Hotel_Back1-C2.png",1024,-335.7766173748362],"Hotel_Back1-D2":["/res/panelsoil/zenith/4x/Hotel_Back1-D2.png",1024,-328.9726436241886],"Hotel_Back1-A3":["/res/panelsoil/zenith/4x/Hotel_Back1-A3.png",1024,-329.6798214663508],"Hotel_Back1-B3":["/res/panelsoil/zenith/4x/Hotel_Back1-B3.png",1024,-324.3928700517105],"Hotel_Back1-C3":["/res/panelsoil/zenith/4x/Hotel_Back1-C3.png",1024,-319.58853749918484],"Hotel_Back1-D3":["/res/panelsoil/zenith/4x/Hotel_Back1-D3.png",1024,-321.764589654084],"Hotel_Back1-A4":["/res/panelsoil/zenith/4x/Hotel_Back1-A4.png",1024,-313.13640010543793],"Hotel_Back1-B4":["/res/panelsoil/zenith/4x/Hotel_Back1-B4.png",1024,-309.4921603032114],"Hotel_Back1-C4":["/res/panelsoil/zenith/4x/Hotel_Back1-C4.png",1024,-300.67580492891443],"Hotel_Back1-D4":["/res/panelsoil/zenith/4x/Hotel_Back1-D4.png",1024,-304.5920820076063],"Hotel_Back2-A1":["/res/panelsoil/zenith/4x/Hotel_Back2-A1.png",1024,-355.546153024682],"Hotel_Back2-B1":["/res/panelsoil/zenith/4x/Hotel_Back2-B1.png",1024,-350.3903824091002],"Hotel_Back2-C1":["/res/panelsoil/zenith/4x/Hotel_Back2-C1.png",1024,-340.1532083763646],"Hotel_Back2-D1":["/res/panelsoil/zenith/4x/Hotel_Back2-D1.png",1024,-340.2006574376983],"Hotel_Back2-A2":["/res/panelsoil/zenith/4x/Hotel_Back2-A2.png",1024,-334.76203088039875],"Hotel_Back2-B2":["/res/panelsoil/zenith/4x/Hotel_Back2-B2.png",1024,-340.3592061843583],"Hotel_Back2-C2":["/res/panelsoil/zenith/4x/Hotel_Back2-C2.png",1024,-328.0877582867035],"Hotel_Back2-D2":["/res/panelsoil/zenith/4x/Hotel_Back2-D2.png",1024,-326.30685362639804],"Hotel_Back2-A3":["/res/panelsoil/zenith/4x/Hotel_Back2-A3.png",1024,-329.94610593134365],"Hotel_Back2-B3":["/res/panelsoil/zenith/4x/Hotel_Back2-B3.png",1024,-325.13501568055244],"Hotel_Back2-C3":["/res/panelsoil/zenith/4x/Hotel_Back2-C3.png",1024,-321.23305884493857],"Hotel_Back2-D3":["/res/panelsoil/zenith/4x/Hotel_Back2-D3.png",1024,-315.4546201962887],"Hotel_Front-A1":["/res/panelsoil/zenith/4x/Hotel_Front-A1.png",1024,-347.5569494781391],"Hotel_Front-B1":["/res/panelsoil/zenith/4x/Hotel_Front-B1.png",1024,-345.82192313318427],"Hotel_Front-C1":["/res/panelsoil/zenith/4x/Hotel_Front-C1.png",1024,-346.0455962026149],"Hotel_Front-D1":["/res/panelsoil/zenith/4x/Hotel_Front-D1.png",1024,-342.47722681907817],"Hotel_Front-A2":["/res/panelsoil/zenith/4x/Hotel_Front-A2.png",1024,-331.7371487797257],"Hotel_Front-B2":["/res/panelsoil/zenith/4x/Hotel_Front-B2.png",1024,-339.35076622637933],"Hotel_Front-C2":["/res/panelsoil/zenith/4x/Hotel_Front-C2.png",1024,-333.5843129936247],"Hotel_Front-D2":["/res/panelsoil/zenith/4x/Hotel_Front-D2.png",1024,-330.1793424426097],"Hotel_Front-A3":["/res/panelsoil/zenith/4x/Hotel_Front-A3.png",1024,-318.81485584035875],"Hotel_Front-B3":["/res/panelsoil/zenith/4x/Hotel_Front-B3.png",1024,-321.78842251589435],"Hotel_Front-C3":["/res/panelsoil/zenith/4x/Hotel_Front-C3.png",1024,-314.39140640328066],"Hotel_Front-D3":["/res/panelsoil/zenith/4x/Hotel_Front-D3.png",1024,-315.4845105810009],"Hotel_Front-A4":["/res/panelsoil/zenith/4x/Hotel_Front-A4.png",1024,-317.02155102527405],"Hotel_Front-B4":["/res/panelsoil/zenith/4x/Hotel_Front-B4.png",1024,-304.3641026649932],"Hotel_Front-C4":["/res/panelsoil/zenith/4x/Hotel_Front-C4.png",1024,-310.0772664625766],"Hotel_Front-D4":["/res/panelsoil/zenith/4x/Hotel_Front-D4.png",1024,-305.01804865064025],"Hotel_Front-A5":["/res/panelsoil/zenith/4x/Hotel_Front-A5.png",1024,-295.28353582020236],"Hotel_Front-B5":["/res/panelsoil/zenith/4x/Hotel_Front-B5.png",1024,-302.9401887534377],"Hotel_Front-C5":["/res/panelsoil/zenith/4x/Hotel_Front-C5.png",1024,-294.2907399049619],"Hotel_Front-D5":["/res/panelsoil/zenith/4x/Hotel_Front-D5.png",1024,-287.1187766029258],"Hotel_Front-A6":["/res/panelsoil/zenith/4x/Hotel_Front-A6.png",1024,-281.86043314423074],"Hotel_Front-B6":["/res/panelsoil/zenith/4x/Hotel_Front-B6.png",1024,-283.29535777053655],"Hotel_Front-C6":["/res/panelsoil/zenith/4x/Hotel_Front-C6.png",1024,-276.6313452508994],"Hotel_Front-D6":["/res/panelsoil/zenith/4x/Hotel_Front-D6.png",1024,-273.7255281618984],"Hotel_Front-A7":["/res/panelsoil/zenith/4x/Hotel_Front-A7.png",1024,-273.3684068202628],"Hotel_Front-B7":["/res/panelsoil/zenith/4x/Hotel_Front-B7.png",1024,-270.39538935499525],"Hotel_Front-C7":["/res/panelsoil/zenith/4x/Hotel_Front-C7.png",1024,-274.6138196856925],"Hotel_Front-D7":["/res/panelsoil/zenith/4x/Hotel_Front-D7.png",1024,-263.6700284569945],"Hotel_Front-A8":["/res/panelsoil/zenith/4x/Hotel_Front-A8.png",1024,-262.1981990884019],"Hotel_Front-B8":["/res/panelsoil/zenith/4x/Hotel_Front-B8.png",1024,-261.48934292966214],"Hotel_Front-C8":["/res/panelsoil/zenith/4x/Hotel_Front-C8.png",1024,-254.27557009417495],"Hotel_Front-D8":["/res/panelsoil/zenith/4x/Hotel_Front-D8.png",1024,-259.1670439076717],"Lab_A1-A1":["/res/panelsoil/zenith/4x/Lab_A1-A1.png",1024,474.02692633603954],"Lab_A1-B1":["/res/panelsoil/zenith/4x/Lab_A1-B1.png",1024,484.71389236654176],"Lab_A1-C1":["/res/panelsoil/zenith/4x/Lab_A1-C1.png",1024,479.9560274620463],"Lab_A1-D1":["/res/panelsoil/zenith/4x/Lab_A1-D1.png",1024,489.5973134295064],"Lab_A1-A2":["/res/panelsoil/zenith/4x/Lab_A1-A2.png",1024,492.1183378446136],"Lab_A1-B2":["/res/panelsoil/zenith/4x/Lab_A1-B2.png",1024,497.79970164740917],"Lab_A1-C2":["/res/panelsoil/zenith/4x/Lab_A1-C2.png",1024,500.501873554144],"Lab_A1-D2":["/res/panelsoil/zenith/4x/Lab_A1-D2.png",1024,500.8837110859199],"Lab_A1-A3":["/res/panelsoil/zenith/4x/Lab_A1-A3.png",1024,500.01910630423555],"Lab_A1-B3":["/res/panelsoil/zenith/4x/Lab_A1-B3.png",1024,507.87771549810896],"Lab_A1-C3":["/res/panelsoil/zenith/4x/Lab_A1-C3.png",1024,507.2861636193586],"Lab_A1-D3":["/res/panelsoil/zenith/4x/Lab_A1-D3.png",1024,518.430772351996],"Lab_A1-A4":["/res/panelsoil/zenith/4x/Lab_A1-A4.png",1024,518.8470383804837],"Lab_A1-B4":["/res/panelsoil/zenith/4x/Lab_A1-B4.png",1024,513.6622042299274],"Lab_A1-C4":["/res/panelsoil/zenith/4x/Lab_A1-C4.png",1024,519.8057017435472],"Lab_A1-D4":["/res/panelsoil/zenith/4x/Lab_A1-D4.png",1024,529.8120969146897],"Lab_A1-A5":["/res/panelsoil/zenith/4x/Lab_A1-A5.png",1024,533.6822557551158],"Lab_A1-B5":["/res/panelsoil/zenith/4x/Lab_A1-B5.png",1024,526.8810959757367],"Lab_A1-C5":["/res/panelsoil/zenith/4x/Lab_A1-C5.png",1024,533.5258701344837],"Lab_A1-D5":["/res/panelsoil/zenith/4x/Lab_A1-D5.png",1024,532.7127820128112],"Lab_A1-A6":["/res/panelsoil/zenith/4x/Lab_A1-A6.png",1024,541.1521208034685],"Lab_A1-B6":["/res/panelsoil/zenith/4x/Lab_A1-B6.png",1024,545.4575984963269],"Lab_A1-C6":["/res/panelsoil/zenith/4x/Lab_A1-C6.png",1024,551.1989561801959],"Lab_A1-D6":["/res/panelsoil/zenith/4x/Lab_A1-D6.png",1024,554.6397247033085],"Lab_A1-A7":["/res/panelsoil/zenith/4x/Lab_A1-A7.png",1024,553.1787494467978],"Lab_A1-B7":["/res/panelsoil/zenith/4x/Lab_A1-B7.png",1024,558.845704427467],"Lab_A1-C7":["/res/panelsoil/zenith/4x/Lab_A1-C7.png",1024,564.9731407679152],"Lab_A1-D7":["/res/panelsoil/zenith/4x/Lab_A1-D7.png",1024,565.3705595721863],"Lab_A2-A1":["/res/panelsoil/zenith/4x/Lab_A2-A1.png",1024,476.32969791272683],"Lab_A2-B1":["/res/panelsoil/zenith/4x/Lab_A2-B1.png",1024,485.5075270377738],"Lab_A2-C1":["/res/panelsoil/zenith/4x/Lab_A2-C1.png",1024,487.9575360299631],"Lab_A2-D1":["/res/panelsoil/zenith/4x/Lab_A2-D1.png",1024,485.75311037958943],"Lab_A2-A2":["/res/panelsoil/zenith/4x/Lab_A2-A2.png",1024,490.4483241457669],"Lab_A2-B2":["/res/panelsoil/zenith/4x/Lab_A2-B2.png",1024,488.8057636619594],"Lab_A2-C2":["/res/panelsoil/zenith/4x/Lab_A2-C2.png",1024,500.4028880326803],"Lab_A2-D2":["/res/panelsoil/zenith/4x/Lab_A2-D2.png",1024,502.6879062504636],"Lab_A2-A3":["/res/panelsoil/zenith/4x/Lab_A2-A3.png",1024,498.2825790982165],"Lab_A2-B3":["/res/panelsoil/zenith/4x/Lab_A2-B3.png",1024,506.22553089917744],"Lab_A2-C3":["/res/panelsoil/zenith/4x/Lab_A2-C3.png",1024,511.57005148972655],"Lab_A2-D3":["/res/panelsoil/zenith/4x/Lab_A2-D3.png",1024,516.6332839420319],"Lab_A2-A4":["/res/panelsoil/zenith/4x/Lab_A2-A4.png",1024,513.678731103078],"Lab_A2-B4":["/res/panelsoil/zenith/4x/Lab_A2-B4.png",1024,512.9833764249303],"Lab_A2-C4":["/res/panelsoil/zenith/4x/Lab_A2-C4.png",1024,515.9657527391631],"Lab_A2-D4":["/res/panelsoil/zenith/4x/Lab_A2-D4.png",1024,529.1073214195172],"Lab_A2-A5":["/res/panelsoil/zenith/4x/Lab_A2-A5.png",1024,529.1265669496073],"Lab_A2-B5":["/res/panelsoil/zenith/4x/Lab_A2-B5.png",1024,525.9542439317244],"Lab_A2-C5":["/res/panelsoil/zenith/4x/Lab_A2-C5.png",1024,529.5854338267745],"Lab_A2-D5":["/res/panelsoil/zenith/4x/Lab_A2-D5.png",1024,535.3601460134827],"Lab_A2-A6":["/res/panelsoil/zenith/4x/Lab_A2-A6.png",1024,542.8317573185811],"Lab_A2-B6":["/res/panelsoil/zenith/4x/Lab_A2-B6.png",1024,543.8170722108989],"Lab_A2-C6":["/res/panelsoil/zenith/4x/Lab_A2-C6.png",1024,547.3148727048427],"Lab_A2-D6":["/res/panelsoil/zenith/4x/Lab_A2-D6.png",1024,547.0501515657872],"Lab_A2-A7":["/res/panelsoil/zenith/4x/Lab_A2-A7.png",1024,550.1763306042609],"Lab_A2-B7":["/res/panelsoil/zenith/4x/Lab_A2-B7.png",1024,556.2409824572463],"Lab_A2-C7":["/res/panelsoil/zenith/4x/Lab_A2-C7.png",1024,553.070735470069],"Lab_A2-D7":["/res/panelsoil/zenith/4x/Lab_A2-D7.png",1024,566.1013904655343],"Lab_A2-A8":["/res/panelsoil/zenith/4x/Lab_A2-A8.png",1024,566.796905193436],"Lab_A2-B8":["/res/panelsoil/zenith/4x/Lab_A2-B8.png",1024,573.5662156683637],"Lab_A2-C8":["/res/panelsoil/zenith/4x/Lab_A2-C8.png",1024,568.4396776315914],"Lab_A2-D8":["/res/panelsoil/zenith/4x/Lab_A2-D8.png",1024,576.8235182995119],"Lab_B1-A1":["/res/panelsoil/zenith/4x/Lab_B1-A1.png",1024,587.3679956326569],"Lab_B1-B1":["/res/panelsoil/zenith/4x/Lab_B1-B1.png",1024,587.6186851435453],"Lab_B1-C1":["/res/panelsoil/zenith/4x/Lab_B1-C1.png",1024,589.5819708662077],"Lab_B1-D1":["/res/panelsoil/zenith/4x/Lab_B1-D1.png",1024,588.4271363114436],"Lab_B1-A2":["/res/panelsoil/zenith/4x/Lab_B1-A2.png",1024,598.8059171144946],"Lab_B1-B2":["/res/panelsoil/zenith/4x/Lab_B1-B2.png",1024,595.1120053916671],"Lab_B1-C2":["/res/panelsoil/zenith/4x/Lab_B1-C2.png",1024,600.9900817294546],"Lab_B1-D2":["/res/panelsoil/zenith/4x/Lab_B1-D2.png",1024,611.3991220238812],"Lab_B1-A3":["/res/panelsoil/zenith/4x/Lab_B1-A3.png",1024,612.0125231912425],"Lab_B1-B3":["/res/panelsoil/zenith/4x/Lab_B1-B3.png",1024,611.9350209081673],"Lab_B1-C3":["/res/panelsoil/zenith/4x/Lab_B1-C3.png",1024,610.4155311354599],"Lab_B1-D3":["/res/panelsoil/zenith/4x/Lab_B1-D3.png",1024,613.1969857473981],"Lab_B1-A4":["/res/panelsoil/zenith/4x/Lab_B1-A4.png",1024,619.8961706409541],"Lab_B1-B4":["/res/panelsoil/zenith/4x/Lab_B1-B4.png",1024,628.0205165147167],"Lab_B1-C4":["/res/panelsoil/zenith/4x/Lab_B1-C4.png",1024,626.6200791405479],"Lab_B1-D4":["/res/panelsoil/zenith/4x/Lab_B1-D4.png",1024,628.5047034075568],"Lab_B1-A5":["/res/panelsoil/zenith/4x/Lab_B1-A5.png",1024,628.2954647152186],"Lab_B1-B5":["/res/panelsoil/zenith/4x/Lab_B1-B5.png",1024,635.7422991335842],"Lab_B1-C5":["/res/panelsoil/zenith/4x/Lab_B1-C5.png",1024,638.5920792417497],"Lab_B1-D5":["/res/panelsoil/zenith/4x/Lab_B1-D5.png",1024,647.715694689033],"Lab_B1-A6":["/res/panelsoil/zenith/4x/Lab_B1-A6.png",1024,646.4860897273115],"Lab_B1-B6":["/res/panelsoil/zenith/4x/Lab_B1-B6.png",1024,652.3455170184437],"Lab_B1-C6":["/res/panelsoil/zenith/4x/Lab_B1-C6.png",1024,649.2670933904037],"Lab_B1-D6":["/res/panelsoil/zenith/4x/Lab_B1-D6.png",1024,661.664224020842],"Lab_C1-A1":["/res/panelsoil/zenith/4x/Lab_C1-A1.png",1024,635.3666324657529],"Lab_C1-B1":["/res/panelsoil/zenith/4x/Lab_C1-B1.png",1024,637.6649925675821],"Lab_C1-C1":["/res/panelsoil/zenith/4x/Lab_C1-C1.png",1024,645.2408428688634],"Lab_C1-D1":["/res/panelsoil/zenith/4x/Lab_C1-D1.png",1024,649.6876956038442],"Lab_C1-A2":["/res/panelsoil/zenith/4x/Lab_C1-A2.png",1024,644.7831055218577],"Lab_C1-B2":["/res/panelsoil/zenith/4x/Lab_C1-B2.png",1024,652.3386380601828],"Lab_C1-C2":["/res/panelsoil/zenith/4x/Lab_C1-C2.png",1024,656.4477684556008],"Lab_C1-D2":["/res/panelsoil/zenith/4x/Lab_C1-D2.png",1024,663.4595392753256],"Lab_C1-A3":["/res/panelsoil/zenith/4x/Lab_C1-A3.png",1024,656.8795614251133],"Lab_C1-B3":["/res/panelsoil/zenith/4x/Lab_C1-B3.png",1024,665.3585408508359],"Lab_C1-C3":["/res/panelsoil/zenith/4x/Lab_C1-C3.png",1024,662.4462958046549],"Lab_C1-D3":["/res/panelsoil/zenith/4x/Lab_C1-D3.png",1024,666.1953534521843],"Lab_C1-A4":["/res/panelsoil/zenith/4x/Lab_C1-A4.png",1024,679.2103928355588],"Lab_C1-B4":["/res/panelsoil/zenith/4x/Lab_C1-B4.png",1024,679.2846686390867],"Lab_C1-C4":["/res/panelsoil/zenith/4x/Lab_C1-C4.png",1024,674.4906699343306],"Lab_C1-D4":["/res/panelsoil/zenith/4x/Lab_C1-D4.png",1024,685.6786521477308],"Lab_C1-A5":["/res/panelsoil/zenith/4x/Lab_C1-A5.png",1024,688.8696240386024],"Lab_C1-B5":["/res/panelsoil/zenith/4x/Lab_C1-B5.png",1024,692.4846467656046],"Lab_C1-C5":["/res/panelsoil/zenith/4x/Lab_C1-C5.png",1024,687.9883429090379],"Lab_C1-D5":["/res/panelsoil/zenith/4x/Lab_C1-D5.png",1024,693.5755293907488],"Lab_C1-A6":["/res/panelsoil/zenith/4x/Lab_C1-A6.png",1024,696.7075633995793],"Lab_C1-B6":["/res/panelsoil/zenith/4x/Lab_C1-B6.png",1024,705.775135562333],"Lab_C1-C6":["/res/panelsoil/zenith/4x/Lab_C1-C6.png",1024,706.2800170569649],"Lab_C1-D6":["/res/panelsoil/zenith/4x/Lab_C1-D6.png",1024,704.8069254771401],"Lab_Front-A1":["/res/panelsoil/zenith/4x/Lab_Front-A1.png",1024,454.10548548104924],"Lab_Front-B1":["/res/panelsoil/zenith/4x/Lab_Front-B1.png",1024,451.4550210336653],"Lab_Front-C1":["/res/panelsoil/zenith/4x/Lab_Front-C1.png",1024,451.5188196136173],"Lab_Front-D1":["/res/panelsoil/zenith/4x/Lab_Front-D1.png",1024,456.4155593613207],"Lab_Front-A2":["/res/panelsoil/zenith/4x/Lab_Front-A2.png",1024,465.2108966138761],"Lab_Front-B2":["/res/panelsoil/zenith/4x/Lab_Front-B2.png",1024,462.04777473098113],"Lab_Front-C2":["/res/panelsoil/zenith/4x/Lab_Front-C2.png",1024,466.55681106596927],"Lab_Front-D2":["/res/panelsoil/zenith/4x/Lab_Front-D2.png",1024,469.95540892839256],"Lab_Front-A3":["/res/panelsoil/zenith/4x/Lab_Front-A3.png",1024,473.42280198373555],"Lab_Front-B3":["/res/panelsoil/zenith/4x/Lab_Front-B3.png",1024,482.4167025332318],"Lab_Front-C3":["/res/panelsoil/zenith/4x/Lab_Front-C3.png",1024,485.3557025796336],"Lab_Front-D3":["/res/panelsoil/zenith/4x/Lab_Front-D3.png",1024,479.4890792581754],"Lab_Front-A4":["/res/panelsoil/zenith/4x/Lab_Front-A4.png",1024,493.6833473932192],"Lab_Front-B4":["/res/panelsoil/zenith/4x/Lab_Front-B4.png",1024,494.33863336024405],"Lab_Front-C4":["/res/panelsoil/zenith/4x/Lab_Front-C4.png",1024,497.886209039122],"Lab_Front-D4":["/res/panelsoil/zenith/4x/Lab_Front-D4.png",1024,496.33626404859],"Lab_Front-A5":["/res/panelsoil/zenith/4x/Lab_Front-A5.png",1024,499.6334148118994],"Lab_Front-B5":["/res/panelsoil/zenith/4x/Lab_Front-B5.png",1024,504.54178835237775],"Lab_Front-C5":["/res/panelsoil/zenith/4x/Lab_Front-C5.png",1024,504.1022385556514],"Lab_Front-D5":["/res/panelsoil/zenith/4x/Lab_Front-D5.png",1024,506.78374844086454],"Lab_Front-A6":["/res/panelsoil/zenith/4x/Lab_Front-A6.png",1024,518.6783490725634],"Lab_Front-B6":["/res/panelsoil/zenith/4x/Lab_Front-B6.png",1024,513.5059638006234],"Lab_Front-C6":["/res/panelsoil/zenith/4x/Lab_Front-C6.png",1024,515.5143493301232],"Lab_Front-D6":["/res/panelsoil/zenith/4x/Lab_Front-D6.png",1024,516.9435209718606],"Lab_Front-A7":["/res/panelsoil/zenith/4x/Lab_Front-A7.png",1024,527.7458706785028],"Lab_Front-D7":["/res/panelsoil/zenith/4x/Lab_Front-D7.png",1024,534.2196179549679],"Lab_Front-A8":["/res/panelsoil/zenith/4x/Lab_Front-A8.png",1024,537.3411502242183],"Lab_Front-B8":["/res/panelsoil/zenith/4x/Lab_Front-B8.png",1024,535.1299152657615],"Lab_Front-C8":["/res/panelsoil/zenith/4x/Lab_Front-C8.png",1024,542.2589139240833],"Lab_Front-D8":["/res/panelsoil/zenith/4x/Lab_Front-D8.png",1024,542.8942177472563],"Lab_Front-A9":["/res/panelsoil/zenith/4x/Lab_Front-A9.png",1024,551.6210599699765],"Lab_Front-B9":["/res/panelsoil/zenith/4x/Lab_Front-B9.png",1024,549.1362700298381],"Lab_Front-C9":["/res/panelsoil/zenith/4x/Lab_Front-C9.png",1024,559.9922064917141],"Lab_Front-D9":["/res/panelsoil/zenith/4x/Lab_Front-D9.png",1024,561.3083858360499],"Lab_Front-A10":["/res/panelsoil/zenith/4x/Lab_Front-A10.png",1024,561.641460688078],"Lab_Front-B10":["/res/panelsoil/zenith/4x/Lab_Front-B10.png",1024,571.6877359305752],"Lab_Front-D10":["/res/panelsoil/zenith/4x/Lab_Front-D10.png",1024,567.1253629784255],"Lab_Front-A11":["/res/panelsoil/zenith/4x/Lab_Front-A11.png",1024,579.7032624643832],"Lab_Front-B11":["/res/panelsoil/zenith/4x/Lab_Front-B11.png",1024,581.0509134376123],"Lab_Front-C11":["/res/panelsoil/zenith/4x/Lab_Front-C11.png",1024,577.7453279328216],"Lab_Front-D11":["/res/panelsoil/zenith/4x/Lab_Front-D11.png",1024,579.4088089467493],"Lab_Front-A12":["/res/panelsoil/zenith/4x/Lab_Front-A12.png",1024,581.7887517244169],"Lab_Front-B12":["/res/panelsoil/zenith/4x/Lab_Front-B12.png",1024,589.911573194737],"Lab_Front-C12":["/res/panelsoil/zenith/4x/Lab_Front-C12.png",1024,592.6268638261888],"Lab_Front-D12":["/res/panelsoil/zenith/4x/Lab_Front-D12.png",1024,601.9039705359855],"Lab_Front-A13":["/res/panelsoil/zenith/4x/Lab_Front-A13.png",1024,595.0385236436451],"Lab_Front-B13":["/res/panelsoil/zenith/4x/Lab_Front-B13.png",1024,600.516700314105],"Lab_Front-C13":["/res/panelsoil/zenith/4x/Lab_Front-C13.png",1024,601.119779458386],"Lab_Front-D13":["/res/panelsoil/zenith/4x/Lab_Front-D13.png",1024,614.1879822996071],"Lab_Front-A14":["/res/panelsoil/zenith/4x/Lab_Front-A14.png",1024,617.525136578967],"Lab_Front-B14":["/res/panelsoil/zenith/4x/Lab_Front-B14.png",1024,615.9602366542069],"Lab_Front-C14":["/res/panelsoil/zenith/4x/Lab_Front-C14.png",1024,623.2380058375733],"Lab_Front-D14":["/res/panelsoil/zenith/4x/Lab_Front-D14.png",1024,626.7724644013348],"Lab_Front-A15":["/res/panelsoil/zenith/4x/Lab_Front-A15.png",1024,629.3612508508743],"Lab_Front-B15":["/res/panelsoil/zenith/4x/Lab_Front-B15.png",1024,624.6359974471226],"Lab_Front-C15":["/res/panelsoil/zenith/4x/Lab_Front-C15.png",1024,632.7519141084904],"Lab_Front-D15":["/res/panelsoil/zenith/4x/Lab_Front-D15.png",1024,638.549291268028],"Lab_Front-A16":["/res/panelsoil/zenith/4x/Lab_Front-A16.png",1024,636.4586429733091],"Lab_Front-B16":["/res/panelsoil/zenith/4x/Lab_Front-B16.png",1024,636.4112251809946],"Lab_Front-C16":["/res/panelsoil/zenith/4x/Lab_Front-C16.png",1024,641.2504226889895],"Lab_Front-D16":["/res/panelsoil/zenith/4x/Lab_Front-D16.png",1024,646.0830525188487],"Lab_Front-A17":["/res/panelsoil/zenith/4x/Lab_Front-A17.png",1024,648.2439197542117],"Lab_Front-B17":["/res/panelsoil/zenith/4x/Lab_Front-B17.png",1024,657.8689781186537],"Lab_Front-C17":["/res/panelsoil/zenith/4x/Lab_Front-C17.png",1024,657.5507801836102],"Lab_Front-D17":["/res/panelsoil/zenith/4x/Lab_Front-D17.png",1024,659.968454361682],"Lab_Front-A18":["/res/panelsoil/zenith/4x/Lab_Front-A18.png",1024,665.6866175575427],"Lab_Front-B18":["/res/panelsoil/zenith/4x/Lab_Front-B18.png",1024,664.5895215198692],"Lab_Front-C18":["/res/panelsoil/zenith/4x/Lab_Front-C18.png",1024,670.4917520758393],"Lab_Front-D18":["/res/panelsoil/zenith/4x/Lab_Front-D18.png",1024,668.9339005076505],"Lab_Front-A19":["/res/panelsoil/zenith/4x/Lab_Front-A19.png",1024,674.6469119136998],"Lab_Front-B19":["/res/panelsoil/zenith/4x/Lab_Front-B19.png",1024,679.6664307159847],"Lab_Front-C19":["/res/panelsoil/zenith/4x/Lab_Front-C19.png",1024,679.3064262683207],"Lab_Front-D19":["/res/panelsoil/zenith/4x/Lab_Front-D19.png",1024,680.8352126747799],"Lab_Front-A20":["/res/panelsoil/zenith/4x/Lab_Front-A20.png",1024,690.7800207649349],"Lab_Front-B20":["/res/panelsoil/zenith/4x/Lab_Front-B20.png",1024,689.4430824753432],"Lab_Front-C20":["/res/panelsoil/zenith/4x/Lab_Front-C20.png",1024,693.2587412249555],"Lab_Front-D20":["/res/panelsoil/zenith/4x/Lab_Front-D20.png",1024,694.4225346668921],"Museum_A1-A1":["/res/panelsoil/zenith/4x/Museum_A1-A1.png",1024,46.59978829337548],"Museum_A1-B1":["/res/panelsoil/zenith/4x/Museum_A1-B1.png",1024,48.616792441979534],"Museum_A1-C1":["/res/panelsoil/zenith/4x/Museum_A1-C1.png",1024,57.985427571013716],"Museum_A1-D1":["/res/panelsoil/zenith/4x/Museum_A1-D1.png",1024,61.834474201722415],"Museum_A1-A2":["/res/panelsoil/zenith/4x/Museum_A1-A2.png",1024,60.38048009658159],"Museum_A1-B2":["/res/panelsoil/zenith/4x/Museum_A1-B2.png",1024,62.290543116898974],"Museum_A1-C2":["/res/panelsoil/zenith/4x/Museum_A1-C2.png",1024,63.010384732152005],"Museum_A1-D2":["/res/panelsoil/zenith/4x/Museum_A1-D2.png",1024,75.75739174073459],"Museum_A1-A3":["/res/panelsoil/zenith/4x/Museum_A1-A3.png",1024,69.50441716767774],"Museum_A1-B3":["/res/panelsoil/zenith/4x/Museum_A1-B3.png",1024,78.40767692095648],"Museum_A1-C3":["/res/panelsoil/zenith/4x/Museum_A1-C3.png",1024,77.87126107406719],"Museum_A1-D3":["/res/panelsoil/zenith/4x/Museum_A1-D3.png",1024,83.47248259532998],"Museum_A1-A4":["/res/panelsoil/zenith/4x/Museum_A1-A4.png",1024,87.06127847045964],"Museum_A1-B4":["/res/panelsoil/zenith/4x/Museum_A1-B4.png",1024,84.40552141858308],"Museum_A1-C4":["/res/panelsoil/zenith/4x/Museum_A1-C4.png",1024,88.8698777863725],"Museum_A1-D4":["/res/panelsoil/zenith/4x/Museum_A1-D4.png",1024,95.92760419598065],"Museum_A1-A5":["/res/panelsoil/zenith/4x/Museum_A1-A5.png",1024,97.08567143403127],"Museum_A1-B5":["/res/panelsoil/zenith/4x/Museum_A1-B5.png",1024,97.56953887956807],"Museum_A1-C5":["/res/panelsoil/zenith/4x/Museum_A1-C5.png",1024,110.58678414394728],"Museum_A1-D5":["/res/panelsoil/zenith/4x/Museum_A1-D5.png",1024,103.41768238627753],"Museum_B1-A1":["/res/panelsoil/zenith/4x/Museum_B1-A1.png",1024,118.5302062384831],"Museum_B1-B1":["/res/panelsoil/zenith/4x/Museum_B1-B1.png",1024,122.71857401310206],"Museum_B1-C1":["/res/panelsoil/zenith/4x/Museum_B1-C1.png",1024,130.63007535410873],"Museum_B1-D1":["/res/panelsoil/zenith/4x/Museum_B1-D1.png",1024,129.3354088321838],"Museum_B1-A2":["/res/panelsoil/zenith/4x/Museum_B1-A2.png",1024,126.74546014419451],"Museum_B1-B2":["/res/panelsoil/zenith/4x/Museum_B1-B2.png",1024,137.64055767750176],"Museum_B1-C2":["/res/panelsoil/zenith/4x/Museum_B1-C2.png",1024,138.75102093563285],"Museum_B1-D2":["/res/panelsoil/zenith/4x/Museum_B1-D2.png",1024,143.71858738196482],"Museum_B1-A3":["/res/panelsoil/zenith/4x/Museum_B1-A3.png",1024,145.57735246423368],"Museum_B1-B3":["/res/panelsoil/zenith/4x/Museum_B1-B3.png",1024,152.30718669778807],"Museum_B1-C3":["/res/panelsoil/zenith/4x/Museum_B1-C3.png",1024,146.17830228022797],"Museum_B1-D3":["/res/panelsoil/zenith/4x/Museum_B1-D3.png",1024,150.3647531216859],"Museum_B1-A4":["/res/panelsoil/zenith/4x/Museum_B1-A4.png",1024,154.66027593332825],"Museum_B1-B4":["/res/panelsoil/zenith/4x/Museum_B1-B4.png",1024,159.48478848140812],"Museum_B1-C4":["/res/panelsoil/zenith/4x/Museum_B1-C4.png",1024,162.47382921559068],"Museum_B1-D4":["/res/panelsoil/zenith/4x/Museum_B1-D4.png",1024,166.10110296265978],"Museum_B1-A5":["/res/panelsoil/zenith/4x/Museum_B1-A5.png",1024,174.25447488000873],"Museum_B1-B5":["/res/panelsoil/zenith/4x/Museum_B1-B5.png",1024,169.46905757622577],"Museum_B1-C5":["/res/panelsoil/zenith/4x/Museum_B1-C5.png",1024,177.42550712353966],"Museum_B1-D5":["/res/panelsoil/zenith/4x/Museum_B1-D5.png",1024,174.0196593814839],"Museum_C1-A1":["/res/panelsoil/zenith/4x/Museum_C1-A1.png",1024,194.55963688722414],"Museum_C1-B1":["/res/panelsoil/zenith/4x/Museum_C1-B1.png",1024,199.46226059807034],"Museum_C1-C1":["/res/panelsoil/zenith/4x/Museum_C1-C1.png",1024,194.3649301229584],"Museum_C1-D1":["/res/panelsoil/zenith/4x/Museum_C1-D1.png",1024,202.92856448422341],"Museum_C1-A2":["/res/panelsoil/zenith/4x/Museum_C1-A2.png",1024,197.78497400552527],"Museum_C1-B2":["/res/panelsoil/zenith/4x/Museum_C1-B2.png",1024,203.96593839766174],"Museum_C1-C2":["/res/panelsoil/zenith/4x/Museum_C1-C2.png",1024,214.01241245707845],"Museum_C1-D2":["/res/panelsoil/zenith/4x/Museum_C1-D2.png",1024,216.8806084095604],"Museum_C1-A3":["/res/panelsoil/zenith/4x/Museum_C1-A3.png",1024,209.77787414599894],"Museum_C1-B3":["/res/panelsoil/zenith/4x/Museum_C1-B3.png",1024,219.51398040906486],"Museum_C1-C3":["/res/panelsoil/zenith/4x/Museum_C1-C3.png",1024,221.92522471115967],"Museum_C1-D3":["/res/panelsoil/zenith/4x/Museum_C1-D3.png",1024,219.9057209233558],"Museum_C1-A4":["/res/panelsoil/zenith/4x/Museum_C1-A4.png",1024,224.65982365790694],"Museum_C1-B4":["/res/panelsoil/zenith/4x/Museum_C1-B4.png",1024,234.9723997968329],"Museum_C1-C4":["/res/panelsoil/zenith/4x/Museum_C1-C4.png",1024,228.9522099892471],"Museum_C1-D4":["/res/panelsoil/zenith/4x/Museum_C1-D4.png",1024,234.99239947802832],"Museum_C1-A5":["/res/panelsoil/zenith/4x/Museum_C1-A5.png",1024,240.2618340843814],"Museum_C1-B5":["/res/panelsoil/zenith/4x/Museum_C1-B5.png",1024,245.0272513778577],"Museum_C1-C5":["/res/panelsoil/zenith/4x/Museum_C1-C5.png",1024,244.9036433061855],"Museum_C1-D5":["/res/panelsoil/zenith/4x/Museum_C1-D5.png",1024,247.67615321695186],"Museum_C1-A6":["/res/panelsoil/zenith/4x/Museum_C1-A6.png",1024,248.20726412734524],"Museum_C1-B6":["/res/panelsoil/zenith/4x/Museum_C1-B6.png",1024,261.26584076329294],"Museum_C1-C6":["/res/panelsoil/zenith/4x/Museum_C1-C6.png",1024,259.1572344113612],"Museum_C1-D6":["/res/panelsoil/zenith/4x/Museum_C1-D6.png",1024,262.12326750243443],"Museum_C2-A1":["/res/panelsoil/zenith/4x/Museum_C2-A1.png",1024,186.63862323746727],"Museum_C2-B1":["/res/panelsoil/zenith/4x/Museum_C2-B1.png",1024,196.5717667996199],"Museum_C2-C1":["/res/panelsoil/zenith/4x/Museum_C2-C1.png",1024,199.83350242132772],"Museum_C2-D1":["/res/panelsoil/zenith/4x/Museum_C2-D1.png",1024,202.55209193463773],"Museum_C2-A2":["/res/panelsoil/zenith/4x/Museum_C2-A2.png",1024,203.96809847646952],"Museum_C2-B2":["/res/panelsoil/zenith/4x/Museum_C2-B2.png",1024,203.73571011742635],"Museum_C2-C2":["/res/panelsoil/zenith/4x/Museum_C2-C2.png",1024,212.98005029575268],"Museum_C2-D2":["/res/panelsoil/zenith/4x/Museum_C2-D2.png",1024,210.18258488982954],"Museum_C2-A3":["/res/panelsoil/zenith/4x/Museum_C2-A3.png",1024,213.14175434519237],"Museum_C2-B3":["/res/panelsoil/zenith/4x/Museum_C2-B3.png",1024,222.1846862722836],"Museum_C2-C3":["/res/panelsoil/zenith/4x/Museum_C2-C3.png",1024,218.75107139916412],"Museum_C2-D3":["/res/panelsoil/zenith/4x/Museum_C2-D3.png",1024,223.65409596642377],"Museum_C2-A4":["/res/panelsoil/zenith/4x/Museum_C2-A4.png",1024,233.83206542980582],"Museum_C2-B4":["/res/panelsoil/zenith/4x/Museum_C2-B4.png",1024,232.9316860567154],"Museum_C2-C4":["/res/panelsoil/zenith/4x/Museum_C2-C4.png",1024,230.9744082554335],"Museum_C2-D4":["/res/panelsoil/zenith/4x/Museum_C2-D4.png",1024,235.82181368869053],"Museum_C2-A5":["/res/panelsoil/zenith/4x/Museum_C2-A5.png",1024,244.19154657196808],"Museum_C2-B5":["/res/panelsoil/zenith/4x/Museum_C2-B5.png",1024,249.8004907626816],"Museum_C2-C5":["/res/panelsoil/zenith/4x/Museum_C2-C5.png",1024,249.1392267011303],"Museum_C2-D5":["/res/panelsoil/zenith/4x/Museum_C2-D5.png",1024,250.8584754126466],"Museum_C2-A6":["/res/panelsoil/zenith/4x/Museum_C2-A6.png",1024,259.34743298002803],"Museum_C2-B6":["/res/panelsoil/zenith/4x/Museum_C2-B6.png",1024,252.07330376361386],"Museum_C2-C6":["/res/panelsoil/zenith/4x/Museum_C2-C6.png",1024,254.6984807294187],"Museum_C2-D6":["/res/panelsoil/zenith/4x/Museum_C2-D6.png",1024,263.6375426507399],"Museum_Front-A1":["/res/panelsoil/zenith/4x/Museum_Front-A1.png",1024,55.07788013340668],"Museum_Front-B1":["/res/panelsoil/zenith/4x/Museum_Front-B1.png",1024,46.90138775293972],"Museum_Front-C1":["/res/panelsoil/zenith/4x/Museum_Front-C1.png",1024,55.984925652743094],"Museum_Front-D1":["/res/panelsoil/zenith/4x/Museum_Front-D1.png",1024,54.049146786324435],"Museum_Front-A2":["/res/panelsoil/zenith/4x/Museum_Front-A2.png",1024,59.25242950330261],"Museum_Front-B2":["/res/panelsoil/zenith/4x/Museum_Front-B2.png",1024,61.6027265907167],"Museum_Front-C2":["/res/panelsoil/zenith/4x/Museum_Front-C2.png",1024,73.10580579701693],"Museum_Front-D2":["/res/panelsoil/zenith/4x/Museum_Front-D2.png",1024,72.09315514694437],"Museum_Front-A3":["/res/panelsoil/zenith/4x/Museum_Front-A3.png",1024,80.64533424837533],"Museum_Front-B3":["/res/panelsoil/zenith/4x/Museum_Front-B3.png",1024,82.555959637575],"Museum_Front-C3":["/res/panelsoil/zenith/4x/Museum_Front-C3.png",1024,80.16110547214696],"Museum_Front-D3":["/res/panelsoil/zenith/4x/Museum_Front-D3.png",1024,79.37926749369409],"Museum_Front-A4":["/res/panelsoil/zenith/4x/Museum_Front-A4.png",1024,82.80606036866969],"Museum_Front-B4":["/res/panelsoil/zenith/4x/Museum_Front-B4.png",1024,86.08952484457389],"Museum_Front-C4":["/res/panelsoil/zenith/4x/Museum_Front-C4.png",1024,99.68600984036365],"Museum_Front-D4":["/res/panelsoil/zenith/4x/Museum_Front-D4.png",1024,100.94539081802007],"Museum_Front-A5":["/res/panelsoil/zenith/4x/Museum_Front-A5.png",1024,105.38639093641653],"Museum_Front-B5":["/res/panelsoil/zenith/4x/Museum_Front-B5.png",1024,103.55305032445659],"Museum_Front-C5":["/res/panelsoil/zenith/4x/Museum_Front-C5.png",1024,100.10040311959341],"Museum_Front-D5":["/res/panelsoil/zenith/4x/Museum_Front-D5.png",1024,114.45249382647128],"Museum_Front-A6":["/res/panelsoil/zenith/4x/Museum_Front-A6.png",1024,110.16878144407866],"Museum_Front-B6":["/res/panelsoil/zenith/4x/Museum_Front-B6.png",1024,110.58950675294128],"Museum_Front-C6":["/res/panelsoil/zenith/4x/Museum_Front-C6.png",1024,120.21593427406606],"Museum_Front-D6":["/res/panelsoil/zenith/4x/Museum_Front-D6.png",1024,121.27854221659223],"Museum_Front-A7":["/res/panelsoil/zenith/4x/Museum_Front-A7.png",1024,126.65202661938704],"Museum_Front-B7":["/res/panelsoil/zenith/4x/Museum_Front-B7.png",1024,126.32936319069893],"Museum_Front-C7":["/res/panelsoil/zenith/4x/Museum_Front-C7.png",1024,130.6372114086022],"Museum_Front-D7":["/res/panelsoil/zenith/4x/Museum_Front-D7.png",1024,139.36215610250602],"Museum_Front-A8":["/res/panelsoil/zenith/4x/Museum_Front-A8.png",1024,137.7984256675717],"Museum_Front-B8":["/res/panelsoil/zenith/4x/Museum_Front-B8.png",1024,136.60333350774758],"Museum_Front-C8":["/res/panelsoil/zenith/4x/Museum_Front-C8.png",1024,145.25633783431778],"Museum_Front-D8":["/res/panelsoil/zenith/4x/Museum_Front-D8.png",1024,149.4696572792305],"Museum_Front-A9":["/res/panelsoil/zenith/4x/Museum_Front-A9.png",1024,152.09737644214917],"Museum_Front-B9":["/res/panelsoil/zenith/4x/Museum_Front-B9.png",1024,157.04944254558478],"Museum_Front-C9":["/res/panelsoil/zenith/4x/Museum_Front-C9.png",1024,162.36757268131086],"Museum_Front-D9":["/res/panelsoil/zenith/4x/Museum_Front-D9.png",1024,156.38666218060894],"Museum_Front-A10":["/res/panelsoil/zenith/4x/Museum_Front-A10.png",1024,168.44989996388767],"Museum_Front-B10":["/res/panelsoil/zenith/4x/Museum_Front-B10.png",1024,164.9218794573214],"Museum_Front-C10":["/res/panelsoil/zenith/4x/Museum_Front-C10.png",1024,163.34563731840782],"Museum_Front-D10":["/res/panelsoil/zenith/4x/Museum_Front-D10.png",1024,177.18838832864296],"Museum_Front-A11":["/res/panelsoil/zenith/4x/Museum_Front-A11.png",1024,169.42532053408348],"Museum_Front-B11":["/res/panelsoil/zenith/4x/Museum_Front-B11.png",1024,177.37051929311207],"Museum_Front-C11":["/res/panelsoil/zenith/4x/Museum_Front-C11.png",1024,182.81029147721205],"Museum_Front-D11":["/res/panelsoil/zenith/4x/Museum_Front-D11.png",1024,180.1272448529235],"Museum_Front-A12":["/res/panelsoil/zenith/4x/Museum_Front-A12.png",1024,191.76718649436992],"Museum_Front-B12":["/res/panelsoil/zenith/4x/Museum_Front-B12.png",1024,194.17344661655315],"Museum_Front-C12":["/res/panelsoil/zenith/4x/Museum_Front-C12.png",1024,188.94686998340896],"Museum_Front-D12":["/res/panelsoil/zenith/4x/Museum_Front-D12.png",1024,194.67922080099117],"Museum_Front-A13":["/res/panelsoil/zenith/4x/Museum_Front-A13.png",1024,199.60579011410823],"Museum_Front-B13":["/res/panelsoil/zenith/4x/Museum_Front-B13.png",1024,206.52263444789145],"Museum_Front-C13":["/res/panelsoil/zenith/4x/Museum_Front-C13.png",1024,200.2464528629405],"Museum_Front-D13":["/res/panelsoil/zenith/4x/Museum_Front-D13.png",1024,215.54455197627118],"Museum_Front-A14":["/res/panelsoil/zenith/4x/Museum_Front-A14.png",1024,211.038119493465],"Museum_Front-B14":["/res/panelsoil/zenith/4x/Museum_Front-B14.png",1024,216.2325666294373],"Museum_Front-D14":["/res/panelsoil/zenith/4x/Museum_Front-D14.png",1024,217.68903548499785],"Museum_Front-A15":["/res/panelsoil/zenith/4x/Museum_Front-A15.png",1024,223.35957731309554],"Museum_Front-B15":["/res/panelsoil/zenith/4x/Museum_Front-B15.png",1024,230.92400700227049],"Museum_Front-C15":["/res/panelsoil/zenith/4x/Museum_Front-C15.png",1024,227.73850392041982],"Museum_Front-D15":["/res/panelsoil/zenith/4x/Museum_Front-D15.png",1024,234.14797332440068],"Museum_Front-A16":["/res/panelsoil/zenith/4x/Museum_Front-A16.png",1024,243.61072293490804],"Museum_Front-B16":["/res/panelsoil/zenith/4x/Museum_Front-B16.png",1024,246.50140522356392],"Museum_Front-C16":["/res/panelsoil/zenith/4x/Museum_Front-C16.png",1024,240.5420468339251],"Museum_Front-D16":["/res/panelsoil/zenith/4x/Museum_Front-D16.png",1024,242.63146956808595],"Office_A1-A1":["/res/panelsoil/zenith/4x/Office_A1-A1.png",1024,249.86089700547046],"Office_A1-B1":["/res/panelsoil/zenith/4x/Office_A1-B1.png",1024,255.41331744595698],"Office_A1-C1":["/res/panelsoil/zenith/4x/Office_A1-C1.png",1024,258.7210504166603],"Office_A1-D1":["/res/panelsoil/zenith/4x/Office_A1-D1.png",1024,262.06920304731244],"Office_A1-A2":["/res/panelsoil/zenith/4x/Office_A1-A2.png",1024,269.4926686042102],"Office_A1-B2":["/res/panelsoil/zenith/4x/Office_A1-B2.png",1024,274.06073650938004],"Office_A1-C2":["/res/panelsoil/zenith/4x/Office_A1-C2.png",1024,270.91053116569725],"Office_A1-D2":["/res/panelsoil/zenith/4x/Office_A1-D2.png",1024,283.0404434382253],"Office_A1-A3":["/res/panelsoil/zenith/4x/Office_A1-A3.png",1024,282.83109415865385],"Office_A1-B3":["/res/panelsoil/zenith/4x/Office_A1-B3.png",1024,287.8931691429911],"Office_A1-C3":["/res/panelsoil/zenith/4x/Office_A1-C3.png",1024,284.55359036718744],"Office_A1-D3":["/res/panelsoil/zenith/4x/Office_A1-D3.png",1024,288.8021732748903],"Office_A1-A4":["/res/panelsoil/zenith/4x/Office_A1-A4.png",1024,299.4555350742581],"Office_A1-B4":["/res/panelsoil/zenith/4x/Office_A1-B4.png",1024,293.9073812533184],"Office_A1-C4":["/res/panelsoil/zenith/4x/Office_A1-C4.png",1024,297.01388597831095],"Office_A1-D4":["/res/panelsoil/zenith/4x/Office_A1-D4.png",1024,297.7808876841507],"Office_A1-A5":["/res/panelsoil/zenith/4x/Office_A1-A5.png",1024,308.92382973556596],"Office_A1-B5":["/res/panelsoil/zenith/4x/Office_A1-B5.png",1024,313.33172666756275],"Office_A1-C5":["/res/panelsoil/zenith/4x/Office_A1-C5.png",1024,310.8425600800973],"Office_A1-D5":["/res/panelsoil/zenith/4x/Office_A1-D5.png",1024,309.96018868817083],"Office_A1-A6":["/res/panelsoil/zenith/4x/Office_A1-A6.png",1024,323.186714230363],"Office_A1-B6":["/res/panelsoil/zenith/4x/Office_A1-B6.png",1024,327.65712894295586],"Office_A1-C6":["/res/panelsoil/zenith/4x/Office_A1-C6.png",1024,329.41601995279143],"Office_A1-D6":["/res/panelsoil/zenith/4x/Office_A1-D6.png",1024,323.4610257242614],"Office_A1-A7":["/res/panelsoil/zenith/4x/Office_A1-A7.png",1024,334.9133566093439],"Office_A1-B7":["/res/panelsoil/zenith/4x/Office_A1-B7.png",1024,335.05053556485916],"Office_A1-C7":["/res/panelsoil/zenith/4x/Office_A1-C7.png",1024,338.27744079112296],"Office_A1-D7":["/res/panelsoil/zenith/4x/Office_A1-D7.png",1024,343.75478118789243],"Office_B1-A1":["/res/panelsoil/zenith/4x/Office_B1-A1.png",1024,349.5366881398062],"Office_B1-B1":["/res/panelsoil/zenith/4x/Office_B1-B1.png",1024,352.6027864262215],"Office_B1-C1":["/res/panelsoil/zenith/4x/Office_B1-C1.png",1024,358.1237663760002],"Office_B1-D1":["/res/panelsoil/zenith/4x/Office_B1-D1.png",1024,369.1134661627141],"Office_B1-A2":["/res/panelsoil/zenith/4x/Office_B1-A2.png",1024,372.37484669513225],"Office_B1-B2":["/res/panelsoil/zenith/4x/Office_B1-B2.png",1024,376.0464163558496],"Office_B1-C2":["/res/panelsoil/zenith/4x/Office_B1-C2.png",1024,370.14732424926615],"Office_B1-D2":["/res/panelsoil/zenith/4x/Office_B1-D2.png",1024,382.70609137577554],"Office_B1-A3":["/res/panelsoil/zenith/4x/Office_B1-A3.png",1024,384.34893681842186],"Office_B1-B3":["/res/panelsoil/zenith/4x/Office_B1-B3.png",1024,387.0400714777274],"Office_B1-C3":["/res/panelsoil/zenith/4x/Office_B1-C3.png",1024,388.1089998547281],"Office_B1-D3":["/res/panelsoil/zenith/4x/Office_B1-D3.png",1024,389.3173653406967],"Office_B1-A4":["/res/panelsoil/zenith/4x/Office_B1-A4.png",1024,397.7012103742166],"Office_B1-B4":["/res/panelsoil/zenith/4x/Office_B1-B4.png",1024,393.77306402587897],"Office_B1-C4":["/res/panelsoil/zenith/4x/Office_B1-C4.png",1024,402.14466848568804],"Office_B1-D4":["/res/panelsoil/zenith/4x/Office_B1-D4.png",1024,400.5462619392742],"Office_B2-A1":["/res/panelsoil/zenith/4x/Office_B2-A1.png",1024,360.0894907558053],"Office_B2-B1":["/res/panelsoil/zenith/4x/Office_B2-B1.png",1024,360.9325741315679],"Office_B2-C1":["/res/panelsoil/zenith/4x/Office_B2-C1.png",1024,364.3534319591203],"Office_B2-D1":["/res/panelsoil/zenith/4x/Office_B2-D1.png",1024,363.4083633768711],"Office_B2-A2":["/res/panelsoil/zenith/4x/Office_B2-A2.png",1024,369.19185262674785],"Office_B2-B2":["/res/panelsoil/zenith/4x/Office_B2-B2.png",1024,372.09034340785513],"Office_B2-C2":["/res/panelsoil/zenith/4x/Office_B2-C2.png",1024,373.7651958137172],"Office_B2-D2":["/res/panelsoil/zenith/4x/Office_B2-D2.png",1024,371.97537902461715],"Office_B2-A3":["/res/panelsoil/zenith/4x/Office_B2-A3.png",1024,379.13497412127896],"Office_B2-B3":["/res/panelsoil/zenith/4x/Office_B2-B3.png",1024,387.96763686672097],"Office_B2-C3":["/res/panelsoil/zenith/4x/Office_B2-C3.png",1024,383.15888494852686],"Office_B2-D3":["/res/panelsoil/zenith/4x/Office_B2-D3.png",1024,390.91842537296844],"Office_B2-A4":["/res/panelsoil/zenith/4x/Office_B2-A4.png",1024,390.5956443110137],"Office_B2-B4":["/res/panelsoil/zenith/4x/Office_B2-B4.png",1024,400.72934834244086],"Office_B2-C4":["/res/panelsoil/zenith/4x/Office_B2-C4.png",1024,393.6474082655962],"Office_B2-D4":["/res/panelsoil/zenith/4x/Office_B2-D4.png",1024,404.820001817146],"Office_Front-A1":["/res/panelsoil/zenith/4x/Office_Front-A1.png",1024,252.90368489104316],"Office_Front-B1":["/res/panelsoil/zenith/4x/Office_Front-B1.png",1024,256.94067882702046],"Office_Front-C1":["/res/panelsoil/zenith/4x/Office_Front-C1.png",1024,256.7984312680423],"Office_Front-D1":["/res/panelsoil/zenith/4x/Office_Front-D1.png",1024,265.3636720015981],"Office_Front-A2":["/res/panelsoil/zenith/4x/Office_Front-A2.png",1024,261.0890747194432],"Office_Front-B2":["/res/panelsoil/zenith/4x/Office_Front-B2.png",1024,265.32237660400125],"Office_Front-C2":["/res/panelsoil/zenith/4x/Office_Front-C2.png",1024,265.8987721387467],"Office_Front-D2":["/res/panelsoil/zenith/4x/Office_Front-D2.png",1024,272.51413418709393],"Office_Front-A3":["/res/panelsoil/zenith/4x/Office_Front-A3.png",1024,272.67779051901954],"Office_Front-B3":["/res/panelsoil/zenith/4x/Office_Front-B3.png",1024,278.59639127712126],"Office_Front-C3":["/res/panelsoil/zenith/4x/Office_Front-C3.png",1024,275.6019425899489],"Office_Front-D3":["/res/panelsoil/zenith/4x/Office_Front-D3.png",1024,288.2517506052309],"Office_Front-A4":["/res/panelsoil/zenith/4x/Office_Front-A4.png",1024,293.38765626095204],"Office_Front-B4":["/res/panelsoil/zenith/4x/Office_Front-B4.png",1024,292.07594195773],"Office_Front-C4":["/res/panelsoil/zenith/4x/Office_Front-C4.png",1024,294.53904771388653],"Office_Front-D4":["/res/panelsoil/zenith/4x/Office_Front-D4.png",1024,297.83547910747853],"Office_Front-A5":["/res/panelsoil/zenith/4x/Office_Front-A5.png",1024,301.78917296669056],"Office_Front-B5":["/res/panelsoil/zenith/4x/Office_Front-B5.png",1024,302.9063869997582],"Office_Front-C5":["/res/panelsoil/zenith/4x/Office_Front-C5.png",1024,302.15407900532813],"Office_Front-D5":["/res/panelsoil/zenith/4x/Office_Front-D5.png",1024,306.40487086901857],"Office_Front-A6":["/res/panelsoil/zenith/4x/Office_Front-A6.png",1024,316.0025397813393],"Office_Front-B6":["/res/panelsoil/zenith/4x/Office_Front-B6.png",1024,317.8014489356886],"Office_Front-C6":["/res/panelsoil/zenith/4x/Office_Front-C6.png",1024,313.12418193486013],"Office_Front-D6":["/res/panelsoil/zenith/4x/Office_Front-D6.png",1024,321.59743286926397],"Office_Front-A7":["/res/panelsoil/zenith/4x/Office_Front-A7.png",1024,319.2927636061912],"Office_Front-B7":["/res/panelsoil/zenith/4x/Office_Front-B7.png",1024,325.468491348627],"Office_Front-C7":["/res/panelsoil/zenith/4x/Office_Front-C7.png",1024,333.573381492546],"Office_Front-D7":["/res/panelsoil/zenith/4x/Office_Front-D7.png",1024,339.84068339856503],"Office_Front-A8":["/res/panelsoil/zenith/4x/Office_Front-A8.png",1024,340.6258441536597],"Office_Front-B8":["/res/panelsoil/zenith/4x/Office_Front-B8.png",1024,339.43327558509895],"Office_Front-C8":["/res/panelsoil/zenith/4x/Office_Front-C8.png",1024,340.599505311138],"Office_Front-D8":["/res/panelsoil/zenith/4x/Office_Front-D8.png",1024,342.78983752380066],"Office_Front-A9":["/res/panelsoil/zenith/4x/Office_Front-A9.png",1024,348.51562745585017],"Office_Front-B9":["/res/panelsoil/zenith/4x/Office_Front-B9.png",1024,349.3953160843822],"Office_Front-C9":["/res/panelsoil/zenith/4x/Office_Front-C9.png",1024,353.9874047255011],"Office_Front-D9":["/res/panelsoil/zenith/4x/Office_Front-D9.png",1024,362.5120887651884],"Office_Front-A11":["/res/panelsoil/zenith/4x/Office_Front-A11.png",1024,375.2074615428206],"Office_Front-B11":["/res/panelsoil/zenith/4x/Office_Front-B11.png",1024,379.23496488209815],"Office_Front-C11":["/res/panelsoil/zenith/4x/Office_Front-C11.png",1024,381.0775718590584],"Office_Front-D11":["/res/panelsoil/zenith/4x/Office_Front-D11.png",1024,379.2843654603203],"Office_Front-A12":["/res/panelsoil/zenith/4x/Office_Front-A12.png",1024,390.1857835984767],"Office_Front-B12":["/res/panelsoil/zenith/4x/Office_Front-B12.png",1024,384.72461350957013],"Office_Front-C12":["/res/panelsoil/zenith/4x/Office_Front-C12.png",1024,387.63081833322445],"Office_Front-D12":["/res/panelsoil/zenith/4x/Office_Front-D12.png",1024,401.18419657096047],"Office_Front-A13":["/res/panelsoil/zenith/4x/Office_Front-A13.png",1024,395.51537334215345],"Office_Front-B13":["/res/panelsoil/zenith/4x/Office_Front-B13.png",1024,408.7555588177363],"Office_Front-C13":["/res/panelsoil/zenith/4x/Office_Front-C13.png",1024,412.1412429016463],"Office_Front-D13":["/res/panelsoil/zenith/4x/Office_Front-D13.png",1024,405.1094668179555],"Office_Front-A14":["/res/panelsoil/zenith/4x/Office_Front-A14.png",1024,410.4859821892107],"Office_Front-C14":["/res/panelsoil/zenith/4x/Office_Front-C14.png",1024,416.07286068194236],"Office_Front-D14":["/res/panelsoil/zenith/4x/Office_Front-D14.png",1024,421.3784343226554],"Office_Front-A15":["/res/panelsoil/zenith/4x/Office_Front-A15.png",1024,419.52777832678606],"Office_Front-B15":["/res/panelsoil/zenith/4x/Office_Front-B15.png",1024,431.23647089524724],"Office_Front-C15":["/res/panelsoil/zenith/4x/Office_Front-C15.png",1024,425.0750030499545],"Office_Front-D15":["/res/panelsoil/zenith/4x/Office_Front-D15.png",1024,437.23318579562454],"Office_Front-A16":["/res/panelsoil/zenith/4x/Office_Front-A16.png",1024,442.674774414513],"Office_Front-B16":["/res/panelsoil/zenith/4x/Office_Front-B16.png",1024,439.3813657920979],"Office_Front-C16":["/res/panelsoil/zenith/4x/Office_Front-C16.png",1024,449.0179201856829],"Office_Front-D16":["/res/panelsoil/zenith/4x/Office_Front-D16.png",1024,447.3636910750134],"Platform_Back-A1":["/res/panelsoil/zenith/4x/Platform_Back-A1.png",1024,1244.252511290509],"Platform_Back-B1":["/res/panelsoil/zenith/4x/Platform_Back-B1.png",1024,1251.404599756461],"Platform_Back-C1":["/res/panelsoil/zenith/4x/Platform_Back-C1.png",1024,1252.678979003827],"Platform_Back-D1":["/res/panelsoil/zenith/4x/Platform_Back-D1.png",1024,1257.4289771858444],"Platform_Back-A2":["/res/panelsoil/zenith/4x/Platform_Back-A2.png",1024,1257.442372237436],"Platform_Back-B2":["/res/panelsoil/zenith/4x/Platform_Back-B2.png",1024,1269.1017143864333],"Platform_Back-C2":["/res/panelsoil/zenith/4x/Platform_Back-C2.png",1024,1270.2384937620786],"Platform_Back-D2":["/res/panelsoil/zenith/4x/Platform_Back-D2.png",1024,1271.731016250969],"Platform_Back-A3":["/res/panelsoil/zenith/4x/Platform_Back-A3.png",1024,1276.050569809435],"Platform_Back-B3":["/res/panelsoil/zenith/4x/Platform_Back-B3.png",1024,1275.836321302127],"Platform_Back-C3":["/res/panelsoil/zenith/4x/Platform_Back-C3.png",1024,1282.4138124673796],"Platform_Back-D3":["/res/panelsoil/zenith/4x/Platform_Back-D3.png",1024,1279.077917089703],"Platform_Back-A4":["/res/panelsoil/zenith/4x/Platform_Back-A4.png",1024,1284.4758417821436],"Platform_Back-B4":["/res/panelsoil/zenith/4x/Platform_Back-B4.png",1024,1287.69766998941],"Platform_Back-C4":["/res/panelsoil/zenith/4x/Platform_Back-C4.png",1024,1296.7539351177415],"Platform_Back-D4":["/res/panelsoil/zenith/4x/Platform_Back-D4.png",1024,1290.774257449264],"Platform_Front-A1":["/res/panelsoil/zenith/4x/Platform_Front-A1.png",1024,1255.4966986510394],"Platform_Front-B1":["/res/panelsoil/zenith/4x/Platform_Front-B1.png",1024,1257.021389381042],"Platform_Front-C1":["/res/panelsoil/zenith/4x/Platform_Front-C1.png",1024,1251.2039142193573],"Platform_Front-D1":["/res/panelsoil/zenith/4x/Platform_Front-D1.png",1024,1260.662126990601],"Platform_Front-A2":["/res/panelsoil/zenith/4x/Platform_Front-A2.png",1024,1266.3039539888891],"Platform_Front-B2":["/res/panelsoil/zenith/4x/Platform_Front-B2.png",1024,1267.9341345614664],"Platform_Front-C2":["/res/panelsoil/zenith/4x/Platform_Front-C2.png",1024,1268.8448144318506],"Platform_Front-D2":["/res/panelsoil/zenith/4x/Platform_Front-D2.png",1024,1274.0304939601504],"Platform_Front-A3":["/res/panelsoil/zenith/4x/Platform_Front-A3.png",1024,1273.423739443437],"Platform_Front-B3":["/res/panelsoil/zenith/4x/Platform_Front-B3.png",1024,1282.8915001012642],"Platform_Front-C3":["/res/panelsoil/zenith/4x/Platform_Front-C3.png",1024,1284.017764069875],"Platform_Front-D3":["/res/panelsoil/zenith/4x/Platform_Front-D3.png",1024,1290.5261064226709],"Platform_Front-A4":["/res/panelsoil/zenith/4x/Platform_Front-A4.png",1024,1288.503171234997],"Platform_Front-B4":["/res/panelsoil/zenith/4x/Platform_Front-B4.png",1024,1288.6966022776407],"Platform_Front-C4":["/res/panelsoil/zenith/4x/Platform_Front-C4.png",1024,1290.403842876236],"Platform_Front-D4":["/res/panelsoil/zenith/4x/Platform_Front-D4.png",1024,1294.7102698516458]}},$a=81.92,Ga={width:4096,margins:{top:2816,btm:512},layers:{Hall_1A:{x:0,y:0,at:0,s:50,h:4096,masks:{top:{y:4096,at:0,s:$a},btm:{y:0,at:0,s:$a}},panels:Wa.Hall_1A},Hall_Front:{x:0,y:0,at:0,s:$a,h:4096,panels:Wa.Hall_Front},Hotel_Back1:{x:0,y:0,at:50,s:20,h:3816,masks:{top:{y:8192,at:50,s:$a},btm:{y:0,at:50,s:$a}},panels:Wa.Hotel_Back1},Hotel_Back2:{x:0,y:630,at:50,s:30,h:3816,masks:{top:{y:8192,at:50,s:$a},btm:{y:0,at:50,s:$a}},panels:Wa.Hotel_Back2},Hotel_A1:{x:0,y:-70,at:50,s:50,h:4733,masks:{top:{y:5575,at:50,s:$a},btm:{y:0,at:50,s:$a}},panels:Wa.Hotel_A1},Hotel_B1:{x:0,y:0,at:119.287,s:50,h:3377,masks:{top:{y:2e3,at:119.287,s:$a},btm:{y:0,at:119.287,s:$a}},panels:Wa.Hotel_B1},Hotel_Front:{x:0,y:0,at:50,s:$a,h:8192,panels:Wa.Hotel_Front},Casino_A1:{x:673,y:-50,at:150,s:50,h:6699,masks:{top:{y:8688,at:150,s:$a},btm:{y:0,at:150,s:$a}},panels:Wa.Casino_A1},Casino_A1b:{x:0,y:-450,at:150,s:65,h:5809,masks:{top:{y:8688,at:150,s:$a},btm:{y:0,at:150,s:$a}},panels:Wa.Casino_A1b},Casino_A1b2:{x:0,y:4650,at:150,s:65,h:5809,masks:{top:{y:8688,at:150,s:$a},btm:{y:0,at:150,s:$a}},panels:Wa.Casino_A1b},Casino_B1:{x:0,y:-650,at:267.651,s:35,h:3434,masks:{top:{y:2450,at:267.651,s:$a},btm:{y:0,at:267.651,s:$a}},panels:Wa.Casino_B1},Casino_B2:{x:0,y:0,at:267.651,s:50,h:2796,masks:{top:{y:2450,at:267.651,s:$a},btm:{y:0,at:267.651,s:$a}},panels:Wa.Casino_B2},Casino_Front:{x:0,y:0,at:150,s:$a,h:12288,panels:Wa.Casino_Front},Arena_A1:{x:0,y:0,at:300,s:50,h:4212,masks:{top:{y:4560,at:300,s:$a},btm:{y:0,at:300,s:$a}},panels:Wa.Arena_A1},Arena_B1:{x:0,y:-900,at:355.298,s:19,h:4885,masks:{top:{y:7070,at:355.298,s:$a},btm:{y:0,at:355.298,s:$a}},panels:Wa.Arena_B1},Arena_B2:{x:0,y:-900,at:355.298,s:20,h:5324,masks:{top:{y:6e3,at:355.298,s:$a},btm:{y:0,at:355.298,s:$a}},panels:Wa.Arena_B2},Arena_B3:{x:0,y:100,at:367.505,s:55,h:4167,masks:{top:{y:5e3,at:367.505,s:$a},btm:{y:0,at:367.505,s:$a}},panels:Wa.Arena_B3},Arena_C1:{x:0,y:200,at:429.395,s:50,h:1545,masks:{top:{y:1e3,at:429.395,s:$a},btm:{y:0,at:429.395,s:$a}},panels:Wa.Arena_C1},Arena_Front:{x:0,y:0,at:300,s:$a,h:12288,panels:Wa.Arena_Front},Museum_A1:{x:0,y:100,at:450,s:50,h:4890,masks:{top:{y:5900,at:450,s:$a},btm:{y:0,at:450,s:$a}},panels:Wa.Museum_A1},Museum_B1:{x:0,y:-880,at:520.825,s:70,h:4167,masks:{top:{y:2210,at:520.825,s:$a},btm:{y:0,at:520.825,s:$a}},panels:Wa.Museum_B1},Museum_A1R:{x:0,y:-1500,at:547.803,s:50,h:4890,masks:{top:{y:3540,at:547.803,s:$a},btm:{y:0,at:547.803,s:$a}},panels:Wa.Museum_A1},Museum_C1:{x:0,y:-780,at:591.138,s:20,h:5654,masks:{top:{y:3150,at:591.138,s:$a},btm:{y:0,at:591.138,s:$a}},panels:Wa.Museum_C1},Museum_C2:{x:0,y:-1150,at:591.138,s:50,h:5996,masks:{top:{y:3150,at:591.138,s:$a},btm:{y:0,at:591.138,s:$a}},panels:Wa.Museum_C2},Museum_Front:{x:0,y:0,at:450,s:$a,h:16384,panels:Wa.Museum_Front},Office_A1:{x:0,y:-880,at:656.592,s:50,h:6680,masks:{top:{y:8100,at:656.592,s:$a},btm:{y:0,at:650,s:$a}},panels:Wa.Office_A1},Office_B1:{x:0,y:-340,at:755.322,s:20,h:3483,masks:{top:{y:2500,at:755.322,s:$a},btm:{y:0,at:755.322,s:$a}},panels:Wa.Office_B1},Office_B2:{x:0,y:-350,at:755.322,s:50,h:3209,masks:{top:{y:2500,at:755.322,s:$a},btm:{y:0,at:755.322,s:$a}},panels:Wa.Office_B2},Office_A1R:{x:0,y:-1500,at:783.689,s:50,h:6680,masks:{top:{y:5540,at:783.689,s:$a},btm:{y:0,at:783.689,s:$a}},panels:Wa.Office_A1},Office_Front:{x:0,y:0,at:650,s:$a,h:16384,panels:Wa.Office_Front},Lab_A1:{x:0,y:-1550,at:878.613,s:32,h:6279,masks:{top:{y:8400,at:878.613,s:$a},btm:{y:0,at:878.613,s:$a}},panels:Wa.Lab_A1},Lab_A2:{x:0,y:330,at:878.613,s:50,h:7902,masks:{top:{y:8400,at:878.613,s:$a},btm:{y:0,at:878.613,s:$a}},panels:Wa.Lab_A2},Lab_B1:{x:0,y:0,at:984.814,s:50,h:5233,masks:{top:{y:4e3,at:984.814,s:$a},btm:{y:0,at:984.814,s:$a}},panels:Wa.Lab_B1},Lab_C1:{x:0,y:-400,at:1036.084,s:50,h:5356,masks:{top:{y:5050,at:1036.084,s:$a},btm:{y:0,at:1036.084,s:$a}},panels:Wa.Lab_C1},Lab_Front:{x:0,y:0,at:850,s:$a,h:20480,panels:Wa.Lab_Front},Core_A1:{x:0,y:0,at:1117.627,s:50,h:7536,masks:{top:{y:7250,at:1117.627,s:$a},btm:{y:0,at:1117.627,s:$a}},panels:Wa.Core_A1},Core_B1:{x:0,y:-840,at:1207.349,s:20,h:5163,masks:{top:{y:6700,at:1207.349,s:$a},btm:{y:0,at:1207.349,s:$a}},panels:Wa.Core_B1},Core_B2:{x:0,y:-470,at:1240.063,s:50,h:3277,masks:{top:{y:2100,at:1240.063,s:$a},btm:{y:300,at:1240.063,s:$a}},panels:Wa.Core_B2},Core_A1R:{x:0,y:-430,at:1287.305,s:50,h:7536,masks:{top:{y:3400,at:1287.305,s:$a},btm:{y:0,at:1287.305,s:$a}},panels:Wa.Core_A1},Core_C1:{x:0,y:0,at:1330.273,s:40,h:1897,masks:{top:{y:1500,at:1330.273,s:$a},btm:{y:0,at:1330.273,s:$a}},panels:Wa.Core_C1},Core_Front:{x:0,y:0,at:1100,s:$a,h:20480,panels:Wa.Core_Front},Corruption_A1:{x:0,y:-50,at:1357.129,s:50,h:5774,masks:{top:{y:4650,at:1357.129,s:$a},btm:{y:0,at:1357.129,s:$a}},panels:Wa.Corruption_A1},Corruption_B1:{x:0,y:-1750,at:1424.268,s:20,h:4679,masks:{top:{y:2750,at:1424.268,s:$a},btm:{y:-350,at:1424.268,s:$a}},panels:Wa.Corruption_B1},Corruption_B2:{x:0,y:-1500,at:1424.268,s:50,h:4353,masks:{top:{y:2750,at:1424.268,s:$a},btm:{y:-350,at:1424.268,s:$a}},panels:Wa.Corruption_B2},Corruption_C1:{x:0,y:-1050,at:1470.654,s:40,h:5253,masks:{top:{y:5100,at:1470.654,s:$a},btm:{y:0,at:1470.654,s:$a}},panels:Wa.Corruption_C1},Corruption_C2:{x:0,y:-270,at:1470.654,s:50,h:4680,masks:{top:{y:5100,at:1470.654,s:$a},btm:{y:0,at:1470.654,s:$a}},panels:Wa.Corruption_C2},Corruption_B1R:{x:0,y:-2100,at:1543.559,s:20,h:4679,masks:{top:{y:3300,at:1543.559,s:$a},btm:{y:0,at:1543.559,s:$a}},panels:Wa.Corruption_B1},Corruption_B2R:{x:0,y:-1700,at:1543.559,s:50,h:4353,masks:{top:{y:3300,at:1543.559,s:$a},btm:{y:0,at:1543.559,s:$a}},panels:Wa.Corruption_B2},Corruption_D1:{x:0,y:-530,at:1584.082,s:20,h:5650,masks:{top:{y:5400,at:1584.082,s:$a},btm:{y:0,at:1584.082,s:$a}},panels:Wa.Corruption_D1},Corruption_D2:{x:0,y:-550,at:1584.082,s:50,h:5527,masks:{top:{y:5400,at:1584.082,s:$a},btm:{y:0,at:1584.082,s:$a}},panels:Wa.Corruption_D2},Corruption_Front:{x:0,y:0,at:1350,s:$a,h:24576,panels:Wa.Corruption_Front},Platform_Back:{x:0,y:0,at:1650,s:50,h:4096,masks:{btm:{y:0,at:1650,s:$a}},panels:Wa.Platform_Back},Platform_Front:{x:0,y:0,at:1650,s:$a,h:4096,panels:Wa.Platform_Front}}};class Ua{activeGames=new Map;inactiveGames=new Map;primary=null;multiplex=null;constructor({active:e,inactive:t,primary:n},s){for(const t of e)this.activeGames.set(t,{});for(const e of t)this.inactiveGames.set(e,{});this.primary=n,this.multiplex=s}AddGame(e,t){}RemoveGame(e){}SetPrimary(e){this.primary=e}Refresh(e){}Animate(e){}Deconstruct(){return this.Stop(),{active:[...this.activeGames.keys()],inactive:[...this.inactiveGames.keys()],primary:this.primary}}GameShouldBeActive(e){return!0}GameExtraOptions(e){return null}Stop(){}get size(){return this.activeGames.size+this.inactiveGames.size}get assistGames(){return[]}}Ua.BasicFFA=class extends Ua{constructor({},e){super(...arguments);for(const[e]of this.inactiveGames)e.rehead(!0),this.inactiveGames.delete(e),this.activeGames.set(e,{});this.Refresh(!1),xt("grid_spectate").textContent="grid"}AddGame(e,t){t||e.rehead(!0),this.activeGames.set(e,{})}RemoveGame(e){this.activeGames.delete(e)}Refresh(e){if(0===this.activeGames.size)return xt("data_spectate").innerHTML="waiting for players to join",!1;if(1===this.activeGames.size)return!1;if(2===this.activeGames.size&&ot.video.sidebyside){let[[t],[n]]=this.activeGames;n===this.primary&&([n,t]=[t,n]),t.location(-.4,0,1,e),t.changeDisplayMode("full"),n.location(.4,0,1,e),n.changeDisplayMode("full"),xt("data_spectate").innerHTML=`spectating <span>${t.getOwner().toUpperCase()}</span> VS <span>${n.getOwner().toUpperCase()}</span>`}else this.primary?(this._Many(e),xt("data_spectate").innerHTML=`spectating <span>${this.primary.getOwner().toUpperCase()}</span>`):(this._Grid(e),xt("data_spectate").innerHTML=`spectating <span>${this.activeGames.size}</span> PLAYERS`);return!0}_Many(e){const t=this.activeGames.size-1,n=this._FitBesidesPlayer(t);for(const[s]of this.activeGames){if(s===this.primary){s.location(0,0,1,e),s.changeDisplayMode("full");continue}const{x:i,y:o,s:a}=n.shift();s.location(i,o,a,e);let r="small";(t>=9||ot.video.alwaystiny||"minimal"===ot.video.graphics)&&(r="tiny"),s.changeDisplayMode(r)}}_Grid(e){const t=this._FitFullScreen(this.activeGames.size);for(const[n]of this.activeGames){const{x:s,y:i,s:o}=t.shift();n.location(s,i,o,e);let a="small";(this.activeGames.size>=9||ot.video.alwaystiny||"minimal"===ot.video.graphics)&&(a="tiny"),n.changeDisplayMode(a)}}_FitBesidesPlayer(e){const t=e>=30,n=e>=9||ot.video.alwaystiny||"minimal"===ot.video.graphics?ja.HOLDERWIDTHTINY:ja.HOLDERWIDTH;e=Math.max(2,e);let s=0,i=1,o=0,a=0,r=!1;do{s++,i=.75/s,o=t?2*Math.ceil(e/s/2):Math.ceil(e/s),a=i*n*o,a<=(t?1.2:.6)&&(r=!0)}while(!r);const l=[];for(let a=0;a<e;a++){const e=Math.floor(a/s),r=a%s;l.push(t?{x:(.5+i*n/2+e%(o/2)*n*i)*(e<o/2?1:-1),y:r*ja.HOLDERHEIGHT*i*1.6-.8,s:i}:{x:.4+i*n/2+e*n*i,y:r*ja.HOLDERHEIGHT*i-.5,s:i})}return l}_FitFullScreen(e){const t=e>=9||ot.video.alwaystiny||"minimal"===ot.video.graphics?ja.HOLDERWIDTHTINY:ja.HOLDERWIDTH;e=Math.max(2,e);let n=1,s=1,i=1,o=0,a=0,r=!1;do{n++,i=2/((e<=8?1:t)*n),s=Math.ceil(e/n),a=i*t*n,o=i*ja.HOLDERHEIGHT*s,o<=1.6&&(r=!0)}while(!r);const l=Math.floor(1.8/(t*i));n=Math.round((l+n)/2),i=2/((e<=8?1:t)*n),r=!1;do{i-=.005,s=Math.ceil(e/n),a=i*t*n,o=i*ja.HOLDERHEIGHT*s,o<=1.6&&a<=1.8&&(r=!0)}while(!r);const c=[];for(let r=0;r<e;r++){const l=r%n,p=Math.floor(r/n);let h=(1.8-a)/2;Math.floor(r/n)===Math.floor(e/n)&&(h=(1.8-i*t*(e%n))/2),c.push({x:-.9+h+i*t/2+l*t*i,y:1===s?0:(1.6-o)/2-.8+(p+.5)*ja.HOLDERHEIGHT*i,s:i})}return c}},Ua.SuperLobby=class extends Ua{_currentSpeed=1;_leftBound=-1;_rightBound=1;_widthRate=1;_tickerActive=!1;_listener=this._Tick.bind(this);constructor({},e){super(...arguments),this.size&&this._Start(),xt("grid_spectate").textContent="grid"}AddGame(e,t){t?this.activeGames.set(e,{x:0,y:0,r:0}):this.inactiveGames.set(e,{})}RemoveGame(e){const t=this.activeGames.has(e)&&this.primary!==e,n=this.activeGames.get(e);this.activeGames.delete(e),this.inactiveGames.delete(e),this.size<=60?this.multiplex.SetPresentation(Ua.BasicFFA):t&&this._ReplaceGame(n)}SetPrimary(e){const t=this.primary,n=t&&!this.activeGames.has(t);if(super.SetPrimary(e),t===e)return;let s=!1;if(e&&(s=this.activeGames.has(e),s?(e.location(0,0,1,!1),e.changeDisplayMode("full")):(e.rehead(),e.changeDisplayMode("full"),e.location(0,0,.5,!0),e.location(0,0,1,!1),this.activeGames.set(e,{}),this.inactiveGames.delete(e))),s){const s=this.activeGames.get(e);t&&!n?(this.activeGames.set(t,s),s.t=performance.now()+300,t.location(s.x,s.y,.2,!1),t.changeDisplayMode("tiny")):this._ReplaceGame(s)}else t&&!n&&(t.fadeOutAndBehead(300),this.activeGames.delete(t),this.inactiveGames.set(t,{}))}_ReplaceGame(e){const t=this.inactiveGames.keys().next().value;t&&(t.rehead(!0),t.location(e.x,e.y,.2,!0),t.changeDisplayMode("tiny"),this.activeGames.set(t,e),this.inactiveGames.delete(t))}Animate(e){if("start"===e)this._Start(),Lc("superlobby",this.size)}GameShouldBeActive(e){return this.activeGames.size<=61}GameExtraOptions(e){return{zoominto:"fade",prestart:850}}Refresh(e){return xt("data_spectate").innerHTML=this.primary?`spectating <span>${this.primary.getOwner().toUpperCase()}</span>`:`spectating <span>${this.size}</span> PLAYERS`,!0}_Start(){this._currentSpeed=40;const e=this.primary?61:60;if(this.activeGames.size<e)for(const[t,n]of this.inactiveGames){if(this.activeGames.size>=e)break;t.rehead(),t.changeDisplayMode("tiny"),this.inactiveGames.delete(t),this.activeGames.set(t,n)}if(this.activeGames.size>e)for(const[t,n]of this.activeGames){if(this.activeGames.size<=e)break;t.behead(),this.activeGames.delete(t),this.inactiveGames.set(t,n)}const t=(window.innerWidth-ws(1600))/ws(1600);this._widthRate=1+2*t,this._leftBound=-1-2*t,this._rightBound=1+2*t;let n=0;for(const[e,t]of this.activeGames){if(this.primary===e){e.location(0,0,1,!0),e.changeDisplayMode("full");continue}const s=Math.floor(n/12)-2,i=n%12,o=(s+2)/4,a=s*(1/2.75)+Math.sin(Math.abs(.5*Math.PI*1))*(s/20);let r=0;r=s%2==0?this._rightBound+(i+o)*(1/6)*this._widthRate:this._leftBound-(i+o)*(1/6)*this._widthRate,e.location(r,a,.2,!0),t.x=r,t.y=a,t.r=s,n++}this._tickerActive||(this._tickerActive=!0,o.Ticker.shared.add(this._listener))}_Tick(e){const t=performance.now();"minimal"===ot.video.graphics||ot.video.nosuperlobbyanim?this._currentSpeed>0&&(this._currentSpeed<=1e-4&&(this._currentSpeed=0),this._currentSpeed=this._currentSpeed*Math.pow(this._currentSpeed>=30?.995:.985,e)):this._currentSpeed>1&&(this._currentSpeed<=1.0001&&(this._currentSpeed=1),this._currentSpeed=1+(this._currentSpeed-1)*Math.pow(this._currentSpeed>=30?.998:.993,e));for(const[n,s]of this.activeGames)if(this.primary!==n)if(s.r%2==0?s.x-=this._currentSpeed*e*75e-5:s.x+=this._currentSpeed*e*75e-5,s.r%2==0&&s.x<=this._leftBound||s.r%2!=0&&s.x>=this._rightBound){n.behead(),this.activeGames.delete(n),this.inactiveGames.set(n,s);const e=this.inactiveGames.keys().next().value;if(!e)continue;e.rehead();const t={};t.x=s.r%2==0?s.x+2*this._widthRate:s.x-2*this._widthRate,t.y=s.r*(1/2.75)+Math.sin(Math.abs(.5*Math.PI*Math.pow(t.x/this._widthRate,2)))*(s.r/20),t.r=s.r,e.location(t.x,t.y,.2,!0),e.changeDisplayMode("tiny"),this.activeGames.set(e,t),this.inactiveGames.delete(e)}else s.y=s.r*(1/2.75)+Math.sin(Math.abs(.5*Math.PI*Math.pow(s.x/this._widthRate,2)))*(s.r/20),n.location(s.x,s.y,.2,t>=(s.t??0))}Stop(){this._tickerActive&&(this._tickerActive=!1,o.Ticker.shared.remove(this._listener))}},Ua.Zenith=class extends Ua{_range=30;_tickerActive=!1;_listener=this._Tick.bind(this);_ourPos=10;_ourPosCurrent=10;_ourPosPrev=10;_scrollAway=0;_maxSmall=ot.video.alwaystiny?0:{minimal:0,low:0,medium:8,high:12,ultra:20}[ot.video.graphics];_maxTiny={minimal:0,low:30,medium:60,high:60,ultra:90}[ot.video.graphics];_maxStar={minimal:0,low:100,medium:300,high:300,ultra:300}[ot.video.graphics];_rangeMinPlayers={minimal:0,low:30,medium:60,high:60,ultra:60}[ot.video.graphics];_rangeMaxPlayers={minimal:0,low:100,medium:300,high:400,ultra:600}[ot.video.graphics];_tickCurrent=0;_tickModulo=100;_safeZone=1;_sideCarGame=null;_sideCarGameLock=!1;_following=null;_panelSoil={container:null,stars:null,stars_mask:null,moon:null,bgcolor:null,bgfade:null,root:null,fadeTop:null,fadeBottom:null,deadTop:null,deadBottom:null,loader:null,flash:null,darkover:null,w:-1,h:-1,skipping:!1,skipFullSince:1/0,reachedGodhoodAt:null};_ruler=null;_rulerMarkerPb=null;_menusBG=null;_mappedScoreboard=new Map;constructor({},e){super(...arguments),this.size&&this._Start(),xt("grid_spectate").textContent="free",Vs.setAlternate("multiplayer-game"),Vs.mountGroup("ingame")}AddGame(e,t){const n={x:2*Math.random()-1,y:0,ty:0,z:0,spr:null,t:0,im:100*Math.random(),d:0};if(e.getDuoOptions().enabled){const t=e.getDuoOptions().ally.username;for(const[e,s]of this.activeGames)e.getOwner()===t&&(s.d=-1,n.d=1,n.r=s,n.x=s.x);for(const[e,s]of this.inactiveGames)e.getOwner()===t&&(s.d=-1,n.d=1,n.r=s,n.x=s.x)}if(e.getOwner().includes(" "))n.im-=500;else{const t=Zr(e.getOwner())??(e.getDuoOptions().ally.username?Qr(e.getDuoOptions().ally.username):null);t&&"friend"===t.type&&(n.im+=100)}t?this.activeGames.set(e,n):this.inactiveGames.set(e,n),e.getOwner()===this._following&&(this.multiplex.SetSpectate(e.id),this.Refresh())}RemoveGame(e){e===this.primary&&this._sideCarGame&&(this._sideCarGameLock=!0),e===this._sideCarGame&&(this._sideCarGame=null,this._sideCarGameLock=!1);const t=this.inactiveGames.get(e)?.spr;t&&dc.animate(t,{0:{y:"inherit",rotation:0},1:{y:ws(800)+window.innerHeight,rotation:.3*Math.sign(Math.random()-.5)}},1,a(.37,.06,.75,.56),(()=>{t.destroy()})),this.activeGames.delete(e),this.inactiveGames.delete(e)}SetPrimary(e){super.SetPrimary(e),this._sideCarGameLock||(this._sideCarGame=null);const t=this.activeGames.get(e)??this.inactiveGames.get(e);t&&(t.im+=100,t.r&&(t.r.im+=100))}Animate(e){if("start"===e)this._Start()}GameShouldBeActive(e){return!1}GameExtraOptions(e){return{zoominto:"fade",prestart:850}}get assistGames(){return this._sideCarGame?[this._sideCarGame]:[]}Refresh(e){return this.primary?(this.primary.getDuoOptions().enabled?xt("data_spectate").innerHTML=`spectating <span>${this.primary.getOwner().toUpperCase()} & ${this.primary.getDuoOptions().ally.username.toUpperCase()}</span>`:xt("data_spectate").innerHTML=`spectating <span>${this.primary.getOwner().toUpperCase()}</span>`,xt("zenithmenu").classList.contains("rolledup")||(xt("zenithmenu").classList.add("rolledup"),gi.disengage(),vt("#zenithmenu .menuslide_rollup").forEach((e=>e.textContent="PLAY")),xt("zenithmenu").scrollTop=0,Wi(!1)),xt("zenithmenu").classList.toggle("hidden",document.body.classList.contains("ingame_phys"))):(xt("data_spectate").innerHTML=`spectating <span>${this.size}</span> PLAYERS`,xt("zenithmenu").classList.remove("hidden")),this.primary&&this.primary===this.multiplex.games.self&&(this._following=null),!this.multiplex.Find(this._following)||this.primary&&this.primary.getOwner()===this._following||(this._following=null),xt("follow_spectate").classList.toggle("active",!!this._following),this._following?(xt("follow_spectate").classList.remove("unavailable"),this.primary&&this.primary.getOwner()===this._following?xt("following_spectate").innerHTML=`following <b>${this._following.toUpperCase()}</b>`:xt("following_spectate").innerHTML=`waiting for <b>${this._following.toUpperCase()}</b>`):xt("follow_spectate").classList.toggle("unavailable",!this.primary||this.primary===this.multiplex.games.self),!!this.primary||xt("zenithmenu").classList.contains("rolledup")}SetFollowing(e){this._following=e,this.Refresh()}CancelFollowing(e){this._following===e&&(this._following=e,this.Refresh())}FallbackPos(e,t){const n=this.inactiveGames.get(e)||this.activeGames.get(e);return n?{pos:{x:window.innerWidth+ws(n.x*(1+.2*(1-n.z))*800),y:window.innerHeight+ws(400*t)},scale:Math.max(0,Math.min(1,.05+.2*n.z)),isFallback:!0,isPresentationFallback:!0}:null}Scroll(e){if(this.primary){if(this._scrollAway-=.005*e,!(Math.abs(this._scrollAway)>1))return!0;this.multiplex.SetSpectate(null),this._scrollAway=0}return this._ourPos=Math.max(0,this._ourPos-.018*e),!0}_Start(){const e=(window.innerHeight-ws(800))/ws(800);if(this._safeZone=1+2*e,("minimal"===ot.video.graphics||ot.video.nozenithanim)&&Ml.setBackground("/res/bg/zenith/1fa.jpg"),this._tickerActive||(this._tickerActive=!0,o.Ticker.shared.add(this._listener)),"minimal"!==ot.video.graphics&&!0!==ot.video.nozenithanim){this._panelSoil.container=new o.Container,Pl.addChild(this._panelSoil.container),this._panelSoil.stars=o.TilingSprite.from("/res/panelsoil/stars.png",{width:window.innerWidth,height:window.innerHeight}),this._panelSoil.container.addChild(this._panelSoil.stars),this._panelSoil.stars_mask=o.TilingSprite.from("/res/panelsoil/stars_mask.png",{width:window.innerWidth,height:window.innerHeight}),this._panelSoil.stars_mask.tileScale.set(1.1421),this._panelSoil.container.addChild(this._panelSoil.stars_mask),this._panelSoil.moon=o.Sprite.from("/res/panelsoil/moon.png"),this._panelSoil.moon.anchor.set(.5,.5),this._panelSoil.moon.scale.set(ws(.3)),this._panelSoil.container.addChild(this._panelSoil.moon),this._panelSoil.bgcolor=new o.Sprite(o.Texture.WHITE),this._panelSoil.bgcolor.tint=0,this._panelSoil.bgcolor.blendMode=o.BLEND_MODES.ADD,this._panelSoil.container.addChild(this._panelSoil.bgcolor),this._panelSoil.bgfade=o.Sprite.from("/res/panelsoil/gradient.png"),this._panelSoil.bgfade.tint=0,this._panelSoil.bgfade.blendMode=o.BLEND_MODES.ADD,this._panelSoil.container.addChild(this._panelSoil.bgfade);let e="1x";e=window.innerWidth>2048?{minimal:"hx",low:"1x",medium:"2x",high:"4x",ultra:"4x"}[ot.video.graphics??"low"]:window.innerWidth>1400?{minimal:"hx",low:"hx",medium:"1x",high:"2x",ultra:"2x"}[ot.video.graphics??"low"]:{minimal:"hx",low:"hx",medium:"1x",high:"1x",ultra:"2x"}[ot.video.graphics??"low"],this._panelSoil.root=new f.Soil(Ga,Na[e],0,e),this._panelSoil.container.addChild(this._panelSoil.root),this._panelSoil.fadeTop=o.Sprite.from("/res/panelsoil/edge.png"),this._panelSoil.fadeTop.tint=0,this._panelSoil.container.addChild(this._panelSoil.fadeTop),this._panelSoil.fadeBottom=o.Sprite.from("/res/panelsoil/edge.png"),this._panelSoil.fadeBottom.tint=0,this._panelSoil.container.addChild(this._panelSoil.fadeBottom),this._panelSoil.deadTop=new o.Sprite(o.Texture.WHITE),this._panelSoil.deadTop.tint=0,this._panelSoil.container.addChild(this._panelSoil.deadTop),this._panelSoil.deadBottom=new o.Sprite(o.Texture.WHITE),this._panelSoil.deadBottom.tint=0,this._panelSoil.container.addChild(this._panelSoil.deadBottom),this._panelSoil.loader=new o.Sprite(o.Texture.WHITE),this._panelSoil.loader.tint=0,this._panelSoil.container.addChild(this._panelSoil.loader),this._panelSoil.flash=new o.Sprite(o.Texture.WHITE),this._panelSoil.flash.tint=11184810,this._panelSoil.container.addChild(this._panelSoil.flash),this._panelSoil.darkover=new o.Sprite(o.Texture.WHITE),this._panelSoil.darkover.tint=0,this._panelSoil.darkover.alpha=Math.min(.8,Math.max(0,1-3.5*(ot.video.background??.3))),this._panelSoil.container.addChild(this._panelSoil.darkover),Ol.visible=!1,this._ruler=o.TilingSprite.from("/res/ruler.png",{width:ws(60),height:window.innerHeight}),this._ruler.tileScale.set(ws(1)),this._ruler.zIndex=10,this._ruler.position.set(ws(800)-ws(30),-Cs),this._ruler.alpha=.4,jl.addChild(this._ruler),this._rulerMarkerPb=o.Sprite.from("/res/rulerpb.png"),this._rulerMarkerPb.anchor.set(.5,.5),this._rulerMarkerPb.zIndex=11,this._rulerMarkerPb.position.set(ws(800),-1e3),jl.addChild(this._rulerMarkerPb)}this._menusBG=new o.Sprite(o.Texture.WHITE),this._menusBG.tint=0,this._menusBG.alpha=0,this._menusBG.zIndex=10,Ul.addChild(this._menusBG),this._Refit(),Wi(!0),xt("zenithmenu").classList.remove("rolledup","thidden","hidden"),xt("zenithmenu").classList.add("startanim"),setTimeout((()=>{xt("zenithmenu").classList.remove("startanim")}),1e3),vt("#zenithmenu .menuslide_rollup").forEach((e=>e.textContent="SPECTATE")),xt("zenithmenu").classList.remove("inresults"),xt("start_zenith_label").textContent="START",gi.bindGuide(fi.zenith||{}),xt("zenithmenu").scrollTop=0,xa.BgmPlaySmoothlyWithRandom("zenith")}_Refit(){if(this._panelSoil.root){const e=.5625*window.innerWidth,t=(window.innerHeight-e)/2,n=t>window.innerHeight/30;this._panelSoil.root.position.set(0,window.innerHeight-t),this._panelSoil.root.scale.set(window.innerWidth/4096),this._panelSoil.fadeTop.visible=n,this._panelSoil.fadeBottom.visible=n,this._panelSoil.deadTop.visible=n,this._panelSoil.deadBottom.visible=n,this._panelSoil.fadeTop.position.set(0,t-.025*window.innerWidth),this._panelSoil.fadeTop.scale.set(window.innerWidth/64,.125*window.innerWidth/64),this._panelSoil.fadeBottom.position.set(0,window.innerHeight-t+.025*window.innerWidth),this._panelSoil.fadeBottom.scale.set(window.innerWidth/64,-.125*window.innerWidth/64),this._panelSoil.deadTop.position.set(0,0),this._panelSoil.deadTop.scale.set(window.innerWidth/16,(t-.025*window.innerWidth)/16),this._panelSoil.deadBottom.position.set(0,window.innerHeight-t+.025*window.innerWidth),this._panelSoil.deadBottom.scale.set(window.innerWidth/16,(t-.025*window.innerWidth)/16),this._panelSoil.loader.scale.set(window.innerWidth/16,window.innerHeight/16),this._panelSoil.w=window.innerWidth,this._panelSoil.h=window.innerHeight,this._panelSoil.stars.width=window.innerWidth,this._panelSoil.stars.height=window.innerHeight,this._panelSoil.stars_mask.width=window.innerWidth,this._panelSoil.stars_mask.height=window.innerHeight,this._panelSoil.moon.position.x=window.innerWidth/2,this._panelSoil.bgcolor.scale.set(window.innerWidth/16,window.innerHeight/16),this._panelSoil.bgfade.scale.set(window.innerWidth/256,window.innerHeight/256),this._panelSoil.flash.scale.set(window.innerWidth/16,window.innerHeight/16),this._panelSoil.darkover.scale.set(window.innerWidth/16,window.innerHeight/16)}this._ruler&&(this._ruler.tileScale.set(ws(1)),this._ruler.width=ws(60),this._ruler.height=window.innerHeight,this._ruler.position.set(ws(800)-ws(30),-Cs)),this._rulerMarkerPb&&(this._rulerMarkerPb.x=ws(800)),this._menusBG&&(this._menusBG.position.set(-bs,-Cs),this._menusBG.scale.set(window.innerWidth/16,window.innerHeight/16)),"on"===this._speedrunMeta.state&&(this._speedrunMeta.container&&this._speedrunMeta.container.destroy(),this._CreateSpeedrunContainer())}SetScoreboard(e){this._mappedScoreboard.clear();for(const t of e)this._mappedScoreboard.set(t.username,t)}_speedrunMeta={laststate:"off",lastfloor:1,container:null,pattern_a:null,pattern_b:null,timer:null,splits:[],t:0,hasHeardEvo2Claps:!1};_TickSpeedrunMode(e){const t=this.multiplex.games.self?this.multiplex.games.self.getZenithSpeedrunState():{state:"off",splits:[0,0,0,0,0,0,0,0,0],time:0,floor:1,progress:0};if(t.state!==this._speedrunMeta.laststate)switch(this._speedrunMeta.laststate=t.state,this._speedrunMeta.lastfloor=t.floor,t.state){case"on":this._speedrunMeta.container&&this._speedrunMeta.container.destroy(),this._CreateSpeedrunContainer(),this._PlaySpeedrunStart(t);break;case"off":if(!this._speedrunMeta.container)break;this._PlaySpeedrunEnd(t);break;case"win":if(!this._speedrunMeta.container)break;this._TickSpeedrunModeUI(t,e),this._PlaySpeedrunWin(t)}return"on"===t.state&&this._TickSpeedrunModeUI(t,e),"on"===t.state}_CreateSpeedrunContainer(){if("minimal"!==ot.video.graphics){this._speedrunMeta.container=new o.Container,this._speedrunMeta.container.scale.set(ws(1)),this._speedrunMeta.container.zIndex=50,this._speedrunMeta.container.position.set(ws(800),-Cs),Ul.addChild(this._speedrunMeta.container),this._speedrunMeta.pattern_a=o.TilingSprite.from("/res/speedrun-pattern.png",{width:Bs(window.innerWidth),height:90}),this._speedrunMeta.pattern_a.tileScale.set(.5),this._speedrunMeta.pattern_a.position.set(Bs(window.innerWidth/-2),0),this._speedrunMeta.pattern_a.alpha=.2,this._speedrunMeta.container.addChild(this._speedrunMeta.pattern_a),this._speedrunMeta.pattern_b=o.TilingSprite.from("/res/speedrun-pattern.png",{width:Bs(window.innerWidth),height:90}),this._speedrunMeta.pattern_b.tileScale.set(.5),this._speedrunMeta.pattern_b.position.set(Bs(window.innerWidth/-2),0),this._speedrunMeta.pattern_b.alpha=.2,this._speedrunMeta.container.addChild(this._speedrunMeta.pattern_b),this._speedrunMeta.timer=new d.Text("",{font:Rl.get("hun"),fontSize:75,weight:500,tint:16777215,fillAlpha:.4,outlineTint:16777215,outlineWeight:900,outlineAlpha:.8,anchor:[.5,.5],useProjection:!0,projection:[[-.085,0],[1.2,0],[-.075,1],[1.125,1]]}),this._speedrunMeta.timer.position.set(0,60),this._speedrunMeta.container.addChild(this._speedrunMeta.timer),this._speedrunMeta.splits=[];for(let e=0;e<9;e++){const t={container:null,bg:null,outer:null,inner:null,topText:null,bottomText:null};this._speedrunMeta.splits[e]=t,t.container=new o.Container,t.container.position.set(110*(e-4),Bs(window.innerHeight)-40),this._speedrunMeta.container.addChild(t.container),t.bg=new o.Sprite(o.Texture.WHITE),t.bg.tint=0,t.bg.alpha=.6,t.bg.position.set(-50,-25),t.bg.scale.set(6.25,3.125),t.container.addChild(t.bg),t.outer=new o.Sprite(o.Texture.WHITE),t.outer.tint=16777215,t.outer.position.set(-50,-25),t.outer.scale.set(0,3.125),t.container.addChild(t.outer),t.inner=new o.Sprite(o.Texture.WHITE),t.inner.tint=0,t.inner.alpha=.75,t.inner.position.set(-47,-22),t.inner.scale.set(5.875,2.75),t.container.addChild(t.inner),t.topText=new d.Text("",{font:Rl.get("hun"),fontSize:25,weight:750,tint:16777215,anchor:[.5,.5]}),t.topText.position.set(0,-5),t.container.addChild(t.topText),t.bottomText=new d.Text("",{font:Rl.get("hun"),fontSize:15,weight:700,tint:16760576,anchor:[.5,.5]}),t.bottomText.position.set(0,14),t.container.addChild(t.bottomText)}}}_PlaySpeedrunStart(e){if(xa.SePlay("zenith_speedrun_start"),this._speedrunMeta.container){this._speedrunMeta.hasHeardEvo2Claps=!1,this._speedrunMeta.timer.position.set(window.innerWidth,60),this._speedrunMeta.pattern_a.alpha=0,this._speedrunMeta.pattern_b.alpha=0,dc.animate(this._speedrunMeta.pattern_a,{0:{alpha:0},1:{alpha:.2}},1,a(.21,.45,.81,1)),dc.animate(this._speedrunMeta.pattern_b,{0:{alpha:0},1:{alpha:.2}},1,a(.21,.45,.81,1));for(let e=0;e<6;e++){const t=new d.Text("HYPERSPEED!!!",{font:Rl.get("hun"),fontSize:90,weight:500,tint:16777215,fillAlpha:0,outlineTint:Tl(60*e,100,50),outlineWeight:900,outlineAlpha:.8,blendMode:o.BLEND_MODES.ADD,anchor:[.5,.5]});t.position.set(window.innerWidth,80),this._speedrunMeta.container.addChild(t),setTimeout((()=>{dc.animate(t,{0:{"position.x":window.innerWidth},1:{"position.x":0}},.5,a(.21,.45,.73,.99))}),60*e),setTimeout((()=>{dc.animate(t,{0:{"position.x":0},1:{"position.x":-window.innerWidth}},.5,a(.21,.45,.73,.99),(()=>{t.destroy()}))}),1e3+60*e)}for(let e=0;e<9;e++)this._speedrunMeta.splits[e].container.pivot.x=-window.innerWidth,setTimeout((()=>{dc.animate(this._speedrunMeta.splits[e].container,{0:{"pivot.x":-window.innerWidth},1:{"pivot.x":0}},.5,a(.21,.45,.73,.99))}),400+60*e);setTimeout((()=>{dc.animate(this._speedrunMeta.timer,{0:{"position.x":window.innerWidth},1:{"position.x":0}},.5,a(.21,.45,.73,.99))}),1250)}}_PlaySpeedrunEnd(e){if(xa.SePlay("zenith_speedrun_end"),!this._speedrunMeta.container)return;this.multiplex.games.self&&this.multiplex.games.self.setZenithRhythmBlast(0);const t={...this._speedrunMeta};this._speedrunMeta.container=null,this._speedrunMeta.pattern_a=null,this._speedrunMeta.pattern_b=null,this._speedrunMeta.timer=null,this._speedrunMeta.splits=[],this._speedrunMeta.hasHeardEvo2Claps=!1,lr.getRefereeScoreSide()&&(lr.getRefereeScoreSide().speedrunFlash=-1),t.timer.position.set(window.innerWidth,80),dc.animate(t.timer,{0:{"scale.x":1,"scale.y":0},1:{"scale.x":1,"scale.y":0}},.5,a(.21,.45,.81,1)),dc.animate(t.pattern_a,{0:{alpha:.2},1:{alpha:0}},.5,a(.21,.45,.81,1)),dc.animate(t.pattern_b,{0:{alpha:.2},1:{alpha:0}},.5,a(.21,.45,.81,1));for(let e=0;e<9;e++)setTimeout((()=>{dc.animate(t.splits[e].container,{0:{"pivot.y":0,rotation:0,alpha:1},1:{"pivot.y":-100,rotation:.2*Math.random()-.1,alpha:0}},.5,a(.21,.45,.73,.99))}),150*Math.random());setTimeout((()=>{t.container.destroy()}),1250)}_PlaySpeedrunWin(e){if(xa.SePlay("zenith_speedrun_end"),!this._speedrunMeta.container)return;this.multiplex.games.self&&this.multiplex.games.self.setZenithRhythmBlast(0),lr.getRefereeScoreSide()&&(lr.getRefereeScoreSide().speedrunFlash=-1);const t={...this._speedrunMeta};this._speedrunMeta.container=null,this._speedrunMeta.pattern_a=null,this._speedrunMeta.pattern_b=null,this._speedrunMeta.timer=null,this._speedrunMeta.splits=[],this._speedrunMeta.hasHeardEvo2Claps=!1,t.timer.tint=16777215,t.timer.outlineTint=16777215,t.timer.alpha=1,t.timer.fillAlpha=1,setTimeout((()=>{dc.animate(t.timer,{0:{alpha:1},1:{alpha:0}},2.5,a(.21,.45,.81,1))}),3e3),dc.animate(t.pattern_a,{0:{alpha:1},1:{alpha:0}},1,a(.21,.45,.81,1)),dc.animate(t.pattern_b,{0:{alpha:1},1:{alpha:0}},.5,a(.21,.45,.81,1));for(let e=0;e<9;e++)setTimeout((()=>{dc.animate(t.splits[e].container,{0:{"pivot.y":0,alpha:1},1:{"pivot.y":100,alpha:0}},1.5,a(.55,.02,.94,.67))}),4e3+150*Math.random());setTimeout((()=>{t.container.destroy()}),6500);const n=Ys.getZenithStats().speedrun.splits;let s=!1;(0===n.pb[8]||e.splits[8]<=n.pb[8])&&(n.pb=e.splits,s=!0);for(let t=0;t<9;t++)(0===n.gold[t]||e.splits[t]<=n.gold[8])&&(n.gold[t]=e.splits[t]);xa.SePlay(s?"zenith_split_cleared":"zenith_split_missed")}_TickSpeedrunModeUI(e,t){if(!this._speedrunMeta.container)return;xl.play("zenith_speedrun",{dT:t});const n=xa.BgmDynGetTiming(),{evo:s}=n,i=n.currentBeatInBar%2==0?1-n.progressToNextBeat:0,o=s>=1?1-n.progressToNextBeat:0,r=s>=2&&n.currentBeatInBar%2==0?1-n.progressToNextBeat:0;s>=2&&1===n.currentBeatInBar&&(this._speedrunMeta.hasHeardEvo2Claps=!0),this.multiplex.games.self&&this.multiplex.games.self.setZenithRhythmBlast(r),lr.getRefereeScoreSide()&&(lr.getRefereeScoreSide().speedrunFlash=s<2||!this._speedrunMeta.hasHeardEvo2Claps?-1:n.currentBeatInBar%2==1?.5*n.progressToNextBeat:.5+.5*n.progressToNextBeat),this._speedrunMeta.t+=t;const l=wt(e.time);if(this._speedrunMeta.timer.text=`${l.m}:${l.s}\f4.${l.ms}`,this._speedrunMeta.timer.tint=Tl(.78*this._speedrunMeta.t,100,30+20*i),this._speedrunMeta.timer.outlineTint=Tl(.78*this._speedrunMeta.t+10,100,70+10*i),this._speedrunMeta.timer.fillAlpha=.4+.6*i,this._speedrunMeta.pattern_a.tilePosition.x+=t,this._speedrunMeta.pattern_b.tilePosition.x-=t,this._speedrunMeta.pattern_a.tint=Tl(.78*this._speedrunMeta.t,100,60-10*o),this._speedrunMeta.pattern_b.tint=Tl(.78*this._speedrunMeta.t+10,100,60-10*o),s>=1&&(this._speedrunMeta.pattern_a.alpha=.2+.1*i,this._speedrunMeta.pattern_b.alpha=.2+.1*o,n.currentBeatInBar<=1)){const t=e.time>=6e5?9:8;for(let e=0;e<t;e++){const t=Math.max(0,1-Math.abs(.5*(n.currentBeatInBar+n.progressToNextBeat)-(.2+.065*e))/.2);this._speedrunMeta.timer.overrides.get(e).y=-6*t}}const c=Ys.getZenithStats().speedrun.splits;for(let t=0;t<9;t++){const i=this._speedrunMeta.splits[t];i.outer.tint=Tl(1.5*this._speedrunMeta.t+34.7*t,100,70-10*o),i.inner.alpha=.75-.4*o;let a=0;if(s>=2&&this._speedrunMeta.hasHeardEvo2Claps){switch(n.currentBeatInBar){case 0:a=-1;break;case 1:a=this._speedrunMeta.hasHeardEvo2Claps?Math.min(1,10*n.progressToNextBeat-1):Math.min(1,0+10*n.progressToNextBeat);break;case 2:a=1;break;case 3:a=Math.max(-1,1-10*n.progressToNextBeat)}i.container.y=Bs(window.innerHeight)-40+4*a*(t%2==0?1:-1)}if(e.floor===t+1){if(c.pb[t]){const n=wt(c.pb[t]),s=wt(Math.abs(c.pb[t]-e.time));i.topText.text=`${n.m}:${n.s}\f4.${n.ms}`,i.topText.tint=16777215,i.topText.position.y=-5,i.bottomText.text=`${e.time<c.pb[t]?"-":"+"}${s.m>0?`${s.m}:${s.s}`:parseInt(s.s)}.${s.ms}`,i.bottomText.tint=8947848,i.bottomText.alpha=.4+.6*e.progress}else{const t=wt(e.time);i.topText.text=`${t.m}:${t.s}\f4.${t.ms}`,i.topText.position.y=2,i.topText.tint=16777215,i.bottomText.alpha=0}i.outer.scale.x=6.25*e.progress}else if(e.floor<t+1){if(c.pb[t]){const e=wt(c.pb[t]);i.topText.text=`${e.m}:${e.s}\f4.${e.ms}`,i.topText.tint=8947848}else i.topText.text=`floor ${t+1}`,i.topText.tint=3355443;i.topText.position.y=2,i.bottomText.alpha=0,i.outer.scale.x=0}else{const n=wt(e.splits[t]);if(i.topText.text=`${n.m}:${n.s}\f4.${n.ms}`,i.topText.tint=13421772,c.pb[t]){const n=wt(Math.abs(c.pb[t]-e.splits[t]));i.topText.position.y=-5,i.bottomText.text=`${e.splits[t]<c.pb[t]?"-":"+"}${n.m>0?`${n.m}:${n.s}`:parseInt(n.s)}.${n.ms}`;const s=e.splits[t]-(e.splits[t-1]??0)<=c.pb[t]-(c.pb[t-1]??0);i.bottomText.tint=e.splits[t]-(e.splits[t-1]??0)<=c.gold[t]-(c.gold[t-1]??0)?16758528:e.splits[t]<=c.pb[t]?s?8978176:7841338:s?16734354:16711769,i.bottomText.alpha=1}else i.topText.position.y=2,i.bottomText.alpha=0;i.outer.scale.x=6.25}}if(e.floor!==this._speedrunMeta.lastfloor){this._speedrunMeta.lastfloor=e.floor;let t=!0,n=16777215,s="";if(c.pb[e.floor-2]){t=e.splits[e.floor-2]<=c.pb[e.floor-2];const i=e.splits[e.floor-2]-(e.splits[e.floor-3]??0)<=c.pb[e.floor-2]-(c.pb[e.floor-3]??0);n=e.splits[e.floor-2]-(e.splits[e.floor-3]??0)<=c.gold[e.floor-2]-(c.gold[e.floor-3]??0)?16758528:t?i?8978176:7841338:i?16734354:16711769;const o=wt(Math.abs(c.pb[e.floor-2]-e.splits[e.floor-2]));s=`${e.splits[e.floor-2]<c.pb[e.floor-2]?"-":"+"}${o.m>0?`${o.m}:${o.s}`:parseInt(o.s)}.${o.ms}`}else{const t=wt(Math.abs(e.splits[e.floor-2]-(e.splits[e.floor-3]??0)));s=`${t.m>0?`${t.m}:${t.s}`:parseInt(t.s)}.${t.ms}`}xa.SePlay(t?"zenith_split_cleared":"zenith_split_missed"),this._speedrunMeta.timer.alpha=.1;const i=new d.Text(s,{font:Rl.get("hun"),fontSize:90,weight:500,tint:n,fillAlpha:1,outlineTint:n,outlineWeight:900,outlineAlpha:.5,anchor:[.5,.5]});i.position.set(window.innerWidth,80),this._speedrunMeta.container.addChild(i),dc.animate(i,{0:{"position.x":window.innerWidth},1:{"position.x":0}},.5,a(.21,.45,.73,.99)),setTimeout((()=>{dc.animate(i,{0:{"position.x":0},1:{"position.x":-window.innerWidth}},.5,a(.21,.45,.73,.99),(()=>{i.destroy()})),dc.animate(this._speedrunMeta.timer,{0:{alpha:.1},1:{alpha:1}},.5,a(.21,.45,.73,.99))}),2500)}}_Tick(e){this._mappedScoreboard.size||this.SetScoreboard(lr.getCurrentMatch()?.rrb?.scoreboard??[]),this._menusBG.alpha=Math.max(0,Math.min(.38,this._menusBG.alpha+(xt("menus").classList.contains("hidden")?-.02:.02)*e));const t=this._TickSpeedrunMode(e);if(this.primary?this.primary.isSynced()||this.primary.getOwner()===bn.username()?(this._ourPos=this.primary.getZenithAltitude(),xa.BgmDynSetParam(fa.HEIGHT,this._ourPos),xa.BgmDynSetParam(fa.STATE,this.multiplex.games.self?ga.PLAYING:ga.SPECTATOR)):(this._ourPos=this._mappedScoreboard.get(this.primary.getOwner())?.stats.altitude||0,xa.BgmDynSetParam(fa.STATE,ga.SPECTATOR)):xa.BgmDynSetParam(fa.STATE,ga.MENUS),xa.BgmDynSetParam(fa.IS_SPEEDRUN,Ca(t)),this._ourPosCurrent=this._ourPos+(this._ourPosCurrent-this._ourPos)*Math.pow(.97,e),this._scrollAway*=Math.pow(.8,e),"minimal"!==ot.video.graphics&&!0!==ot.video.nozenithanim){this._ruler.tilePosition.y=150*this._ourPosCurrent,this._ourPosCurrent<1600?(this._panelSoil.stars.renderable=!1,this._panelSoil.stars_mask.renderable=!1,this._panelSoil.moon.renderable=!1,this._panelSoil.bgcolor.renderable=!1,this._panelSoil.bgfade.renderable=!1,this._panelSoil.flash.renderable=!1,this._panelSoil.reachedGodhoodAt=null):(this._panelSoil.stars.renderable=!0,this._panelSoil.stars_mask.renderable=!0,this._panelSoil.moon.renderable=!0,this._panelSoil.bgcolor.renderable=!0,this._panelSoil.bgfade.renderable=!0,this._panelSoil.flash.renderable=!0,this._panelSoil.stars.tilePosition.y=3*this._ourPosCurrent,this._panelSoil.stars_mask.tilePosition.x+=e/30,this._panelSoil.stars_mask.tilePosition.y+=e/30*1.827,this._panelSoil.moon.y=window.innerHeight/2+ws(3)*(this._ourPosCurrent-2202.84),this._panelSoil.bgcolor.tint=me.GetAltitudeColor(this._ourPosCurrent,me.TINT_GRADIENT_BG_BACK).tint,this._panelSoil.bgfade.tint=me.GetAltitudeColor(this._ourPosCurrent,me.TINT_GRADIENT_BG_FRONT).tint,this._ourPosCurrent<1624?(this._panelSoil.flash.alpha=(this._ourPosCurrent-1600)/24,this._panelSoil.reachedGodhoodAt=null):this._ourPosCurrent<=1650?(this._panelSoil.flash.alpha=1,this._panelSoil.reachedGodhoodAt=null):(this._panelSoil.reachedGodhoodAt||(this._panelSoil.reachedGodhoodAt=performance.now()),this._panelSoil.flash.alpha=Math.max(0,1-(performance.now()-this._panelSoil.reachedGodhoodAt)/5e3)));const t=Ys.getRecords()[xt("zenithmenu").classList.contains("expert")?"zenithex":"zenith"]?.results.stats.zenith.altitude;this._rulerMarkerPb.y=-1===t?-1e3:ws(400)+50*(this._ourPosCurrent-t);const n=this._ourPos-this._ourPosCurrent;this._panelSoil.skipping?(Math.abs(n)<15&&(this._panelSoil.skipping=!1,this._panelSoil.skipFullSince=1/0,this._panelSoil.root.y=this._ourPosCurrent),this._panelSoil.loader.alpha>=1?(this._panelSoil.root.y=this._ourPos-15*Math.sign(n),this._panelSoil.skipFullSince===1/0?this._panelSoil.skipFullSince=performance.now():this._ourPos<=25&&performance.now()-this._panelSoil.skipFullSince>=200&&(this._ourPosCurrent=this._ourPos+15)):(this._panelSoil.root.y+=1*Math.sign(n)*e,this._panelSoil.skipFullSince=1/0)):(this._panelSoil.skipFullSince=1/0,Math.abs(n)>=100?(this._panelSoil.skipping=!0,this._panelSoil.root.y+=1*Math.sign(n)*e):this._panelSoil.root.y=this._ourPosCurrent),this._panelSoil.loader.alpha=Math.max(0,Math.min(1,this._panelSoil.loader.alpha+(this._panelSoil.root._hasUnloadedTextures||this._panelSoil.skipping?.12:-.03)*e)),_l&&_l.moveAllParticles(0,200*(this._ourPosCurrent-this._ourPosPrev)),gl&&gl.moveAllParticles(0,100*(this._ourPosCurrent-this._ourPosPrev)),bl&&bl.moveAllParticles(0,50*(this._ourPosCurrent-this._ourPosPrev)),this._ourPosPrev=this._ourPosCurrent}const n=[];for(const[,e]of this.activeGames)n.push(e);for(const[,e]of this.inactiveGames){const t=(this._ourPosCurrent-(e.r?.y??e.y))/this._range;t>=-this._safeZone&&t<=this._safeZone&&n.push(e)}n.sort(((e,t)=>t.im-e.im));const s=this.primary?this.primary.getDuoOptions():{enabled:!1,ally:{username:null}};for(const[t,i]of this.activeGames)this._TickGame(t,i,!0,this._ourPosCurrent,this._mappedScoreboard,n,s,e);let i=this._tickCurrent;for(const[t,o]of this.inactiveGames)(o.spr||i%this._tickModulo==0)&&this._TickGame(t,o,!1,this._ourPosCurrent,this._mappedScoreboard,n,s,e),i++;this._tickCurrent++,this._tickCurrent>this._tickModulo&&(this._tickCurrent=0),n.length<this._rangeMinPlayers&&this._range<5e3?this._range*=Math.pow(1.015,e):n.length>this._rangeMaxPlayers&&this._range>1&&(this._range/=Math.pow(1.015,e));if(this._range=Math.min(this._range,25+this._ourPosCurrent/1650*475),window.innerWidth===this._panelSoil.w&&window.innerHeight===this._panelSoil.h||this._Refit(),"minimal"!==ot.video.graphics&&!0!==ot.video.nozenithanim){const e=me.GetAltitudeColor(this._ourPosCurrent+6),t=me.GetAltitudeColor(this._ourPosCurrent),n=me.GetAltitudeColor(Math.max(0,this._ourPosCurrent-6)),s=Math.round(.3*e.r)<<16|Math.round(.3*e.g)<<8|Math.round(.3*e.b),i=Math.round(.3*t.r)<<16|Math.round(.3*t.g)<<8|Math.round(.3*t.b),o=Math.round(.3*n.r)<<16|Math.round(.3*n.g)<<8|Math.round(.3*n.b);this._panelSoil.fadeTop.tint=s,this._panelSoil.fadeBottom.tint=o,this._panelSoil.deadTop.tint=s,this._panelSoil.deadBottom.tint=o,this._panelSoil.loader.tint=i,this._panelSoil.fadeTop.alpha=Math.max(0,Math.min(1,(1750-this._ourPosCurrent)/50)),this._panelSoil.fadeBottom.alpha=Math.max(0,Math.min(1,(1750-this._ourPosCurrent)/50)),this._panelSoil.deadTop.alpha=Math.max(0,Math.min(1,(1750-this._ourPosCurrent)/50)),this._panelSoil.deadBottom.alpha=Math.max(0,Math.min(1,(1750-this._ourPosCurrent)/50)),this._ruler.alpha=.4*Math.max(0,Math.min(1,(1700-this._ourPosCurrent)/50))}}_TickGame(e,t,n,s,i,o,a,r){if(e===this.primary&&a.enabled)return this._TickGame_Primary(e,t,n,"left");if(this._sideCarGame===e||a.enabled&&e.getOwner()===a.ally.username)return this._sideCarGameLock||(this._sideCarGame=e),this._TickGame_Primary(e,t,n,"right");if(e===this.primary)return this._sideCarGameLock||(this._sideCarGame=null),this._TickGame_Primary(e,t,n);const l=t.un??e.getOwner();if(t.un=l,t.r)t.y=t.r.y,t.z=t.r.z;else if(n||t.spr)if(n&&e.isSynced())t.y=e.getZenithAltitude(),t.ty=t.y,t.tyo=t.y;else{const n=i.get(l),s=n?.stats.altitude||0,o=n?.stats.rank||0;if(t.tyo!==s)t.tyo=s,t.ty=s;else if(n&&n.mods.includes("expert_reversed")){const e=.05*(me.GetFloorLevel(t.ty)**2+me.GetFloorLevel(t.ty)+10);t.ty=Math.max(me.FloorDistance[me.GetFloorLevel(t.ty)-1],t.ty-e/60*r)}else{const e=.25*Math.floor(o),n=me.GetSpeedCap(t.ty);t.ty+=e/60*r*n}t.y=Math.abs(t.ty-t.y)<=.075?t.ty:t.ty+(t.y-t.ty)*Math.pow(.97,r),e.setZenithAltitude(t.y)}else t.y=i.get(l)?.stats.altitude||0,t.ty=t.y,t.tyo=t.y,e.setZenithAltitude(t.y);const c=(s-t.y)/this._range;if(c>=-this._safeZone&&c<=this._safeZone&&!t.r){let e=0;const s=o.indexOf(t);e=s>=0?s<this._maxSmall?1-s/this._maxSmall*.25:s<this._maxTiny?.74-(s-this._maxSmall)/this._maxTiny*.24:.49-(s-this._maxSmall-this._maxTiny)/this._maxStar*.49:t.im>(o[this._maxSmall-1]??{im:-1}).im?.75:t.im>(o[this._maxSmall+this._maxTiny-1]??{im:-1}).im?.5:t.im>(o[this._maxSmall+this._maxTiny+this._maxStar-1]??{im:-1}).im?-1:0,t.z=n||t.spr?e+(t.z-e)*Math.pow(.97,r):e}const p=c*(1+4*t.z);p>=-this._safeZone&&p<=this._safeZone?this._TickGame_InFrame(e,t,n,p):this._TickGame_OutOfFrame(e,t,n,p)}_TickGame_Primary(e,t,n,s=null){if(n){switch(s){case"left":e.location(-.32,this._scrollAway,1,!1);break;case"right":e.location(.32,this._scrollAway,1,!1);break;default:e.location(0,this._scrollAway,1,!1)}s&&e.updateDuoSide(s,!0),e.changeDisplayMode("full")}else{switch(t.spr&&(t.spr.destroy(),t.spr=null),s&&e.updateDuoSide(s),e.rehead(),e.changeDisplayMode("full"),s){case"left":e.getOwner()===bn.username()?(e.location(-.32,this._scrollAway,1,!0),e.playZoomInto("zenithduoleft")):(e.location(-.16,this._scrollAway,.5,!0),e.location(-.32,this._scrollAway,1,!1));break;case"right":e.getDuoOptions().ally.username===bn.username()?(e.location(.32,this._scrollAway,1,!0),e.playZoomInto("zenithduoright")):(e.location(.16,this._scrollAway,.5,!0),e.location(.32,this._scrollAway,1,!1));break;default:e.location(0,this._scrollAway,.5,!0),e.location(0,this._scrollAway,1,!1)}e.recolorForAltitude(t.y),this.activeGames.set(e,t),this.inactiveGames.delete(e)}}_TickGame_OutOfFrame(e,t,n,s){n?("full"===e.getDisplayMode()?e.fadeOutAndBehead(100):e.behead(),this.activeGames.delete(e),this.inactiveGames.set(e,t)):t.spr&&(t.spr.destroy(),t.spr=null)}_TickGame_InFrame(e,t,n,s){if(!n&&!t.spr&&t.z<0)return;const i=t.z>=.5,r=t.z>=.75?"small":"tiny";let l=!1;i!==n&&(i?(t.spr&&(t.spr.destroy(),t.spr=null),0!==t.d&&e.updateDuoSide(-1===t.d?"left":"right"),e.rehead(),e.recolorForAltitude(t.y),l=!0,this.activeGames.set(e,t),this.inactiveGames.delete(e)):(e.fadeOutAndBehead(100),this.activeGames.delete(e),this.inactiveGames.set(e,t)));const c=t.z<.75?e.recolorForAltitude(t.y):null;if(i||t.spr||(t.spr=o.Sprite.from("/res/particles/boardstar.png"),t.spr.alpha=0,t.spr.anchor.set(.5,.5),s>-1.1&&s<1.1&&dc.animate(t.spr,{0:{alpha:0},1:{alpha:1.5*t.z+.25}},1,a(0,0,1,1)),jl.addChild(t.spr)),i){"full"===e.getDisplayMode()&&(t.t=performance.now()+500),0!==t.d&&e.updateDuoSide(-1===t.d?"left":"right",!0),e.changeDisplayMode(r);const n=.05+Math.pow(.9*(t.z-.5),1.75);if(e.location(t.x*(1+.2*(1-t.z))+n*(t.z>=.75?.32*t.d:.2*t.d),s,n,performance.now()>=(t.t??0)),l&&s>-1.35&&s<1.35){const n=e.getHolder();n&&(n.alpha=0,dc.animate(n,{0:{alpha:0},1:{alpha:(t.z-.5)/2+.75}},1,a(0,0,1,1)))}}else t.spr.scale.set(ws(.1+.3*t.z)),t.spr.position.set(ws(800+t.x*(1+.2*(1-t.z))*800),ws(400+400*s)),t.spr.tint=c}Stop(){this._tickerActive&&(this._tickerActive=!1,o.Ticker.shared.remove(this._listener));for(const[,e]of this.inactiveGames)e.spr&&(e.spr.destroy(),e.spr=null);this._ruler&&(this._ruler.destroy(),this._ruler=null),this._rulerMarkerPb&&(this._rulerMarkerPb.destroy(),this._rulerMarkerPb=null),this._panelSoil.container&&(this._panelSoil.container.destroy(),this._panelSoil={},Ol.visible=!0),this._speedrunMeta.container&&this._speedrunMeta.container.destroy(),this._menusBG&&(this._menusBG.destroy(),this._menusBG=null),xt("zenithmenu").classList.add("hidden","thidden"),xt("zenithmenu").scrollTop=0,Vs.unmountGroup("ingame")}},window.DEVHOOK_DISABLE_SPECTATOR_TOOLS=()=>{ja.SPECTATOR_TOOLS_DISABLED=!0,xt("spectate").classList.add("hidden"),document.body.classList.remove("spectating")};class Xa extends Map{constructor(...e){super(...e),this._self=null,this._selfid=null,this._info=new Map,this.spec=null}get self(){return this._self}get selfid(){return this._selfid}set self(e){this._self=e,this._selfid=e?.id}get first(){return this.values().next().value}get last(){const e=this.values();let t=1;for(;t++<this.size&&e.next(););return e.next().value}get others(){let e=this.size;return this.self&&e--,e}getInfoByID(e){return this._info.get(e)}getUsernameByID(e){return this._info.get(e)?.username}getUserIDByID(e){return this._info.get(e)?.userid}setInfo(e,t,n){this._info.set(e,{userid:t,username:n})}forIndexedEach(e){for(const[t,n]of Array.from(this.values()).entries())e(n,t,this)}}class ja{static HOLDERWIDTH=.8;static HOLDERWIDTHTINY=.5;static HOLDERHEIGHT=1.6;static SPECTATOR_TOOLS_DISABLED=!1;static SPECTATOR_BECAME_ACTIVE=0;static ENTERMIDGAME_LOCKED=!1;constructor(e,t){this._socket=e??null,this._games=new Xa,this._dcgames=new Map,this._replays=[],this._totalSize=0,this._destroyed=!1,this._ready=Promise.resolve(!1),this._room=t,this._ourKiller=null,this._submitResolve=null,this.scoreboard=[],this.lastZenith=[],this._chainedElims=0,this._lastElim=0,this._presentation="zenith"===t.match.gamemode?new Ua.Zenith({active:[],inactive:[],primary:null},this):new Ua.BasicFFA({active:[],inactive:[],primary:null},this),ja.ENTERMIDGAME_LOCKED=!1,ja.TRANSITION_LOCK=!1,document.body.classList.remove("multiplextransitionlock")}get games(){return this._games}get replays(){return this._replays.map((e=>B.StripBloat(e.Export())))}SetPresentation(e){this._presentation=new e(this._presentation.Deconstruct(),this),this._Refresh()}SetScoreboard(e){this.scoreboard=e,this._presentation.SetScoreboard(e)}Scroll(e){return this._presentation.Scroll?.(e)}SetFollowing(e){return this._presentation.SetFollowing?.(e)}CancelFollowing(e){return this._presentation.CancelFollowing?.(e)}_AddReplay(e){if(this._totalSize>2)return this._replays.length=0;this._replays.push(e.replay)}_AttachLocal(e){const t=new v("keyboard",{socket:this._socket});return t.bindRollingReplay(this._socket),t.on("fail",((e,n,s)=>{this._games.forEach((e=>{e.setTargeted(!1),e.setEnemy(!1)})),lr.getRefereeScoreSide()?.Kill(bn.id()),this._OnGameEnding(t,n,s)})),t.on("quit",(()=>{lr.leaveRoom(),lr.dropMultiplex(),Wi(!0)})),t.on("stop",this._DetachGame.bind(this,t)),t.on("target",((e,t)=>{const n=this._games.get(e);n?.setTargeted(t)})),t.on("enemy",((e,t)=>{const n=this._games.get(e);n?.setEnemy(t)})),t.on("garbage",(e=>{const t=this._games.get(e);return t?t.getPos():null})),t.on("b2bstate",(e=>{this._UpdateB2BState()})),t.setGame(e.options,this._room.constants),t.createGameHolder(),Ra.setGame(t),Ra.setEnabled(this._totalSize>2),xt("zenith_party_ready_label").textContent="READY",xt("zenith_party_ready").classList.remove("ready","otherready"),xt("zenith_party_self").classList.remove("ready"),xt("zenith_party_other").classList.remove("ready"),e.options.zenith_duo&&xa.SePlay("zenith_start_duo"),this._games.self=t,this._games.set(t.id,t),this._AddReplay(t),this._presentation.AddGame(t,!0),this._presentation.SetPrimary(t),t}_AttachOnline(e,t){const n=new v("socket",{socket:this._socket}),s=e.options;s.noreplay=this._totalSize>2;const i=this._presentation.GameExtraOptions(n);i&&Object.assign(s,i),n.on("fail",((e,t,s)=>{this._OnGameEnding(n,t,s)})),n.on("stop",this._DetachGame.bind(this,n)),n.on("garbage",(e=>{const t=this._games.get(e);if(!t)return null;if(t===this._games.self)return null;let n=t.getPos();return n.isFallback&&this._presentation.FallbackPos&&(n=this._presentation.FallbackPos(t,n)||n),n})),n.on("click",(()=>this._games.self?!1!==this._games.self.options.manual_allowed&&(Ra.setStrategy(5,n.id),!0):(this.SetSpectate(n.id),!0))),n.on("b2bstate",(e=>{this._UpdateB2BState()}));const o=!this._presentation.GameShouldBeActive(n);return n.setGame(s,this._room.constants),n.setSynced(!1),n.setHeadless(o),n.createGameHolder(t),this._games.set(n.id,n),this._AddReplay(n),this._presentation.AddGame(n,!o),n}_DetachGame(e){this._games.delete(e.id),this._presentation.RemoveGame(e);const t=e.getLastAttacker();if(this._games.self===e){if(this._socket.SetFasterPing(!1),this._games.self=null,this._presentation.SetPrimary(null),ja.ENTERMIDGAME_LOCKED=!1,document.body.classList.contains("inzenith")&&qa(e,this),1===this._games.others)return;return t&&!document.body.classList.contains("inzenith")?this.SetSpectate(t):this._Refresh()}if(this._games.spec===e&&this._games.size>=2)return this.SetSpectate(t);"minimal"!==ot.video.graphics&&this._Refresh()}_UpdateB2BState(){if(2!==this._games.size)return;const[e,t]=this._games.values(),[n,s]=[Math.max(0,e.state.stats.btb-e.state.setoptions.b2bcharge_at+e.state.setoptions.b2bcharge_base),Math.max(0,t.state.stats.btb-t.state.setoptions.b2bcharge_at+t.state.setoptions.b2bcharge_base)];e.setB2BDistance(n-s),t.setB2BDistance(s-n)}_HandleWaterFall(e,t){if(this._ourKiller!==e.victim&&e.self!==e.victim||(this._ourKiller=e.killer),!1===ot.video.kos)return;const n=e.victim?.toUpperCase(),s=e.killer?.toUpperCase();let i="";n&&(document.body.classList.contains("inzenith")?i=` <span class="fire">${(Math.floor(10*e.alt)/10).toFixed(1)}${lc("M")}</span>`:t>=250&&(i=` <span class="fire">${Math.ceil(t/7)}%</span>`)),e.self&&e.self===e.victim?cn({msg:null!=s?`ko'd by ${s}`:"you ko'd yourself",fgcolor:"#FF2222",bgcolor:"#FFFFFF",timeout:5e3}):e.self&&e.killer===e.self?(this._PlayElimSound(),cn({msg:`ko'd ${n}${i}`,fgcolor:"#FFFFFF",bgcolor:"#FF2222",timeout:3e3})):e.self&&e.assists.includes(e.killer)?(this._PlayElimSound(),cn({msg:`assist ${n}${i}`,fgcolor:"#FFFFFF",bgcolor:"#FF2222",timeout:3e3})):e.spec&&e.spec===e.victim?cn({msg:null!=s?`${n} ko'd by ${s}`:`${n} ko'd themselves`,fgcolor:"#FF2222",bgcolor:"#FFFFFF",timeout:5e3}):e.spec&&(e.spec===e.killer||e.assists.includes(e.killer))&&cn({msg:`${s} ko'd ${n}${i}`,fgcolor:"#FFFFFF",bgcolor:"#FF2222",timeout:3e3})}_PlayElimSound(){const e=performance.now();e-this._lastElim>1e4&&(this._chainedElims=0),this._chainedElims++,this._lastElim=e;const t=Math.min(2,Math.pow(1.05946,this._chainedElims-1));xa.SePlay("elim",1,0,t)}async _OnGameEnding(e,t,n){const s={};s.victim=e.getOwner(),s.killer=t.username??this._games.getUsernameByID(t.gameid),s.self=this._games.self?.getOwner(),s.spec=this._games.spec?.getOwner(),s.assists=this._presentation.assistGames.map((e=>e.getOwner())),s.alt=e.getZenithAltitude(),await Ht(50),this._HandleWaterFall(s,n),s.victim===s.self||s.killer===s.self&&!1!==ot.video.kos||e.isHeadless()||xa.SePlay("death",this._games.size<=100?1:.5),hn(s.victim,s.killer,t.type);for(const e of this._games.values())e.updatePlacement(this._games.size)}_Refresh(e=!1){if(this._destroyed)return;const t=this._presentation.Refresh(e=!!e);this._games.self||!t||ja.TRANSITION_LOCK?(xt("spectate").classList.add("hidden"),document.body.classList.remove("spectating")):(xt("spectate").classList.contains("hidden")&&(ja.SPECTATOR_BECAME_ACTIVE=Date.now()),ja.SPECTATOR_TOOLS_DISABLED||(xt("spectate").classList.remove("hidden"),document.body.classList.add("spectating")))}async _Load(e){let t=0;this._socket.cork();let n="tiny";for(e.length<=8&&!ot.video.alwaystiny&&"minimal"!==ot.video.graphics&&(n="small"),e.length<=2&&ot.video.sidebyside&&(n="full");;){for(let s=0;s<=30;s++,t++){const s=e[t];if(!s)return this._Refresh(!0),xt("roomprepare").classList.add("hidden"),this._socket.uncork(),!0;s.userid!==bn.id()?this._AttachOnline(s,n):this._AttachLocal(s)}xt("roomprepare_detail").innerHTML=`${t} / ${e.length} players loaded`,await setTimeout(0)}}Find(e){if(!e)return null;const t=this._games.get(e);if(t)return t;for(const t of this._games.values())if(t.getOwner()===e)return t;return null}OnReplayEnter(e){if(e.userid===bn.id()){if(this._games.self){if(this._games.self.id===e.gameid)return!0;this._games.self.endNow()}this.SetSpectate(null);const t=this._AttachLocal(e);return this._games.setInfo(e.gameid,e.userid,e.options.username),t.startGame(),t.updatePlacement(this._games.size),this._Refresh(),!0}let t="tiny";this._games.size<8&&!ot.video.alwaystiny&&"minimal"!==ot.video.graphics&&(t="small"),this._games.size<2&&ot.video.sidebyside&&(t="full");const n=this._AttachOnline(e,t);this._games.setInfo(e.gameid,e.userid,e.options.username),n.startGame(),n.updatePlacement(this._games.size),this._Refresh()}OnReplayState(e,t){const n=this._games.get(e);if(n){if("early"===t)return n.setSynced(!0);if("wait"===t)return n.requestState();n.injectState(t),n.updatePlacement(this._games.size)}}OnReplayBoardState(e,t){const n=this._games.get(e);n&&n.injectBoardState(t)}OnReplayEnd(e,t){const n=this._games.get(e);return n?"zenith"===this._room.match.gamemode&&n===this._games.self?n.end(t.gameoverreason):void n.queueEnd(t.gameoverreason,"winner"!==t.gameoverreason,t.fire,t.killer):this._dcgames.set(e,t)}SetPlayers(e,t=!1){e=e.filter((e=>e.alive)),"zenith"!==this._room.match.gamemode&&e.length>=100&&this.SetPresentation(Ua.SuperLobby);for(const t of e)this._games.setInfo(t.gameid,t.userid,t.options.username);this._totalSize=e.length,t?rr.shuffleArray(e):2===e.length&&e.sort(((e,t)=>e.naturalorder-t.naturalorder)),e.length>=30&&(xt("roomprepare_detail").innerHTML=`0 / ${e.length} players loaded`,xt("roomprepare").classList.remove("hidden")),this._ready=this._Load(e)}GetSpectate(){return this._games.spec}SetSpectate(e){const t=this.Find(e);if(!t)return this._games.spec=null,this._presentation.SetPrimary(null),lr.setSpecGameID(0),this._Refresh();this._games.spec=t,this._presentation.SetPrimary(t);let n=t.id;if(t.getDuoOptions().enabled)for(const e of this.scoreboard){if(e.gameid===t.id)break;if(e.allies[0]===t.id){n=e.gameid;break}}return lr.setSpecGameID(n),this._Refresh(),t}async Start(e=!1){if(!await this._ready)return console.warn("Failed to start multiplex, something wrong happened with during the preload");const t=[],n=e?"spectateGame":"startGame";for(const e of this._games.values())t.push(e[e===this._games.self?"startGame":n]()),e.updatePlacement(this._games.size);for(const[e,t]of this._dcgames)this.OnReplayEnd(e,t);return this._presentation.Animate("start"),await Promise.all(t)}Stop(e){this._destroyed=!0;const t=[];e.forEach((e=>e.alive&&t.push(e.username)));for(const e of this._games.values())e!==this._games.self?t.includes(e.getOwner())?(e.queueEnd("winner"),setTimeout(e.endWin.bind(e),1e3)):(e.queueEnd("topout",!0),setTimeout(e.endLose.bind(e,!0),1e3)):t.includes(e.getOwner())?e.endWin():e.endLose();this._presentation.Stop(),xt("spectate").classList.add("hidden"),document.body.classList.remove("spectating")}Abort(){this._destroyed=!0,this._presentation.Stop(),Ys.stopNow(),this.End(),xt("spectate").classList.add("hidden"),document.body.classList.remove("spectating")}End(){this._destroyed=!0,this._presentation.Stop(),this._games.forEach((e=>e.endNow())),this._games.self=null,this._games.spec=null}HasSubmitted(e){if(!this._submitResolve)return console.log(e),void Sn(e.xp??0);this._submitResolve(e),this._submitResolve=null}}async function qa(e,t){ja.TRANSITION_LOCK=!0,document.body.classList.add("multiplextransitionlock"),t._Refresh();const n=Date.now(),s=await new Promise((e=>{t._submitResolve=e}));s.stats&&Ys.setZenithStats(s.stats),t.lastZenith=s,await new Promise((e=>Ys.setUnsafeTimeout(e,n+1500-Date.now())));const{ranks:i,record:o,ally:a,submitted:r}=s,l=o.results,c=o.results.stats,p=o.extras,h=o.gamemode??(p.zenith.mods.includes("expert")||p.zenith.mods.includes("expert_reversed")?"zenithex":"zenith");Sn(s.xp??0),document.body.classList.remove("multiplextransitionlock"),ja.TRANSITION_LOCK=!1,xt("zenithmenu").classList.add("inresults"),xt("zenith_contribution").classList.toggle("hidden",!a),xt("start_zenith_label").textContent="AGAIN",xt("chatreplay_zenith").classList.remove("sent");const d=xt("zenith_results_stats_full"),u=xt("zenith_results_stats_overview");let _,m,g,f,b,C;if(d.innerHTML="",u.innerHTML="",r?(xt("zenithmenu").classList.remove("fakereplay","noreplay"),xt("replayid_zenith").textContent=`R:${o.replayid}`):(xt("zenithmenu").classList.add("fakereplay"),a?xt("zenithmenu").classList.remove("noreplay"):xt("zenithmenu").classList.add("noreplay")),a){_=new Ka(l,a,`<img class="avatar" src="${xt("zenith_party_self_avatar").src}" />`,`<img class="avatar" src="${xt("zenith_party_other_avatar").src}" />`);const e=Math.max(c.finaltime,a.stats.finaltime);m=wt(e),g=e/(1e3/60),f=e/6e4,b=e/1e3,C=Math.max(c.zenith.floor,a.stats.zenith.floor),xt("zenith_result").innerHTML=`${Math.floor(Math.max(c.zenith.altitude,a.stats.zenith.altitude)).toLocaleString("en-US")}<span class="ms">.${Math.floor(Math.max(c.zenith.altitude,a.stats.zenith.altitude)%1*10)}</span><span class="unit">M</span><span class="mods">${p.zenith.mods.map((e=>`<img src="/res/zenith-mods/pbicons-result/${zt(e)}.png" title="${w.Strings.zenithMods[e]??"Unknown Mod"}" />`)).join("")}</span>`;const t=c.zenith.totalbonus+a.stats.zenith.totalbonus;if(t){xt("zenith_contribution_self_avatar").src=xt("zenith_party_self_avatar").src,xt("zenith_contribution_ally_avatar").src=xt("zenith_party_other_avatar").src;const e=Math.round(c.zenith.totalbonus/t*1e3);xt("zenith_contribution_self").innerHTML=`<h1>${Math.floor(e/10)}<span>.${e%10}%</span></h1><p>${c.zenith.totalbonus.toFixed(1)}</p>`,xt("zenith_contribution_ally").innerHTML=`<h1>${Math.floor((1e3-e)/10)}<span>.${(1e3-e)%10}%</span></h1><p>${a.stats.zenith.totalbonus.toFixed(1)}</p>`,xt("zenith_contribution").style.setProperty("--p",e/10+"%")}else xt("zenith_contribution").classList.add("hidden")}else _=new Ka(l),m=wt(c.finaltime),g=c.finaltime/(1e3/60),f=c.finaltime/6e4,b=c.finaltime/1e3,C=c.zenith.floor,xt("zenith_result").innerHTML=`${Math.floor(c.zenith.altitude).toLocaleString("en-US")}<span class="ms">.${Math.floor(c.zenith.altitude%1*10)}</span><span class="unit">M</span><span class="mods">${p.zenith.mods.map((e=>`<img src="/res/zenith-mods/pbicons-result/${zt(e)}.png" title="${w.Strings.zenithMods[e]??"Unknown Mod"}" />`)).join("")}</span>`;if(_.writeRaw(u,"TIME",`${m.m}:${m.s}.${m.ms}`),_.writeRaw(u,"FLOOR",`${C}: ${["","hall of beginnings","the hotel","the casino","the arena","the museum","abandoned offices","the laboratory","the core","corruption","platform of the gods"][C]??""}`),_.write(u,"KO's","stats.kills",0),a&&_.write(u,"REVIVES","stats.zenith.revives",0),p.zenith.peakPos&&-1!==p.zenith.peakPos&&_.writeRaw(u,"PEAK POSITION",`<span>${p.zenith.peakPos.toLocaleString("en-US")}</span> / ${p.zenith.peakCount.toLocaleString("en-US")}`),p.zenith.finalPos&&-1!==p.zenith.finalPos&&_.writeRaw(u,"FINAL POSITION",`<span>${p.zenith.finalPos.toLocaleString("en-US")}</span> / ${p.zenith.finalCount.toLocaleString("en-US")}`),a?(_.writeRaw(u,"average CLIMB SPEED",((c.zenith.avgrankpts/(c.finaltime/1e3*60)+a.stats.zenith.avgrankpts/(a.stats.finaltime/1e3*60))/2).toFixed(2)),_.writeRaw(u,"peak CLIMB SPEED",Math.floor(Math.max(c.zenith.peakrank,a.stats.zenith.peakrank)).toLocaleString("en-US")),_.writeRaw(u,"ALTITUDE per SECOND",(Math.max(c.zenith.altitude,a.stats.zenith.altitude)/Math.max(c.finaltime/1e3,a.stats.finaltime/1e3)).toFixed(2))):(_.writeRaw(u,"average CLIMB SPEED",(c.zenith.avgrankpts/g).toFixed(2)),_.writeRaw(u,"peak CLIMB SPEED",Math.floor(c.zenith.peakrank).toLocaleString("en-US")),_.writeRaw(u,"ALTITUDE per SECOND",(c.zenith.altitude/b).toFixed(2))),_.write(u,"ATTACK","stats.garbage.attack",0),_.write(u,"ATTACK PER PIECE","stats.garbage.attack",3,(()=>(c.garbage.attack+a.stats.garbage.attack)/(c.piecesplaced+a.stats.piecesplaced)),((e,t)=>e/t.stats.piecesplaced)),_.write(u,"ATTACK per MINUTE","aggregatestats.apm",2),_.write(u,"PIECES per SECOND","aggregatestats.pps",2),_.write(u,"VERSUS SCORE","aggregatestats.vsscore",2),_.write(u,"maximum COMBO","stats.topcombo",0,!1,(e=>Math.max(0,e-1))),_.write(u,"maximum back-to-back chain","stats.topbtb",0,!1,(e=>Math.max(0,e-1))),_.write(d,"LINES SENT","stats.garbage.sent",0),_.write(d,"LINES RECEIVED","stats.garbage.received",0),_.write(d,"PIECES PLACED","stats.piecesplaced",0),_.write(d,"KEYS PRESSED","stats.inputs",0),_.write(u,"KEYS per PIECE","stats.inputs",3,(()=>(c.inputs+a.stats.inputs)/(c.piecesplaced+a.stats.piecesplaced)),((e,t)=>e/t.stats.piecesplaced)),_.write(d,"KEYS per SECOND","stats.inputs",3,!0,(e=>e/b)),_.write(d,"HOLDS","stats.holds",0),_.write(d,"LINES","stats.lines",0),_.write(d,"LINES per MINUTE","stats.lines",2,!0,(e=>e/f)),_.write(d,"SINGLES","stats.clears.singles",0),_.write(d,"DOUBLES","stats.clears.doubles",0),_.write(d,"TRIPLES","stats.clears.triples",0),_.write(d,"QUADS","stats.clears.quads",0),_.write(d,"SPINS","stats.tspins",0),_.write(d,"spin MINI ZEROES","stats.clears.minitspins",0),_.write(d,"spin ZEROES","stats.clears.realtspins",0),_.write(d,"spin MINI SINGLES","stats.clears.minitspinsingles",0),_.write(d,"spin SINGLES","stats.clears.tspinsingles",0),_.write(d,"spin MINI DOUBLES","stats.clears.minitspindoubles",0),_.write(d,"spin DOUBLES","stats.clears.tspindoubles",0),_.write(d,"spin MINI TRIPLES","stats.clears.minitspintriples",0),_.write(d,"spin TRIPLES","stats.clears.tspintriples",0),_.write(d,"spin MINI QUADS","stats.clears.minitspinquads",0),_.write(d,"spin QUADS","stats.clears.tspinquads",0),_.write(d,"ALL CLEARS","stats.clears.allclear",0),_.write(d,"finesse %","stats.finesse.perfectpieces",(e=>`${(100*e).toFixed(2)}%`),(()=>(c.finesse.perfectpieces+a.stats.finesse.perfectpieces)/(c.piecesplaced+a.stats.piecesplaced)),((e,t)=>e/t.stats.piecesplaced)),_.write(d,"finesse faults","stats.finesse.faults",0),xt("zenithmenu").classList.toggle("hasranks",!!i),i){i.user<=10?(xt("zenith_personalrank_results").classList.toggle("textual",1===i.user),xt("zenith_personalrank_results_data").innerHTML=1===i.user?"PERSONAL BEST":i.user,xt("zenith_personalrank_results").classList.remove("hidden"),Ys.getRecords()[h]?xt("zenith_personalrank_results_sub").innerHTML=`${Math.abs(Ys.getRecords()[h].results.stats.zenith.altitude-c.zenith.altitude).toFixed(1)} ${1===i.user?"improvement":"behind"} &bull; last PB was ${Bt(Date.parse(Ys.getRecords()[h].ts)).toUpperCase()} ago`:xt("zenith_personalrank_results_sub").innerHTML="this is your first game this week, play more to track your improvement",xt("zenith_personalrank_results").classList.toggle("best",1===i.user)):xt("zenith_personalrank_results").classList.add("hidden"),i.local>0?(xt("zenith_countryrank_results").classList.toggle("textual",1===i.local),xt("zenith_countryrank_results_data").innerHTML=1===i.local?"country best":i.local,xt("zenith_countryrank_results_sub").innerHTML=1===i.local?"":`TOP ${Math.min(100,(i.local-1)/Math.max(1,i.localcount)*100).toFixed(2)}%`,xt("zenith_countryrank_results").classList.remove("hidden"),xt("zenith_countryrank_results").classList.toggle("best",1===i.local)):xt("zenith_countryrank_results").classList.add("hidden"),i.global>0?(xt("zenith_globalrank_results").classList.toggle("textual",1===i.global),xt("zenith_globalrank_results_data").innerHTML=1===i.global?"world best":i.global,xt("zenith_globalrank_results_sub").innerHTML=1===i.global?"":`TOP ${Math.min(100,(i.global-1)/Math.max(1,i.globalcount)*100).toFixed(2)}%`,xt("zenith_globalrank_results").classList.remove("hidden"),xt("zenith_globalrank_results").classList.toggle("best",1===i.global)):xt("zenith_global_results").classList.add("hidden");const e=!Ys.getRecords()[h];1===i.user&&(Ys.getRecords()[h]=o,Ys.updatePBDisplays()),e||(1===i.global?(xa.SePlay("worldrecord"),Di("globalbest","WORLD RECORD!")):1===i.local?(xa.SePlay("personalbest"),Di("personalbest","COUNTRY BEST!")):1===i.user&&(xa.SePlay("personalbest"),Di("personalbest","PERSONAL BEST!")))}!t._games.spec&&!t._games.self&&document.body.classList.contains("inzenith")&&xt("zenithmenu").classList.contains("rolledup")&&xt("spectate").classList.contains("hidden")&&(xt("zenithmenu").classList.remove("rolledup"),t.SetSpectate(null),vt("#zenithmenu .menuslide_rollup").forEach((e=>e.textContent="SPECTATE"+(t._ourKiller?` ${t._ourKiller.toUpperCase()}`:""))),Wi(!0),gi.bindGuide(fi.zenith||{}),xt("zenithmenu").scrollTop=0,t._Refresh())}Tn.ready((()=>{function e(e){if(e.repeat)return;if(!xt("afterloader").classList.contains("hidden")||!xt("social").classList.contains("hidden")||!xt("kuro").classList.contains("hidden")||document.body.classList.contains("chatfocus")||Ji>1)return;const t=xt("spectate").classList.contains("hidden")||Ji>=1;if(!document.body.classList.contains("inzenith")&&t)return;if(document.body.classList.contains("inzenith")&&t&&(document.body.classList.contains("ingame_phys")||document.body.classList.contains("multiplextransitionlock")))return;let n=!1;Object.keys(rt).forEach((s=>{if(!n&&(!t||["retry","exit","menuBack","chat"].includes(s))&&rt[s].includes(yt(e)))switch(s){case"menuLeft":xt("prev_spectate").click(),n=!0;break;case"menuRight":xt("next_spectate").click(),n=!0;break;case"menuUp":xt("grid_spectate").click(),n=!0;break;case"menuBack":case"exit":if(document.body.classList.contains("inzenith")){xt(xt("zenithmenu").classList.contains("rolledup")?"zenith_rollup_main":"leavezenith").click(),n=!0;break}xt("exit_spectate").classList.contains("blocked")||(xt("exit_spectate").click(),n=!0);break;case"retry":if(document.body.classList.contains("inzenith")){xt(xt("zenithmenu").classList.contains("duo")?"zenith_party_ready":"start_zenith").click(),n=!0;break}xt("enter_spectate").click(),n=!0;break;case"chat":document.body.classList.contains("inzenith")&&t&&(xt("ingame_chat_input").focus(),e.preventDefault()),n=!0}}))}xt("grid_spectate").addEventListener("click",(function(e){er&&(Date.now()-ja.SPECTATOR_BECAME_ACTIVE<1e3?e.stopPropagation():null!=er.GetSpectate()?er.SetSpectate(null):e.stopPropagation())})),xt("next_spectate").addEventListener("click",(function(e){if(!er)return;if(Date.now()-ja.SPECTATOR_BECAME_ACTIVE<1e3)return void e.stopPropagation();const t=er.GetSpectate();if(er.scoreboard.length){let e=null;if(t){const n=t.getOwner(),s=er.scoreboard[er.scoreboard.findIndex((e=>e.username===n))+1];e=s?s.username:er.scoreboard[0].username}else e=er.scoreboard[0].username;return er.SetSpectate(e)}{if(!t)return er.SetSpectate(er.games.first?.id);const e=er.games.values();for(const n of e){if(t!==n)continue;let s=e.next().value;if(!s&&(s=er.games.first,!s))return;return er.SetSpectate(s.id)}}})),xt("prev_spectate").addEventListener("click",(function(e){if(!er)return;if(Date.now()-ja.SPECTATOR_BECAME_ACTIVE<1e3)return void e.stopPropagation();const t=er.GetSpectate();if(er.scoreboard.length){let e=null;if(t){const n=t.getOwner(),s=er.scoreboard[er.scoreboard.findIndex((e=>e.username===n))-1];e=s?s.username:er.scoreboard[er.scoreboard.length-1].username}else e=er.scoreboard[0].username;return er.SetSpectate(e)}{if(!t)return er.SetSpectate(er.games.last?.id);let e=null;for(const n of er.games.values()){if(t!==n){e=n;continue}let s=e;if(!s&&(s=er.games.last,!s))return;return er.SetSpectate(s.id)}}})),xt("exit_spectate").addEventListener("click",(function(e){if(e.ctrlKey&&e.altKey)return ja.SPECTATOR_TOOLS_DISABLED=!0,xt("spectate").classList.add("hidden"),void document.body.classList.remove("spectating");er&&(Date.now()-ja.SPECTATOR_BECAME_ACTIVE<1e3?e.stopPropagation():lr.stopSpectating())})),xt("zen_spectate").addEventListener("click",(function(e){er&&(Date.now()-ja.SPECTATOR_BECAME_ACTIVE<1e3?e.stopPropagation():(lr.dropMultiplex(),Ys.playZen({inroom:!0,roomname:xt("room_content_name").innerText}),ei()))})),xt("follow_spectate").addEventListener("click",(function(e){if(!er)return;if(Date.now()-ja.SPECTATOR_BECAME_ACTIVE<1e3)return void e.stopPropagation();if(xt("follow_spectate").classList.contains("active"))return er.SetFollowing(null);const t=er.GetSpectate();if(!t)return er.SetFollowing(null);er.SetFollowing(t.getOwner())})),xt("enter_spectate").addEventListener("click",(function(e){er&&(Date.now()-ja.SPECTATOR_BECAME_ACTIVE<1e3||ja.ENTERMIDGAME_LOCKED?e.stopPropagation():(ja.ENTERMIDGAME_LOCKED=!0,lr.enterMidgame({mods:Va(),tutorial:Qa()})))})),xt("referee_score_side").addEventListener("click",(function(e){if(!er)return;if(!e.target.dataset.username)return;const t=er.Find(e.target.dataset.username);t&&er.SetSpectate(t.id)})),document.addEventListener("keydown",e,!1),document.addEventListener("gpdown",e,!1),document.body.addEventListener("wheel",(function(e){if(!er||!document.body.classList.contains("spectating")||e.altKey||e.target.closest("#ingame_chat_container")||e.target.closest("#zen_panel_content")||Ji>=1)return;er.Scroll(e.deltaY)&&(e.preventDefault(),e.stopImmediatePropagation())}),{passive:!1})}));class Ka{_self;_ally;_selfAvatar;_allyAvatar;_isDuo=!1;constructor(e,t,n,s){this._self=e,t&&(this._isDuo=!0,this._ally=t,this._selfAvatar=n,this._allyAvatar=s)}write(e,t,n,s,i=!0,o=null){if(this._isDuo){let a=kt(this._self,n),r=kt(this._ally,n);o&&(a=o(a,this._self),r=o(r,this._ally));Ys.addStatsLine(e,t,`${i?`<b>${this._parse(!0===i?a+r:i(),s)}</b> `:""}${this._selfAvatar} ${this._parse(a,s)} ${this._allyAvatar} ${this._parse(r,s)}`)}else{let i=kt(this._self,n);o&&(i=o(i,this._self)),Ys.addStatsLine(e,t,this._parse(i,s))}}writeSingle(e,t,n,s){Ys.addStatsLine(e,t,this._parse(kt(this._self,n),s))}writeRaw(e,t,n){Ys.addStatsLine(e,t,n)}_parse(e,t){return"function"==typeof t?t(e):"number"==typeof t?0===t?e.toLocaleString("en-US"):e.toFixed(t):e}}function Va(){const e=[];for(const t of vt(".zenith_card.active")){let n=t.dataset.card;t.classList.contains("reversed")&&(n=`${n}_reversed`),e.push(n)}return e}let Ya=!1;function Qa(){return!Ya&&"guideline"===ot.controls.style}function Za(){"zenith"===xt("menus").dataset.menuType&&(xt("zenithmenu").classList.contains("reversed")?(xt("header_text").textContent=xt("zenithmenu").classList.contains("expert")?"EXPERT QUICK PLAY":"QUICK PLAY",xt("footer_text").textContent="overthrow the tower!"):xt("zenithmenu").classList.contains("expert")?(xt("header_text").textContent="EXPERT QUICK PLAY",xt("footer_text").textContent="challenge the tower!"):(xt("header_text").textContent="QUICK PLAY",xt("footer_text").textContent="scale the tower!"))}Tn.ready((()=>{vt("#zenithmenu .menuslide_rollup").forEach((e=>e.addEventListener("click",(()=>{er&&(xt("zenithmenu").classList.toggle("rolledup"),Wi(!xt("zenithmenu").classList.contains("rolledup")),xt("zenithmenu").classList.contains("rolledup")?(er.SetSpectate(er._ourKiller),vt("#zenithmenu .menuslide_rollup").forEach((e=>e.textContent="PLAY")),setTimeout((()=>{gi.disengage()}),0)):(er._ourKiller=null,er.SetSpectate(null),vt("#zenithmenu .menuslide_rollup").forEach((e=>e.textContent="SPECTATE")),gi.bindGuide(fi.zenith||{})),xt("zenithmenu").scrollTop=0)})))),xt("start_zenith").addEventListener("click",(function(e){if(er){if(ja.ENTERMIDGAME_LOCKED)return e.stopPropagation();xa.SePlay("zenith_start"),ja.ENTERMIDGAME_LOCKED=!0,lr.enterMidgame({mods:Va(),tutorial:Qa()})}})),vt(".zenith_card").forEach((e=>e.addEventListener("mousemove",(t=>{const n=e.clientWidth,s=e.clientHeight;e.style.setProperty("--rx",(t.offsetX-n/2)/n*20+"deg"),e.style.setProperty("--ry",(t.offsetY-s/2)/s*-20+"deg")}))));let e=!1;function t(e){const t=e.parentNode.childElementCount,n=Array.from(e.parentNode.children).indexOf(e),s=n/Math.max(1,t-1)*.8+.1;for(let i=0;i<t;i++){let o=0;i===n?o=s:0===i?o=0:i<n?o=i/n*Math.max(.05,s-.2):i>n?o=1-(1-(i-n)/(t-1-n))*Math.min(.95,1-(s+.2)):i===t-1&&(o=1),o=1-o,e.parentNode.children[i].style.setProperty("--x",o),xt("zenith_deck_cards").children[i].classList.toggle("hover-blocked",i<n-1||i>n+1)}vt(".zenith_deck_info").forEach((e=>e.classList.add("hidden"))),At(`.zenith_deck_info[data-for="${e.dataset.card}${e.classList.contains("floorlocked")||e.classList.contains("locked")?"_locked":""}"]`).classList.remove("hidden"),e.__skipClicks=!1,xa.SePlay(`card_slide_${Math.floor(4*Math.random())+1}`,.3+.1*Math.random()),xt("zenith_deck_tryhold").classList.remove("visible"),vt(".zenith_card").forEach((e=>e.__revUpsellTimeout&&clearTimeout(e.__revUpsellTimeout))),!w.allowedReverseCards.includes(e.dataset.card)||!e.classList.contains("reversable")||e.classList.contains("reversed")||Ys.getZenithStats().mod_altitude[`${e.dataset.card}_reversed`]||xt("zenithmenu").classList.contains("duo")||(e.__revUpsellTimeout=setTimeout((()=>{e.__revUpsellTimeout=null,xt("zenith_deck_tryhold").classList.add("visible");let t="";for(const n of At(`.zenith_deck_info[data-for="${e.dataset.card}"] p`).textContent)t+=" "===n?'<div class="zdtry_o_sp"></div>':`<div class="zdtry_o" style="--bonk-a: ${2*Math.random()-1}; --bonk-b: ${2*Math.random()-1}; --x: ${2*Math.random()-1}; --y: ${2*Math.random()-1}; --r: ${2*Math.random()-1}; --l: ${.4*Math.random()+.6}s;">${n}</div>`;xt("zenith_deck_tryhold_old").innerHTML=t;let n="",s=0;for(const e of"PRESS AND HOLD FOR A NEW CHALLENGE")n+=" "===e?'<div class="zdtry_n_sp"></div>':`<div class="zdtry_n ${s>=21?"ex":""}" style="--i: ${s};">${e}</div>`,s++;xt("zenith_deck_tryhold_new").innerHTML=n}),300))}function n(){const e=xt("zenith_deck_cards").childElementCount;for(let t=0;t<e;t++)xt("zenith_deck_cards").children[t].style.setProperty("--x",.8*(1-t/Math.max(1,e-1))+.1),xt("zenith_deck_cards").children[t].classList.remove("hover-blocked"),xt("zenith_deck_cards").children[t].__revUpsellTimeout&&clearTimeout(xt("zenith_deck_cards").children[t].__revUpsellTimeout),xt("zenith_deck_tryhold").classList.remove("visible"),xt("zenith_deck_tryhold").getBoundingClientRect();vt(".zenith_deck_info").forEach((e=>e.classList.add("hidden"))),At('.zenith_deck_info[data-for="x-nocard"]').classList.remove("hidden")}vt(".zenith_card").forEach((t=>t.addEventListener("click",(()=>{if(t.__skipClicks)t.__skipClicks=!1;else if("duo"!==t.dataset.card||!t.classList.contains("active")||t.classList.contains("forceoff")||xt("zenith_party_other").classList.contains("empty")||e){if(t.classList.contains("active")||!t.classList.contains("supporterlock")||_.zenith_duoisfree||!Ti())return t.classList.contains("active")||!t.classList.contains("floorlocked")&&!t.classList.contains("locked")?void(t.classList.contains("active")?t.classList.contains("reversed")?a():function(e){e.classList.remove("active"),xa.SePlay(`card_slide_${Math.floor(4*Math.random())+1}`),"duo"===e.dataset.card&&Ja.emit("party.leave");l()}(t):function(e){xt("zenithmenu").classList.contains("reversed")&&a();e.classList.add("active"),e.__timeout&&(clearTimeout(e.__timeout),e.classList.remove("spin"),e.getBoundingClientRect());e.classList.add("spin"),e.__timeout=setTimeout((()=>{e.classList.remove("spin"),e.__timeout=null}),250),xa.SePlay("card_select"),xa.SePlay(`card_tone_${e.dataset.card}`),"duo"===e.dataset.card&&(xt("zenith_party_ready_label").textContent="READY",xt("zenith_party_ready").classList.remove("ready"),xt("zenith_party_self").classList.remove("ready"));l()}(t)):(t.__timeout&&(clearTimeout(t.__timeout),At(`.zenith_deck_info[data-for="${t.dataset.card}_locked"]`).classList.remove("ping"),t.getBoundingClientRect()),At(`.zenith_deck_info[data-for="${t.dataset.card}_locked"]`).classList.add("ping"),t.__timeout=setTimeout((()=>{At(`.zenith_deck_info[data-for="${t.dataset.card}_locked"]`).classList.remove("ping"),t.__timeout=null}),500),void xa.SePlay("no"));xa.SePlay("no")}else _n({title:"DISABLE THE DUO MOD?",msg:"are you sure you wish to leave your party?",buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"LEAVE PARTY",classes:["pri"],callback:t=>{e=!0,xt("zenith-duo-card").click(),e=!1,t()}}]})})))),n(),xt("zenith_deck_cards").addEventListener("mouseover",(e=>{e.target===xt("zenith_deck_cards")&&n()})),vt(".zenith_card").forEach((e=>e.addEventListener("mouseenter",(()=>{t(e)})))),xt("zenith_deck_cards").addEventListener("mouseenter",n),xt("zenith_deck_cards").addEventListener("mouseleave",n),vt(".zenith_card").forEach((e=>e.__rgBlur=()=>{n()})),vt(".zenith_card").forEach((e=>e.__rgFocus=()=>{t(e)})),vt(".zenith_card").forEach((e=>e.addEventListener("mousedown",(t=>{if(e.classList.contains("reversed")||!e.classList.contains("reversable")||!w.allowedReverseCards.includes(e.dataset.card))return;if(xt("zenithmenu").classList.contains("duo"))return;if(0!==t.button||e.__dispatched)return;e.__dispatched=!0,e.__holding=!0,e.classList.add("holding");const n=()=>{e.__holding&&(e.__dispatched=!1,e.__holding=!1,e.removeEventListener("mouseout",s),e.removeEventListener("mouseover",o),window.removeEventListener("mouseup",a),e.classList.remove("holding"),e.__skipClicks=!0,i(e))};e.__holdTimeout=setTimeout(n,500);const s=t=>{e.__holding&&(e.__holding=!1,clearTimeout(e.__holdTimeout),e.classList.remove("holding"))},o=t=>{e.__holding||(e.__holding=!0,e.__holdTimeout=setTimeout(n,500),e.classList.add("holding"))},a=t=>{e.__holding&&e.classList.remove("holding"),e.__holding=!1,e.__dispatched=!1,clearTimeout(e.__holdTimeout),e.removeEventListener("mouseout",s),e.removeEventListener("mouseover",o),window.removeEventListener("mouseup",a)};e.addEventListener("mouseout",s),e.addEventListener("mouseover",o),window.addEventListener("mouseup",a)})))),vt(".zenith_card").forEach((e=>e.__rgClick=()=>{const t=e.classList.contains("reversed")||!e.classList.contains("reversable")||!w.allowedReverseCards.includes(e.dataset.card)||xt("zenithmenu").classList.contains("duo");if(e.__dispatched)return;e.__dispatched=!0,e.__holding=!0,t||e.classList.add("holding");const n=()=>{e.__holding&&(e.__dispatched=!1,e.__holding=!1,clearTimeout(e.__holdTimeout),window.removeEventListener("keyup",n),document.removeEventListener("gpup",n),e.classList.remove("holding"),e.click())},s=()=>{e.__holding&&(e.__dispatched=!1,e.__holding=!1,window.removeEventListener("keyup",n),document.removeEventListener("gpup",n),e.classList.remove("holding"),i(e))};t||(e.__holdTimeout=setTimeout(s,500)),e.__rgBlur=()=>{e.__holding&&(e.__holding=!1,e.__dispatched=!1,clearTimeout(e.__holdTimeout),e.classList.remove("holding"),window.removeEventListener("keyup",n),document.removeEventListener("gpup",n))},window.addEventListener("keyup",n),document.addEventListener("gpup",n)}));let s=0;function i(e){vt(".zenith_card").forEach((e=>{e.classList.remove("active"),e.classList.add("reversehide"),e.classList.remove("rg_zenith_card"),e.__revUpsellTimeout&&clearTimeout(e.__revUpsellTimeout)})),xt("zenith_deck_tryhold").classList.remove("visible"),e.classList.remove("reversehide"),e.classList.add("rg_zenith_card"),e.classList.add("active"),e.classList.add("reversed"),e.__timeout&&(clearTimeout(e.__timeout),e.classList.remove("reversespin"),e.getBoundingClientRect()),e.classList.add("reversespin"),e.__timeout=setTimeout((()=>{e.classList.remove("reversespin"),e.__timeout=null,xt("zenithmenu").classList.contains("reversed")&&(xa.SePlay("card_reverse_impact"),document.body.classList.add("zenith_reversed"))}),500),s=performance.now(),o.Ticker.shared.add(r),xa.SePlay("card_select_reverse"),xa.SePlay(`card_tone_${e.dataset.card}_reverse`),function(){xt("zenithmenu").classList.add("reversed"),xt("zenith_deck_reset").classList.remove("rg_target_pri");const e=At(".zenith_card.active.reversed").dataset.card;xa.BgmDynSetParam(fa.IS_REVERSE,ba.TRUE),xa.BgmDynSetParam(fa.IS_EXPERT,Ca("expert"===e)),xt("zenithmenu").classList.toggle("expert","expert"===e),xt("start_zenith").classList.add("nomods");const t=c[e];xt("zenith_deck_reversename").innerHTML=[...t[0]].map(((e,t)=>" "===e?'<span class="zsrnsp"></span>':`<span class="zsrnc" style="--i: ${t}; --sa: ${1+4*Math.random()}s; --sb: ${-25*Math.random()}s;"><span>${e}</span></span>`)).join(""),xt("zenith_deck_reversesubtext").innerHTML=t[1],"zenith"===xt("menus").dataset.menuType&&(xt("header_text").textContent="expert"===e?"EXPERT QUICK PLAY":"QUICK PLAY",xt("footer_text").textContent="overthrow the tower!")}()}function a(){vt(".zenith_card").forEach((e=>{e.classList.remove("active"),e.classList.remove("reversehide"),e.classList.add("rg_zenith_card"),e.classList.remove("reversed"),e.classList.remove("reversespin")})),xa.SePlay(`card_slide_${Math.floor(4*Math.random())+1}`),o.Ticker.shared.remove(r),l()}function r(){if(document.body.classList.contains("ingame")||!document.body.classList.contains("inzenith"))return;const e=(performance.now()-s)/1e3;let t=0,n=0,i=0;e<.5?t=0:e>.5&&e<.7?t=(e-.5)/.2:e<1.5&&(t=(1.5-e)/.8),n=t;const o=e-.08;o<.5?i=0:o>.5&&o<.7?i=(o-.5)/.2:o<1.5&&(i=(1.5-o)/.8);const a=xa.BgmDynGetTiming();let r=0;r=a&&4===a.beatsPerBar?(a.currentBeatInBar+a.progressToNextBeat)/a.beatsPerBar:e%1.30434782609/1.30434782609;const l=Math.min(1,Math.max(0,(e-.6)/2));t+=r<.1?l*(.1+5*r):r<.7?l*(.7-r):r<.85?l*(2*(r-.7)):l*(.1+(1-r)/.15*.2);let c=r+.03;c>=1&&(c-=1),n+=c<.2?l*(4*c):l*(1-c);let p=r-.05;p<0&&(p+=1),i+=p<.2?l*(4*p):l*(1-p),At(".zenith_card.reversed .zenith_card_throb").style.setProperty("--throb-card",t),xt("zenith_card_shatter_throb_a").style.setProperty("--throb-a",n),xt("zenith_card_shatter_throb_b").style.setProperty("--throb-b",i)}function l(){xt("zenithmenu").classList.remove("reversed"),document.body.classList.remove("zenith_reversed"),xt("zenith_deck_reset").classList.add("rg_target_pri");const e={invisible:["INVISIBLE ","INVISIBILITY "],messy:["MESSY ","MESSINESS "],volatile:["VOLATILE ","VOLATILITY "],nohold:["HOLDLESS ","NO HOLD "],doublehole:["DOUBLE HOLE ","DOUBLE HOLE "],allspin:["ALL-SPIN ","ALL-SPIN "],gravity:["GRAVITY ","GRAVITY "],expert:["EXPERT ","EXPERT "],duo:["DUO ","DUO "]},t=[];for(const n of Object.keys(e))At(`.zenith_card.active[data-card="${n}"]`)&&t.push(n);let n="";for(let s=0;s<t.length;s++)n+=e[t[s]][s===t.length-1?1:0];const s=["expert","doublehole","volatile","gravity","nohold","messy","invisible","allspin"];switch(t.toString()){case"nohold,gravity":n='"A MODERN CLASSIC"';break;case"messy,nohold,doublehole":n='"DEADLOCK"';break;case"messy,doublehole,allspin":n='"THE ESCAPE ARTIST"';break;case"invisible,gravity":n='"THE GRANDMASTER"';break;case"nohold,doublehole,expert":n='"EMPEROR\'S DECADENCE"';break;case"messy,volatile,doublehole,expert":n='"DIVINE MASTERY"';break;case"nohold,allspin":n='"THE STARVING ARTIST"';break;case"volatile,allspin,expert":n='"THE CON ARTIST"'}t.every((e=>s.includes(e)))&&s.every((e=>t.includes(e)))&&(n='"SWAMP WATER"'),t.every((e=>s.includes(e)))&&7===t.filter((e=>s.includes(e))).length&&(n='"SWAMP WATER LITE"'),n=n.trim(),n.length>60&&(n=n.toLowerCase()),n&&(xt("start_zenith_mods").textContent=n,xt("zenith_party_ready_mods").textContent=n),xt("start_zenith").classList.toggle("nomods",!n),xt("zenithmenu").classList.toggle("expert",t.includes("expert")),xt("zenithmenu").classList.toggle("duo",t.includes("duo")),xa.BgmDynSetParam(fa.IS_REVERSE,ba.FALSE),xa.BgmDynSetParam(fa.IS_EXPERT,Ca(t.includes("expert"))),t.includes("duo")&&Ja.emit("party.sync",{[bn.id()]:{mods:t}}),"zenith"===xt("menus").dataset.menuType&&(xt("header_text").textContent=t.includes("expert")?"EXPERT QUICK PLAY":"QUICK PLAY",xt("footer_text").textContent=t.includes("expert")?"challenge the tower!":"scale the tower!")}const c={expert:["THE TYRANT","fear, oppression, and limitless ambition"],nohold:["ASCETICISM","a detachment from even that which is moderate"],messy:["LOADED DICE","in a rigged game, your mind is the only fair advantage"],gravity:["FREEFALL","the ground you stood on never existed in the first place"],volatile:["LAST STAND","strength isn't necessary for those with nothing to lose"],doublehole:["DAMNATION","neither the freedom of life or peace of death"],invisible:["THE EXILE","never underestimate blind faith"],allspin:["THE WARLOCK","into realms beyond heaven and earth"]};xt("zenith_deck_reset").addEventListener("click",(function(e){let t=vt('.zenith_card.active:not([data-card="duo"])').length;vt('.zenith_card.active:not([data-card="duo"])').forEach((e=>setTimeout((()=>{e.click()}),30*--t)))})),xt("zenith_party_other").addEventListener("click",(function(e){xt("zenith_party_other").classList.contains("empty")&&(wr(),Fr(),xt("social").classList.add("blinkinvite"),setTimeout((()=>xt("social").classList.remove("blinkinvite")),1500))})),xt("zenith_party_ready").addEventListener("click",(function(e){Ja.emit("party.ready",!xt("zenith_party_ready").classList.contains("ready")),xt("zenith_party_ready_label").textContent=xt("zenith_party_ready").classList.contains("ready")?"READY":"WAITING",xt("zenith_party_ready").classList.toggle("ready"),xt("zenith_party_self").classList.toggle("ready")})),xt("tweetreplay_zenith").addEventListener("click",(function(){if(!er||!er.lastZenith)return;const{record:e,ally:t,submitted:n}=er.lastZenith;let s="",i=e.results.stats.zenith.altitude;const o=e.extras.zenith.mods??[],a=(o.includes("expert")||o.includes("expert_reversed"))&&!t,r=o.filter((e=>"duo"!==e&&(t||"expert"!==e)));t?(s=`Me and ${xt("zenith_party_other_username").textContent.toUpperCase()}`,i=Math.max(i,t.stats.zenith.altitude)):s="I",s+=` just achieved an altitude of ${Math.floor(i).toLocaleString("en-US")}.${Math.floor(i%1*10)}m playing TETR.IO ${w.Strings.longTypeNames[a?"zenithex":"zenith"]}`,r.length&&(s+=` (${r.map((e=>w.Strings.zenithModsShort[e]??"?")).join(",")})`),s+="!",n&&(s+=`\n\nhttps://${_.domain}/#R:${e.replayid}`),Gs(`https://x.com/intent/tweet?text=${encodeURIComponent(s)}`,"_blank","menubar=0,toolbar=0,location=0,personalbar=0,status=0,noopener=1,width=640,height=480")})),xt("chatreplay_zenith").addEventListener("click",(function(e){xt("chatreplay_zenith").classList.contains("sent")||(Ja.emit("room.chat.game"),xt("chatreplay_zenith").classList.add("sent"))}))}));const Ja=Ta();let er=null,tr=!1,nr=[],sr=null,ir=!1,or=!1,ar=null;const rr=new C(Math.floor(2147483646*Math.random()+1)),lr=(()=>{const e=[[0,90,255],[255,0,0],[120,255,0],[255,204,0],[192,0,255],[0,255,174],[255,138,0],[255,0,240]],t=[118,129,153],n=new Map,s={room_chat:new Set,ingame_chat:new Set,league_chat:new Set};let i,o="lobby",r=null,l=null,c=!1,p=!1,h=!1,d=[],u=!1,m=null,g=!1;function f(){I(),Q=!1,J=!1,Z=0,document.body.classList.remove("innormalmulti"),document.body.classList.remove("inzenith"),ei(!0),xt("menus").classList.remove("lite"),c=!1,i=null,o="lobby",n.clear()}function b(e){if(!tr)return e;const t=er.games;for(const n of e){n.shadows=[];const e=t.getInfoByID(n.gameid),s=t.get(n.gameid);if(e){if(n.id=e.userid,n.username=e.username,n.mods=s?s.options.zenith_mods:[],n.allies.length)for(const e of n.allies){const s=t.getInfoByID(e);s?n.shadows.push([s.userid,s.username]):console.warn("Failed to fetch ally gameid",e,n)}}else n.id="UNKNOWN",n.username="UNKNOWN",n.mods=[],console.warn("Failed to fetch gameid",n.gameid,n)}return e}Ja.on("room.join",(({id:e,banner:t,silent:s})=>{ar=e,c=!0,o="lobby",r=null,l=null,n.clear(),Q=!1,J="X-QP"===e,Z=0,h=!1,g=!1,j();let i="Welcome to chat! Please remember to be civil to your opponents.";"X-QP"===e&&(i="Welcome to Quick Play chat! Please remember to be civil to your opponents - chat is actively monitored.\n\nThis chat is linked with [our Discord server](https://discord.gg/tetrio)."),e.startsWith("MM-")&&(i="Please remember to be civil to your opponent.",Ja.emit("league.ready",2));const a=t??{content:i,banner:!0};if(a.markdown=!0,ie(a),u=s,!u){if("X-QP"===e)return Zi(),xe(),document.body.classList.add("inzenith"),xt("menus").classList.add("lite"),Hi("zenith",!0),xt("zenith_party_ready_label").textContent="READY",xt("zenith_party_ready").classList.remove("ready"),void xt("zenith_party_self").classList.remove("ready");Zi(),Ki(),Hi("lobby",!0)}})),Ja.on("room.leave",(()=>{ir||(Zi(),Ki(),Hi("playmulti",!0)),ir=!1,f()})),Ja.on("room.update",(e=>{if(i=e,i.playerCache=new Map,i.players.forEach((e=>i.playerCache.set(e._id,e))),"match"!==e.type){switch(ll("online",o,e.public||"X-ROYALE"===e.id?e.id:"X-PRIV"),e.id){case"X-QP":Wt("Quick Play"),Vs.setPage("/ingame/zenith");break;case"X-ROYALE":Wt("Royale"),Vs.setPage("/ingame/multi");break;default:Wt(e.public?"Public Room":"Private Room"),Vs.setPage("/ingame/multi")}document.body.classList.add("innormalmulti")}else document.body.classList.remove("innormalmulti");const t=[];for(const n of e.bgmList){const e=new ua(n);t.push(xa.HOOK_LoadBgmFromUrl(n.id,e))}null!=e.lobbybg&&ni(e.lobbybg),e.allowChat||g?e.allowChat&&g&&(g=!1,ie({content:"Chat has been enabled.",banner:!0})):(g=!0,q(),ie({content:"match"===e.type?"Chat is not available this game, either because a player has disabled it or due to an active ban on a player's account.":"Chat has been disabled.",banner:!0,markdown:!0})),K(e),Promise.all(t).then((()=>{i?.id===e.id&&(te(i),r===e.lobbybgm||document.body.classList.contains("multiplexed")||u?document.body.classList.contains("multiplexed")&&l!==i.gamebgm&&!u&&xa.BgmPlaySmoothlyWithRandom(i.gamebgm)?.catch():xa.BgmPlaySmoothly(i.lobbybgm)?.catch(),r=i.lobbybgm,l=i.gamebgm)}))})),Ja.on("room.update.bracket",(({uid:e,bracket:t})=>{if(i){for(let n=0;n<i.players.length;n++)i.players[n]._id===e&&(i.players[n].bracket=t);ee(i)}})),Ja.on("room.update.host",(e=>{if(!i)return;const t=i.owner;i.owner=e,V(i),ee(i),t!=bn.id()&&e!=bn.id()||(I(),te(i))})),Ja.on("room.update.auto",(e=>{i&&(i.auto=e,V(i))})),Ja.on("room.update.supporter",(e=>{if(i){for(let t=0;t<i.players.length;t++)i.players[t]._id===e&&(i.players[t].supporter=!0);ee(i)}})),Ja.on("room.player.add",(e=>{i&&(i.players.push(e),i.playerCache.set(e._id,e),ee(i,!0))})),Ja.on("room.player.remove",(e=>{i&&(i.players=i.players.filter((t=>t._id!==e)),ee(i,!0))})),Ja.on("room.kick",(e=>{const{title:t,msg:s}={hostban:{title:"BANNED BY ROOM OWNER",msg:"you were banned from the room by its owner."},hostkick:{title:"KICKED BY ROOM OWNER",msg:"you were kicked from the room by its owner."},reconnect:{title:"CLIENT REPLACED",msg:"you joined this room on another client, replacing this one."}}[e];_n({title:t,classes:["noclickout"],msg:`${s}${Ja.getConnectionDialogString()}`,buttons:[{label:"OK",classes:[],callback:e=>{e(),Zi(),Ki(),Hi("home",!0),Wi(!0)}}]}),er?.End(),I(),lr.dropMultiplex(),Ys.stopNow(),Ni(),Q=!1,J=!1,Z=0,document.body.classList.remove("innormalmulti"),document.body.classList.remove("inzenith"),ei(!0),xt("menus").classList.remove("lite"),c=!1,i=null,o="lobby",n.clear(),Yi()})),Ja.on("room.chat",(e=>{ie(e),!e.system&&e.user?.username&&n.set(e.user.username,(n.get(e.user.username)||0)+1)})),Ja.on("room.chat.gift",(({sender:e,target:t,months:n})=>{ie({content:`<span style="color: #FFF; cursor: pointer; font-weight: 900;" class="tetra_pop" data-username="${e}">${e.toUpperCase()}</span> just gifted <b>${n} month${1===n?"":"s"}</b> of TETR.IO Supporter to <span style="color: #FFF; cursor: pointer; font-weight: 900;" class="tetra_pop" data-username="${t}">${t.toUpperCase()}</span>!`,banner:!0,banner_color:"#FF4800DD",banner_img:"/res/supporter-icon-alpha.png"},!0)})),Ja.on("room.chat.delete",(({uid:e,purge:t})=>{oe(e,t)})),Ja.on("room.chat.clear",q),Ja.on("game.ready",(({players:e,isNew:t})=>{if(p=!e.some((e=>e.userid===bn.id())),t||!p||h){if(tr=!0,document.body.classList.contains("inmultizen")&&Ys.stopNow(),t){nr=[],document.body.classList.add("inmulti"),xt("leaveroom").classList.add("hidden"),h=!0,Ki();Ho(!1!==ot.video.chatfilter&&i.name_safe?i.name_safe:i.name,"The game is starting!"),Ro.alert("Game starting!",3,500),ae(),"TETRA LEAGUE"===i.name&&"match"===i.type?(ll("busy","tl",""),Wt("Tetra League"),Vs.setPage("/ingame/league")):ll("online","lobby_ig",i.public?i.id:"X-PRIV")}er=new ja(Ja.socket(),i),er.SetPlayers(e,!p)}})),Ja.on("game.start",(async()=>{if(er&&tr&&(Wi(!1),document.body.classList.add("multiplexed"),Vs.setAlternate("multiplayer-game"),"chat_input"===document.activeElement?.id&&xt("ingame_chat_input").focus(),document.body.classList.contains("multi_advancing")||(xa.BgmFadeOut(),null!=i.lobbybg?ni(i.lobbybg):ei()),await er.Start(),document.body.classList.contains("multiplexed")&&!document.body.classList.contains("multi_advancing")))try{await xa.BgmPlaySmoothlyWithRandom(i.gamebgm)}catch{}})),Ja.on("game.spectate",(async({players:e,match:t})=>{if(!tr){t.rrb.scoreboard instanceof Pe&&(t.rrb.scoreboard=t.rrb.scoreboard.sb),xt("leaveroom").classList.add("hidden"),document.body.classList.add("inmulti"),document.body.classList.add("multiplexed"),Vs.setAlternate("multiplayer-game"),Ki(),Wi(!1),tr=!0,p=!0,h=!0,er=new ja(Ja.socket(),i),er.SetPlayers(e,!1),me(t),_e(!0),"TETRA LEAGUE"===i.name&&"match"===i.type?ll("busy","tl",""):ll("online","lobby_spec",i.public?i.id:"X-PRIV"),await er.Start(!0);try{await xa.BgmPlaySmoothlyWithRandom(i.gamebgm)}catch{}}})),Ja.on("game.match",(e=>{tr&&(me(e),_e(!0))})),Ja.on("game.match.score",(({sb:e})=>{tr&&d&&d.rrb&&("zenith"===d.rrb.type&&b(e),d.rrb.scoreboard=e,ge(d),er.SetScoreboard(e))})),Ja.on("game.advance",(({scoreboard:e})=>{er&&tr&&(er.Stop(e),setTimeout((()=>{for(const t of e)for(const e of er.replays)if(e.options.username===t.username){t.replay=e;break}nr.push(e)}),1e3),Di("gameshort","FINISH!"),document.body.classList.add("multi_advancing"))})),Ja.on("game.abort",(()=>{er&&tr&&(tr=!1,xt("victory_stats").innerHTML="",xt("playerresults").innerHTML="",xt("leaveroom").classList.remove("hidden"),document.body.classList.remove("multiplexed"),document.body.classList.remove("inmulti"),document.body.classList.remove("multi_advancing"),xt("waitstate").classList.contains("hidden")||(xa.BgmSetLowPass(!1),xt("waitstate").classList.add("hiding"),setTimeout((()=>{xt("waitstate").classList.add("hidden")}),500)),xa.BgmFadeOut(),_e(!1),Di("game","ABORTED!"),Il.destroyAll(),er.Abort(),Ys.setUnsafeTimeout((()=>{Wi(!0),Hi("lobby"),xa.BgmPlaySmoothly(i?.lobbybgm??r)}),3e3),o="lobby_end",ll("online",o,i.public?i.id:"X-PRIV"))})),Ja.on("game.end",(({leaderboard:e,scoreboard:t,xpPerUser:n,leaguedata:s})=>{if((!er||!tr)&&xt("waitstate").classList.contains("hidden"))return;tr=!1,document.body.classList.remove("multiplexed"),document.body.classList.remove("multi_advancing"),xt("waitstate").classList.contains("hidden")||(xa.BgmSetLowPass(!1),xa.SePlay("finish"),xt("waitstate").classList.add("hiding"),setTimeout((()=>{xt("waitstate").classList.add("hidden")}),500)),xa.BgmFadeOut(),er&&(er.Stop(t),setTimeout((()=>{for(const e of t)for(const t of er.replays)if(t.options.username===e.username){e.replay=t;break}nr.push(t)}),1e3),sr=new L({users:e.map((e=>({id:e.id,username:e.username,avatar_revision:0,banner_revision:0,flags:0,country:null}))),replay:{leaderboard:e,rounds:nr}})),_e(!1),Di("game","GAME!"),"TETRA LEAGUE"===i.name?ll("busy","tl_end",""):(o="lobby_end",ll("online",o,i.public?i.id:"X-PRIV")),xt("leaveroom").classList.remove("hidden"),xt("victory_stats").innerHTML="",xt("playerresults").innerHTML="";let a=1,r=!1,l=!1,c=!1;const h=!e[0].active,d=1===i.match.ft&&1===i.match.wb;if((d?t:e).forEach((t=>{let n="";if(d)if(1===a)n="SURVIVOR";else{const e=wt(t.lifetime);n=`${e.m}:${e.s}.${e.ms}`}else n=`${t.wins} <span>POINT${1===t.wins?"":"S"}</span>`;const s=`${e.length>2?`<span>${t.stats.kills.toLocaleString("en-us")}</span> ko's &bull; `:""}<span>${t.stats.garbagesent.toLocaleString("en-us")}</span> sent &bull; <span>${t.stats.garbagereceived.toLocaleString("en-us")}</span> received`,i=Number.isNaN(t.stats.apm)?"NO STATS AVAILABLE":`<span>${t.stats.apm.toFixed(2)}</span> APM &bull; <span>${t.stats.pps.toFixed(2)}</span> PPS &bull; <span>${t.stats.vsscore.toFixed(2)}</span> VS`;if(t.id==bn.id()){if(c=!0,xt("finalplace").innerHTML=a,1===a&&t.active&&(r=!0),d){if(1!==a){const e=wt(t.lifetime);ce(xt("victory_stats"),"TIME SURVIVED",`${e.m}:${e.s}.${e.ms}`)}}else ce(xt("victory_stats"),"POINTS",t.wins.toLocaleString("en-us"));e.length>2&&ce(xt("victory_stats"),"KO'S",t.stats.kills.toLocaleString("en-us")),ce(xt("victory_stats"),"LINES SENT",t.stats.garbagesent.toLocaleString("en-us")),ce(xt("victory_stats"),"LINES RECEIVED",t.stats.garbagereceived.toLocaleString("en-us")),ce(xt("victory_stats"),"ATTACK per MINUTE",t.stats.apm.toFixed(2)),ce(xt("victory_stats"),"PIECES per SECOND",t.stats.pps.toFixed(2)),ce(xt("victory_stats"),"VERSUS SCORE",t.stats.vsscore.toFixed(2)),At("#leagueplayer_self").setAttribute("data-username",t.username),At("#leagueplayer_self .leagueplayer_name").textContent=t.username.toUpperCase(),At("#leagueplayer_self .leagueplayer_count").textContent=t.wins,At("#leagueplayer_self .leagueplayer_extra").innerHTML=i,At("#leagueplayer_self").classList.toggle("disconnected",!t.active)}else l||(l=!0,At("#leagueplayer_opponent").setAttribute("data-username",t.username),At("#leagueplayer_opponent .leagueplayer_name").textContent=t.username.toUpperCase(),At("#leagueplayer_opponent .leagueplayer_count").textContent=t.wins,At("#leagueplayer_opponent .leagueplayer_extra").innerHTML=i,At("#leagueplayer_opponent").classList.toggle("disconnected",!t.active));le(a,1===a&&t.active,t.id,t.username,n,s,i,t.active),a++})),s)return r&&xa.SePlay("applause"),xt("replayid_endleague").innerHTML=`R:${s.replayid}`,s[bn.id()]?s[bn.id()].gamesplayed>10?(xt("league_rating").innerHTML=`${Math.round(s[bn.id()].tr)}<span>TR</span>`,xt("league_rating").title=s[bn.id()].tr,xt("league_rank").src=`/res/league-ranks/${s[bn.id()].rank}.png`,xt("league_rank").classList.remove("hidden"),xt("league_warning").classList.toggle("hidden","z"!==s[bn.id()].rank),xt("me_leaguerank").classList.toggle("hidden","z"===s[bn.id()].rank),xt("me_leaguerank").src=`/res/league-ranks/${s[bn.id()].rank}.png`,xt("leaguestanding_rank").classList.remove("hidden"),xt("league_ticker").innerHTML=`glicko: <span title="Your raw rating in the Glicko-2 system. Higher is better.">${s[bn.id()].glicko}</span><span title="How uncertain the Glicko-2 system is of your rating. Lower is better.">${s[bn.id()].rd}</span> - games won: <span>${s[bn.id()].gameswon}</span> / ${s[bn.id()].gamesplayed} (<span>${Math.floor(s[bn.id()].gameswon/s[bn.id()].gamesplayed*1e4)/100}</span>%)`,xt("league_placement").classList.toggle("hidden",-1===s[bn.id()].placement),xt("league_placement").innerHTML=`#<span>${s[bn.id()].placement}</span>`,xt("league_placement").classList.toggle("t100",s[bn.id()].placement>10&&s[bn.id()].placement<=100),xt("league_placement").classList.toggle("t10",s[bn.id()].placement>1&&s[bn.id()].placement<=10),xt("league_placement").classList.toggle("t1",1===s[bn.id()].placement),xt("leaguestanding_placement").classList.toggle("hidden",-1===wi||-1===s[bn.id()].placement),xt("leaguestanding_placement").innerHTML=`#<span>${wi}</span>`,xt("leaguestanding_placement").classList.toggle("t100",wi>10&&wi<=100),xt("leaguestanding_placement").classList.toggle("t10",wi>1&&wi<=10),xt("leaguestanding_placement").classList.toggle("t1",1===wi),Fe(s[bn.id()].rank),Be(),Math.round(s[bn.id()].tr)>Math.round(vi)?(setTimeout((()=>{xt("leaguestanding_rating").classList.add("pingraise"),we(Math.round(s[bn.id()].tr),120),xa.SePlay("ratingraise")}),1e4),setTimeout((()=>{ze(s[bn.id()].rank)}),13e3)):Math.round(s[bn.id()].tr)<Math.round(vi)?(setTimeout((()=>{xt("leaguestanding_rating").classList.add("pinglower"),we(Math.round(s[bn.id()].tr),120),xa.SePlay("ratinglower")}),1e4),setTimeout((()=>{ze(s[bn.id()].rank)}),13e3)):setTimeout((()=>{ze(s[bn.id()].rank)}),1e4),Se(),setTimeout((()=>{Le(s[bn.id()].placement,120)}),1e4)):10===s[bn.id()].gamesplayed?(xt("league_rating").innerHTML=`${Math.round(s[bn.id()].tr)}<span>TR</span>`,xt("league_rating").title=s[bn.id()].tr,xt("league_rank").src=`/res/league-ranks/${s[bn.id()].rank}.png`,xt("league_rank").classList.remove("hidden"),xt("leaguestanding_rank").classList.remove("hidden"),xt("me_leaguerank").classList.toggle("hidden","z"===s[bn.id()].rank),xt("me_leaguerank").src=`/res/league-ranks/${s[bn.id()].rank}.png`,xt("league_warning").classList.toggle("hidden","z"!==s[bn.id()].rank),xt("leaguestanding_placement").classList.add("hidden"),xt("league_ticker").innerHTML=`glicko: <span title="Your raw rating in the Glicko-2 system. Higher is better.">${s[bn.id()].glicko}</span><span title="How uncertain the Glicko-2 system is of your rating. Lower is better.">${s[bn.id()].rd}</span> - games won: <span>${s[bn.id()].gameswon}</span> / ${s[bn.id()].gamesplayed} (<span>${Math.floor(s[bn.id()].gameswon/s[bn.id()].gamesplayed*1e4)/100}</span>%)`,setTimeout((()=>{xt("leaguestanding_rating").innerHTML=`${s[bn.id()].gamesplayed}<span>/10 rating games played</span>`,xt("leaguestanding_rating").classList.add("pingfinal"),xa.SePlay("showscore")}),1e4),setTimeout((()=>{we(Math.round(s[bn.id()].tr),120),xa.SePlay("ratingraise")}),11140),setTimeout((()=>{ze(s[bn.id()].rank)}),13140)):_.league_season.ranked?(xt("league_rating").innerHTML=`${s[bn.id()].gamesplayed}<span>/10 rating games played</span>`,xt("league_rank").classList.add("hidden"),xt("leaguestanding_rank").classList.add("hidden"),xt("league_warning").classList.add("hidden"),xt("me_leaguerank").classList.add("hidden"),xt("league_ticker").innerHTML="play rating games to receive a rating",xt("leaguestanding_placement").classList.add("hidden"),setTimeout((()=>{xt("leaguestanding_rating").innerHTML=`${s[bn.id()].gamesplayed}<span>/10 rating games played</span>`,xt("leaguestanding_rating").classList.add("pingrating"),xa.SePlay("showscore")}),1e4)):(xt("league_ticker").innerHTML=`${s[bn.id()].gameswon} GAME${1===s[bn.id()].gameswon?"":"S"} WON`,xt("leaguestanding_rank").classList.add("hidden"),xt("leaguestanding_placement").classList.add("hidden"),r&&setTimeout((()=>{xt("leaguestanding_rating").innerHTML=`${s[bn.id()].gameswon}<span> game${1===s[bn.id()].gameswon?"":"s"} won</span>`,xt("leaguestanding_rating").classList.add("pingrating"),xa.SePlay("showscore")}),1e4)):(console.error(`Received endleague data, but our ID (${bn.id()}) is missing.`),console.error(Object.keys(s))),setTimeout((()=>{Il.destroyAll(),document.body.classList.toggle("league_victory",r&&!h),xt("leagueresult").innerHTML=h?"NO CONTEST":r?"VICTORY":"DEFEAT",h?(Di("lg_nocontest","NO CONTEST"),xa.BgmPlaySmoothly("in-sorrow-and-pains",0)):r?(Di("lg_victory","VICTORY"),xa.BgmPlaySmoothly("asayake-no-taiyou",0),setTimeout((()=>{document.body.classList.add("shaking"),xl.play("bgcircle",{amt:300,speed:300})}),1250),setTimeout((()=>{document.body.classList.remove("shaking")}),1350)):(Di("lg_defeat","DEFEAT"),xa.BgmPlaySmoothly("in-sorrow-and-pains",0))}),3e3),void setTimeout((()=>{Wi(!0),Hi("endleague"),document.activeElement&&"ingame_chat_input"===document.activeElement.id&&xt("league_chat_input").focus(),p||Sn(n+(r?100:0)),document.body.classList.remove("inmulti"),document.body.classList.remove("inpair")}),8e3);Ys.setUnsafeTimeout((()=>{let n="";if(d){const e=wt(t[0].lifetime);n=`ALIVE FOR ${e.m}:${e.s}.${e.ms}`}else n=2===e.length?`${e[0].wins} - ${e[1].wins} POINTS`:`${e[0].wins} POINT${1===e[0].wins?"":"S"}`;let s=i.match.modename;1!=i.match.ft&&(s+=` FT${i.match.ft}${1!=i.match.wb?`+${i.match.wb}${i.match.gp?`(${i.match.gp})`:""}`:""}`),Il.destroyAll(),"practice"===i.match.gamemode||h||re(e[0].username.toUpperCase(),n,s,!1)}),3e3),Ys.setUnsafeTimeout((()=>{Wi(!0),Hi("victory"),p||Sn(n+(r?100:0)),xt("ownstats").classList.toggle("hidden",!c),xt("victory_downloadreplay").classList.toggle("hidden","practice"===i.match.gamemode||2!==sr?.users?.length||!ot.video.sidebyside&&(ot.video.alwaystiny||"minimal"===ot.video.graphics)),document.body.classList.remove("inmulti")}),"practice"===i.match.gamemode||h?3e3:8e3)})),Ja.on("game.submit",(e=>{if(e.remote||!er||!tr)return e.xp&&Sn(e.xp),e.stats&&Ys.setZenithStats(e.stats),void(e.submitted&&Qt({msg:"your interrupted game has been submitted",color:"#4c85ff",icon:"disconnect-change",timeout:1e4}));er.HasSubmitted(e)})),Ja.on("game.score",(({scoreboard:e,match:t})=>{tr&&setTimeout((()=>{be(e,t)}),1500)})),Ja.on("game.waitstate",(({leaderboard:e,next:t,time:n,action:s})=>{if(!tr&&!document.body.classList.contains("inpair"))return;e[1].id===bn.id()&&e.reverse();const o=()=>{if(xa.BgmSetLowPass(!0),_e(!1),xt("waitstate").classList.remove("hidden","hiding"),xt("waitstate").classList.add("appearing"),setTimeout((()=>xt("waitstate").classList.remove("appearing")),5e3),xt("waitstate_a").classList.toggle("disconnected",!e[0].active),xt("waitstate_b").classList.toggle("disconnected",!e[1].active),xt("waitstate_a_desc").textContent=e[0].active?"":"Disconnected",xt("waitstate_b_desc").textContent=e[1].active?"":"Disconnected",xt("waitstate_a_score").textContent=e[0].wins,xt("waitstate_b_score").textContent=e[1].wins,xt("waitstate_a_username").textContent=e[0].username.toUpperCase(),xt("waitstate_b_username").textContent=e[1].username.toUpperCase(),i.playerCache.has(e[0].id)){const t=i.playerCache.get(e[0].id);xt("waitstate_a_avatar").src="anon"===t.role?"/res/avatar.png":t.avatar_revision?`/user-content/avatars/${t._id}.jpg?rv=${t.avatar_revision}`:Ot(t._id)}if(i.playerCache.has(e[1].id)){const t=i.playerCache.get(e[1].id);xt("waitstate_b_avatar").src="anon"===t.role?"/res/avatar.png":t.avatar_revision?`/user-content/avatars/${t._id}.jpg?rv=${t.avatar_revision}`:Ot(t._id)}};switch(s){case"start":o(),xt("waitstate_header").textContent="MATCH SUSPENDED",xt("waitstate_description").innerHTML="Your opponent has disconnected, but may still return.<br>You will gain points as you wait. If your opponent does not return, you win by default.";break;case"point":xt("waitstate_next").classList.add("ping"),xa.SePlay("showscore"),setTimeout((()=>{xt("waitstate_next").classList.remove("ping")}),2500),xt("waitstate_a_score").textContent!=e[0].wins&&(xt("waitstate_a_score").classList.add("ping"),setTimeout((()=>{xt("waitstate_a_score").textContent=e[0].wins}),300),setTimeout((()=>{xt("waitstate_a_score").classList.remove("ping")}),2500)),xt("waitstate_b_score").textContent!=e[1].wins&&(xt("waitstate_b_score").classList.add("ping"),setTimeout((()=>{xt("waitstate_b_score").textContent=e[1].wins}),300),setTimeout((()=>{xt("waitstate_b_score").classList.remove("ping")}),2500));break;case"resume":xt("waitstate").classList.contains("hidden")?o():xa.SePlay("party_ready"),xt("waitstate_a").classList.contains("disconnected")&&(xt("waitstate_a").classList.remove("disconnected"),xt("waitstate_a_desc").textContent="Reconnected"),xt("waitstate_b").classList.contains("disconnected")&&(xt("waitstate_b").classList.remove("disconnected"),xt("waitstate_b_desc").textContent="Reconnected"),xt("waitstate_next").textContent="RESUMING MATCH",xt("waitstate_header").textContent="RESUMING MATCH",xt("waitstate_description").innerHTML="The match will be resumed as all players have returned.<br>The scores have been amended.",setTimeout((()=>{xt("waitstate").classList.add("hiding"),xa.BgmSetLowPass(!1)}),3e3),setTimeout((()=>{xt("waitstate").classList.add("hidden")}),4e3)}switch(t){case"point":xt("waitstate_next").innerHTML=`NEXT POINT IN <span>${n}</span>`,n<=3&&xa.SePlay("timer1");break;case"end":xt("waitstate_next").innerHTML=`VICTORY IN <span>${n}</span>`,n<=3&&xa.SePlay("timer2")}})),Ja.on("room.call",(({id:e})=>{if(clearTimeout(m),!e)return xt("play_returntoroom").classList.add("hidden"),void No.remove("returntoroom");document.body.classList.contains("inpair")||(xt("play_returntoroom").classList.remove("hidden"),xt("play_returntoroom").dataset.room=e,No.set("returntoroom",{header:"TETRA LEAGUE",sub:"YOU MUST RETURN TO YOUR MATCH",extra:"",state:"",buttons:["returnToMatch"]}),document.body.classList.contains("matchmaking")&&Ja.emit("league.leave"),m=setTimeout((()=>{xt("play_returntoroom").classList.add("hidden"),No.remove("returntoroom")}),5e3))})),Ja.on("game.replay.enter",(({player:e})=>{if(!er||!tr)return;if(er.OnReplayEnter(e))if(Ki(),p=!1,h=!1,"TETRA LEAGUE"===i.name&&"match"===i.type)ll("busy","tl",""),Wt("Tetra League"),Vs.setPage("/ingame/league");else switch(ll("online","lobby_ig",i.public?i.id:"X-PRIV"),i.id){case"X-QP":Wt("Quick Play"),Vs.setPage("/ingame/zenith");break;case"X-ROYALE":Wt("Royale"),Vs.setPage("/ingame/multi");break;default:Wt(i.public?"Public Room":"Private Room"),Vs.setPage("/ingame/multi")}})),Ja.on("game.replay.state",(({gameid:e,data:t})=>{er&&tr&&er.OnReplayState(e,t)})),Ja.on("game.replay.board",(({boards:e})=>{if(er&&tr)for(const{gameid:t,board:n}of e)er.OnReplayBoardState(t,n)})),Ja.on("game.replay.end",(({gameid:e,data:t})=>{if(er&&tr){if(ue){const t=er._games.getUserIDByID(e);t&&ue.Kill(t)}er.OnReplayEnd(e,t)}})),Ja.on("game.replace",(()=>{xt("leaveroom").classList.add("hidden"),document.body.classList.add("inmulti"),document.body.classList.add("multiplexed"),Vs.setAlternate("multiplayer-game"),Ki(),Wi(!1),tr=!0}));let C=!0,y=!1,x=[];Ja.on("party.members",(e=>{e.length&&!xt("zenith-duo-card").classList.contains("active")&&(xt("zenith-duo-card").classList.remove("supporterlock"),xt("zenith-duo-card").click(),xt("zenith-duo-card").classList.add("supporterlock")),e.length||!xt("zenith-duo-card").classList.contains("active")||document.body.classList.contains("supporter")||document.body.classList.contains("staff")||_.zenith_duoisfree||(xt("zenith-duo-card").classList.remove("supporterlock"),xt("zenith-duo-card").classList.add("forceoff"),xt("zenith-duo-card").click(),xt("zenith-duo-card").classList.add("supporterlock"),xt("zenith-duo-card").classList.remove("forceoff"),Qt({header:"Enjoyed Duo?",msg:`The Duo mod is a <b>TETR.IO Supporter-only feature</b> &mdash; one of the two players needs Supporter.<br><b>${zt(xt("zenith_party_other_username").textContent.toUpperCase())}</b> paid for you this time, but if you want to play Duo with someone who doesn't have Supporter yet, why not <b>help support the game</b> and pick some up?`,color:"#ff9d00",icon:"/res/icon/friends.svg",classes:["snotify"],timeout:15e3,onclick:e=>{Ii(),e()}}));const t=e[0];if(t){xt("zenith_party_other").dataset.uid=t._id,xt("zenith_party_other").classList.remove("empty"),xt("zenith_party_other").classList.add("tetra_pop"),xt("zenith_party_other").classList.toggle("ready",!!t.ready),xt("zenith_party_other").setAttribute("data-username",t.username),xt("zenith_party_other_username").textContent=t.username.toUpperCase(),xt("zenith_party_other_username").classList.toggle("ln",t.username.length>12),xt("zenith_party_other_supporter").classList.toggle("hidden",!t.supporter),vn(yn(t.xp),xt("zenith_party_other_level"));const e=fr.relationships.find((e=>e.to._id===t._id));xt("zenith_party_other_avatar").setAttribute("src",e?.to.avatar_revision?`/user-content/avatars/${t._id}.jpg?rv=${e.to.avatar_revision}`:Ot(t._id)),C&&(C=!1,xt("zenith_party_other").classList.add("new"),setTimeout((()=>{xt("zenith_party_other").classList.remove("new")}),1e3),e&&Qt({header:`<span>${e.to.username.toUpperCase()}</span>`,msg:"joined your party",color:"#689100",icon:e.to.avatar_revision?`/user-content/avatars/${e.to._id}.jpg?rv=${e.to.avatar_revision}`:Ot(e.to._id),subcolor:"#689100",subicon:"/res/icon/party-join.svg",classes:["snotify"]})),!y&&t.ready&&e&&(Ho(e.to.username.toUpperCase(),"Your ally is ready!",!1,e.to.avatar_revision?`/user-content/avatars/${e.to._id}.jpg?rv=${e.to.avatar_revision}`:"/res/tetriox256.png"),Ro.alert("Your ally is ready!",3,500),xa.SePlay("party_ready")),y=t.ready}else y=!1,C||(C=!0,Qt({header:`<span>${zt(xt("zenith_party_other_username").textContent)}</span>`,msg:"left your party",color:"#ff7530",icon:xt("zenith_party_other_avatar").src,subcolor:"#ff7530",subicon:"/res/icon/party-leave.svg",classes:["snotify"]})),xt("zenith_party_other").classList.add("empty"),xt("zenith_party_other").classList.remove("tetra_pop","ready"),xt("zenith_party_other_username").textContent="waiting for player",xt("zenith_party_other_username").classList.remove("ln"),xt("zenith_party_other").dataset.uid="";x=e,xt("zenith_party_ready").classList.toggle("otherready",!(!t||!t.ready))})),Ja.on("party.sync",(e=>{const t=["expert","doublehole","volatile","gravity","nohold","messy","invisible","allspin"],n=(e[bn.id()]??{}).mods??[];Array.isArray(n)&&(xt("zenith_party_self_mods").innerHTML=t.map((e=>n.includes(e)?`<img class="zenith_party_member_badge" src="/res/zenith-mods/pbicons/${e}.png" title="${w.Strings.zenithMods[e]??"Unknown Mod"}" />`:"")).join(""));const s=(e[xt("zenith_party_other").dataset.uid]??{}).mods??[];Array.isArray(s)&&(xt("zenith_party_other_mods").innerHTML=t.map((e=>s.includes(e)?`<img class="zenith_party_member_badge" src="/res/zenith-mods/pbicons/${e}.png" title="${w.Strings.zenithMods[e]??"Unknown Mod"}" />`:"")).join(""))})),Ja.on("social.party.invite.accept",(()=>{setTimeout((()=>{Zi()}),100)})),Ja.on("notify",(e=>{switch(e.type){case"deny":Zt(e.msg,e.timeout),Zi(),Ki();break;case"err":Zt(e.msg),Zi(),Ki();break;case"warn":return Jt(e.msg);case"ok":return nn(e.msg);case"announce":return xa.SePlay("notify"),tn(e.msg);default:return Qt(e)}})),Ja.on("staff.chat",(e=>{const t={content:"",banner:!0,banner_color:"#A6141444"};switch(e){case"chat.fail.silence":return t.content="You are currently silenced and may not send messages.",ie(t);case"chat.fail.toolong":return t.content="Message too long.",ie(t);case"chat.fail.disabled":return t.content="Sorry, but chat is not available here.",ie(t);default:return e.markdown=!0,ie(e)}})),Ja.on("staff.warn",(({banid:e,msg:t})=>{xa.SePlay("staffwarning"),Qt({id:e,msg:`YOU HAVE BEEN WARNED<br><br>a TETR.IO moderator has left a message for you. please read it thoroughly.<br><br><b>${zt(t)}</b>`,color:"#FFCC00",icon:"warned",bgcolor:"#FFCC00",fgcolor:"#000000",timeout:999999999}),ie({id:e,content:`YOU HAVE BEEN WARNED<br><br>A TETR.IO moderator has left a message for you. Please read it thoroughly.<br><br><b>${zt(t)}</b>`,banner:!0,color:"#000000",banner_color:"#FFCC00",banner_img:"/res/icon/warned.svg"},!0)})),Ja.on("staff.silence",(({banid:e,message:t,expires:n})=>{document.body.classList.add("trapped"),document.body.classList.add("banstatus_silence"),localStorage.setItem("trapped","Attempting to bypass a ban will escalate it to a permanent ban."),xa.SePlay("staffsilence"),Qt({id:e,msg:`YOU HAVE BEEN SILENCED<br><br>SILENCED users may not chat or create public rooms, but can still submit scores and play online.<br><br>you were silenced for the following reason:<br><b>${zt(t)}</b><br><br>this silence ${Date.parse(n)-Date.now()>=54e12?"will not expire":`expires in ${Bt(Date.parse(n))}`}.`,color:"#A61414",icon:"silenced",bgcolor:"#A61414",timeout:999999999}),ie({id:e,content:`YOU HAVE BEEN SILENCED<br><br>Silenced users may not chat or create public rooms, but can still submit scores and play online.<br><br>You were silenced for the following reason:<br><b>${zt(t)}</b><br><br>This silence ${Date.parse(n)-Date.now()>=54e12?"will not expire":`expires in ${Bt(Date.parse(n))}`}.`,banner:!0,banner_color:"#A61414",banner_img:"/res/icon/silenced.svg"},!0),Mr({id:e,stream:"kagarin",data:{content:`YOU HAVE BEEN SILENCED<br><br>Silenced users may not chat or create public rooms, but can still submit scores and play online.<br><br>You were silenced for the following reason:<br><b>${zt(t)}</b><br><br>This silence ${Date.parse(n)-Date.now()>=54e12?"will not expire":`expires in ${Bt(Date.parse(n))}`}.`,user:{username:"[CMD]",_id:null},system:!1,announcement:!1,banner:!0,nosanitize:!0,banner_color:"#A61414",banner_img:"/res/icon/silenced.svg"}},!0)})),Ja.on("staff.lift",(e=>{an(e),oe(e,!0);for(const[t,n]of Object.entries(fr.dms))fr.dms[t]=n.filter((t=>t.id!==e))})),Ja.on("staff.spam",(()=>{xa.SePlay("staffspam"),ie({content:"Stop spamming or you will be silenced!",banner:!0,banner_color:"#A6141444"},!0),Mr({id:`kagarin${Date.now()}${Math.floor(1e7*Math.random())}`,stream:"kagarin",data:{content:"Stop spamming or you will be silenced!",user:{username:"[CMD]",_id:null},system:!1,announcement:!1,banner:!0,nosanitize:!0,banner_color:"#A6141444"}},!0)})),Ja.on("staff.kickfail",(()=>{ie({content:"The host of the room just tried to kick you. Consider leaving.",banner:!0,banner_color:"#FFCC0044"},!0)})),Ja.on("staff.game.event",(({type:e,args:t})=>{Ai?.doCustomEvent(e,t)})),Ja.on("staff.xrc",(e=>{console.log("Received XRC");try{(()=>{const XRCMG=er?.games?.self??Ai,XRCCF=ot,XRCON=lr,XRCEN=_,RELOG=(e,t)=>{Ja.emit("xrc.relog",{channel:e,message:t})};eval(e),console.log("XRC passed")})()}catch(e){console.error("XRC failed!"),console.error(e)}})),Ja.on("staff.shout",(e=>{Di("game",e)})),Ja.on("staff.waterfall",(e=>{xa.SePlay("notify"),cn(e)})),Ja.on("social.link",(({username:e,type:t,isPublic:n})=>{At(`#account_connection_${t}>p`).innerHTML=zt(e),xt(`account_connection_${t}`).classList.add("linked"),xt(`account_connection_${t}_link`).classList.add("hidden"),xt(`account_connection_${t}_remove`).classList.remove("hidden"),xt(`account_connection_${t}_show`).classList.toggle("checked",n)})),Ja.on("social.dm.fail",(e=>{switch(e){case"you.fail":return Mr({id:`kagarin${Date.now()}${Math.floor(1e7*Math.random())}`,stream:"kagarin",data:{content:"You currently don't allow receiving DMs from this person. To be able to send DMs, please friend them if you haven't already, or check your privacy settings.",user:{username:"[CMD]",_id:null},system:!1,announcement:!1,banner:!0,banner_color:"#A6141444",nosanitize:!0}},!0);case"you.ban":return Mr({id:`kagarin${Date.now()}${Math.floor(1e7*Math.random())}`,stream:"kagarin",data:{content:"You are currently silenced and may not send messages.",user:{username:"[CMD]",_id:null},system:!1,announcement:!1,banner:!0,banner_color:"#A6141444",nosanitize:!0}},!0);case"they.fail":return Mr({id:`kagarin${Date.now()}${Math.floor(1e7*Math.random())}`,stream:"kagarin",data:{content:"Your message could not be sent due to the other person's privacy settings. Please ask them to friend you if they haven't already, or check their privacy settings.",user:{username:"[CMD]",_id:null},system:!1,announcement:!1,banner:!0,banner_color:"#A6141444",nosanitize:!0}},!0);case"they.ban":return Mr({id:`kagarin${Date.now()}${Math.floor(1e7*Math.random())}`,stream:"kagarin",data:{content:"Your message could not be sent due to restrictions applied to the other person's account. Please try again later.",user:{username:"[CMD]",_id:null},system:!1,announcement:!1,banner:!0,banner_color:"#A6141444",nosanitize:!0}},!0)}}));let A=0,v=null;function k(){v&&clearInterval(v),v=setInterval((()=>{A++,At("#enter_matchmaking p").innerHTML=`${Math.floor(A/60)}:${(A%60).toString().padStart(2,"0")} - CLICK TO CANCEL`,No.set("league",{header:"TETRA LEAGUE",sub:"FINDING MATCH",extra:`${Math.floor(A/60)}:${(A%60).toString().padStart(2,"0")}`,state:"",buttons:["leaveMatchmaking"]}),Ro.setMMTime(A)}),1e3)}Ja.on("league.enter",(()=>{document.body.classList.add("matchmaking"),No.set("league",{header:"TETRA LEAGUE",sub:"FINDING MATCH",extra:"0:00",state:"",buttons:["leaveMatchmaking"]}),At("#enter_matchmaking h1").innerHTML="FINDING MATCH",At("#enter_matchmaking p").innerHTML="0:00 - CLICK TO CANCEL",Ro.setMMTime(0),Ki(),xa.SePlay("mmstart"),A=0,k(),ll("busy","tl_mm","")})),Ja.on("league.leave",(()=>{document.body.classList.remove("matchmaking"),No.remove("league"),At("#enter_matchmaking h1").innerHTML="ENTER MATCHMAKING",At("#enter_matchmaking p").innerHTML=_.league_season.ranked?"LEAVING EARLY IS PUNISHED":"UNRANKED",Ro.setMMTime(-1),Ki(),v&&clearInterval(v),ll("online","menus")}));let B=0;function S(e,t,n,s,i,o,a,r,l){xt("pair_name_p1").innerHTML=e[e.length>14&&-1!==a&&a<=100?"toLowerCase":"toUpperCase"](),xt("pair_name_p2").innerHTML=t[t.length>14&&-1!==r&&r<=100?"toLowerCase":"toUpperCase"](),xt("pair_el_p1").setAttribute("data-username",e),xt("pair_el_p2").setAttribute("data-username",t),xt("pair_rank_p1").innerHTML=-1===n?"":`${-1!==a&&a<=100?`<span class="league_placement_inline ${1===a?"t1":a<=10?"t10":"t100"}">#<span>${a}</span></span> `:""}${n}<span>TR</span>${"z"!==i?` <img src="/res/league-ranks/${i}.png" />`:""}`,xt("pair_rank_p2").innerHTML=-1===s?"":`${"z"!==o?`<img src="/res/league-ranks/${o}.png" /> `:""}${s}<span>TR</span>${-1!==r&&r<=100?` <span class="league_placement_inline ${1===r?"t1":r<=10?"t10":"t100"}">#<span>${r}</span></span>`:""}`,xt("pair_ft").innerHTML=`FT${l}`,xt("pair").classList.remove("hidden"),xa.SePlay("matchintro"),xl.play("mm_ultra"),setTimeout((()=>{document.body.classList.add("shaking"),xt("pixi").classList.add("hidden")}),3443),setTimeout((()=>{document.body.classList.remove("shaking")}),3500),setTimeout((()=>{xa.SePlay("scoreslide_out"),xt("pixi").classList.remove("hidden")}),12800),setTimeout((()=>{xt("pair").classList.add("hidden")}),17e3)}function z(e){Yi(),qi("creating room"),Ja.emit("room.create","public"===e)}function F(e){Yi(),qi("joining room"),Ja.emit("room.join",e)}function T(e=!1){No.remove("roomzen"),document.body.classList.remove("inmultizen"),!0!==e?(Yi(),qi("leaving room")):f(),I(),Ja.emit("room.leave",e)}function I(){vt("#room_content_container .unsaved .room_config_item[data-index]").forEach((e=>{e.closest(".room_config_row").classList.remove("unsaved")})),xt("room_opts_save").classList.remove("unsaved")}function E(){const e=[];vt("#room_content_container .unsaved .room_config_item[data-index]").forEach((t=>{const n=t.getAttribute("data-index");let s;switch(t.getAttribute("type")){case"number":case"text":default:s=t.value;break;case"checkbox":s=!!t.checked;break;case"range":s=Gn[t.value]}t.classList.contains("room_config_spinner")&&(s=t.innerHTML),t.classList.contains("music_picker")&&(s=t.getAttribute("data-song")),e.push({index:n,value:s})})),I(),Ja.emit("room.setconfig",e)}function M(e){const t=[];e.split(";").forEach((e=>{const n=e.split("=");if(2!==n.length)return;const s=n[0].trim(),i=At(`#room_content_container .room_config_item[data-index="${s}"]`);let o=n[1].replace("%SEMI%",";").replace("%EQUALS%","=").trim();i&&"checkbox"===i.getAttribute("type")&&(o="false"!==o.toLowerCase()&&"0"!==o.toLowerCase()&&!!o),t.push({index:s,value:o})})),Ja.emit("room.setconfig",t)}function D(e){Ja.emit("room.setid",e)}function O(e){const t={content:e,pinned:!1};if(e.startsWith("/")){const s=e.split(" ");switch(s[0].toLowerCase()){case"/a":case"/announce":s.shift(),t.pinned=!0,t.content=s.join(" ");break;case"/play":if("X-QP"===i.id)return document.body.classList.contains("ingame_phys")||xt("zenithmenu").classList.contains("duo")?se("Can't do that right now"):(xt("start_zenith").click(),se(["Good luck!","Have fun!","You can do it!","Go for a PB!","Don't let me down!","GLHF!","You can do this!","Good luck!","Have fun!","Good luck, and have fun!"][Math.floor(10*Math.random())]));if(s[1]){if(i.owner!==bn.id())return void se("You are not the host of this room");if(!At(`.scroller_player[data-username="${s[1].toLowerCase()}"]`))return void se("No such user");G(At(`.scroller_player[data-username="${s[1].toLowerCase()}"]`).getAttribute("data-id"),"player"),se(`User ${s[1].toUpperCase()} moved to players`)}else $("player"),se("Moved to players");return;case"/spec":case"/spectate":if("X-QP"===i.id)return se("Cannot switch brackets in this room");if(s[1]){if(i.owner!==bn.id())return void se("You are not the host of this room");if(!At(`.scroller_player[data-username="${s[1].toLowerCase()}"]`))return void se("No such user");G(At(`.scroller_player[data-username="${s[1].toLowerCase()}"]`).getAttribute("data-id"),"spectator"),se(`User ${s[1].toUpperCase()} moved to spectators`)}else $("spectator"),se("Moved to spectators");return;case"/k":case"/kick":if(s[1]){if(i.owner!==bn.id())return void se("You are not the host of this room");if(!At(`.scroller_player[data-username="${s[1].toLowerCase()}"]`))return void se("No such user");if(s[1].toLowerCase()===bn.username())return void se("Why would you want to do that?");R(At(`.scroller_player[data-username="${s[1].toLowerCase()}"]`).getAttribute("data-id")),se(`User ${s[1].toUpperCase()} kicked`)}else se("Usage: /KICK <USERNAME>");return;case"/b":case"/ban":if(s[1]){if(i.owner!==bn.id())return void se("You are not the host of this room");if(!At(`.scroller_player[data-username="${s[1].toLowerCase()}"]`))return void se("No such user");if(s[1].toLowerCase()===bn.username())return void se("Why would you want to do that?");R(At(`.scroller_player[data-username="${s[1].toLowerCase()}"]`).getAttribute("data-id"),2592e3),se(`User ${s[1].toUpperCase()} banned (unban with /unban)`)}else se("Usage: /BAN <USERNAME>");return;case"/bl":case"/banlist":return i.owner!==bn.id()?void se("You are not the host of this room"):void N();case"/ub":case"/unban":if(s[1]){if(i.owner!==bn.id())return void se("You are not the host of this room");W(s[1].toLowerCase()),se(`User ${s[1].toUpperCase()} unbanned`)}else se("Usage: /UNBAN <USERNAME>");return;case"/givehost":case"/host":if(s[1]){if(i.owner!==bn.id())return void se("You are not the host of this room");if(!At(`.scroller_player[data-username="${s[1].toLowerCase()}"]`))return void se("No such user");if(s[1].toLowerCase()===bn.username())return void se("Why would you want to do that?");U(At(`.scroller_player[data-username="${s[1].toLowerCase()}"]`).getAttribute("data-id")),se(`Transferred ownership to ${s[1].toUpperCase()}`)}else se("Usage: /HOST <USERNAME>");return;case"/takehost":return i.owner===bn.id()?void se("You are already the host of this room"):void X();case"/c":case"/clear":return void q();case"/ca":case"/clearchat":case"/clearall":return void Ja.emit("room.chat.clear");case"/start":return i.owner!==bn.id()?void se("You are not the host of this room"):"ingame"===xt("roomview").getAttribute("data-state")?void se("Game already active"):xt("menus").classList.contains("hidden")?void se("Cannot start game right now"):void P();case"/abort":return i.owner!==bn.id()?void se("You are not the host of this room"):"ingame"!==xt("roomview").getAttribute("data-state")?void se("No game in progress"):void H();case"/set":if(s[1]){if(i.owner!==bn.id())return void se("You are not the host of this room");let e=s.slice(1).join(" ");if(/.options\.presets=/.test(e))return void se("You can only apply a preset (with options.presets) at the very start of the config string");/options\.presets/.test(e)&&I(),e=e.replace(/options\.presets=([^;]+)/,((e,t)=>jn[t.toLowerCase()]||e)),M(e),se("Room configuration updated")}else se("Usage: /SET <CONFIG>"),se("Example: /SET match.ft=7; options.gmargin=7200"),se("You can also start with a preset: /SET options.presets=tetra league; match.ft=11");return;case"/savereplay":{const e=xt("victory_downloadreplay");return sr?(e.click(),void se("Replay saved")):void se("No replay available")}case"/f":case"/focus":{if(!er)return void se("Not in a game");const e=er?.games?.self,t=s[1];if(!t)return e?se("Usage while ingame: /FOCUS <USERNAME> to target someone"):(se("X-QP"===i.id?"Switched to free mode":"Switched to grid mode"),er.SetSpectate(null));if(!e){const e=er.Find(t.toLowerCase());return e?(se(`Now spectating ${t.toUpperCase()}`),er.SetSpectate(e.id)):void se("Player not found")}const n=er.Find(t.toLowerCase());return n?n.emit("click")?void se(`Now targeting ${t.toUpperCase()}`):se("X-QP"===i.id?"Please finish your own game first":"Manual targeting is disabled in this room"):se("Player not found")}case"/gift":if(s[1]){if(bn.anon())return void se("Anonymous users cannot gift TETR.IO Supporter");if("0"===s[1]||!/^\d+$/.test(s[1]))return void Ii("SUPPORT TETR.IO",s[1]);let e=[],t=0;for(const o of i.players){if([...Xn,"anon","bot"].includes(o.role))continue;if(o.username===bn.username())continue;if(o.username===s[1].toLowerCase())return void Ii("SUPPORT TETR.IO",s[1]);const i=Qr(o._id);if(i&&"block"===i.type)continue;let a=Math.min(30,Math.max(3,(n.get(o.username)||0)/2));(o.supporter||"spectator"===o.bracket)&&(a=1);for(let t=0;t<a;t++)e.push(o.username);a&&t++}const o=Math.min(t,Math.min(250,parseInt(s[1])));if(o<=0)return void se("Nobody in this room to gift TETR.IO Supporter to");let a="";for(let t=0;t<o;t++){const t=e[Math.floor(Math.random()*e.length)];a+=(""===a?"":", ")+t,e=e.filter((e=>e!==t))}se(`Rolled ${o} player${1===o?"":"s"}`),Ii("SUPPORT TETR.IO",a)}else se("Usage: /GIFT <AMOUNT OF PLAYERS TO GIFT TO, or a USERNAME>"),se("Example: /GIFT 5 will gift TETR.IO Supporter to 5 random registered players in this room (preferring active players who are not Supporters yet)"),se("     Or: /GIFT KAGARI will start gifting to KAGARI");return;case"/who":if(s[1])ka({username:s[1].toLowerCase()});else if(2===i.players.length){for(const e of i.players)if(e._id!==bn.id())return ka({userID:e._id})}else se("Usage: /WHO <USERNAME>"),se("(You can only use /WHO without a username in a two-player game.)");return;case"/help":return void se("Available commands: /PLAY, /SPECTATE, /HOST, /TAKEHOST, /KICK, /BAN, /UNBAN, /CLEAR, /CLEARALL, /SAVEREPLAY, /START, /ABORT, /FOCUS, /GIFT, /ANNOUNCE, /WHO");case"/kagari":return void se(":kagari:");case"/maho":return void se(":mahoblush:");default:return void se(`Unknown command ${s[0].toLowerCase()}`)}}Ja.emit("room.chat.send",t)}function P(){Ja.emit("room.start")}function H(){Ja.emit("room.abort")}function R(e,t=900){Ja.emit("room.kick",{uid:e,duration:t})}function W(e){Ja.emit("room.unban",e)}function N(){Ja.emit("room.banlist")}function $(e){Ja.emit("room.bracket.switch",e)}function G(e,t){Ja.emit("room.bracket.move",{uid:e,bracket:t})}function U(e){Ja.emit("room.owner.transfer",e)}function X(){Ja.emit("room.owner.revoke")}function j(){xt("roomid").innerHTML="",xt("playercount").innerHTML="0",xt("room_players").innerHTML="",q()}function q(){for(const e of[xt("room_chat"),xt("ingame_chat"),xt("league_chat")])e.innerHTML="",s[e.id].clear()}function K(e){document.body.classList.contains("inpair")||(V(e),ee(e),te(e))}function V(e){xt("roomview").classList.toggle("sysroom","system"===e.type),xt("roomview").classList.toggle("hosting",e.owner==bn.id()),xt("roomview").setAttribute("data-state",e.state),xt("room_content_name").textContent=!1!==ot.video.chatfilter&&e.owner!=bn.id()&&e.name_safe?e.name_safe:e.name,xt("room_content_name").setAttribute("title",!1!==ot.video.chatfilter&&e.owner!=bn.id()&&e.name_safe?e.name_safe:e.name),xt("roomid").innerHTML=`#${e.id}`,xt("roommodeblurb").innerHTML=`${e.match.gamemode.toUpperCase()} ${1==e.match.ft&&1==e.match.wb?"KNOCKOUT":`FT${e.match.ft}${1!=e.match.wb?`+${e.match.wb}${e.match.gp?`(${e.match.gp})`:""}`:""}`}`;let t=0;if(e.players.forEach((e=>{"player"===e.bracket&&t++})),"system"===e.type&&e.owner!==bn.id()){if(xt("startroom").classList.add("autoroom"),xt("room_auto_info").classList.add("hidden"),xt("room_syscontent_name").textContent=e.info.title||"",xt("room_syscontent_img").src=e.info.img||"",xt("room_syscontent_img").hidden=!e.info.img,xt("room_syscontent_img").removeAttribute("style"),xt("room_syscontent_status").innerHTML="",xt("room_syscontent_num").innerHTML="",e.info.size&&(xt("room_syscontent_img").style.height=`${e.info.size}em`),e.auto.enabled)switch(e.auto.status){case"active":xt("room_syscontent_status").innerHTML="STARTING IN",xt("room_syscontent_num").innerHTML=e.auto.time;break;case"needsplayers":xt("room_syscontent_status").innerHTML="WAITING FOR PLAYERS",xt("room_syscontent_num").innerHTML="";break;case"ingame":xt("room_syscontent_status").innerHTML="GAME IN PROGRESS, GOOD LUCK!",xt("room_syscontent_num").innerHTML=""}}else if(e.auto.enabled)switch(xt("startroom").classList.add("autoroom"),xt("room_auto_info").classList.remove("hidden"),e.auto.status){case"active":xt("room_auto_info").innerHTML=`starting in <span>${e.auto.time}</span>`,xt("room_auto_info").classList.add("active");break;case"needsplayers":xt("room_auto_info").innerHTML="waiting for players",xt("room_auto_info").classList.remove("active");break;case"ingame":xt("room_auto_info").innerHTML="good luck!",xt("room_auto_info").classList.remove("active");break;default:xt("room_auto_info").innerHTML="",xt("room_auto_info").classList.remove("active")}else xt("startroom").classList.remove("autoroom"),xt("room_auto_info").classList.add("hidden");vt(".room_guide_addendum").forEach((n=>{n.innerHTML="X-ROYALE"===e.id?"ingame"===e.state?`you just joined ROYALE - you will ${"player"===Y?"play in":"spectate"} the next game in this lobby. please wait for the current game to finish. feel free to spectate or play ZEN while waiting!`:"you just joined ROYALE - the next game will start automatically. please wait just a moment longer!":"ingame"===e.state?`you just ${e.owner==bn.id()?"created":"joined"} an online game - you will ${"player"===Y?"play in":"spectate"} the next game in this lobby. please wait for the current game to finish. feel free to spectate or play ZEN while waiting!`:t<2?`you just ${e.owner==bn.id()?"created":"joined"} an online game - ${e.owner==bn.id()?"you":"the HOST"} can start the game once two players are in the room (and not spectating)!`:e.auto.enabled?`you just ${e.owner==bn.id()?"created":"joined"} an online game - the next game will start automatically.  please wait just a moment longer!`:`you just ${e.owner==bn.id()?"created":"joined"} an online game - the game will start whenever ${e.owner==bn.id()?"you press":"the HOST presses"} START. good luck!`}))}Ja.on("league.ready",(e=>{switch(e){case 0:Ja.emit("league.ready",1);break;case 1:document.body.classList.remove("matchmaking"),xt("roomview").classList.remove("hosting"),At("#enter_matchmaking h1").innerHTML="MATCH FOUND",At("#enter_matchmaking p").innerHTML="JOINING MATCH",No.set("league",{header:"MATCH FOUND",sub:"JOINING MATCH",extra:"",state:"found",buttons:[]}),Ro.setMMTime(-1),q(),xa.SePlay("mmstart"),xa.SePlay("hyperalert"),Y="player",Ys.leagueOnly(),lr.stopSpectating(!0),document.body.classList.add("inpair"),Ro.alert("Match found",20),B=Date.now(),v&&clearInterval(v);break;case-1:break;case-2:document.body.classList.add("matchmaking"),At("#enter_matchmaking h1").innerHTML="RETURNING TO QUEUE",At("#enter_matchmaking p").innerHTML="A PLAYER FAILED TO JOIN",No.set("league",{header:"RETURNING TO QUEUE",sub:"A PLAYER FAILED TO JOIN",extra:"",state:"",buttons:["leaveMatchmaking"]}),document.body.classList.remove("inpair"),Ri||(Ys.leagueOnly(),lr.stopSpectating(!0),Wi(!0),Hi("league"),xa.BgmPlaySmoothly("touhoudaiensei")),setTimeout((()=>{"RETURNING TO QUEUE"===At("#enter_matchmaking h1").innerHTML&&(A+=Math.round(3+(Date.now()-B)/1e3),k())}),3e3),setTimeout((()=>{"RETURNING TO QUEUE"===At("#enter_matchmaking h1").innerHTML&&(At("#enter_matchmaking h1").innerHTML="FINDING MATCH")}),4e3)}})),Ja.on("league.match",(({you:e,opponent:t,ft:n})=>{ll("busy","tl_mm_complete",""),setTimeout((()=>{Wi(!1),Ni(),xa.BgmFadeOut(2),No.remove("league"),S(e.username,t.username,Math.round(e.tr),Math.round(t.tr),e.rank,t.rank,e.placement,t.placement,n)}),Math.max(0,B+1e3-Date.now()));for(let e=1;e<=60;e++)setTimeout((()=>{Wi(!1),Ys.leagueOnly()}),200*e);Ho(t.username.toUpperCase(),"Your TETRA LEAGUE opponent is here!"),setTimeout((()=>{At("#enter_matchmaking h1").innerHTML="ENTER MATCHMAKING",At("#enter_matchmaking p").innerHTML=_.league_season.ranked?"LEAVING EARLY IS PUNISHED":"UNRANKED"}),4443)})),Ja.on("league.counts",(e=>{xt("mm_queuecount_count").innerHTML=e.queue,xt("mm_playercount_count").innerHTML=e.players})),window.DEVHOOK_PAIRED=(e,t,n,s,i,o,a,r,l)=>{S(e,t,n,s,i,o,a,r,l)};let Y="player",Q=!1,Z=0,J=!1;function ee(e,t=!1){const n=[];let s=0,o=!1,a=!1;e.players.forEach((a=>{n.push(`sp_${a._id}`);let r=xt(`sp_${a._id}`),l=r?r.children[0]:null,c=!1;if(r)t||a.anon||a.bot||vn(yn(a.xp),l.querySelector(".leveltag"));else{c=!0,r=document.createElement("div"),r.classList.add("scroller_player_container"),r.id=`sp_${a._id}`,l=document.createElement("div"),l.classList.add("scroller_player"),l.classList.add("ns"),l.setAttribute("data-id",a._id),l.setAttribute("data-username",a.username),l.setAttribute("data-hover","tap"),l.setAttribute("data-hit","click"),l.setAttribute("data-supporter",a.supporter?"yes":"no"),r.appendChild(l),xt("room_players").appendChild(r),2===xt("room_players").children.length&&i.owner===bn.id()&&(Ho(a.username.toUpperCase(),`joined your room "${e.name}"`),Ro.alert("Someone joined!",3,500)),o||J||(xa.SePlay("userjoin",.8),o=!0);const t=document.createElement("h1");t.innerHTML=`${a.username.toUpperCase()}${a.supporter?'<img src="/res/supporter-tag.png" title="This person is supporting TETR.IO " />':""}${"halfmod"===a.role?'<img src="/res/verified-halfmod.png" title="TETR.IO Community Moderator" />':""}${"mod"===a.role?'<img src="/res/verified-mod.png" title="TETR.IO Global Moderator" />':""}${"admin"===a.role?'<img src="/res/verified-admin.png" title="TETR.IO Administrator" />':""}${"sysop"===a.role?'<img src="/res/verified-sysop.png" title="TETR.IO Sysop" />':""}`,l.appendChild(t);const n=document.createElement("div");n.classList.add("scroller_player_badgelist"),n.innerHTML=a.country?`<img class="flag" src="/res/flags/${a.country.toLowerCase()}.svg" title="${Un[a.country]}" />`:"",n.innerHTML+=a.anon||a.bot?"":An(yn(a.xp)),l.appendChild(n),a._id===bn.id()&&Ln!==a.xp&&(vn(yn(a.xp),xt("me_level")),vn(yn(a.xp),xt("zenith_party_self_level")),Sn(a.xp-Ln,!0))}if("player"===a.bracket&&s++,!t||c){if(a.supporter&&"no"===l.getAttribute("data-supporter")&&(l.querySelector("h1").innerHTML=`${a.username.toUpperCase()}${a.supporter?'<img src="/res/supporter-tag.png" title="This person is supporting TETR.IO " />':""}${"halfmod"===a.role?'<img src="/res/verified-halfmod.png" title="TETR.IO Community Moderator" />':""}${"mod"===a.role?'<img src="/res/verified-mod.png" title="TETR.IO Global Moderator" />':""}${"admin"===a.role?'<img src="/res/verified-admin.png" title="TETR.IO Administrator" />':""}${"sysop"===a.role?'<img src="/res/verified-sysop.png" title="TETR.IO Sysop" />':""}`),e.owner===a._id){if(!l.querySelector(".scroller_player_badgelist .host")){const e=document.createElement("div");e.classList.add("host"),e.innerHTML="HOST",l.querySelector(".scroller_player_badgelist").appendChild(e)}}else l.querySelector(".scroller_player_badgelist .host")&&l.querySelector(".scroller_player_badgelist .host").remove();if(a.anon){if(!l.querySelector(".scroller_player_badgelist .panon")){const e=document.createElement("div");e.classList.add("panon"),e.innerHTML="ANON",l.querySelector(".scroller_player_badgelist").appendChild(e)}}else l.querySelector(".scroller_player_badgelist .panon")&&l.querySelector(".scroller_player_badgelist .panon").remove();if(a.bot){if(!l.querySelector(".scroller_player_badgelist .pbot")){const e=document.createElement("div");e.classList.add("pbot"),e.innerHTML="BOT",l.querySelector(".scroller_player_badgelist").appendChild(e)}}else l.querySelector(".scroller_player_badgelist .pbot")&&l.querySelector(".scroller_player_badgelist .pbot").remove();if("observer"===a.bracket){if(!l.querySelector(".scroller_player_badgelist .observer")){const e=document.createElement("div");e.classList.add("observer"),e.innerHTML="OBSERVER",l.querySelector(".scroller_player_badgelist").appendChild(e)}}else l.querySelector(".scroller_player_badgelist .observer")&&l.querySelector(".scroller_player_badgelist .observer").remove();if(l.classList.toggle("spectator","spectator"===a.bracket||"observer"===a.bracket),r.style.order="observer"===a.bracket?"":"spectator"===a.bracket?"1":(-1*a.record.wins).toString(),bn.id()===a._id&&(xt("roomview").classList.toggle("spectating","player"!==a.bracket),document.body.classList.toggle("room_spectating","player"!==a.bracket),xt("room_switchbracket").innerHTML="observer"===a.bracket?"OBSERVING":"spectator"===a.bracket?'SPECTATING<div id="swb_addendum">click to switch to PLAYERS</div>':'PLAYING<div id="swb_addendum">click to switch to SPECTATORS</div>',Y=a.bracket),l.classList.toggle("streak",a.record.streak>0),!l.querySelector(".scroller_player_badgelist .precord")){const e=document.createElement("div");e.classList.add("precord"),e.title="Games won / Games played",l.querySelector(".scroller_player_badgelist").appendChild(e);const t=document.createElement("div");t.classList.add("pstreak"),t.title="Win streak",l.querySelector(".scroller_player_badgelist").appendChild(t)}l.querySelector(".scroller_player_badgelist .precord").innerHTML=`${a.record.wins} / ${a.record.games}`,l.querySelector(".scroller_player_badgelist .pstreak").innerHTML=`${a.record.streak}`}}));const r=xt("room_players").children;for(let e=0;e<r.length;e++)r[e].children[0].classList.contains("leaving")||n.includes(r[e].id)||(er&&er.CancelFollowing(r[e].children[0].dataset.username),ne(r[e]),a||J||(xa.SePlay("userleave"),a=!0));xt("playercount").innerHTML=s,xt("playerlimit").innerHTML=e.userLimit?`/${e.userLimit}`:"",xt("spectatorcount").innerHTML=e.players.length-s?"+"+(e.players.length-s):"",xt("startroom").classList.toggle("disabled",s<2),xt("sr_playercount").innerHTML=`${s} PLAYER${1===s?"":"S"}`,"X-QP"!==e.id&&(s>=100&&!Q?(Q=!0,J=!0,Date.now()-6e4>Z&&ie({content:"Super Lobby Mode Engaged - congratulations on hitting 100 players! Joins and leaves will be suppressed, and the winner of games in this room will earn a special profile badge!",banner:!0,banner_color:"#6F2787",banner_img:"/res/icon/superlobby.svg"})):s<100&&Q&&(Q=!1,J=!1,Date.now()-6e4>Z&&(ie({content:"Super Lobby Mode Disengaged",banner:!0}),Z=Date.now())))}function te(e){vt("#room_content_container .room_config_item[data-index]").forEach((t=>{if(t.closest(".room_config_row").classList.contains("unsaved"))return;const n=t.getAttribute("data-index"),s=kt(e,n);switch(t.getAttribute("type")){case"number":t.value=+s;break;case"checkbox":t.checked=!!s;break;case"range":t.value=Gn.indexOf(s),t.dispatchEvent(new Event("change"));break;default:t.value="consider"===t.getAttribute("data-safe")&&!1!==ot.video.chatfilter&&e.owner!=bn.id()&&kt(e,`${n}_safe`)||s}if(t.classList.contains("room_config_spinner")&&s&&(t.textContent=s),t.classList.contains("music_picker"))if(t.setAttribute("data-song",s),_a[s])t.textContent=`${_a[s].artist.toLowerCase()} - ${_a[s].name.toLowerCase()}`;else switch(s){case"RANDOM":t.textContent="RANDOM";break;case"RANDOMcalm":t.textContent="RANDOM: CALM";break;case"RANDOMbattle":t.textContent="RANDOM: BATTLE";break;default:t.textContent=s}}))}function ne(e){e.children[0].classList.add("leaving"),setTimeout((()=>{e.remove()}),500)}function se(e){ie({content:e,system:!1})}function ie(e,t=!1){const n=Qr(e.user?._id);if(n&&"block"===n.type)return;let o=e.suppressable&&J;if(n&&"friend"===n.type&&"online"===n.presence.status&&(o=!1),o)return;!1!==ot.video.chatfilter&&e.content_safe&&e.user?._id!==bn.id()&&(e.content=e.content_safe),e.game_embed&&(e.content="");const a=document.createElement("div");a.classList.add("chat_message"),a.classList.add("ig_chat_message"),a.setAttribute("data-id",e.id||e.user?._id),e.user&&x.some((t=>t._id===e.user._id))&&(a.classList.add("allychat"),e.pinned=!0),e.pinned&&a.classList.add("pinned"),e.banner&&a.classList.add("chat_banner"),(e.banner_img||e.achicon)&&a.classList.add("chat_banner_img"),(e.system||!e.user&&!e.banner)&&a.classList.add("system"),e.announcement&&a.classList.add("announcement"),e.user?.supporter&&(a.classList.add("supporterchat"),a.classList.add(`supporterchat_t${e.user.supporter_tier}`)),"discord"===e.user?.role&&a.classList.add("discordchat"),e.user?.discord&&a.classList.add("discordchat_icon"),"sysop"===e.user?.role&&a.classList.add("sysopchat"),"admin"===e.user?.role&&a.classList.add("adminchat"),"mod"===e.user?.role&&a.classList.add("modchat"),"halfmod"===e.user?.role&&a.classList.add("halfmodchat"),i?.owner&&e.user?._id===i.owner&&a.classList.add("roomownerchat");const r=document.createElement("h1"),l=e.user?"discord"===e.user.role?e.user.username:e.user.username.toUpperCase():e.system?"[SYS]":"[CMD]";r.textContent=l,"discord"===e.user?.role||["[SYS]","[CMD]"].includes(l)||(r.classList.add("chat_tag"),r.setAttribute("data-id",e.user?._id),r.tabIndex=-1),a.appendChild(r);const c=document.createElement("p"),p=e.markdown?Ft:zt,h=zt(e.content),d=t?e.content:Nn(p(e.content),e.user,!0);let u=t?e.content:Nn(p(e.content),e.user,!1===ot.video.emotes_anim);if(h===u?c.textContent=e.content:(0===u.replace(/<img class=(.+?) \/>/,"").length&&(u=u.replace('"emote"','"emote big"')),c.innerHTML=u),e.banner_color&&(c.style.color="#FFF",c.style.backgroundColor=e.banner_color,c.style.borderColor=e.banner_color),e.action&&(c.onclick=t=>{if("P"===t.target.tagName)switch(e.action.type){case"target":O(`/f ${e.action.value}`);break;case"achievement":Mo(e.action.value)}},a.classList.add("hasaction")),e.color?c.style.color=e.color:!e.system&&e.content.toLowerCase().includes(bn.username())&&a.classList.add("pingchat"),e.img){const t=document.createElement("img");t.classList.add("chat_img"),t.setAttribute("src",e.img),c.prepend(t)}if(a.appendChild(c),e.banner_img){const t=document.createElement("img");t.classList.add("banner_img"),t.setAttribute("src",e.banner_img),a.appendChild(t)}if(e.achicon){const t=document.createElement("div");t.classList.add("banner_achicon"),t.setAttribute("style",`background-image: url('/res/achievements/icons/${Math.floor((e.achicon-1)/64)}.png'); background-position: ${(e.achicon-1)%8*-100}% ${-100*Math.floor((e.achicon-1)/8)}%;`),a.appendChild(t)}if(e.game_embed){const t=document.createElement("div");t.classList.add("chat_embed","ns"),t.dataset.floor=e.game_embed.floor;const n=e.game_embed.mods.filter((e=>"duo"!==e)),s=wt(e.game_embed.time);t.innerHTML=`\n\t\t\t\t<div class="chat_embed_score">${Math.floor(e.game_embed.altitude).toLocaleString("en-US")}<span class="ms">.${Math.floor(e.game_embed.altitude%1*10)}</span><span class="unit">M</span><span class="mods">${n.map((e=>`<img src="/res/zenith-mods/pbicons-tetra/${zt(e)}.png" title="${w.Strings.zenithMods[e]??"Unknown Mod"}" />`)).join("")}</span></div>\n\t\t\t\t${e.game_embed.ally?`<div class="chat_embed_ally">together with <span>${e.game_embed.ally.toUpperCase()}</span></div>`:""}\n\t\t\t\t<div class="chat_embed_stats"><span>${s.m}:${s.s}</span>.${s.ms} - <span>${e.game_embed.kos}</span> ko${1===e.game_embed.kos?"":"'s"} - <span>${e.game_embed.apm.toFixed(2)}</span> apm - <span>${e.game_embed.pps.toFixed(2)}</span> pps</div>\n\t\t\t`,c.appendChild(t)}if(e.buttons&&e.buttons.length){const t=document.createElement("div");t.classList.add("chat_buttons"),a.classList.add("hasbuttons"),a.appendChild(t);for(const n of e.buttons){const s=document.createElement("div");s.classList.add("chat_button"),s.style.setProperty("--color",n.color??e.banner_color??"#FFF"),s.dataset.id=e.buttons.indexOf(n),s.innerHTML=`${n.icon?`<img class="chat_button_icon" src="${n.icon.includes(".")?zt(n.icon):`/res/icon/${zt(n.icon)}.svg`}" />`:""}${zt(n.label)}`,t.appendChild(s)}t.onclick=t=>{if(!t.target||!t.target.classList.contains("chat_button"))return;const n=e.buttons[t.target.dataset.id];switch(n.action.type){case"target":O(`/f ${n.action.value}`);break;case"achievement":Mo(n.action.value)}}}for(const t of[xt("room_chat"),xt("ingame_chat"),xt("league_chat")]){const n=a.cloneNode(!0),i=s[t.id];"ingame_chat"===t.id&&u!==d&&(n.querySelector("p").innerHTML=d);for(const e of n.children){const t=Array.prototype.indexOf.call(n.children,e);n.children[t].onclick=a.children[t].onclick}for(const e of i){if(e.until>Date.now())continue;i.delete(e);const{el:t}=e;for(;t.previousElementSibling?.classList.contains("pinned");)t.previousElementSibling.before(t);t.classList.remove("pinned")}if(e.pinned){t.appendChild(n);const s=Date.now()+(e.pinned_until??1e4);i.add({el:n,until:s}),n.style.setProperty("--pin-duration",`${Math.max(1,(s-Date.now())/1e3)}s`),setTimeout((()=>{n?.classList.remove("pinned")}),Math.max(1e3,s-Date.now()))}else if(i.size>0){const[{el:e}]=i;e.before(n)}else t.appendChild(n);t.childElementCount>100&&t.removeChild(t.firstElementChild),t.scrollTop=t.scrollHeight+100}e.user?._id!==bn.id()||!$n(p(e.content))||e.user.supporter||[...Xn,"bot"].includes(e.user.role)||ie({content:'That emote is for supporters only! Consider <a class="chatlink" href="javascript:void();" onclick="SHOW_SUPPORTER_DIALOG();">supporting TETR.IO development</a> to get access to this emote and more. <3',system:!0},!0)}function oe(e,t){vt(`.chat_message[data-id="${e}"]`).forEach((e=>{if(!e.classList.contains("system")){if(t)return e.remove();e.classList.add("deleted"),e.querySelector("p").innerText="<message deleted>"}}))}function ae(){document.body.classList.contains("inpair")||document.body.classList.contains("multi_advancing")||(Di("rsg","3"),xa.SePlay("rsg"),setTimeout((()=>{Di("rsg","2"),xa.SePlay("rsg")}),500),setTimeout((()=>{Di("rsg","1"),xa.SePlay("rsg")}),1e3),setTimeout((()=>{Di("rsg","GO!"),xa.SePlay("rsg_go")}),1500))}function re(e,t,n,s){xa.SePlay("victory"),xt("victory_header").innerHTML=s?"WINNERS!":"WINNER!",xt("victory_victor").innerHTML=e,xt("victory_sub").innerHTML=t,xt("victory_also").innerHTML=n,xt("victory").classList.remove("hidden"),setTimeout((()=>{xt("victory").classList.add("hidden")}),5e3)}function le(e,t,n,s,i,o,a,r){const l=document.createElement("div");l.classList.add("scroller_block"),l.classList.add("playerresult"),l.classList.add("record_item"),l.setAttribute("data-id",n),l.setAttribute("data-hover","tap"),l.setAttribute("data-hit","click"),t&&l.classList.add("record_first"),r||l.classList.add("disconnected"),s===bn.username()&&l.classList.add("record_me"),xt("playerresults").appendChild(l);const c=document.createElement("div");c.classList.add("record_grade"),c.classList.add("ns"),c.innerHTML=e,l.appendChild(c);const p=document.createElement("div");p.classList.add("record_owner"),p.innerHTML=s.toUpperCase(),l.appendChild(p);const h=document.createElement("div");h.classList.add("record_ts"),h.innerHTML=a,l.appendChild(h);const d=document.createElement("div");d.classList.add("record_result"),d.innerHTML=i,l.appendChild(d);const u=document.createElement("div");u.classList.add("record_extra"),u.innerHTML=o,l.appendChild(u)}function ce(e,t,n){const s=document.createElement("tr");e.appendChild(s);const i=document.createElement("td");i.innerHTML=t,s.appendChild(i);const o=document.createElement("td");o.innerHTML=n,s.appendChild(o)}function pe(){qi("fetching room listing"),Cn.get("/api/rooms/").then((e=>{Ki(),he(e.rooms),gi.bindGuide(fi[Li]||{})}),(e=>{Ki(),sn(e)}))}function he(e){const t=xt("room_listing_container");if(t.innerHTML="",e.forEach((e=>{const n=document.createElement("div");n.classList.add("scroller_block"),n.classList.add("room_listing_item"),n.classList.add("ns"),n.setAttribute("data-hover","hover"),n.setAttribute("data-hit","confirm"),n.setAttribute("title",!1!==ot.video.chatfilter&&e.name_safe?e.name_safe:e.name),t.appendChild(n);const s=document.createElement("div");s.classList.add("room_listing_name"),s.textContent=!1!==ot.video.chatfilter&&e.name_safe?e.name_safe:e.name,n.appendChild(s);const i=document.createElement("div");i.classList.add("room_listing_count"),i.innerHTML=`${e.players}${e.userLimit?`<span class="room_listing_limit">/${e.userLimit}</span>`:""}${e.count-e.players?`<span class="room_listing_spectators">+${e.count-e.players}</span>`:""}`,n.appendChild(i);const o=document.createElement("div");o.classList.add("room_listing_info"),o.innerHTML=`${"system"===e.type?"SYSTEM -":""} ${e.state.toUpperCase()} ${"z"!==e.userRankLimit?`- <img class="room_listing_rank" src="/res/league-ranks/${e.userRankLimit}.png"/> and below - `:"- "} <span class="room_listing_id">${e.id}</span>`,n.appendChild(o);const a=document.createElement("div");a.classList.add("room_listing_extra"),a.innerHTML=`anons allowed: <span>${e.allowAnonymous?"YES":"NO"}</span>, unranked allowed: <span>${e.allowUnranked?"YES":"NO"}</span>`,n.appendChild(a),n.addEventListener("click",(()=>{F(e.id)}))})),!e.length){const e=document.createElement("div");e.classList.add("scroller_block"),e.classList.add("nothing"),e.classList.add("ns"),e.innerHTML="NO ROOMS",t.appendChild(e)}}let de=!1,ue=null;function _e(e){e!==de&&(e?(xt("referee").classList.remove("hidden"),xt("referee").classList.remove("hiding"),xt("referee_score_side").classList.remove("hidden"),xt("referee_score_side").classList.remove("hiding")):(xt("referee").classList.add("hiding"),xt("referee_score_side").classList.add("hiding"),setTimeout((()=>{e===de&&(xt("referee").classList.add("hidden"),xt("referee_score_side").classList.add("hidden"),ue&&(ue.Destroy(),ue=null))}),500)),de=e)}function me(n){switch(d=n,n.rb.type){case"multi-round":{xt("referee").classList.toggle("ft1",1===n.rb.options.ft&&1===n.rb.options.wb),xt("exit_spectate").classList.toggle("blocked",!p&&(1!==n.rb.options.ft||1!==n.rb.options.wb)),xt("zen_spectate").classList.toggle("blocked",!p&&(1!==n.rb.options.ft||1!==n.rb.options.wb)),xt("referee").classList.toggle("duel",2===n.rb.leaderboard.length||n.rb.leaderboard.length>8),xt("referee_top").textContent=`${n.modename} FT${n.rb.options.ft}${1!==n.rb.options.wb?`+${n.rb.options.wb}${n.rb.options.gp?`(${n.rb.options.gp})`:""}`:""}`;let s=-1;const i=[];2===n.rb.leaderboard.length&&n.rb.leaderboard.sort(((e,t)=>e.naturalorder-t.naturalorder)),n.rb.leaderboard.forEach((n=>{if(n.id==bn.id()){s++;const o=s>=8?t:e[s];i.push(`<div class="referee_point" style="--r: ${o[0]}; --g: ${o[1]}; --b: ${o[2]};"><h1>${n.wins}</h1><p>${n.username.toUpperCase()}</p></div>`)}}));let o=!0,a=!0,r=0,l=0;n.rb.leaderboard.forEach((c=>{if(c.id==bn.id())return;if(!a)return;if(n.rb.leaderboard.length>=8){if(c.wins<l)return void(a=!1);if(r++,l=c.wins,!o)return;o=!1}s++;const p=s>=8?t:e[s];i.push(`<div class="referee_point" style="--r: ${p[0]}; --g: ${p[1]}; --b: ${p[2]};"><h1>${c.wins}</h1><p>${c.username.toUpperCase()}</p></div>`)}));let c=i.join('<div class="referee_sep">-</div>');r>1&&(c+=`<div class="referee_sep">+${r-1}</div>`),xt("referee_points").innerHTML=c,xt("referee").classList.remove("disabled");break}default:xt("referee").classList.add("disabled")}if("zenith"===n.rrb.type)b(n.rrb.scoreboard);ge(n)}function ge(e){if("zenith"===e.rrb.type)ue||(ue=new cr),ue.Update(e.rrb.scoreboard)}function fe(e){window.XDBGSCOREBOARDWIN.document.getElementById("tbl").innerHTML=`\n\t\t<thead>\n\t\t\t<td style="width: 2.5rem;">#</td>\n\t\t\t<td style="width: 9rem;">UID</td>\n\t\t\t<td style="width: 10rem;">Username</td>\n\t\t\t<td style="width: 4rem;">Altitude</td>\n\t\t\t<td style="width: 4rem;">Speed</td>\n\t\t\t<td style="width: 4rem;">Lifetime</td>\n\t\t\t<td style="width: 4rem;">APM</td>\n\t\t\t<td style="width: 4rem;">PPS</td>\n\t\t\t<td style="width: 4rem;">VS</td>\n\t\t\t<td style="width: 4rem;">Recv</td>\n\t\t\t<td style="width: 4rem;">Sent</td>\n\t\t\t<td style="width: 4rem;">Elims</td>\n\t\t\t<td style="width: 5rem;">Tgt.Factor</td>\n\t\t\t<td style="width: 5rem;">Tgt.Grace</td>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t${e.map(((e,t)=>`\n\t\t\t\t<tr class="${e.id.startsWith("00")?"bot ":""}${er&&e.username===(er.GetSpectate()??er.games.self)?.getOwner()?"spec ":""}" data-username="${e.username}">\n\t\t\t\t\t<td class="imp">${t+1}</td>\n\t\t\t\t\t<td class="mono">${e.id}</td>\n\t\t\t\t\t<td class="imp">${e.username}</td>\n\t\t\t\t\t<td class="imp">${e.stats.altitude.toFixed(1)}</td>\n\t\t\t\t\t<td>${Math.floor(e.stats.rank)}</td>\n\t\t\t\t\t<td${e.lifetime>48e4?' style="color: #F00;"':""}>${Math.floor(e.lifetime/6e4)}m ${(Math.floor(e.lifetime/1e3)%60).toString().padStart(2,"0")}s</td>\n\t\t\t\t\t<td>${e.stats.apm.toFixed(2)}</td>\n\t\t\t\t\t<td>${e.stats.pps.toFixed(2)}</td>\n\t\t\t\t\t<td>${e.stats.vsscore.toFixed(2)}</td>\n\t\t\t\t\t<td>${e.stats.garbagereceived}</td>\n\t\t\t\t\t<td>${e.stats.garbagesent}</td>\n\t\t\t\t\t<td>${e.stats.kills}</td>\n\t\t\t\t\t<td>${Math.max(0,e.stats.targetingfactor+(0===t?2:0)-(.02*e.stats.targetinggrace**2+.1*e.stats.targetinggrace)).toFixed(2)}</td>\n\t\t\t\t\t<td>${e.stats.targetinggrace}</td>\n\t\t\t\t</tr>\n\t\t\t`)).join("")}\n\t\t</tbody>\n\t`}function be(e,t){const n=2===t.rb.leaderboard.length,s=e[0].username;if(n&&t.rb.leaderboard.sort(((e,t)=>e.naturalorder-t.naturalorder)),xt("scoreslide_header").textContent=`${t.modename} FT${t.rb.options.ft}${1!==t.rb.options.wb?`+${t.rb.options.wb}${t.rb.options.gp?`(${t.rb.options.gp})`:""}`:""}`,xt("scoreslide").classList.toggle("duel",n),xt("scoreslide").classList.remove("pinged"),xt("scoreslide").classList.remove("pingedp1"),xt("scoreslide").classList.remove("pingedp2"),n){let e=1,n=0;t.rb.leaderboard[1].username===bn.username()?(At("#scoreslide_duel_p1 p").innerHTML=t.rb.leaderboard[1].username.toUpperCase(),At("#scoreslide_duel_p2 p").innerHTML=t.rb.leaderboard[0].username.toUpperCase(),t.rb.leaderboard[1].username===s?(e=1,n=t.rb.leaderboard[1].wins,At("#scoreslide_duel_p1 h1").innerHTML=t.rb.leaderboard[1].wins-1,At("#scoreslide_duel_p2 h1").innerHTML=t.rb.leaderboard[0].wins):(e=2,n=t.rb.leaderboard[0].wins,At("#scoreslide_duel_p1 h1").innerHTML=t.rb.leaderboard[1].wins,At("#scoreslide_duel_p2 h1").innerHTML=t.rb.leaderboard[0].wins-1)):(At("#scoreslide_duel_p1 p").innerHTML=t.rb.leaderboard[0].username.toUpperCase(),At("#scoreslide_duel_p2 p").innerHTML=t.rb.leaderboard[1].username.toUpperCase(),t.rb.leaderboard[0].username===s?(e=1,n=t.rb.leaderboard[0].wins,At("#scoreslide_duel_p1 h1").innerHTML=t.rb.leaderboard[0].wins-1,At("#scoreslide_duel_p2 h1").innerHTML=t.rb.leaderboard[1].wins):(e=2,n=t.rb.leaderboard[1].wins,At("#scoreslide_duel_p1 h1").innerHTML=t.rb.leaderboard[0].wins,At("#scoreslide_duel_p2 h1").innerHTML=t.rb.leaderboard[1].wins-1)),document.body.classList.contains("inpair")&&(setTimeout((()=>{xt("scoreslide").classList.add("leaguess"),document.body.classList.add("shaking"),xa.SePlay("impact")}),250),setTimeout((()=>{document.body.classList.remove("shaking")}),300),setTimeout((()=>{xt("scoreslide").classList.remove("leaguess")}),5e3)),setTimeout((()=>{let e=Math.max(t.rb.options.ft,(t.rb.leaderboard[0].wins>=t.rb.leaderboard[1].wins?t.rb.leaderboard[1]:t.rb.leaderboard[0]).wins+t.rb.options.wb);t.rb.options.wb>1&&t.rb.options.gp&&(e=Math.min(e,t.rb.options.gp));const n=t.rb.leaderboard[1].username===bn.username()?t.rb.leaderboard[1]:t.rb.leaderboard[0],s=t.rb.leaderboard[1].username===bn.username()?t.rb.leaderboard[0]:t.rb.leaderboard[1],i=e-n.wins,o=e-s.wins;1===i&&1===o?(xt("scoreslide_duel_match").innerHTML="TIEBREAKER",xt("scoreslide_duel_match").classList.add("ssdm_p3"),setTimeout((()=>{document.body.classList.add("shaking"),xa.SePlay("allclear")}),350),setTimeout((()=>{document.body.classList.remove("shaking")}),400)):1===i?(xt("scoreslide_duel_match").innerHTML="MATCH POINT",xt("scoreslide_duel_match").classList.add("ssdm_p1")):1===o?(xt("scoreslide_duel_match").innerHTML="MATCH POINT",xt("scoreslide_duel_match").classList.add("ssdm_p2")):2===t.rb.options.wb&&n.wins>=t.rb.options.ft-1&&i===t.rb.options.wb&&o===t.rb.options.wb&&(xt("scoreslide_duel_match").innerHTML="DEUCE",xt("scoreslide_duel_match").classList.add("ssdm_p4"),setTimeout((()=>{document.body.classList.add("shaking"),xa.SePlay("allclear")}),350),setTimeout((()=>{document.body.classList.remove("shaking")}),400))}),1500),setTimeout((()=>{xt("scoreslide_duel_match").classList.remove("ssdm_p1"),xt("scoreslide_duel_match").classList.remove("ssdm_p2"),xt("scoreslide_duel_match").classList.remove("ssdm_p3"),xt("scoreslide_duel_match").classList.remove("ssdm_p4")}),5e3),setTimeout((()=>{xa.SePlay("showscore"),xt("scoreslide").classList.add(`pingedp${e}`),At(`#scoreslide_duel_p${e} h1`).innerHTML=n,xl.play("scoreslide_ultra",{right:1!==e})}),1500)}else{let e=0,n="";t.rb.leaderboard.forEach((t=>{t.username===s&&(e=t.wins,xt("scoreslide_leader_name").innerHTML=t.username.toUpperCase(),xt("scoreslide_leader_points").innerHTML=t.wins-1),n+=`<div class="scoreslide_player"><p>${t.username.toUpperCase()}</p><h1>${t.wins}</h1></div>`})),xt("scoreslide_list").innerHTML=n,setTimeout((()=>{xa.SePlay("showscore"),xt("scoreslide").classList.add("pinged"),xt("scoreslide_leader_points").innerHTML=e}),1500)}xt("scoreslide").classList.remove("hidden"),xa.SePlay("scoreslide_in"),setTimeout((()=>{xt("scoreslide").classList.remove("hiding")}),20),setTimeout((()=>{xt("scoreslide").classList.add("hiding"),xa.SePlay("scoreslide_out")}),4e3),setTimeout((()=>{xt("scoreslide").classList.add("hidden")}),5e3)}function Ce(){qi("entering matchmaking"),Ja.emit("league.enter")}function ye(){qi("leaving matchmaking"),Ja.emit("league.leave")}function xe(){qi("getting ready to spectate"),Ja.emit("game.spectate")}function Ae(e={}){qi("joining game"),Ja.emit("game.enter",e)}function ve(){qi("rejoining game"),Ja.emit("game.replace")}function ke(){Ja.emit("game.forfeit")}function we(e,t){const n=vi;let s=0;const i=setInterval((()=>{let o=Math.round(Ll(n,e,s,a(.74,.03,.09,.97))-n);xt("leaguestanding_rating").innerHTML=`${Math.round(Ll(n,e,s,a(.74,.03,.09,.97)))}<span>TR</span>${-1!==n?` <span class="leaguechange">${0===o?"":o>=150?"":o>0?"":o<=-150?"":""}${Math.abs(o)}</span>`:""}`,s+=1/t,s>=1&&(o=Math.round(e-n),xt("leaguestanding_rating").innerHTML=`${e}<span>TR</span>${-1!==n?` <span class="leaguechange">${0===o?"":o>=150?"":o>0?"":o<=-150?"":""}${Math.abs(o)}</span>`:""}`,clearInterval(i),vi=e)}),16)}function Be(){xt("leaguestanding_rating").innerHTML=`${vi}<span>TR</span> <span class="leaguechange">0</span>`}function Le(e,t){const n=wi;let s=0;const i=setInterval((()=>{let o=Math.round(n-Ll(n,e,s,a(.74,.03,.09,.97)));xt("leaguestanding_placement").innerHTML=`#<span>${Math.round(Ll(n,e,s,a(.74,.03,.09,.97)))}</span>`,xt("leaguestanding_placement").classList.toggle("t100",Math.round(Ll(n,e,s,a(.74,.03,.09,.97)))<=100&&Math.round(Ll(n,e,s,a(.74,.03,.09,.97)))>10),xt("leaguestanding_placement").classList.toggle("t10",Math.round(Ll(n,e,s,a(.74,.03,.09,.97)))<=10&&Math.round(Ll(n,e,s,a(.74,.03,.09,.97)))>1),xt("leaguestanding_placement").classList.toggle("t1",1===Math.round(Ll(n,e,s,a(.74,.03,.09,.97)))),xt("leaguestanding_placement_change").innerHTML=-1!==n?`${0===o?"":o>=10?"":o>0?"":o<=-10?"":""}${Math.abs(o)}</span>`:"",s+=1/t,s>=1&&(o=Math.round(n-e),xt("leaguestanding_placement").innerHTML=`#<span>${e}</span>`,xt("leaguestanding_placement").classList.toggle("t100",e<=100&&e>10),xt("leaguestanding_placement").classList.toggle("t10",e<=10&&e>1),xt("leaguestanding_placement").classList.toggle("t1",1===e),xt("leaguestanding_placement_change").innerHTML=-1!==n?`${0===o?"":o>=10?"":o>0?"":o<=-10?"":""}${Math.abs(o)}</span>`:"",clearInterval(i),wi=e)}),16)}function Se(){xt("leaguestanding_placement_change").innerHTML="0"}function ze(e){const t=ki;if(t===e)return void(xt("leaguestanding_rank").src=`/res/league-ranks/${e}.png`);const n=Gn.indexOf(t);Gn.indexOf(e)>n?(xt("leaguestanding_rank").classList.add("rankraise"),setTimeout((()=>{xa.SePlay("rankraise")}),400),setTimeout((()=>{document.body.classList.add("shaking")}),1800),setTimeout((()=>{document.body.classList.remove("shaking")}),1900)):(setTimeout((()=>{xa.SePlay("ranklower")}),400),xt("leaguestanding_rank").classList.add("ranklower")),setTimeout((()=>{xt("leaguestanding_rank").src=`/res/league-ranks/${e}.png`}),1050),setTimeout((()=>{xt("leaguestanding_rank").classList.remove("rankraise"),xt("leaguestanding_rank").classList.remove("ranklower")}),4500),ki=e}function Fe(e){ki===e&&(xt("leaguestanding_rank").src=`/res/league-ranks/${e}.png`)}return window.DEVHOOK_ALTERNATE_ZTH_COUNTERS=()=>{if(!["halfmod","mod","admin","sysop"].includes(bn.role()))for(;;)me(d);or=!0},window.DEVHOOK_OPEN_DEBUG_SCOREBOARD_VIEW=()=>{if(Ws(!1),!i)return;window.XDBGSCOREBOARDWIN&&window.XDBGSCOREBOARDWIN.close();const e=open("about:blank","_blank","popup,width=1500,height=800");e.document.body.innerHTML='<table id="tbl"></table><style>\n\t\t\thtml {\n\t\t\t\tbackground: #000;\n\t\t\t\tcolor: #FFF;\n\t\t\t\tfont-family: sans-serif;\n\t\t\t}\n\n\t\t\t#tbl {\n\t\t\t\tborder-collapse: collapse;\n\t\t\t\ttable-layout: fixed;\n\t\t\t}\n\n\t\t\t#tbl tr:nth-child(odd) td {\n\t\t\t\tbackground: #2a2a2a;\n\t\t\t}\n\n\t\t\t#tbl thead {\n\t\t\t\tposition: sticky;\n\t\t\t\ttop: 0;\n\t\t\t}\n\n\t\t\t#tbl td {\n\t\t\t\tborder: 1px solid #666;\n\t\t\t\tpadding: 0.25rem;\n\t\t\t}\n\n\t\t\t.mono {\n\t\t\t\tfont-family: monospace;\n\t\t\t}\n\t\t\t.imp {\n\t\t\t\tfont-weight: 900;\n\t\t\t}\n\n\t\t\t.bot {\n\t\t\t\tcolor: #888;\n\t\t\t}\n\t\t\t.spec {\n\t\t\t\tcolor: #ffaa00;\n\t\t\t}\n\t\t</style>',e.document.body.addEventListener("click",(e=>{er&&e.target.closest("[data-username]")&&er.SetSpectate(e.target.closest("[data-username]").dataset.username)})),e.addEventListener("beforeunload",(()=>window.XDBGSCOREBOARDWIN=null));const t=setInterval((async()=>{if(!i||!window.XDBGSCOREBOARDWIN||e.id!==window.XDBGSCOREBOARDWIN.id)return clearInterval(t);try{fe((await Cn.get(`/api/admin/room/${i.id}/debug`)).result)}catch(e){console.error(e)}}),1e3);e.id=t,window.XDBGSCOREBOARDWIN=e,Ws(!0)},{createRoom:z,joinRoom:F,leaveRoom:T,sendChatMessage:O,startRoom:P,switchBracket:$,switchBracketHost:G,pushRoomConfigString:M,saveRoomConfig:E,clearRoomConfig:I,setRoomID:D,loadListing:pe,kickUser:R,unbanUser:W,transferOwnership:U,takeOwnership:X,enterMatchmaking:Ce,leaveMatchmaking:ye,startMidgameSpectate:xe,enterMidgame:Ae,replaceMidgame:ve,forfeitMidgame:ke,dropMultiplex:()=>{er?.End(),xa.BgmFadeOut(),_e(!1),xt("leaveroom").classList.remove("hidden"),xt("waitstate").classList.contains("hidden")||(xa.BgmSetLowPass(!1),xt("waitstate").classList.add("hiding"),setTimeout((()=>{xt("waitstate").classList.add("hidden")}),500)),xt("spectate").classList.add("hidden"),xt("zenithmenu").classList.remove("rolledup"),document.body.classList.remove("multiplexed"),document.body.classList.remove("inmulti"),document.body.classList.remove("spectating"),document.body.classList.remove("room_spectating"),document.body.classList.remove("room_midgame_spectating"),document.body.classList.remove("inpair"),tr=!1,h=!1},stopSpectating:(e=!1)=>{if(lr.dropMultiplex(),!e){Wi(!0),Hi("lobby");try{xa.BgmPlaySmoothly(i.lobbybgm)}catch{}}},addChatMessage:ie,showAnnouncement:e=>{ie({content:e,user:{username:"[SYS]",_id:null},system:!1,announcement:!0})},returnToRoom:()=>{o="lobby",ll("online",o,i.public?i.id:"X-PRIV");try{xa.BgmPlaySmoothly(i.lobbybgm)}catch{}},isInRoom:()=>c,getRoomUsernames:(e="")=>i.players.map((e=>e.username)).filter((t=>t.startsWith(e))),getCurrentMatch:()=>d,getRefereeScoreSide:()=>ue,setSpecGameID:e=>Ja.emit("game.setspec",e||0)}})();class cr{_baseTexture;_tex={bg:{base:{},focused:{},friend:{}},flash:null,flashInner:null,mod_base:null,mod_overflow:null,mod_reverse:null,mods:{},modset_base:null,modsets:{},ranks:{},extrabg:null,spectators:null,b2b:null,revives:null,escapeartist:null,blockrationing:null,talentless:null};_scale=1;_height=1;_stickyAmt=0;_ticker=null;_containerBack=null;_containerFront=null;_els=new Map;_topPadding=2;_bottomPadding=1.5;_ticking=!1;_lastUpdate=0;_lastReflow=0;_mustReflow=!1;_friendCache=new Map;_tick=this._Tick.bind(this);_onScroll=this._OnScroll.bind(this);_onMouseMove=this._OnMouseMove.bind(this);_onResize=()=>{this.Reflow()};_scoreboard=[];_pos=0;_posTarget=0;_focused=!0;_focusedOn=null;_above=null;_topStickyCount=0;_bottomStickyCount=0;speedrunFlash=-1;rightMargin=0;constructor(){this._baseTexture=o.BaseTexture.from("/res/scoreside.png?v=2");for(let e=0;e<7;e++){const t=["any","t50","t25","t10","t3","t2","t1"][e];this._tex.bg.base[t]=new o.Texture(this._baseTexture,new o.Rectangle(2+60*e,6,47,76)),this._tex.bg.focused[t]=new o.Texture(this._baseTexture,new o.Rectangle(2+60*e,86,47,76)),this._tex.bg.friend[t]=new o.Texture(this._baseTexture,new o.Rectangle(2+60*e,166,47,76))}this._tex.flash=new o.Texture(this._baseTexture,new o.Rectangle(418,48,94,158)),this._tex.flashInner=new o.Texture(this._baseTexture,new o.Rectangle(498,48,14,158)),this._tex.mod_base=new o.Texture(this._baseTexture,new o.Rectangle(2,251,32,32)),this._tex.mod_overflow=new o.Texture(this._baseTexture,new o.Rectangle(37,251,19,32)),this._tex.mod_reverse=new o.Texture(this._baseTexture,new o.Rectangle(58,251,32,32));for(let e=0;e<8;e++){const t=["allspin","doublehole","expert","gravity","invisible","messy","nohold","volatile"][e];this._tex.mods[t]=new o.Texture(this._baseTexture,new o.Rectangle(92+34*e,251,32,32)),this._tex.mods[`${t}_reversed`]=new o.Texture(this._baseTexture,new o.Rectangle(92+34*e,251,32,32),void 0,void 0,o.groupD8.W)}this._tex.modset_base=new o.Texture(this._baseTexture,new o.Rectangle(2,285,36,32));for(let e=0;e<11;e++){this._tex.modsets[["gravity,nohold","doublehole,messy,nohold","gravity,invisible","doublehole,expert,nohold","doublehole,expert,messy,volatile","allspin,doublehole,messy","allspin,doublehole,expert,gravity,invisible,messy,nohold,volatile","allspin,nohold","allspin,expert,volatile","X-LITE","expert,messy"][e]]=new o.Texture(this._baseTexture,new o.Rectangle(40+38*e,285,36,32))}for(let e=0;e<10;e++)this._tex.ranks[e]=new o.Texture(this._baseTexture,new o.Rectangle(7+20*e,322,19,56));this._tex.extrabg=new o.Texture(this._baseTexture,new o.Rectangle(214,322,100,54)),this._tex.spectators=new o.Texture(this._baseTexture,new o.Rectangle(318,322,33,54)),this._tex.b2b=new o.Texture(this._baseTexture,new o.Rectangle(355,322,43,54)),this._tex.revives=new o.Texture(this._baseTexture,new o.Rectangle(402,322,43,54)),this._tex.escapeartist=new o.Texture(this._baseTexture,new o.Rectangle(449,322,43,54)),this._tex.blockrationing=new o.Texture(this._baseTexture,new o.Rectangle(2,380,43,54)),this._tex.talentless=new o.Texture(this._baseTexture,new o.Rectangle(49,380,43,54)),this.Reflow(),xt("pixi").addEventListener("wheel",this._onScroll,{passive:!1}),xt("pixi").addEventListener("mousemove",this._onMouseMove,{passive:!1}),window.addEventListener("resize",this._onResize)}Reflow(){this._scale=.5,this._height=window.innerHeight,this._stickyAmt=Math.round(Math.min(10,Math.max(3,3+(this._height/(70*this._scale)-22)/3))),this._ticker&&this._ticker.destroy(),this._containerBack&&this._containerBack.destroy(),this._containerFront&&this._containerFront.destroy(),this._els.clear(),this._ticker=new d.Text("",{font:Rl.get("hun"),rasterize:!0,fontSize:44*this._scale,weight:700,tint:16777215,alpha:.8,anchor:[.5,0]}),this._ticker.zIndex=499,this._ticker.position.set(-bs+window.innerWidth-this.rightMargin-300*this._scale,16*this._scale-Cs+this._topPadding*(70*this._scale)),this._ticker._baseY=this._ticker.position.y,this._ticker._baseYtarget=this._ticker.position.y,Ul.addChild(this._ticker),this._containerBack=new o.Container,this._containerBack.zIndex=500,Ul.addChild(this._containerBack),this._containerBack.position.set(window.innerWidth-bs,ws(400)),this._containerFront=new o.Container,this._containerFront.zIndex=501,Ul.addChild(this._containerFront),this._containerFront.position.set(window.innerWidth-bs,ws(400))}Destroy(){this._ticking&&o.Ticker.shared.remove(this._tick),this._ticker&&this._ticker.destroy(),this._containerBack&&this._containerBack.destroy(),this._containerFront&&this._containerFront.destroy(),this._els.clear(),xt("pixi").removeEventListener("wheel",this._onScroll),xt("pixi").removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("resize",this._onResize)}Update(e){this._scoreboard=e,this._lastUpdate=performance.now(),this._mustReflow=!0,this.rightMargin=document.body.classList.contains("igceriad-mounted_right")?160:0,this._ticker.position.x=-bs+window.innerWidth-this.rightMargin-300*this._scale,this._containerBack.position.x=window.innerWidth-bs-this.rightMargin,this._containerFront.position.x=window.innerWidth-bs-this.rightMargin,this._ticking||(this._ticking=!0,"minimal"===ot.video.graphics?this._Tick(1):o.Ticker.shared.add(this._tick))}_Tick(e){const t=performance.now();if(t-this._lastUpdate>=5e3&&(this._ticking=!1),!this._ticking)return void o.Ticker.shared.remove(this._tick);const n="minimal"===ot.video.graphics;xt("menus").classList.contains("hidden")?xt("spectate").classList.contains("hidden")?(this._topPadding=0,this._bottomPadding=0):(this._topPadding=1.5,this._bottomPadding=0):(this._topPadding=2,this._bottomPadding=1.5),this._focused&&!this._focusedOn&&(this._posTarget=0),this._posTarget=Math.max(this._posTarget,this._height/(70*this._scale)/2-this._topPadding-1.5),this._pos=n?this._posTarget:this._posTarget+(this._pos-this._posTarget)*Math.pow(this._focused?.8:.95,e),this._ticker._baseYtarget=16*this._scale-Cs+this._topPadding*(70*this._scale),this._ticker._baseY=n?this._ticker._baseYtarget:this._ticker._baseYtarget+(this._ticker._baseY-this._ticker._baseYtarget)*Math.pow(this._focused?.8:.95,e);const s=Math.max(0,Math.min(1,this._pos-(this._height/(70*this._scale)/2-this._topPadding-1.5)));this._ticker.position.y=this._ticker._baseY-30*this._scale*s,this._ticker.alpha=.7*(1-s),this._ReflowScoreboard(e,t),this._ReflowSticky();const i=Math.ceil(this._height/(70*this._scale)*.75),a=new Set;let r=0;for(let t=0;t<this._scoreboard.length;t++){const s=this._scoreboard[t];r+=s.shadows[0]?2:1;let o=!1;if(t>=this._pos-i&&t<=this._pos+i&&(o=!0),s.id!==this._focusedOn&&s.shadows[0]?.[0]!==this._focusedOn||(o=!0),s.sticky&&(o=!0),!o){this._els.has(s.id)&&(this._els.get(s.id).destroy(),this._els.delete(s.id));continue}s.placement=t+1,s.focused=s.id===this._focusedOn||s.shadows[0]?.[0]===this._focusedOn;const l=s.focused||s.sticky?this._containerFront:this._containerBack;let c=this._els.get(s.id);if(c&&!c._destroyed||(c=new pr(s,this),this._els.set(s.id,c),l.addChild(c),c.__i=t),!n&&s.focused){if(Math.floor(t)<Math.floor(c.__i)){if(t<=50||!!this._above&&(s._rssReflowed??s.stats.altitude)>(this._above._rssReflowed??this._above.stats.altitude)){c.flashPower=1;const e=nc(c,.5*(-c._w-c._offset),-35);xl.play("zenith_lbping",{x:e.x,y:e.y,w:this._scale*(c._w-c._offset)})}}this._above=this._scoreboard[t-1]}if(c.__i=n?t:t+(c.__i-t)*Math.pow(.95,e),Math.abs(c.__i-t)<.02&&(c.__i=t),c.Tick(e,s),!this._focused||s.id!==this._focusedOn&&s.shadows[0]?.[0]!==this._focusedOn||(this._posTarget=c.__i),c.position.y=70*this._scale*(c.__i-this._pos),s.sticky)c.position.y="top"===s.stickySide?Math.max(c.position.y,-.5*this._height+(.5+s.stickyPos+this._topPadding)*(70*this._scale)):Math.min(c.position.y,.5*this._height-(.5+s.stickyPos+this._bottomPadding)*(70*this._scale)),c.alpha=1,c._offset=3.5*s.stickyPos;else{let e=1;if(this._topStickyCount){e=Math.min(e,(c.position.y-(-.5*this._height+(.5+this._topStickyCount+this._topPadding)*(70*this._scale))+100*this._scale)/(200*this._scale))}if(this._bottomStickyCount){e=Math.min(e,(.5*this._height-(.5+this._bottomStickyCount+this._bottomPadding)*(70*this._scale)-c.position.y+100*this._scale)/(200*this._scale))}c.alpha=Math.max(0,Math.min(1,e)),c._offset=c.__i<.67*i?0:(Math.abs(c.__i-this._pos)/2)**2/(i/15)*2}l!==c.parent&&l.addChild(c),a.add(c)}for(const e of this._containerFront.children)e.destroying||a.has(e)||e.Kill(!1);for(const e of this._containerBack.children)e.destroying||a.has(e)||e.Kill(!1);this._ticker.text=`${r} \fc3PLAYING NOW`,n&&(Yl=!0,this._ticking=!1)}_ReflowScoreboard(e,t){let n=null;const s=er?er.GetSpectate()??er.games.self:null;this._focusedOn=s?er.games.getUserIDByID(s.id):null,s&&(s===er.games.self||s.isScoped()&&s.isSynced())&&(n=s.getZenithAltitude());if(["medium","high","ultra"].includes(ot.video.graphics)&&(this._mustReflow||t-this._lastReflow>=100)){for(const e of this._scoreboard)if(e.id!==this._focusedOn&&e.shadows[0]?.[0]!==this._focusedOn||!n){if(this._els.has(e.id)){const n=e.stats.altitude;if(e.mods.includes("expert_reversed")){const s=.05*(me.GetFloorLevel(n)**2+me.GetFloorLevel(n)+10);e._rssReflowed=Math.max(me.FloorDistance[me.GetFloorLevel(n)-1],n-s/1e3*(t-this._lastUpdate))}else{const s=.25*Math.floor(e.stats.rank),i=me.GetSpeedCap(n);e._rssReflowed=n+s/1e3*(t-this._lastUpdate)*i}}}else e._rssReflowed=n;this._scoreboard.sort(((e,t)=>t._rssReflowed-e._rssReflowed)),this._lastReflow=t,this._mustReflow=!1}}_ReflowSticky(){const e=Math.ceil(this._height/(70*this._scale)*.4),t=[],n=[];for(let s=0;s<this._scoreboard.length;s++){const i=this._scoreboard[s];if(void 0===i.friend){const e=!!(this._friendCache.get(i.id)??"friend"===Qr(i.id)?.type),t=!!i.shadows[0]&&!!(this._friendCache.get(i.shadows[0][0])??"friend"===Qr(i.shadows[0][0])?.type);this._friendCache.set(i.id,e),i.shadows[0]&&this._friendCache.set(i.shadows[0][0],t),i.friend=e||t}s>=this._pos-e&&s<=this._pos+e?i.sticky=!1:(i.sticky=!1,_.zenith_cpu_count&&!i.username.includes(" ")&&(i.sticky=!0,i.__stickyPriority=-1),i.speedrun&&(i.sticky=!0,i.__stickyPriority=0),i.specCount>=5&&(i.sticky=!0,i.__stickyPriority=1),i.talentless&&(i._rssReflowed??i.stats.altitude)>=1100&&(i.sticky=!0,i.__stickyPriority=2),i.stats.blockrationing_app&&(i.sticky=!0,i.__stickyPriority=3),i.stats.escapeartist>=25&&(i.sticky=!0,i.__stickyPriority=4),i.stats.revives>=8&&(i.sticky=!0,i.__stickyPriority=5),i.stats.btb>=104&&(i.sticky=!0,i.__stickyPriority=6),i.nearWR&&(i.sticky=!0,i.__stickyPriority=7),i.friend&&(i.sticky=!0,i.__stickyPriority=10),s<3&&(i.sticky=!0,i.__stickyPriority=100),(i.id===this._focusedOn||i.shadows[0]?.[0]===this._focusedOn||i.focused)&&(i.sticky=!0,i.__stickyPriority=1e3),i.sticky&&(i.__stickyI=s,i.sticky=!1,(s<this._pos?t:n).push(i)))}t.sort(((e,t)=>t.__stickyPriority-e.__stickyPriority||e.__stickyI-this._pos-(t.__stickyI-this._pos))),n.sort(((e,t)=>t.__stickyPriority-e.__stickyPriority||e.__stickyI-this._pos-(t.__stickyI-this._pos))),t.splice(this._stickyAmt),n.splice(this._stickyAmt),t.sort(((e,t)=>e.__stickyI-this._pos-(t.__stickyI-this._pos))),n.sort(((e,t)=>e.__stickyI-this._pos-(t.__stickyI-this._pos)));for(let e=0;e<t.length;e++)t[e].sticky=!0,t[e].stickySide="top",t[e].stickyPos=e;for(let e=0;e<n.length;e++)n[e].sticky=!0,n[e].stickySide="bottom",n[e].stickyPos=Math.min(n.length,this._stickyAmt)-1-e;this._topStickyCount=Math.min(t.length,this._stickyAmt),this._bottomStickyCount=Math.min(n.length,this._stickyAmt)}Kill(e){for(let t=0;t<this._scoreboard.length;t++)if(this._scoreboard[t].id===e){this._scoreboard.splice(t,1);break}this._els.get(e)?.Kill(!0),this._els.delete(e)}_OnScroll(e){e.clientX<window.innerWidth-600*this._scale-this.rightMargin||(this._focused=!1,this._posTarget=Math.max(0,Math.min(this._scoreboard.length-1,this._posTarget+.05*e.deltaY)),"minimal"===ot.video.graphics&&(this._ticking=!0,this._Tick(1)),e.preventDefault(),e.stopPropagation())}_OnMouseMove(e){!this._focused&&e.clientX<window.innerWidth-600*this._scale-this.rightMargin&&(this._focused=!0,"minimal"===ot.video.graphics&&(this._ticking=!0,this._Tick(1)))}}class pr extends o.Container{_parent=null;_player=null;_bg=null;_speedrunFlash=null;_flash=null;_username=null;_score=null;_placement=null;_rank=null;_tex={};_w=600;_offset=0;_mods=[];_modcontainer=null;_modcontent=null;_extracontainer=null;_extra=null;_extra_btb=null;_extra_spec=null;_extra_revives=null;_extra_escapeartist=null;_extra_blockrationing=null;_extra_talentless=null;_t=0;flashPower=0;constructor(e,t){super(),this._player=e,this._parent=t,this._tex=t._tex,this.scale.set(this._parent._scale),this._CreateNSP();let n=!1,s="";if(this._player.shadows[0]){const e=this._player.username.length+this._player.shadows[0][1].length;e>12?(n=!0,s=`${this._player.username.toUpperCase()} &\n${this._player.shadows[0][1].toUpperCase()}`):s=e>10?`${this._player.username.toLowerCase()} & ${this._player.shadows[0][1].toLowerCase()}`:`${this._player.username.toUpperCase()} & ${this._player.shadows[0][1].toUpperCase()}`}else s=this._player.username.length>12?this._player.username.toLowerCase():this._player.username.toUpperCase();const i=this._player.mods.length&&this._player.mods[0].endsWith("_reversed");this._username=new d.Text(s,{font:Rl.get("hun"),rasterize:!0,fontSize:n?26:36,weight:n?700:600,tint:16777215,misalignment:i?[1,2,.07]:0}),this._username.position.set(30-this._w,n?-24:-14),this.addChild(this._username),this._score=new d.Text(this._FormatScore(this._player._rssReflowed??this._player.stats.altitude),{font:Rl.get("hun"),rasterize:!0,fontSize:42,weight:700,tint:16777215,anchor:[1,0],misalignment:i?[1,3,.07]:0}),this._score.position.set(-18,-16),this.addChild(this._score),this._placement=new d.Text(this._player.placement,{font:Rl.get("hun"),rasterize:!0,fontSize:this._player.placement<=10?26:22,weight:this._player.placement<=3?700:500,tint:16777215,alpha:this._player.placement<=10?1:this._player.placement<=50?.5:.3,anchor:[1,0]}),this._placement.position.set((this._player.focused||this._player.friend?0:10)-this._w,this._player.placement<=10?-10:-9),this.addChild(this._placement),1===this._player.placement&&(this._placement.tint=16760576),2===this._player.placement&&(this._placement.tint=16742144),3===this._player.placement&&(this._placement.tint=16728064),this._rank=new o.Sprite(this._GetRankSprite(this._player.stats.rank)),this._rank.renderable=this._player.stats.rank>=2,this._rank.position.set(-17,-28),this.addChild(this._rank),this._CreateMods(),this._CreateExtra(),this.renderable=!1,"minimal"!==ot.video.graphics?dc.animate(this,{0:{"position.x":600*this._parent._scale},1:{"position.x":0}},.5,a(.17,.67,.58,.99)):this._flash.visible=!1,setTimeout((()=>{this.renderable=!0}),1)}_FormatScore(e){return`${e>=1e3?`${Math.floor(e/1e3)},${(Math.floor(e)%1e3).toString().padStart(3,"0")}`:Math.floor(e)}\f3.${Math.floor(10*e)%10}`}_CalculatePlacementClass(e){return e<=1?"t1":e<=2?"t2":e<=3?"t3":e<=10?"t10":e<=25?"t25":e<=50?"t50":"any"}_CalculateScoreLength(e){return e<10?60:e<100?80:e<1e3?100:e<1e4?130:155}_GetRankSprite(e){return(e=Math.floor(e))<2?this._tex.ranks[0]:e>11?this._tex.ranks[9]:this._tex.ranks[e-2]}_CreateNSP(){const e=this._player.focused?"focused":this._player.friend?"friend":"base";this._player.placementClass=this._CalculatePlacementClass(this._player.placement),this._bg=new o.NineSlicePlane(this._tex.bg[e][this._player.placementClass],40,0,0,0),this._bg.width=this._w+this._parent.rightMargin/this._parent._scale,this._bg.height=76,this._bg.position.set(-this._w,-38),this.addChild(this._bg),this._bg.interactive=!0,this._bg.interactiveChildren=!1,this._bg.on("click",(()=>{if(document.body.classList.contains("ingame_phys"))return;if(!er)return;const e=er.Find(this._player.username);e&&er.SetSpectate(e.id)})),this._flash=new o.NineSlicePlane(this._tex.flash,80,0,0,0),this._flash.width=this._w+24+this._parent.rightMargin/this._parent._scale,this._flash.height=158,this._flash.position.set(-this._w-24,-75),this._flash.alpha=0,this.addChild(this._flash)}_CreateMods(){if(this._mods=[...this._player.mods].sort().filter((e=>"duo"!==e)),this._modcontainer=new o.Container,this._modcontainer.position.set(-this._CalculateScoreLength(this._player._rssReflowed??this._player.stats.altitude),0),this.addChild(this._modcontainer),0===this._mods.length)return;if(1===this._mods.length&&this._mods[0].endsWith("_reversed")){const e=new o.Sprite(this._tex.mod_reverse);e.position.set(-45,-16),e.tint=16711756,this._modcontainer.addChild(e);const t=new o.Sprite(this._tex.mods[this._mods[0]]);return t.position.set(-45,-16),void this._modcontainer.addChild(t)}const e=!this._mods.includes("duo")&&7===this._mods.length;if(this._tex.modsets[this._mods.join()]||e){const t=new o.Sprite(this._tex.modset_base);t.position.set(-49,-16),this._modcontainer.addChild(t);const n=new o.Sprite(e?this._tex.modsets["X-LITE"]:this._tex.modsets[this._mods.join()]);return n.position.set(-49,-16),n.tint=0,void this._modcontainer.addChild(n)}if(1===this._mods.length){const e=new o.Sprite(this._tex.mod_base);e.position.set(-45,-16),this._modcontainer.addChild(e);const t=new o.Sprite(this._tex.mods[this._mods[0]]);return t.position.set(-45,-16),t.tint=0,void this._modcontainer.addChild(t)}const t=new o.Sprite(this._tex.mod_base);t.position.set(-54,-16),this._modcontainer.addChild(t);const n=new o.Sprite(this._tex.mod_overflow);n.position.set(-32,-16),this._modcontainer.addChild(n),this._modcontent=new o.Sprite(this._tex.mods[this._mods[0]]),this._modcontent.position.set(-54,-16),this._modcontent.tint=0,this._modcontainer.addChild(this._modcontent)}_CreateExtra(){this._extracontainer=new o.Container,this._extracontainer.position.set(-this._w,-27),this._extracontainer.visible=!1,this.addChild(this._extracontainer);const e=new o.Sprite(this._tex.extrabg);e.position.set(-100,0),this._extracontainer.addChild(e),this._extra=new o.Container,this._extracontainer.addChild(this._extra),this.UpdateExtras(this._player)}Tick(e,t){if(this.destroying)return;this._t+=e;let n=!1;if(t.placement!==this._player.placement){const e=this._CalculatePlacementClass(t.placement);e!==this._player.placementClass&&(this._player.placementClass=e,n=!0),this._player.placement=t.placement,this._placement.fontSize=this._player.placement<=10?26:22,this._placement.weight=this._player.placement<=3?700:500,this._placement.alpha=this._player.placement<=10?1:this._player.placement<=50?.5:.3,this._placement.position.y=this._player.placement<=10?-10:-9,this._placement.tint=1===this._player.placement?16760576:2===this._player.placement?16742144:3===this._player.placement?16728064:16777215}if(t.focused!==this._player.focused&&(n=!0,this._player.focused=t.focused),t.mods.length!==this._player.mods.length&&(this._player.mods=t.mods,this._modcontainer&&this._modcontainer.destroy(),this._modcontent=null,this._modcontainer=null,this._CreateMods()),n){this._bg.texture=this._tex.bg[this._player.focused?"focused":this._player.friend?"friend":"base"][this._player.placementClass]}this._bg.width=this._w+this._parent.rightMargin/this._parent._scale,this._flash.width=this._w+24+this._parent.rightMargin/this._parent._scale;const s=t.speedrun?11:t.stats.rank;if(Math.floor(s)!==Math.floor(this._player.stats.rank)&&(this._player.stats.rank=s,this._rank.texture=this._GetRankSprite(this._player.stats.rank),this._rank.renderable=this._player.stats.rank>=2),this._score.text=this._FormatScore(t._rssReflowed??t.stats.altitude),this._placement.text=t.placement,this.flashPower=this.flashPower*Math.pow(.95,e),this._bg.position.x=-this._w+this._offset,this._flash.position.x=-this._w-24+this._offset,this._username.position.x=30-this._w+this._offset,this._placement.position.x=(this._player.focused||this._player.friend?0:10)-this._w+this._offset,this._modcontainer.position.x=-this._CalculateScoreLength(t._rssReflowed??t.stats.altitude),this._extracontainer.position.x=(this._player.focused||this._player.friend?0:10)-this._w+this._offset-10*t.placement.toString().length-10,this._modcontent){const e=Math.floor(this._t/90)%this._mods.length,t=this._t/90%1,n=this._tex.mods[this._mods[e]];n!==this._modcontent.texture&&(this._modcontent.texture=n),this._modcontent.alpha=Math.max(0,Math.min(1,10*t,10*(1-t)))}if(this.UpdateExtras(t),t.speedrun&&"minimal"!==ot.video.graphics){if(!this._speedrunFlash){this._speedrunFlash=new o.Container,this._speedrunFlash.position.set(-this._w-24,-75),this.addChild(this._speedrunFlash);const e=new o.NineSlicePlane(this._tex.flash,0,0,0,0);e.width=80,e.height=158,this._speedrunFlash.addChild(e);for(let e=1;e<8;e++){const t=new o.NineSlicePlane(this._tex.flashInner,0,0,0,0);t.width=80,t.height=158,t.position.set(80*e,0),this._speedrunFlash.addChild(t)}}for(let e=0;e<8;e++)this._speedrunFlash.children[e].tint=Tl(2.5*this._t+-10*e,100,50);this._rank.tint=Tl(25*this._t,100,80),this._score.tint=Tl(8*this._t,100,90),this._speedrunFlash.position.x=-this._w-24+this._offset,this._speedrunFlash.alpha=.3+.7*this.flashPower}else this._speedrunFlash&&(this._speedrunFlash.destroy(),this._speedrunFlash=null,this._rank.tint=16777215,this._score.tint=16777215);if(1!==this._parent.speedrunFlash){const e=(this.position.y+this._parent._height/2)/this._parent._height*.15,t=this._parent.speedrunFlash<e?0:Math.max(0,1-(this._parent.speedrunFlash-e)/.5);this._flash.alpha=.18*t+.7*this.flashPower,this._speedrunFlash&&(this._speedrunFlash.alpha=Math.min(1,.6*t+.3+.7*this.flashPower))}else this._flash.alpha=this.flashPower;t.nearWR?(this._score.tint=Tl(27+24*Math.sin(this._t/30),100,60),this._player.nearWR=t.nearWR):this._player.nearWR&&(this._score.tint=16777215,this._player.nearWR=t.nearWR)}UpdateExtras(e){if(e.stats.btb>=104?this._extra_btb?this._extra_btb.__text.text=e.stats.btb-4:(this._extra_btb=new o.Container,this._extra.addChild(this._extra_btb),this._extra_btb.__sprite=new o.Sprite(this._tex.b2b),this._extra_btb.__sprite.position.set(-54,8),this._extra_btb.__sprite.scale.set(.7),this._extra_btb.addChild(this._extra_btb.__sprite),this._extra_btb.__text=new d.Text(e.stats.btb-4,{font:Rl.get("hun"),rasterize:!0,fontSize:28,weight:600,tint:16777215,anchor:[1,0]}),this._extra_btb.__text.position.set(-58,16),this._extra_btb.addChild(this._extra_btb.__text)):this._extra_btb&&(this._extra_btb.destroy(),this._extra_btb=null),e.specCount>=3?this._extra_spec?this._extra_spec.__text.text=e.specCount:(this._extra_spec=new o.Container,this._extra.addChild(this._extra_spec),this._extra_spec.__sprite=new o.Sprite(this._tex.spectators),this._extra_spec.__sprite.position.set(-54,8),this._extra_spec.__sprite.scale.set(.7),this._extra_spec.addChild(this._extra_spec.__sprite),this._extra_spec.__text=new d.Text(e.specCount,{font:Rl.get("hun"),rasterize:!0,fontSize:28,weight:600,tint:16777215,anchor:[1,0]}),this._extra_spec.__text.position.set(-58,16),this._extra_spec.addChild(this._extra_spec.__text)):this._extra_spec&&(this._extra_spec.destroy(),this._extra_spec=null),e.stats.revives>=5?this._extra_revives?this._extra_revives.__text.text=e.stats.revives:(this._extra_revives=new o.Container,this._extra.addChild(this._extra_revives),this._extra_revives.__sprite=new o.Sprite(this._tex.revives),this._extra_revives.__sprite.position.set(-54,8),this._extra_revives.__sprite.scale.set(.7),this._extra_revives.addChild(this._extra_revives.__sprite),this._extra_revives.__text=new d.Text(e.stats.revives,{font:Rl.get("hun"),rasterize:!0,fontSize:28,weight:600,tint:16777215,anchor:[1,0]}),this._extra_revives.__text.position.set(-58,16),this._extra_revives.addChild(this._extra_revives.__text)):this._extra_revives&&(this._extra_revives.destroy(),this._extra_revives=null),e.stats.escapeartist>=15?this._extra_escapeartist?this._extra_escapeartist.__text.text=e.stats.escapeartist:(this._extra_escapeartist=new o.Container,this._extra.addChild(this._extra_escapeartist),this._extra_escapeartist.__sprite=new o.Sprite(this._tex.escapeartist),this._extra_escapeartist.__sprite.position.set(-54,8),this._extra_escapeartist.__sprite.scale.set(.7),this._extra_escapeartist.addChild(this._extra_escapeartist.__sprite),this._extra_escapeartist.__text=new d.Text(e.stats.escapeartist,{font:Rl.get("hun"),rasterize:!0,fontSize:28,weight:600,tint:16777215,anchor:[1,0]}),this._extra_escapeartist.__text.position.set(-58,16),this._extra_escapeartist.addChild(this._extra_escapeartist.__text)):this._extra_escapeartist&&(this._extra_escapeartist.destroy(),this._extra_escapeartist=null),e.stats.blockrationing_app||e.stats.blockrationing_final>=360){const t=e.stats.blockrationing_final?e.stats.blockrationing_final:e.stats.blockrationing_app.toFixed(2);this._extra_blockrationing?this._extra_blockrationing.__text.text=t:(this._extra_blockrationing=new o.Container,this._extra.addChild(this._extra_blockrationing),this._extra_blockrationing.__sprite=new o.Sprite(this._tex.blockrationing),this._extra_blockrationing.__sprite.position.set(-54,8),this._extra_blockrationing.__sprite.scale.set(.7),this._extra_blockrationing.addChild(this._extra_blockrationing.__sprite),this._extra_blockrationing.__text=new d.Text(t,{font:Rl.get("hun"),rasterize:!0,fontSize:28,weight:600,tint:16777215,anchor:[1,0]}),this._extra_blockrationing.__text.position.set(-58,16),this._extra_blockrationing.addChild(this._extra_blockrationing.__text))}else this._extra_blockrationing&&(this._extra_blockrationing.destroy(),this._extra_blockrationing=null);if(e.talentless?this._extra_talentless||(this._extra_talentless=new o.Container,this._extra.addChild(this._extra_talentless),this._extra_talentless.__sprite=new o.Sprite(this._tex.talentless),this._extra_talentless.__sprite.position.set(-54,8),this._extra_talentless.__sprite.scale.set(.7),this._extra_talentless.addChild(this._extra_talentless.__sprite)):this._extra_talentless&&(this._extra_talentless.destroy(),this._extra_talentless=null),0===this._extra.children.length)this._extracontainer.visible=!1;else if(1===this._extra.children.length)this._extracontainer.visible=!0,this._extra.children[0].alpha=1;else{this._extracontainer.visible=!0;const e=Math.floor(this._t/60)%this._extra.children.length,t=this._t/60%1;for(let n=0;n<this._extra.children.length;n++)this._extra.children[n].alpha=n===e?Math.max(0,Math.min(1,10*t,10*(1-t))):0}}Kill(e){if(!this.destroying)if(this.destroying=!0,"minimal"!==ot.video.graphics)if(e&&"low"!==ot.video.graphics){dc.animate(this._bg,{0:{alpha:1},1:{alpha:0}},.1,a(.04,.62,.63,.42)),this._placement&&(this._placement.visible=!1),this._rank&&(this._rank.visible=!1),this._flash&&(this._flash.visible=!1),this._speedrunFlash&&(this._speedrunFlash.visible=!1),this._modcontainer&&(this._modcontainer.visible=!1),this._extracontainer&&(this._extracontainer.visible=!1),this.parent!==this._parent._containerFront&&this._parent._containerFront.addChild(this),this._explosion=[],this._explosionTime=0,this._explosionTick=this._ExplosionTick.bind(this);for(const e of[this._username,this._score]){const t=e.text.replace("\f3","").length;for(let n=0;n<t;n++)this._explosion.push({override:e.overrides.get(n),xspeed:9*Math.random()-4.5,yspeed:22.5*Math.random()-18,thetaspeed:.045*Math.random()-.0225})}o.Ticker.shared.add(this._explosionTick)}else dc.animate(this,{0:{"position.x":0},1:{"position.x":600*this._parent._scale}},.3,a(.04,.62,.63,.42),(()=>{this.destroy()}));else this.destroy()}_ExplosionTick(e){this._explosionTime+=e;for(const t of this._explosion)t.override.x+=t.xspeed*e,t.override.y+=t.yspeed*e+.9*this._explosionTime*e,t.override.theta+=t.thetaspeed*e;this._username.alpha=1-this._explosionTime/60,this._score.alpha=1-this._explosionTime/60,this._explosionTime>=60&&(o.Ticker.shared.remove(this._explosionTick),this.destroy())}}const hr={test:e=>({pri:"#34F479",sec:"#000",img_main:"/user-content/avatars/5e331c3ce24a5a3e258f7a1b.jpg?rv=1601325213424",img_sub:null,header:"Test notification",content:e.data.message,action:null}),announcement:e=>({pri:e.data.pri||"#87E038",sec:e.data.sec||"#000",img_main:e.data.img_main||"/res/icon/announcement.svg",img_sub:e.data.img_sub||null,header:e.data.header,content:e.data.content,action:e.data.action||null}),supporter_new:e=>({pri:"#FF4A19",sec:"#000",img_main:"/res/supporter-icon.png",img_sub:null,header:"You are now a TETR.IO Supporter!",content:"Thank you very, <b>very</b> much for supporting TETR.IO. Without support from people like you, TETR.IO could never be what it is now! You're awesome ",action:null}),supporter_gift:e=>({pri:"#FF4A19",sec:"#FF4A19",img_main:e.data.avatar_revision?`/user-content/avatars/${e.data.userid}.jpg?rv=${e.data.avatar_revision}`:Ot(e.data.userid),img_sub:"/res/supporter-icon-alpha.png",header:`<span>${e.data.username.toUpperCase()}</span>`,content:`has gifted you <b>${e.data.months} month${1===e.data.months?"":"s"}</b> of <b>TETR.IO Supporter</b>!`,action:`user:${e.data.userid}`}),supporter_specialthanks:e=>({pri:"#E43868",sec:"#000",img_main:"/res/heart-icon.png",img_sub:null,header:"YOU ARE AWESOME!",content:"Thank you very, <b>very</b> much for your insane amount of support. You are now <b>listed in the Special Thanks of the game itself</b>, as thanks for your support!",action:null}),supporter_expiring:e=>({pri:"#A4523C",sec:"#000",img_main:"/res/supporter-icon-expiring.png",img_sub:null,header:"Your TETR.IO Supporter status is expiring soon!",content:e.data.freeloader?`Your Supporter status will expire on <b>${new Date(e.data.expires).toLocaleString()}</b>. If you're enjoying being a Supporter, you can click here to add months.`:`Thank you very much for your support. Your Supporter status will expire on <b>${new Date(e.data.expires).toLocaleString()}</b>. To continue supporting TETR.IO, please click here to add months.`,action:"support"}),supporter_expired:e=>({pri:"#888888",sec:"#000",img_main:"/res/supporter-icon-expired.png",img_sub:null,header:"Your TETR.IO Supporter status has expired",content:e.data.freeloader?"If you want to support TETR.IO development (or just liked the perks), please consider clicking here to support TETR.IO yourself! That way, we can keep making improvements and new gamemodes for you to enjoy.":"Your Supporter status may have expired, but you'll forever be in my heart. If you wish to support TETR.IO again, you may click here to rejoin.",action:"support"}),friend:e=>{const t=e.data.relationship.from;return{pri:e.data.ismutual?"#E05DC3":"#E43868",sec:e.data.ismutual?"#E05DC3":"#E43868",img_main:t.avatar_revision?`/user-content/avatars/${t._id}.jpg?rv=${t.avatar_revision}`:Ot(t._id),img_sub:"/res/icon/friends.svg",header:`<span>${t.username.toUpperCase()}</span>`,content:e.data.ismutual?"has <b>friended you back</b>":"has added you to their <b>friends list</b>",action:`user:${t._id}`}},noop_forfeit_notice:e=>({pri:"#FFC700",sec:"#000",img_main:"/res/forfeitnotice.png",img_sub:null,header:"You forfeited a ranked match",content:"You have been awarded a loss for this match. Please ensure you have the time and internet connection to play! Repeated forfeits are punished (and will be automatically punished in the future). Thank you for understanding!"}),forfeit_both:e=>({pri:"#3f6ac0",sec:"#000",img_main:"/res/forfeit-both.png",img_sub:null,header:"Your match has been canceled",content:`Both you and <b><span>${e.data.user.username.toUpperCase()}</span></b> have left the match. The match has been declared No Contest: no player is punished, no player's rating is changed.`}),match_nullified:e=>({pri:"#30c084",sec:"#000",img_main:"/res/icon/revert.svg",img_sub:null,header:"Match result nullified",content:`${e.data.message?`${zt(e.data.message)}<br>`:""}The result of your match with <b><span>${e.data.user.username.toUpperCase()}</span></b> (played ${new Date(e.data.ts).toLocaleString()}) has been nullified.${e.data.deltatr>=1?`<br>As a result, you have gained <b>+${Math.round(e.data.deltatr)} TR</b>.`:""}${e.data.deltatr<=-1?`<br>As a result, you have lost <b>${Math.round(e.data.deltatr)} TR</b>.`:""}`}),achievement:e=>{const t={0:"#828282",1:"#ce7b4a",2:"#a8dad7",3:"#ffb300",4:"#4eff80",5:"#c885ff",100:"#ffaccc"};let n="";return e.data.prev&&(n=`<br><br>Previous: <b>${Io(e.data.prev)}</b> (${Bt(new Date(e.data.prev.t))} ago)<br>New: <b style="color: ${t[e.data.rank]};">${Io(e.data)}</b>`),{pri:t[e.data.rank],sec:"#000",img_main:`/res/achievements/frames/${{0:"none",1:"bronze",2:"silver",3:"gold",4:"platinum",5:"diamond",100:"issued"}[e.data.rank]}.png`,img_sub:null,header:"Achievement get!",content:`<b>${e.data.name}</b><br><span style="color: ${t[e.data.rank]}; font-style: italic; font-family: 'C';">${e.data.desc}</span>${n}<div class="ach_notif_icon" style="background-image: url('/res/achievements/icons/${Math.floor((e.data.k-1)/64)}s.png'); background-position: ${(e.data.k-1)%8*-100}% ${-100*Math.floor((e.data.k-1)/8)}%;"></div>`,action:`achievement:${e.data.k}`}}},dr={test:e=>{Qt({header:"Test notification",msg:e.data.message,color:"#34F479",icon:"/user-content/avatars/5e331c3ce24a5a3e258f7a1b.jpg?rv=1601325213424",classes:["snotify"],timeout:1e4,suppressable:!0}),"both"!==ot.notifications.other||dl()||Ho("Test notification",e.data.message,!1,"/res/tetriox256.png"),dl()||xa.SePlay("social_notify_major")},announcement:e=>{if(e.data.isinvite){if(hl())return;Qt({header:e.data.header,msg:`${e.data.content}<div class="notification_timeoutbar" style="--time: 24s;"></div>`,color:e.data.pri||"#87E038",subcolor:e.data.sec||"#000",icon:e.data.img_main||"/res/icon/announcement.svg",subicon:e.data.img_sub||null,classes:["snotify","modalnotify"],timeout:25e3,onclick:e=>{},buttons:[{label:"IGNORE",icon:"/res/icon/denied.svg",classes:[],onclick:e=>{e()}},{label:e.data.cta||"ACCEPT",icon:"/res/icon/accepted.svg",classes:["pri"],onclick:t=>{e.data.action&&Yr(e.data.action),t()}}]})}else Qt({header:e.data.header,msg:e.data.content,color:e.data.pri||"#87E038",subcolor:e.data.sec||"#000",icon:e.data.img_main||"/res/icon/announcement.svg",subicon:e.data.img_sub||null,classes:["snotify"],timeout:15e3,onclick:t=>{e.data.action&&Yr(e.data.action),t()}});"both"===ot.notifications.other&&Ho(e.data.header,e.data.content,!1,e.data.img_main||"/res/tetriox256.png"),xa.SePlay("social_notify_major")},supporter_new:e=>{Qt({header:"You are now a TETR.IO Supporter!",msg:"Thank you very, <b>very</b> much for supporting TETR.IO. Without support from people like you, TETR.IO could never be what it is now! You're awesome ",color:"#FF4A19",icon:"/res/supporter-icon.png",classes:["snotify"],timeout:3e4}),document.body.classList.add("supporter"),document.body.classList.add("ceriad_exempt"),document.body.classList.add("ceriad_disabled"),Vs.disable(),localStorage.setItem("wasLastSupporter","Yes, that's it!"),document.cookie=`ceriad_exempt=1;max-age=31536000;domain=${_.domain}`,"both"===ot.notifications.other&&Ho("You are now a TETR.IO Supporter!","Thank you very, very much for supporting TETR.IO. Without support from people like you, TETR.IO could never be what it is now! You're awesome ",!1,"/res/supporter-icon.png")},supporter_gift:e=>{Qt({header:`<span>${e.data.username.toUpperCase()}</span>`,msg:`has gifted you <b>${e.data.months} month${1===e.data.months?"":"s"}</b> of <b>TETR.IO Supporter</b>!`,color:"#FF4A19",subcolor:"#FF4A19",icon:e.data.avatar_revision?`/user-content/avatars/${e.data.userid}.jpg?rv=${e.data.avatar_revision}`:Ot(e.data.userid),subicon:"/res/supporter-icon-alpha.png",classes:["snotify"],timeout:3e4,onclick:t=>{Yr(`user:${e.data.userid}`),t()}}),xa.SePlay("supporter"),document.body.classList.add("supporter"),document.body.classList.add("ceriad_exempt"),Vs.disable(),document.body.classList.add("ceriad_disabled"),localStorage.setItem("wasLastSupporter","Yes, that's it!"),document.cookie=`ceriad_exempt=1;max-age=31536000;domain=${_.domain}`,oo.expires=oo.hasSupporter?oo.expires+1e3*e.data.months*3600*24*30.5:Date.now()+1e3*e.data.months*3600*24*30.5,oo.hasSupporter=oo.expires>Date.now(),co(),"both"===ot.notifications.other&&Ho(e.data.username.toUpperCase(),`has gifted you ${e.data.months} month${1===e.data.months?"":"s"} of TETR.IO Supporter!`,!1,e.data.avatar_revision?`/user-content/avatars/${e.data.userid}.jpg?rv=${e.data.avatar_revision}`:"/res/tetriox256.png")},supporter_specialthanks:e=>{Qt({header:"YOU ARE AWESOME!",msg:"Thank you very, <b>very</b> much for your insane amount of support. You are now <b>listed in the Special Thanks of the game itself</b>, as thanks for your support!",color:"#E43868",icon:"/res/heart-icon.png",classes:["snotify"],timeout:3e4}),"both"===ot.notifications.other&&Ho("YOU ARE AWESOME!","Thank you very, very much for your insane amount of support. You are now listed in the Special Thanks of the game itself, as thanks for your support!",!1,"/res/heart-icon.png")},supporter_expiring:e=>{Qt({header:"Your TETR.IO Supporter status is expiring soon!",msg:e.data.freeloader?`Your Supporter status will expire on <b>${new Date(e.data.expires).toLocaleString()}</b>. If you're enjoying being a Supporter, you can click here to add months.`:`Thank you very much for your support. Your Supporter status will expire on <b>${new Date(e.data.expires).toLocaleString()}</b>. To continue supporting TETR.IO, please click here to add months.`,color:"#A4523C",icon:"/res/supporter-icon-expiring.png",classes:["snotify"],timeout:3e4,onclick:e=>{Yr("support"),e()}}),"both"===ot.notifications.other&&Ho("Your TETR.IO Supporter status is expiring soon!",e.data.freeloader?`Your Supporter status will expire on ${new Date(e.data.expires).toLocaleString()}. If you're enjoying being a Supporter, you can click here to add months.`:`Thank you very much for your support. Your Supporter status will expire on ${new Date(e.data.expires).toLocaleString()}. To continue supporting TETR.IO, please click here to add months.`,!1,"/res/supporter-icon-expiring.png")},supporter_expired:e=>{Qt({header:"Your TETR.IO Supporter status has expired",msg:e.data.freeloader?"If you want to support TETR.IO development (or just liked the perks), please consider clicking here to support TETR.IO yourself! That way, we can keep making improvements and new gamemodes for you to enjoy.":"Your Supporter status may have expired, but you'll forever be in my heart. If you wish to support TETR.IO again, you may click here to rejoin.",color:"#888888",icon:"/res/supporter-icon-expired.png",classes:["snotify"],timeout:3e4,onclick:e=>{Yr("support"),e()}}),"both"===ot.notifications.other&&Ho("Your TETR.IO Supporter status has expired",e.data.freeloader?"If you want to support TETR.IO development (or just liked the perks), please consider clicking here to support TETR.IO yourself! That way, we can keep making improvements and new gamemodes for you to enjoy.":"Your Supporter status may have expired, but you'll forever be in my heart. If you wish to support TETR.IO again, you may click here to rejoin.",!1,"/res/supporter-icon-expired.png")},friend:e=>{const t=e.data.relationship.from;Qt({header:`<span>${t.username.toUpperCase()}</span>`,msg:e.data.ismutual?"has <b>friended you back</b>":"has added you to their <b>friends list</b>",color:e.data.ismutual?"#E05DC3":"#E43868",subcolor:e.data.ismutual?"#E05DC3":"#E43868",icon:t.avatar_revision?`/user-content/avatars/${t._id}.jpg?rv=${t.avatar_revision}`:Ot(t._id),subicon:"/res/icon/friends.svg",classes:["snotify"],timeout:1e4,onclick:e=>{Yr(`user:${t._id}`),e()},suppressable:!0}),"both"!==ot.notifications.other||dl()||Ho(t.username.toUpperCase(),e.data.ismutual?"has friended you back":"has added you to their friends list",!1,t.avatar_revision?`/user-content/avatars/${t._id}.jpg?rv=${t.avatar_revision}`:"/res/tetriox256.png"),dl()||xa.SePlay("social_notify_minor")},noop_forfeit_notice:e=>{Qt({header:"You forfeited a ranked match",msg:"You have been awarded a loss for this match. Please ensure you have the time and internet connection to play! Repeated forfeits are punished (and will be automatically punished in the future). Thank you for understanding!",color:"#FFC700",icon:"/res/forfeitnotice.png",classes:["snotify"],timeout:3e4}),"both"===ot.notifications.other&&Ho("You forfeited a ranked match","You have been awarded a loss for this match. Please ensure you have the time and internet connection to play! Repeated forfeits are punished (and will be automatically punished in the future). Thank you for understanding!",!1,"/res/forfeitnotice.png")},forfeit_both:e=>{Qt({header:"Your match has been canceled",msg:`Both you and <b><span>${e.data.user.username.toUpperCase()}</span></b> have left the match. The match has been declared No Contest: no player is punished, no player's rating is changed.`,color:"#3f6ac0",icon:"/res/forfeit-both.png",classes:["snotify"],timeout:3e4}),"both"===ot.notifications.other&&Ho("Your match has been canceled",`Both you and ${e.data.user.username.toUpperCase()} have left the match. The match has been declared No Contest: no player is punished, no player's rating is changed.`,!1,"/res/forfeit-both.png")},match_nullified:e=>{Qt({header:"Match result nullified",msg:`${e.data.message?`${zt(e.data.message)}<br>`:""}The result of your match with <b><span>${e.data.user.username.toUpperCase()}</span></b> (played ${new Date(e.data.ts).toLocaleString()}) has been nullified.${e.data.deltatr>=1?`<br>As a result, you have gained <b>+${Math.round(e.data.deltatr)} TR</b>.`:""}${e.data.deltatr<=-1?`<br>As a result, you have lost <b>${Math.round(e.data.deltatr)} TR</b>.`:""}`,color:"#30c084",icon:"/res/icon/revert.svg",classes:["snotify"],timeout:3e4}),"both"===ot.notifications.other&&Ho("Match result nullified",`The result of your match with ${e.data.user.username.toUpperCase()} has been nullified.${e.data.deltatr>=1?` As a result, you have gained +${Math.round(e.data.deltatr)} TR.`:""}${e.data.deltatr<=-1?` As a result, you have lost ${Math.round(e.data.deltatr)} TR.`:""}`,!1),xa.SePlay("social_notify_major")},achievement:e=>{const t={0:"#828282",1:"#ce7b4a",2:"#a8dad7",3:"#ffb300",4:"#4eff80",5:"#c885ff",100:"#ffaccc"};let n="";e.data.prev&&(n=`<br><br>Previous: <b>${Io(e.data.prev)}</b> (${Bt(new Date(e.data.prev.t))} ago)<br>New: <b style="color: ${t[e.data.rank]};">${Io(e.data)}</b>`),Qt({header:"Achievement get!",msg:`<b>${e.data.name}</b><br><span style="color: ${t[e.data.rank]}; font-style: italic; font-family: 'C';">${e.data.desc}</span>${n}<div class="ach_notif_icon" style="background-image: url('/res/achievements/icons/${Math.floor((e.data.k-1)/64)}s.png'); background-position: ${(e.data.k-1)%8*-100}% ${-100*Math.floor((e.data.k-1)/8)}%;"></div>`,color:t[e.data.rank],icon:`/res/achievements/frames/${{0:"none",1:"bronze",2:"silver",3:"gold",4:"platinum",5:"diamond",100:"issued"}[e.data.rank]}.png`,classes:["snotify"],timeout:3e4,onclick:t=>{Yr(`achievement:${e.data.k}`),t()}}),xa.SePlay({0:"achievement_1",1:"achievement_1",2:"achievement_1",3:"achievement_2",4:"achievement_2",5:"achievement_3",100:"achievement_3"}[e.data.rank])}},ur={online:(e,t,n)=>[e,t,n],away:(e,t,n)=>["online","away"].includes(e)?["away","",""]:[e,t,n],busy:(e,t,n)=>["online","away","busy"].includes(e)?["busy","",""]:[e,t,n],offline:(e,t,n)=>["offline","",""]},_r={online:(e,t)=>{switch(e){case"menus":return{text:"In Menus",html:"In Menus",discord:{state:"In Menus",largeImageKey:"logo",instance:!1}};case"40l":return{text:"Playing 40 LINES",html:"Playing <b>40 LINES</b>",discord:{state:"40 LINES",largeImageKey:"logo",smallImageKey:"mode_40l",smallImageText:"40 LINES",startTimestamp:Date.now(),instance:!0}};case"blitz":return{text:"Playing BLITZ",html:"Playing <b>BLITZ</b>",discord:{state:"BLITZ",largeImageKey:"logo",smallImageKey:"mode_blitz",smallImageText:"BLITZ",startTimestamp:Date.now(),instance:!0}};case"zen":return{text:"Playing ZEN",html:"Playing <b>ZEN</b>",discord:{state:"ZEN",largeImageKey:"logo",smallImageKey:"mode_zen",smallImageText:"ZEN",startTimestamp:Date.now(),instance:!0}};case"custom":return{text:"Playing a custom game",html:"Playing a <b>custom game</b>",discord:{state:"CUSTOM GAME",largeImageKey:"logo",smallImageKey:"mode_custom",smallImageText:"CUSTOM GAME",startTimestamp:Date.now(),instance:!0}};case"lobby_end":case"lobby_spec":case"lobby_ig":case"lobby":{if("X-QP"===t)return{text:{lobby:"Spectating QUICK PLAY",lobby_ig:"Playing QUICK PLAY",lobby_end:"Ending a QUICK PLAY game",lobby_spec:"Spectating QUICK PLAY"}[e],html:{lobby:"Spectating <b>QUICK PLAY</b>",lobby_ig:"Playing <b>QUICK PLAY</b>",lobby_end:"Ending a <b>QUICK PLAY</b> game",lobby_spec:"Spectating <b>QUICK PLAY</b>"}[e],discord:{details:"QUICK PLAY",state:{lobby:"Spectating",lobby_ig:"In Game",lobby_end:"Game Ending",lobby_spec:"Spectating"}[e],largeImageKey:"logo",smallImageKey:"mode_zenith",smallImageText:"QUICK PLAY",instance:["lobby_spec","lobby_ig"].includes(e),startTimestamp:["lobby_spec","lobby_ig"].includes(e)?Date.now():void 0}};let n="In",s="In Lobby";"lobby_spec"===e&&(n="Spectating",s="Spectating"),"lobby_end"===e&&(n="Ending",s="Game Ending"),"lobby_ig"===e&&(s="In Game");let i="a custom room",o="an <b>online</b>";""!==t&&(i="a public custom room",o="a public <b>custom room</b>"),"X-PRIV"===t&&(i="a private custom room",o="a private <b>custom room</b>"),"X-ROYALE"===t&&(i="a ROYALE",o="a <b>ROYALE</b>");let a="game";"lobby"===e&&(a="lobby");const r={details:"X-ROYALE"===t?"ROYALE":"CUSTOM ROOM",state:s,largeImageKey:"logo",smallImageKey:"X-ROYALE"===t?"mode_royale":"mode_customroom",smallImageText:"X-ROYALE"===t?"ROYALE":"CUSTOM ROOM",instance:!1};return["lobby_spec","lobby_ig"].includes(e)&&(r.startTimestamp=Date.now(),r.instance=!0),{text:`${n} ${i} ${a}`,html:`${n} ${o} ${a}`,discord:r}}default:return{text:"Online",html:"Online",discord:{state:"Online",largeImageKey:"logo",instance:!1}}}},away:(e,t)=>({text:"Away",html:"Away",discord:{state:"Away",largeImageKey:"logo",instance:!1}}),busy:(e,t)=>{switch(e){case"tl_mm":return{text:"In TETRA LEAGUE queue",html:"In <b>TETRA LEAGUE</b> queue",discord:{details:"TETRA LEAGUE",state:"In Queue",largeImageKey:"logo",smallImageKey:"mode_league",smallImageText:"TETRA LEAGUE",instance:!1}};case"tl":return{text:"In a TETRA LEAGUE game",html:"In a <b>TETRA LEAGUE</b> game",discord:{details:"TETRA LEAGUE",state:"In Game",largeImageKey:"logo",smallImageKey:"mode_league",smallImageText:"TETRA LEAGUE",startTimestamp:Date.now(),instance:!0}};case"tl_end":return{text:"Ending a TETRA LEAGUE game",html:"Ending a <b>TETRA LEAGUE</b> game",discord:{details:"TETRA LEAGUE",state:"Game Ending",largeImageKey:"logo",smallImageKey:"mode_league",smallImageText:"TETRA LEAGUE",instance:!1}};case"tl_mm_complete":return{text:"Found a TETRA LEAGUE match",html:"Found a <b>TETRA LEAGUE</b> match",discord:{details:"TETRA LEAGUE",state:"Match Found",largeImageKey:"logo",smallImageKey:"mode_league",smallImageText:"TETRA LEAGUE",instance:!1}};default:return{text:"Busy",html:"Busy",discord:{state:"Busy",largeImageKey:"logo",instance:!1}}}},offline:(e,t)=>({text:"Offline",html:"Offline",discord:{state:"Offline",largeImageKey:"logo",instance:!1}})},mr=["5e32fe50d3e20d2bd2bf234f","5e3324299380f13edda2b1b1","5e3361351da5014141c84788","5e41118d4be6907ad7eab8b2","5e504fe2278d291d983fd847","5eeaa5535b5c156c224f5265","5e49a95efad3ca55f6512742","5e98b21e77ea8f7e30009287","5e7679c65bc0c31aba22746d","5e4979d4fad3ca55f6512458","60cc700a866c6a2d2c8740a7","5e40866a4be6907ad7eab093","6049b70b3e33d5b0d2398f53","5ec684620cfca96246aa9bda"],gr=["64791e4e0ab98813b1de9320","65ecc9e7de2474a12d55b927"],fr={total_online:0,notifications:[],relationships:[],presence:{status:"offline",realstatus:"offline",detail:"",realdetail:"",mask:"online",last:null},dms:{}};void 0!==localStorage.getItem("presenceMask")&&["online","away","busy","offline"].includes(localStorage.getItem("presenceMask"))&&(fr.presence.mask=localStorage.getItem("presenceMask"));const br=new Map;function Cr(e){const t=()=>{lr.isInRoom()&&(lr.leaveRoom(!0),er?.End(),lr.dropMultiplex()),Ys.stopNow(),Ni(),gn(),qi("connecting to live servers"),Ja.require().then((t=>{Ki(),Hi("playmulti"),Wi(!0),t.maintenance&&document.body.classList.add("maintenance"),lr.joinRoom(e),Ys.stopNow()})).catch((()=>{Ki(),en("could not connect to live servers")}))};document.body.classList.contains("ingame_phys")?_n({title:"LEAVE CURRENT GAME?",msg:"you're still in game. abandon the current game?",buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"LEAVE",classes:["sec"],callback:e=>{e(),t()}}]}):t()}function yr(e){const t=()=>{document.body.classList.contains("inzenith")?Ai?.endNow():(lr.isInRoom()&&(ir=!0,er?.End(),lr.dropMultiplex()),Ys.stopNow()),Ni(),gn(),qi("connecting to live servers"),Ja.require().then((t=>{Ki(),t.maintenance&&document.body.classList.add("maintenance"),document.body.classList.contains("inzenith")&&!document.body.classList.contains("ingame_phys")?(er.SetSpectate(null),er._Refresh(),Wi(!0),xt("zenithmenu").classList.remove("rolledup","thidden"),xt("zenithmenu").getBoundingClientRect(),xt("zenithmenu").classList.remove("hidden"),vt("#zenithmenu .menuslide_rollup").forEach((e=>e.textContent="SPECTATE")),xt("zenithmenu").classList.remove("inresults"),xt("start_zenith_label").textContent="START",gi.bindGuide(fi.zenith||{}),xt("zenithmenu").scrollTop=0):document.body.classList.contains("inzenith")?(ir=!0,er.games.self?.end(),er.SetSpectate(null),er._Refresh(),Wi(!0),xt("zenithmenu").classList.remove("rolledup","thidden"),xt("zenithmenu").getBoundingClientRect(),xt("zenithmenu").classList.remove("hidden"),vt("#zenithmenu .menuslide_rollup").forEach((e=>e.textContent="SPECTATE")),xt("zenithmenu").classList.remove("inresults"),xt("start_zenith_label").textContent="START",gi.bindGuide(fi.zenith||{}),xt("zenithmenu").scrollTop=0,Yi()):(Ys.stopNow(),Yi()),xt("zenith_party_ready_label").textContent="READY",xt("zenith_party_ready").classList.remove("ready"),xt("zenith_party_self").classList.remove("ready"),Ja.emit("social.party.invite.accept",{inviteid:e,replace:!0})})).catch((()=>{Ki(),en("could not connect to live servers")}))};document.body.classList.contains("ingame_phys")?_n({title:"LEAVE CURRENT GAME?",msg:"you're still in game. abandon the current game?",buttons:[{label:"CANCEL",classes:[],callback:e=>{e()}},{label:"LEAVE",classes:["sec"],callback:e=>{e(),t()}}]}):t()}Tn.ready((function(){xt("social_tray").addEventListener("click",(function(){wr()})),xt("social").addEventListener("click",(function(e){e.target===xt("social")&&Br()})),xt("social_relationships_tabs").addEventListener("click",(function(e){e.target.classList.contains("social_relationships_tab")&&(xt("social_relationships_find").value="",setTimeout((()=>{il(),Fr()}),0))})),xt("social_relationships_find").addEventListener("keyup",(function(){xt("sbcpw").scrollTop=0,il(),xt("social_relationships_find").value&&Fr()})),xt("social_back").addEventListener("click",(function(){Fr()})),xt("social_status").addEventListener("click",(function(){Gi([{id:"online",name:'<img style="height: 0.88em; vertical-align: middle;" src="/res/status/online.png" /> ONLINE',description:"appear as usual"},{id:"away",name:'<img style="height: 0.88em; vertical-align: middle;" src="/res/status/away.png" /> AWAY',description:"appear away, unless you're offline or busy"},{id:"busy",name:'<img style="height: 0.88em; vertical-align: middle;" src="/res/status/busy.png" /> BUSY',description:"appear busy, unless you're offline. receive no notifications. always enabled in TETRA LEAGUE (unless you're invisible)"},{id:"offline",name:'<img style="height: 0.88em; vertical-align: middle;" src="/res/status/offline.png" /> INVISIBLE',description:"appear offline at all times"}],(e=>{localStorage.setItem("presenceMask",e),ll(fr.presence.realstatus,fr.presence.realdetail.split(":")[0],fr.presence.realdetail.split(":")[1],e)}),!0)})),xt("social_dm_button_profile").addEventListener("click",(function(){Sr||Fr(),ka({userID:Sr.to._id})})),xt("social_dm_button_gift").addEventListener("click",(function(){Sr||Fr(),Ii(void 0,Sr.to.username)})),xt("social_dm_button_invite").addEventListener("click",(function(){if(Sr||Fr(),!xt("social_dm_button_invite").classList.contains("active"))return document.body.classList.contains("inzenith")?(xt("zenith-duo-card").classList.contains("active")||xt("zenith-duo-card").click(),Ja&&Ja.isConnected()&&Ja.emit("social.party.invite",Sr.to._id),Sr.inv_locked_until=Date.now()+3e4,void rl()):void(lr.isInRoom()&&xt(`sp_${Sr.to._id}`)?en("this person is already in your room"):(Ja&&Ja.isConnected()&&Ja.emit("social.invite",Sr.to._id),Sr.inv_locked_until=Date.now()+3e4,rl()))})),xt("social_dm_button_snipe").addEventListener("click",(function(){Sr||Fr(),xt("social_dm_button_snipe").classList.contains("active")||(lr.isInRoom()&&xt(`sp_${Sr.to._id}`)?en("you are already in their room"):(Sr.presence.detail.split(":")[1]&&(Cr(Sr.presence.detail.split(":")[1]),Br()),rl()))})),xt("social_dm_input").addEventListener("keydown",Dr),xt("social_chat").addEventListener("mouseover",(function(e){let t=e.target;(t.classList.contains("dm_chat_message")||(t=t.closest(".dm_chat_message"),t))&&t.getAttribute("data-ts")&&t.setAttribute("data-time",`${Bt(Date.parse(t.getAttribute("data-ts")))} ago`)})),Ja.on("server.authorize",(e=>{fr.total_online=e.social.total_online,fr.notifications=e.social.notifications,fr.relationships=e.social.relationships,fr.dms={};const t=[],n=[];let s=null;if(fr.relationships.forEach((i=>{e.social.presences[i.to._id]?(i.presence=e.social.presences[i.to._id],["offline","unknown"].includes(i.presence.status)||(t.push(i.to.username.toUpperCase()),s=i.to._id,i.to.avatar_revision&&n.push({id:i.to._id,avatar_revision:i.to.avatar_revision}))):i.presence={status:"offline",detail:"",invitable:!1}})),Ja.emit("social.presence",{status:fr.presence.status,detail:fr.presence.detail}),t.length){const e=Qt({header:`<span>${t.slice(0,10).join("</span>, <span>")}</span>${t.length>10?` and ${t.length-10} more`:""}`,msg:'<img src="/res/status/online.png" style="height: 1em; vertical-align: -10%;" /> online now',color:sl.online,icon:n.length?`/user-content/avatars/${n[0].id}.jpg?rv=${n[0].avatar_revision}`:Ot(s),classes:["snotify"],timeout:5e3,onclick:e=>{e(),wr()},suppressable:!0});for(let t=1;t<Math.min(n.length,5);t++)setTimeout((()=>{e?.parentNode&&(e.querySelector(".notification_icon").src=`/user-content/avatars/${n[t].id}.jpg?rv=${n[t].avatar_revision}`)}),5e3/Math.min(n.length,5)*t)}kr&&(il(),$r(),Wr(),Fr()),qr(),Gr(),Ur()})),Ja.on("social.online",(e=>{fr.total_online=e,kr&&Wr()})),Ja.on("social.notification",(e=>{e.data.fake||(fr.notifications.unshift(e),kr&&$r(),Gr()),dr[e.type]&&dr[e.type](e)})),Ja.on("social.relation.add",(e=>{e.presence={status:"offline",detail:"",invitable:!1},fr.relationships.push(e),kr&&il(),Ur(),qr()})),Ja.on("social.relation.remove",(e=>{fr.relationships=fr.relationships.filter((t=>t._id!==e)),kr&&il(),Ur(),qr(),Lr&&Sr._id===e&&Fr()})),Ja.on("social.relation.clear",(()=>{fr.relationships=fr.relationships.filter((e=>"pending"!==e.type)),kr&&il(),Ur(),Lr&&"pending"===Sr.type&&Fr()})),Ja.on("social.relation.update",(e=>{fr.relationships.forEach((t=>{t.to._id===e.user&&(t.to.username=e.username,t.to.avatar_revision=e.avatar_revision)})),el=!0,kr&&(il(),Lr&&Sr.to._id===e.user&&Ir())})),Ja.on("social.presence",(e=>{let t=null;fr.relationships.forEach((n=>{n.to._id===e.user&&(["offline","unknown"].includes(n.presence.status)&&!["offline","unknown"].includes(e.presence.status)?(!n.silenced_until||n.silenced_until<Date.now())&&(n.silenced_until=Date.now()+3e5,"off"!==ot.notifications.online&&(Qt({header:`<span>${n.to.username.toUpperCase()}</span>`,msg:`<img src="/res/status/${e.presence.status}.png" style="height: 1em; vertical-align: -10%;" /> has come online`,color:sl[e.presence.status],icon:n.to.avatar_revision?`/user-content/avatars/${n.to._id}.jpg?rv=${n.to.avatar_revision}`:Ot(n.to._id),classes:["snotify"],timeout:5e3,onclick:e=>{e(),zr(n)},suppressable:!0}),dl()||xa.SePlay("social_online",.7)),"both"!==ot.notifications.online||dl()||Ho(n.to.username.toUpperCase(),"has come online",!1,n.to.avatar_revision?`/user-content/avatars/${n.to._id}.jpg?rv=${n.to.avatar_revision}`:"/res/tetriox256.png")):["offline","unknown"].includes(e.presence.status)&&!["offline","unknown"].includes(n.presence.status)&&(!n.silenced_until||n.silenced_until<Date.now())&&(n.silenced_until=Date.now()+3e5,"off"!==ot.notifications.offline&&(Qt({header:`<span>${n.to.username.toUpperCase()}</span>`,msg:'<img src="/res/status/offline.png" style="height: 1em; vertical-align: -10%;" /> has gone offline',color:sl.offline,icon:n.to.avatar_revision?`/user-content/avatars/${n.to._id}.jpg?rv=${n.to.avatar_revision}`:Ot(n.to._id),classes:["snotify"],timeout:5e3,onclick:e=>{e(),zr(n)},suppressable:!0}),dl()||xa.SePlay("social_offline",.7)),"both"!==ot.notifications.offline||dl()||Ho(n.to.username.toUpperCase(),"has gone offline",!1,n.to.avatar_revision?`/user-content/avatars/${n.to._id}.jpg?rv=${n.to.avatar_revision}`:"/res/tetriox256.png")),n.presence=e.presence,Lr&&Sr._id===n._id&&["offline","unknown"].includes(e.presence.status)&&xt("social_relationships_tabs_online").classList.contains("active")&&(xt("social_relationships_tabs_online").classList.remove("active"),xt("social_relationships_tabs_friends").classList.add("active"),t=n._id))})),kr&&(il(),Ir(),null!==t&&xt(`social_relationship_${t}`)&&setTimeout((()=>{xt(`social_relationship_${t}`)&&xt(`social_relationship_${t}`).scrollIntoView({behavior:"smooth",block:"center",inline:"start"})}),50)),qr()})),Ja.on("social.dm",(e=>{const t=e.stream.replace(bn.id(),"").replace(":","");void 0!==fr.dms[t]&&(fr.dms[t].push(e),fr.dms[t].length>250&&fr.dms[t].shift(),kr&&Lr&&Sr.to._id===t&&Er()),e.data.user===bn.id()||kr&&Lr&&Sr.to._id===t&&!document.body.classList.contains("nofocus")?kr&&Lr&&Sr&&Vr(Sr):(fr.relationships.forEach((n=>{if(n.to._id!==t)return;kr&&Lr&&Sr.to._id===t?Vr(n,!0):n.unread++;let s={};s=e.data.user===n.to._id?{username:n.to.username,_id:n.to._id,...e.data.userdata||{}}:{username:e.data.user,_id:null,...e.data.userdata||{}};let i=e.data.content;if(!1!==ot.video.chatfilter&&e.data.content_safe&&(i=e.data.content_safe),"off"===("friend"===n.type?ot.notifications.dm:ot.notifications.dm_pending)||hl()||(Qt({header:`<span>${n.to.username.toUpperCase()}</span>`,msg:Nn(zt(i),s,!1===ot.video.emotes_anim),color:"#A2CEE8",icon:n.to.avatar_revision?`/user-content/avatars/${n.to._id}.jpg?rv=${n.to.avatar_revision}`:Ot(n.to._id),subcolor:"#000",subicon:"/res/icon/message-bw.svg",classes:["snotify","snotifydm"],timeout:5e3,onclick:e=>{e(),zr(n)}}),xa.SePlay("social_dm")),"both"===("friend"===n.type?ot.notifications.dm:ot.notifications.dm_pending)&&!hl()){let e=i;if(br.get(n.to._id)){for(br.get(n.to._id).push(i);br.get(n.to._id).length>4;)br.get(n.to._id).shift();e=br.get(n.to._id).join("\n")}else br.set(n.to._id,[i]);Ho(n.to.username.toUpperCase(),e,!1,n.to.avatar_revision?`/user-content/avatars/${n.to._id}.jpg?rv=${n.to.avatar_revision}`:"/res/tetriox256.png",n.to._id,(()=>{zr(n)}))}})),kr&&il()),Ur()})),Ja.on("social.invite",(e=>{hl()||fr.relationships.forEach((t=>{if(t.to._id!==e.sender)return;let n=e.roomname;!1!==ot.video.chatfilter&&e.roomname_safe&&(n=e.roomname_safe),Qt({header:`<span>${t.to.username.toUpperCase()}</span>`,msg:`invited you to <b>${zt(n)}</b><div class="notification_timeoutbar" style="--time: 24s;"></div>`,color:"#FF008A",icon:t.to.avatar_revision?`/user-content/avatars/${t.to._id}.jpg?rv=${t.to.avatar_revision}`:Ot(t.to._id),subcolor:"#FF008A",subicon:"/res/icon/invite.svg",classes:["snotify","modalnotify"],timeout:25e3,onclick:()=>{},buttons:[{label:"IGNORE",icon:"/res/icon/denied.svg",classes:[],onclick:e=>{e()}},{label:"ACCEPT",icon:"/res/icon/accepted.svg",classes:["pri"],onclick:t=>{if("busy"===fr.presence.realstatus)return en("you cannot accept this invite now"),void t();Cr(e.roomid),t()}}]}),xa.SePlay("social_invite"),"both"===ot.notifications.invite&&Ho(t.to.username.toUpperCase(),`invited you to "${n}"`,!1,t.to.avatar_revision?`/user-content/avatars/${t.to._id}.jpg?rv=${t.to.avatar_revision}`:"/res/tetriox256.png")}))})),Ja.on("social.party.invite",(e=>{hl()||fr.relationships.forEach((t=>{t.to._id===e.sender&&(Qt({header:`<span>${t.to.username.toUpperCase()}</span>`,msg:'invited you to team up in <b>QUICK PLAY</b><div class="notification_timeoutbar" style="--time: 24s;"></div>',color:"#FF008A",icon:t.to.avatar_revision?`/user-content/avatars/${t.to._id}.jpg?rv=${t.to.avatar_revision}`:Ot(t.to._id),subcolor:"#FF008A",subicon:"/res/icon/invite.svg",classes:["snotify","modalnotify"],timeout:25e3,onclick:()=>{},buttons:[{label:"IGNORE",icon:"/res/icon/denied.svg",classes:[],onclick:e=>{e()}},{label:"ACCEPT",icon:"/res/icon/accepted.svg",classes:["pri"],onclick:t=>{if("busy"===fr.presence.realstatus)return en("you cannot accept this invite now"),void t();yr(e.inviteid),t()}}]}),xa.SePlay("social_invite"),"both"===ot.notifications.invite&&Ho(t.to.username.toUpperCase(),"invited you to team up in QUICK PLAY",!1,t.to.avatar_revision?`/user-content/avatars/${t.to._id}.jpg?rv=${t.to.avatar_revision}`:"/res/tetriox256.png"))}))})),document.addEventListener("keydown",t,!1),document.addEventListener("gpdown",t,!1);let e=0;function t(t){Object.keys(rt).forEach((n=>{if(rt[n].includes(yt(t))){let s=!1;if(["social_relationships_find","social_dm_input"].includes(document.activeElement.id)&&"BACKSPACE"!==yt(t)&&(s=!0),!s&&["input","textarea"].includes(document.activeElement.tagName.toLowerCase()))return;if("menuDown"===n){if(kr&&!Lr){if(At(".social_relationship.focus")){const e=At(".social_relationship.focus");e.nextElementSibling?(e.classList.remove("focus"),e.nextElementSibling.classList.add("focus"),e.nextElementSibling.scrollIntoView({behavior:"auto",block:"center",inline:"start"})):(e.classList.remove("focus"),e.parentElement.firstElementChild.classList.add("focus"),e.parentElement.firstElementChild.scrollIntoView({behavior:"auto",block:"center",inline:"start"}))}["DOWN","ARROWDOWN"].includes(yt(t))&&(t.stopPropagation(),t.preventDefault())}}else if("menuUp"===n&&kr&&!Lr){if(At(".social_relationship.focus")){const e=At(".social_relationship.focus");e.previousElementSibling?(e.classList.remove("focus"),e.previousElementSibling.classList.add("focus"),e.previousElementSibling.scrollIntoView({behavior:"auto",block:"center",inline:"start"})):(e.classList.remove("focus"),e.parentElement.lastElementChild.classList.add("focus"),e.parentElement.lastElementChild.scrollIntoView({behavior:"auto",block:"center",inline:"start"}))}["UP","ARROWUP"].includes(yt(t))&&(t.stopPropagation(),t.preventDefault())}if(t.repeat)return;"openSocial"===n?(kr?Br():wr(),t.stopPropagation(),t.preventDefault()):"menuBack"===n||"ESCAPE"===yt(t)?kr&&("social_dm_input"===document.activeElement.id?(e=Date.now()+50,Fr()):e<Date.now()&&Br(),t.stopPropagation(),t.preventDefault()):"menuConfirm"===n&&kr&&!Lr&&At(".social_relationship.focus")&&At(".social_relationship.focus").click()}}))}})),window.DEVHOOK_FAST_JOIN_ROOM=e=>{Cr(e)};let xr=null,Ar=null,vr=0,kr=!1;function wr(){kr||bn.anon()||(xr&&(clearTimeout(xr),xr=null),Ar&&clearInterval(Ar),Rr(),xt("social").classList.remove("hidden"),xt("social").getBoundingClientRect(),xt("social").classList.remove("hiding"),xt("social_relationships_find").value="",xt("sbcpw").scrollTop=-200,xt("social_relationships_tabs_online").classList.contains("active")&&0===fr.relationships.filter((e=>["online","away","busy"].includes(e.presence.status)&&"friend"===e.type)).length&&(xt("social_relationships_tabs_online").classList.remove("active"),xt("social_relationships_tabs_friends").classList.add("active")),Ar=setInterval((()=>{Rr(),++vr%600==0&&kr&&il()}),100),kr=!0,xa.SePlay("social_open"),Wr(),$r(),Ir(),Er(),rl(),gi.push(),gi.bindGuide(fi.social),gi.disengage(),no(),Lr?(requestAnimationFrame((()=>{xt("social_dm_input").focus()})),Sr&&Sr.unread&&Vr(Sr)):requestAnimationFrame((()=>{xt("social_relationships_find").focus()})),il())}function Br(){kr&&(bn.anon()||(xr&&clearTimeout(xr),Ar&&(clearInterval(Ar),Ar=null),xt("social").classList.add("hiding"),xr=setTimeout((()=>{xt("social").classList.add("hidden")}),300),Kr(),Gr(),Lr&&Sr&&Sr.unread&&Vr(Sr),kr=!1,xa.SePlay("social_close"),gi.pop(),so()))}let Lr=!1,Sr=null;function zr(e,t=!1){if(kr||wr(),Lr&&kr&&t&&Sr._id===e._id)return void Fr();if(xt("social_people").classList.add("collapsed"),vt(".social_relationship").forEach((e=>{e.classList.remove("active")})),!xt(`social_relationship_${e._id}`)){let t=!1;if(fr.relationships.forEach((n=>{n._id===e._id&&("friend"===e.type?(vt(".social_relationships_tab").forEach((e=>{e.classList.remove("active")})),xt("social_relationships_tabs_friends").classList.add("active"),t=!0):"pending"===e.type&&(vt(".social_relationships_tab").forEach((e=>{e.classList.remove("active")})),xt("social_relationships_tabs_pending").classList.add("active"),t=!0))})),t&&(il(),!xt(`social_relationship_${e._id}`)))return Fr(),void xt("social_people").classList.remove("collapsed")}let n=!1;Sr&&Sr.unread&&(Vr(Sr),n=!0),xt(`social_relationship_${e._id}`).classList.add("active"),setTimeout((()=>{xt(`social_relationship_${e._id}`)&&xt(`social_relationship_${e._id}`).scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}),50),Lr||xa.SePlay("social_open_minor"),Lr=!0,Sr=e,Ir(),void 0===fr.dms[e.to._id]?(Er(!0),Cn.get(`/api/dms/${e.to._id}`).then((t=>{fr.dms[e.to._id]=t.dms.reverse(),Er()}),(e=>{Ki(),sn(e)}))):Er(),e.unread&&(Vr(e),n=!0),n&&il(),requestAnimationFrame((()=>{xt("social_dm_input").focus()}))}function Fr(){if(!Lr)return;xt("social_people").classList.remove("collapsed"),vt(".social_relationship").forEach((e=>{e.classList.remove("active")})),Lr&&xa.SePlay("social_close_minor"),Lr=!1,Sr&&Sr.unread&&(Vr(Sr),il());const e=xt("sbcpw").scrollTop;requestAnimationFrame((()=>{xt("social_relationships_find").focus(),xt("sbcpw").scrollTop=e}))}function Tr(e){fr.relationships.forEach((t=>{t.to._id===e&&zr(t)}))}function Ir(){if(!Lr||!Sr)return;const e=Sr;if(xt("social_dm_img").src=e.to.avatar_revision?`/user-content/avatars/${e.to._id}.jpg?rv=${e.to.avatar_revision}`:Ot(e.to._id),xt("social_dm_username").innerHTML=e.to.username.toUpperCase(),xt("social_dm_username").classList.toggle("lu",e.to.username.length>14),xt("social_dm").classList.toggle("offline",!["online","away","busy"].includes(e.presence.status)),xt("social_dm_button_invite").classList.toggle("hidden",!e.presence.invitable),"friend"===e.type){const t=e.presence.detail.split(":"),n=_r[e.presence.status](t[0]||"",t[1]||"");xt("social_dm_status").innerHTML=`<img src="/res/status/${e.presence.status}.png" /> ${n.html}`,xt("social_dm_button_snipe").classList.toggle("hidden",!(t[1]&&"X-PRIV"!==t[1]&&"online"===e.presence.status))}else switch(xt("social_dm_button_snipe").classList.add("hidden"),e.type){case"block":xt("social_dm_status").innerHTML='<img src="/res/status/blocked.png" /> Blocked';break;case"pending":xt("social_dm_status").innerHTML='<img src="/res/status/unknown.png" /> Not a friend';break;default:xt("social_dm_status").innerHTML='<img src="/res/status/unknown.png" /> Status unknown'}rl()}function Er(e=!1){if(!Lr||!Sr)return;const t=Sr;let n=[];if(n=e?[{id:`${t.to._id}--loading`,data:{content:"Loading chat messages...",user:"[CMD]",system:!1,announcement:!1,banner:!0}}]:JSON.parse(JSON.stringify(fr.dms[t.to._id]||[])),n||(n=[]),gr.includes(t.to._id)||(n.unshift({id:`${t.to._id}--rules`,data:{content:"Please be civil. Staff will never ask for your credentials.",user:"[CMD]",system:!1,announcement:!1,banner:!0}}),"pending"===t.type&&n.unshift({id:`${t.to._id}--pending`,data:{content:`${t.to.username.toUpperCase()} isn't on your friends list. You can block them by clicking PROFILE. Don't want to receive DMs from strangers? Check your privacy settings in Config -> Account.`,user:"[CMD]",system:!1,announcement:!1,banner:!0}})),"osk"===t.to.username&&"friend"===t.type){let e=!1;n.forEach((n=>{n.data.user===t.to._id&&(e=!0)})),e||(n.unshift({id:`${t.to._id}--msgosk2`,data:{content:"Please **do not message osk for TETR.IO support**, such as account issues, ban appeals, and any other requests for help.\nFor help with such issues, please [contact support](https://tetr.io/about/support/).\nYour DM will be ignored at best.",user:"[CMD]",system:!1,announcement:!1,banner:!0,banner_color:"#FF008466",markdown:!0}}),n.unshift({id:`${t.to._id}--msgosk`,data:{content:"Do you really want to message osk? He's often very busy, and might not reply very quickly or at all, and does not accept invites. He tries to read every DM he gets, so please go easy on him, OK?",user:"[CMD]",system:!1,announcement:!1,banner:!0,banner_color:"#19FF9533",banner_img:"/res/emotes/kagari.png"}}))}else if("dimentio"===t.to.username&&"friend"===t.type){let e=!1;n.forEach((n=>{n.data.user===t.to._id&&(e=!0)})),e||(n.unshift({id:`${t.to._id}`,data:{content:"Please do not message **Dimentio** for TETR.IO support, such as account issues, ban appeals, and any other requests for help.\nFor help with such issues, please [contact support](https://tetr.io/about/support/).\nYour DM will be ignored at best.",user:"[CMD]",system:!1,announcement:!1,banner:!0,banner_color:"#FF008466",markdown:!0}}),n.unshift({id:`${t.to._id}`,data:{content:"Do not send maho emotes to Dimentio!! He likes them very much and is very likely to send them back. Be careful!",user:"[CMD]",system:!1,announcement:!1,banner:!0,banner_color:"#19FF9533",banner_img:"/res/emotes/mahoblush.png"}}))}else if(mr.includes(t.to._id)&&"friend"===t.type){let e=!1;n.forEach((n=>{n.data.user===t.to._id&&(e=!0)})),e||n.unshift({id:`${t.to._id}--msgstaff`,data:{content:`Please do not message **${t.to.username.toUpperCase()}** for TETR.IO support, such as account issues, ban appeals, and any other requests for help.\nFor help with such issues, please [contact support](https://tetr.io/about/support/). Your DM will be ignored at best.`,user:"[CMD]",system:!1,announcement:!1,banner:!0,banner_color:"#FF008466",markdown:!0}})}else gr.includes(t.to._id)&&"pending"===t.type&&n.unshift({id:`${t.to._id}--msgstaff`,data:{content:"**This is the TETR.IO staff account.**\nThis channel is not used for account sanctions, and messages sent here are not part of your account status.\nThis account is send-only and cannot be messaged.\nIf you have any questions, please [contact support](https://tetr.io/about/support/).",user:"[CMD]",system:!1,announcement:!1,banner:!0,banner_color:"#ff511c66",markdown:!0}});const s=n.map((e=>e.id));vt("#social_chat .chat_message").forEach((e=>{s.includes(e.getAttribute("data-id"))||e.remove()}));const i=new DocumentFragment;n.forEach((e=>{const n=e.data;n.user=n.user===t.from._id?{username:t.from.username,_id:t.from._id,...n.userdata||{}}:n.user===t.to._id?{username:t.to.username,_id:t.to._id,...n.userdata||{}}:{username:n.user,_id:null,...n.userdata||{}};xt(`social_dm_${e.id}`)||Mr(e,!1,i)})),xt("social_chat").appendChild(i),xt("sbdmcpw").scrollTop=xt("sbdmcpw").scrollHeight+100}function Mr(e,t=!1,n=null){if(Sr&&t){const t=JSON.parse(JSON.stringify(e));t.data.user=t.data.user._id||t.data.user.username,Object.keys(fr.dms).forEach((e=>{e.replace(bn.id(),"").replace(":","")===Sr.to._id&&fr.dms[e].push(t)}))}const s=e.data;!1!==ot.video.chatfilter&&s.content_safe&&s.user._id!=bn.id()&&(s.content=s.content_safe);const i=document.createElement("div");i.classList.add("chat_message"),i.classList.add("dm_chat_message"),i.id=`social_dm_${e.id}`,i.setAttribute("data-id",e.id||null),e.ts&&i.setAttribute("data-ts",e.ts),s.banner&&i.classList.add("chat_banner"),s.banner_img&&i.classList.add("chat_banner_img"),s.system&&i.classList.add("system"),s.announcement&&i.classList.add("announcement"),s.user.supporter&&(i.classList.add("supporterchat"),i.classList.add(`supporterchat_t${s.user.supporter_tier}`)),"sysop"===s.user.role&&i.classList.add("sysopchat"),"admin"===s.user.role&&i.classList.add("adminchat"),"mod"===s.user.role&&i.classList.add("modchat"),"halfmod"===s.user.role&&i.classList.add("halfmodchat");const o=document.createElement("h1");o.textContent=s.user.username.toUpperCase(),s.user._id&&(o.classList.add("chat_tag"),o.setAttribute("data-id",s.user._id)),i.appendChild(o);const a=document.createElement("p"),r=s.markdown?Ft:zt,l=zt(s.content);let c=s.nosanitize?s.content:Nn(r(s.content),s.user,!1===ot.video.emotes_anim);if(l===c?a.textContent=s.content:(0===c.replace(/<img class=(.+?) \/>/,"").length&&(c=c.replace('"emote"','"emote big"')),a.innerHTML=c),s.banner_color&&(a.style.color=s.banner_fgcolor||"#FFF",a.style.backgroundColor=s.banner_color,a.style.borderColor=s.banner_color),i.appendChild(a),s.banner_img){const e=document.createElement("img");e.classList.add("banner_img"),e.setAttribute("src",s.banner_img),i.appendChild(e)}(n||xt("social_chat")).appendChild(i),n||(xt("sbdmcpw").scrollTop=xt("sbdmcpw").scrollHeight+100)}function Dr(e){if(!Sr)return;if(e.repeat||e.isComposing)return;if("Enter"!==e.code&&"NumpadEnter"!==e.code)return;const t=e.target.value;t.length&&Or(Sr.to._id,t),xt("social_dm_input").value=""}function Or(e,t){if(t.startsWith("/")){const e=t.split(" ");switch(e[0].toLowerCase()){case"/invite":case"/inv":case"/i":if(xt("social_dm_button_invite").classList.contains("hidden"))return void Pr("Cannot invite this user right now");if(xt("social_dm_button_invite").classList.contains("active"))return void Pr("Invite is on cooldown");xt("social_dm_button_invite").click(),Pr("Invite sent");break;case"/snipe":case"/join":case"/j":if(xt("social_dm_button_snipe").classList.contains("hidden"))return void Pr("Cannot join this user's room right now");xt("social_dm_button_snipe").click();break;case"/profile":case"/prof":case"/p":if(xt("social_dm_button_profile").classList.contains("hidden"))return void Pr("Cannot check this user's profile");xt("social_dm_button_profile").click();break;case"/gift":case"/g":case"/support":case"/s":if(xt("social_dm_button_gift").classList.contains("hidden"))return void Pr("Cannot gift this user right now");xt("social_dm_button_gift").click();break;case"/help":Pr("Available commands: /INVITE (/INV, /I), /SNIPE (/S, /JOIN, /J), /PROFILE (/PROF, /P), /GIFT (/G, /SUPPORT, /S)");break;case"/kagari":Pr(":kagari:");break;default:Pr(`Unknown command ${e[0].toLowerCase()}`)}}else Ja&&Ja.isConnected()&&Ja.emit("social.dm",{recipient:e,msg:t})}function Pr(e){Mr({id:`kagarin${Date.now()}${Math.floor(1e7*Math.random())}`,stream:"kagarin",data:{content:e,user:{username:"[CMD]",_id:null},system:!0,announcement:!1}},!0)}const Hr=Date.now();function Rr(){const e=(new Date).toLocaleTimeString().replace("AM","<span>AM</span>").replace("PM","<span>PM</span>");xt("social_top_clock").innerHTML=e,xt("social_top_sessiontime").innerHTML=`${Bt(Hr)} this session`}function Wr(){xt("social_bottom_online").innerHTML=`${fr.total_online.toLocaleString()} ONLINE`}let Nr=!1;function $r(){if(0===fr.notifications.length)return xt("social_notifications_content").innerHTML='<div class="social_empty"><img src="/res/social_working.png" /><p>Notifications will appear here.</p></div>',void(Nr=!0);Nr&&(xt("social_notifications_content").innerHTML="",Nr=!1);let e=null;for(fr.notifications.forEach((t=>{let n=xt(`social_notification_${t._id}`);if(!n){if(!hr[t.type])return;const s=hr[t.type](t);if(n=document.createElement("div"),n.classList.add("social_notification"),n.id=`social_notification_${t._id}`,n.style=`--pri: ${s.pri}; --sec: ${s.sec};`,s.action&&(n.setAttribute("data-action",s.action),n.addEventListener("click",(()=>{Yr(s.action)}))),s.img_main){const e=document.createElement("img");e.classList.add("social_notification_img_main"),e.src=s.img_main,n.appendChild(e)}if(s.img_sub){const e=document.createElement("img");e.classList.add("social_notification_img_sub"),e.src=s.img_sub,n.appendChild(e)}const i=document.createElement("h1");i.innerHTML=s.header,n.appendChild(i);const o=document.createElement("h2");n.appendChild(o);const a=document.createElement("p");a.innerHTML=s.content,n.appendChild(a),e?e.insertAdjacentElement("afterend",n):xt("social_notifications_content").insertAdjacentElement("afterbegin",n)}n&&(n.querySelector("h2").innerHTML=St(new Date(t.ts).getTime()),n.classList.toggle("unread",!t.seen),e=n)}));xt("social_notifications_content").children.length>100;)xt("social_notifications_content").removeChild(xt("social_notifications_content").children[100])}function Gr(){let e=0;fr.notifications.forEach((t=>{t.seen||e++})),xt("social_tray").classList.toggle("unread_notifications",0!==e),xt("social_tray_badge_notifications").innerHTML=e,Xr.notification=e,jr()}function Ur(){let e=0;fr.relationships.forEach((t=>{e+=t.unread||0})),xt("social_tray").classList.toggle("unread_people",0!==e),xt("social_tray_badge_people").innerHTML=e,Xr.people=e,jr()}const Xr={notification:0,people:0};function jr(){Ro.setNotificationCount(Xr.notification+Xr.people)}function qr(){let e=0;fr.relationships.forEach((t=>{"friend"===t.type&&["online","away","busy"].includes(t.presence.status)&&e++})),xt("social_tray_online").innerHTML=e}function Kr(){Ja&&Ja.isConnected()&&Ja.emit("social.notification.ack"),fr.notifications.forEach((e=>{e.seen=!0}))}function Vr(e,t=!1){e.unread=0,t||br.delete(e.to._id),Ja&&Ja.isConnected()&&Ja.emit("social.relation.ack",e.to._id),Ur(),kr&&ol()}function Yr(e){const t=e.split(":");switch(t[0]){case"user":ka({userID:t[1]});break;case"support":Ii();break;case"url":Gs(t.slice(1).join(":"));break;case"room":"busy"===fr.presence.realstatus?en("you cannot join this room now"):lr.isInRoom()&&ar===t[1]?en("you are already in this room"):(Cr(t[1]),Br());break;case"achievement":Mo(t[1])}}function Qr(e){for(let t=0;t<fr.relationships.length;t++)if(fr.relationships[t].to._id===e)return fr.relationships[t]}function Zr(e){for(let t=0;t<fr.relationships.length;t++)if(fr.relationships[t].to.username===e)return fr.relationships[t]}let Jr=!1,el=!1,tl="";const nl=["online","away","busy","offline","unknown",void 0],sl={online:"#4AFF71",away:"#FFD84A",busy:"#FF504A",offline:"#FFF5",unknown:"#FFF5"};function il(){ol();let e=[],t=!1;const n=xt("social_relationships_find").value.trim().toLowerCase();if(xt("social_relationships_find").classList.toggle("active",!!n),n?(e=fr.relationships.filter((e=>["friend","pending"].includes(e.type)&&e.to.username.includes(n))),t=!0):xt("social_relationships_tabs_online").classList.contains("active")?(e=fr.relationships.filter((e=>["online","away","busy"].includes(e.presence.status)&&"friend"===e.type)),t=!0):xt("social_relationships_tabs_friends").classList.contains("active")?(e=fr.relationships.filter((e=>"friend"===e.type)),t=!0):xt("social_relationships_tabs_pending").classList.contains("active")?e=fr.relationships.filter((e=>"pending"===e.type)):xt("social_relationships_tabs_blocked").classList.contains("active")&&(e=fr.relationships.filter((e=>"block"===e.type))),xt("social_relationships_tabs_pending").classList.toggle("hidden",!xt("social_relationships_tabs_pending").classList.contains("active")&&0===fr.relationships.filter((e=>"pending"===e.type)).length),e.sort(((e,t)=>e.to.username===n!=(t.to.username===n)?(t.to.username===n)-(e.to.username===n):e.unread!==t.unread?t.unread-e.unread:e.presence.status!==t.presence.status?nl.indexOf(e.presence.status)-nl.indexOf(t.presence.status):e.to.username.localeCompare(t.to.username))),0===e.length){if(n){let e="Couldn't find anyone like that.",t=!1,s=!1;switch(n){case"anyone like that":e="Couldn't find anyone with that name.";break;case"anyone with that name":e="Couldn't find that person.";break;case"that person":e="Couldn't find the specified user.";break;case"the specified user":e="Couldn't find anyone in your friends list with that name.";break;case"anyone in your friends list with that name":e="Couldn't find who you are looking for.";break;case"who you are looking for":e="Couldn't find any user in your friends list who matches the specified search term.";break;case"any user in your friends list who matches the specified search term":e="...",t=!0}/^[a-z0-9\-_]{3,16}$/.test(n)&&(s=!0),xt("social_relationships").innerHTML=`<div class="social_empty"><img src="/res/${t?"social_blocked":"social_error"}.png" /><p>${e}</p>${s?`<p class="also tetra_pop" data-username="${zt(n)}">Look for <span>${zt(n.toUpperCase())}</span> on Tetra Channel?</p>`:""}</div>`}else xt("social_relationships_tabs_online").classList.contains("active")?xt("social_relationships").innerHTML='<div class="social_empty"><img src="/res/social_empty.png" /><p>Nobody\'s online right now.</p></div>':xt("social_relationships_tabs_friends").classList.contains("active")?xt("social_relationships").innerHTML='<div class="social_empty"><img src="/res/social_empty.png" /><p>You haven\'t added any friends yet. Click the FRIEND button on a profile to friend them.</p></div>':xt("social_relationships_tabs_pending").classList.contains("active")?xt("social_relationships").innerHTML='<div class="social_empty"><img src="/res/social_loading.png" /><p>If someone outside of your friends list messages you, they\'ll appear here.</p></div>':xt("social_relationships_tabs_blocked").classList.contains("active")&&(xt("social_relationships").innerHTML='<div class="social_empty"><img src="/res/social_blocked.png" /><p>You haven\'t blocked anyone yet.</p></div>');return void(Jr=!0)}Jr&&(xt("social_relationships").innerHTML="",Jr=!1);const s=e.map((e=>e._id));vt("#social_relationships .social_relationship").forEach((e=>{s.includes(e.getAttribute("data-id"))||e.remove()}));let i=null;e.forEach((e=>{let n=xt(`social_relationship_${e._id}`);if(n)xt("social_relationships").insertAdjacentElement("beforeend",n),el&&(n.querySelector("h1 span").textContent=e.to.username.toUpperCase(),n.querySelector(".social_relationship_img").src=e.to.avatar_revision?`/user-content/avatars/${e.to._id}.jpg?rv=${e.to.avatar_revision}`:Ot(e.to._id),el=!1);else{n=document.createElement("div"),n.classList.add("social_relationship"),n.classList.toggle("active",Lr&&Sr._id===e._id),n.id=`social_relationship_${e._id}`,n.setAttribute("data-id",e._id),n.addEventListener("click",(()=>{"block"===e.type?ka({userID:e.to._id}):zr(e,!0)}));const t=document.createElement("img");t.classList.add("social_relationship_img"),t.src=e.to.avatar_revision?`/user-content/avatars/${e.to._id}.jpg?rv=${e.to.avatar_revision}`:Ot(e.to._id),n.appendChild(t);const s=document.createElement("h1");n.appendChild(s);const o=document.createElement("span");o.textContent=e.to.username.toUpperCase(),s.appendChild(o);const a=document.createElement("p");n.appendChild(a);const r=document.createElement("h2");n.appendChild(r);const l=document.createElement("div");l.classList.add("social_relationship_button_holder"),n.appendChild(l);const c=document.createElement("div");c.title="Join room",c.classList.add("social_relationship_button"),c.classList.add("social_relationship_button_snipe");const p=document.createElement("img");p.src="/res/icon/snipe.svg",c.appendChild(p),c.addEventListener("click",(t=>{if(c.classList.contains("active"))t.stopPropagation();else{if(c.classList.add("activated"),setTimeout((()=>{c.classList.remove("activated")}),300),lr.isInRoom()&&xt(`sp_${e.to._id}`))return en("you are already in their room"),void t.stopPropagation();e.presence.detail.split(":")[1]&&(Cr(e.presence.detail.split(":")[1]),Br()),t.stopPropagation()}})),l.appendChild(c);const h=document.createElement("div");h.title="Invite to your game",h.classList.add("social_relationship_button"),h.classList.add("social_relationship_button_invite");const d=document.createElement("img");d.src="/res/icon/invite.svg",h.appendChild(d);const u=document.createElement("span");if(h.appendChild(u),h.addEventListener("click",(t=>{if(h.classList.contains("active"))t.stopPropagation();else{if(h.classList.add("activated"),setTimeout((()=>{h.classList.remove("activated")}),300),document.body.classList.contains("inzenith"))return xt("zenith-duo-card").classList.contains("active")||xt("zenith-duo-card").click(),Ja&&Ja.isConnected()&&Ja.emit("social.party.invite",e.to._id),e.inv_locked_until=Date.now()+3e4,rl(),void t.stopPropagation();if(lr.isInRoom()&&xt(`sp_${e.to._id}`))return en("this person is already in your room"),void t.stopPropagation();Ja&&Ja.isConnected()&&Ja.emit("social.invite",e.to._id),e.inv_locked_until=Date.now()+3e4,rl(),t.stopPropagation()}})),l.appendChild(h),"pending"===e.type){const t=document.createElement("div");t.title="Close DM",t.classList.add("social_relationship_button"),t.classList.add("social_relationship_button_close");const n=document.createElement("img");n.src="/res/icon/close.svg",t.appendChild(n),t.addEventListener("click",(n=>{t.classList.contains("active")||(t.classList.add("activated"),Cn.post("/api/relationships/remove",{user:e.to._id}).then((()=>{t.classList.remove("activated")}),(e=>{sn(e)}))),n.stopPropagation()})),l.appendChild(t)}i?i.insertAdjacentElement("afterend",n):xt("social_relationships").insertAdjacentElement("beforeend",n)}if(n){n.classList.toggle("unread",!!e.unread),n.classList.toggle("offline",t&&!["online","away","busy"].includes(e.presence.status)),n.setAttribute("style",t?`--pri: ${sl[e.presence.status||"unknown"]};`:"");let s="";if(t){const t=e.presence.detail.split(":"),i=_r[e.presence.status](t[0]||"",t[1]||""),o=`<img src="/res/status/${e.presence.status}.png" /> ${i.html}`;n.querySelector("p").innerHTML!==o&&(n.querySelector("p").innerHTML=o),s=i.text,n.querySelector(".social_relationship_button_snipe").classList.toggle("hidden",!(t[1]&&"X-PRIV"!==t[1]&&"online"===e.presence.status))}else{n.querySelector(".social_relationship_button_snipe").classList.add("hidden");let t="";switch(e.type){case"block":t='<img src="/res/status/blocked.png" /> Blocked',s="Blocked";break;case"pending":t='<img src="/res/status/unknown.png" /> Not a friend',s="Not a friend";break;default:t='<img src="/res/status/unknown.png" /> Status unknown',s="Status unknown"}n.querySelector("p").innerHTML!==t&&(n.querySelector("p").innerHTML=t)}n.classList.toggle("cc",n.querySelector("p").innerHTML.length>=70),n.setAttribute("title",`${e.to.username.toUpperCase()}\n${s}`),n.querySelector("h2").textContent=e.unread||0,n.querySelector(".social_relationship_button_invite").classList.toggle("hidden",!e.presence.invitable),i=n}})),n?(tl===n&&At(".social_relationship.focus")||(vt(".social_relationship.focus").forEach((e=>{e.classList.remove("focus")})),At(".social_relationship")&&At(".social_relationship").classList.add("focus")),tl=n):vt(".social_relationship.focus").forEach((e=>{e.classList.remove("focus")})),rl(),xt("social").classList.toggle("bulky",e.length>50)}function ol(){let e=0,t=0,n=0,s=0,i=0;fr.relationships.forEach((o=>{e+=o.unread||0,"friend"===o.type?(n+=o.unread||0,["offline","unknown"].includes(o.presence.status)||(t+=o.unread||0)):"pending"===o.type?s+=o.unread||0:"block"===o.type&&(i+=o.unread||0)})),At("#social_relationships_tabs_online .social_relationships_tab_unread").classList.toggle("hidden",0===t),At("#social_relationships_tabs_online .social_relationships_tab_unread").textContent=t,At("#social_relationships_tabs_friends .social_relationships_tab_unread").classList.toggle("hidden",0===n),At("#social_relationships_tabs_friends .social_relationships_tab_unread").textContent=n,At("#social_relationships_tabs_pending .social_relationships_tab_unread").classList.toggle("hidden",0===s),At("#social_relationships_tabs_pending .social_relationships_tab_unread").textContent=s,At("#social_relationships_tabs_blocked .social_relationships_tab_unread").classList.toggle("hidden",0===i),At("#social_relationships_tabs_blocked .social_relationships_tab_unread").textContent=i,At("#social_unread").classList.toggle("hidden",0===e),At("#social_unread").textContent=e}let al=null;function rl(){if(!kr)return;al&&(clearTimeout(al),al=null);let e=0;fr.relationships.forEach((t=>{if(t.inv_locked_until>Date.now()){e++;const n=Math.ceil((t.inv_locked_until-Date.now())/1e3);xt(`social_relationship_${t._id}`)&&(At(`#social_relationship_${t._id} .social_relationship_button_invite`).classList.add("active"),At(`#social_relationship_${t._id} .social_relationship_button_invite span`).textContent=n),Lr&&Sr._id===t._id&&(xt("social_dm_button_invite").classList.add("active"),xt("social_dm_button_invite").style=`--progress: ${(t.inv_locked_until-Date.now())/3e4*100}%`)}else xt(`social_relationship_${t._id}`)&&At(`#social_relationship_${t._id} .social_relationship_button_invite`).classList.remove("active"),Lr&&Sr._id===t._id&&xt("social_dm_button_invite").classList.remove("active")})),e&&(al=setTimeout((()=>{rl()}),100))}function ll(e,t="",n="",s=null){const i=hl();s&&(fr.presence.mask=s),fr.presence.realstatus=e,fr.presence.realdetail=`${t}${n?`:${n}`:""}`,"away"!==e&&(fr.presence.last=[e,t,n]),[e,t,n]=ur[fr.presence.mask](e,t,n);const o=_r[e](t,n);hl()!==i&&(hl()||document.body.classList.contains("ingame_phys")&&!1!==ot.notifications.suppress||ln()),Hs(o.discord);const a=e,r=`${t}${n?`:${n}`:""}`;fr.presence.status=a,fr.presence.detail=r,Ja&&Ja.isConnected()&&Ja.emit("social.presence",{status:fr.presence.status,detail:fr.presence.realdetail}),xt("social_status").innerHTML=`${o.html} <img src="/res/status/${a}.png" />`,xt("social_status").classList.toggle("cc",xt("social_status").innerHTML.length>=65)}function cl(){"menus"===fr.presence.detail&&ll("away")}function pl(){null!==fr.presence.last&&"away"===fr.presence.realstatus&&ll(...fr.presence.last)}function hl(){return"busy"===fr.presence.realstatus||"busy"===fr.presence.mask}function dl(){return ot.notifications.suppress&&document.body.classList.contains("ingame_phys")||hl()}const ul=(()=>{const e={},t={"zen-try-sidebar":{startVisible:!0,el:"upsell_zen-try-sidebar",dismiss:"hover",dismissEl:"zen_panel"}};function n(n){if(!t[n])return;const s=t[n];xt(s.el).classList.contains("hidden")||xt(s.el).classList.contains("hiding")||(xt(s.el).classList.add("hiding"),setTimeout((()=>{xt(s.el).classList.add("hidden")}),800),e[n]=!0,localStorage.setItem("upsellState",JSON.stringify(e)))}Gt((()=>{!function(){const s=localStorage.getItem("upsellState");s&&Object.assign(e,JSON.parse(s));for(const[s,i]of Object.entries(t)){if(e[s])continue;let t=i.startVisible;if("function"==typeof i.startVisible&&(t=i.startVisible()),void 0!==e[s]||t)switch(xt(i.el).classList.remove("hidden"),i.dismiss){case"hover":xt(i.dismissEl||i.el).addEventListener("mouseover",(()=>{n(s)}));break;case"click":xt(i.dismissEl||i.el).addEventListener("click",(()=>{n(s)}));break;case"focus":xt(i.dismissEl||i.el).addEventListener("focus",(()=>{n(s)}))}}}()}))})();let _l,ml,gl,fl,bl,Cl,yl;const xl=(()=>{const e=new Map;return{play:function(t,n={}){const s=e.get(t);s&&(s.graphics||["medium","high","ultra"]).includes(ot.video.graphics)&&s.play(n)},register:function(t,n){e.set(t,n)},utils:{freq:e=>e*(parseFloat(ot.video.particles)||.6),scale:e=>ws(1.8)*e/Math.max(.75,Math.min(2,parseFloat(ot.video.particles||.6)+.4))}}})();let Al,vl;function kl(e){return e/(ot.video.particles||.6)}function wl(e){return e*(2.2-Math.max(0,2.2*(1-(ot.video.particles||.6))))}function Bl(e,t,n){if("ultra"!==ot.video.graphics||0==ot.video.flashwave)return;null===Nl.stage.filters&&(Nl.stage.filters=[]);const s=void 0===ot.video.flashwave?1:ot.video.flashwave;Nl.stage.filters.push(new o.filters.ShockwaveFilter([e,t],{amplitude:(2+2*n)*s,wavelength:ws(150+40*n*(.5+.5*s)),speed:ws(500+50*n),brightness:1+.25*s,radius:-1},0))}function Ll(e,t,n,s=void 0){return void 0===s&&(s=hc),e+(t-e)*s(n)}function Sl(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function zl(e){const t=Sl(e);return t?t.r<<16|t.g<<8|t.b:0}function Fl(e,t,n){let s,i,o;if(e/=360,n/=100,0===(t/=100))s=i=o=n;else{const a=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),r=n<.5?n*(1+t):n+t-n*t,l=2*n-r;s=a(l,r,e+1/3),i=a(l,r,e),o=a(l,r,e-1/3)}const a=e=>{const t=Math.round(255*e).toString(16);return 1===t.length?`0${t}`:t};return`#${a(s)}${a(i)}${a(o)}`}function Tl(e,t,n){n/=100;const s=t*Math.min(n,1-n)/100,i=t=>{const i=(t+e/30)%12,o=n-s*Math.max(Math.min(i-3,9-i,1),-1);return Math.round(255*o)};return i(0)<<16|i(8)<<8|i(4)}Tn.ready((function(e){o.Ticker.shared.add((e=>{"ultra"===ot.video.graphics&&null!==Nl.stage.filters&&(Nl.stage.filters.forEach(((t,n)=>{t.time+=e/(1e3/60),t.amplitude*=.98,t.brightness=1+.95*(t.brightness-1),t.time>5&&Nl.stage.filters.splice(n,1)})),0===Nl.stage.filters.length&&(Nl.stage.filters=null))}))})),xl.register("test",{play:e=>{const{x:t=0,y:n=0,color:s=16777215}=e;gl.spawnBurst({texture:"/res/particles/box.png",tint:s,lifetime:[.5,1.5],alpha:{from:1,to:0},speed:{from:[150,300],to:0},scale:xl.utils.scale(.8)},{x:t,y:n,amount:xl.utils.freq(50),shape:"circle",radius:100,directionOverride:0,angleOverride:45})}}),xl.register("garbage_beam_impact",{play:e=>{const{x:t=0,y:n=0,color:s=16777215,intensity:i=1}=e;gl.spawnBurst({texture:"/res/particles/beam.png",tint:s,lifetime:[.05,.1],alpha:{from:[.4+i/20*.4,.5+i/20*.5],to:0},speed:[1600,2400],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.1+i/20*.2),.15+i/20*.35]},{x:t,y:n,amount:xl.utils.freq(10),shape:"circle",radius:1,directionOverride:0,angleOverride:0}),gl.spawnBurst({texture:"/res/particles/fire.png",tint:s,lifetime:[.2,.3],alpha:{from:[.3,.5],to:0},alphamultiplier:{from:1,to:0},angle:[0,360],anglespeed:[-720,720],direction:[0,360],speed:[0,80],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.3+i/20*.8),.6+i/20*1]},{x:t,y:n,amount:5,shape:"point"})}}),xl.register("bgsplash",{graphics:["high","ultra"],play:e=>{const{amt:t=30,direction:n=[0,360],speed:s=[0,100]}=e;_l.spawnBurst({texture:"/res/particles/bigbox.png",tint:16777215,lifetime:[2,5],alpha:{from:[.02,.15],to:0},alphamultiplier:{from:0,to:2},speed:{from:s,to:0},direction:n,scale:[xl.utils.scale(.02),xl.utils.scale(.2)],wrap:!0},{shape:"rectangle",x:window.innerWidth/2,y:window.innerHeight/2,width:window.innerWidth,height:window.innerHeight,amount:xl.utils.freq(t)})}}),xl.register("bgsplashdanger",{graphics:["high","ultra"],play:e=>{const{amt:t=30,direction:n=[0,360],speed:s=[0,100]}=e;_l.spawnBurst({texture:"/res/particles/bigbox.png",tint:16720384,lifetime:[.1,1],alpha:{from:[.02,.15],to:0},alphamultiplier:{from:0,to:2},speed:{from:s,to:0},direction:n,scale:[xl.utils.scale(.02),xl.utils.scale(.3)],wrap:!0},{shape:"rectangle",x:window.innerWidth/2,y:window.innerHeight/2,width:window.innerWidth,height:window.innerHeight,amount:xl.utils.freq(t)})}}),xl.register("bgtransition",{graphics:["high","ultra"],play:()=>{_l.spawnBurst({texture:"/res/particles/bigbox.png",tint:16777215,lifetime:[.5,3],alpha:{from:[.02,.15],to:0},speed:{from:[0,400],to:[800,1600]},scale:{from:0,to:[xl.utils.scale(.05),xl.utils.scale(.5)]}},{shape:"rectangle",x:window.innerWidth/2,y:window.innerHeight/2,width:window.innerWidth,height:window.innerHeight,amount:xl.utils.freq(200),directionOverride:0})}}),xl.register("bgcircle",{graphics:["high","ultra"],play:e=>{const{radius:t=ws(10*_c.x),color:n=16777215,amt:s=100,speed:i=150}=e;_l.spawnBurst({texture:"/res/particles/particle.png",tint:n,lifetime:[.35,3],alpha:{from:[.02,.4],to:0},speed:{from:[0,i],to:0},scale:[xl.utils.scale(.02),xl.utils.scale(.25)]},{shape:"circle",x:window.innerWidth/2,y:window.innerHeight/2,radius:t,amount:xl.utils.freq(s),directionOverride:0})}}),xl.register("harddrop_trail",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0,color:s=16777215}=e;gl.spawnBurst({texture:"/res/particles/star.png",tint:s,lifetime:[.2,1],alpha:{from:[.3,.8],to:0},speed:{from:[150,450],to:[-100,100]},direction:[-2,2],xflurry:[0,50],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.08),xl.utils.scale(.2)]},{x:t,y:n,amount:xl.utils.freq(.25),shape:"rectangle",width:ws(_c.x),height:ws(_c.x)})}}),xl.register("harddrop_edge",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0}=e;fl.spawnBurst({texture:"/res/particles/star.png",tint:16777215,lifetime:[.1,.5],alpha:{from:[.5,1],to:0},speed:{from:[0,150],to:[0,50]},yspeed:{from:0,to:50},direction:[-45,45],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.1),xl.utils.scale(.3)]},{x:t,y:n,amount:xl.utils.freq(5),shape:"rectangle",width:ws(_c.x),height:0})}}),xl.register("piece_spin",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0,color:s=16777215,direction:i="none",kx:a=0,ky:r=0}=e;fl.spawnBurst({texture:"/res/particles/star.png",tint:s,lifetime:[.2,1],alpha:{from:[.7,1],to:0},speed:{from:[50,300],to:[0,50]},blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.15),xl.utils.scale(.3)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]},xspeed:{from:[ws(_c.x)*a*-1,ws(_c.x)*a*2],to:[0,0]},yspeed:{from:[ws(_c.x)*r*-1,ws(_c.x)*r*2],to:[0,0]}},{x:t,y:n,amount:xl.utils.freq(5),shape:"disk",width:"horizontal"===i?0:3*ws(_c.x),height:"vertical"===i?0:3*ws(_c.x),directionOverride:"left"===i?-110:"right"===i?110:0})}}),xl.register("piece_blockout",{play:e=>{const{x:t=0,y:n=0,s=1,bright:i=!1,front:a=!0}=e;(a?fl:bl).spawnBurst({texture:"/res/particles/fbox.png",tint:16720384,lifetime:[.8,1.5],alpha:{from:1,to:0},alphamultiplier:{from:3,to:0},speed:{from:[0,10],to:[0,0]},direction:[0,360],anglespeed:[-10,10],blendmode:o.BLEND_MODES.ADD,scale:zs(1*s)},{x:t,y:n,amount:2,shape:"point"}),(a?fl:bl).spawnBurst({texture:"/res/particles/fbox.png",tint:16777215,lifetime:[.1,.25],alpha:{from:1,to:0},alphamultiplier:{from:3,to:0},speed:{from:[0,10],to:[0,0]},direction:[0,360],anglespeed:[-10,10],blendmode:o.BLEND_MODES.ADD,scale:zs(1*s)},{x:t,y:n,amount:2,shape:"point"}),i&&(a?fl:bl).spawnBurst({texture:"/res/particles/fbox.png",tint:16777215,lifetime:[1,1.6],alpha:{from:1,to:0},alphamultiplier:{from:3,to:0},speed:{from:[0,10],to:[0,0]},blendmode:o.BLEND_MODES.ADD,scale:{from:zs(1*s),to:[zs(1*s),zs(1.2*s)]},flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[.8,1],to:[0,.1]}},{x:t,y:n,amount:1,shape:"point"}),(a?fl:bl).spawnBurst({texture:"/res/particles/chip.png",tint:16777215,lifetime:[.2,1],alpha:{from:[.7,1],to:0},speed:{from:[50,300],to:[0,50]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.1),xl.utils.scale(.25)],anglespeed:{from:[-720,720],to:[-360,360]},flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]}},{x:t,y:n,amount:xl.utils.freq(20),shape:"rectangle",width:ws(_c.x*s),height:ws(_c.x*s)})}}),xl.register("line_burst",{play:e=>{const{x:t=0,y:n=0,s=1,color:i=16777215,bright:a=!1}=e;(parseFloat(ot.video.particles)||.6)>=.15&&gl.spawnBurst({texture:"/res/particles/fbox.png",tint:i,lifetime:[.1+.3*Math.min(1,.8*(parseFloat(ot.video.particles)||.6)),.1+.6*Math.min(1,.8*(parseFloat(ot.video.particles)||.6))],alpha:a?{from:1,to:0}:{from:Math.max(.1,Math.min(1,.6*(parseFloat(ot.video.particles)||.6))),to:0},speed:{from:[0,80],to:[0,30]},direction:[0,360],anglespeed:[-20,20],blendmode:o.BLEND_MODES.ADD,scale:{from:zs(1*s),to:[zs(1*s),zs(1.4*s)]},yspeed:{start:[0,-100],inc:[5,12]}},{x:t,y:n,amount:1,shape:"point"}),["high","ultra"].includes(ot.video.graphics)&&gl.spawnBurst({texture:"/res/particles/chip.png",tint:i,lifetime:[.2,1],alpha:{from:[.7,1],to:0},speed:{from:[50,300],to:[0,50]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.1),xl.utils.scale(.25)],anglespeed:{from:[-720,720],to:[-360,360]},flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]},xspeed:[-500,500],yspeed:{start:[-500,50],inc:[15,40]}},{x:t,y:n,amount:xl.utils.freq(a?5:1.65),shape:"rectangle",width:ws(_c.x*s),height:ws(_c.x*s)})}}),xl.register("line_bubble",{play:e=>{const{x:t=0,y:n=0,s=1,color:i=16777215}=e;gl.spawnBurst({texture:"/res/particles/bubble.png",tint:i,lifetime:[.2,1],alpha:{from:[.9,1],to:0},speed:{from:[50,300],to:[0,50]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:{from:[xl.utils.scale(.5),xl.utils.scale(.15)],to:[xl.utils.scale(.25),xl.utils.scale(.1)]},flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]},xspeed:[-500,500],yspeed:{start:[-500,50],inc:[15,40]}},{x:t,y:n,amount:xl.utils.freq(3),shape:"rectangle",width:ws(_c.x*s),height:ws(_c.x*s)})}}),xl.register("mino_dust",{play:e=>{const{x:t=0,y:n=0,s=1,color:i=16777215}=e;gl.spawnBurst({texture:"/res/particles/dust.png",tint:4473924,lifetime:[.3,1],alpha:{from:1,to:0},speed:{from:[0,50],to:[0,20]},direction:[0,360],anglespeed:[-20,20],scale:{from:zs(1.5*s),to:[zs(2.5*s),zs(3.5*s)]},yspeed:{start:0,inc:[1,-5]}},{x:t,y:n,amount:1,shape:"point"}),gl.spawnBurst({texture:"/res/particles/dust.png",tint:i,lifetime:[.3,1],alpha:{from:.8,to:0},speed:{from:[0,50],to:[0,20]},direction:[0,360],anglespeed:[-20,20],scale:{from:zs(1.5*s),to:[zs(1.5*s),zs(2.5*s)]},yspeed:{start:0,inc:[0,-5]}},{x:t,y:n,amount:1,shape:"point"}),["high","ultra"].includes(ot.video.graphics)&&gl.spawnBurst({texture:"/res/particles/star.png",tint:i,lifetime:[.2,1],alpha:{from:[.7,1],to:0},speed:{from:[50,150],to:[0,50]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.15),xl.utils.scale(.3)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]},yspeed:{start:0,inc:[-3,-10]}},{x:t,y:n,amount:xl.utils.freq(1),shape:"rectangle",width:ws(s*_c.x),height:ws(s*_c.x)})}}),xl.register("mino_explode",{play:e=>{const{x:t=0,y:n=0,s=1,color:i=16777215}=e;gl.spawnBurst({texture:"/res/particles/dust.png",tint:i,lifetime:[.1,.3],alpha:{from:1,to:0},speed:{from:[0,150],to:[0,20]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,anglespeed:[-20,20],scale:{from:zs(5.5*s),to:[zs(7.5*s),zs(9.5*s)]},yspeed:{start:0,inc:[1,-5]}},{x:t,y:n,amount:4,shape:"point"}),gl.spawnBurst({texture:"/res/particles/fire.png",tint:i,lifetime:[.3,1],alpha:{from:.8,to:0},speed:{from:[0,150],to:[0,20]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,anglespeed:[-20,20],scale:{from:zs(4.5*s),to:[zs(5.5*s),zs(7.5*s)]},yspeed:{start:0,inc:[0,-5]}},{x:t,y:n,amount:4,shape:"point"}),["high","ultra"].includes(ot.video.graphics)&&(gl.spawnBurst({texture:"/res/particles/star.png",tint:i,lifetime:[.2,1],alpha:{from:[.7,1],to:0},speed:{from:[50,350],to:[0,50]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.15),xl.utils.scale(.3)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]},yspeed:{start:0,inc:[-3,-10]}},{x:t,y:n,amount:xl.utils.freq(15),shape:"rectangle",width:ws(s*_c.x),height:ws(s*_c.x)}),gl.spawnBurst({texture:"/res/particles/star.png",tint:i,lifetime:[.5,1],alpha:{from:[.7,1],to:0},speed:{from:[100,1200],to:[0,300]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.15),xl.utils.scale(.3)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]},yspeed:{start:0,inc:[-1,-3]}},{x:t,y:n,amount:xl.utils.freq(30),shape:"rectangle",width:ws(s*_c.x),height:ws(s*_c.x)}))}}),xl.register("b2b_flair",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0,w:s=10,h:i=20}=e,a={texture:"/res/particles/star.png",tint:[16744448,16777088],lifetime:[.2,1],alpha:{from:[.7,1],to:0},speed:{from:[0,150],to:[0,50]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.15),xl.utils.scale(.3)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]}};gl.spawnBurst({...a,xspeed:-60},{x:t,y:n,amount:xl.utils.freq(5*i),shape:"line",linePointA:[0,0],linePointB:[0,ws(_c.x*i)]}),gl.spawnBurst({...a,xspeed:60},{x:t,y:n,amount:xl.utils.freq(5*i),shape:"line",linePointA:[ws(_c.x*s),0],linePointB:[ws(_c.x*s),ws(_c.x*i)]}),gl.spawnBurst({...a,yspeed:60},{x:t,y:n,amount:xl.utils.freq(5*s),shape:"line",linePointA:[0,ws(_c.x*i)],linePointB:[ws(_c.x*s),ws(_c.x*i)]})}}),xl.register("b2bcharge_flair",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0,w:s=10,h:i=20,start:a=!1,amt:r=0,evil:l=!1}=e,c=Pc.generic.ns.b2b._makeTint(l,r,!0,0),p={texture:["/res/particles/wound-spark-1.png","/res/particles/wound-spark-2.png","/res/particles/wound-spark-3.png"],tint:c,lifetime:[.1,.5],alpha:{from:[.7,1],to:0},angleParaxial:!0,blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.35),xl.utils.scale(.6)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.8],to:[0,.5]}};gl.spawnBurst(p,{x:t,y:n,amount:xl.utils.freq((a?3:1)*i),shape:"line",linePointA:[0,0],linePointB:[0,ws(_c.x*i)]}),gl.spawnBurst(p,{x:t,y:n,amount:xl.utils.freq((a?3:1)*i),shape:"line",linePointA:[ws(_c.x*s),0],linePointB:[ws(_c.x*s),ws(_c.x*i)]}),gl.spawnBurst(p,{x:t,y:n,amount:xl.utils.freq((a?3:1)*s),shape:"line",linePointA:[0,ws(_c.x*i)],linePointB:[ws(_c.x*s),ws(_c.x*i)]});const h={texture:"/res/particles/star.png",tint:c,lifetime:[.2,1],alpha:{from:[.7,1],to:0},speed:{from:[0,150],to:[0,50]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.15),xl.utils.scale(.3)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]}};gl.spawnBurst({...h,xspeed:-60},{x:t,y:n,amount:xl.utils.freq((a?5:2)*i),shape:"line",linePointA:[0,0],linePointB:[0,ws(_c.x*i)]}),gl.spawnBurst({...h,xspeed:60},{x:t,y:n,amount:xl.utils.freq((a?5:2)*i),shape:"line",linePointA:[ws(_c.x*s),0],linePointB:[ws(_c.x*s),ws(_c.x*i)]}),gl.spawnBurst({...h,yspeed:60},{x:t,y:n,amount:xl.utils.freq((a?5:2)*s),shape:"line",linePointA:[0,ws(_c.x*i)],linePointB:[ws(_c.x*s),ws(_c.x*i)]})}}),xl.register("b2bcharge_release",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0,w:s=10,h:i=20}=e,a={texture:["/res/particles/wound-spark-1.png","/res/particles/wound-spark-2.png","/res/particles/wound-spark-3.png"],tint:16777215,lifetime:[.1,.5],alpha:{from:[.7,1],to:0},angleParaxial:!0,blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.5),xl.utils.scale(.8)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.8],to:[0,.5]}};gl.spawnBurst(a,{x:t,y:n,amount:xl.utils.freq(3*i),shape:"line",linePointA:[0,0],linePointB:[0,ws(_c.x*i)]}),gl.spawnBurst(a,{x:t,y:n,amount:xl.utils.freq(3*i),shape:"line",linePointA:[ws(_c.x*s),0],linePointB:[ws(_c.x*s),ws(_c.x*i)]}),gl.spawnBurst(a,{x:t,y:n,amount:xl.utils.freq(3*s),shape:"line",linePointA:[0,ws(_c.x*i)],linePointB:[ws(_c.x*s),ws(_c.x*i)]});const r={texture:"/res/particles/star.png",tint:16777215,lifetime:[.2,1],alpha:{from:[.7,1],to:0},speed:{from:[0,300],to:[0,50]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.15),xl.utils.scale(.3)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]}};gl.spawnBurst({...r,xspeed:-500},{x:t,y:n,amount:xl.utils.freq(8*i),shape:"line",linePointA:[0,0],linePointB:[0,ws(_c.x*i)]}),gl.spawnBurst({...r,xspeed:500},{x:t,y:n,amount:xl.utils.freq(8*i),shape:"line",linePointA:[ws(_c.x*s),0],linePointB:[ws(_c.x*s),ws(_c.x*i)]}),gl.spawnBurst({...r,yspeed:500},{x:t,y:n,amount:xl.utils.freq(8*s),shape:"line",linePointA:[0,ws(_c.x*i)],linePointB:[ws(_c.x*s),ws(_c.x*i)]})}}),xl.register("spike_flair",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0,w:s=10,h:i=20}=e;gl.spawnBurst({texture:"/res/particles/star.png",tint:16777215,lifetime:[.5,1.5],alpha:{from:[.6,.8],to:0},speed:{from:[0,150],to:[0,50]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.1),xl.utils.scale(.25)],flickerfrequency:{from:[10,50],to:[10,20]},flickeramplitude:{from:[0,.6],to:[0,.3]},flurryfrequency:{from:[5,30],to:[2,10]},flurryamplitude:{from:[-130,130],to:[-30,30]}},{x:t,y:n,amount:xl.utils.freq(100),shape:"rectangle",width:ws(_c.x*s),height:ws(_c.x*i)})}}),xl.register("danger_flair",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0,w:s=10,h:i=20}=e;gl.spawnBurst({texture:"/res/particles/particle.png",tint:[16711680,16737792],lifetime:[.5,1.5],alpha:{from:[.6,.8],to:0},speed:{from:[0,150],to:[0,50]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.05),xl.utils.scale(.1)],flickerfrequency:{from:[10,50],to:[10,20]},flickeramplitude:{from:[0,.6],to:[0,.3]},flurryfrequency:{from:[5,30],to:[2,10]},flurryamplitude:{from:[-130,130],to:[-30,30]},yspeed:{from:0,to:[-25,-200]}},{x:t,y:n,amount:xl.utils.freq(100),shape:"rectangle",width:ws(_c.x*s),height:ws(_c.x*i)}),gl.spawnBurst({texture:"/res/particles/smoke.png",tint:3342336,lifetime:[1,2],alpha:{from:1,to:0},speed:{from:[0,20],to:0},direction:[0,360],blendmode:o.BLEND_MODES.ADD,anglespeed:[-20,20],scale:{from:zs(1.5),to:[zs(2.5),zs(3.5)]}},{x:t,y:n,amount:xl.utils.freq(s),shape:"line",linePointA:[ws(_c.x*s/-2),ws(_c.x*i/-2)],linePointB:[ws(_c.x*s/2),ws(_c.x*i/-2)]})}}),xl.register("danger_smoke",{play:e=>{const{x:t=0,y:n=0,w:s=0,h:i=0}=e,a={texture:"/res/particles/smoke.png",tint:[3342336,2236928],lifetime:[.6,1],alpha:{from:1,to:0},speed:{from:[200,300],to:0},anglespeed:[-20,20],scale:{from:zs(.4),to:[zs(2.5),zs(4.5)]}},r={texture:"/res/particles/smoke.png",tint:{from:[16776960,16777215],to:[16711680,16729088]},lifetime:[.4,.6],alpha:{from:1,to:0},speed:{from:[200,300],to:0},blendmode:o.BLEND_MODES.ADD,anglespeed:[-20,20],scale:{from:zs(.4),to:[zs(1.5),zs(3.5)]}};_l.spawnBurst({...a,direction:[-60,-30]},{x:t,y:n,amount:xl.utils.freq(1),shape:"point"}),gl.spawnBurst({...r,direction:[-60,-30]},{x:t,y:n,amount:xl.utils.freq(1),shape:"point"}),_l.spawnBurst({...a,direction:[30,60]},{x:t+s,y:n,amount:xl.utils.freq(1),shape:"point"}),gl.spawnBurst({...r,direction:[30,60]},{x:t+s,y:n,amount:xl.utils.freq(1),shape:"point"}),_l.spawnBurst({...a,direction:[210,240]},{x:t,y:n+i,amount:xl.utils.freq(1),shape:"point"}),gl.spawnBurst({...r,direction:[210,240]},{x:t,y:n+i,amount:xl.utils.freq(1),shape:"point"}),_l.spawnBurst({...a,direction:[120,150]},{x:t+s,y:n+i,amount:xl.utils.freq(1),shape:"point"}),gl.spawnBurst({...r,direction:[120,150]},{x:t+s,y:n+i,amount:xl.utils.freq(1),shape:"point"})}}),xl.register("death_flair",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0,w:s=10,h:i=20}=e;gl.spawnBurst({texture:"/res/particles/chirp.png",tint:[16746751,16711680],lifetime:[.2,2],alpha:{from:[.7,1],to:0},speed:{from:[0,1e3],to:[0,200]},blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.15),xl.utils.scale(.5)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]}},{x:t,y:n,amount:xl.utils.freq(100),shape:"box",width:ws(_c.x*s),height:ws(_c.x*i),directionOverride:0,angleOverride:0}),gl.spawnBurst({texture:"/res/particles/star.png",tint:16777215,lifetime:[.2,1],alpha:{from:[.7,1],to:0},speed:{from:[0,300],to:[0,50]},blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.15),xl.utils.scale(.5)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]}},{x:t,y:n,amount:xl.utils.freq(100),shape:"box",width:ws(_c.x*s),height:ws(_c.x*i),directionOverride:0})}}),xl.register("fire_flair",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0,w:s=10,h:i=20}=e,a={texture:"/res/particles/particle.png",tint:[16736256,16777088],lifetime:[.2,3],alpha:{from:[.7,1],to:0},alphamultiplier:{from:0,to:2},speed:{from:[0,75],to:[0,25]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.3),xl.utils.scale(.9)]};gl.spawnBurst({...a,xspeed:-20},{x:t,y:n,amount:xl.utils.freq(5*i),shape:"line",linePointA:[0,0],linePointB:[0,ws(_c.x*i)]}),gl.spawnBurst({...a,xspeed:20},{x:t,y:n,amount:xl.utils.freq(5*i),shape:"line",linePointA:[ws(_c.x*s),0],linePointB:[ws(_c.x*s),ws(_c.x*i)]}),gl.spawnBurst({...a,yspeed:20},{x:t,y:n,amount:xl.utils.freq(5*s),shape:"line",linePointA:[0,ws(_c.x*i)],linePointB:[ws(_c.x*s),ws(_c.x*i)]})}}),xl.register("fire_burn",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0,w:s=10,h:i=20}=e,a={texture:"/res/particles/particle.png",tint:[16736256,16777088],lifetime:[.2,3],alpha:{from:[.7,1],to:0},alphamultiplier:{from:0,to:2},speed:{from:[0,75],to:[0,25]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.05),xl.utils.scale(.2)]};gl.spawnBurst({...a,xspeed:-20},{x:t,y:n,amount:xl.utils.freq(.05*i),shape:"line",linePointA:[0,0],linePointB:[0,ws(_c.x*i)]}),gl.spawnBurst({...a,xspeed:20},{x:t,y:n,amount:xl.utils.freq(.05*i),shape:"line",linePointA:[ws(_c.x*s),0],linePointB:[ws(_c.x*s),ws(_c.x*i)]}),gl.spawnBurst({...a,yspeed:20},{x:t,y:n,amount:xl.utils.freq(.05*s),shape:"line",linePointA:[0,ws(_c.x*i)],linePointB:[ws(_c.x*s),ws(_c.x*i)]}),_l.spawnBurst({texture:"/res/particles/fire.png",tint:[16736256,16777088],lifetime:[.2,3],alpha:{from:[.4,.9],to:0},alphamultiplier:{from:0,to:3},speed:{from:[0,75],to:[0,25]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.3),xl.utils.scale(2.5)],flurryfrequency:{from:[5,30],to:[2,10]},flurryamplitude:{from:[-130,130],to:[-30,30]},yspeed:{from:[100,-50],to:[-100,-300]},angle:[0,360],anglespeed:[-200,200]},{x:t+ws(_c.x*s/2),y:n+ws(_c.x*i/2),amount:xl.utils.freq(s*i*1/200),shape:"rectangle",width:ws(_c.x*s),height:ws(_c.x*i)})}}),xl.register("fire_burning",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0}=e;_l.createSpawner({texture:"/res/particles/fire.png",tint:[16736256,16777088],lifetime:[.2,3],alpha:{from:[.4,.9],to:0},alphamultiplier:{from:0,to:3},speed:{from:[0,25],to:[0,10]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.2),xl.utils.scale(.7)],flurryfrequency:{from:[5,30],to:[2,10]},flurryamplitude:{from:[-130,130],to:[-30,30]},yspeed:{from:[30,-15],to:[-30,-100]},angle:[0,360],anglespeed:[-200,200]},{x:t,y:n,amount:xl.utils.freq(20),lifetime:2,shape:"rectangle",width:ws(2*_c.x),height:ws(2*_c.x)})}}),xl.register("wound",{play:e=>{const{x:t=0,y:n=0,w:s=10,s:i=1,tint:a=16777215,speed:r=1,dT:l=1}=e;"medium"!==ot.video.graphics&&(fl.spawnBurst({texture:["/res/particles/wound-particle-1.png","/res/particles/wound-particle-2.png","/res/particles/wound-particle-3.png","/res/particles/wound-particle-4.png"],tint:a,lifetime:[.4-.2*r,1.5-.8*r],alpha:[.7,1],speed:[0,15+50*r],direction:[0,360],scale:{from:[xl.utils.scale(.3),xl.utils.scale(.7)],to:0},scalemultiplier:{from:0,to:1},angleParaxial:!0},{x:t,y:n,amount:xl.utils.freq((.2+.2*r)*l),shape:"rectangle",width:ws(i*s*_c.x),height:ws(i*_c.x)}),fl.spawnBurst({texture:["/res/particles/wound-spark-1.png","/res/particles/wound-spark-2.png","/res/particles/wound-spark-3.png"],tint:a,lifetime:[.1,.3],alpha:{from:[.5,1],to:0},scale:[xl.utils.scale(.1+.4*r),xl.utils.scale(.3+.7*r)],angleParaxial:!0,blendmode:o.BLEND_MODES.ADD},{x:t,y:n,amount:xl.utils.freq((.01+.05*r)*l),shape:"rectangle",width:ws(i*s*_c.x),height:ws(i*_c.x)})),fl.spawnBurst({texture:["/res/particles/wound-spark-1.png","/res/particles/wound-spark-2.png","/res/particles/wound-spark-3.png"],tint:16777215,lifetime:[.1,.3],alpha:{from:[.5,1],to:0},scale:[xl.utils.scale(.1+.4*r),xl.utils.scale(.3+.7*r)],angleParaxial:!0,blendmode:o.BLEND_MODES.ADD},{x:t,y:n,amount:xl.utils.freq((.001+.005*r)*l),shape:"rectangle",width:ws(i*s*_c.x),height:ws(i*_c.x)})}}),xl.register("wound_spawn",{play:e=>{const{x:t=0,y:n=0,w:s=10,s:i=1,tint:a=16777215}=e;fl.spawnBurst({texture:["/res/particles/wound-particle-1.png","/res/particles/wound-particle-2.png","/res/particles/wound-particle-3.png","/res/particles/wound-particle-4.png"],tint:a,lifetime:[.3,.8],alpha:[.7,1],speed:[0,30],direction:[0,360],scale:{from:[xl.utils.scale(.3),xl.utils.scale(1.4)],to:0},scalemultiplier:{from:.5,to:1},angleParaxial:!0},{x:t,y:n,amount:xl.utils.freq(10),shape:"rectangle",width:ws(i*s*_c.x),height:ws(i*_c.x)}),fl.spawnBurst({texture:["/res/particles/wound-spark-1.png","/res/particles/wound-spark-2.png","/res/particles/wound-spark-3.png"],tint:16777215,lifetime:[.1,.3],alpha:{from:[.5,1],to:0},scale:[xl.utils.scale(.3),xl.utils.scale(1)],angleParaxial:!0,blendmode:o.BLEND_MODES.ADD},{x:t,y:n,amount:xl.utils.freq(5),shape:"rectangle",width:ws(i*s*_c.x),height:ws(i*_c.x)})}}),xl.register("garbage_corruption",{play:e=>{const{x:t=0,y:n=0,w:s=1,h:i=1,scale:a=1,tint:r=16777215,speed:l=1,dT:c}=e;gl.spawnBurst({texture:"/res/particles/vbox.png",tint:r,lifetime:[1.5,2.5],alpha:{from:.85,to:1},speed:{from:[35,85],to:[10,35]},direction:0,scale:{from:0,to:[.6,1.7]},scalemultiplier:{from:3,to:0}},{x:t,y:n,amount:xl.utils.freq(.1*c),shape:"rectangle",width:ws(s*_c.x),height:ws(i)}),gl.spawnBurst({texture:["/res/particles/wound-spark-1.png","/res/particles/wound-spark-2.png","/res/particles/wound-spark-3.png"],tint:r,lifetime:[.3,.5],alpha:{from:[.5,1],to:0},scale:a,angleParaxial:!0,blendmode:o.BLEND_MODES.ADD},{x:t,y:n,amount:xl.utils.freq(l*c),shape:"rectangle",width:ws(s*_c.x),height:ws(i)})}}),xl.register("wound_clear",{play:e=>{const{x:t=0,y:n=0,w:s=10,s:i=1}=e;fl.spawnBurst({texture:["/res/particles/wound-particle-1.png","/res/particles/wound-particle-2.png","/res/particles/wound-particle-3.png","/res/particles/wound-particle-4.png"],tint:16777215,lifetime:[.3,.8],alpha:[.7,1],speed:[0,50],direction:[0,360],yspeed:{from:[0,-500],to:[0,-100]},scale:{from:[xl.utils.scale(.3),xl.utils.scale(.7)],to:0},scalemultiplier:{from:.8,to:1},angleParaxial:!0},{x:t,y:n,amount:xl.utils.freq(20),shape:"rectangle",width:ws(i*s*_c.x),height:ws(i*_c.x)})}}),xl.register("void_burst",{play:e=>{const{x:t=0,y:n=0,s=1,color:i=16777215}=e;gl.spawnBurst({texture:"/res/particles/fbox.png",tint:16777215,lifetime:.5,alpha:{from:.5,to:0},speed:0,direction:[0,360],anglespeed:0,blendmode:o.BLEND_MODES.ADD,scale:{from:zs(1*s),to:[zs(1*s),zs(1.4*s)]}},{x:t,y:n,amount:1,shape:"point"}),gl.spawnBurst({texture:"/res/particles/vbox.png",tint:[16711782,6684927],lifetime:[.2,1.5],alpha:1,speed:{from:[25,150],to:[0,25]},direction:[0,360],scale:{from:0,to:[.4,1.4]},scalemultiplier:{from:3,to:0}},{x:t,y:n,amount:xl.utils.freq(6),shape:"rectangle",width:ws(_c.x*s),height:ws(_c.x*s)}),["high","ultra"].includes(ot.video.graphics)&&gl.spawnBurst({texture:"/res/particles/chip.png",tint:i,lifetime:[.2,1],alpha:{from:[.7,1],to:0},speed:{from:[50,500],to:[0,50]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.1),xl.utils.scale(.25)],anglespeed:{from:[-720,720],to:[-360,360]},flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]},xspeed:[-500,500],yspeed:{start:[-500,50],inc:[15,40]}},{x:t,y:n,amount:xl.utils.freq(6),shape:"rectangle",width:ws(_c.x*s),height:ws(_c.x*s)})}}),xl.register("bar_sparks",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0,w:s=0,color:i=16777215,dT:o=1}=e;gl.spawnBurst({texture:"/res/particles/star.png",tint:i,lifetime:[.2,1],alpha:{from:[.3,.8],to:0},speed:{from:[150,450],to:[-100,100]},direction:[-2,2],xflurry:[0,50],scale:[xl.utils.scale(.08),xl.utils.scale(.2)]},{x:t,y:n,amount:xl.utils.freq(.15*o),shape:"rectangle",width:s,height:0})}}),xl.register("stock_explode",{play:e=>{const{x:t=0,y:n=0}=e;gl.spawnBurst({texture:"/res/particles/dust.png",tint:4473924,lifetime:[.3,1],alpha:{from:1,to:0},speed:{from:[0,50],to:[0,20]},direction:[0,360],anglespeed:[-20,20],scale:{from:zs(1.5),to:[zs(2.5),zs(3.5)]},yspeed:{start:0,inc:[1,-5]}},{x:t,y:n,amount:1,shape:"point"}),gl.spawnBurst({texture:"/res/particles/dust.png",tint:16777215,lifetime:[.3,1],alpha:{from:.8,to:0},speed:{from:[0,50],to:[0,20]},direction:[0,360],anglespeed:[-20,20],scale:{from:zs(1.5),to:[zs(1.5),zs(2.5)]},yspeed:{start:0,inc:[0,-5]}},{x:t,y:n,amount:1,shape:"point"}),["high","ultra"].includes(ot.video.graphics)&&gl.spawnBurst({texture:"/res/particles/star.png",tint:16777215,lifetime:[.4,1.5],alpha:{from:[.7,1],to:0},speed:{from:[0,150],to:[0,50]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.15),xl.utils.scale(.3)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]},yspeed:{start:0,inc:[-3,-10]}},{x:t,y:n,amount:xl.utils.freq(25),shape:"rectangle",width:ws(_c.x),height:ws(_c.x)})}}),xl.register("b2bcharge_ticking",{play:e=>{const{x:t=0,y:n=0,power:s=0,tint:i=16777215,dT:a=1}=e,r=Math.min(.9,5*s)+.1;fl.spawnBurst({texture:["/res/particles/wound-spark-1.png","/res/particles/wound-spark-2.png","/res/particles/wound-spark-3.png"],tint:i,lifetime:[.1,.5],alpha:{from:[.7*r,1*r],to:0},angleParaxial:!0,blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.2+.5*s),xl.utils.scale(.4+.9*s)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.8],to:[0,.5]}},{x:t,y:n,amount:xl.utils.freq(a*(.03+.17*s)),shape:"disk",radius:ws(5+70*s)}),fl.spawnBurst({texture:["/res/particles/wound-spark-1.png","/res/particles/wound-spark-2.png","/res/particles/wound-spark-3.png"],tint:16777215,lifetime:[.03,.1],alpha:{from:[.7*r,1*r],to:0},angleParaxial:!0,blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.2+.5*s),xl.utils.scale(.4+.9*s)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.8],to:[0,.5]}},{x:t,y:n,amount:xl.utils.freq(a*(0+.02*s)),shape:"disk",radius:ws(5+70*s)})}}),xl.register("b2bcharge_ticking_evil",{play:e=>{const{x:t=0,y:n=0,power:s=0,tint:i=16777215,dT:a=1}=e;ml.spawnBurst({texture:["/res/particles/vbox.png"],tint:i,lifetime:[.8-.4*s,2.2-1*s],scale:{from:0,to:[.2+.2*s,1+1.5*s]},scalemultiplier:{from:2,to:0},speed:{from:[0,40+60*s],to:[0,40+60*s]}},{x:t,y:n,amount:xl.utils.freq((.2+.2*s)*a),shape:"disk",radius:ws(5+70*s),directionOverride:180}),ml.spawnBurst({texture:["/res/particles/wound-particle-1.png","/res/particles/wound-particle-2.png","/res/particles/wound-particle-3.png","/res/particles/wound-particle-4.png"],tint:i,lifetime:[.4-.2*s,1.5-.8*s],alpha:[.7,1],speed:[0,30+100*s],direction:[0,360],scale:{from:[xl.utils.scale(.3+.2*s),xl.utils.scale(.7+.5*s)],to:0},scalemultiplier:{from:0,to:1},angleParaxial:!0},{x:t,y:n,amount:xl.utils.freq((.2+.2*s)*a),shape:"disk",radius:ws(5+70*s)}),fl.spawnBurst({texture:["/res/particles/vbox.png"],tint:i,lifetime:[.8-.4*s,2.2-1*s],scale:{from:0,to:[.2+.2*s,1+1.5*s]},scalemultiplier:{from:2,to:0},speed:{from:[0,20+30*s],to:[0,20+30*s]}},{x:t,y:n,amount:xl.utils.freq((.2+.2*s)*a),shape:"circle",radius:1.4*ws(5+70*s),directionOverride:180}),fl.spawnBurst({texture:["/res/particles/wound-particle-1.png","/res/particles/wound-particle-2.png","/res/particles/wound-particle-3.png","/res/particles/wound-particle-4.png"],tint:i,lifetime:[.4-.2*s,1.5-.8*s],alpha:[.7,1],speed:[0,15+50*s],direction:[0,360],scale:{from:[xl.utils.scale(.3+.2*s),xl.utils.scale(.7+.5*s)],to:0},scalemultiplier:{from:0,to:1},angleParaxial:!0},{x:t,y:n,amount:xl.utils.freq((.2+.2*s)*a),shape:"circle",radius:1.4*ws(5+70*s)});const r=Math.min(.9,5*s)+.1;fl.spawnBurst({texture:["/res/particles/wound-spark-1.png","/res/particles/wound-spark-2.png","/res/particles/wound-spark-3.png"],tint:i,lifetime:[.1,.5],alpha:{from:[.7*r,1*r],to:0},angleParaxial:!0,blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.2+.5*s),xl.utils.scale(.4+.9*s)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.8],to:[0,.5]}},{x:t,y:n,amount:xl.utils.freq(a*(.03+.17*s)),shape:"disk",radius:ws(5+70*s)}),fl.spawnBurst({texture:["/res/particles/wound-spark-1.png","/res/particles/wound-spark-2.png","/res/particles/wound-spark-3.png"],tint:16777215,lifetime:[.03,.1],alpha:{from:[.7*r,1*r],to:0},angleParaxial:!0,blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.2+.5*s),xl.utils.scale(.4+.9*s)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.8],to:[0,.5]}},{x:t,y:n,amount:xl.utils.freq(a*(0+.02*s)),shape:"disk",radius:ws(5+70*s)})}}),xl.register("confetti",{graphics:["high","ultra"],play:e=>{const{gui:t=!1,count:n=40,hue:s=[0,360]}=e;if(!t||$l&&"ultra"===ot.video.graphics)for(let e=0;e<n;e++){const e=Math.random()*(s[1]-s[0])+s[0],n=Math.random()>.5,i=(.3+.65*Math.random())*window.innerHeight,r=(.05+.4*Math.random())*window.innerWidth,l=new h.Beam({texture:o.Texture.WHITE,mode:"path",path:[new o.Point(n?window.innerWidth+30*Math.random():-30*Math.random(),window.innerHeight+30*Math.random()),new o.Point(n?window.innerWidth-r:r,window.innerHeight-i),new o.Point(n?window.innerWidth-2*r:2*r,window.innerHeight+i)],vertices:10,length:5+20*Math.random(),duration:.7+1*Math.random(),tint:Tl(e,100,50),blendMode:o.BLEND_MODES.ADD,scale:.2,smoothPath:!0,smoothVertices:!0,repeatTexture:!1,reverse:!1,pathBezier:a(.08,.7,.6,.26),jitter:5+20*Math.random()});(t?$l.stage:Al).addChild(l)}}}),xl.register("waterfall",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0,w:s=0,color:i=16777215}=e,o={texture:"/res/particles/star.png",tint:i,lifetime:1,alpha:{from:1,to:0},y:n};("ultra"===ot.video.graphics?yl:gl).spawnOne({...o,x:t-s/2-16,direction:-90,scale:.8,speed:{from:100,to:0}}),("ultra"===ot.video.graphics?yl:gl).spawnOne({...o,x:t+s/2+16,direction:90,scale:.8,speed:{from:100,to:0}}),("ultra"===ot.video.graphics?yl:gl).spawnOne({...o,x:t-s/2-48,direction:-90,scale:.6,speed:{from:150,to:0}}),("ultra"===ot.video.graphics?yl:gl).spawnOne({...o,x:t+s/2+48,direction:90,scale:.6,speed:{from:150,to:0}})}}),xl.register("button_ultra",{graphics:["ultra"],play:e=>{const{x:t=0,y:n=0,w:s=0,h:i=0,color:a=16777215,amt:r=50}=e;yl.spawnBurst({texture:"/res/particles/star.png",tint:a,lifetime:[.2,1],alpha:{from:[.7,1],to:0},speed:{from:[0,300],to:[0,50]},blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.15),xl.utils.scale(.5)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]}},{x:t+s/2,y:n+i/2,amount:xl.utils.freq(r/2),shape:"box",width:s,height:i,directionOverride:0}),yl.spawnBurst({texture:"/res/particles/star.png",tint:16777215,lifetime:[.2,.5],alpha:{from:[.7,1],to:0},speed:{from:[0,1200],to:[0,600]},blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.1),xl.utils.scale(.3)],flickerfrequency:{from:[20,200],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]}},{x:t+s/2,y:n+i/2,amount:xl.utils.freq(2*r),shape:"box",width:s,height:i,directionOverride:0})}}),xl.register("xp_ultra",{graphics:["ultra"],play:e=>{const{x:t=0,y:n=0,w:s=0,h:i=0}=e;yl.spawnBurst({texture:"/res/particles/star.png",tint:[16746496,16777028],lifetime:[.6,2.5],alpha:{from:[.7,1],to:0},speed:{from:[0,600],to:0},blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.15),xl.utils.scale(.5)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]}},{x:t+s/2,y:n+i/2,amount:xl.utils.freq(100),shape:"box",width:s,height:i,directionOverride:0}),yl.spawnBurst({texture:"/res/particles/star.png",tint:16777215,lifetime:[.6,1.5],alpha:{from:[.7,1],to:0},speed:{from:[0,2400],to:[0,300]},blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.1),xl.utils.scale(.3)],flickerfrequency:{from:[20,200],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]}},{x:t+s/2,y:n+i/2,amount:xl.utils.freq(200),shape:"box",width:s,height:i,directionOverride:0}),yl.createSpawner({texture:"/res/particles/star.png",tint:[16746496,16777028],lifetime:[.2,1],alpha:{from:1,to:0},alphamultiplier:{from:0,to:3},speed:{from:[0,20],to:[0,20]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.1),xl.utils.scale(.3)]},{x:t+s/2,y:n+i/2,amount:xl.utils.freq(10),lifetime:6,shape:"rectangle",width:s,height:i})}}),xl.register("mm_ultra",{graphics:["ultra"],play:e=>{const t={texture:"/res/particles/beam.png",tint:16777215,lifetime:.6,alpha:1,speed:[2*window.innerWidth,5*window.innerWidth],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.2),xl.utils.scale(.4)]};yl.createSpawner({...t,direction:-90,angle:-90},{x:0,y:0,amount:xl.utils.freq(50),shape:"line",linePointA:[window.innerWidth+200,0],linePointB:[window.innerWidth+200,window.innerHeight/2],lifetime:3.4}),yl.createSpawner({...t,direction:90,angle:90},{x:0,y:0,amount:xl.utils.freq(50),shape:"line",linePointA:[-200,window.innerHeight/2],linePointB:[-200,window.innerHeight],lifetime:3.4}),setTimeout((()=>{yl.spawnBurst({texture:"/res/particles/star.png",tint:16777215,lifetime:[.6,1.5],alpha:{from:[.7,1],to:0},speed:{from:[0,1200],to:[0,300]},blendmode:o.BLEND_MODES.ADD,direction:[0,360],scale:[xl.utils.scale(.1),xl.utils.scale(.3)],flickerfrequency:{from:[20,200],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]}},{x:0,y:0,amount:xl.utils.freq(200),shape:"line",linePointA:[0,.6*window.innerHeight],linePointB:[window.innerWidth,.4*window.innerHeight]});const e={texture:"/res/particles/fire.png",tint:[16736256,16777088],lifetime:[1.5,3],alpha:{from:[.05,.1],to:0},alphamultiplier:{from:0,to:3},speed:{from:[0,350],to:[0,700]},blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(1.2),xl.utils.scale(4.5)],flurryfrequency:{from:[5,30],to:[2,10]},flurryamplitude:{from:[-130,130],to:[-30,30]},angle:[0,360],anglespeed:[-200,200]};yl.createSpawner({...e,direction:[-45,45],tint:[255,4521983]},{x:0,y:0,amount:xl.utils.freq(100),shape:"line",linePointA:[0,.4*window.innerHeight],linePointB:[window.innerWidth,.2*window.innerHeight],lifetime:8.5}),yl.createSpawner({...e,direction:[135,225],tint:[16711680,16746496]},{x:0,y:0,amount:xl.utils.freq(100),shape:"line",linePointA:[0,.8*window.innerHeight],linePointB:[window.innerWidth,.6*window.innerHeight],lifetime:8.5})}),3443)}}),xl.register("scoreslide_ultra",{graphics:["ultra"],play:e=>{const{right:t=!1}=e;yl.createSpawner({texture:"/res/particles/fire.png",tint:t?[16711680,16746496]:[255,4521983],lifetime:[1.5,3],alpha:{from:[.05,.1],to:0},alphamultiplier:{from:0,to:3},speed:{from:[0,1e3],to:[0,1800]},direction:t?[45,135]:[225,315],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(1.2),xl.utils.scale(4.5)],flurryfrequency:{from:[5,30],to:[2,10]},flurryamplitude:{from:[-30,30],to:[-30,30]},angle:[0,360],anglespeed:[-200,200]},{x:0,y:0,amount:xl.utils.freq(100),shape:"line",linePointA:[window.innerWidth/2+(t?100:-100),0],linePointB:[window.innerWidth/2+(t?100:-100),window.innerHeight],lifetime:2.5})}}),xl.register("zen_wormhole",{play:()=>{gl.createSpawner({texture:"/res/particles/smoke.png",tint:16777215,lifetime:[1,2],alpha:{from:[.2,.5],to:0},alphamultiplier:{from:0,to:4},speed:{from:[0,200],to:[0,200]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:{start:[xl.utils.scale(.5),xl.utils.scale(2.5)],inc:[0,.01]}},{x:window.innerWidth/2,y:window.innerHeight/2,amount:xl.utils.freq(40),shape:"rectangle",width:window.innerWidth,height:0,lifetime:4.4}),gl.createSpawner({texture:"/res/particles/smoke.png",tint:16777215,lifetime:[.6,1.2],alpha:{from:[.2,.7],to:0},alphamultiplier:{from:0,to:4},speed:{from:[0,400],to:[0,400]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:{start:[xl.utils.scale(.3),xl.utils.scale(.8)]}},{x:window.innerWidth/2,y:window.innerHeight/2,amount:xl.utils.freq(40),shape:"rectangle",width:window.innerWidth,height:0,lifetime:4.4});const e={texture:"/res/particles/beam.png",tint:16777215,lifetime:[.1,.3],alpha:{from:[.4,1],to:0},alphamultiplier:{from:0,to:4},speed:{from:[2400,3200],to:[3200,4e3]},blendmode:o.BLEND_MODES.ADD,scale:{start:[xl.utils.scale(.2),xl.utils.scale(.4)]}};gl.createSpawner(e,{x:window.innerWidth/2,y:window.innerHeight,amount:xl.utils.freq(500),shape:"line",linePointA:[window.innerWidth/-2,window.innerHeight/-2-64],linePointB:[window.innerWidth/2,window.innerHeight/-2-64],angleOverride:0,directionOverride:0,lifetime:4.4}),gl.createSpawner(e,{x:window.innerWidth/2,y:0,amount:xl.utils.freq(500),shape:"line",linePointA:[window.innerWidth/-2,window.innerHeight/2+64],linePointB:[window.innerWidth/2,window.innerHeight/2+64],angleOverride:0,directionOverride:0,lifetime:4.4});const t={texture:"/res/particles/particle.png",tint:16777215,lifetime:[.3,.8],alpha:{from:[.6,1],to:0},alphamultiplier:{from:0,to:4},speed:{from:[600,1600],to:[1200,2e3]},blendmode:o.BLEND_MODES.ADD,scale:{start:[xl.utils.scale(.05),xl.utils.scale(.2)]},flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]}};gl.createSpawner(t,{x:window.innerWidth/2,y:window.innerHeight,amount:xl.utils.freq(500),shape:"line",linePointA:[window.innerWidth/-2,window.innerHeight/-2-16],linePointB:[window.innerWidth/2,window.innerHeight/-2-16],angleOverride:0,directionOverride:0,lifetime:4.4}),gl.createSpawner(t,{x:window.innerWidth/2,y:0,amount:xl.utils.freq(500),shape:"line",linePointA:[window.innerWidth/-2,window.innerHeight/2+16],linePointB:[window.innerWidth/2,window.innerHeight/2+16],angleOverride:0,directionOverride:0,lifetime:4.4})}}),xl.register("zen_wormhole_exit",{play:()=>{gl.spawnBurst({texture:"/res/particles/smoke.png",tint:16777215,lifetime:[1.6,3.4],alpha:{from:[.5,1],to:0},alphamultiplier:{from:0,to:4},speed:{from:[0,400],to:[0,400]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:{start:[xl.utils.scale(.3),xl.utils.scale(.8)]}},{x:window.innerWidth/2,y:window.innerHeight/2,amount:xl.utils.freq(40),shape:"rectangle",width:window.innerWidth,height:0}),gl.spawnBurst({texture:"/res/particles/particle.png",tint:16777215,lifetime:[2.6,5.6],alpha:{from:[.5,1],to:0},alphamultiplier:{from:0,to:4},speed:{from:[0,400],to:[0,400]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:{start:[xl.utils.scale(.05),xl.utils.scale(.3)]}},{x:window.innerWidth/2,y:window.innerHeight/2,amount:xl.utils.freq(80),shape:"rectangle",width:window.innerWidth,height:window.innerHeight})}}),xl.register("zenith_lbping",{graphics:["high","ultra"],play:e=>{const{x:t=0,y:n=0,w:s=0}=e,i="ultra"===ot.video.graphics&&yl?yl:gl;i.spawnBurst({texture:"/res/particles/chirp.png",tint:16777215,lifetime:[.4,1.2],angle:180,alpha:{from:[.7,1],to:0},yspeed:{from:[0,800],to:0},xspeed:{from:[-20,20],to:[-20,20]},scale:[xl.utils.scale(.15),xl.utils.scale(.3)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]}},{x:t,y:n,amount:xl.utils.freq(15),shape:"box",width:s,height:0,directionOverride:0}),i.spawnBurst({texture:"/res/particles/ricegrain.png",tint:16777215,lifetime:[.4,1.2],alpha:{from:[.2,.5],to:0},xspeed:{from:[-50,50],to:0},yspeed:{from:[-10,10],to:0},scale:[xl.utils.scale(.3),xl.utils.scale(.7)],flickerfrequency:{from:[20,100],to:[10,20]},flickeramplitude:{from:[0,.5],to:[0,.1]}},{x:t,y:n,amount:xl.utils.freq(5),shape:"box",width:s,height:0,directionOverride:0})}}),xl.register("zenith_rank",{graphics:["medium","high","ultra"],play:e=>{const{x:t=0,y:n=0,power:s=0,color:i=16777215,dT:a=1,scale:r=1,back:l=!1}=e;if(l){if("medium"===ot.video.graphics)return;return void _l.spawnBurst({texture:"/res/particles/exhaust.png",tint:i,lifetime:.3,alpha:{from:[.3*s,.5*s],to:0},alphamultiplier:{from:0,to:10},speed:{from:[900,1e3],to:[600,700]},angle:[-180,180],direction:[170,190],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(1.4*r),xl.utils.scale(1.8*r)]},{x:t,y:n,amount:xl.utils.freq(1.2*a),shape:"line",linePointA:[zs((-152-150*Math.min(2,s))*r),zs(258*r)],linePointB:[zs((152+150*Math.min(2,s))*r),zs(258*r)]})}const c={texture:"/res/particles/exhaust.png",tint:i,lifetime:.2,alpha:[.09+.1*s,.18+.18*s],alphamultiplier:{from:0,to:10},speed:[300+200*r+100*s,300+300*r+100*s],angle:[-20,20],direction:[170,190],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.5*r),xl.utils.scale(.7*r)]};gl.spawnBurst({...c,angle:[-40,5],direction:[140,185]},{x:t,y:n,amount:xl.utils.freq((s>=1?1+.2*s:0)*a),shape:"line",linePointA:[zs(-412*r),zs(161*r)],linePointB:[zs(-172*r),zs(161*r)]}),gl.spawnBurst(c,{x:t,y:n,amount:xl.utils.freq((1+.4*s)*a),shape:"line",linePointA:[zs(-152*r),zs(238*r)],linePointB:[zs(152*r),zs(238*r)]}),gl.spawnBurst({...c,angle:[-5,40],direction:[175,220]},{x:t,y:n,amount:xl.utils.freq((s>=1?1+.2*s:0)*a),shape:"line",linePointA:[zs(172*r),zs(161*r)],linePointB:[zs(412*r),zs(161*r)]})}}),xl.register("zenith_lockbreak",{graphics:["medium","high","ultra"],play:e=>{const{x:t=0,y:n=0,color:s=16777215,scale:i=1,id:a=0}=e,r=[[[zs(-520*i),zs(65*i)],[zs(520*i),zs(-65*i)]],[[zs(-520*i),zs(-103*i)],[zs(520*i),zs(103*i)]],[[zs(-520*i),zs(150*i)],[zs(520*i),zs(-150*i)]]][a]??[[0,0],[0,0]];gl.spawnBurst({texture:["/res/particles/chain-a.png","/res/particles/chain-b.png","/res/particles/chain-c.png","/res/particles/star.png","/res/particles/star.png","/res/particles/star.png"],tint:s,lifetime:[.5,2],alpha:{from:2,to:0},alphamultiplier:{from:10,to:0},speed:{from:[1500*i,100*i],to:[400*i,100*i]},angle:[0,360],anglespeed:{from:[1500,-1500],to:[200,-200]},yspeed:{from:[0,-800],to:[300,700]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.3*i),xl.utils.scale(.4*i)]},{x:t,y:n,amount:xl.utils.freq(40),shape:"line",linePointA:r[0],linePointB:r[1]})}}),xl.register("zenith_chainbreak",{graphics:["medium","high","ultra"],play:e=>{const{x:t=0,y:n=0,color:s=16777215,scale:i=1,id:a=0}=e,r=[[[zs(-520*i),zs(-130*i)],[zs(520*i),zs(130*i)]],[[zs(-520*i),zs(110*i)],[zs(520*i),zs(-110*i)]],[[zs(-520*i),zs(-230*i)],[zs(520*i),zs(230*i)]],[[zs(-520*i),zs(90*i)],[zs(520*i),zs(-90*i)]]][a]??[[0,0],[0,0]];gl.spawnBurst({texture:["/res/particles/chain-a.png","/res/particles/chain-b.png","/res/particles/chain-c.png","/res/particles/star.png","/res/particles/star.png","/res/particles/star.png"],tint:s,lifetime:[.5,2],alpha:{from:2,to:0},alphamultiplier:{from:10,to:0},speed:{from:[2e3*i,100*i],to:[500*i,100*i]},angle:[0,360],anglespeed:{from:[1500,-1500],to:[200,-200]},yspeed:{from:[0,-1800],to:[300,700]},direction:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.3*i),xl.utils.scale(.5*i)]},{x:t,y:n,amount:xl.utils.freq(60),shape:"line",linePointA:r[0],linePointB:r[1]})}}),xl.register("zenith_speedrun",{graphics:["high","ultra"],play:e=>{const{dT:t=1}=e;_l.spawnBurst({texture:"/res/particles/beam.png",tint:16777215,lifetime:2,alpha:[.05,.2],yspeed:[ws(2e3),ws(5e3)],scale:[xl.utils.scale(.3),xl.utils.scale(.8)]},{shape:"rectangle",x:window.innerWidth/2,y:ws(-200),width:window.innerWidth,height:0,amount:xl.utils.freq(1.5*t)})}});const Il=(()=>{const e={};let t=0;function n(t){e[t]&&(e[t].obj.destroy(),e[t].leader&&!e[t].leader._destroyed&&e[t].leader.destroy(),delete e[t])}return{create:function(n){let{pointA:s=[0,0],pointB:i=[0,0],intensity:a=1,duration:r=1,length:l=45,layer:c="front"}=n;if("minimal"===ot.video.graphics)return;if("gui"===c&&(!$l||"ultra"!==ot.video.graphics))return;const p={gui:$l?$l.stage:null,front:Al,sub:vl,back:jl}[c],d={gui:yl,front:gl,sub:bl,back:_l}[c],u=++t,_=Tl(360*Math.random(),100,50);let m;a=Math.max(1,Math.min(20,a)),["high","ultra"].includes(ot.video.graphics)&&(m=d.createSpawner({texture:"/res/particles/star.png",tint:_,lifetime:[.4,.7],alpha:{from:1,to:0},speed:{from:[0,100+a/20*300],to:0},anglespeed:{from:[0,400+a/20*1600],to:0},direction:[0,360],angle:[0,360],blendmode:o.BLEND_MODES.ADD,scale:[xl.utils.scale(.2+a/20*.2),.3+a/20*.2]},{x:s[0],y:s[1],amount:xl.utils.freq(10+a/20*60),shape:"point",lifetime:-1}));const g=new h.Beam({texture:"/res/particles/beams/beam.png",mode:"path",path:[new o.Point(s[0],s[1]),new o.Point((i[0]+s[0])/2+(Math.random()-.5)*(i[0]-s[0])+(Math.random()-.5)*(window.innerWidth/10),(i[1]+s[1])/2+(Math.random()-.5)*(i[1]-s[1])+(Math.random()-.5)*(window.innerHeight/10)),new o.Point(i[0],i[1])],vertices:Math.round(l*r),length:Math.round(l*r),duration:r,tint:_,blendMode:o.BLEND_MODES.ADD,scale:.5+a/20,smoothPath:!0,smoothVertices:!0,repeatTexture:!1,reverse:!1,leader:m,onHit:(t,n)=>{xl.play("garbage_beam_impact",{x:n.x,y:n.y,color:_,intensity:a}),m&&m.destroy(),delete e[u]}});return p.addChild(g),e[u]={id:u,obj:g,leader:m,options:n},u},destroy:n,destroyAll:function(){Object.keys(e).forEach((e=>{n(e)}))},getBeam:function(t){return e[id]}}})();let El,Ml,Dl,Ol,Pl;function Hl(e,t,n){const s=document.createElement("canvas"),i=s.getContext("2d");s.height=t,s.width=e;const a=i.createLinearGradient(0,0,0,t);return n.forEach((e=>{a.addColorStop(e[0],e[1])})),i.fillStyle=a,i.fillRect(0,0,e,t),new o.Texture.fromCanvas(s)}Tn.ready((function(e){let t=null,n=null;El=function(){function e(){t&&t.destroy(),n&&n.destroy()}function s(){e(),t=_l.createSpawner({texture:"/res/particles/bigbox.png",tint:16777215,lifetime:[1,30],alpha:{from:[.02,.15],to:0},alphamultiplier:{from:0,to:2},speed:{from:[0,45],to:[0,20]},direction:[0,360],scale:[xl.utils.scale(.02),xl.utils.scale(.3)],wrap:!0},{shape:"rectangle",x:window.innerWidth/2,y:window.innerHeight/2,width:window.innerWidth,height:window.innerHeight,amount:xl.utils.freq(3.5),lifetime:-1}),n=_l.createSpawner({texture:"/res/particles/particle.png",tint:16777215,lifetime:[1,30],alpha:{from:[.05,.5],to:0},alphamultiplier:{from:0,to:2},speed:{from:[0,60],to:[0,30]},direction:[0,360],scale:[xl.utils.scale(.02),xl.utils.scale(.25)],wrap:!0},{shape:"rectangle",x:window.innerWidth/2,y:window.innerHeight/2,width:window.innerWidth,height:window.innerHeight,amount:xl.utils.freq(10),lifetime:-1})}return{set:function(){"high"!==ot.video.graphics&&"ultra"!==ot.video.graphics||s()},unset:function(){e()},resize:function(){"high"!==ot.video.graphics&&"ultra"!==ot.video.graphics||s()}}}(),Ml=function(){let e,t,n=1,s=1,i=!1;function a(t){const n=t||e;if(!n||!n.texture)return;Ol.position.set(window.innerWidth/2,window.innerHeight/2),Pl.position.set(window.innerWidth/2,window.innerHeight/2),Pl.pivot.set(window.innerWidth/2,window.innerHeight/2);window.innerWidth/window.innerHeight>n.texture.width/n.texture.height?n.scale.set(window.innerWidth/n.texture.width,window.innerWidth/n.texture.width):n.scale.set(window.innerHeight/n.texture.height,window.innerHeight/n.texture.height)}return o.Ticker.shared.add((t=>{if(!e||i)return;if("minimal"===ot.video.graphics)return;const o=n,a=e.alpha;if(Math.round(100*a)===Math.round(100*o)){e.alpha=o;const t=void 0===ot.video.bloom?1:ot.video.bloom;0!=ot.video.bloom&&ql&&"ultra"===ot.video.graphics&&(ql.threshold=.35+.15*o,ql.bloomScale=(.45+-.3*o)*t,ql.blur=(7+-5*o)*t)}else{const n=o+(a-o)*Math.pow(.9,t);e.alpha=n;const s=void 0===ot.video.bloom?1:ot.video.bloom;0!=ot.video.bloom&&ql&&"ultra"===ot.video.graphics&&(ql.threshold=.35+.15*n,ql.bloomScale=(.45+-.3*n)*s,ql.blur=(7+-5*n)*s)}const r=s,l=Ol.scale.x;if(Math.round(1e3*l)===Math.round(1e3*r))Ol.scale.set(r);else{const e=r+(l-r)*Math.pow(.9,t);Ol.scale.set(e)}}),this),{setBackground:(n,s)=>{if(t===n)return;s||(i=!0),t=n;let r=0;e&&(s?e.destroy():(dc.animate(e,{0:{alpha:1},1:{alpha:0}},.5,void 0,(e=>{e.destroy()})),r=800));const l=o.Sprite.from(t);l.alpha=0,l.anchor.set(.5,.5),Ol.addChild(l),e=l;const c=Date.now(),p=()=>{a(l),s?l.alpha=1:setTimeout((()=>{dc.animate(l,{0:{alpha:0},1:{alpha:1}},.5,void 0,(()=>{i=!1}))}),Math.max(0,r-(Date.now()-c)))};l.texture.valid?p():l.texture.once("update",p)},fit:e=>{a(e)},opacity:e=>{"low"!==ot.video.graphics&&"minimal"!==ot.video.graphics&&(n=e)},scale:e=>{"low"!==ot.video.graphics&&"minimal"!==ot.video.graphics&&(s=e)}}}()})),window.DEVHOOK_BG_ANIM=(e=100)=>{let t=0,n=!1;console.warn("The background will flash and errors may appear while the frames of the animation load in, please hang tight..."),setInterval((()=>{t++,t>32&&(t=1,n||(console.warn("Backgrounds have been loaded in."),n=!0)),Ml.setBackground(`https://kagari.moe/:/bggame${t}.png`,!0)}),e)};const Rl=(()=>{const e=new Map,t={hun:{fnt:"res/font/hun.fnt",type:"sdf",rasterizeSize:1024,sdfSpread:3.5},seg:{fnt:"res/font/seg.fnt",type:"sdf",rasterizeSize:1024,sdfSpread:11}};let n=0;const s=[];return Gt((()=>{Tn.setState("fonts",`loading fonts (${n}/${Object.keys(t).length})`),Object.keys(t).forEach((i=>{const o=new d.Font({...t[i],onload:()=>{e.set(i,o),n++,Tn.setState("fonts",`loading fonts (${n}/${Object.keys(t).length})`),n>=Object.keys(t).length&&(s.forEach((e=>{e()})),Tn.finishLoad("fonts"))}})}))})),{get:t=>e.get(t),ready:e=>{n>=Object.keys(t).length?e():s.push(e)},setRasterizeRenderer:t=>{for(const[,n]of e)n.setRasterizeRenderer(t)}}})(),Wl=(()=>{const e=["/res/board-flash.png","/res/board-flash-inv.png","/res/speedrun-pattern.png","/res/wound-tile.png","/res/particles/beam.png","/res/particles/bigbox.png","/res/particles/boardstar.png","/res/particles/bokeh.png","/res/particles/box.png","/res/particles/chain-a.png","/res/particles/chain-b.png","/res/particles/chain-c.png","/res/particles/wound-spark-1.png","/res/particles/wound-spark-2.png","/res/particles/wound-spark-3.png","/res/particles/wound-particle-1.png","/res/particles/wound-particle-2.png","/res/particles/wound-particle-3.png","/res/particles/wound-particle-4.png","/res/particles/chip.png","/res/particles/chirp.png","/res/particles/dust.png","/res/particles/exhaust.png","/res/particles/fire.png","/res/particles/flare.png","/res/particles/fbox.png","/res/particles/particle.png","/res/particles/smoke.png","/res/particles/star.png","/res/particles/spark.png","/res/particles/beams/beam.png","/res/cutin/superlobby/backing.png","/res/skins/board/zenith/base.2x.png","/res/tutorial.png"];let t=0,n=0;const s=[];return Gt((()=>{Tn.setState("textures",`loading textures (${t}/${e.length})`),e.forEach((i=>{const a=o.Texture.from(i),r=()=>{t++,Tn.setState("textures",`loading textures (${t}/${e.length})`),t>=e.length&&(s.forEach((e=>{e()})),Tn.finishLoad("textures"),n&&en(`${n} texture${1===n?"":"s"} failed to load. make sure your internet connection is stable. if you run into any issues, please reload the page.`))};a.baseTexture.valid?r():(a.baseTexture.once("loaded",(()=>{r()})),a.baseTexture.once("error",(e=>{console.error(`Texture ${i} failed to load!`,e.event),n++,r()})))}))})),{ready:n=>{t>=e.length?n():s.push(n)}}})();let Nl,$l,Gl,Ul,Xl,jl,ql;o.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,Gt((()=>{o.utils.skipHello(),Rl.ready((()=>{null===localStorage.getItem("feecofScore")?(console.log("Eligible for feecof test."),Tn.setState("feecof","initializing benchmark..."),setTimeout((()=>{console.log("Feecof test starting..."),Tn.setState("feecof","running benchmark...");const e=document.createElement("canvas");e.setAttribute("width","640"),e.setAttribute("height","320"),e.setAttribute("style","position:fixed;left:100vw;top:0;opacity:0;will-change:transform;pointer-events:none;"),document.body.appendChild(e),g({view:e,speed:100,smartstop:!0,maxcount:10,mincount:3,img:"/res/kagari.png",font:Rl.get("hun"),maxtime:3e4},(t=>{if(e.remove(),!t.success)return console.error("Feecof test did not complete. Will try again next time."),Nt(["trackEvent","Performance","Feecof","Failure"]),void Tn.finishLoad("feecof");localStorage.setItem("feecofScore",t.feecof),console.log(`Feecof test completed with score of ${t.feecof} feecof.`),Nt(["trackEvent","Performance","Feecof","Complete",t.feecof]),Tn.finishLoad("feecof")}))}),1500)):Tn.finishLoad("feecof")}))}));const Kl={vertices:!1,position:!0,rotation:!1,uvs:!1,tint:!0},Vl={vertices:!0,position:!0,rotation:!0,uvs:!1,tint:!0};let Yl=!0,Ql=0;function Zl(){Nl.renderer.resize(window.innerWidth,window.innerHeight),$l&&$l.renderer.resize(window.innerWidth,window.innerHeight),ec(),Yl=!0}function Jl(e){if(window.IS_ELECTRON)switch(ot.electron.frameratelimit){case"1x":o.Ticker.shared.maxFPS=e||fn.si().refreshRate||60;break;case"2x":o.Ticker.shared.maxFPS=e||2*(fn.si().refreshRate||60);break;case"off":o.Ticker.shared.maxFPS=e||0;break;default:o.Ticker.shared.maxFPS=e||4*(fn.si().refreshRate||60)}else o.Ticker.shared.maxFPS=e||0}function ec(){if(Gl){if("ultra"!==ot.video.graphics)return Gl.filters=null,void(Gl.filterArea=null);if(Gl.filters=[],0!=ot.video.bloom){const e=void 0===ot.video.bloom?1:ot.video.bloom;ql=new o.filters.AdvancedBloomFilter({threshold:.5,bloomScale:.15*e,brightness:1,blur:2*e,quality:Math.floor(Math.min(Math.max(4,e+2),20))}),Gl.filters.push(ql)}if(0!=ot.video.chroma){const e=void 0===ot.video.chroma?.5:ot.video.chroma;Gl.filters.push(new o.filters.RGBSplitFilter(new o.Point(0,-e),new o.Point(0,0),new o.Point(-e,0)))}Gl.filterArea=new o.Rectangle(0,0,window.innerWidth,window.innerHeight),Nl.stage.filterArea=new o.Rectangle(0,0,window.innerWidth,window.innerHeight)}}function tc(e){for(;e.children.length;){e.children[0].destroy()}}function nc(e,t,n){const s=e.worldTransform.apply(new o.Point(t,n));return{x:s.x,y:s.y}}function sc(e,t,n,s=1){const i=e.getGlobalPosition(void 0,!0);return{x:i.x+t*s,y:i.y+n*s}}function ic(e,t,n){const s=new o.BaseRenderTexture({width:e,height:t}),i=new o.RenderTexture(s);return Nl.renderer.render(n,{renderTexture:i}),s}function oc(e,t){const n=new o.BaseRenderTexture({width:256*e,height:256*e}),s=new o.RenderTexture(n),i=new o.Container;for(let n=0;n<25;n++){const s=n%5,a=Math.floor(n/5),r=n/25,l=46*e,c=new o.Sprite(t);c.position.set(e*(1+48*s),e*(1+48*a)),c.filters=[new o.filters.AdjustmentFilter({contrast:0,brightness:2})];const p=new o.Graphics;p.beginFill(16711680,1),p.drawShape(r<=.5?new o.Polygon([l*r*2,0,l,0,l,l,0,l,0,l*r*2]):new o.Polygon([l,l*r*2-l,l,l,l*r*2-l,l])),p.endFill(),p.position.set(e*(1+48*s),e*(1+48*a)),c.mask=p,i.addChild(c),i.addChild(p)}return Nl.renderer.render(i,{renderTexture:s}),n}Tn.ready((function(e){switch(ot.video.webgl){case"legacy":o.settings.PREFER_ENV=o.ENV.WEBGL_LEGACY;break;case"webgl1":o.settings.PREFER_ENV=o.ENV.WEBGL;break;default:o.settings.PREFER_ENV=o.ENV.WEBGL2}if("low"!==ot.video.graphics&&"minimal"!==ot.video.graphics||(o.settings.PRECISION_FRAGMENT=o.PRECISION.LOW,o.settings.PRECISION_VERTEX=o.PRECISION.LOW),"minimal"===ot.video.graphics&&(o.settings.SCALE_MODE=o.SCALE_MODES.NEAREST),xt("pixi").getBoundingClientRect=()=>({x:0,y:0,width:window.innerWidth,height:window.innerHeight,top:0,left:0,right:window.innerWidth,bottom:window.innerHeight}),xt("pixi-fg").getBoundingClientRect=()=>({x:0,y:0,width:window.innerWidth,height:window.innerHeight,top:0,left:0,right:window.innerWidth,bottom:window.innerHeight}),Nl=new o.Application({width:256,height:256,view:xt("pixi"),antialias:"low"!==ot.video.graphics&&"minimal"!==ot.video.graphics,backgroundAlpha:1,powerPreference:ot.video.powersave?"default":"high-performance",forceFXAA:"high"!==ot.video.graphics&&"ultra"!==ot.video.graphics,sharedTicker:"minimal"!==ot.video.graphics,autoDensity:!0,clearBeforeRender:!1,resolution:ot.video.lowres?.7:window.devicePixelRatio,autoStart:"minimal"!==ot.video.graphics}),o.Ticker.shared.maxFPS=0,"ultra"===ot.video.graphics&&($l=new o.Application({width:256,height:256,view:xt("pixi-fg"),antialias:!1,backgroundAlpha:0,powerPreference:ot.video.powersave?"default":"high-performance",forceFXAA:!1,sharedTicker:!0,autoDensity:!0,resolution:ot.video.lowres?.7:window.devicePixelRatio,autoStart:!0})),"minimal"===ot.video.graphics){const e=new o.Ticker;e.add((()=>{(Ql>0||Yl)&&(Nl.renderer.render(Nl.stage),Yl=!1)}),Nl,o.UPDATE_PRIORITY.LOW),e.start()}if(Nl&&Nl.renderer&&Nl.renderer.type===o.RENDERER_TYPE.WEBGL?console.log(`%cPixiJS ${o.VERSION} - ${2===Nl.renderer.context.webGLVersion?"WebGL 2":"WebGL 1"}${o.settings.PREFER_ENV===o.ENV.WEBGL_LEGACY?" (LEGACY)":""}`,`color: ${2===Nl.renderer.context.webGLVersion?"#F3C0E6":"#D9C0F3"};\n\t\t\tfont-size: 1.2em;\n\t\t\tfont-weight: 900;\n\t\t\ttext-shadow: 0px 0px 2px ${2===Nl.renderer.context.webGLVersion?"#BA509B":"#7050BA"};\n\t\t\tbackground-color: ${2===Nl.renderer.context.webGLVersion?"#50344988":"#3D345088"};\n\t\t\tpadding: 0 1em;\n\t\t\tborder-radius: 3px;`):Nl&&Nl.renderer&&Nl.renderer.type===o.RENDERER_TYPE.CANVAS?(console.log(`%cPixiJS ${o.VERSION} - Canvas`,"color: #F97676;\n\t\t\tfont-size: 1.2em;\n\t\t\tfont-weight: 900;\n\t\t\ttext-shadow: 0px 0px 2px #BA5050;\n\t\t\tbackground-color: #87353588;\n\t\t\tpadding: 0 1em;\n\t\t\tborder-radius: 3px;"),console.error("Canvas renderers are not supported.")):(console.log(`%cPixiJS ${o.VERSION} - No renderer`,"color: #FFFFFF;\n\t\t\tfont-size: 1.2em;\n\t\t\tfont-weight: 900;\n\t\t\ttext-shadow: 0px 0px 2px #FFFFFF;\n\t\t\tbackground-color: #FF0000;\n\t\t\tpadding: 0 1em;\n\t\t\tborder-radius: 3px;"),console.error("No supported renderer found. Cannot launch.")),console.log(`%c- ${navigator.userAgent?navigator.userAgent:"Unknown browser"} -\nCPU: ${navigator.hardwareConcurrency?`${navigator.hardwareConcurrency}-core`:"<unknown>"}\nMemory: ${navigator.deviceMemory?`~${navigator.deviceMemory} GB`:"<unknown>"}\nConnection: ${navigator.connection?`${navigator.connection.downlink} Mbps, ${navigator.connection.rtt}ms RTT [${navigator.connection.effectiveType}]`:"<unknown>"}`,"color: #FFFFFF88;\n\tfont-size: 1.2em;\n\tfont-weight: 900;\n\ttext-shadow: 0px 0px 2px #FFFFFF88;\n\tbackground-color: #111111AA;\n\tpadding: 0 1em;\n\tborder-radius: 3px;"),Nl&&Nl.renderer){const e=Nl.renderer.gl.getExtension("WEBGL_debug_renderer_info");e&&(console.log(`%cRenderer: ${Nl.renderer.gl.getParameter(e.UNMASKED_RENDERER_WEBGL)}`,"color: #FFFFFF88;\n\t\t\t\tfont-size: 1.2em;\n\t\t\t\tfont-weight: 900;\n\t\t\t\ttext-shadow: 0px 0px 2px #FFFFFF88;\n\t\t\t\tbackground-color: #111111AA;\n\t\t\t\tpadding: 0 1em;\n\t\t\t\tborder-radius: 3px;"),xt("rendererinfo").textContent=`${2===Nl.renderer.context.webGLVersion?"WebGL 2":"WebGL 1"}${o.settings.PREFER_ENV===o.ENV.WEBGL_LEGACY?" (LEGACY)":""} | ${Nl.renderer.gl.getParameter(e.UNMASKED_RENDERER_WEBGL)}`,window.Sentry?.setTag?.("gpu",Nl.renderer.gl.getParameter(e.UNMASKED_RENDERER_WEBGL)))}if(m(),Rl.setRasterizeRenderer(Nl.renderer),Zl(),Nl.stage.filters=null,Ol=new o.Container,Ol.name="bgImgContainer",Ol.interactive=!1,Ol.interactiveChildren=!1,Ol.alpha=ot.video.background,Nl.stage.addChild(Ol),Pl=new o.Container,Pl.name="bgSubContainer",Pl.interactive=!1,Pl.interactiveChildren=!1,Nl.stage.addChild(Pl),Dl=new o.Container,Dl.name="bgContainer",Dl.interactive=!1,Dl.interactiveChildren=!1,Dl.alpha=Math.min(1,10*(ot.video.background||0)),Nl.stage.addChild(Dl),ml=new p.ParticleManager,Dl.addChild(ml),_l=new p.ParticleManager,Dl.addChild(_l),El.set(),Gl=new o.Container,Gl.name="gScene",Nl.stage.addChild(Gl),jl=new o.Container,jl.name="gSceneBG",jl.sortableChildren=!0,Gl.addChild(jl),vl=new o.Container,vl.name="fxContainerSub",vl.interactive=!1,vl.interactiveChildren=!1,Gl.addChild(vl),Xl=new o.Container,Xl.name="gSceneFG",Xl.sortableChildren=!0,Gl.addChild(Xl),Al=new o.Container,Al.name="fxContainer",Al.interactive=!1,Al.interactiveChildren=!1,Nl.stage.addChild(Al),fl=new p.ParticleManager,Al.addChild(fl),gl=new p.ParticleManager,Al.addChild(gl),Cl=new p.ParticleManager,vl.addChild(Cl),bl=new p.ParticleManager,vl.addChild(bl),Ul=new o.Container,Ul.name="gSceneHUD",Ul.sortableChildren=!0,Nl.stage.addChild(Ul),$l&&($l.stage.interactive=!1,$l.stage.interactiveChildren=!1,yl=new p.ParticleManager,$l.stage.addChild(yl)),xt("pixi").addEventListener("webglcontextlost",(()=>{Yi(),xt("dirtyflag_gl").innerHTML="CRASHED",Nt(["trackEvent","Error","WebGL Crash"]),_n({title:"WEBGL CRASHED",msg:'an error has caused WEBGL to crash.</p><p>this could be caused by many issues, like a driver error, a GPU error, a browser error or insufficient resources.</p><p class="modal_also">you can choose to continue the current session, which may not work properly, or reload to try again. sometimes, exiting the ongoing game can fix the error.',classes:["crash_modal","noclickout"],buttons:[{label:"CONTINUE",classes:[],callback:e=>{e(),Zi()}},{label:"RESTART",classes:["pri"],callback:e=>{e(),Fn=!0,location.reload()}}]})})),Yl=!0,window.IS_ELECTRON){let e=0,t=0,n=0,s=!1;o.Ticker.shared.add((()=>{e++}),this),setInterval((()=>{if(t!==e)return t=e,s?void(s=!1):void(n=0);n++,n>=3&&(s=!0,o.Ticker.shared.update())}),100)}if(["medium","low","minimal"].includes(ot.video.graphics)){let e,t="filled";o.Ticker.shared.add((()=>{Dl&&!!Dl.alpha||!!Xl.children.length||!!jl.children.length||!Ul.children.length?"filled"!==t&&(t="filled"):"filled"===t?(e=o.Sprite.from("/res/kagari.png"),e.position.set(-9999,-9999),Nl.stage.addChild(e),t="clearing"):"clearing"===t&&(e.destroy(),t="empty")}))}ec()}));const ac="0123456789#%&()*+,-./:<=>?ABCDEFGHIJKLMNOPQRSTUVWXYZ",rc="";function lc(e){let t="";for(let n=0;n<e.length;n++){const s=ac.indexOf(e[n]);t+=-1===s?e[n]:rc[s]}return t}const cc=(()=>{let e=[];function t(t){e=e.filter((e=>e.name!==t.name))}function n(t){const n=e.filter((e=>e.name===t));return n?n[0]:void 0}return{register:(s,i,o=[])=>{Array.isArray("array")||(o=[o]);const a=n(i);a&&t(a),e.push({obj:s,name:i,classes:o})},unregister:e=>{Array.isArray(e)?e.forEach((e=>{t(e)})):t(e)},unregisterStartingWith:t=>{e=e.filter((e=>!e.name.startsWith(t)))},get:e=>n(e),getAll:t=>function(t){const n=e.filter((e=>e.classes.includes(t)));return n||[]}(t)}})(),pc={0:{y:0},1:{y:500}},hc=a(0,0,1,1),dc=(()=>{const e={};let t=0;function n(e,t,n){const s=Object.keys(t).sort(((e,t)=>parseFloat(e)-parseFloat(t)));let i=0;for(let e=s.length-2;e>=0;e--)if(parseFloat(s[e])<=n){i=s[e];break}let o=1;for(let e=1;e<s.length;e++)if(parseFloat(s[e])>n){o=s[e];break}Object.keys(t[0]).forEach((s=>{let a=t[i][s],r=t[o][s];"inherit"===a&&(t[i][s]=kt(e,s),a=t[i][s]),"inherit"===r&&(t[o][s]=kt(e,s),r=t[o][s]),"string"==typeof a&&"r"===a.slice(-1)&&(a=ws(parseFloat(a.slice(0,-1)))),"string"==typeof r&&"r"===r.slice(-1)&&(r=ws(parseFloat(r.slice(0,-1)))),kt(e,s,function(e,t,n,s,i){return s+(n-e)/(t-e)*(i-s)}(i,o,n,a,r))}))}function s(t,s=null){e[t]&&(null!==s&&e[t]&&e[t].obj&&!e[t].obj._destroyed&&n(e[t].obj,e[t].animation,s),delete e[t],Ql--)}return o.Ticker.shared.add((function(t){Object.keys(e).forEach((i=>{const o=e[i];o.obj?._destroyed?s(i):(o.progress=Math.min(1,o.progress+o.speed*t),n(o.obj,o.animation,o.curve(o.progress)),o.progress>=1&&(o.onend(o.obj),s(i,1)))}))})),{animate:(n,s,i,o,a=()=>{})=>function(n,s,i,o,a){if(!n)return;const r=""+ ++t;return e[r]={obj:n,animation:s,speed:1/(60*i),progress:0,curve:void 0!==o?o:hc,onend:a},Ql++,r}(n,s,i,o,a),stop(e,t=null){s(e,t)}}})(),uc=1.8,_c={x:30};function mc(){return window.innerWidth>1920||window.innerHeight>1080?"uhd":"hd"}const gc={255:"NM_MID",241:"VS_TOP",17:"VS_MID",31:"VS_BTM",81:"VS_TOP",95:"NM_MID",245:"NM_MID",21:"VS_BTM",85:"NM_MID",199:"HS_LFT",68:"HS_MID",124:"HS_RGT",201:"CN_TLF",114:"CN_TRG",156:"CN_BRG",39:"CN_BLF",220:"HS_RGT",103:"HS_LFT",205:"HS_LFT",118:"HS_RGT",64:"ED_TOP",16:"ED_RGT",4:"ED_BTM",1:"ED_LFT",80:"SQ_TRG",65:"SQ_TLF",20:"SQ_BRG",5:"SQ_BLF",84:"HS_RGT",69:"HS_LFT",0:"MM_MID",193:"SQ_TLF",112:"SQ_TRG",28:"SQ_BRG",7:"SQ_BLF",92:"HS_RGT",71:"HS_LFT",197:"HS_LFT",116:"HS_RGT",164:"TS_TOP",41:"TS_RGT",74:"TS_BTM",146:"TS_LFT",228:"HS_MID",105:"CN_TLF",210:"CN_TRG",45:"CN_BLF",78:"HS_MID",150:"CN_BRG",109:"HS_LFT",214:"HS_RGT"},fc={NM_MID:[0,3],VS_TOP:[0,0],VS_MID:[0,1],VS_BTM:[0,2],HS_LFT:[1,3],HS_MID:[2,3],HS_RGT:[3,3],CN_TLF:[0,4],CN_TRG:[1,4],CN_BRG:[1,5],CN_BLF:[0,5],ED_TOP:[2,0],ED_RGT:[3,1],ED_BTM:[2,2],ED_LFT:[1,1],MM_MID:[2,1],SQ_TLF:[1,0],SQ_TRG:[3,0],SQ_BRG:[3,2],SQ_BLF:[1,2],TS_TOP:[2,4],TS_RGT:[3,4],TS_BTM:[2,5],TS_LFT:[3,5]},bc={NM_MID:[0,3],VS_TOP:[0,0],VS_MID:[0,1],VS_BTM:[0,2],HS_LFT:[1,3],HS_MID:[2,3],HS_RGT:[3,3],ED_TOP:[2,0],ED_RGT:[3,1],ED_BTM:[2,2],ED_LFT:[1,1],MM_MID:[2,1],SQ_TLF:[1,0],SQ_TRG:[3,0],SQ_BRG:[3,2],SQ_BLF:[1,2]};function Cc(e,t,n,s,i,a){const r={};return Object.keys(t).forEach((l=>{r[l]=new o.Texture(e,new o.Rectangle(s+(t[l][0]+i)*(n+2*s),s+(t[l][1]+a)*(n+2*s),n,n))})),r}window.DEVHOOK_CONNECTED_SKIN=()=>{yc.tetrio=yc.connected_test,xc.tetrio=xc.connected_test};const yc={tetrio:{id:"tetrio",name:"TETR.IO",assets:{hd:{url:"/res/skins/minos/tetrio.png",loaded:!1,loading:!1,basetexture:null,textures:{}},uhd:{url:"/res/skins/minos/tetrio.2x.png",loaded:!1,loading:!1,basetexture:null,textures:{}}},format:"simple",colors:{base:{z:13521497,l:13533522,o:13550930,s:8441426,i:5426860,j:6705870,t:12800718,d:4605510,gb:6181727,gbd:2359335},glow:{z:16744069,l:16749136,o:16773982,s:10813295,i:8716253,j:10324735,t:16091903,d:6250335,gb:12956103,gbd:4405060}}},_bomb:{id:"_bomb",name:"Overlay: Bombs",assets:{hd:{url:"/res/skins/minos/_bomb.png",loaded:!1,loading:!1,basetexture:null,textures:{}},uhd:{url:"/res/skins/minos/_bomb.2x.png",loaded:!1,loading:!1,basetexture:null,textures:{}}},format:"simple",colors:{base:{z:13521497,l:13533522,o:13550930,s:8441426,i:5426860,j:6705870,t:12800718,d:4605510,gb:6181727,gbd:14954311},glow:{z:16744069,l:16749136,o:16773982,s:10813295,i:8716253,j:10324735,t:16091903,d:6250335,gb:12956103,gbd:14966146}}},connected_test:{id:"connected_test",name:"Connected skin test",assets:{hd:{url:"/res/skins/minos/connected.png",loaded:!1,loading:!1,basetexture:null,textures:{}},uhd:{url:"/res/skins/minos/connected.2x.png",loaded:!1,loading:!1,basetexture:null,textures:{}}},format:"connected",colors:{base:{z:16727357,l:16750653,o:16580413,s:5111613,i:4063176,j:4020223,t:15678975,d:6250335,gb:10066329,gbd:6634081},glow:{z:16744069,l:16749136,o:16773982,s:10813295,i:8716253,j:10324735,t:16091903,d:6250335,gb:12956103,gbd:4405060}}}},xc={tetrio:{id:"tetrio",name:"TETR.IO",assets:{hd:{url:"/res/skins/ghost/tetrio.png",loaded:!1,loading:!1,basetexture:null,textures:{}},uhd:{url:"/res/skins/ghost/tetrio.2x.png",loaded:!1,loading:!1,basetexture:null,textures:{}}},format:"simple",colorizeGhost:!0,colorizeX:!1},connected_test:{id:"connected_test",name:"Connected skin test",assets:{hd:{url:"/res/skins/ghost/connected.png",loaded:!1,loading:!1,basetexture:null,textures:{}},uhd:{url:"/res/skins/ghost/connected.2x.png",loaded:!1,loading:!1,basetexture:null,textures:{}}},format:"connected",colorizeGhost:!0,colorizeX:!1}},Ac=(()=>{function e(e,t,n=255,s=1,i={}){let a=yc[e];a||(e="tetrio",a=yc.tetrio);const r=new o.Sprite(o.Texture.WHITE);return r.width=ws(_c.x)*s,r.height=ws(_c.x)*s,r.tint=a.colors.base[t]||a.colors.base[t.replace("s_","")]||0,r}function t(e){const t=yc[e];if(!t)return;const s=mc(),i=t.assets[s];i.loaded||i.loading||(i.loading=!0,i.baseTexture=new o.BaseTexture(i.url),i.baseTexture.valid?n(t,i,s):i.baseTexture.on("loaded",(()=>{n(t,i,s)})))}function n(e,t,n){t.textures=vc[e.format](t,t.baseTexture,n),t.loaded=!0,As()}return{generate:function(n,s,i=255,a=1,r={}){let l=yc[n];if(l||(n="tetrio",l=yc.tetrio),!l.assets[mc()].loaded)return l.assets[mc()].loading||t(n),e(n,s,i,a,r);let c=o.Texture.WHITE;switch(l.assets[mc()].textures.format){case"10":c=l.assets[mc()].textures[s];break;case"wang24":c=l.assets[mc()].textures[s][gc[i]||255]}const p=new o.Sprite(c);return p.width=ws(_c.x)*a,p.height=ws(_c.x)*a,p},generatePlaceholder:e,generateFlash:function(e){let t=yc[e];if(t||(e="tetrio",t=yc.tetrio),!t.assets[mc()].loaded||!t.assets[mc()].textures.flashsheet)return;const n=new o.AnimatedSprite(t.assets[mc()].textures.flashsheet,!0);return n.loop=!1,n.animationSpeed=2,n.onComplete=()=>{n.destroy()},n.play(),dc.animate(n,{0:{alpha:.3},1:{alpha:.2}},.2,a(.02,.58,0,.88)),n},getColor:function(e,t,n=!1){let s=yc[e];s||(e="tetrio",s=yc.tetrio);const i=s.colors.base[t]||0;return n?`#${i.toString(16).padStart(6,"0")}`:i},getGlowColor:function(e,t,n=!1){let s=yc[e];s||(e="tetrio",s=yc.tetrio);const i=s.colors.glow[t]||0;return n?`#${i.toString(16).padStart(6,"0")}`:i},load:t}})(),vc={simple:(e,t,n)=>{const s=new o.Sprite(new o.Texture(t));s.filters=[new o.filters.AdjustmentFilter({brightness:1.2,contrast:1.2})];const i=ic("uhd"===n?512:256,"uhd"===n?512:256,s),a="uhd"===n?92:46,r="uhd"===n?2:1,l=[],c=oc("uhd"===n?2:1,new o.Texture(t,new o.Rectangle(r,r,a,a)));for(let e=0;e<25;e++){const t=e%5,n=Math.floor(e/5);l.push(new o.Texture(c,new o.Rectangle(r+t*(a+2*r),r+n*(a+2*r),a,a)))}return{format:"10",z:new o.Texture(t,new o.Rectangle(r+0*(a+2*r),r+0*(a+2*r),a,a)),l:new o.Texture(t,new o.Rectangle(r+1*(a+2*r),r+0*(a+2*r),a,a)),o:new o.Texture(t,new o.Rectangle(r+2*(a+2*r),r+0*(a+2*r),a,a)),s:new o.Texture(t,new o.Rectangle(r+3*(a+2*r),r+0*(a+2*r),a,a)),i:new o.Texture(t,new o.Rectangle(r+4*(a+2*r),r+0*(a+2*r),a,a)),j:new o.Texture(t,new o.Rectangle(r+0*(a+2*r),r+1*(a+2*r),a,a)),t:new o.Texture(t,new o.Rectangle(r+1*(a+2*r),r+1*(a+2*r),a,a)),d:new o.Texture(t,new o.Rectangle(r+2*(a+2*r),r+1*(a+2*r),a,a)),gb:new o.Texture(t,new o.Rectangle(r+3*(a+2*r),r+1*(a+2*r),a,a)),gbd:new o.Texture(t,new o.Rectangle(r+4*(a+2*r),r+1*(a+2*r),a,a)),s_z:new o.Texture(i,new o.Rectangle(r+0*(a+2*r),r+0*(a+2*r),a,a)),s_l:new o.Texture(i,new o.Rectangle(r+1*(a+2*r),r+0*(a+2*r),a,a)),s_o:new o.Texture(i,new o.Rectangle(r+2*(a+2*r),r+0*(a+2*r),a,a)),s_s:new o.Texture(i,new o.Rectangle(r+3*(a+2*r),r+0*(a+2*r),a,a)),s_i:new o.Texture(i,new o.Rectangle(r+4*(a+2*r),r+0*(a+2*r),a,a)),s_j:new o.Texture(i,new o.Rectangle(r+0*(a+2*r),r+1*(a+2*r),a,a)),s_t:new o.Texture(i,new o.Rectangle(r+1*(a+2*r),r+1*(a+2*r),a,a)),s_d:new o.Texture(i,new o.Rectangle(r+2*(a+2*r),r+1*(a+2*r),a,a)),s_gb:new o.Texture(i,new o.Rectangle(r+3*(a+2*r),r+1*(a+2*r),a,a)),s_gbd:new o.Texture(i,new o.Rectangle(r+4*(a+2*r),r+1*(a+2*r),a,a)),flashsheet:l}},connected:(e,t,n)=>{const s=new o.Sprite(new o.Texture(t));s.filters=[new o.filters.AdjustmentFilter({brightness:1.2,contrast:1.2})];const i=ic("uhd"===n?2048:1024,"uhd"===n?2048:1024,s),a="uhd"===n?92:46,r="uhd"===n?2:1,l=[],c=oc("uhd"===n?2:1,new o.Texture(t,new o.Rectangle(r,r,a,a)));for(let e=0;e<25;e++){const t=e%5,n=Math.floor(e/5);l.push(new o.Texture(c,new o.Rectangle(r+t*(a+2*r),r+n*(a+2*r),a,a)))}return{format:"wang24",z:Cc(t,fc,a,r,0,0),l:Cc(t,fc,a,r,4,0),o:Cc(t,fc,a,r,8,0),s:Cc(t,fc,a,r,12,0),i:Cc(t,fc,a,r,0,6),j:Cc(t,fc,a,r,4,6),t:Cc(t,fc,a,r,8,6),d:Cc(t,fc,a,r,12,6),gb:Cc(t,bc,a,r,16,0),gbd:Cc(t,bc,a,r,16,4),s_z:Cc(i,fc,a,r,0,0),s_l:Cc(i,fc,a,r,4,0),s_o:Cc(i,fc,a,r,8,0),s_s:Cc(i,fc,a,r,12,0),s_i:Cc(i,fc,a,r,0,6),s_j:Cc(i,fc,a,r,4,6),s_t:Cc(i,fc,a,r,8,6),s_d:Cc(i,fc,a,r,12,6),s_gb:Cc(i,bc,a,r,16,0),s_gbd:Cc(i,bc,a,r,16,4),flashsheet:l}}},kc=(()=>{function e(e,t,n=255,s=1,i={}){let a=xc[e];a||(e="tetrio",a=xc.tetrio);const r=new o.Sprite(o.Texture.WHITE);return r.width=ws(_c.x)*s,r.height=ws(_c.x)*s,"x"===t&&(r.tint=16711680,r.alpha=.25),r}function t(e){const t=xc[e];if(!t)return;const s=mc(),i=t.assets[s];i.loaded||i.loading||(i.loading=!0,i.baseTexture=new o.BaseTexture(i.url),i.baseTexture.valid?n(t,i,s):i.baseTexture.on("loaded",(()=>{n(t,i,s)})))}function n(e,t,n){t.textures=wc[e.format](t,t.baseTexture,n),t.loaded=!0,As()}return{generate:function(n,s,i=255,a=1,r={}){let l=xc[n];if(l||(n="tetrio",l=xc.tetrio),!l.assets[mc()].loaded)return l.assets[mc()].loading||t(n),e(n,s,i,a,r);let c=o.Texture.WHITE;switch(l.assets[mc()].textures.format){case"2":c=l.assets[mc()].textures[s];break;case"wang24":c=l.assets[mc()].textures[s][gc[i]||255]}const p=new o.Sprite(c);return p.width=ws(_c.x)*a,p.height=ws(_c.x)*a,p},generatePlaceholder:e,load:t}})(),wc={simple:(e,t,n)=>{const s="uhd"===n?92:46,i="uhd"===n?2:1;return{format:"2",g:new o.Texture(t,new o.Rectangle(i+0*(s+2*i),i+0*(s+2*i),s,s)),x:new o.Texture(t,new o.Rectangle(i+1*(s+2*i),i+0*(s+2*i),s,s))}},connected:(e,t,n)=>{const s="uhd"===n?92:46,i="uhd"===n?2:1;return{format:"wang24",g:Cc(t,fc,s,i,0,0),x:Cc(t,fc,s,i,4,0)}}},Bc={superlobby:{timeout:3500,starter:e=>(xa.SePlay("cutin_superlobby"),`<img class="cutin_superlobby_backer" src="/res/cutin/superlobby/backing.png" /><p><span>${e}</span>PLAYERS</p>`)}};function Lc(e,...t){if(!Bc[e])return;const n=document.createElement("div");n.className=`cutin cutin_${e}`,n.innerHTML=Bc[e].starter(...t),xt("cutins").appendChild(n),"ultra"===ot.video.graphics&&Bc[e].ultra&&Bc[e].ultra(),setTimeout((()=>{n.remove()}),Bc[e].timeout)}class Sc{constructor(e){this.textures=new Map,this.elements=new Map,this.actorfactories=new Map,this.effects=new Map,this.progressive=new Map,this.ctx=e,this._init()}_init(){}get S(){return this.ctx.gsm}get H(){return this.ctx.hm.H}get HS(){return this.ctx.hm.H.holderstate}get CS(){return this.HS.cos*this.HS.asf}IsFullMode(){return this.ctx.hm.IsFullMode()}IsSmallMode(){return this.ctx.hm.IsSmallMode()}IsTinyMode(){return this.ctx.hm.IsTinyMode()}el(e){return this.elements.get(e)||Fc}fx(e){return this.effects.get(e)||Ic}af(e){return this.actorfactories.get(e)||Oc}progress(e){for(const[,t]of this.progressive)t.progress(e)}}class zc{constructor(e,t){this.parent=e,this.options=t}create(){}update(){}delete(){}action(e){}progress(e){}}const Fc=new zc;class Tc{constructor(e,t){this.parent=e,this.options=t}create(){}delete(){}progress(e){}}const Ic=new Tc;class Ec{constructor(e,t,n){this.parent=e,this.options=t,this.data=n}create(e=!1){}update(){}delete(){}action(e){}progress(e){}}const Mc=new Ec;class Dc{constructor(e,t,n){this.parent=e,this.options=t,this.actorClass=n}create(e,t,n=!1){return Mc}}const Oc=new Dc,Pc={generic:{id:"generic",name:"generic testing boardskin",ns:{}},tetrio:{id:"tetrio",name:"TETR.IO",ns:{}},zenith:{id:"zenith",name:"zenith boardskin",ns:{}},zenith_expert:{id:"zenith_expert",name:"zenith expert boardskin",ns:{}},zenith_duoleft:{id:"zenith_duoleft",name:"zenith boardskin, duo LEFT side",ns:{}},zenith_duoright:{id:"zenith_duoright",name:"zenith boardskin, duo RIGHT side",ns:{}},zenith_expert_duoleft:{id:"zenith_expert_duoleft",name:"zenith expert boardskin, duo LEFT side",ns:{}},zenith_expert_duoright:{id:"zenith_expert_duoright",name:"zenith expert boardskin, duo RIGHT side",ns:{}},zenith_reversed:{id:"zenith_reversed",name:"zenith reversed boardskin",ns:{}}};Pc.generic.ns.Board=class extends Sc{_init(){this.textures.set("board",o.BaseTexture.from("/res/skins/board/generic/board.png?v=3")),this.textures.set("queue",o.BaseTexture.from("/res/skins/board/generic/queue.png")),this.textures.set("tutorial",o.BaseTexture.from("/res/tutorial.png")),this.barWidth=_c.x/1.5,this.sidesOffset=0,this.sidesOffsetMixin=9,this.barWidthOffset=9}constructor(e){super(e),this._init();const t=this.textures.get("board");this.elements.set("boardsides",new Pc.generic.ns.boardsides(this,{})),this.elements.set("background",new Pc.generic.ns.background(this,{texture:new o.Texture(t,new o.Rectangle(2,2,16,16)),texture_tiny:new o.Texture(t,new o.Rectangle(22,2,26,16)),slices:[0,0,0,0],slices_tiny:[10,0,10,10],offsets_tiny:[10,0,10,10]})),this.elements.set("grid",new Pc.generic.ns.grid(this,{texture:o.BaseTexture.from("/res/skins/board/generic/grid.png")}));const n=this.textures.get("tutorial");if(this.elements.set("tutorial",new Pc.generic.ns.tutorial(this,{stage1_tex:new o.Texture(n,new o.Rectangle(0,0,512,256)),stage2_tex:new o.Texture(n,new o.Rectangle(512,0,512,256)),stage3_tex:new o.Texture(n,new o.Rectangle(0,256,512,256)),stage4_tex:new o.Texture(n,new o.Rectangle(512,256,512,256)),stage5_tex:new o.Texture(n,new o.Rectangle(0,768,512,256)),stage1side_tex:new o.Texture(n,new o.Rectangle(512,512,512,54)),stage2side_tex:new o.Texture(n,new o.Rectangle(512,566,512,54)),stage3side_tex:new o.Texture(n,new o.Rectangle(512,620,512,54)),stage4side_tex:new o.Texture(n,new o.Rectangle(512,674,512,54)),hide_afterwards:!0,y:16.3})),this.progressive.set("tutorial",this.elements.get("tutorial")),this.elements.set("username",new Pc.generic.ns.username(this,{texture:new o.Texture(t,new o.Rectangle(52,2,16,16)),texture_fire:new o.Texture(t,new o.Rectangle(74,2,16,16)),slices:[0,0,0,0],slices_fire:[0,0,0,0],offsets:[9,0,9,0],offsets_fire:[9,0,9,0],font_opts:{}})),this.elements.set("stack",new Pc.generic.ns.stack(this,{})),this.elements.set("stock",new Pc.generic.ns.stock(this,{texture:new o.Texture(t,new o.Rectangle(2,22,92,92))})),this.elements.set("next",new Pc.generic.ns.next(this,{texture:new o.Texture(this.textures.get("queue"),new o.Rectangle(2,2,474,142)),slices:[180,82,50,50],pos:[18,27]})),this.elements.set("hold",new Pc.generic.ns.hold(this,{texture:new o.Texture(this.textures.get("queue"),new o.Rectangle(2,148,474,142)),slices:[180,82,50,50],pos:[18,27]})),this.elements.set("holdwarn",new Pc.generic.ns.holdwarn(this,{texture:new o.Texture(t,new o.Rectangle(2,316,92,92)),scale:1,tint:16720384,offset:[-23,45]})),this.progressive.set("holdwarn",this.elements.get("holdwarn")),this.elements.set("skyline",new Pc.generic.ns.skyline(this,{texture:new o.Texture(t,new o.Rectangle(98,2,9,73)),slices:[0,9,0,0],height:300})),this.elements.set("stackhint",new Pc.generic.ns.stackhint(this,{texture:new o.Texture(t,new o.Rectangle(177,152,64,100)),slices:[31,35,31,0],offsets:[0,30.5,0,0],height:300,tint:16756224})),this.elements.set("garbagedangericon",new Pc.generic.ns.garbagedangericon(this,{texture:new o.Texture(t,new o.Rectangle(2,118,92,92)),scale:2})),this.elements.set("targeticon",new Pc.generic.ns.targeticon(this,{texture:new o.Texture(t,new o.Rectangle(98,100,69,69)),scale:4})),this.elements.set("enemyicon",new Pc.generic.ns.targeticon(this,{texture:new o.Texture(t,new o.Rectangle(256,15,43,43)),scale:4})),this.elements.set("falling",new Pc.generic.ns.falling(this,{})),this.elements.set("border",new Pc.generic.ns.border(this,{texture:new o.Texture(t,new o.Rectangle(111,2,27,18)),slices:[9,0,9,9],offsets:[9,0,9,9]})),this.elements.set("replaytag",new Pc.generic.ns.replaytag(this,{texture:new o.Texture(this.textures.get("queue"),new o.Rectangle(2,294,396,77))})),this.progressive.set("replaytag",this.elements.get("replaytag")),this.elements.set("backer",new Pc.generic.ns.backer(this,{font_opts:{}})),this.progressive.set("backer",this.elements.get("backer")),this.elements.set("zen",new Pc.generic.ns.zen(this,{font_opts_score:{},font_opts_level:{},font_opts_level_hiero:{}})),this.elements.set("b2b",new Pc.generic.ns.b2b(this,{texture:new o.Texture(t,new o.Rectangle(2,214,92,92)),font_opts:{},size:22,y:220})),this.progressive.set("b2b",this.elements.get("b2b")),this.elements.set("b2bdistance",new Pc.generic.ns.b2bdistance(this,{texture:new o.Texture(t,new o.Rectangle(2,214,92,92)),font_opts:{},scale:2})),this.progressive.set("b2bdistance",this.elements.get("b2bdistance")),this.S.setoptions.slot_counter1&&this.elements.set("counter1",new Pc.generic.ns.counter(this,{font_opts_title:{},font_opts_value:{},font_opts_subtitle:{},has_subtitle:!1,side:"left",y:_c.x*Math.min(30,Math.max(20,this.ctx.H))-55})),this.S.setoptions.slot_counter2&&this.elements.set("counter2",new Pc.generic.ns.counter(this,{font_opts_title:{},font_opts_value:{},font_opts_subtitle:{},has_subtitle:!1,side:"left",y:_c.x*Math.min(30,Math.max(20,this.ctx.H))-125})),this.S.setoptions.slot_counter3&&this.elements.set("counter3",new Pc.generic.ns.counter(this,{font_opts_title:{},font_opts_value:{},font_opts_subtitle:{},has_subtitle:!1,side:"left",y:_c.x*Math.min(30,Math.max(20,this.ctx.H))-195})),this.S.setoptions.slot_counter4&&this.elements.set("counter4",new Pc.generic.ns.counter(this,{font_opts_title:{},font_opts_value:{},font_opts_subtitle:{},has_subtitle:!1,side:"left",y:_c.x*Math.min(30,Math.max(20,this.ctx.H))-265})),this.S.setoptions.slot_counter5&&(this.elements.set("counter5",new Pc.generic.ns.counter(this,{font_opts_title:{},font_opts_value:{},font_opts_subtitle:{},has_subtitle:!0,hide_during_tutorial:!0,side:"right",y:!1!==this.S.setoptions.display_next?40+3*_c.x*(this.S.setoptions.nextcount||5):4})),this.progressive.set("counter5",this.elements.get("counter5"))),this.S.setoptions.slot_bar1){const e=new o.Texture(t,new o.Rectangle(111,88,60,8)),n=new o.Texture(t,new o.Rectangle(175,88,60,60)),s=new o.Texture(t,new o.Rectangle(111,24,60,60)),i={slices:[6,12,6,6],offsets:[0,0,0,0]},a={inactive:{tex:n,color:16717824,flash_color:16545127,...i},sleeping:{tex:n,color:9342606,flash_color:13947088,...i},caution:{tex:n,color:14734351,flash_color:15986871,...i},danger:{tex:n,color:16717824,flash_color:16545127,...i},spawn:{tex:s,color:16717824,flash_color:16545127,...i}},r={inactive:{tex:n,color:16717824,flash_color:16545127,...i},sleeping:{tex:n,color:9342606,flash_color:13947088,...i},caution:{tex:n,color:14734351,flash_color:15986871,...i},danger:{tex:n,color:9964287,flash_color:11617791,...i},spawn:{tex:s,color:9964287,flash_color:11617791,...i}};this.elements.set("bar1",new Pc.generic.ns.bar_segmented(this,{side:"left",bar_texture:new o.Texture(t,new o.Rectangle(142,2,27,18)),bar_slices:[9,0,9,9],bar_offsets:[9,0,9,9],offset:this.barWidthOffset,tickers:{garbagecap:{texture:e},garbageabsolutecap:{texture:e,color:16717824}},generic_flash_color:65460,styles:{garbage:a,corruption:r}})),this.progressive.set("bar1",this.elements.get("bar1"))}if(this.S.setoptions.slot_bar2){const e=[12078599,16763904];this.elements.set("bar2",new Pc.generic.ns.bar_smooth(this,{side:"right",bar_texture:new o.Texture(t,new o.Rectangle(173,2,27,18)),bar_slices:[9,0,9,9],bar_offsets:[9,0,9,9],offset:this.barWidthOffset,fill_texture:new o.Texture(t,new o.Rectangle(175,24,60,60)),fill_slices:[0,30,0,0],fill_offsets:[0,30,0,0],tickers:{generic:{texture:new o.Texture(t,new o.Rectangle(111,88,60,8)),color:16777215}},colors:e,flash_color:16763904})),this.progressive.set("bar2",this.elements.get("bar2"))}this.IsFullMode()&&(this.effects.set("popup_offence",new Pc.generic.ns.popup_offence(this,{font_opts:{}})),this.progressive.set("popup_offence",this.effects.get("popup_offence")),this.effects.set("popup_defense",new Pc.generic.ns.popup_defense(this,{font_opts:{}})),this.effects.set("clear",new Pc.generic.ns.splash(this,{size:45,color:16777215,y:170,animation:"normal",font_opts:{}})),this.effects.set("tspin",new Pc.generic.ns.splash(this,{size:30,color:16777215,y:140,animation:"normal",font_opts:{}})),this.effects.set("also",new Pc.generic.ns.splash(this,{size:30,color:16767332,y:220,animation:"normal",font_opts:{}})),this.effects.set("combo",new Pc.generic.ns.splash(this,{size:60,color:16777215,y:255,animation:"bounce",font_opts:{}})),this.effects.set("countdown",new Pc.generic.ns.shout(this,{size:120,color:16762368,y:ws(_c.x*this.ctx.Hh),font_opts:{},animation:{0:{"scale.x":.9,"scale.y":.9,alpha:0,weight:630},.05:{"scale.x":1.1,"scale.y":1.1,alpha:1,weight:700},.3:{"scale.x":1,"scale.y":1,alpha:.95,weight:665},1:{"scale.x":.9,"scale.y":.9,alpha:0,weight:0}},animationDuration:2.5,flatAnimationDuration:.75,animationEasing:a(.1,.38,0,.88),hasShadow:!0,shadowColor:2432256,animationShadow:{0:{"scale.x":1,"scale.y":1,alpha:.8,weight:560},.6:{"scale.x":2.2,"scale.y":2.2,alpha:.5,weight:350},1:{"scale.x":3,"scale.y":3,alpha:0,weight:0}},animationShadowDuration:2,animationShadowEasing:a(.1,.38,0,.88)})),this.effects.set("countdown_stride",new Pc.generic.ns.shout(this,{size:120,color:16762368,y:ws(_c.x*this.ctx.Hh),font_opts:{},animation:{0:{"scale.x":.9,"scale.y":.9,alpha:0,weight:630},.05:{"scale.x":1.1,"scale.y":1.1,alpha:1,weight:700},.3:{"scale.x":1,"scale.y":1,alpha:.95,weight:665},1:{"scale.x":.9,"scale.y":.9,alpha:0,weight:0}},animationDuration:1.25,flatAnimationDuration:.5,animationEasing:a(.1,.38,0,.88),hasShadow:!0,shadowColor:2432256,animationShadow:{0:{"scale.x":1,"scale.y":1,alpha:.8,weight:560},.6:{"scale.x":2.2,"scale.y":2.2,alpha:.5,weight:350},1:{"scale.x":3,"scale.y":3,alpha:0,weight:0}},animationShadowDuration:1,animationShadowEasing:a(.1,.38,0,.88)})),this.effects.set("levelup",new Pc.generic.ns.shout(this,{size:120,color:6256003,y:ws(_c.x*(this.ctx.Hh+5)),font_opts:{},animation:{0:{y:ws(_c.x*(this.ctx.Hh+5)),alpha:0,weight:0},.05:{y:ws(_c.x*(this.ctx.Hh+4.5)),alpha:1,weight:700},1:{y:ws(_c.x*(this.ctx.Hh-5)),alpha:0,weight:0}},animationDuration:1.5,animationEasing:a(.2,.65,.88,.64),hasShadow:!1})),this.effects.set("timeleft",new Pc.generic.ns.shout(this,{size:40,color:16732200,y:ws(_c.x*this.ctx.H/4),font_opts:{},animation:{0:{alpha:0,weight:0,letterSpacing:0,tint:16777215},.05:{alpha:1,weight:700,letterSpacing:.25,tint:16777215},.8:{alpha:1,weight:700,letterSpacing:5,tint:16732200},1:{alpha:0,weight:0,letterSpacing:8,tint:12067584}},animationDuration:4,animationEasing:a(.2,.65,.88,.64),hasShadow:!1})),this.effects.set("clutch",new Pc.generic.ns.shout(this,{size:30,color:16771199,y:ws(-1*_c.x),font_opts:{},animation:{0:{alpha:1.5,weight:900,letterSpacing:0},.05:{alpha:1.5,weight:900,letterSpacing:30},1:{alpha:0,weight:0,letterSpacing:50}},animationDuration:1,animationEasing:a(.2,.65,.88,.64),hasShadow:!1})),this.effects.set("allclear",new Pc.generic.ns.shout(this,{size:60,color:16777215,y:ws(_c.x*this.ctx.Hh),font_opts:{},animation:{0:{rotation:-10,"scale.x":0,"scale.y":0,alpha:1,weight:700,tint:16777215},.1:{rotation:0,"scale.x":1.4,"scale.y":1.4,alpha:1,weight:700,tint:16737894},.15:{rotation:0,"scale.x":1.3,"scale.y":1.3,alpha:1,weight:700,tint:16777215},.8:{rotation:0,"scale.x":1,"scale.y":1,alpha:.9,weight:630,tint:16753152},1:{rotation:0,"scale.x":.5,"scale.y":.5,alpha:0,weight:0,tint:16777215}},animationDuration:5,animationEasing:a(.06,.18,.65,1.01),hasShadow:!0,shadowColor:2235150,animationShadow:{0:{"scale.x":1,"scale.y":1,alpha:0,weight:0},.09:{"scale.x":1,"scale.y":1,alpha:0,weight:0},.1:{"scale.x":1,"scale.y":1,alpha:1,weight:700},1:{"scale.x":5,"scale.y":5,alpha:0,weight:0}},animationShadowDuration:5,animationShadowEasing:a(.06,.18,.65,1.01)})),this.effects.set("zenlevel",new Pc.generic.ns.shout(this,{size:60,color:16777215,y:ws(_c.x*this.ctx.Hh),font_opts:{},animation:{0:{"scale.x":2.5,"scale.y":0,alpha:1,weight:700,tint:16777215},.05:{"scale.x":.8,"scale.y":1.9,alpha:1,weight:700,tint:16755370},.1:{"scale.x":1.4,"scale.y":1.4,alpha:1,weight:700,tint:16737894},.15:{"scale.x":1.3,"scale.y":1.3,alpha:1,weight:700,tint:16777215},1:{"scale.x":1,"scale.y":1,alpha:.9,weight:630,tint:16753152}},animationDuration:5,animationEasing:a(.06,.18,.65,1.01),hasShadow:!0,shadowColor:2235150,animationShadow:{0:{"scale.x":1,"scale.y":1,alpha:0,weight:0},.09:{"scale.x":1,"scale.y":1,alpha:0,weight:0},.1:{"scale.x":1,"scale.y":1,alpha:1,weight:700},1:{"scale.x":5,"scale.y":5,alpha:0,weight:0}},animationShadowDuration:5,animationShadowEasing:a(.06,.18,.65,1.01)})),this.effects.set("duorevive",new Pc.generic.ns.shout(this,{size:60,color:16777215,y:ws(_c.x*this.ctx.Hh),font_opts:{},animation:{0:{"scale.x":2.5,"scale.y":0,alpha:1,weight:700,tint:16777215},.1:{"scale.x":.8,"scale.y":1.9,alpha:1,weight:700,tint:16755370},.2:{"scale.x":1.4,"scale.y":1.4,alpha:1,weight:700,tint:16737894},.3:{"scale.x":1.3,"scale.y":1.3,alpha:1,weight:700,tint:16777215},.8:{"scale.x":1,"scale.y":1,alpha:.9,weight:630,tint:16752640},1:{"scale.x":.9,"scale.y":.9,alpha:0,weight:100,tint:16744448}},animationDuration:2.5,animationEasing:a(.06,.18,.65,1.01),hasShadow:!0,shadowColor:2235150,animationShadow:{0:{"scale.x":1,"scale.y":1,alpha:0,weight:0},.2:{"scale.x":1,"scale.y":1,alpha:0,weight:0},.4:{"scale.x":1,"scale.y":1,alpha:1,weight:700},1:{"scale.x":5,"scale.y":5,alpha:0,weight:0}},animationShadowDuration:2.5,animationShadowEasing:a(.06,.18,.65,1.01)})),this.effects.set("undoredo",new Pc.generic.ns.undoredo(this,{texture:new o.Texture(t,new o.Rectangle(98,171,69,69)),scale:2.5}))),this.actorfactories.set("wound_timer",new Pc.generic.ns.factory_actor(this,{font_opts:{}},Pc.generic.ns.wound_timer)),this.actorfactories.set("voidhole",new Pc.generic.ns.factory_actor(this,{},Pc.generic.ns.voidhole))}},Pc.generic.ns.factory_actor=class extends Dc{create(e,t,n=!1){const s=new this.actorClass(this.parent,{...this.options,...e},t);return s.create(n),s}},Pc.generic.ns.wound_timer=class extends Ec{_animID=null;_t=0;kuros=[];static decideText(e){switch(e.type){case"time":if("INF"===e.amt)return"";if(e.amt>90)return Math.ceil(e.amt/60);{const t=6*Math.ceil(e.amt/6);return`${Math.floor(t/60)}\f3.${t%60/6}`}case"clears":return e.amt;default:return"???"}}static decideTintAndSpeed(e){let t=0;switch(e.type){case"time":t="INF"===e.amt?0:Math.max(0,Math.min(1,Math.pow(1-e.amt/3600,4)));break;case"clears":t=Math.max(0,Math.min(1,Math.pow(1-e.amt/15,2)))}return{r:Math.round(255*t),b:83+(t<.5?Math.round(130*t*2):Math.round(130*(1-t)*2)),speed:.1+.9*Math.pow(t,1.5)}}create(e=!1){if("full"===this.parent.H.displaymode){if(this.data.data.firstOfRow){this.container=new o.Container,this.container.position.set(0,ws(_c.x*(this.data.y-this.parent.ctx.B))),this.container.scale.set(ws(1)),this.parent.H.holder.addChild(this.container),this.kuros=[];for(let e=0;e<this.parent.ctx.W;e++){const t=o.Sprite.from("/res/wound-tile.png");t.anchor.set(.5,.5),t.position.set((e+.5)*_c.x,.5*_c.x),t.scale.set(_c.x/64),t.angle=90*Math.floor(4*Math.random()),t.tint=7864531,this.container.addChild(t),this.kuros.push([t,Math.random()])}}this.text=new d.Text(Pc.generic.ns.wound_timer.decideText(this.data.data),{font:Rl.get("seg"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:ws(48),weight:520,tint:16777215,fillAlpha:1,outlineAlpha:1,outlineWeight:750,letterSpacing:4,sharpness:.95,outlineTint:6360360,anchor:[.5,.5],misalignment:[0,0,.1],...this.options.font_opts}),this.text.position.set(ws(_c.x*(this.data.x+.5)),ws(_c.x*(this.data.y-this.parent.ctx.B+.5))),this.text.zIndex=5,this.parent.H.holder.addChild(this.text),e&&this.action("bad")}}delete(){this.container&&!this.container._destroyed&&(this.container.destroy(),this.container=null),this.text&&!this.text._destroyed&&(this.text.destroy(),this.text=null)}action(e){if(this.text&&!this.text._destroyed&&"minimal"!==ot.video.graphics)switch(null!==this._animID&&dc.stop(this._animID,1),e){case"good":this.text.misalignmentSeed=Math.floor(1e6*Math.random()),this._animID=dc.animate(this.text,{0:{"scale.x":1,"scale.y":1,outlineWeight:750},.5:{"scale.x":1.3,"scale.y":1.3,outlineWeight:980},1:{"scale.x":1,"scale.y":1,outlineWeight:750}},.2,a(.04,.62,.63,.42));break;case"bad":this._animID=dc.animate(this.text,{0:{"scale.x":0,"scale.y":0,outlineWeight:750},.5:{"scale.x":2,"scale.y":2,outlineWeight:850},1:{"scale.x":1,"scale.y":1,outlineWeight:750}},.5,a(0,.76,.9,.25)),["medium","high","ultra"].includes(ot.video.graphics)&&requestAnimationFrame((()=>{if(!this.container||this.container._destroyed)return;const{r:e,b:t}=Pc.generic.ns.wound_timer.decideTintAndSpeed(this.data.data),n=nc(this.container,_c.x*this.parent.ctx.Wh,.5*_c.x);xl.play("wound_spawn",{x:n.x,y:n.y,s:this.parent.ctx.hm.S(),w:this.parent.ctx.W,tint:e<<16|t})}));break;case"clear":if(!this.container||this.container._destroyed)return;if(["medium","high","ultra"].includes(ot.video.graphics)){const e=nc(this.container,_c.x*this.parent.ctx.Wh,.5*_c.x);xl.play("wound_clear",{x:e.x,y:e.y,s:this.parent.ctx.hm.S(),w:this.parent.ctx.W})}}}progress(e){if(!this.text||this.text._destroyed)return;const{r:t,b:n,speed:s}=Pc.generic.ns.wound_timer.decideTintAndSpeed(this.data.data);if(this._t+=s*e,this.container){for(const[e,i]of this.kuros){const a="minimal"===ot.video.graphics?.5*i+.3:.75-.25*s+Math.sin(.1*this._t+i*o.PI_2)*(.25+.25*s);e.tint=Math.round(t*a)<<16|Math.round(n*a)}this.container.position.set(0,ws(_c.x*(this.data.y-this.parent.ctx.B)))}if(this.text.text=Pc.generic.ns.wound_timer.decideText(this.data.data),this.text.position.set(ws(_c.x*(this.data.x+.5)),ws(_c.x*(this.data.y-this.parent.ctx.B+.5))),!["minimal","low"].includes(ot.video.graphics)&&(this.text.outlineTint=t<<16|n,this.text.outlineAlpha=.6+.4*Math.sin(.15*this._t),this.container)){const i=nc(this.container,_c.x*this.parent.ctx.Wh,.5*_c.x);xl.play("wound",{x:i.x,y:i.y,s:this.parent.ctx.hm.S(),w:this.parent.ctx.W,tint:t<<16|n,speed:s,dT:e})}}},Pc.generic.ns.voidhole=class extends Ec{static decideTintAndSpeed(e){let t=0;if("line"===e.type)t=Math.max(0,Math.min(1,Math.pow(1-(e.amt-e.nom)/20,2)));return{r:Math.round(255*t),b:83+(t<.5?Math.round(130*t*2):Math.round(130*(1-t)*2)),speed:.1+.9*Math.pow(t,1.5)}}_t=0;create(e=!1){if("full"===this.parent.H.displaymode){if(this.container=new o.Container,this.container.position.set(0,ws(_c.x*(this.data.y-this.parent.ctx.B))),this.container.scale.set(ws(1)),this.parent.H.holder.addChild(this.container),this.kuros=[],"line"===this.data.data?.type)for(let e=0;e<this.parent.ctx.W;e++){if(this.data.x===e)continue;const t=o.Sprite.from("/res/wound-tile.png");t.anchor.set(.5,.5),t.position.set((e+.5)*_c.x,.5*_c.x),t.scale.set(_c.x/64),t.angle=90*Math.floor(4*Math.random()),t.tint=7864531,this.container.addChild(t),this.kuros.push([t,Math.random()])}this.spr=o.Sprite.from("/res/voidhole.png"),this.spr.position.set((this.data.x+.5)*_c.x,.5*_c.x),this.spr.scale.set(_c.x/64),this.spr.anchor.set(.5,.5),this.container.addChild(this.spr),this.spr2=o.Sprite.from("/res/voidhole-inner.png"),this.spr2.position.set((this.data.x+.5)*_c.x,.5*_c.x),this.spr2.scale.set(_c.x/64),this.spr2.anchor.set(.5,.5),this.container.addChild(this.spr2),["medium","high","ultra"].includes(ot.video.graphics)&&(this.spr2.blendMode=o.BLEND_MODES.ADD,this.spawner=gl.createSpawner({texture:"/res/particles/vbox.png",tint:[16711782,6684927],lifetime:[.8,2.2],scale:{from:0,to:[.2,1]},scalemultiplier:{from:2,to:0},speed:{from:[0,20],to:[0,20]}},{x:0,y:0,amount:xl.utils.freq(3),lifetime:-1,shape:"disk",radius:_c.x,directionOverride:180}),this.spawner2=gl.createSpawner({texture:["/res/particles/wound-spark-1.png","/res/particles/wound-spark-2.png","/res/particles/wound-spark-3.png"],tint:[16746936,12093951],lifetime:[.2,.4],alpha:{from:1,to:0},scale:[xl.utils.scale(.25),xl.utils.scale(.5)],angleParaxial:!0,blendmode:o.BLEND_MODES.ADD},{x:0,y:0,lifetime:-1,amount:xl.utils.freq(1),shape:"disk",radius:_c.x}),this.spr.addChild(this.spawner),this.spr.addChild(this.spawner2)),this.rotationSpeed=.1+.05*Math.random()}}delete(){this.container&&!this.container._destroyed&&(this.container.destroy(),this.container=null,this.spawner&&(this.spawner.destroy(),this.spawner2.destroy(),this.spawner=null,this.spawner2=null))}action(){this.rotationSpeed=.5}progress(e){if(!this.container||this.container._destroyed)return;if("minimal"===ot.video.graphics)return;const{r:t,b:n,speed:s}=Pc.generic.ns.voidhole.decideTintAndSpeed(this.data.data);this._t+=s*e;for(const[e,i]of this.kuros){const a="minimal"===ot.video.graphics?.5*i+.3:.75-.25*s+Math.sin(.1*this._t+i*o.PI_2)*(.25+.25*s);e.tint=Math.round(t*a)<<16|Math.round(n*a)}this.spr2.rotation-=this.rotationSpeed*e,this.spr.position.set((this.data.x+.5)*_c.x,.5*_c.x),this.spr2.position.set((this.data.x+.5)*_c.x,.5*_c.x),this.container.position.set(0,ws(_c.x*(this.data.y-this.parent.ctx.B))),this.rotationSpeed>.02&&(this.rotationSpeed=Math.max(.02,this.rotationSpeed-.005*e))}},Pc.generic.ns.background=class extends zc{create(){const e=this.options.offsets_tiny||[0,0,0,0];return this.parent.IsTinyMode()?(this.nsp=new o.NineSlicePlane(this.options.texture_tiny,...this.options.slices_tiny.map((e=>e?e+2:e))),this.nsp.width=_c.x*this.parent.ctx.W+e[0]+e[2],this.nsp.height=_c.x*this.parent.ctx.H+e[1]+e[3],this.nsp.position.set(ws(-e[0]),ws(-e[1]))):(this.nsp=new o.NineSlicePlane(this.options.texture,...this.options.slices.map((e=>e?e+2:e))),this.nsp.width=_c.x*this.parent.ctx.W+2,this.nsp.height=_c.x*this.parent.ctx.H+1,this.nsp.position.set(ws(-1),0),this.nsp.alpha=void 0===ot.video.boardopacity?.85:ot.video.boardopacity),this.nsp.scale.set(ws(1)),this.parent.H.holder.addChild(this.nsp),this.parent.H.tintables.push(this.nsp),this.nsp}},Pc.generic.ns.grid=class extends zc{create(){if(!this.parent.IsFullMode())return;this.container=new o.Container,this.container.scale.set(zs(1)),this.container.alpha=void 0===ot.video.gridopacity?.1:ot.video.gridopacity;const e={top:{left:new o.Texture(this.options.texture,new o.Rectangle(2,2,184,184)),center:new o.Texture(this.options.texture,new o.Rectangle(190,2,184,184)),right:new o.Texture(this.options.texture,new o.Rectangle(378,2,184,184)),right3:new o.Texture(this.options.texture,new o.Rectangle(566,2,276,184))},middle:{left:new o.Texture(this.options.texture,new o.Rectangle(2,190,184,184)),center:new o.Texture(this.options.texture,new o.Rectangle(190,190,184,184)),right:new o.Texture(this.options.texture,new o.Rectangle(378,190,184,184)),right3:new o.Texture(this.options.texture,new o.Rectangle(566,190,276,184))},bottom:{left:new o.Texture(this.options.texture,new o.Rectangle(2,378,184,184)),left3:new o.Texture(this.options.texture,new o.Rectangle(2,566,184,276)),center:new o.Texture(this.options.texture,new o.Rectangle(190,378,184,184)),center3:new o.Texture(this.options.texture,new o.Rectangle(190,566,184,276)),right:new o.Texture(this.options.texture,new o.Rectangle(378,378,184,184)),right3wide:new o.Texture(this.options.texture,new o.Rectangle(566,378,276,184)),right3tall:new o.Texture(this.options.texture,new o.Rectangle(378,566,184,276)),right3max:new o.Texture(this.options.texture,new o.Rectangle(566,566,276,276))}},t=!!(this.parent.ctx.W%2),n=!!(this.parent.ctx.H%2);for(let s=0;s<this.parent.ctx.H-1;s+=2)for(let i=0;i<this.parent.ctx.W-1;i+=2){let a="middle";0===s&&(a="top"),s===this.parent.ctx.H-(n?3:2)&&(a="bottom");let r="center";0===i&&(r="left"),i===this.parent.ctx.W-(t?3:2)&&(r="right"),"top"===a&&"right"===r&&t||"middle"===a&&"right"===r&&t?r="right3":"bottom"===a&&("left"===r&&n?r="left3":"center"===r&&n?r="center3":"right"===r&&(n&&t?r="right3max":n?r="right3tall":t&&(r="right3wide")));const l=new o.Sprite(e[a][r]);l.position.set(Ss(_c.x*i),Ss(_c.x*s)),this.container.addChild(l),this.parent.H.tintables.push(l)}return this.parent.H.holder.addChild(this.container),this.container}update(e){if(!this.container)return;const t=void 0===ot.video.gridopacity?.1:parseFloat(ot.video.gridopacity);this.container.alpha=Math.min(1,t+.05*e)}},Pc.generic.ns.border=class extends zc{create(){if(this.parent.IsTinyMode())return;const e=this.options.offsets||[0,0,0,0];return this.nsp=new o.NineSlicePlane(this.options.texture,...this.options.slices.map((e=>e?e+2:e))),this.nsp.width=Ss(_c.x*this.parent.ctx.W)+e[0]+e[2],this.nsp.height=Ss(_c.x*this.parent.ctx.H)+e[1]+e[3],this.nsp.position.set(-zs(e[0]),-zs(e[1])),this.nsp.scale.set(zs(1)),this.parent.H.holder.addChild(this.nsp),this.parent.H.tintables.push(this.nsp),this}},Pc.generic.ns.bar=class extends zc{constructor(e,t){super(e,t),this.d={},this.d.tickers=new Map}create(){if(this.parent.IsTinyMode())return;const e=this.options.bar_offsets||[0,0,0,0];this.nsp=new o.NineSlicePlane(this.options.bar_texture,...this.options.bar_slices.map((e=>e?e+2:e))),this.nsp.width=Ss(this.parent.barWidth)+e[0]+e[2],this.nsp.height=Ss(_c.x*this.parent.ctx.H)+e[1]+e[3];let t=0;t="right"===this.options.side?ws(_c.x*this.parent.ctx.W)+zs(this.options.offset):-ws(this.parent.barWidth)-zs(this.options.offset),t-=zs(e[0]),this.nsp.position.set(t,-zs(e[1])),this.nsp.scale.set(zs(1)),this.parent.H.holder.addChild(this.nsp),this.parent.H.tintables.push(this.nsp),this.container=new o.Container,this.container.position.set(e[0],e[1]),this.nsp.addChild(this.container),this.container_extra=new o.Container,this.container_extra.position.set(e[0],e[1]),this.nsp.addChild(this.container_extra);for(const[t,n]of Object.entries(this.options.tickers)){const s=new o.Sprite(n.texture);s.anchor.set(0,.5),s.position.set(e[0],Ss(_c.x*this.parent.ctx.H)+e[1]),s.alpha=0,s.v_appr=0,s.v_now=0,n.color?s.tint=n.color:this.parent.H.tintables.push(s),this.nsp.addChild(s),this.d.tickers.set(t,s)}}update(e,t){if(!this.parent.IsTinyMode())switch(e){case"ticker":{const{id:e,value:n}=t;if(!this.d.tickers.has(e))return;this.d.tickers.get(e).v_now=n;break}}}progress(e){if(!this.parent.IsTinyMode())for(const t of this.d.tickers.values())t.v_appr!==t.v_now&&(t.v_appr="minimal"===ot.video.graphics||Math.abs(t.v_appr-t.v_now)<2e-4?t.v_now:t.v_now+(t.v_appr-t.v_now)*Math.pow(.9,e),t.position.y=Ss(_c.x*(this.parent.ctx.H-this.parent.ctx.H*t.v_appr))+(this.options.bar_offsets?.[1]??0),t.alpha=1,t.v_appr<1/40?t.alpha=Math.max(0,40*t.v_appr):t.v_appr>.975&&(t.alpha=Math.max(0,40-40*t.v_appr)))}},Pc.generic.ns.bar_smooth=class extends Pc.generic.ns.bar{create(){this.parent.IsTinyMode()||(super.create(),this.d.value=0,this.d.value_appr=0)}update(e,t){if(!this.parent.IsTinyMode()&&(super.update(e,t),"simple"===e))t!==this.d.value&&(this.d.value=t)}action(e,t){if(!this.parent.IsTinyMode()&&"flash"===e)this._flashBar(this.options.flash_color)}progress(e){if(!this.parent.IsTinyMode()&&(super.progress(e),this.d.value_appr!==this.d.value&&(this.d.value_appr="minimal"===ot.video.graphics||Math.abs(this.d.value_appr-this.d.value)<2e-4?this.d.value:this.d.value+(this.d.value_appr-this.d.value)*Math.pow(.9,e),this._updateContents()),this.parent.S.playing&&this.parent.IsFullMode()&&this.d.value_appr)){const t=nc(this.container,Ss(this.parent.barWidth/2),Ss(_c.x*this.parent.ctx.H)-Ss(this._getBarHeight(this.d.value_appr)));xl.play("bar_sparks",{x:t.x,y:t.y,w:Ss(this.parent.barWidth/2),color:this.options.colors[0],dT:e})}}_updateContents(){const e=this.options.fill_offsets||[0,0,0,0],t=this.options.fill_slices.map((e=>e?e+2:e));tc(this.container);let n=0,s=this.d.value_appr;for(s>12&&(s=6+s%6);s>0;){const i=this._getBarHeight(s),a=new o.NineSlicePlane(this.options.fill_texture,...t);a.width=Ss(this.parent.barWidth)+e[0]+e[2],a.height=Ss(i)+e[1]+e[3],a.position.set(0,Ss(_c.x*this.parent.ctx.H)),a.pivot.set(0,Ss(i)+e[1]+e[3]),a.tint=this.options.colors[n%this.options.colors.length],this.container.addChild(a),s--,n++}}_getBarHeight(e){return _c.x*Math.min(Math.min(1,e)+(e-Math.min(1,e))/50,3)*this.parent.ctx.H}_flashBar(e){if("minimal"===ot.video.graphics||void 0===this.container_extra)return;if(!this.parent.IsFullMode())return;const t=new o.NineSlicePlane(o.Texture.WHITE,0,0,0,0);t.width=Ss(this.parent.barWidth),t.height=Ss(_c.x*this.parent.ctx.H),t.position.set(Ss(this.parent.barWidth)/2,Ss(_c.x*this.parent.ctx.W)),t.pivot.set(Ss(this.parent.barWidth)/2,Ss(_c.x*this.parent.ctx.H)/2),t.tint=e,this.container_extra.addChild(t),dc.animate(t,{0:{"scale.x":1,"scale.y":1,alpha:1},1:{"scale.x":2,"scale.y":1.2,alpha:0}},.3,a(.05,.81,.96,.96),(()=>{t.destroy()}))}},Pc.generic.ns.bar_segmented=class extends Pc.generic.ns.bar{create(){this.parent.IsTinyMode()||(super.create(),this.d.segments=new Map,this.d.dirty=!0)}update(e,t){if(!this.parent.IsTinyMode())switch(super.update(e,t),e){case"upsert":this._upsertSegment(t);break;case"clear":this.d.segments.clear(),this.d.dirty=!0}}action(e,t){if(!this.parent.IsTinyMode())switch(e){case"flash":this._flashBar(this.options.generic_flash_color,t);break;case"forceupdate":for(const e of this.d.segments.values())e.flagFallDown=!1,e.flagAppear=!1,e.flagRestyled=!1;this._updateContents()}}progress(e){if(!this.parent.IsTinyMode()&&(super.progress(e),this.d.dirty&&this._updateContents(),["medium","high","ultra"].includes(ot.video.graphics)))for(const t of this.d.segments.values()){if("corruption"!==t.type)continue;if("spawn"!==t.style&&"danger"!==t.style)continue;const n=nc(this.container,Ss(this.parent.barWidth/2),t.y-Ss(t.h/2));xl.play("garbage_corruption",{x:n.x,y:n.y,scale:.75+.1*(t.h/_c.x-1),h:t.h,tint:[16746936,12093951],speed:.05,dT:e})}}_upsertSegment(e){if(this.d.segments.has(e.id)){const t=this.d.segments.get(e.id),n={...t,...e};let s=!1;if(n.size<=0){this.d.segments.delete(e.id);let n=0;for(const[s,i]of this.d.segments)s>e.id&&(i.flagFallDown="minimal"!==ot.video.graphics,i.flagFallDownDistance=++n,i.flagFallDownAmount=(i.flagFallDownAmount||0)+t.size);return void(this.d.dirty=!0)}if(n.size<t.size){let i=1;for(const[s,o]of this.d.segments)s>e.id&&(o.flagFallDown="minimal"!==ot.video.graphics,o.flagFallDownDistance=++i,o.flagFallDownAmount=(o.flagFallDownAmount||0)+(t.size-n.size));n.flagFallDown="minimal"!==ot.video.graphics,n.flagFallDownDistance=1,n.flagFallDownAmount=(n.flagFallDownAmount||0)+(t.size-n.size),this.d.dirty=!0,s=!0}else n.size>t.size&&(this.d.dirty=!0,s=!0);n.style!==t.style&&(n.flagRestyled="minimal"!==ot.video.graphics,this.d.dirty=!0,s=!0),s&&this.d.segments.set(e.id,n)}else if(e.size>0){const t={style:"generic",...e,flagAppear:"minimal"!==ot.video.graphics};this.d.segments.set(e.id,t),this.d.dirty=!0}}_updateContents(){tc(this.container);let e=0;for(const t of this.d.segments.values()){const n=this._getBarHeight(t.size),s=this.options.styles[t.type][t.style],i=s.class||Pc.generic.ns.bar_segment;let o=Ss(_c.x*this.parent.ctx.H-e);t.y=o,t.h=n,t.flagFallDown?o-=Ss(_c.x*this.parent.ctx.H*(t.flagFallDownAmount||0)):t.flagAppear&&(o-=Ss(5*_c.x));const r=new i(this.parent,s.tex,...s.slices,Ss(this.parent.barWidth)+s.offsets[0]+s.offsets[2],Ss(n)+s.offsets[1]+s.offsets[3],t.color??s.color);if(r.position.set(0,o),r.pivot.set(0,Ss(n)+s.offsets[1]+s.offsets[3]),r.alpha=t.flagAppear?0:1,this.container.addChild(r),t.flagAppear?(dc.animate(r,{0:{y:Ss(_c.x*this.parent.ctx.H-e-3*_c.x),alpha:0},1:{y:Ss(_c.x*this.parent.ctx.H-e),alpha:1}},.25,a(.7,1.62,.63,.74)),t.flagAppear=!1):t.flagFallDown?(dc.animate(r,{0:{y:Ss(_c.x*this.parent.ctx.H-e-_c.x*this.parent.ctx.H*(t.flagFallDownAmount||0))},1:{y:Ss(_c.x*this.parent.ctx.H-e)}},.1+.02*t.flagFallDownDistance,a(.79,.09,.61,1.07)),t.flagFallDown=!1,t.flagFallDownDistance=0,t.flagFallDownAmount=0):t.flagRestyled&&(this._flashBar(s.flash_color,t.size,e),t.flagRestyled=!1),e+=n,e>_c.x*this.parent.ctx.H*2)break}this.d.dirty=!1}_getBarHeight(e){return _c.x*Math.min(3,e)*this.parent.ctx.H}_flashBar(e,{size:t,pos:n}){if("minimal"===ot.video.graphics||void 0===this.container_extra)return;if(!this.parent.IsFullMode())return;const s=this._getBarHeight(t),i=new o.NineSlicePlane(o.Texture.WHITE,0,0,0,0);i.width=Ss(this.parent.barWidth),i.height=Ss(s),i.position.set(Ss(this.parent.barWidth)/2,Ss(_c.x*this.parent.ctx.H-_c.x*n)-Ss(s)/2),i.pivot.set(Ss(this.parent.barWidth)/2,Ss(s)/2),i.tint=e,this.container_extra.addChild(i),dc.animate(i,{0:{"scale.x":1,"scale.y":1,alpha:1},1:{"scale.x":2,"scale.y":1.2,alpha:0}},.3,a(.05,.81,.96,.96),(()=>{i.destroy()}))}},Pc.generic.ns.bar_segment=class extends o.NineSlicePlane{constructor(e,t,n,s,i,o,a,r,l){super(t,n,s,i,o),this.ctx=e,this.width=a,this.height=r,this.tint=l}},Pc.generic.ns.boardsides=class extends zc{create(){this.parent.H.leftside.x=this.parent.S.setoptions.slot_bar1?-(ws(this.parent.barWidth)+zs(this.parent.barWidthOffset)):0,this.parent.H.rightside.x=this.parent.S.setoptions.slot_bar2?ws(_c.x*this.parent.ctx.W)+ws(this.parent.barWidth)+zs(this.parent.barWidthOffset):ws(_c.x*this.parent.ctx.W),this.parent.H.leftside.x-=zs(this.parent.sidesOffset),this.parent.H.rightside.x+=zs(this.parent.sidesOffset);let e=1;if(this.parent.ctx.H<20?e=this.parent.ctx.H/20:this.parent.ctx.H>30&&(e=this.parent.ctx.H/30),this.parent.H.leftside.scale.set(e),this.parent.H.rightside.scale.set(e),e<1){const t=.2*(zs(this.parent.sidesOffsetMixin)/e-zs(this.parent.sidesOffsetMixin));this.parent.H.leftside.x-=t,this.parent.H.rightside.x+=t}}},Pc.generic.ns.stack=class extends zc{create(){return this.stack=new o.Container,this.stack.position.set(0,0),this.parent.H.holder.addChild(this.stack),this.stack}},Pc.generic.ns.falling=class extends zc{create(){return this.falling=new o.Container,this.falling.position.set(0,0),this.parent.H.holder.addChild(this.falling),this.falling}},Pc.generic.ns.backer=class extends zc{create(){this.parent.IsFullMode()&&(!this.parent.S.setoptions.pro&&!this.parent.S.setoptions.zenith||this.parent.S.setoptions.display_replay||(this.text=new d.Text("",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:ws(138/this.parent.H.holderstate.asf),weight:600,tint:16777215,outlineTint:0,outlineWeight:900,outlineAlpha:1,alpha:.2,anchor:[.5,0],...this.options.font_opts}),this.text.position.set(ws(_c.x*this.parent.ctx.Wh),ws(3.25*_c.x/this.parent.H.holderstate.asf)),this.parent.H.holder.addChild(this.text),this.parent.H.tintables.push(this.text),["minimal","low"].includes(ot.video.graphics)||(this.activeFade=new Pc.generic.ns._helper_activefade({positions:[[this.parent.ctx.Wh-2,this.parent.ctx.B+4],[this.parent.ctx.Wh+0,this.parent.ctx.B+4],[this.parent.ctx.Wh+2,this.parent.ctx.B+4],[this.parent.ctx.Wh-3,this.parent.ctx.B+5],[this.parent.ctx.Wh-1,this.parent.ctx.B+5],[this.parent.ctx.Wh+1,this.parent.ctx.B+5]],elements:[this.text],alphaHigh:.2,alphaLow:.1,ctx:this.parent.ctx}))))}update(e){this.text&&(this.text.text=e)}progress(e){this.activeFade&&this.activeFade.progress(e)}},Pc.generic.ns.zen=class extends zc{create(){this.parent.IsFullMode()&&this.parent.S.setoptions.display_zen&&(this.text_score=new d.Text("0",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:ws(19),weight:600,tint:16777215,anchor:[.5,0],...this.options.font_opts_score}),this.text_score.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*this.parent.ctx.H+5)),this.parent.H.holder.addChild(this.text_score),this.parent.H.tintables.push(this.text_score),this.text_level=new d.Text("1",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:ws(38),weight:600,tint:16777215,anchor:[.5,0],...this.options.font_opts_level}),this.text_level.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*this.parent.ctx.H+28)),this.parent.H.holder.addChild(this.text_level),this.parent.H.tintables.push(this.text_level),this.text_level_hiero=new d.Text("",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:ws(19),weight:600,tint:16777215,anchor:[.5,0],...this.options.font_opts_level_hiero}),this.text_level_hiero.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*this.parent.ctx.H+64)),this.parent.H.holder.addChild(this.text_level_hiero),this.parent.H.tintables.push(this.text_level_hiero))}update(e,t){this.text_score&&(this.text_score.text=e.toLocaleString("en-US"),this.text_level.text=t,this.text_level_hiero.text=Mt(t))}},Pc.generic.ns.counter=class extends zc{create(){this.parent.IsFullMode()&&(this.text_title=new d.Text("",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:ws(20),weight:500,tint:16777215,anchor:["right"===this.options.side?0:1,0],...this.options.font_opts_title}),this.text_title.position.set(ws("right"===this.options.side?10:-10),ws(this.options.y)),("left"===this.options.side?this.parent.H.leftside:this.parent.H.rightside).addChild(this.text_title),this.parent.H.tintables.push(this.text_title),this.text_value=new d.Text("",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:ws(38),weight:600,tint:16777215,anchor:["right"===this.options.side?0:1,0],...this.options.font_opts_value}),this.text_value.position.set(ws("right"===this.options.side?10:-10),ws(this.options.y+23)),("left"===this.options.side?this.parent.H.leftside:this.parent.H.rightside).addChild(this.text_value),this.parent.H.tintables.push(this.text_value),this.options.has_subtitle&&(this.text_subtitle=new d.Text("",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:ws(20),weight:500,tint:16777215,anchor:["right"===this.options.side?0:1,0],...this.options.font_opts_subtitle}),this.text_subtitle.position.set(ws("right"===this.options.side?10:-10),ws(this.options.y+64)),("left"===this.options.side?this.parent.H.leftside:this.parent.H.rightside).addChild(this.text_subtitle),this.parent.H.tintables.push(this.text_subtitle)))}update(e,t,n){this.text_value&&(void 0!==e&&(this.text_value.text=e),void 0!==n&&(this.text_title.text=n),this.text_subtitle&&void 0!==t&&(this.text_subtitle.text=t))}progress(e){if(this.text_value&&this.options.hide_during_tutorial&&"guideline"===ot.controls.style&&!1!==this.parent.S.setoptions.display_hold&&!1!==this.parent.S.setoptions.allow_harddrop)if(2===this.parent.S.tutorial.stage)this.text_value.alpha=Math.max(0,this.text_value.alpha-.03*e),this.text_title.alpha=this.text_value.alpha,this.text_subtitle&&(this.text_subtitle.alpha=this.text_value.alpha);else if(this.parent.S.tutorial.stage>=3)this.text_value.alpha=0,this.text_title.alpha=0,this.text_subtitle&&(this.text_subtitle.alpha=0);else if(0===this.parent.S.tutorial.stage){this.text_value.alpha=1-Math.max(0,Math.min(1,5.75-(this.parent.ctx.esm.frame-this.parent.S.tutorial.finished)/180)),this.text_title.alpha=this.text_value.alpha,this.text_subtitle&&(this.text_subtitle.alpha=this.text_value.alpha)}}},Pc.generic.ns.stock=class extends zc{create(){if(!this.parent.IsTinyMode()){this.stock=new o.Container;for(let e=0;e<this.parent.S.stock;e++){const t=new o.Sprite(this.options.texture);t.width=_c.x,t.height=_c.x,t.anchor.set(.5,.5),t.position.set(ws(e*_c.x),0),this.stock.addChild(t)}return this.stock.position.set(ws(_c.x/2)*(this.parent.ctx.W-this.parent.S.stock)+ws(_c.x/2),ws(_c.x*this.parent.ctx.H+(this.parent.S.setoptions.display_username?36:10))+ws(_c.x/2)),this.parent.H.holder.addChild(this.stock),this.stock}}action(e,t){if(!this.parent.IsTinyMode())switch(e){case"drop":{if(!this.stock.children.length)return;const e=this.stock.children[this.stock.children.length-1];if(this.parent.IsFullMode()){const t=nc(e,0,0);xl.play("stock_explode",{x:t.x,y:t.y})}e.destroy(),dc.animate(this.stock,{0:{x:"inherit"},1:{x:`${ws(_c.x/2)*(this.parent.ctx.W-this.parent.S.stock)+ws(_c.x/2)}`}},1,a(.17,.67,.35,1));break}case"fire":{if(!this.parent.IsFullMode())return;if(!this.stock.children.length)return;const e=this.stock.children[this.stock.children.length-1];e.rotation+=Math.max(.03*t.dT,.1*e.rotation*t.dT);break}}}},Pc.generic.ns.b2b=class extends zc{_anims=[];_knownamt=0;_knowntint=0;_t=0;static _makeTint(e,t,n,s,i=!1){if(!n||t<s)return 16767332;for(const n of i?Pc.generic.ns.b2b.B2B_COLOR_GRADIENT_EVIL_BRIGHT:e?Pc.generic.ns.b2b.B2B_COLOR_GRADIENT_EVIL:Pc.generic.ns.b2b.B2B_COLOR_GRADIENT){if(t<n[0]||t>=n[1])continue;n[4]||(n[4]=[n[2]>>16,n[2]>>8&255,255&n[2],n[3]>>16,n[3]>>8&255,255&n[3]]);const e=(t-n[0])/(n[1]-n[0]);return Math.round(n[4][0]+e*(n[4][3]-n[4][0]))<<16|Math.round(n[4][1]+e*(n[4][4]-n[4][1]))<<8|Math.round(n[4][2]+e*(n[4][5]-n[4][2]))}return 16777215}static B2B_COLOR_GRADIENT=[[0,4,39423,65484,null],[4,8,65484,65280,null],[8,12,65280,16776960,null],[12,30,16776960,16711680,null],[30,60,16711680,16711935,null],[60,100,16711935,37375,null],[100,150,37375,9764836,null],[150,250,9764836,16768391,null],[250,500,16768391,16777215,null],[500,1/0,16777215,16777215,null]];static B2B_COLOR_GRADIENT_EVIL=[[0,4,1179739,9644031,null],[4,12,9644031,11536428,null],[12,26,11536428,16711837,null],[26,1/0,16711837,16711837,null]];static B2B_COLOR_GRADIENT_EVIL_BRIGHT=[[0,4,0,196630,null],[4,12,196630,1835046,null],[12,26,1835046,3080213,null],[26,1/0,3080213,3080213,null]];create(e){if(this.text)return;if(!this.parent.IsFullMode())return;const t=this.parent.S.setoptions.b2bcharge_at,n=this.parent.S.setoptions.b2bcharge_base,s=Pc.generic.ns.b2b._makeTint(this.options.evil,e,this.parent.S.setoptions.b2bcharging,t),i=this.options.evil&&!["minimal","low"].includes(ot.video.graphics)?Pc.generic.ns.b2b._makeTint(this.options.evil,e,this.parent.S.setoptions.b2bcharging,t,!0):s,a=Math.min(4,Math.max(1,(e-t+1)/(this.options.evil?4:6)));if(this._knownamt=e,this._knowntint=s,this.text=new d.Text(this.parent.S.setoptions.b2bcharging&&e>=t&&t===n+1?"B2B \fc3X":`B2B \fc3X\f5${e}`,{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:ws(this.options.size),weight:600,tint:s,anchor:[1,0],letterSpacing:10,...this.options.font_opts}),this.text.position.set(ws(-10),ws(this.options.y)),this.parent.H.leftside.addChild(this.text),this.parent.S.setoptions.b2bcharging){this.spr=new o.Sprite(this.options.texture),this.spr.anchor.set(.5,.5),this.spr.position.set(ws(-14-10*a),ws(this.options.y+9)),this.spr.scale.set(ws(this.options.size/50*a)),this.spr.tint=i,this.spr.alpha=e>=t+7-n||this.options.evil?1:.3,this.spr.visible=e>=t,this.parent.H.leftside.addChild(this.spr);const r=Math.max(2,`${e-t+1+n}`.length);this.chargetext=new d.Text(e-t+1+n,{font:Rl.get(this.options.evil?"seg":"hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:ws(this.options.size/(.5*r)*a)*(this.options.evil?1.3:1),weight:this.options.evil?520:750,letterSpacing:this.options.evil?4:0,outlineTint:this.options.evil?s:0,sharpness:this.options.evil?.95:.85,outlineWeight:900,outlineAlpha:1,tint:this.options.evil?16777215:s,anchor:this.options.evil?[.5,.5]:[.5,.4],misalignment:this.options.evil?[0,0,.1]:0}),this.chargetext.tint=this.options.evil?16777215:e>=t+7-n?0:s,this.chargetext.outlineTint=this.options.evil?s:e>=t+7-n?16777215:0,this.chargetext.visible=e>=t,this.chargetext.position.set(ws(-14-10*a),ws(this.options.y+10)),this.parent.H.leftside.addChild(this.chargetext),this.text.position.x=ws(e>=t?-15-35*a:-10)}}update(e,t){if(!this.parent.IsFullMode())return;if(!this.text){if(!["set","up","up_large","up_charged"].includes(e))return;if(this.create(t),!this.text)return}this._anims.forEach((e=>dc.stop(e,1))),this._anims.length=0;const n=this._knownamt;this._knownamt=t;const s=this.parent.S.setoptions.b2bcharge_at,i=this.parent.S.setoptions.b2bcharge_base,o=Pc.generic.ns.b2b._makeTint(this.options.evil,t,this.parent.S.setoptions.b2bcharging,s),r=this.options.evil&&!["minimal","low"].includes(ot.video.graphics)?Pc.generic.ns.b2b._makeTint(this.options.evil,t,this.parent.S.setoptions.b2bcharging,s,!0):o,l=Math.min(4,Math.max(1,(t-s+1)/(this.options.evil?4:6)));switch(this._knowntint=o,e){case"set":if(this.text.text=this.parent.S.setoptions.b2bcharging&&t>=s&&s===i+1?"B2B \fc3X":`B2B \fc3X\f5${t}`,this.text.alpha=1,this.text.weight=600,this.text.tint=o,this.alpha=1,this.text.letterSpacing=10,this.spr&&t>=s){this.spr.scale.set(ws(this.options.size/50*l)),this.spr.tint=r,this.spr.alpha=t>=s+7-i||this.options.evil?1:.3,this.spr.visible=!0,this.spr.position.x=ws(-14-10*l),this.chargetext.text=t-s+1+i,this.chargetext.misalignmentSeed=Math.floor(1e6*Math.random()),this.chargetext.tint=this.options.evil?16777215:t>=s+7-i?0:o,this.chargetext.outlineTint=this.options.evil?o:t>=s+7-i?16777215:0,this.chargetext.visible=!0,this.chargetext.position.x=ws(-14-10*l),this.text.position.x=ws(-25-25*l);const e=Math.max(2,`${t-s+1+i}`.length);this.chargetext.fontSize=ws(this.options.size/(.5*e)*l)*(this.options.evil?1.3:1)}else this.spr&&(this.spr.visible=!1),this.chargetext&&(this.chargetext.visible=!1),this.text.position.x=ws(-10);break;case"up":if(this.text.text=this.parent.S.setoptions.b2bcharging&&t>=s&&s===i+1?"B2B \fc3X":`B2B \fc3X\f5${t}`,this.text.alpha=1,this.text.weight=600,this.text.tint=o,this.alpha=1,"minimal"!==ot.video.graphics?this._anims.push(dc.animate(this.text,{0:{letterSpacing:0},1:{letterSpacing:10}},6,a(.1,.38,0,.88))):this.text.letterSpacing=10,this.spr&&t>=s){this.spr.scale.set(ws(this.options.size/50*l)),this.spr.tint=r,this.spr.alpha=t>=s+7-i||this.options.evil?1:.3,this.spr.visible=!0,this.spr.position.x=ws(-14-10*l),this.chargetext.text=t-s+1+i,this.chargetext.misalignmentSeed=Math.floor(1e6*Math.random()),this.chargetext.tint=this.options.evil?16777215:t>=s+7-i?0:o,this.chargetext.outlineTint=this.options.evil?o:t>=s+7-i?16777215:0,this.chargetext.visible=!0,this.chargetext.position.x=ws(-14-10*l),this.text.position.x=ws(-25-25*l);const e=Math.max(2,`${t-s+1+i}`.length);this.chargetext.fontSize=ws(this.options.size/(.5*e)*l)*(this.options.evil?1.3:1),"minimal"!==ot.video.graphics&&(this._anims.push(dc.animate(this.spr,{0:{"scale.x":ws(this.options.size/50*l),"scale.y":ws(this.options.size/50*l)},.5:{"scale.x":ws(this.options.size/50*l*1.2),"scale.y":ws(this.options.size/50*l*1.2)},1:{"scale.x":ws(this.options.size/50*l),"scale.y":ws(this.options.size/50*l)}},.15,a(.04,.62,.63,.42))),this._anims.push(dc.animate(this.chargetext,{0:{"scale.x":1,"scale.y":1},.5:{"scale.x":1.4,"scale.y":1.4},1:{"scale.x":1,"scale.y":1}},.15,a(.04,.62,.63,.42))),this._anims.push(dc.animate(this.text,{0:{"position.x":ws(-25-25*l)},.5:{"position.x":ws(-45-25*l)},1:{"position.x":ws(-25-25*l)}},.15,a(.04,.62,.63,.42))))}break;case"up_large":if(this.text.text=this.parent.S.setoptions.b2bcharging&&t>=s&&s===i+1?"B2B \fc3X":`B2B \fc3X\f5${t}`,this.text.alpha=1,this.text.weight=600,this.text.tint=o,"minimal"!==ot.video.graphics&&this._anims.push(dc.animate(this.text,{0:{alpha:1,letterSpacing:0},.16:{alpha:1,letterSpacing:0},.17:{alpha:0,letterSpacing:0},.33:{alpha:0,letterSpacing:0},.34:{alpha:1,letterSpacing:0},"0.50":{alpha:1,letterSpacing:0},.51:{alpha:0,letterSpacing:0},.66:{alpha:0,letterSpacing:0},.67:{alpha:.99,letterSpacing:0},1:{alpha:1,letterSpacing:10}},2,a(.1,.38,0,.88))),this.spr&&t>=s){this.spr.scale.set(ws(this.options.size/50*l)),this.spr.tint=r,this.spr.alpha=t>=s+7-i?1:.3,this.spr.visible=!0,this.spr.position.x=ws(-14-10*l),this.chargetext.text=t-s+1+i,this.chargetext.misalignmentSeed=Math.floor(1e6*Math.random()),this.chargetext.tint=this.options.evil?16777215:t>=s+7-i?0:o,this.chargetext.outlineTint=this.options.evil?o:t>=s+7-i?16777215:0,this.chargetext.visible=!0,this.chargetext.position.x=ws(-14-10*l),this.text.position.x=ws(-25-25*l);const e=Math.max(2,`${t-s+1+i}`.length);this.chargetext.fontSize=ws(this.options.size/(.5*e)*l)*(this.options.evil?1.3:1),"minimal"!==ot.video.graphics&&(this._anims.push(dc.animate(this.spr,{0:{"scale.x":ws(this.options.size/50*l),"scale.y":ws(this.options.size/50*l)},.5:{"scale.x":ws(this.options.size/50*l*1.2),"scale.y":ws(this.options.size/50*l*1.2)},1:{"scale.x":ws(this.options.size/50*l),"scale.y":ws(this.options.size/50*l)}},.15,a(.04,.62,.63,.42))),this._anims.push(dc.animate(this.chargetext,{0:{"scale.x":1,"scale.y":1},.5:{"scale.x":1.4,"scale.y":1.4},1:{"scale.x":1,"scale.y":1}},.15,a(.04,.62,.63,.42))),this._anims.push(dc.animate(this.text,{0:{"position.x":ws(-25-25*l)},.5:{"position.x":ws(-45-25*l)},1:{"position.x":ws(-25-25*l)}},.15,a(.04,.62,.63,.42))))}break;case"down":this.delete();break;case"down_large":if("minimal"===ot.video.graphics)return this.delete();this.text.tint=14950946,this.text.text="B2B \fc3X\f50",this._anims.push(dc.animate(this.text,{0:{alpha:1,weight:600,letterSpacing:0},.1:{alpha:1,weight:600,letterSpacing:0},.105:{alpha:0,weight:600,letterSpacing:0},.2:{alpha:0,weight:600,letterSpacing:0},.205:{alpha:1,weight:600,letterSpacing:0},.3:{alpha:1,weight:600,letterSpacing:0},.305:{alpha:0,weight:600,letterSpacing:0},.4:{alpha:0,weight:600,letterSpacing:0},.405:{alpha:1,weight:600,letterSpacing:0},.5:{alpha:1,weight:600,letterSpacing:0},.505:{alpha:0,weight:600,letterSpacing:0},.6:{alpha:0,weight:600,letterSpacing:0},.605:{alpha:1,weight:600,letterSpacing:0},1:{alpha:0,weight:0,letterSpacing:10}},4,a(.1,.38,0,.88),(()=>{this.delete()})));break;case"up_charged":if(this.text.text=this.parent.S.setoptions.b2bcharging&&t>=s&&s===i+1?"B2B \fc3X":`B2B \fc3X\f5${t}`,this.text.alpha=1,this.text.weight=600,this.text.tint=o,this.alpha=1,"minimal"!==ot.video.graphics&&this._anims.push(dc.animate(this.text,{0:{letterSpacing:0},1:{letterSpacing:10}},6,a(.1,.38,0,.88))),this.spr){this.spr.scale.set(ws(this.options.size/50*l)),this.spr.tint=r,this.spr.alpha=t>=s+7-i?1:.3,this.spr.visible=!0,this.spr.position.x=ws(-14-10*l),this.chargetext.text=t-s+1+i,this.chargetext.misalignmentSeed=Math.floor(1e6*Math.random()),this.chargetext.tint=this.options.evil?16777215:t>=s+7-i?0:o,this.chargetext.outlineTint=this.options.evil?o:t>=s+7-i?16777215:0,this.chargetext.position.x=ws(-14-10*l),this.text.position.x=ws(-25-25*l);const e=Math.max(2,`${t-s+1+i}`.length);this.chargetext.fontSize=ws(this.options.size/(.5*e)*l)*(this.options.evil?1.3:1),this.chargetext.visible=!0,"minimal"!==ot.video.graphics&&(this._anims.push(dc.animate(this.spr,{0:{"scale.x":0,"scale.y":0},.5:{"scale.x":ws(this.options.size/50*l*1.4),"scale.y":ws(this.options.size/50*l*1.4)},1:{"scale.x":ws(this.options.size/50*l),"scale.y":ws(this.options.size/50*l)}},.25,a(.04,.62,.63,.42))),this._anims.push(dc.animate(this.chargetext,{0:{"scale.x":0,"scale.y":0},.5:{"scale.x":1.6,"scale.y":1.6},1:{"scale.x":1,"scale.y":1}},.25,a(.04,.62,.63,.42))),this._anims.push(dc.animate(this.text,{0:{"position.x":ws(-10)},.5:{"position.x":ws(-55-35*l)},1:{"position.x":ws(-25-25*l)}},.25,a(.04,.62,.63,.42))))}break;case"down_send":{if("minimal"===ot.video.graphics)return this.delete();const e=nc(this.spr,0,0);if(xl.play(this.options.evil?"b2bcharge_ticking_evil":"b2bcharge_ticking",{x:e.x,y:e.y,power:2*Math.min(1,Math.max((n-s+1)/30)),tint:16777215,dT:60}),this.text.tint=16777215,this.text.text=this.parent.S.setoptions.b2bcharging&&n>=s&&s===i+1?"B2B \fc3X":"B2B \fc3X\f50",this._anims.push(dc.animate(this.text,{0:{alpha:1,weight:600,letterSpacing:0},.1:{alpha:1,weight:600,letterSpacing:0},.105:{alpha:0,weight:600,letterSpacing:0},.2:{alpha:0,weight:600,letterSpacing:0},.205:{alpha:1,weight:600,letterSpacing:0},.3:{alpha:1,weight:600,letterSpacing:0},.305:{alpha:0,weight:600,letterSpacing:0},.4:{alpha:0,weight:600,letterSpacing:0},.405:{alpha:1,weight:600,letterSpacing:0},.5:{alpha:1,weight:600,letterSpacing:0},.505:{alpha:0,weight:600,letterSpacing:0},.6:{alpha:0,weight:600,letterSpacing:0},.605:{alpha:1,weight:600,letterSpacing:0},1:{alpha:0,weight:0,letterSpacing:10}},4,a(.1,.38,0,.88),(()=>{this.delete()}))),this.spr){const e=Math.min(4,Math.max(1,(n-s+1)/6));this.spr.tint=16777215,this.spr.alpha=1,this.chargetext.tint=0,this.chargetext.outlineTint=16777215,this._anims.push(dc.animate(this.spr,{0:{"scale.x":ws(this.options.size/50*e),"scale.y":ws(this.options.size/50*e)},.5:{"scale.x":ws(this.options.size/50*e*1.6),"scale.y":ws(this.options.size/50*e*1.6)},1:{"scale.x":0,"scale.y":0}},.5,a(0,.66,.79,.37),(()=>{this.spr&&(this.spr.visible=!1)}))),this._anims.push(dc.animate(this.chargetext,{0:{"scale.x":1,"scale.y":1},.5:{"scale.x":4,"scale.y":4},1:{"scale.x":0,"scale.y":0}},.8,a(0,.66,.79,.37),(()=>{this.chargetext&&(this.chargetext.visible=!1)})))}break}}}delete(){this.text&&(this.text.destroy(),this.text=null),this.spr&&(this.spr.destroy(),this.spr=null),this.chargetext&&(this.chargetext.destroy(),this.chargetext=null)}progress(e){if("minimal"!==ot.video.graphics&&this.spr){this._t+=e;const t=this.parent.S.setoptions.b2bcharge_at;if(this.spr.angle+=e*Math.max(1,Math.min(4,1+.1*(this._knownamt-t+1))),this._knownamt>=4){const n=nc(this.spr,0,0);xl.play(this.options.evil?"b2bcharge_ticking_evil":"b2bcharge_ticking",{x:n.x,y:n.y,power:Math.min(1,Math.max((this._knownamt-t+1)/(this.options.evil?20:30))),tint:this._knowntint,dT:e})}this.options.evil&&this.chargetext&&(this.chargetext.outlineAlpha=.6+.4*Math.sin(.15*this._t))}}},Pc.generic.ns.popup_defense=class extends Tc{create(e,t={}){if(this.text&&this.delete(),"off"===ot.video.actiontext||"some"===ot.video.actiontext)return;if("minimal"===ot.video.graphics)return;if(!this.parent.IsFullMode())return;this.text=new d.Text(e,{font:Rl.get("hun"),rasterize:"minimal"===ot.video.graphics,fontSize:ws(40+4*Math.min(10,e)),weight:700,tint:46335,anchor:[.5,.5],outlineTint:0,outlineWeight:950,outlineAlpha:1,misalignment:[1,3,.1],...this.options.font_opts});const n=.25*Math.random()-.125,s=.25*Math.random()-.125;this.text.rotation=n,this.text.position.set(ws(_c.x*t.x),ws(_c.x*(t.y-(this.parent.ctx.B-.5)))),this.text.zIndex=1e3,this.parent.H.holder.addChild(this.text);const i=Math.atan2(t.y-this.parent.ctx.B-this.parent.ctx.Hh,t.x-this.parent.ctx.Wh)+Math.PI/2;dc.animate(this.text,{0:{x:ws(_c.x*t.x),y:ws(_c.x*(t.y-(this.parent.ctx.B-.5))),rotation:n,alpha:1,weight:700},.8:{x:ws(_c.x*t.x)-ws(1.6*_c.x*Math.sin(i)),y:ws(_c.x*(t.y-(this.parent.ctx.B-.5)))+ws(1.6*_c.x*Math.cos(i)),rotation:n+.8*s,alpha:.7,weight:700},1:{x:ws(_c.x*t.x)-ws(2*_c.x*Math.sin(i)),y:ws(_c.x*(t.y-(this.parent.ctx.B-.5)))+ws(2*_c.x*Math.cos(i)),rotation:n+s,alpha:0,weight:500}},2,a(.1,.38,0,.88),(()=>{this.delete()}))}delete(){this.text&&(this.text.destroy(),this.text=null)}},Pc.generic.ns.popup_offence=class extends Tc{create(e,t={}){if(this.text&&this.delete(),"off"===ot.video.actiontext||"some"===ot.video.actiontext)return;if("minimal"===ot.video.graphics)return;if(!this.parent.IsFullMode())return;t.y=Math.min(t.y,39);const n=1.6+.12*Math.min(30,e);this.text=new d.Text(e,{font:Rl.get("hun"),rasterize:"minimal"===ot.video.graphics,fontSize:ws(_c.x*n),weight:600,tint:0,anchor:[.5,.5],outlineTint:16777215,outlineWeight:950,outlineAlpha:1,misalignment:[1+.1*Math.min(30,e),1+.1*Math.min(30,e),.2],useProjection:!0,projection:[[0,0],[1,0],[0,1],[1,1]],...this.options.font_opts});const s=Math.atan2(t.y-this.parent.ctx.B-this.parent.ctx.Hh,t.x-this.parent.ctx.Wh)+Math.PI/2,i=t.x,o=t.y;let r=t.x+1.5*n*Math.sin(s),l=t.y-1.5*n*Math.cos(s);r=Math.min(13.5,Math.max(-3.5,r)),l=Math.min(42.5,Math.max(17.5,l));let c=!0;t.evasive&&!this.parent.ctx.bhm.IsInactive(r,l,e>=10)&&(r=t.x+3*n*Math.sin(s),l=t.y-3*n*Math.cos(s),r=Math.min(13.5,Math.max(-3.5,r)),l=Math.min(42.5,Math.max(17.5,l))),t.evasive&&e>=10&&r>=9&&(l-this.parent.ctx.B)/this.parent.ctx.H>-.1&&(l-this.parent.ctx.B)/this.parent.ctx.H<=.85&&(this.text.fillAlpha=.5,this.text.outlineAlpha=.75,c=!1),t.evasive&&e>=10&&r<=1&&(l-this.parent.ctx.B)/this.parent.ctx.H>-.1&&(l-this.parent.ctx.B)/this.parent.ctx.H<=.35&&(this.text.fillAlpha=.5,this.text.outlineAlpha=.75,c=!1),this.text.x=ws(_c.x*i),this.text.y=ws(_c.x*(o-(this.parent.ctx.B-.5))),this.text.scale.set(0),this.text.zIndex=1e3,this.parent.H.holder.addChild(this.text),s<-.25*Math.PI||s>1.25*Math.PI?(this.text.projection[0].x=.1*Math.random()-.05,this.text.projection[0].y=e>=10?-.1:-.05,this.text.projection[2].x=.1*Math.random()-.05,this.text.projection[2].y=e>=10?1.1:1.05,this.text.rotation=s-1.5*Math.PI,this.text.anchor.x=1):s<.25*Math.PI?(this.text.projection[0].x=-.05,this.text.projection[0].y=.1*Math.random()-.05,this.text.projection[1].x=1.05,this.text.projection[1].y=.1*Math.random()-.05,this.text.rotation=s,this.text.anchor.y=1):s<.75*Math.PI?(this.text.projection[1].x=.1*Math.random()-.05+1,this.text.projection[1].y=e>=10?-.1:-.05,this.text.projection[3].x=.1*Math.random()-.05+1,this.text.projection[3].y=e>=10?1.1:1.05,this.text.rotation=s-.5*Math.PI,this.text.anchor.x=0):(this.text.projection[2].x=-.05,this.text.projection[2].y=.1*Math.random()-.05+1,this.text.projection[3].x=1.05,this.text.projection[3].y=.1*Math.random()-.05+1,this.text.rotation=s-1*Math.PI,this.text.anchor.y=0);const p=e.toString();for(let e=0;e<p.length;e++)this.text.overrides.get(e).scale=.2,setTimeout((()=>{this.text&&!this.text._destroyed&&dc.animate(this.text.overrides.get(e),{0:{scale:.2},1:{scale:1}},.2,a(.03,.51,.61,.85))}),e*(250/p.length));dc.animate(this.text,{0:{alpha:1,"scale.x":0,"scale.y":0,weight:600,x:ws(_c.x*i),y:ws(_c.x*(o-(this.parent.ctx.B-.5)))},.3:{alpha:1,"scale.x":1,"scale.y":1,weight:700,x:ws(_c.x*r),y:ws(_c.x*(l-(this.parent.ctx.B-.5)))},1:{alpha:0,"scale.x":1.1,"scale.y":1.1,weight:600,x:ws(_c.x*r),y:ws(_c.x*(l-(this.parent.ctx.B-.5)))}},2,a(0,.71,.51,.15),(()=>{this.delete()})),e>=20?dc.animate(this.text,{0:{tint:16777215,outlineTint:0},.2:{tint:16777215,outlineTint:0},.201:{tint:0,outlineTint:16777215},.4:{tint:0,outlineTint:16777215},.401:{tint:16777215,outlineTint:0},.6:{tint:16777215,outlineTint:0},.601:{tint:0,outlineTint:16777215},.8:{tint:0,outlineTint:16777215},.801:{tint:16777215,outlineTint:0},.999:{tint:16777215,outlineTint:0},1:{tint:0,outlineTint:16777215}},.5):e>=10&&dc.animate(this.text,{0:{tint:16777215,outlineTint:0},.33:{tint:16777215,outlineTint:0},.331:{tint:0,outlineTint:16777215},.66:{tint:0,outlineTint:16777215},.661:{tint:16777215,outlineTint:0},.999:{tint:16777215,outlineTint:0},1:{tint:0,outlineTint:16777215}},.33),t.evasive&&c&&(this.activeFade=new Pc.generic.ns._helper_activefade({positions:[[r,l,e>=10]],elements:[this.text],keyvalues:[["fillAlpha",1,.15],["outlineAlpha",1,.35]],ctx:this.parent.ctx,interval:5,speed:.05}))}delete(){this.text&&(this.text.destroy(),this.text=null)}progress(e){this.text&&this.activeFade&&this.activeFade.progress(e)}},Pc.generic.ns.skyline=class extends zc{create(){if(!this.parent.IsFullMode()||this.parent.S.setoptions.nolockout)return;if(this.nsp)return;const e=this.options.offsets||[0,0,0,0];return this.nsp=new o.NineSlicePlane(this.options.texture,...this.options.slices.map((e=>e?e+2:e))),this.nsp.width=Ss(_c.x*this.parent.ctx.W)+e[0]+e[2],this.nsp.height=this.options.height+e[1]+e[3],this.nsp.position.set(-zs(e[0]),-zs(e[1])),this.nsp.alpha=.5,this.nsp.scale.set(zs(1)),this.parent.H.holder.addChild(this.nsp),this}update(){(this.nsp||(this.create(),this.nsp))&&(this.nsp.alpha=.25*Math.random()+.5)}delete(){this.nsp&&(this.nsp.destroy(),this.nsp=null)}},Pc.generic.ns.stackhint=class extends zc{create(){if(!this.parent.IsFullMode())return;if(!this.parent.S.setoptions.pro&&!this.parent.S.setoptions.zenith)return;if(this.nsp)return;this._t=0,this._flip=!1,this._pos=0;const e=this.options.offsets||[0,0,0,0];return this.nsp=new o.NineSlicePlane(this.options.texture,...this.options.slices.map((e=>e?e+2:e))),this.nsp.width=Ss(_c.x*this.parent.ctx.W)+e[0]+e[2],this.nsp.height=this.options.height+e[1]+e[3],this._position(),this.nsp.alpha=0,this.nsp.tint=this.options.tint||0,this.nsp.scale.set(zs(1)),this.parent.H.holder.addChild(this.nsp),this}update(e){if(this.nsp||this.create(),!this.nsp)return;this._pos=e,this._position();const t=this.parent.ctx.H-e;this.nsp.alpha=e<=0?0:Math.min(1,Math.max(0,t<0?0:.25+.25*t))}delete(){this.nsp&&(this.nsp.destroy(),this.nsp=null)}_position(){this.nsp.position.set(-zs(this.options.offsets[0]),-zs(this.options.offsets[1]*(this._flip?-1:1))+ws(_c.x*(this.parent.ctx.H-this._pos)))}progress(e){this.nsp&&(this._t+=e,this.parent.S.zenith.blighted?(this.nsp.tint=16711769|Math.round((Math.sin(this._t/10)+1)/2*208)<<8,this.nsp.scale.set(zs(1),zs(-1)),this._flip=!0,this._position()):(this.nsp.tint=this.options.tint||0,this.nsp.scale.set(zs(1)),this._flip=!1,this._position()))}},Pc.generic.ns.garbagedangericon=class extends zc{create(){if(this.parent.IsFullMode()&&!this.spr)return this.spr=new o.Sprite(this.options.texture),this.spr.anchor.set(.5,.5),this.spr.position.set(0,ws(_c.x*this.parent.ctx.Hh)),this.spr.scale.set(0),this.parent.H.holder.addChild(this.spr),dc.animate(this.spr,{0:{"scale.x":0,"scale.y":0},.05:{"scale.x":zs(2*this.options.scale),"scale.y":zs(2*this.options.scale)},.1:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)},.2:{"scale.x":zs(2*this.options.scale),"scale.y":zs(2*this.options.scale)},.3:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)},.5:{"scale.x":zs(2*this.options.scale),"scale.y":zs(2*this.options.scale)},1:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)}},5,a(.03,.8,.5,.93)),this}delete(){this.spr&&(this.spr.destroy(),this.spr=null)}},Pc.generic.ns.garbagewindupicon=class extends zc{create(e){if(!this.parent.IsFullMode())return;if(this.spr_base)return;const t=this.parent.S.zenith.allyincapacitated?1.5:3;this.spr_base=new o.Sprite(this.options.texture_base),this.spr_base.anchor.set(.5,.5),this.spr_base.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*t)),this.spr_base.renderable=!1,this.parent.H.holder.addChild(this.spr_base),this.spr_base_flash=new o.Sprite(this.options.texture_base),this.spr_base_flash.anchor.set(.5,.5),this.spr_base_flash.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*t)),this.spr_base_flash.scale.set(zs(1*this.options.scale)),this.spr_base_flash.renderable=!1,this.parent.H.holder.addChild(this.spr_base_flash),this.spr_exclam_a=new o.Sprite(this.options.texture_exclam_a),this.spr_exclam_a.anchor.set(.5,.5),this.spr_exclam_a.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*t)),this.spr_exclam_a.renderable=!1,this.parent.H.holder.addChild(this.spr_exclam_a),this.spr_exclam_b=new o.Sprite(this.options.texture_exclam_b),this.spr_exclam_b.anchor.set(.5,.5),this.spr_exclam_b.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*t)),this.spr_exclam_b.renderable=!1,this.parent.H.holder.addChild(this.spr_exclam_b),e>=1&&setTimeout((()=>{this.spr_base&&(this.spr_base.renderable=!0,this.spr_base.tint=this.options.tints[0],dc.animate(this.spr_base,{0:{"scale.x":0,"scale.y":0},.5:{"scale.x":zs(1.2*this.options.scale),"scale.y":zs(1.2*this.options.scale)},1:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)}},.25,a(.04,.62,.63,.42)),this.spr_exclam_a.renderable=!0,dc.animate(this.spr_exclam_a,{0:{"scale.x":0,"scale.y":0},.5:{"scale.x":zs(1.4*this.options.scale),"scale.y":zs(1.4*this.options.scale)},1:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)}},.25,a(.04,.62,.63,.42)))}),0),e>=2&&setTimeout((()=>{this.spr_base&&(this.spr_base.tint=this.options.tints[1],dc.animate(this.spr_base,{0:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)},.5:{"scale.x":zs(1.2*this.options.scale),"scale.y":zs(1.2*this.options.scale)},1:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)}},.15,a(.04,.62,.63,.42)),dc.animate(this.spr_exclam_a,{0:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)},.5:{"scale.x":zs(1.4*this.options.scale),"scale.y":zs(1.4*this.options.scale)},1:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)}},.15,a(.04,.62,.63,.42)))}),345),e>=3&&setTimeout((()=>{this.spr_base&&(this.spr_base.tint=this.options.tints[2],dc.animate(this.spr_base,{0:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)},.5:{"scale.x":zs(1.3*this.options.scale),"scale.y":zs(1.3*this.options.scale)},1:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)}},.15,a(.04,.62,.63,.42)),this.spr_exclam_a.renderable=!1,this.spr_exclam_b.renderable=!0,dc.animate(this.spr_exclam_b,{0:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)},.5:{"scale.x":zs(1.5*this.options.scale),"scale.y":zs(1.5*this.options.scale)},1:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)}},.15,a(.04,.62,.63,.42)))}),545),e>=4&&setTimeout((()=>{this.spr_base&&(this.spr_base.tint=this.options.tints[3],dc.animate(this.spr_base,{0:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)},.5:{"scale.x":zs(1.4*this.options.scale),"scale.y":zs(1.4*this.options.scale)},1:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)}},.15,a(.04,.62,.63,.42)),dc.animate(this.spr_exclam_b,{0:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)},.5:{"scale.x":zs(1.7*this.options.scale),"scale.y":zs(1.7*this.options.scale)},1:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale)}},.15,a(.04,.62,.63,.42)))}),745);for(let t=0;t<e;t++)setTimeout((()=>{this.spr_base&&(dc.animate(this.spr_base,{0:{angle:0},1:{angle:90}},.25,a(.27,1.56,.75,1)),this.spr_base_flash.renderable=!0,dc.animate(this.spr_base_flash,{0:{angle:0,alpha:1},1:{angle:90,alpha:0}},.25,a(.27,1.56,.75,1)))}),1e3+500*t);return setTimeout((()=>{this.spr_base&&(dc.animate(this.spr_base,{0:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale),alpha:1},1:{"scale.x":zs(.3*this.options.scale),"scale.y":zs(.3*this.options.scale),alpha:0}},.35,a(.6,.07,.94,.76)),dc.animate(this.spr_exclam_a,{0:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale),alpha:1},1:{"scale.x":zs(.3*this.options.scale),"scale.y":zs(.3*this.options.scale),alpha:0}},.35,a(.6,.07,.94,.76)),dc.animate(this.spr_exclam_b,{0:{"scale.x":zs(1*this.options.scale),"scale.y":zs(1*this.options.scale),alpha:1},1:{"scale.x":zs(.3*this.options.scale),"scale.y":zs(.3*this.options.scale),alpha:0}},.35,a(.6,.07,.94,.76)))}),1e3+500*e),setTimeout((()=>{this.delete()}),1500+500*e),this}delete(){this.spr_base&&(this.spr_base.destroy(),this.spr_base=null),this.spr_exclam_a&&(this.spr_exclam_a.destroy(),this.spr_exclam_a=null),this.spr_exclam_b&&(this.spr_exclam_b.destroy(),this.spr_exclam_b=null)}},Pc.generic.ns.b2bdistance=class extends zc{_knowncount=0;create(e){if(!this.parent.IsFullMode()||!1===ot.video.siren||"off"===ot.video.actiontext||"some"===ot.video.actiontext)return;this.container&&this.container.destroy();const t=Math.min(1,Math.max(0,(-e-8)/4)),n=Math.min(1,Math.max(0,(-e-12)/20)),s=16724736-(Math.round(51*t)<<8)+Math.round(255*n);return this._knowncount=e,this.container=new o.Container,this.container.position.set(ws(_c.x*this.parent.ctx.Wh),ws(3*_c.x)),this.container.scale.set(ws(this.options.scale)*(1+Math.min(2,Math.min(0,e+8)/-30))),this.parent.H.holder.addChild(this.container),this.spr=new o.Sprite(this.options.texture),this.spr.anchor.set(.5,.5),this.spr.tint=s,this.spr.alpha=0,this.spr.scale.set(.4),this.container.addChild(this.spr),this.text=new d.Text(e,{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:17,weight:750,outlineTint:0,outlineWeight:900,outlineAlpha:1,tint:s,anchor:[.5,.4]}),this.text.position.set(0,.5),this.container.addChild(this.text),dc.animate(this.spr,{0:{"scale.x":0,"scale.y":0,alpha:0},.5:{"scale.x":.6,"scale.y":.6,alpha:1},1:{"scale.x":.3,"scale.y":.3,alpha:.3}},.25,a(.04,.62,.63,.42)),dc.animate(this.text,{0:{"scale.x":0,"scale.y":0},.5:{"scale.x":1.5,"scale.y":1.5},1:{"scale.x":1,"scale.y":1}},.25,a(.04,.62,.63,.42)),["minimal","low"].includes(ot.video.graphics)||(this.activeFade=new Pc.generic.ns._helper_activefade({positions:[[this.parent.ctx.Wh-1,this.parent.ctx.B+2],[this.parent.ctx.Wh+0,this.parent.ctx.B+3]],elements:[this.container],alphaHigh:1,alphaLow:.3,ctx:this.parent.ctx})),this}update(e){if(!this.container)return;this._knowncount=e,this.text.text=e||"!!",this.container.scale.set(ws(this.options.scale)*(1+Math.min(2,e/-30)));const t=Math.min(1,Math.max(0,(-e-8)/4)),n=Math.min(1,Math.max(0,(-e-12)/20)),s=16724736-(Math.round(51*t)<<8)+Math.round(255*n);this.text.tint=s,this.spr.tint=s}delete(e){if(!this.container)return;this._knowncount=e;const t=this.spr,n=this.text,s=this.container;this.spr=null,this.text=null,this.container=null,n.text=e||"!!",e||(t.tint=16777215,n.tint=0),dc.animate(t,{0:{"scale.x":.3,"scale.y":.3,alpha:e?.3:1},1:{"scale.x":.1,"scale.y":.1,alpha:0}},.35,a(.6,.07,.94,.76)),dc.animate(n,{0:{"scale.x":1,"scale.y":1,alpha:1},1:{"scale.x":.5,"scale.y":.5,alpha:0}},.35,a(.6,.07,.94,.76)),setTimeout((()=>{s.destroy()}),400)}progress(e){this.container&&(this.spr.angle-=e*Math.max(1,Math.min(4,1+.1*this._knowncount)),this.activeFade&&this.activeFade.progress(e))}},Pc.generic.ns.targeticon=class extends zc{create(){if(!this.spr&&!this.parent.IsFullMode())return this.spr=new o.Sprite(this.options.texture),this.spr.anchor.set(.5,.5),this.spr.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*this.parent.ctx.Hh)),this.spr.scale.set(0),this.parent.H.holder.addChild(this.spr),this.parent.IsTinyMode()?this.spr.scale.set(zs(4*this.options.scale)):dc.animate(this.spr,{0:{"scale.x":0,"scale.y":0},.2:{"scale.x":zs(4*this.options.scale),"scale.y":zs(4*this.options.scale)},1:{"scale.x":zs(3*this.options.scale),"scale.y":zs(3*this.options.scale)}},.3,a(.03,.8,.5,.93)),this}delete(){this.spr&&(this.spr.destroy(),this.spr=null)}},Pc.generic.ns.enemyicon=class extends zc{create(){if(!this.spr&&!this.parent.IsFullMode())return this.spr=new o.Sprite(this.options.texture),this.spr.anchor.set(.5,.5),this.spr.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*this.parent.ctx.Hh)),this.spr.scale.set(0),this.parent.H.holder.addChild(this.spr),this.parent.IsTinyMode()?this.spr.scale.set(zs(4*this.options.scale)):dc.animate(this.spr,{0:{"scale.x":0,"scale.y":0},.2:{"scale.x":zs(4*this.options.scale),"scale.y":zs(4*this.options.scale)},1:{"scale.x":zs(3*this.options.scale),"scale.y":zs(3*this.options.scale)}},.3,a(.03,.8,.5,.93)),this}delete(){this.spr&&(this.spr.destroy(),this.spr=null)}},Pc.generic.ns.undoredo=class extends Tc{create(e){if(this.spr&&this.delete(),"off"!==ot.video.actiontext&&"some"!==ot.video.actiontext&&"minimal"!==ot.video.graphics&&this.parent.IsFullMode())return this.spr=new o.Sprite(this.options.texture),this.spr.anchor.set(.5,.5),this.spr.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*this.parent.ctx.Hh)),this.spr.scale.set(zs(this.options.scale*(e?-2:2)),zs(2*this.options.scale)),this.parent.H.holder.addChild(this.spr),dc.animate(this.spr,{0:{"scale.x":zs(this.options.scale*(e?-2:2)),"scale.y":zs(2*this.options.scale),alpha:1},1:{"scale.x":zs(this.options.scale*(e?-3.5:3.5)),"scale.y":zs(3.5*this.options.scale),alpha:0}},.5,a(.11,.42,.58,1),(()=>{this.delete()})),dc.animate(this.spr,{0:{"anchor.x":.5},.25:{"anchor.x":.75},1:{"anchor.x":.5}},.25),this}delete(){this.spr&&(this.spr.destroy(),this.spr=null)}},Pc.generic.ns.holdwarn=class extends zc{create(){if(this.parent.IsFullMode()&&!1!==this.parent.S.setoptions.display_hold&&!1!==ot.video.siren&&!this.spr)return this.spr=new o.Sprite(this.options.texture),this.spr.anchor.set(.5,.5),this.spr.scale.set(zs(this.options.scale)),this.spr.position.set(ws(this.options.offset[0]),ws(this.options.offset[1])),this.spr.tint=this.options.tint,this.parent.H.leftside.addChild(this.spr),this._t=0,this}delete(){this.spr&&(this.spr.destroy(),this.spr=null)}progress(e){this.spr&&(this._t+=e,this.spr.alpha=.7+.3*Math.sin(this._t/3))}},Pc.generic.ns.next=class extends zc{create(){if(this.parent.IsTinyMode())return;if(!1===this.parent.S.setoptions.display_next)return;const e=this.options.offsets||[0,0,0,0];this.options.texture_bg&&(this.nspbg=new o.NineSlicePlane(this.options.texture_bg,...this.options.slices_bg.map((e=>e?e+2:e))),this.nspbg.width=Ss(36+4*_c.x)+this.options.offsets_bg[0]+this.options.offsets_bg[2],this.nspbg.height=Ss(28+3*_c.x*(this.parent.S.setoptions.nextcount||5))+this.options.offsets_bg[1]+this.options.offsets_bg[3],this.nspbg.position.set(-zs(this.options.offsets_bg[0]),-zs(this.options.offsets_bg[1])),this.nspbg.scale.set(zs(1)),this.parent.H.rightside.addChild(this.nspbg),this.parent.H.tintables.push(this.nspbg)),this.nsp=new o.NineSlicePlane(this.options.texture,...this.options.slices.map((e=>e?e+2:e))),this.nsp.width=Ss(36+4*_c.x)+e[0]+e[2],this.nsp.height=Ss(28+3*_c.x*(this.parent.S.setoptions.nextcount||5))+e[1]+e[3],this.nsp.position.set(-zs(e[0]),-zs(e[1])),this.nsp.scale.set(zs(1)),this.parent.H.rightside.addChild(this.nsp),this.parent.H.tintables.push(this.nsp),this.containers=[];for(let t=0;t<this.parent.S.setoptions.nextcount;t++)this.containers[t]=new o.Container,this.containers[t].position.set(Ss(this.options.pos[0]+2*_c.x)+e[0],Ss(this.options.pos[1]+1.5*_c.x+3*_c.x*t)+e[1]),this.containers[t].scale.set(Fs(1)),this.nsp.addChild(this.containers[t]);return this.containers}},Pc.generic.ns.hold=class extends zc{create(){if(this.parent.IsTinyMode())return;if(!1===this.parent.S.setoptions.display_hold)return;const e=this.options.offsets||[0,0,0,0],t=this.options.bottom?3.7:3;if(this.options.texture_bg){this.nspbg=new o.NineSlicePlane(this.options.texture_bg,...this.options.slices_bg.map((e=>e?e+2:e))),this.nspbg.width=Ss(36+4*_c.x)+this.options.offsets_bg[0]+this.options.offsets_bg[2],this.nspbg.height=Ss(28+_c.x*t)+this.options.offsets_bg[1]+this.options.offsets_bg[3];const e=this.options.bottom?ws(_c.x*(this.parent.ctx.H-t)-28)-zs(this.options.offsets_bg[1]):-zs(this.options.offsets_bg[1]);this.nspbg.position.set(-ws(36+4*_c.x)-zs(this.options.offsets_bg[0]),e),this.nspbg.scale.set(zs(1)),this.parent.H.leftside.addChild(this.nspbg),this.parent.H.tintables.push(this.nspbg)}this.nsp=new o.NineSlicePlane(this.options.texture,...this.options.slices.map((e=>e?e+2:e))),this.nsp.width=Ss(36+4*_c.x)+e[0]+e[2],this.nsp.height=Ss(28+_c.x*t)+e[1]+e[3];const n=this.options.bottom?ws(_c.x*(this.parent.ctx.H-t)-28)-zs(e[1]):-zs(e[1]);return this.nsp.position.set(-ws(36+4*_c.x)-zs(e[0]),n),this.nsp.scale.set(zs(1)),this.parent.H.leftside.addChild(this.nsp),this.parent.H.tintables.push(this.nsp),this.container=new o.Container,this.container.position.set(Ss(this.options.pos[0]+2*_c.x)+e[0],Ss(this.options.pos[1]+_c.x*t/2)+e[1]),this.container.scale.set(Fs(1)),this.nsp.addChild(this.container),this.container}},Pc.generic.ns.splash=class extends Tc{create(e,t={}){if(this.text&&this.delete(),"off"!==ot.video.actiontext&&"minimal"!==ot.video.graphics&&this.parent.IsFullMode())switch(this.text=new d.Text(e,{font:Rl.get("hun"),rasterize:"minimal"===ot.video.graphics,fontSize:ws(this.options.size),weight:600,tint:t.color||this.options.color,anchor:[1,0],...this.options.font_opts}),this.text.position.set(ws(-10),ws(this.options.y)),this.parent.H.leftside.addChild(this.text),this.options.animation){case"normal":this.parent.S.setoptions.zenith_allspin?this.parent.S.zenith.lastclearwasdupe?(this.text.tint=16711680,this.text.letterSpacing=10,this.text.weight=650,this.text.invert=1,this.text.outlineAlpha=1,this.text.outlineTint=16777215,this.text.outlineWeight=990,this.text.misalignment=[4,10,.4],dc.animate(this.text,{0:{"misalignment[0]":40,"misalignment[1]":60,"misalignment[2]":1.2,misalignmentSeed:0},1:{"misalignment[0]":2,"misalignment[1]":4,"misalignment[2]":.2,misalignmentSeed:1e6}},.5,a(.1,.38,0,.88))):dc.animate(this.text,{0:{letterSpacing:0,alpha:1,weight:600},.6:{letterSpacing:10,alpha:.95,weight:570},1:{letterSpacing:20,alpha:.7,weight:500}},6,a(.1,.38,0,.88)):dc.animate(this.text,{0:{letterSpacing:0,alpha:1,weight:600},.6:{letterSpacing:10,alpha:.95,weight:570},1:{letterSpacing:20,alpha:0,weight:0}},6,a(.1,.38,0,.88),(()=>{this.delete()}));break;case"bounce":dc.animate(this.text,{0:{y:`${this.options.y}r`,alpha:1,weight:600},.1:{y:this.options.y-10+"r",alpha:1,weight:600},.2:{y:`${this.options.y}r`,alpha:1,weight:600},.6:{y:`${this.options.y}r`,alpha:.95,weight:570},1:{y:`${this.options.y}r`,alpha:0,weight:0}},6,a(.1,.38,0,.88),(()=>{this.delete()}))}}delete(){this.text&&(this.text.destroy(),this.text=null)}},Pc.generic.ns.shout=class extends Tc{create(e,t={}){this.parent.IsFullMode()&&(this.text&&this.delete(),this.options.hasShadow&&"minimal"!==ot.video.graphics&&(this.textShadow=new d.Text(e,{font:Rl.get("hun"),rasterize:"minimal"===ot.video.graphics,fontSize:ws(this.options.size/this.parent.CS),weight:700,tint:this.options.shadowColor,anchor:[.5,.5],align:"center",...this.options.font_opts}),this.textShadow.blendMode=o.BLEND_MODES.SCREEN,this.textShadow.position.set(ws(_c.x*this.parent.ctx.Wh),this.options.y),this.textShadow.zIndex=2e3,this.parent.H.holder.addChild(this.textShadow)),this.text=new d.Text(e,{font:Rl.get("hun"),rasterize:"minimal"===ot.video.graphics,fontSize:ws(this.options.size/this.parent.CS),weight:700,tint:this.options.color,anchor:[.5,.5],align:"center",...this.options.font_opts}),this.text.blendMode=o.BLEND_MODES.SCREEN,this.text.position.set(ws(_c.x*this.parent.ctx.Wh),this.options.y),this.text.zIndex=2001,this.parent.H.holder.addChild(this.text),"minimal"!==ot.video.graphics?(dc.animate(this.text,this.options.animation,this.options.animationDuration,this.options.animationEasing,(()=>{this.delete()})),this.options.hasShadow&&dc.animate(this.textShadow,this.options.animationShadow,this.options.animationShadowDuration,this.options.animationShadowEasing,(()=>{this.textShadow.destroy()}))):setTimeout((()=>{this.delete()}),1e3*(this.options.flatAnimationDuration||0)||1e3*this.options.animationDuration),"ultra"===ot.video.graphics&&this.options.ultra&&setTimeout((()=>{const e=nc(this.parent.H.holder,this.text.x,this.text.y);this.options.ultra(e.x,e.y)}),10))}delete(){this.text&&(this.text.destroy(),this.text=null),this.textShadow&&(this.textShadow.destroy(),this.textShadow=null)}},Pc.generic.ns.username=class extends zc{create(){const e=this.options.offsets||[0,0,0,0],t=this.options.offsets_fire||[0,0,0,0];this.parent.S.setoptions.display_username&&(this.parent.IsTinyMode()&&"low"===ot.video.caching||(this.bg=new o.NineSlicePlane(this.options.texture,...this.options.slices.map((e=>e?e+2:e))),this.bg.width=Ss(_c.x*this.parent.ctx.W)+e[0]+e[2],this.bg.height=Ss(26)+e[1]+e[3],this.bg.scale.set(zs(1)),this.bg.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*this.parent.ctx.H+10)),this.bg.pivot.set(Ss(_c.x*this.parent.ctx.Wh)+e[0],e[1]),this.parent.H.holder.addChild(this.bg),this.parent.H.tintables.push(this.bg),this.parent.S.setoptions.display_fire&&(this.fg=new o.NineSlicePlane(this.options.texture_fire,...this.options.slices_fire.map((e=>e?e+2:e))),this.fg.width=0,this.fg.height=Ss(26)+t[1]+t[3],this.fg.scale.set(zs(1)),this.fg.alpha=0,this.fg.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*this.parent.ctx.H+10)),this.fg.pivot.set(0,t[1]),this.parent.H.holder.addChild(this.fg),this.parent.H.tintables.push(this.fg)),this.text=new d.Text(this.parent.S.setoptions.username.toUpperCase()||"",{font:Rl.get("hun"),rasterize:"minimal"===ot.video.graphics,fontSize:ws(19),weight:600,tint:16777215,anchor:[.5,0],...this.options.font_opts}),this.text.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*this.parent.ctx.H+15)),this.parent.H.holder.addChild(this.text),this.parent.H.hybridtintables.push(this.text)))}update(e){if(!this.fg)return;const t=this.options.offsets_fire||[0,0,0,0];if(this.parent.IsTinyMode())this.fg.alpha=e>=500?.2+Math.min(.7,(e-500)/20):0,this.fg.width=Ss(_c.x*this.parent.ctx.W)+t[0]+t[2],this.fg.pivot.x=Ss(_c.x*this.parent.ctx.Wh);else{this.fg.alpha=e>=500?.2+Math.min(.7,(e-500)/20):.1+e/3500;const n=e>=500?1+(e-500)/1500:e/500;this.fg.width=(Ss(_c.x*this.parent.ctx.W)+t[0]+t[2])*n,this.fg.pivot.x=Ss(_c.x*this.parent.ctx.Wh)*n}}action(e){switch(e){case"startfire":{const e=nc(this.parent.H.stackobj,0,0);xl.play("fire_flair",{x:e.x,y:e.y,w:this.parent.ctx.W*this.parent.CS,h:this.parent.ctx.H*this.parent.CS});break}case"continuefire":if(this.parent.IsTinyMode()){const e=nc(this.parent.H.holder,ws(_c.x*this.parent.ctx.Wh),ws(_c.x*this.parent.ctx.Hh));xl.play("fire_burning",{x:e.x,y:e.y})}else{const e=nc(this.parent.H.stackobj,0,0);xl.play("fire_burn",{x:e.x,y:e.y,w:this.parent.ctx.W*this.parent.CS,h:this.parent.ctx.H*this.parent.CS})}}}},Pc.generic.ns.replaytag=class extends zc{create(){if(this.parent.IsFullMode()&&this.parent.S.setoptions.display_replay)return this.spr=new o.Sprite(this.options.texture),this.spr.anchor.set(1,0),this.spr.position.set(ws(_c.x*this.parent.ctx.W),ws(.5*_c.x)),this.spr.scale.set(zs(1)),this.parent.H.holder.addChild(this.spr),this.parent.H.tintables.push(this.spr),["minimal","low"].includes(ot.video.graphics)||(this.activeFade=new Pc.generic.ns._helper_activefade({positions:[[this.parent.ctx.W-5,this.parent.ctx.B+1],[this.parent.ctx.W-3,this.parent.ctx.B+1],[this.parent.ctx.W-1,this.parent.ctx.B+1]],elements:[this.spr],alphaHigh:1,alphaLow:.5,ctx:this.parent.ctx})),this}progress(e){this.activeFade&&this.activeFade.progress(e)}},Pc.generic.ns.tutorial=class extends zc{create(){this.parent.S.setoptions.tutorial&&(this.parent.IsTinyMode()||"guideline"===ot.controls.style&&!1!==this.parent.S.setoptions.display_hold&&!1!==this.parent.S.setoptions.allow_harddrop&&(this.topContainer=new o.Container,this.topContainer.position.set(ws(_c.x*this.parent.ctx.Wh),ws(9.5*_c.x)),this.topContainer.scale.set(zs(1)),this.parent.H.holder.addChild(this.topContainer),this.rightContainer=new o.Container,this.rightContainer.position.set(ws(_c.x*(this.parent.ctx.W+1)),ws(_c.x*this.options.y)),this.rightContainer.scale.set(zs(1.3)),this.parent.H.holder.addChild(this.rightContainer),this.side1=new o.Sprite(this.options.stage1side_tex),this.side1.renderable=!1,this.side1.position.y=0,this.side1.__ping=0,this.rightContainer.addChild(this.side1),this.side2=new o.Sprite(this.options.stage2side_tex),this.side2.renderable=!1,this.side2.position.y=54,this.side2.__ping=0,this.rightContainer.addChild(this.side2),this.side3=new o.Sprite(this.options.stage3side_tex),this.side3.renderable=!1,this.side3.position.y=108,this.side3.__ping=0,this.rightContainer.addChild(this.side3),this.side4=new o.Sprite(this.options.stage4side_tex),this.side4.renderable=!1,this.side4.position.y=166,this.side4.__ping=0,this.rightContainer.addChild(this.side4),this._currentStage=-1,this._prevProgress=0,this._t=0,this._goodPing=0))}progress(e){if(!this.topContainer||this.topContainer._destroyed)return;this._t+=e,this._goodPing=Math.max(0,this._goodPing-e);const t=this._currentStage,n=this.parent.S.tutorial.stage;if(this._currentStage=n,n!==t){if(this.stageEl){const e=this.stageEl;0===n?dc.animate(e,{0:{"position.y":0,alpha:e.alpha},1:{"position.y":5===t?0:-150,alpha:0}},5===t?2:.5,a(.39,.04,.74,.95),(()=>{e.destroy()})):(e.tint=7864098,dc.animate(e,{0:{"position.x":0,alpha:e.alpha},1:{"position.x":512,alpha:0}},.5,a(.59,0,.82,.32),(()=>{e.destroy()}))),this.stageEl=null}n>0&&(this._t=-21,this.stageEl=new o.Sprite(this.options[`stage${n}_tex`]),this.stageEl.scale.set(5===n?1.75:1.5),this.stageEl.anchor.set(.5,.5),this.topContainer.addChild(this.stageEl),5===n&&(this.stageEl.tint=16762880),setTimeout((()=>{this.topContainer&&!this.topContainer._destroyed&&dc.animate(this.stageEl,{0:{"position.y":300},1:{"position.y":0}},.5,a(.2,.5,.44,1))}),350));for(let e=1;e<=4;e++){const t=this[`side${e}`];!t.renderable&&(0===n||n>e)&&(t.alpha=0,t.renderable=!0,t.tint=0===n?16777215:7864098,setTimeout((()=>{this.topContainer&&!this.topContainer._destroyed&&(t.__ping=0===n?0:250,dc.animate(t,{0:{"position.x":-100,alpha:0},1:{"position.x":0,alpha:1}},.5,a(.26,.62,.48,1)))}),350))}}if(this.stageEl&&(this.stageEl.alpha=(.6+.1*Math.sin(this._t/30))*Math.max(0,Math.min(1,this._t/30)),5!==n)){this._prevProgress!==this.parent.S.tutorial.progress&&(this.parent.S.tutorial.progress>this._prevProgress&&(this._goodPing=40),this._prevProgress=this.parent.S.tutorial.progress);const e=Math.round(this.parent.H.holderstate.ctr+this._goodPing/40*(119-this.parent.H.holderstate.ctr)),t=Math.round(this.parent.H.holderstate.ctg+this._goodPing/40*(255-this.parent.H.holderstate.ctg)),n=Math.round(this.parent.H.holderstate.ctb+this._goodPing/40*(34-this.parent.H.holderstate.ctb));this.stageEl.tint=e<<16|t<<8|n,this.stageEl.position.y=this._goodPing/5}for(let t=1;t<=4;t++){const s=this[`side${t}`];if(s&&s.renderable){const t=Math.round(this.parent.H.holderstate.ctr+Math.min(150,s.__ping)/150*(119-this.parent.H.holderstate.ctr)),i=Math.round(this.parent.H.holderstate.ctg+Math.min(150,s.__ping)/150*(255-this.parent.H.holderstate.ctg)),o=Math.round(this.parent.H.holderstate.ctb+Math.min(150,s.__ping)/150*(34-this.parent.H.holderstate.ctb));if(s.tint=t<<16|i<<8|o,s.__ping=Math.max(0,s.__ping-e),this.options.hide_afterwards&&0===n){s.alpha=Math.max(0,Math.min(1,5-(this.parent.ctx.esm.frame-this.parent.S.tutorial.finished)/180))}}}}},Pc.generic.ns._helper_activefade=class{constructor(e){"full"===e.ctx.hm.H.displaymode&&"minimal"!==ot.video.graphics&&(this.options=e,this.tick=0,this.state=!0)}progress(e){"full"===this.options.ctx.hm.H.displaymode&&"minimal"!==ot.video.graphics&&(this.tick+=e,this.tick>=(this.options.interval||15)&&(this.tick-=this.options.interval||15,this._check()))}_check(){const e=this.options.positions.every((e=>this.options.ctx.bhm.IsInactive(...e)));e!==this.state&&(e?this._animateInactive():this._animateActive(),this.state=e)}_animateInactive(){for(const e of this.options.elements){const t={0:{},1:{}};if(this.options.keyvalues)for(const e of this.options.keyvalues)t[0][e[0]]=e[2],t[1][e[0]]=e[1];else t[0]={alpha:this.options.alphaLow},t[1]={alpha:this.options.alphaHigh};dc.animate(e,t,.2)}}_animateActive(){for(const e of this.options.elements){const t={0:{},1:{}};if(this.options.keyvalues)for(const e of this.options.keyvalues)t[0][e[0]]=e[1],t[1][e[0]]=e[2];else t[0]={alpha:this.options.alphaHigh},t[1]={alpha:this.options.alphaLow};dc.animate(e,t,this.options.speed||.1)}}};const Hc=".2x",Rc=1;Pc.zenith.ns.Board=class extends Pc.generic.ns.Board{_init(){this.textures.set("board",o.BaseTexture.from(`/res/skins/board/zenith/base${Hc}.png`)),this.textures.set("queue",o.BaseTexture.from("/res/skins/board/generic/queue.png")),this.textures.set("zenithrank",o.BaseTexture.from("/res/skins/board/zenith/zenithrank.png")),this.textures.set("boardflash",o.BaseTexture.from("/res/board-flash.png")),this.textures.set("boardflashinv",o.BaseTexture.from("/res/board-flash-inv.png")),this.textures.set("tutorial",o.BaseTexture.from("/res/tutorial.png")),this.barWidth=_c.x/1.5,this.sidesOffset=47,this.sidesOffsetMixin=9,this.barWidthOffset=20}constructor(e){super(e),this._init();const t=this.textures.get("board");if(t.setStyle(o.settings.SCALE_MODE,o.MIPMAP_MODES.OFF),this.S.setoptions.zenith){this.elements.set("zenithrank",new Pc.zenith.ns.zenithrank(this,{texture:this.textures.get("zenithrank")})),this.progressive.set("zenithrank",this.elements.get("zenithrank"));const e=Rc,n=127*e;this.elements.set("zenithmods",new Pc.zenith.ns.zenithmods(this,{textures:{expert:new o.Texture(t,new o.Rectangle(3166*e,2147*e,n,n)),duo:new o.Texture(t,new o.Rectangle(3296*e,2147*e,n,n)),doublehole:new o.Texture(t,new o.Rectangle(3426*e,2147*e,n,n)),volatile:new o.Texture(t,new o.Rectangle(3166*e,2017*e,n,n)),gravity:new o.Texture(t,new o.Rectangle(3686*e,2017*e,n,n)),nohold:new o.Texture(t,new o.Rectangle(3296*e,2017*e,n,n)),messy:new o.Texture(t,new o.Rectangle(3426*e,2017*e,n,n)),invisible:new o.Texture(t,new o.Rectangle(3556*e,2017*e,n,n)),allspin:new o.Texture(t,new o.Rectangle(3556*e,2147*e,n,n))},scale:1}))}this.elements.set("background",new Pc.generic.ns.background(this,{texture:new o.Texture(t,new o.Rectangle(3163*Rc,169*Rc,920*Rc,1840*Rc)),texture_tiny:new o.Texture(t,new o.Rectangle(10*Rc,1201*Rc,60*Rc,40*Rc)),slices:[0,0,0,0],slices_tiny:[20*Rc,0,20*Rc,20*Rc],offsets_tiny:[20*Rc,0,20*Rc,20*Rc]})),this.elements.set("username",new Pc.zenith.ns.username(this,{font_opts:{}})),this.elements.set("stock",new Pc.generic.ns.stock(this,{texture:new o.Texture(t,new o.Rectangle(20*Rc,1021*Rc,92*Rc,92*Rc))})),this.elements.set("next",new Pc.generic.ns.next(this,{texture:new o.Texture(t,new o.Rectangle(2539*Rc,69*Rc,610*Rc,1734*Rc)),slices:[0,250*Rc,0,250*Rc],offsets:[0,100*Rc,150*Rc,150*Rc],texture_bg:new o.Texture(t,new o.Rectangle(199*Rc,1079*Rc,460*Rc,1380*Rc)),slices_bg:[0,0,0,0],offsets_bg:[3*Rc,-104*Rc,3*Rc,3*Rc],pos:[20*Rc,32*Rc]})),this.elements.set("holdwarn",new Pc.generic.ns.holdwarn(this,{texture:new o.Texture(t,new o.Rectangle(2,1582,92,92)),scale:1,tint:16720384,offset:[-20,53]})),this.progressive.set("holdwarn",this.elements.get("holdwarn")),this.elements.set("hold",new Pc.generic.ns.hold(this,{texture:new o.Texture(t,new o.Rectangle(49*Rc,69*Rc,610*Rc,630*Rc)),slices:[0,250*Rc,0,250*Rc],offsets:[150*Rc,100*Rc,0,150*Rc],texture_bg:new o.Texture(t,new o.Rectangle(199*Rc,793*Rc,460*Rc,276*Rc)),slices_bg:[0,0,0,0],offsets_bg:[3*Rc,-104*Rc,3*Rc,3*Rc],pos:[20*Rc,32*Rc]})),this.elements.set("skyline",new Pc.generic.ns.skyline(this,{texture:new o.Texture(t,new o.Rectangle(7*Rc,1030*Rc,9*Rc,73*Rc)),slices:[0,9*Rc,0,0],height:300})),this.elements.set("stackhint",new Pc.generic.ns.stackhint(this,{texture:new o.Texture(t,new o.Rectangle(121*Rc,1111*Rc,64*Rc,100*Rc)),slices:[31*Rc,35*Rc,31*Rc,0],offsets:[0,30.5*Rc,0,0],height:300,tint:16711778})),this.progressive.set("stackhint",this.elements.get("stackhint")),this.elements.set("garbagedangericon",new Pc.generic.ns.garbagedangericon(this,{texture:new o.Texture(t,new o.Rectangle(21*Rc,923*Rc,92*Rc,92*Rc)),scale:2})),this.elements.set("garbagewindupicon",new Pc.generic.ns.garbagewindupicon(this,{texture_base:new o.Texture(t,new o.Rectangle(7*Rc,1250*Rc,92*Rc,92*Rc)),texture_exclam_a:new o.Texture(t,new o.Rectangle(103*Rc,1250*Rc,92*Rc,92*Rc)),texture_exclam_b:new o.Texture(t,new o.Rectangle(103*Rc,1346*Rc,92*Rc,92*Rc)),tints:[16760576,16742144,16722432,16711795],scale:2})),this.elements.set("targeticon",new Pc.generic.ns.targeticon(this,{texture:new o.Texture(t,new o.Rectangle(124*Rc,934*Rc,69*Rc,69*Rc)),scale:4})),this.elements.set("enemyicon",new Pc.generic.ns.targeticon(this,{texture:new o.Texture(t,new o.Rectangle(138*Rc,1047*Rc,43*Rc,43*Rc)),scale:4})),this.elements.set("border",new Pc.generic.ns.border(this,{texture:new o.Texture(t,new o.Rectangle(989*Rc,69*Rc,1220*Rc,2110*Rc)),slices:[180*Rc,180*Rc,180*Rc,200*Rc],offsets:[150*Rc,100*Rc,150*Rc,170*Rc]})),this.elements.set("b2b",new Pc.generic.ns.b2b(this,{texture:new o.Texture(t,new o.Rectangle(7*Rc,1346*Rc,92*Rc,92*Rc)),font_opts:{},size:22,y:220,evil:"allspin_reversed"===this.S.setoptions.zenith_mods[0]})),this.progressive.set("b2b",this.elements.get("b2b"));const n=this.textures.get("tutorial");if(this.elements.set("tutorial",new Pc.generic.ns.tutorial(this,{stage1_tex:new o.Texture(n,new o.Rectangle(0,0,512,256)),stage2_tex:new o.Texture(n,new o.Rectangle(512,0,512,256)),stage3_tex:new o.Texture(n,new o.Rectangle(0,256,512,256)),stage4_tex:new o.Texture(n,new o.Rectangle(512,256,512,256)),stage5_tex:new o.Texture(n,new o.Rectangle(0,512,512,256)),stage1side_tex:new o.Texture(n,new o.Rectangle(512,512,512,54)),stage2side_tex:new o.Texture(n,new o.Rectangle(512,566,512,54)),stage3side_tex:new o.Texture(n,new o.Rectangle(512,620,512,54)),stage4side_tex:new o.Texture(n,new o.Rectangle(512,674,512,54)),hide_afterwards:!1,y:16.9})),this.progressive.set("tutorial",this.elements.get("tutorial")),this.S.setoptions.slot_counter1&&this.elements.set("counter1",new Pc.generic.ns.counter(this,{font_opts_title:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},font_opts_value:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},font_opts_subtitle:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},has_subtitle:!1,side:"left",y:_c.x*Math.min(30,Math.max(20,this.ctx.H))-55})),this.S.setoptions.slot_counter2&&this.elements.set("counter2",new Pc.generic.ns.counter(this,{font_opts_title:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},font_opts_value:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},font_opts_subtitle:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},has_subtitle:!1,side:"left",y:_c.x*Math.min(30,Math.max(20,this.ctx.H))-125})),this.S.setoptions.slot_counter3&&this.elements.set("counter3",new Pc.generic.ns.counter(this,{font_opts_title:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},font_opts_value:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},font_opts_subtitle:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},has_subtitle:!1,side:"left",y:_c.x*Math.min(30,Math.max(20,this.ctx.H))-195})),this.S.setoptions.slot_counter4&&this.elements.set("counter4",new Pc.generic.ns.counter(this,{font_opts_title:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},font_opts_value:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},font_opts_subtitle:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},has_subtitle:!1,side:"left",y:_c.x*Math.min(30,Math.max(20,this.ctx.H))-265})),this.S.setoptions.slot_counter5&&this.elements.set("counter5",new Pc.generic.ns.counter(this,{font_opts_title:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},font_opts_value:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},font_opts_subtitle:{outlineTint:0,outlineWeight:900,outlineAlpha:.6},has_subtitle:!1,side:"left",y:_c.x*Math.min(30,Math.max(20,this.ctx.H))-335})),this.S.setoptions.slot_bar1){const e=new o.Texture(t,new o.Rectangle(91*Rc,857*Rc,60*Rc,8*Rc)),n=new o.Texture(t,new o.Rectangle(20*Rc,787*Rc,60*Rc,60*Rc)),s=new o.Texture(t,new o.Rectangle(20*Rc,851*Rc,60*Rc,60*Rc)),i={slices:[6,12,6,6],offsets:[0,0,0,0]},a={inactive:{tex:n,color:16717824,flash_color:16545127,...i},sleeping:{tex:n,color:9342606,flash_color:13947088,...i},caution:{tex:n,color:14734351,flash_color:15986871,...i},danger:{tex:n,color:16717824,flash_color:16545127,...i},spawn:{tex:s,color:16717824,flash_color:16545127,...i}},r={inactive:{tex:n,color:16717824,flash_color:16545127,...i},sleeping:{tex:n,color:9342606,flash_color:13947088,...i},caution:{tex:n,color:14734351,flash_color:15986871,...i},danger:{tex:n,color:9964287,flash_color:11617791,...i},spawn:{tex:s,color:9964287,flash_color:11617791,...i}};this.elements.set("bar1",new Pc.generic.ns.bar_segmented(this,{side:"left",bar_texture:new o.Texture(t,new o.Rectangle(689*Rc,69*Rc,231*Rc,2090*Rc)),bar_slices:[0,180*Rc,0,180*Rc],bar_offsets:[150*Rc,100*Rc,20*Rc,150*Rc],offset:this.barWidthOffset,tickers:{garbagecap:{texture:e},garbageabsolutecap:{texture:e,color:16717824}},generic_flash_color:65460,styles:{garbage:a,corruption:r}})),this.progressive.set("bar1",this.elements.get("bar1"))}if(this.S.setoptions.slot_bar2){const e=[12078599,16763904];this.elements.set("bar2",new Pc.generic.ns.bar_smooth(this,{side:"right",bar_texture:new o.Texture(t,new o.Rectangle(2278*Rc,69*Rc,231*Rc,2090*Rc)),bar_slices:[0,180*Rc,0,180*Rc],bar_offsets:[20*Rc,100*Rc,150*Rc,150*Rc],offset:this.barWidthOffset,fill_texture:new o.Texture(t,new o.Rectangle(91*Rc,787*Rc,60*Rc,60*Rc)),fill_slices:[0,30*Rc,0,0],fill_offsets:[0,30*Rc,0,0],tickers:{generic:{texture:new o.Texture(t,new o.Rectangle(91*Rc,857*Rc,60*Rc,8*Rc)),color:16777215}},colors:e,flash_color:16763904})),this.progressive.set("bar2",this.elements.get("bar2"))}this.effects.set("boardflash",new Pc.zenith.ns.boardflash(this,{texture:new o.Texture(this.textures.get("boardflash")),texture_inv:new o.Texture(this.textures.get("boardflashinv")),scale:10}))}},Pc.zenith.ns.zenithrank=class extends zc{_layers={};_progressor={};_rank=null;_rankChangeIsUp=!1;_rankChangeDecay=0;_t=0;create(){if(this.parent.IsTinyMode())return;if(!this.parent.S.setoptions.zenith)return;if(!this.options.texture)return;this.container=new o.Container;if(this.container.position.set(ws(_c.x*(this.parent.S.setoptions.zenith_duo?this.parent.ctx.W+3.15:this.parent.ctx.Wh)),ws(_c.x*this.parent.ctx.H+10+-6.75*(1-this.parent.ctx.hm.H.holderstate.asf))),this.container.scale.set(zs(1.1/this.parent.ctx.hm.H.holderstate.asf)),this.container.zIndex=5,this.parent.H.holder.addChild(this.container),this._progressor={host:new o.Container,base:null,filled:null,filling:null},this.options.texture_chip){const e=new o.Sprite(this.options.texture_chip);e.anchor.set(.5,0),e.position.set(0,ws(16)),e.scale.set(1/1.1),this.container.addChild(e)}const e=Pc.zenith.ns.ZENITHRANK_GEOS.padding;for(const[t,n]of Object.entries(Pc.zenith.ns.ZENITHRANK_GEOS.layers)){this._layers[t]={host:new o.Container,els:{}},this.container.addChild(this._layers[t].host),"minimal"===ot.video.graphics&&"glow"===t&&(this._layers[t].host.visible=!1);for(const[s,i]of Object.entries(Pc.zenith.ns.ZENITHRANK_GEOS.els)){const a=`${t}.${s}`;if(Pc.zenith.ns.ZENITHRANK_TEX.has(a)||Pc.zenith.ns.ZENITHRANK_TEX.set(a,new o.Texture(this.options.texture,new o.Rectangle(n.x+i.u-e,n.y+i.v-e,i.w+2*e,i.h+2*e),new o.Rectangle(n.x,n.y,1e3,270),new o.Rectangle(i.x-e,i.y-e,i.w+2*e,i.h+2*e),0,{x:.5,y:0})),"1"===s){if("idle"===t){this._progressor.base=new o.Sprite(Pc.zenith.ns.ZENITHRANK_TEX.get(a)),this._progressor.host.addChild(this._progressor.base);continue}if("active"===t){this._progressor.filled=new o.Sprite(Pc.zenith.ns.ZENITHRANK_TEX.get(a)),this._progressor.host.addChild(this._progressor.filled);continue}}this._layers[t].els[s]=new o.Sprite(Pc.zenith.ns.ZENITHRANK_TEX.get(a)),"glow"===t&&this.parent.IsFullMode()&&(this._layers[t].els[s].blendMode=o.BLEND_MODES.ADD),this._layers[t].els[s].__xphase=3*Math.random()+.2,this._layers[t].host.addChild(this._layers[t].els[s])}if("glow"===t){if(!Pc.zenith.ns.ZENITHRANK_TEX.has("phase")){const e=Pc.zenith.ns.ZENITHRANK_GEOS.phase;Pc.zenith.ns.ZENITHRANK_TEX.set("phase",new o.Texture(this.options.texture,new o.Rectangle(e.u,e.v,e.w,e.h),void 0,void 0,0,{x:.5,y:0}))}this._layers[t].els.phase=new o.Sprite(Pc.zenith.ns.ZENITHRANK_TEX.get("phase")),this._layers[t].els.phase.scale.set(3.27),this._layers[t].els.phase.position.set(0,75),this._layers[t].els.phase.tint=13237284,this._layers[t].els.phase.alpha=0,this.parent.IsFullMode()&&(this._layers[t].els.phase.blendMode=o.BLEND_MODES.ADD),this._layers[t].els.phase.visible="minimal"!==ot.video.graphics,this._layers[t].host.addChild(this._layers[t].els.phase)}}this.container.addChild(this._progressor.host);const t=Pc.zenith.ns.ZENITHRANK_GEOS.els[1],n=Pc.zenith.ns.ZENITHRANK_GEOS.layers.active.y,s=new o.Geometry;s.addAttribute("positions",[0,0,0,t.h,t.w,0,t.w,t.h],2),s.addAttribute("uvs",[t.u/1024,(t.v+n)/1024,t.u/1024,(t.v+n+t.h)/1024,(t.u+t.w)/1024,(t.v+n)/1024,(t.u+t.w)/1024,(t.v+n+t.h)/1024],2),s.addIndex([0,1,2,1,3,2]),this._progressor.filling=new o.Mesh(s,new o.MeshMaterial(new o.Texture(this.options.texture))),this._progressor.filling.position.set(t.w/-2,t.y),this._progressor.host.addChild(this._progressor.filling),this.parent.IsFullMode()&&(this.text=new d.Text("",{font:Rl.get("hun"),rasterize:"minimal"===ot.video.graphics,fontSize:90,weight:600,tint:16777215,outlineTint:16777215,outlineWeight:900,outlineAlpha:.3,anchor:[.5,0]}),this.text.position.set(0,34),this.container.addChild(this.text))}action(e,t,n){if("flashup"===e)return this._rankChangeIsUp=!0,void(this._rankChangeDecay=20);if("flashdown"===e)return this._rankChangeIsUp=!1,void(this._rankChangeDecay=16);if("bonus"!==e)return;if("minimal"===ot.video.graphics)return;if("off"===ot.video.actiontext||"some"===ot.video.actiontext)return;if(!this.container)return;this.bonusText&&this.bonusText.destroy();const s={...Pc.zenith.ns.ZENITHRANK_COLORS[Math.floor(this._rank)]??Pc.zenith.ns.ZENITHRANK_COLORS.default},i=s.r<<16|s.g<<8|s.b;this.bonusText=new d.Text("",{font:Rl.get("hun"),rasterize:"minimal"===ot.video.graphics,fontSize:Math.min(250,70+5*t),weight:600,tint:i,outlineTint:i,outlineWeight:900,outlineAlpha:.3,anchor:[.5,"ally"===n?-.5:1.5]});let o=0;switch(n){case"self_duo":o=-25*_c.x;break;case"ally":o=25*_c.x}this.bonusText.position.set(o,25),this.container.addChild(this.bonusText),this.bonusText.text=`+${Math.floor(t).toLocaleString("en-US")}\f3.${Math.floor(10*(t-Math.floor(t))).toString().padStart(1,"0")}`,this.bonusText._flashed=!1,this.bonusText._origTint=i,this.bonusText._accum=0,dc.animate(this.bonusText,{0:{"scale.x":1.5,"scale.y":1.5,"position.x":o},.5:{"scale.x":1,"scale.y":1,"position.x":o},1:{"scale.x":0,"scale.y":0,"position.x":0}},1.3,a(0,.96,1,.01),(()=>{this.bonusText.destroy(),this.bonusText=null}))}progress(e){if(!this.container)return;this._t+=e,this.text&&(this.text.text=ot.video.lowrescounters||"minimal"===ot.video.graphics?Math.floor(this.parent.S.stats.zenith.altitude).toLocaleString("en-US"):`${Math.floor(this.parent.S.stats.zenith.altitude).toLocaleString("en-US")}\f3.${Math.floor(10*(this.parent.S.stats.zenith.altitude-Math.floor(this.parent.S.stats.zenith.altitude))).toString().padStart(1,"0")}`),this._rank=null===this._rank?this.parent.S.stats.zenith.rank:this.parent.S.stats.zenith.rank+(this._rank-this.parent.S.stats.zenith.rank)*Math.pow(.9,e),(ot.video.lowrescounters||"minimal"===ot.video.graphics)&&(this._rank=this.parent.S.stats.zenith.rank);const t=this._rank,n=Math.floor(t),s=t-n,i={...Pc.zenith.ns.ZENITHRANK_COLORS[n]??Pc.zenith.ns.ZENITHRANK_COLORS.default},o={...Pc.zenith.ns.ZENITHRANK_COLORS[n+1]??Pc.zenith.ns.ZENITHRANK_COLORS.default};if(s>.96)for(const e of Object.keys(i))i[e]=Math.round(i[e]+(s-.96)/.04*(o[e]-i[e]));if(this._rankChangeDecay)if(this._rankChangeIsUp){const e=this._rankChangeDecay%4/4;for(const t of Object.keys(i))i[t]=Math.round(i[t]+(255-i[t])*e);for(const t of Object.keys(o))o[t]=Math.round(o[t]+(255-o[t])*e)}else{const e=this._rankChangeDecay%8/8;for(const t of Object.keys(i))i[t]=Math.round(i[t]*(1-e));for(const t of Object.keys(o))o[t]=Math.round(o[t]*(1-e))}this._rankChangeDecay=Math.max(this._rankChangeDecay-e,0);const a=i.r<<16|i.g<<8|i.b,r=i.sr<<16|i.sg<<8|i.sb;this.text&&(this.text.tint=i.tr<<16|i.tg<<8|i.tb,this.text.outlineTint=a,"minimal"!==ot.video.graphics&&(this.text.misalignment=[0,Math.max(0,(this.text.misalignment[1]??0)-e/10,Math.min(10,2*this.parent.S.zenith.bonusremaining)),0],this.text.misalignmentSeed=Math.floor(performance.now()))),this._progressor.base.tint=a,this._progressor.filled.tint=a,this._progressor.filled.alpha=n>=2;for(const[n,s]of Object.entries(this._layers)){switch(n){case"active":s.host.alpha=Math.max(.3,Math.min(1,1-.005*(this.parent.ctx.esm.frame-this.parent.S.zenith.rank_locked_until)));break;case"glow":s.host.alpha=Math.max(0,s.host.alpha-e/60,Math.min(1,.6*this.parent.S.zenith.bonusremaining))}if(!(s.host.alpha<=0))for(const[i,o]of Object.entries(s.els)){if(o.tint=("glow"===n?r:a)||14042715,"phase"===i){o.alpha=Math.max(0,o.alpha-e/15,Math.min(1,8*this.parent.S.zenith.bonusremaining));continue}o.alpha=Math.max(0,Math.min(1,15*(t-Pc.zenith.ns.ZENITHRANK_GEOS.els[i].rank+.05+.03*Math.sin(this._t/o.__xphase))))}}this._progressor.filling.material.tint=o.r<<16|o.g<<8|o.b;let l=0,c=0;s<.337?(l=s/.337*.1759,c=l):s<.484?(l=.1157+(s-.337)/.147*.1048,c=.1867+(s-.337)/.147*.1048):(l=.2301+(s-.484)/.516*.2699,c=l);const p=Pc.zenith.ns.ZENITHRANK_GEOS.els[1],h=this._progressor.filling.geometry.getBuffer("positions"),d=p.w/2;h.data[0]=d-l*p.w,h.data[2]=d-c*p.w,h.data[4]=d+l*p.w,h.data[6]=d+c*p.w;const u=this._progressor.filling.geometry.getBuffer("uvs");u.data[0]=(p.u+d-l*p.w)/1024,u.data[2]=(p.u+d-c*p.w)/1024,u.data[4]=(p.u+d+l*p.w)/1024,u.data[6]=(p.u+d+c*p.w)/1024,h.update(),u.update();const _=nc(this.container,0,0);xl.play("zenith_rank",{x:_.x,y:_.y,power:(n-1)/7*(1+3*this._layers.glow.host.alpha),color:r,dT:e,scale:this.parent.CS,back:!this.parent.IsFullMode()}),this.bonusText&&(this.bonusText._accum+=e,this.bonusText._accum>=2&&(this.bonusText.tint=this.bonusText._flashed?this.bonusText._origTint:16777215,this.bonusText._flashed=!this.bonusText._flashed,this.bonusText._accum-=2))}},Pc.zenith.ns.ZENITHRANK_COLORS={1:{r:0,g:0,b:0,sr:0,sg:0,sb:0,tr:255,tg:255,tb:255},2:{r:228,g:57,b:33,sr:255,sg:107,sb:37,tr:255,tg:107,tb:37},3:{r:255,g:180,b:0,sr:255,sg:237,sb:34,tr:255,tg:237,tb:34},4:{r:130,g:252,b:64,sr:201,sg:252,sb:36,tr:201,tg:252,tb:36},5:{r:60,g:166,b:255,sr:195,sg:116,sb:255,tr:71,tg:235,tb:255},6:{r:255,g:70,b:218,sr:255,sg:204,sb:181,tr:255,tg:204,tb:181},7:{r:255,g:196,b:142,sr:255,sg:162,sb:75,tr:255,tg:215,tb:120},8:{r:153,g:255,b:198,sr:66,sg:255,sb:101,tr:66,tg:255,tb:101},9:{r:0,g:247,b:255,sr:115,sg:162,sb:255,tr:71,tg:255,tb:183},10:{r:255,g:187,b:234,sr:249,sg:133,sb:255,tr:253,tg:245,tb:188},11:{r:255,g:255,b:255,sr:255,sg:255,sb:255,tr:255,tg:255,tb:255},default:{r:255,g:255,b:255,sr:255,sg:255,sb:255,tr:255,tg:255,tb:255}},Pc.zenith.ns.ZENITHRANK_GEOS={padding:10,layers:{idle:{x:0,y:0},active:{x:0,y:330},glow:{x:0,y:660}},els:{1:{x:85,y:75,w:830,h:60,u:10,v:10,rank:2},2:{x:443,y:142,w:114,h:58,u:10,v:90,rank:2},"3L":{x:360,y:142,w:110,h:41,u:150,v:90,rank:3},"3R":{x:530,y:142,w:110,h:41,u:280,v:90,rank:3},"4L":{x:239,y:95,w:129,h:69,u:410,v:90,rank:4},"4R":{x:633,y:95,w:129,h:69,u:560,v:90,rank:4},"5L":{x:176,y:95,w:84,h:35,u:720,v:90,rank:5},"5C":{x:448,y:190,w:105,h:52,u:10,v:170,rank:5},"5R":{x:741,y:95,w:84,h:35,u:830,v:90,rank:5},"6LA":{x:37,y:95,w:137,h:12,u:140,v:180,rank:6},"6RA":{x:826,y:95,w:137,h:12,u:300,v:180,rank:6},"6LB":{x:328,y:171,w:148,h:60,u:130,v:210,rank:6},"6RB":{x:525,y:171,w:148,h:60,u:300,v:210,rank:6},"7LA":{x:138,y:114,w:210,h:50,u:710,v:150,rank:7},"7RA":{x:652,y:114,w:210,h:50,u:470,v:180,rank:7},"7LB":{x:378,y:195,w:62,h:26,u:10,v:240,rank:7},"7RB":{x:561,y:195,w:62,h:26,u:10,v:290,rank:7},"8L":{x:209,y:27,w:94,h:41,u:890,v:220,rank:8},"8R":{x:698,y:27,w:94,h:41,u:770,v:280,rank:8},"9L":{x:143,y:27,w:94,h:41,u:770,v:220,rank:9},"9R":{x:764,y:27,w:94,h:41,u:650,v:280,rank:9},"10L":{x:78,y:27,w:94,h:41,u:890,v:280,rank:10},"10R":{x:830,y:27,w:94,h:41,u:530,v:280,rank:10},"11L":{x:38,y:27,w:68,h:41,u:350,v:284,rank:11},"11R":{x:895,y:27,w:68,h:41,u:440,v:280,rank:11}},phase:{w:248,h:50,u:81,v:280}},Pc.zenith.ns.ZENITHRANK_TEX=new Map,Pc.zenith.ns.zenithmods=class extends zc{create(){if(this.parent.IsTinyMode())return;if(!this.parent.S.setoptions.zenith||!this.parent.S.setoptions.zenith_mods)return;switch(this.container=new o.Container,this.container.scale.set(zs(this.options.scale)),this._position="normal",this.parent.S.setoptions.zenith_duo&&(this._position="left"),this.parent.H.duoIsRight&&(this._position="right"),"normal"===this._position?this.parent.H.rightside.addChild(this.container):this.parent.H.holder.addChild(this.container),this._position){case"normal":this.container.position.set(ws(5),ws(48+15*_c.x));break;case"left":this.container.position.set(ws(-25),ws(25+_c.x*this.parent.ctx.H));break;case"right":this.container.position.set(ws(_c.x*this.parent.ctx.W-20),ws(25+_c.x*this.parent.ctx.H))}let e=0;const t=140;for(const n of Object.keys(this.options.textures)){if(!this.parent.S.setoptions.zenith_mods.includes(n))continue;const s=new o.Sprite(this.options.textures[n]);switch(this._position){case"normal":s.position.set(70*Math.floor(e/2),[0,t,70,210][e%4]);break;case"left":s.position.set(e/2*t,[0,70][e%2]);break;case"right":s.position.set(e/2*t*-1,[0,70][e%2])}this.container.addChild(s),e++}}},Pc.zenith.ns.username=class extends zc{create(){this.parent.S.setoptions.display_username&&(this.parent.IsTinyMode()&&"low"===ot.video.caching||(this.text=new d.Text(this.parent.S.setoptions.username.toUpperCase()||"",{font:Rl.get("hun"),rasterize:"minimal"===ot.video.graphics,fontSize:ws(14),weight:700,tint:0,alpha:.65,anchor:[.5,0],...this.options.font_opts}),this.text.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*this.parent.ctx.H+3)),this.parent.H.holder.addChild(this.text)))}action(e){switch(e){case"startfire":{const e=nc(this.parent.H.stackobj,0,0);xl.play("fire_flair",{x:e.x,y:e.y,w:this.parent.ctx.W*this.parent.CS,h:this.parent.ctx.H*this.parent.CS});break}case"continuefire":if(this.parent.IsTinyMode()){const e=nc(this.parent.H.holder,ws(_c.x*this.parent.ctx.Wh),ws(_c.x*this.parent.ctx.Hh));xl.play("fire_burning",{x:e.x,y:e.y})}else{const e=nc(this.parent.H.stackobj,0,0);xl.play("fire_burn",{x:e.x,y:e.y,w:this.parent.ctx.W*this.parent.CS,h:this.parent.ctx.H*this.parent.CS})}}}},Pc.zenith.ns.zenithblighted=class extends zc{_t=0;create(){"doublehole_reversed"===this.parent.S.setoptions.zenith_mods[0]&&this.parent.IsFullMode()&&(this.text=new d.Text("BLIGHTED",{font:Rl.get("hun"),rasterize:"minimal"===ot.video.graphics,fontSize:ws(24),weight:700,tint:16711769,outlineTint:0,outlineWeight:900,outlineAlpha:.6}),this.text.position.set(ws(_c.x*this.parent.ctx.W+26),ws(_c.x*this.parent.ctx.H-20)),this.parent.H.holder.addChild(this.text),this.text.visible=this.parent.S.zenith.blighted)}progress(e){this.text&&(this._t+=e,this.text.visible=this.parent.S.zenith.blighted,this.parent.S.zenith.blighted&&(this.text.tint=16711769|Math.round((Math.sin(this._t/10)+1)/2*208)<<8))}},Pc.zenith.ns.boardflash=class extends Tc{create(e=16777215){if(this.spr&&this.delete(),"minimal"!==ot.video.graphics&&!this.parent.IsTinyMode())return this.spr=new o.Sprite(this.parent.H.duoIsRight?this.options.texture_inv:this.options.texture),this.spr.anchor.set(.5,.5),this.spr.position.set(ws(_c.x*this.parent.ctx.Wh),ws(_c.x*this.parent.ctx.Hh)),this.spr.scale.set(zs(this.options.scale),zs(this.options.scale)),this.parent.H.holder.addChild(this.spr),dc.animate(this.spr,{0:{alpha:1},1:{alpha:0}},1,a(.11,.42,.58,1),(()=>{this.delete()})),this}delete(){this.spr&&(this.spr.destroy(),this.spr=null)}},Pc.zenith.ns.zenithprompts=class extends zc{_prompts=[];create(){this.parent.IsTinyMode()||this.parent.S.setoptions.zenith&&this.parent.S.setoptions.zenith_duo&&(this.container=new o.Container,this.container.scale.set(zs(1)),this.container.position.set(ws(5),0),this.container.zIndex=10,this.container.visible=!1,this.parent.H.holder.addChild(this.container),this.chain1=new o.Sprite(this.options.textures.chain1),this.chain1.anchor.set(.5,.5),this.chain1.position.set(Ss(_c.x*this.parent.ctx.Wh),Ss(_c.x*this.parent.ctx.H*.15)),this.parent.H.tintables.push(this.chain1),this.container.addChild(this.chain1),this.chain2=new o.Sprite(this.options.textures.chain2),this.chain2.anchor.set(.5,.5),this.chain2.position.set(Ss(_c.x*this.parent.ctx.Wh),Ss(_c.x*this.parent.ctx.H*.35)),this.parent.H.tintables.push(this.chain2),this.container.addChild(this.chain2),this.chain3=new o.Sprite(this.options.textures.chain3),this.chain3.anchor.set(.5,.5),this.chain3.position.set(Ss(_c.x*this.parent.ctx.Wh),Ss(_c.x*this.parent.ctx.H*.6)),this.parent.H.tintables.push(this.chain3),this.container.addChild(this.chain3),this.chain4=new o.Sprite(this.options.textures.chain4),this.chain4.anchor.set(.5,.5),this.chain4.position.set(Ss(_c.x*this.parent.ctx.Wh),Ss(_c.x*this.parent.ctx.H*.75)),this.parent.H.tintables.push(this.chain4),this.container.addChild(this.chain4),this.lock1=new o.Sprite(this.options.textures.lock1),this.lock1.anchor.set(.5,.5),this.lock1.position.set(Ss(_c.x*this.parent.ctx.Wh),Ss(_c.x*this.parent.ctx.H*.3)),this.parent.H.tintables.push(this.lock1),this.container.addChild(this.lock1),this.lock2=new o.Sprite(this.options.textures.lock2),this.lock2.anchor.set(.5,.5),this.lock2.position.set(Ss(_c.x*this.parent.ctx.Wh),Ss(_c.x*this.parent.ctx.H*.57)),this.parent.H.tintables.push(this.lock2),this.container.addChild(this.lock2),this.lock3=new o.Sprite(this.options.textures.lock3),this.lock3.anchor.set(.5,.5),this.lock3.position.set(Ss(_c.x*this.parent.ctx.Wh),Ss(_c.x*this.parent.ctx.H*.8)),this.parent.H.tintables.push(this.lock3),this.container.addChild(this.lock3),this.lc1=new o.Container,this.lc1.angle=this.options.angles.lock1,this.lc1.position.set(Ss(_c.x*this.parent.ctx.Wh)+this.options.offsets.lock1[0],Ss(_c.x*this.parent.ctx.H*.3)+this.options.offsets.lock1[1]),this.container.addChild(this.lc1),this.lc2=new o.Container,this.lc2.angle=this.options.angles.lock2,this.lc2.position.set(Ss(_c.x*this.parent.ctx.Wh)+this.options.offsets.lock2[0],Ss(_c.x*this.parent.ctx.H*.57)+this.options.offsets.lock2[1]),this.container.addChild(this.lc2),this.lc3=new o.Container,this.lc3.angle=this.options.angles.lock3,this.lc3.position.set(Ss(_c.x*this.parent.ctx.Wh)+this.options.offsets.lock3[0],Ss(_c.x*this.parent.ctx.H*.8)+this.options.offsets.lock3[1]),this.container.addChild(this.lc3),this.lock1flash=new o.Sprite(this.options.textures.lockflash),this.lock1flash.anchor.set(.5,.5),this.lock1flash.alpha=0,this.lc1.addChild(this.lock1flash),this.lock2flash=new o.Sprite(this.options.textures.lockflash),this.lock2flash.anchor.set(.5,.5),this.lock2flash.alpha=0,this.lc2.addChild(this.lock2flash),this.lock3flash=new o.Sprite(this.options.textures.lockflash),this.lock3flash.anchor.set(.5,.5),this.lock3flash.alpha=0,this.lc3.addChild(this.lock3flash),this.parent.IsFullMode()&&(this.label1=new d.Text("",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:45,weight:600,sharpness:.7,tint:16777215,anchor:[0,.5]}),this.label1.position.set(-380,8),this.lc1.addChild(this.label1),this.label2=new d.Text("",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:45,weight:600,sharpness:.7,tint:16777215,anchor:[0,.5]}),this.label2.position.set(-380,8),this.lc2.addChild(this.label2),this.label3=new d.Text("",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:45,weight:600,sharpness:.7,tint:16777215,anchor:[0,.5]}),this.label3.position.set(-380,8),this.lc3.addChild(this.label3),this.value1=new d.Text("",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:100,weight:700,sharpness:.8,tint:16777215,anchor:[1,.5]}),this.value1.position.set(380,10),this.lc1.addChild(this.value1),this.value2=new d.Text("",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:100,weight:700,sharpness:.8,tint:16777215,anchor:[1,.5]}),this.value2.position.set(380,10),this.lc2.addChild(this.value2),this.value3=new d.Text("",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:100,weight:700,sharpness:.8,tint:16777215,anchor:[1,.5]}),this.value3.position.set(380,10),this.lc3.addChild(this.value3)),this.parent.ctx.zthm.duoOtherSidePrompts.length&&(this.update(this.parent.ctx.zthm.duoOtherSidePrompts),this.action("fix")))}update(e){this.container&&(this._prompts=e,this.value1&&e[0]&&(this.value1.text=1===e[0].target?"":`${e[0].count}\f3/${e[0].target}`,this.value1.tint=e[0].locked?7368816:16777215,this.label1.tint=e[0].locked?7368816:16777215),this.value2&&e[1]&&(this.value2.text=1===e[1].target?"":`${e[1].count}\f3/${e[1].target}`,this.value2.tint=e[1].locked?7368816:16777215,this.label2.tint=e[1].locked?7368816:16777215),this.value3&&e[2]&&(this.value3.text=1===e[2].target?"":`${e[2].count}\f3/${e[2].target}`,this.value3.tint=e[2].locked?7368816:16777215,this.label3.tint=e[2].locked?7368816:16777215))}action(e,t){if(this.container)switch(e){case"create":this.container.visible=!0,this.chain1.renderable=!1,this.chain2.renderable=!1,this.chain3.renderable=!1,this.chain4.renderable=!1,setTimeout((()=>{this.chain1.renderable=!0,dc.animate(this.chain1,{0:{"scale.x":1.3,"scale.y":1.3},1:{"scale.x":1,"scale.y":1}},.15,a(.51,.12,.86,.7))}),400),setTimeout((()=>{this.chain2.renderable=!0,dc.animate(this.chain2,{0:{"scale.x":1.3,"scale.y":1.3},1:{"scale.x":1,"scale.y":1}},.15,a(.51,.12,.86,.7))}),500),setTimeout((()=>{this.chain3.renderable=!0,dc.animate(this.chain3,{0:{"scale.x":1.3,"scale.y":1.3},1:{"scale.x":1,"scale.y":1}},.15,a(.51,.12,.86,.7))}),350),setTimeout((()=>{this.chain4.renderable=!0,dc.animate(this.chain4,{0:{"scale.x":1.3,"scale.y":1.3},1:{"scale.x":1,"scale.y":1}},.15,a(.51,.12,.86,.7))}),450),this._prompts[0]?(this.lock1.visible=!0,this.lc1.visible=!0,this.lock1.renderable=!1,this.lc1.renderable=!1,setTimeout((()=>{this.lock1.renderable=!0,this.lc1.renderable=!0,dc.animate(this.lock1,{0:{"scale.x":1.7,"scale.y":1.7},1:{"scale.x":1,"scale.y":1}},.15,a(.51,.12,.86,.7)),dc.animate(this.lc1,{0:{"scale.x":1.7,"scale.y":1.7},1:{"scale.x":1,"scale.y":1}},.15,a(.51,.12,.86,.7))}),600),this.lock1flash.tint=15478052,setTimeout((()=>{dc.animate(this.lock1flash,{0:{alpha:1},1:{alpha:0}},.4,a(.51,.12,.86,.7))}),750),this.parent.IsFullMode()&&(this.label1.text=1===this._prompts[0].labelType||3===this._prompts[0].labelType?this._prompts[0].label.toUpperCase():this._prompts[0].label.toLowerCase(),this.label1.fontSize=3===this._prompts[0].labelType||4===this._prompts[0].labelType?45:62,this.label1.anchor.x=1===this._prompts[0].target?.5:0,this.label1.position.x=1===this._prompts[0].target?0:-380)):(this.lock1.visible=!1,this.lc1.visible=!1),this._prompts[1]?(this.lock2.visible=!0,this.lc2.visible=!0,this.lock2.renderable=!1,this.lc2.renderable=!1,setTimeout((()=>{this.lock2.renderable=!0,this.lc2.renderable=!0,dc.animate(this.lock2,{0:{"scale.x":1.7,"scale.y":1.7},1:{"scale.x":1,"scale.y":1}},.15,a(.51,.12,.86,.7)),dc.animate(this.lc2,{0:{"scale.x":1.7,"scale.y":1.7},1:{"scale.x":1,"scale.y":1}},.15,a(.51,.12,.86,.7))}),650),this.lock2flash.tint=15478052,setTimeout((()=>{dc.animate(this.lock2flash,{0:{alpha:1},1:{alpha:0}},.4,a(.51,.12,.86,.7))}),800),this.parent.IsFullMode()&&(this.label2.text=1===this._prompts[1].labelType||3===this._prompts[1].labelType?this._prompts[1].label.toUpperCase():this._prompts[1].label.toLowerCase(),this.label2.fontSize=3===this._prompts[1].labelType||4===this._prompts[1].labelType?45:62,this.label2.anchor.x=1===this._prompts[1].target?.5:0,this.label2.position.x=1===this._prompts[1].target?0:-380)):(this.lock2.visible=!1,this.lc2.visible=!1),this._prompts[2]?(this.lock3.visible=!0,this.lc3.visible=!0,this.lock3.renderable=!1,this.lc3.renderable=!1,setTimeout((()=>{this.lock3.renderable=!0,this.lc3.renderable=!0,dc.animate(this.lock3,{0:{"scale.x":1.7,"scale.y":1.7},1:{"scale.x":1,"scale.y":1}},.15,a(.51,.12,.86,.7)),dc.animate(this.lc3,{0:{"scale.x":1.7,"scale.y":1.7},1:{"scale.x":1,"scale.y":1}},.15,a(.51,.12,.86,.7))}),700),this.lock3flash.tint=15478052,setTimeout((()=>{dc.animate(this.lock3flash,{0:{alpha:1},1:{alpha:0}},.4,a(.51,.12,.86,.7))}),850),this.parent.IsFullMode()&&(this.label3.text=1===this._prompts[2].labelType||3===this._prompts[2].labelType?this._prompts[2].label.toUpperCase():this._prompts[2].label.toLowerCase(),this.label3.fontSize=3===this._prompts[2].labelType||4===this._prompts[2].labelType?45:62,this.label3.anchor.x=1===this._prompts[2].target?.5:0,this.label3.position.x=1===this._prompts[2].target?0:-380)):(this.lock3.visible=!1,this.lc3.visible=!1);break;case"advance":for(let e=0;e<this._prompts.length;e++)this._prompts[e].id===t&&(this[`lock${e+1}flash`].tint=16760343,dc.animate(this[`lock${e+1}`],{0:{"pivot.y":0},.5:{"pivot.y":50},1:{"pivot.y":0}},.2,a(.06,.46,.6,.4)),dc.animate(this[`lc${e+1}`],{0:{"pivot.y":0},.5:{"pivot.y":50},1:{"pivot.y":0}},.2,a(.06,.46,.6,.4)),dc.animate(this[`lock${e+1}flash`],{0:{alpha:0},.2:{alpha:1.5},1:{alpha:0}},.5,a(.06,.46,.6,.4)));break;case"nix":for(let e=0;e<this._prompts.length;e++)this._prompts[e].id===t&&(this[`lock${e+1}flash`].tint=15478052,dc.animate(this[`lock${e+1}flash`],{0:{alpha:0},.2:{alpha:1.5},1:{alpha:0}},.9,a(.06,.46,.6,.4)));break;case"clear":for(let e=0;e<this._prompts.length;e++)this._prompts[e].id===t&&(this[`lock${e+1}flash`].tint=16777215,dc.animate(this[`lock${e+1}`],{0:{"pivot.y":0},.5:{"pivot.y":50},1:{"pivot.y":0}},.2,a(.06,.46,.6,.4)),dc.animate(this[`lc${e+1}`],{0:{"pivot.y":0},.5:{"pivot.y":50},1:{"pivot.y":0}},.2,a(.06,.46,.6,.4)),dc.animate(this[`lock${e+1}flash`],{0:{alpha:0},.2:{alpha:2},.4:{alpha:0},.6:{alpha:2},.8:{alpha:0},1:{alpha:2}},.2),setTimeout((()=>{const t=nc(this[`lc${e+1}`],0,0);xl.play("zenith_lockbreak",{x:t.x,y:t.y,scale:this.parent.CS,id:e}),this[`lock${e+1}`].visible=!1,this[`lc${e+1}`].visible=!1}),200));break;case"revive":for(let e=0;e<4;e++)setTimeout((()=>{dc.animate(this[`chain${e+1}`],{0:{"pivot.y":0},.5:{"pivot.y":150},1:{"pivot.y":0}},.16,a(.06,.46,.6,.4))}),20*e),setTimeout((()=>{const t=nc(this[`chain${e+1}`],0,0);xl.play("zenith_chainbreak",{x:t.x,y:t.y,scale:this.parent.CS,id:e})}),200);setTimeout((()=>{this.container.visible=!1}),200);break;case"fix":if(!this._prompts||!this._prompts.length||!this.parent.S.zenith.incapacitated)return void(this.container.visible=!1);this.container.visible=!0,this._prompts[0]&&!this._prompts[0].complete?(this.lock1.visible=!0,this.lc1.visible=!0,this.parent.IsFullMode()&&(this.label1.text=1===this._prompts[0].labelType||3===this._prompts[0].labelType?this._prompts[0].label.toUpperCase():this._prompts[0].label.toLowerCase(),this.label1.fontSize=3===this._prompts[0].labelType||4===this._prompts[0].labelType?45:62,this.label1.anchor.x=1===this._prompts[0].target?.5:0,this.label1.position.x=1===this._prompts[0].target?0:-380)):(this.lock1.visible=!1,this.lc1.visible=!1),this._prompts[1]&&!this._prompts[1].complete?(this.lock2.visible=!0,this.lc2.visible=!0,this.parent.IsFullMode()&&(this.label2.text=1===this._prompts[1].labelType||3===this._prompts[1].labelType?this._prompts[1].label.toUpperCase():this._prompts[1].label.toLowerCase(),this.label2.fontSize=3===this._prompts[1].labelType||4===this._prompts[1].labelType?45:62,this.label2.anchor.x=1===this._prompts[1].target?.5:0,this.label2.position.x=1===this._prompts[1].target?0:-380)):(this.lock2.visible=!1,this.lc2.visible=!1),this._prompts[2]&&!this._prompts[2].complete?(this.lock3.visible=!0,this.lc3.visible=!0,this.parent.IsFullMode()&&(this.label3.text=1===this._prompts[2].labelType||3===this._prompts[2].labelType?this._prompts[2].label.toUpperCase():this._prompts[2].label.toLowerCase(),this.label3.fontSize=3===this._prompts[2].labelType||4===this._prompts[2].labelType?45:62,this.label3.anchor.x=1===this._prompts[2].target?.5:0,this.label3.position.x=1===this._prompts[2].target?0:-380)):(this.lock3.visible=!1,this.lc3.visible=!1)}}},Pc.zenith.ns.zenithpromptsself=class extends zc{_prompts=[];_activePrompt=null;create(){this.parent.IsFullMode()&&this.parent.S.setoptions.zenith&&this.parent.S.setoptions.zenith_duo&&(this.container=new o.Container,this.container.scale.set(zs(1.15)),this.container.position.set(ws(_c.x*this.parent.ctx.Wh),ws(3.25*_c.x)),this.container.zIndex=10,this.container.visible=!1,this.parent.H.holder.addChild(this.container),this.label=new d.Text("",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:45,weight:600,sharpness:.7,tint:16657920,anchor:[0,.5]}),this.label.position.set(-380,0),this.container.addChild(this.label),this.value=new d.Text("",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:100,weight:700,sharpness:.8,tint:16657920,anchor:[1,.5]}),this.value.position.set(380,2),this.container.addChild(this.value),this.shout=new d.Text("",{font:Rl.get("hun"),rasterize:["minimal","low"].includes(ot.video.graphics),fontSize:140,weight:600,sharpness:.7,tint:16657920,anchor:[.5,.5]}),this.shout.position.set(0,0),this.container.addChild(this.shout),this.parent.S.zenith.reviveprompts.length&&(this.update(this.parent.S.zenith.reviveprompts),this.action("fix")),["minimal","low"].includes(ot.video.graphics)||(this.activeFade=new Pc.generic.ns._helper_activefade({positions:[[this.parent.ctx.Wh-3,this.parent.ctx.B+2],[this.parent.ctx.Wh-2,this.parent.ctx.B+3],[this.parent.ctx.Wh-1,this.parent.ctx.B+2],[this.parent.ctx.Wh+0,this.parent.ctx.B+3],[this.parent.ctx.Wh+1,this.parent.ctx.B+2],[this.parent.ctx.Wh+2,this.parent.ctx.B+3]],elements:[this.label,this.value],alphaHigh:.8,alphaLow:.3,ctx:this.parent.ctx})))}update(e){this.container&&(this._prompts=e,this._activePrompt||(this._activePrompt=this._prompts.find((e=>!e.complete&&!e.locked))),this.value.text=this._activePrompt?1===this._activePrompt.target?"":`${this._activePrompt.count}\f3/${this._activePrompt.target}`:"")}action(e,t){if(this.container)switch(e){case"create":this.container.visible=!0,this.shout.visible=!0,this.shout.renderable=!0,this.shout.text="REVIVE!",this.shout.tint=16657920,dc.animate(this.shout,{0:{"pivot.x":this.parent.H.duoIsRight?700:-700,"pivot.y":0},1:{"pivot.x":0,"pivot.y":0}},.3,a(.06,.46,.44,1)),setTimeout((()=>{dc.animate(this.shout,{0:{"scale.x":1,"scale.y":1},.25:{"scale.x":1.1,"scale.y":1.1},.5:{"scale.x":1,"scale.y":1},.75:{"scale.x":1.1,"scale.y":1.1},1:{"scale.x":1,"scale.y":1}},.2,a(.03,.34,.7,.99))}),500),setTimeout((()=>{dc.animate(this.shout,{0:{"scale.x":1,"scale.y":1},.25:{"scale.x":1.1,"scale.y":1.1},.5:{"scale.x":1,"scale.y":1},.75:{"scale.x":1.1,"scale.y":1.1},1:{"scale.x":1,"scale.y":1}},.2,a(.03,.34,.7,.99))}),500),setTimeout((()=>{dc.animate(this.shout,{0:{"pivot.y":0,alpha:1},1:{"pivot.y":200,alpha:0}},.2,a(.54,.03,.98,.69))}),800),setTimeout((()=>{this.shout.renderable=!1}),1e3),this._activePrompt=this._prompts.find((e=>!e.complete&&!e.locked)),this._activePrompt?(this.label.visible=!0,this.value.visible=!0,this.label.renderable=!1,this.value.renderable=!1,this.label.text=1===this._activePrompt.labelType||3===this._activePrompt.labelType?this._activePrompt.label.toUpperCase():this._activePrompt.label.toLowerCase(),this.value.text=1===this._activePrompt.target?"":`${this._activePrompt.count}\f3/${this._activePrompt.target}`,this.label.fontSize=3===this._activePrompt.labelType||4===this._activePrompt.labelType?45:62,this.label.anchor.x=1===this._activePrompt.target?.5:0,this.label.position.x=1===this._activePrompt.target?0:-380,setTimeout((()=>{this.label.renderable=!0,this.value.renderable=!0,dc.animate(this.label,{0:{"pivot.y":-200,alpha:0},1:{"pivot.y":0,alpha:1}},.2,a(.54,.03,.98,.69)),dc.animate(this.value,{0:{"pivot.y":-200,alpha:0},1:{"pivot.y":0,alpha:1}},.2,a(.54,.03,.98,.69))}),800)):(this.label.visible=!1,this.value.visible=!1);break;case"advance":if(!this._activePrompt)break;if(this._activePrompt.id!==t)break;dc.animate(this.label,{0:{"pivot.y":0},.5:{"pivot.y":50},1:{"pivot.y":0}},.2,a(.06,.46,.6,.4)),dc.animate(this.value,{0:{"pivot.y":0},.5:{"pivot.y":50},1:{"pivot.y":0}},.2,a(.06,.46,.6,.4));break;case"nix":if(!this._activePrompt)break;if(this._activePrompt.id!==t)break;dc.animate(this.label,{0:{"pivot.y":0},.5:{"pivot.y":-50},1:{"pivot.y":0}},.2,a(.06,.46,.6,.4)),dc.animate(this.value,{0:{"pivot.y":0},.5:{"pivot.y":-50},1:{"pivot.y":0}},.2,a(.06,.46,.6,.4));break;case"clear":if(!this._activePrompt)break;if(this._activePrompt.id!==t)break;this.label.renderable=!1,this.value.renderable=!1,this.shout.renderable=!0,this.shout.alpha=1,this.shout.text="CLEAR!",this.shout.tint=16675328,dc.animate(this.shout,{0:{"pivot.x":0,"pivot.y":0},.5:{"pivot.x":0,"pivot.y":50},1:{"pivot.x":0,"pivot.y":0}},.2,a(.06,.46,.6,.4)),setTimeout((()=>{dc.animate(this.shout,{0:{"pivot.x":0,"pivot.y":0,alpha:1},1:{"pivot.x":this.parent.H.duoIsRight?700:-700,"pivot.y":0,alpha:0}},.2,a(.54,.03,.98,.69))}),300),this._activePrompt=this._prompts.find((e=>!e.complete&&!e.locked)),this._activePrompt?(this.label.text=1===this._activePrompt.labelType||3===this._activePrompt.labelType?this._activePrompt.label.toUpperCase():this._activePrompt.label.toLowerCase(),this.value.text=1===this._activePrompt.target?"":`${this._activePrompt.count}\f3/${this._activePrompt.target}`,this.label.fontSize=3===this._activePrompt.labelType||4===this._activePrompt.labelType?45:62,this.label.anchor.x=1===this._activePrompt.target?.5:0,this.label.position.x=1===this._activePrompt.target?0:-380,setTimeout((()=>{this.label.renderable=!0,this.value.renderable=!0,dc.animate(this.label,{0:{"pivot.y":-200,alpha:0},1:{"pivot.y":0,alpha:1}},.2,a(.54,.03,.98,.69)),dc.animate(this.value,{0:{"pivot.y":-200,alpha:0},1:{"pivot.y":0,alpha:1}},.2,a(.54,.03,.98,.69))}),300)):(this.label.visible=!1,this.value.visible=!1);break;case"revive":this.label.renderable=!1,this.value.renderable=!1,this.shout.renderable=!0,this.shout.alpha=1,this.shout.text="REVIVED!",this.shout.tint=16696832,dc.animate(this.shout,{0:{"pivot.x":0,"pivot.y":0},.5:{"pivot.x":0,"pivot.y":50},1:{"pivot.x":0,"pivot.y":0}},.2,a(.06,.46,.6,.4)),setTimeout((()=>{dc.animate(this.shout,{0:{"pivot.x":0,"pivot.y":0,alpha:1},1:{"pivot.x":this.parent.H.duoIsRight?700:-700,"pivot.y":0,alpha:0}},.2,a(.54,.03,.98,.69))}),300),setTimeout((()=>{this.container.visible=!1}),500);break;case"fix":if(!this._prompts||!this._prompts.length)return void(this.container.visible=!1);this.container.visible=!0,this.shout.visible=!0,this.shout.renderable=!1,this.shout.tint=16657920,this._activePrompt=this._prompts.find((e=>!e.complete&&!e.locked)),this._activePrompt?(this.label.visible=!0,this.value.visible=!0,this.label.renderable=!0,this.value.renderable=!0,this.label.text=1===this._activePrompt.labelType||3===this._activePrompt.labelType?this._activePrompt.label.toUpperCase():this._activePrompt.label.toLowerCase(),this.label.fontSize=3===this._activePrompt.labelType||4===this._activePrompt.labelType?45:62,this.label.anchor.x=1===this._activePrompt.target?.5:0,this.label.position.x=1===this._activePrompt.target?0:-380):(this.label.visible=!1,this.value.visible=!1)}}progress(e){this.activeFade&&this.activeFade.progress(e)}},Pc.zenith.ns.zenithgarbageahead=class extends zc{create(){this.parent.S.setoptions.zenith&&this.parent.S.setoptions.zenith_mods.includes("volatile_reversed")&&(this.parent.IsTinyMode()||(this.els=this.options.textures.map((e=>{const t=new o.Sprite(e);return t.anchor.set(.5,0),t.scale.set(zs(1)),t.renderable=!1,t.zIndex=10,this.parent.H.holder.addChild(t),t})),this._t=0))}progress(e){if(!this.els)return;this._t+=e;let t=0;for(const e of this.els){const n=t++,s=this.parent.S.zenith.garbageahead[n];null==s?e.renderable=!1:(e.renderable=!0,e.position.x=ws(_c.x*(s+.5)),0===n&&this.parent.ctx.atm.GetPendingGarbageCount(!0)?(e.tint=16777215,e.position.y=ws(_c.x*this.parent.ctx.H+6*Math.sin(this._t/20)+4)):(e.tint=this.parent.H.holderstate.ctr<<16|this.parent.H.holderstate.ctg<<8|this.parent.H.holderstate.ctb,e.position.y=ws(_c.x*this.parent.ctx.H+10)))}}},Pc.zenith_expert.ns.Board=class extends Pc.zenith.ns.Board{_init(){super._init(),this.textures.set("board",o.BaseTexture.from(`/res/skins/board/zenith/expert${Hc}.png`)),this.textures.get("board").setStyle(o.settings.SCALE_MODE,o.MIPMAP_MODES.OFF)}},Pc.zenith_duoleft.ns.Board=class extends Pc.zenith.ns.Board{_init(){super._init(),this.textures.set("board",o.BaseTexture.from(`/res/skins/board/zenith/duoleft${Hc}.png`))}constructor(e){super(e),this.S.setoptions.zenith&&(this.elements.set("zenithrank",new Pc.zenith.ns.zenithrank(this,{texture:this.textures.get("zenithrank"),texture_chip:new o.Texture(this.textures.get("board"),new o.Rectangle(2506*Rc,2313*Rc,458*Rc,110*Rc))})),this.progressive.set("zenithrank",this.elements.get("zenithrank")),this.elements.set("zenithpromptsself",new Pc.zenith.ns.zenithpromptsself(this,{})),this.progressive.set("zenithpromptsself",this.elements.get("zenithpromptsself")),this.elements.set("zenithprompts",new Pc.zenith.ns.zenithprompts(this,{textures:{chain1:new o.Texture(this.textures.get("board"),new o.Rectangle(3021*Rc,2286*Rc,1063*Rc,403*Rc)),chain2:new o.Texture(this.textures.get("board"),new o.Rectangle(3021*Rc,2734*Rc,1063*Rc,356*Rc)),chain3:new o.Texture(this.textures.get("board"),new o.Rectangle(3021*Rc,3099*Rc,1063*Rc,648*Rc)),chain4:new o.Texture(this.textures.get("board"),new o.Rectangle(3021*Rc,3752*Rc,1063*Rc,304*Rc)),lock1:new o.Texture(this.textures.get("board"),new o.Rectangle(1954*Rc,2979*Rc,1063*Rc,304*Rc)),lock2:new o.Texture(this.textures.get("board"),new o.Rectangle(1954*Rc,3333*Rc,1063*Rc,352*Rc)),lock3:new o.Texture(this.textures.get("board"),new o.Rectangle(1954*Rc,3716*Rc,1063*Rc,365*Rc)),lockflash:new o.Texture(this.textures.get("board"),new o.Rectangle(2132*Rc,2795*Rc,858*Rc,155*Rc))},angles:{lock1:-5.37,lock2:8.55,lock3:-9.62},offsets:{lock1:[0,14],lock2:[9,16],lock3:[4,18]}})))}},Pc.zenith_duoright.ns.Board=class extends Pc.zenith.ns.Board{_init(){super._init(),this.textures.set("board",o.BaseTexture.from(`/res/skins/board/zenith/duoright${Hc}.png`)),this.textures.set("zenithrank",null)}constructor(e){super(e),this._init(),this.elements.delete("counter1"),this.elements.delete("counter2"),this.elements.delete("counter3"),this.elements.delete("counter4"),this.elements.delete("counter5"),this.elements.delete("b2b"),this.effects.delete("clear"),this.effects.delete("tspin"),this.effects.delete("also"),this.effects.delete("combo"),this.effects.delete("zenithrank"),this.progressive.delete("zenithrank"),this.elements.set("hold",new Pc.generic.ns.hold(this,{texture:new o.Texture(this.textures.get("board"),new o.Rectangle(49*Rc,69*Rc,610*Rc,710*Rc)),slices:[0,250*Rc,0,330*Rc],offsets:[150*Rc,100*Rc,0,230*Rc],texture_bg:new o.Texture(this.textures.get("board"),new o.Rectangle(199*Rc,793*Rc,460*Rc,276*Rc)),slices_bg:[0,0,0,0],offsets_bg:[3*Rc,-104*Rc,3*Rc,3*Rc],pos:[20,32],bottom:!0})),this.elements.set("holdwarn",new Pc.generic.ns.holdwarn(this,{texture:new o.Texture(this.textures.get("board"),new o.Rectangle(2,1582,92,92)),scale:1,tint:16720384,offset:[-20,516]})),this.progressive.set("holdwarn",this.elements.get("holdwarn")),this.S.setoptions.zenith&&(this.elements.set("zenithpromptsself",new Pc.zenith.ns.zenithpromptsself(this,{})),this.progressive.set("zenithpromptsself",this.elements.get("zenithpromptsself")),this.elements.set("zenithprompts",new Pc.zenith.ns.zenithprompts(this,{textures:{chain1:new o.Texture(this.textures.get("board"),new o.Rectangle(3021*Rc,2286*Rc,1063*Rc,403*Rc)),chain2:new o.Texture(this.textures.get("board"),new o.Rectangle(3021*Rc,2734*Rc,1063*Rc,356*Rc)),chain3:new o.Texture(this.textures.get("board"),new o.Rectangle(3021*Rc,3099*Rc,1063*Rc,648*Rc)),chain4:new o.Texture(this.textures.get("board"),new o.Rectangle(3021*Rc,3752*Rc,1063*Rc,304*Rc)),lock1:new o.Texture(this.textures.get("board"),new o.Rectangle(1954*Rc,2979*Rc,1063*Rc,304*Rc)),lock2:new o.Texture(this.textures.get("board"),new o.Rectangle(1954*Rc,3333*Rc,1063*Rc,352*Rc)),lock3:new o.Texture(this.textures.get("board"),new o.Rectangle(1954*Rc,3716*Rc,1063*Rc,365*Rc)),lockflash:new o.Texture(this.textures.get("board"),new o.Rectangle(2132*Rc,2795*Rc,858*Rc,155*Rc))},angles:{lock1:-5.37,lock2:8.55,lock3:-9.62},offsets:{lock1:[0,14],lock2:[9,16],lock3:[4,18]}})))}},Pc.zenith_expert_duoleft.ns.Board=class extends Pc.zenith_duoleft.ns.Board{_init(){super._init(),this.textures.set("board",o.BaseTexture.from(`/res/skins/board/zenith/expert-duoleft${Hc}.png`))}},Pc.zenith_expert_duoright.ns.Board=class extends Pc.zenith_duoright.ns.Board{_init(){super._init(),this.textures.set("board",o.BaseTexture.from(`/res/skins/board/zenith/expert-duoright${Hc}.png`))}},Pc.zenith_reversed.ns.Board=class extends Pc.zenith.ns.Board{_init(){super._init(),this.textures.set("board",o.BaseTexture.from(`/res/skins/board/zenith/reversed${Hc}.png`)),this.textures.get("board").setStyle(o.settings.SCALE_MODE,o.MIPMAP_MODES.OFF)}constructor(e){super(e);const t=this.textures.get("board");if(this.S.setoptions.zenith){const e=219;this.elements.set("zenithmods",new Pc.zenith.ns.zenithmods(this,{textures:{volatile_reversed:new o.Texture(t,new o.Rectangle(3166,2017,e,e)),nohold_reversed:new o.Texture(t,new o.Rectangle(3389,2017,e,e)),messy_reversed:new o.Texture(t,new o.Rectangle(3612,2017,e,e)),invisible_reversed:new o.Texture(t,new o.Rectangle(3835,2017,e,e)),gravity_reversed:new o.Texture(t,new o.Rectangle(3166,2240,e,e)),expert_reversed:new o.Texture(t,new o.Rectangle(3389,2240,e,e)),doublehole_reversed:new o.Texture(t,new o.Rectangle(3612,2240,e,e)),allspin_reversed:new o.Texture(t,new o.Rectangle(3835,2240,e,e))},scale:1.17})),this.elements.set("zenithgarbageahead",new Pc.zenith.ns.zenithgarbageahead(this,{textures:[new o.Texture(t,new o.Rectangle(2,1451,92,46)),new o.Texture(t,new o.Rectangle(98,1451,92,46))]})),this.progressive.set("zenithgarbageahead",this.elements.get("zenithgarbageahead")),this.elements.set("zenithblighted",new Pc.zenith.ns.zenithblighted(this,{})),this.progressive.set("zenithblighted",this.elements.get("zenithblighted"))}}};
 })();